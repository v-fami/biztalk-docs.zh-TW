---
title: 若要使用 SQL 配接器使用的連接埠繫結檔案的實體連接埠繫結設定 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 95b54357-b23d-4ed7-8e31-bd60ed3e625f
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 631914f72287b9fbd48a6695a4edf79e88d28182
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37014199"
---
# <a name="configure-a-physical-port-binding-using-a-port-binding-file-to-use-the-sql-adapter"></a><span data-ttu-id="56b71-102">設定要使用 SQL 配接器使用的連接埠繫結檔案的實體連接埠繫結</span><span class="sxs-lookup"><span data-stu-id="56b71-102">Configure a physical port binding using a port binding file to use the SQL adapter</span></span>
<span data-ttu-id="56b71-103">當您使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]產生的 SQL Server 成品，以外的結構描述檔案的中繼資料[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]也會產生的連接埠繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="56b71-103">When you use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] to generate metadata for a SQL Server artifact, other than the schema files, the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] also generates a port binding file.</span></span> <span data-ttu-id="56b71-104">您可以將此繫結檔案匯 BizTalk 應用程式建立實體傳送或接收埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-104">You can import this binding file into your BizTalk application to create a physical send or receive port.</span></span> <span data-ttu-id="56b71-105">如需匯入繫結檔案的指示，請參閱 <<c0> [ 重複使用配接器繫結](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="56b71-105">For instructions on importing binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span> <span data-ttu-id="56b71-106">如果您匯入此繫結檔案時，您不必以手動方式建立實體傳送或接收埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-106">If you import this binding file, you do not have to manually create a physical send or receive port.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="56b71-107">同時使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]，如果您未指定的字串類型的繫結屬性的值，而其預設值是 null，則該屬性繫結將無法使用繫結檔案中。</span><span class="sxs-lookup"><span data-stu-id="56b71-107">While using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], if you do not specify a value for a binding property of type string and whose default value is null then that binding property will not be available in the binding file.</span></span> <span data-ttu-id="56b71-108">您必須手動加入的繫結屬性和其值在繫結檔案中，如有必要。</span><span class="sxs-lookup"><span data-stu-id="56b71-108">You must manually add the binding property and its value in the binding file, if required.</span></span>  
  
 <span data-ttu-id="56b71-109">建立一律使用連接埠繫結檔案的連接埠建立雙向傳送埠或單向接收埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-109">Creating a port using the port binding file always creates a two-way send port or a one-way receive port.</span></span> <span data-ttu-id="56b71-110">如果您想要建立單向傳送埠，您可以建立以手動方式使用的步驟[手動設定 SQL 配接器的實體連接埠繫結](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="56b71-110">If you want to create a one-way send port, you can create it manually using the steps at [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="56b71-111">或者，您可以遵循本主題，以修改要建立單向傳送埠的連接埠繫結檔案所述的因應措施。</span><span class="sxs-lookup"><span data-stu-id="56b71-111">Or, you can follow the workarounds documented in this topic to modify the port binding file to create one-way send ports.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="56b71-112">輸入的作業，繫結檔案的連接埠一律會建立單向接收埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-112">For inbound operations, the port binding file will always create a one-way receive port.</span></span> <span data-ttu-id="56b71-113">這是因為[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]僅支援單向接收埠的輸入操作。</span><span class="sxs-lookup"><span data-stu-id="56b71-113">This is because the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] only supports one-way receive port for inbound operations.</span></span>  
> 
> [!IMPORTANT]
>  <span data-ttu-id="56b71-114">使用[!INCLUDE[addadapterwiz](../../includes/addadapterwiz-md.md)]不會建立使用您可以建立 WCF SQL 連接埠的連接埠繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="56b71-114">Using the [!INCLUDE[addadapterwiz](../../includes/addadapterwiz-md.md)] does not create a port binding file using which you can create a WCF-SQL port.</span></span> <span data-ttu-id="56b71-115">不過，您可以進行一些變更連接埠繫結檔案所產生[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]並用它來建立 WCF SQL 連接埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-115">However, you could make some changes to the port binding file generated by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] and use it to create a WCF-SQL port.</span></span> <span data-ttu-id="56b71-116">如需詳細資訊，請參閱 <<c0> [ 設定 WCF SQL 連接埠繫結檔案產生使用取用配接器服務增益集的連接埠使用](#BKMK_Create_WCF_SQL)。</span><span class="sxs-lookup"><span data-stu-id="56b71-116">For more information, see [Configuring a WCF-SQL Port Using the Port Binding File Generated Using Consume Adapter Service Add-in](#BKMK_Create_WCF_SQL).</span></span>  
  
 <span data-ttu-id="56b71-117">以下是您必須了解繫結相關的一些重點檔[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]會產生：</span><span class="sxs-lookup"><span data-stu-id="56b71-117">Following are some key points that you must understand with respect to the binding file that the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] generates:</span></span>  
  
- <span data-ttu-id="56b71-118">建立的檔案是具有特定命名慣例。</span><span class="sxs-lookup"><span data-stu-id="56b71-118">The files are created with a specific naming convention.</span></span> <span data-ttu-id="56b71-119">如果您產生輸出作業的中繼資料，也就是將訊息傳送至 SQL Server，檔案的名稱是 WcfSendPort_SqlAdapterBinding_Custom.bindinginfo.xml。</span><span class="sxs-lookup"><span data-stu-id="56b71-119">If you generated metadata for outbound operations, that is, to send messages to SQL Server, the name of the file is WcfSendPort_SqlAdapterBinding_Custom.bindinginfo.xml.</span></span>  
  
   <span data-ttu-id="56b71-120">如果您產生的輸入作業的中繼資料，也就是檔案的從 SQL Server 接收訊息名稱是檔案的 WcfReceivePort_SqlAdapterBinding_Custom.bindinginfo.xml。</span><span class="sxs-lookup"><span data-stu-id="56b71-120">If you generated metadata for inbound operations, that is, to receive messages from SQL Server, the name of the file is WcfReceivePort_SqlAdapterBinding_Custom.bindinginfo.xml.</span></span>  
  
- <span data-ttu-id="56b71-121">檔案包含繫結組態、 繫結型別、 端點 URI 和中繼資料所產生的作業為基礎的連接埠動作的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="56b71-121">The file contains information about the binding configuration, the binding type, the endpoint URI, and the port action based on the operations for which metadata was generated.</span></span> <span data-ttu-id="56b71-122">當您將此繫結檔案匯 BizTalk 應用程式建立的連接埠時，若要設定實體連接埠所需的所有相關資訊會自動設定連接埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-122">When you import this binding file into your BizTalk application to create a port, all the relevant information required to configure a physical port is automatically set on the port.</span></span>  
  
  > [!IMPORTANT]
  >  <span data-ttu-id="56b71-123">根據預設，傳送埠上的動作會對應至您要為其產生中繼資料的作業名稱。</span><span class="sxs-lookup"><span data-stu-id="56b71-123">By default, the action on the send port is mapped to the operation name for which you generated metadata.</span></span> <span data-ttu-id="56b71-124">例如，如果您產生 Customer 資料表的 Insert 作業的中繼資料時，連接埠上的動作設定為`<Operation Name="Insert" Action="TableOp/Insert/dbo/CustomerTable" />`。</span><span class="sxs-lookup"><span data-stu-id="56b71-124">For example, if you generate metadata for the Insert operation on the Customer table, the action on the port is set to `<Operation Name="Insert" Action="TableOp/Insert/dbo/CustomerTable" />`.</span></span> <span data-ttu-id="56b71-125">不過，您在 BizTalk 協調流程中建立邏輯傳送連接埠上的作業名稱可能不會相同。</span><span class="sxs-lookup"><span data-stu-id="56b71-125">However, the operation name on the logical send port you create in the BizTalk orchestration might not be the same.</span></span> <span data-ttu-id="56b71-126">您必須確定作業中的名稱的邏輯傳送連接埠 （在 BizTalk 協調流程），以及實體傳送埠 (在[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理主控台) 相同。</span><span class="sxs-lookup"><span data-stu-id="56b71-126">You must ensure that the operation name in the logical send port (in the BizTalk orchestration) and the physical send port (in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console) are the same.</span></span> <span data-ttu-id="56b71-127">如果沒有，您會收到錯誤時將訊息傳送至 SQL Server 中，透過傳送埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-127">If not, you will receive an error while sending messages to SQL Server through the send port.</span></span>  
  
- <span data-ttu-id="56b71-128">您只需要提供認證以連接到 SQL Server 的連接埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-128">You only need to provide the credentials for the port to connect to SQL Server.</span></span> <span data-ttu-id="56b71-129">雖然在繫結檔案會保留用來連接，基於安全性的繫結檔案不包含密碼的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="56b71-129">Although the binding file does retain the user name with which to connect, for security reasons the binding file does not contain the password.</span></span>  
  
## <a name="key-considerations-for-using-the-port-binding-file"></a><span data-ttu-id="56b71-130">使用連接埠繫結檔案的重要考量</span><span class="sxs-lookup"><span data-stu-id="56b71-130">Key Considerations for Using the Port Binding File</span></span>  
  
- <span data-ttu-id="56b71-131">當您匯入繫結檔案時，您可能會看到對話方塊訊息，通知的 BizTalk 應用程式名稱，繫結檔案中的不符合您要匯入繫結檔案的應用程式名稱。</span><span class="sxs-lookup"><span data-stu-id="56b71-131">When you import the binding file, you might get a dialog message informing that the BizTalk application name in the binding file does not match the application name to which you are importing the binding file.</span></span> <span data-ttu-id="56b71-132">您可以放心地忽略此訊息，並繼續。</span><span class="sxs-lookup"><span data-stu-id="56b71-132">You can safely ignore this message and continue.</span></span>  
  
- <span data-ttu-id="56b71-133">繫結檔案也包含名稱的連接埠和接收位置。</span><span class="sxs-lookup"><span data-stu-id="56b71-133">The binding file also contains names of ports and receive locations.</span></span> <span data-ttu-id="56b71-134">如果您要匯入繫結檔案的 BizTalk 應用程式建立連接埠或接收位置具有相同名稱做為現有的連接埠在相同的 BizTalk 應用程式中，您會收到錯誤。</span><span class="sxs-lookup"><span data-stu-id="56b71-134">If the BizTalk application to which you are importing the binding file creates a port or a receive location that has the same name as an already existing port in the same BizTalk application, you will get an error.</span></span> <span data-ttu-id="56b71-135">您必須手動編輯繫結檔案來指定唯一的名稱，連接埠或接收位置。</span><span class="sxs-lookup"><span data-stu-id="56b71-135">You must manually edit the binding file to specify a unique name for the ports or receive locations.</span></span>  
  
- <span data-ttu-id="56b71-136">繫結檔案也包含連線 URI 的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="56b71-136">The binding file also contains information about the connection URI.</span></span> <span data-ttu-id="56b71-137">如果繫結檔案會建立具有相同的接收 URI 相同的 BizTalk 應用程式中的現有接收位置的接收位置，您會收到錯誤。</span><span class="sxs-lookup"><span data-stu-id="56b71-137">If the binding file creates a receive location that has the same receive URI as an already existing receive location in the same BizTalk application, you will get an error.</span></span> <span data-ttu-id="56b71-138">您必須手動編輯繫結檔案來指定唯一的 URI。</span><span class="sxs-lookup"><span data-stu-id="56b71-138">You must manually edit the binding file to specify a unique URI.</span></span>  
  
- <span data-ttu-id="56b71-139">根據預設，輸出作業的連接埠繫結檔案一律會包含定義雙向傳送埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-139">By default, the port binding file for outbound operations always contains definitions for a two-way send port.</span></span> <span data-ttu-id="56b71-140">當您匯入 BizTalk 應用程式中的這個檔案時，它會建立雙向傳送埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-140">When you import this file in a BizTalk application, it creates a two-way send port.</span></span> <span data-ttu-id="56b71-141">不過，您可能有單向傳送埠的協調流程。</span><span class="sxs-lookup"><span data-stu-id="56b71-141">However, you may have an orchestration that has a one-way send port.</span></span> <span data-ttu-id="56b71-142">因此，當您設定這類協調流程，並使用 匯入繫結檔案所建立的連接埠，連接埠不在清單中。</span><span class="sxs-lookup"><span data-stu-id="56b71-142">So, when you configure such an orchestration and use the port created by importing the binding file, the port is not available in the list.</span></span> <span data-ttu-id="56b71-143">這是因為您建立的協調流程的邏輯連接埠是單向連接埠，而協調流程中建立的實體連接埠是雙向的連接埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-143">This happens because the logical port you created as part of the orchestration is a one-way port while the physical port created in the orchestration is a two-way port.</span></span> <span data-ttu-id="56b71-144">在此情況下，您可以編輯此繫結檔案，進行下列變更：</span><span class="sxs-lookup"><span data-stu-id="56b71-144">In such cases, you can edit the binding file to make the following changes:</span></span>  
  
  |<span data-ttu-id="56b71-145">如需</span><span class="sxs-lookup"><span data-stu-id="56b71-145">For this</span></span>|<span data-ttu-id="56b71-146">執行方式</span><span class="sxs-lookup"><span data-stu-id="56b71-146">Do this</span></span>|  
  |--------------|-------------|  
  |<span data-ttu-id="56b71-147">若要編輯的連接埠繫結檔案，來設定單向傳送埠</span><span class="sxs-lookup"><span data-stu-id="56b71-147">To edit the port binding file to configure a one-way send port</span></span>|<span data-ttu-id="56b71-148">1.在下列摘錄中，將值變更**IsTwoWay**屬性設**false**。</span><span class="sxs-lookup"><span data-stu-id="56b71-148">1.  In the following excerpt, change the value of the **IsTwoWay** property to **false**.</span></span> <span data-ttu-id="56b71-149">一開始，此值設為 **，則為 true**。</span><span class="sxs-lookup"><span data-stu-id="56b71-149">Originally, this is set to **true**.</span></span><br />     `<SendPort Name="port_name" IsStatic="true" IsTwoWay="false" BindingOption="0">`<br /><span data-ttu-id="56b71-150">2.註解下列摘錄：</span><span class="sxs-lookup"><span data-stu-id="56b71-150">2.  Comment out the following excerpts:</span></span><br />     `<ReceivePipeline Name="Microsoft.BizTalk.DefaultPipelines.XMLReceive"    FullyQualifiedName="Microsoft.BizTalk.DefaultPipelines.XMLReceive,    Microsoft.BizTalk.DefaultPipelines, Version=3.0.1.0, Culture=neutral,    PublicKeyToken=token" Type="1" TrackingOption="None" Description=""/>`<br />     `<ReceivePipelineData xsi:nil="true" />`|  
  
  > [!IMPORTANT]
  >  <span data-ttu-id="56b71-151">輸入的作業，繫結檔案的連接埠一律會建立單向接收埠。</span><span class="sxs-lookup"><span data-stu-id="56b71-151">For inbound operations, the port binding file will always create a one-way receive port.</span></span> <span data-ttu-id="56b71-152">這是因為[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]僅支援單向接收埠的輸入操作。</span><span class="sxs-lookup"><span data-stu-id="56b71-152">This is because the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] only supports one-way receive port for inbound operations.</span></span>  
  
##  <a name="BKMK_Create_WCF_SQL"></a> <span data-ttu-id="56b71-153">設定 WCF SQL 連接埠使用的連接埠繫結檔案，產生使用取用配接器服務增益集</span><span class="sxs-lookup"><span data-stu-id="56b71-153">Configure a WCF-SQL Port Using the Port Binding File Generated Using Consume Adapter Service Add-in</span></span>  
 <span data-ttu-id="56b71-154">[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]也會建立連接埠繫結檔案，您可以匯入[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="56b71-154">The [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] also creates a port binding file that you can import in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="56b71-155">您可以使用相同的連接埠繫結檔案，同時建立 BizTalk WCF SQL 連接埠[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="56b71-155">You can use the same port binding file to also create the BizTalk WCF-SQL port in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="56b71-156">不過，建立 WCF SQL 連接埠之前，您必須執行下列工作來修改連接埠繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="56b71-156">However, before creating WCF-SQL port you must perform the following tasks to modify the port binding file.</span></span>  
  
1. <span data-ttu-id="56b71-157">在文字編輯器中開啟連接埠繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="56b71-157">Open the port binding file in a text editor.</span></span>  
  
2. <span data-ttu-id="56b71-158">搜尋並新增中的 WCF-SQL 配接器名稱取代 「 WCF 自訂 」[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="56b71-158">Search and replace “WCF-Custom” with the name with which you added the WCF-SQL adapter in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="56b71-159">比方說，如果您新增為 「 SQLAdapter"WCF-SQL 配接器，來取代 「 WCF 自訂 」 與 「 SQLAdapter"。</span><span class="sxs-lookup"><span data-stu-id="56b71-159">For example, if you added the WCF-SQL adapter as “SQLAdapter”, replace “WCF-Custom” with “SQLAdapter”.</span></span>  
  
3. <span data-ttu-id="56b71-160">搜尋"ConfigurationClsid 」 屬性，並取代"59B35D03-6A06-4734-A249-EF561254ECF7 」 中的現有屬性的值。</span><span class="sxs-lookup"><span data-stu-id="56b71-160">Search for the “ConfigurationClsid” attribute, and replace the existing value of the attribute with “59B35D03-6A06-4734-A249-EF561254ECF7”.</span></span>  
  
4. <span data-ttu-id="56b71-161">儲存並關閉 繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="56b71-161">Save and close the binding file.</span></span>  
  
5. <span data-ttu-id="56b71-162">匯入繫結檔案中的[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="56b71-162">Import the binding file in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="56b71-163">如需有關如何匯入繫結檔案的指示，請參閱 <<c0> [ 重複使用配接器繫結](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="56b71-163">For instructions on how to import the binding file, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="56b71-164">另請參閱</span><span class="sxs-lookup"><span data-stu-id="56b71-164">See Also</span></span>  
[<span data-ttu-id="56b71-165">若要開發使用 SQL 配接器的 BizTalk 應用程式的建置組塊</span><span class="sxs-lookup"><span data-stu-id="56b71-165">Building blocks to develop BizTalk applications with the SQL adapter</span></span>](../../adapters-and-accelerators/adapter-sql/building-blocks-to-develop-biztalk-applications-with-the-sql-adapter.md)