---
title: 特殊處理 Message Repair 和 New Submission |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- repairing messages, rekey verification
- repairing messages, process flow
- rekey verification
- repairing messages
- messages, templates
- messages, rekey verification
- BIC fields
- templates, messages
- BIC-12 data
- messages, process flow
- BIC-11 data
ms.assetid: 0ab729e3-4b67-47d3-84c9-f016318a4c41
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1d77d518b080fd84b874c9bb79dedd5173d0a78b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22214414"
---
# <a name="special-processing-in-message-repair-and-new-submission"></a><span data-ttu-id="bc6d4-102">在 訊息修復和新送出的特殊處理</span><span class="sxs-lookup"><span data-stu-id="bc6d4-102">Special Processing in Message Repair and New Submission</span></span>
<span data-ttu-id="bc6d4-103">[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair 和 New Submission 功能可讓客戶開發企業實作。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-103">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair and New Submission functionality enables customers to develop an enterprise implementation.</span></span> <span data-ttu-id="bc6d4-104">功能支援下列特殊的處理：</span><span class="sxs-lookup"><span data-stu-id="bc6d4-104">The functionality supports the following special processing:</span></span>  
  
-   <span data-ttu-id="bc6d4-105">重設金鑰驗證</span><span class="sxs-lookup"><span data-stu-id="bc6d4-105">Rekeying verification</span></span>  
  
-   <span data-ttu-id="bc6d4-106">部門專屬的工作流程支援 (如需詳細資訊，請參閱[修復的訊息和提交新訊息](../../adapters-and-accelerators/accelerator-swift/repairing-messages-and-submitting-new-messages.md)。)</span><span class="sxs-lookup"><span data-stu-id="bc6d4-106">Department-specific workflow support (For more information, see [Repairing Messages and Submitting New Messages](../../adapters-and-accelerators/accelerator-swift/repairing-messages-and-submitting-new-messages.md).)</span></span>  
  
-   <span data-ttu-id="bc6d4-107">輸入為 BIC 11 BIC 12 資料</span><span class="sxs-lookup"><span data-stu-id="bc6d4-107">Entry of BIC-12 data as BIC-11</span></span>  
  
-   <span data-ttu-id="bc6d4-108">BIC 欄位的項目當做一個字串</span><span class="sxs-lookup"><span data-stu-id="bc6d4-108">Entry of BIC fields as one string</span></span>  
  
-   <span data-ttu-id="bc6d4-109">修復和重新送出剖析失敗 (如需詳細資訊，請參閱[修復未剖析訊息](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md)。)</span><span class="sxs-lookup"><span data-stu-id="bc6d4-109">Repair and resubmission of parse failures (For more information, see [Repairing Unparsed Messages](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md).)</span></span>  
  
-   <span data-ttu-id="bc6d4-110">儲存修復進行中，使用 [儲存] 命令</span><span class="sxs-lookup"><span data-stu-id="bc6d4-110">Saving repairs in progress by using the Save command</span></span>  
  
-   <span data-ttu-id="bc6d4-111">使用 [另存新檔] 命令建立新的範本</span><span class="sxs-lookup"><span data-stu-id="bc6d4-111">Creating a new template by using the Save As command</span></span>  
  
## <a name="rekey-verification"></a><span data-ttu-id="bc6d4-112">重設金鑰驗證</span><span class="sxs-lookup"><span data-stu-id="bc6d4-112">Rekey Verification</span></span>  
 <span data-ttu-id="bc6d4-113">許多金融機構中，檢查工作的主要方法是供第二個使用者重設金鑰交易的最重要的欄位。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-113">For many financial institutions, the primary means of checking work is for a second person to rekey the most important fields of a transaction.</span></span> <span data-ttu-id="bc6d4-114">這項作業會驗證第二個使用者具有讀取及了解，這些欄位中的資料。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-114">This operation verifies that the second person has read, and understands, the data in those fields.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="bc6d4-115">修復或中建立的訊息提供這項功能[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-115"> provides this capability for messages repaired or created in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="bc6d4-116">如果需要，重設金鑰步驟[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]出 rekeyed 向使用者顯示的表單中的欄位空白。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-116">If a rekey step is required, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] blanks out the fields to be rekeyed in the form presented to the user.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="bc6d4-117">讓驗證器可以使用這些內容，輸入資料時，仍顯示工作窗格中，原始訊息的內容。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-117"> still displays the contents of the original message in the task pane, so the verifier can use those contents when entering the data.</span></span> <span data-ttu-id="bc6d4-118">因為這可能會允許變更，而不驗證驗證器不應變更訊息中的其他欄位。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-118">The verifier should not change other fields in the message, because this might allow changes without verification.</span></span> <span data-ttu-id="bc6d4-119">相反地，驗證器應該拒絕訊息修復，如果需要進行其他變更。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-119">Instead, the verifier should reject the message repair if other changes need to be made.</span></span>  
  
 <span data-ttu-id="bc6d4-120">重設金鑰的步驟之後，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]比較結果的修復金鑰的結果。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-120">After the rekey step, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] compares the results of the rekeying with the results of the repair.</span></span> <span data-ttu-id="bc6d4-121">它只在有已 rekeyed，欄位的欄位為基礎的欄位上執行這項比較。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-121">It performs this comparison only on the fields that have been rekeyed, on a field-by-field basis.</span></span> <span data-ttu-id="bc6d4-122">如果您不同意以逐字元為基礎的兩個版本，必須再次修復訊息。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-122">If the two versions do not agree on a character-by-character basis, the message must be repaired again.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="bc6d4-123">表示有索引鍵的驗證不符的情況，並將錯誤加入至錯誤集合組件的訊息。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-123"> indicates that there was a key verification mismatch, and adds the error to the error-collection part of the message.</span></span> <span data-ttu-id="bc6d4-124">輸入由驗證器的資料不會儲存。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-124">The data entered by the verifier is not saved.</span></span>  
  
 <span data-ttu-id="bc6d4-125">底下的 MRSR 資料夾中 MrsrXpathConfig.xml 檔案中指定的欄位 rekeyed[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]資料夾。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-125">The fields to be rekeyed are specified in the MrsrXpathConfig.xml file in the MRSR folder under the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] folder.</span></span> <span data-ttu-id="bc6d4-126">此檔案包含要被 rekeyed 的欄位和欄位的 xpath 所組成的名稱/值組。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-126">This file contains name/value pairs consisting of the field to be rekeyed and the xpath to the field.</span></span> <span data-ttu-id="bc6d4-127">您可以自訂此檔案，以變更哪些欄位會 rekeyed 每個訊息。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-127">You can customize this file to change which fields will be rekeyed for each message.</span></span> <span data-ttu-id="bc6d4-128">要被 rekeyed 欄位通常會代表最重要日期的訊息內容中，與相關聯的交易，以及交易數量的貨幣。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-128">The fields to be rekeyed are generally those representing the most important date associated with the message contents, the currency of the transaction, and the amount of the transaction.</span></span>  
  
 <span data-ttu-id="bc6d4-129">在 訊息修復和新送出的所有驗證步驟牽涉都到重設金鑰驗證。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-129">All verification steps in Message Repair and New Submission involve rekey verification.</span></span> <span data-ttu-id="bc6d4-130">使驗證被執行的核准。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-130">Sight verification is performed by the approver.</span></span>  
  
## <a name="entry-of-bic-12-data-as-bic-11"></a><span data-ttu-id="bc6d4-131">輸入為 BIC 11 BIC 12 資料</span><span class="sxs-lookup"><span data-stu-id="bc6d4-131">Entry of BIC-12 Data as BIC-11</span></span>  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="bc6d4-132">適用於需要訊息的邏輯終端機 （長期） 位址中的其他字元。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-132"> accommodates the need for an additional character in the Logical Terminal (LT) Address of a message.</span></span> <span data-ttu-id="bc6d4-133">LT 位址包含只 11 個字元的資料，但 SWIFT 聯盟存取 (SAA) 需要 LT 欄位位置 9 中有"X"。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-133">The LT Address contains only 11 characters of data, but the SWIFT Alliance Access (SAA) requires the LT field to have an "X" in position 9.</span></span> <span data-ttu-id="bc6d4-134">這個額外的字元表示 SAA 它應該選取正確的小型</span><span class="sxs-lookup"><span data-stu-id="bc6d4-134">This extra character indicates to SAA that it should select the correct LT.</span></span>  
  
 <span data-ttu-id="bc6d4-135">LT 位址用於傳輸的訊息中，尋找網路上。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-135">The LT address is used for transmission of the message over the FIN network.</span></span> <span data-ttu-id="bc6d4-136">它可以包含在 SWIFTBound 訊息 （基本的標頭區塊的 LT 位址欄位） 或目的地位址 欄位中輸入應用程式標頭區塊的兩個欄位和來自 SWIFT 的訊息的兩個欄位 (LT 位址 欄位的基本的標頭區塊或LT 位址的輸出應用程式標頭區塊訊息輸入參考資料中）。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-136">It can be contained in two fields of a SWIFTBound message (the LT Address field of the Basic Header block or the Destination Address field in the input Application Header block) and in two fields of a message from SWIFT (the LT Address field of the Basic Header block or the LT Address in the Message Input Reference in the Output Application Header block).</span></span>  
  
 <span data-ttu-id="bc6d4-137">建立或修復的訊息，或重設欄位金鑰驗證的一部分時，使用者必須輸入只 11 個字元。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-137">Users must enter only 11 characters when they create or repair a message, or rekey the field as part of verification.</span></span> <span data-ttu-id="bc6d4-138">即使修復或重設金鑰 LT 具有 12 個字元，使用者必須輸入只 11 個字元。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-138">Even when repairing or rekeying an LT that has 12 characters, a user must enter only 11 characters.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="bc6d4-139">將插入的第十二個字元，並驗證 12 個字元的欄位。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-139"> inserts the twelfth character and validates the 12-character field.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="bc6d4-140">驗證對 BIC 加上資料庫中的地址的 11 個字元 LT 位址。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-140"> validates the 11-character LT address against the address in the BIC Plus database.</span></span>  
  
## <a name="entry-of-bic-fields-as-one-string"></a><span data-ttu-id="bc6d4-141">BIC 欄位當做一個字串的項目</span><span class="sxs-lookup"><span data-stu-id="bc6d4-141">Entry of BIC Fields as One String</span></span>  
 <span data-ttu-id="bc6d4-142">您可以輸入 BIC 併入單一欄位[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]表單。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-142">You can enter the BIC into a single field on [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span></span> <span data-ttu-id="bc6d4-143">BIC 包含四個子欄位，每一個都有子欄位[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]表單。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-143">The BIC contains four subfields, each of which has a subfield on the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span></span> <span data-ttu-id="bc6d4-144">到單一欄位中，輸入完整的 BIC 字串之後[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]填入每四個子欄位。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-144">After you enter the full BIC string into the single field, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] populates each of the four subfields.</span></span>  
  
## <a name="saving-repairs-in-progress"></a><span data-ttu-id="bc6d4-145">儲存修復進行中</span><span class="sxs-lookup"><span data-stu-id="bc6d4-145">Saving Repairs in Progress</span></span>  
 <span data-ttu-id="bc6d4-146">如果您要中斷的修復，您可以儲存在目前的狀態訊息回修復收件匣。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-146">If you need to interrupt a repair, you can save a message in its current state back into the repair inbox.</span></span> <span data-ttu-id="bc6d4-147">您使用 [儲存] 命令來檢查訊息中。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-147">You do so by using the Save command to check in the message.</span></span> <span data-ttu-id="bc6d4-148">您可以關閉[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]形成並檢查訊息之後，或其他人可以簽出以繼續修復。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-148">You can close the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form and check the message out later, or someone else can check it out to continue the repair.</span></span> <span data-ttu-id="bc6d4-149">訊息的歷程記錄指出儲存作業，而且第二個 repairer 可以查看您執行修復。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-149">The message's history indicates the save operation, and a second repairer can see the repairs that you performed.</span></span>  
  
 <span data-ttu-id="bc6d4-150">您可以執行 [另存新檔] 命令來儲存使用者的本機電腦上目前的狀態訊息。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-150">You can execute a Save As command to store a message in its current state on the user's local machine.</span></span> <span data-ttu-id="bc6d4-151">如此一來執行另存的使用者簽出的訊息。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-151">This leaves the message checked out to the user who performed the Save As.</span></span> <span data-ttu-id="bc6d4-152">使用者可以關閉[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]表單和更新版本，才能完成修復，但另一位使用者傳回無法簽出的訊息並修復問題。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-152">The user can close the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form and return later to complete the repair, but another user cannot check out the message and repair it.</span></span>  
  
## <a name="creating-a-new-template"></a><span data-ttu-id="bc6d4-153">建立新的範本</span><span class="sxs-lookup"><span data-stu-id="bc6d4-153">Creating a New Template</span></span>  
 <span data-ttu-id="bc6d4-154">在建立新的訊息時，您可以藉由執行 [另存新檔] 命令建立新的範本。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-154">When creating a new message, you can create a new template by executing a Save As command.</span></span> <span data-ttu-id="bc6d4-155">這可讓您以開啟現有的範本，將資料加入至欄位，然後建立新的範本以現有範本，其中包含其他資料。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-155">This enables you to open an existing template, add data to fields, and then create a new template based on the existing template that includes the additional data.</span></span> <span data-ttu-id="bc6d4-156">您將範本儲存具有新名稱，並 MRSR 站台中新的郵件資料夾的存取權的任何人都可以建立新範本為基礎的訊息。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-156">You save the template with a new name, and anyone with access to the new message folder in MRSR site can create a new message based on the template.</span></span> <span data-ttu-id="bc6d4-157">您必須儲存 MRSR 網站提交訊息範本為依據的範本[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-157">You must save the template to the MRSR site to submit a message based on the template to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="bc6d4-158">否則，便會發生錯誤，或無法開啟表單。</span><span class="sxs-lookup"><span data-stu-id="bc6d4-158">Otherwise, errors will occur or you will not be able to open the form.</span></span>