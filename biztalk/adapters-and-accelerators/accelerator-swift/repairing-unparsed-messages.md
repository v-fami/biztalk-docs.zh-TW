---
title: 修復未剖析的訊息 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- unparsed messages
- repairing messages, unparsed messages
- messages, unparsed messages
ms.assetid: cc061243-3539-4407-a096-71a3feded1c5
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: de427afc854bf782f69a8c0428a874c61ffb5c4f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22214542"
---
# <a name="repairing-unparsed-messages"></a><span data-ttu-id="d8cb7-102">修復未剖析的訊息</span><span class="sxs-lookup"><span data-stu-id="d8cb7-102">Repairing Unparsed Messages</span></span>
<span data-ttu-id="d8cb7-103">如果[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]解譯器無法剖析訊息，您可以修復該訊息。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-103">If the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] disassembler cannot parse a message, you can repair that message.</span></span> <span data-ttu-id="d8cb7-104">請在[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]表單內[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]MRSR 站台。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-104">You do so in an [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form from within the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] MRSR site.</span></span> <span data-ttu-id="d8cb7-105">不過，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]處理該訊息以不同的方式從修復的訊息 XML 或 BRE 驗證失敗。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-105">However, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] processes that message differently from a repaired message that failed XML or BRE validation.</span></span>  
  
 <span data-ttu-id="d8cb7-106">如果訊息或批次失敗的剖析，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]將其標示為[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed = True，以剖析錯誤計數大於 0。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-106">If a message or batch fails parsing, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] marks it as [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed = True, with a parse error count greater than 0.</span></span> <span data-ttu-id="d8cb7-107">訊息內文會保留在一般檔案格式，抓住中的 XML 包裝函式。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-107">The message body remains in flat-file form, encased in an XML wrapper.</span></span> <span data-ttu-id="d8cb7-108">如果修復規則設定為 允許處理的剖析失敗，訊息會傳送未剖析的收件匣處理使用未剖析的表單。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-108">If the repair rule is set to permit the processing of parse failures, the message is sent to the Unparsed inbox for processing using the Unparsed form.</span></span>  
  
 <span data-ttu-id="d8cb7-109">不會有一個未剖析的收件匣的所有使用者和所有的部門，因為[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]可能沒有任何訊息的相關資料的存取權以外原始接收位置。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-109">There is only one Unparsed inbox for all users and all departments, because [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] may not have access to any data about the message other than the original receive location.</span></span> <span data-ttu-id="d8cb7-110">如此一來，若要修復未剖析的訊息，使用者必須具有 「 修復 」 功能，而且必須在所有部門中的修復角色相關聯。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-110">As a result, to repair an unparsed message, a user must have the repair capability and must be associated with the repair role in all departments.</span></span>  
  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="d8cb7-111">顯示未剖析的訊息中的文字區域的 Unparsed[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]表單。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-111"> displays the unparsed message in the text area of the Unparsed [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form.</span></span> <span data-ttu-id="d8cb7-112">若要更正剖析問題，您可能輸入，或刪除視字元。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-112">To correct the parsing problem, you may enter or delete characters as necessary.</span></span> <span data-ttu-id="d8cb7-113">提交之後，訊息是擷取自 XML 包裝函式，並重新提交透過 SWIFT 接收管線。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-113">After it is submitted, the message is extracted from the XML wrapper and resubmitted through the SWIFT receive pipeline.</span></span> <span data-ttu-id="d8cb7-114">如果剖析成功，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]處理訊息，如同任何其他訊息。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-114">If parsing succeeds, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] processes the message as it would any other message.</span></span>  
  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="d8cb7-115">不會處理您透過完整的修復工作流程已修正未剖析的訊息。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-115"> does not process an unparsed message that you have fixed through a full repair workflow.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="d8cb7-116">傳送出去未驗證和未經核准。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-116"> sends it out unverified and unapproved.</span></span> <span data-ttu-id="d8cb7-117">當您登入修復的未剖析的訊息，然後提交，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]不呼叫 BRE 驗證或檢查部門，但直接至傳送管線傳送訊息。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-117">When you sign a repaired unparsed message and then submit it, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] does not call BRE validation or check the department, but sends the message directly to the send pipeline.</span></span> <span data-ttu-id="d8cb7-118">如果該管線無法處理訊息，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]將它傳送到修復程序。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-118">If that pipeline cannot process the message, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] sends it to the repair process.</span></span>  
  
 <span data-ttu-id="d8cb7-119">此程序可讓您更正來自另一個系統的格式錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-119">This process enables you to correct badly formatted messages from another system.</span></span> <span data-ttu-id="d8cb7-120">不過，您應謹慎小心修正剖析問題時。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-120">However, you should use caution when correcting parsing issues.</span></span> <span data-ttu-id="d8cb7-121">當[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]處理未剖析的訊息，不會驗證訊息。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-121">When [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] handles an unparsed message, it does not validate the message.</span></span> <span data-ttu-id="d8cb7-122">未剖析的修復未定義為角色，讓任何人都可以執行此程序。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-122">Unparsed repair is not defined as a role, so anyone can perform this process.</span></span> <span data-ttu-id="d8cb7-123">因為未剖析的訊息不屬於任何部門，存取它們所提供的唯一安全性就會是未剖析的收件匣上的 Acl。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-123">Because unparsed message do not belong to any department, the only security provided on access to them is the ACLs on the Unparsed inbox.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="d8cb7-124">也不會保留原始接收位置未剖析的訊息的訊息內容屬性。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-124"> also does not retain the original receive location of an unparsed message as a context property of the message.</span></span>  
  
 <span data-ttu-id="d8cb7-125">您可以撰寫自訂的驗證，以修復未剖析的訊息上執行。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-125">You can write a custom validation to be performed on the repaired unparsed message.</span></span> <span data-ttu-id="d8cb7-126">您也可以撰寫修復的未剖析的訊息傳送至原始檔管線訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-126">You can also write a subscription to send a repaired unparsed message to the original file pipeline.</span></span>  
  
 <span data-ttu-id="d8cb7-127">用於剖析訊息修復機制，您需要將 EnvelopeUnparsedMessage.xsd 結構描述加入至包含訊息結構描述的組件。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-127">For the repair mechanism to work on unparsed messages, you need to add the EnvelopeUnparsedMessage.xsd schema to the assembly that contains message schemas.</span></span> <span data-ttu-id="d8cb7-128">如需詳細資訊，請參閱[部署 A4SWIFT 結構描述](../../adapters-and-accelerators/accelerator-swift/deploying-a4swift-schemas.md)。</span><span class="sxs-lookup"><span data-stu-id="d8cb7-128">For more information, see [Deploying A4SWIFT Schemas](../../adapters-and-accelerators/accelerator-swift/deploying-a4swift-schemas.md).</span></span>