---
title: 對 sap Idoc 的作業 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- IDOC, operations to receive an
- IDOCs
- IDOCs, operations on
- tRFC server
- IDOC, operations to send an
- RFC server
ms.assetid: 6abcc646-c7a3-48cf-a09e-01f516dcef97
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c9c3bbf45074024b8745b845b3f9ca85f5ff814e
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36972223"
---
# <a name="operations-on-idocs-in-sap"></a><span data-ttu-id="4fc57-102">對 sap Idoc 的作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-102">Operations on IDOCs in SAP</span></span>
<span data-ttu-id="4fc57-103">IDOCs 會是 SAP 支援用來以非同步方式與 SAP 和非 SAP 系統通訊的標準化的類似 EDI 的文件。</span><span class="sxs-lookup"><span data-stu-id="4fc57-103">IDOCs are standardized EDI-like documents that SAP supports for asynchronously communicating with SAP and non-SAP systems.</span></span> <span data-ttu-id="4fc57-104">Idoc 用來傳送及接收"business"文件，例如銷售訂單，或從交易夥伴的 SAP 系統或外部程式。</span><span class="sxs-lookup"><span data-stu-id="4fc57-104">IDOCs are used for sending and receiving “business” documents such as sales orders, for example, to or from a trading partner’s SAP system or an external program.</span></span>  
  
 <span data-ttu-id="4fc57-105">雖然 SAP 系統支援多種來傳送和接收 Idoc 的連接埠類型 (例如檔案的連接埠，CPIC 連接埠)、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援傳送及接收 Idoc 透過一個 tRFC 連接埠。</span><span class="sxs-lookup"><span data-stu-id="4fc57-105">Although the SAP system supports a number of port types to send and receive IDOCs (such as file port, CPIC port), the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending and receiving IDOCs via the tRFC port.</span></span>  
  
## <a name="operations-to-send-an-idoc"></a><span data-ttu-id="4fc57-106">傳送 IDOC 的作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-106">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="4fc57-107">所有 SAP IDOC 呼叫會在內部都視為 tRFC 呼叫中的配接器做為 tRFC 用戶端，並呼叫 RFC，SAP 傳送 IDOC 中。</span><span class="sxs-lookup"><span data-stu-id="4fc57-107">All IDOC calls to SAP are internally treated as tRFC calls in which the adapter acts as a tRFC client and calls an RFC in SAP to send an IDOC.</span></span> <span data-ttu-id="4fc57-108">就像任何 tRFC 用戶端呼叫，配接器用戶端會選擇性地將 GUID 傳遞至配接器，接著將它與交易識別碼 (TID)，它會在 SAP 系統上呼叫相關聯。</span><span class="sxs-lookup"><span data-stu-id="4fc57-108">Just like any other tRFC client call, the adapter client optionally passes a GUID to the adapter, which in turn associates it with the transaction ID (TID) that it uses for the call on the SAP system.</span></span> <span data-ttu-id="4fc57-109">（如果配接器用戶端未通過 GUID，配接器會產生其專屬 GUID。）GUID 會傳回至回應訊息的配接器用戶端。</span><span class="sxs-lookup"><span data-stu-id="4fc57-109">(If the adapter client does not pass a GUID, the adapter generates its own GUID.) The GUID is returned to the adapter client in the response message.</span></span> <span data-ttu-id="4fc57-110">若要確認 TID SAP 系統上的，配接器用戶端可以使用此 GUID。</span><span class="sxs-lookup"><span data-stu-id="4fc57-110">The adapter client can use this GUID to confirm the TID on the SAP system.</span></span> <span data-ttu-id="4fc57-111">實際的叫用特殊的靜態方法，在 SAP 繫結中，也可以取得 tRFC 呼叫配接器使用的 SAP TID **ConvertGuidToTid**。</span><span class="sxs-lookup"><span data-stu-id="4fc57-111">The actual SAP TID used by the adapter for the tRFC call can be obtained by invoking a special static method in the SAP binding, **ConvertGuidToTid**.</span></span> <span data-ttu-id="4fc57-112">具有實際的 TID 可能很有用的 SAP 系統上的問題進行疑難排解。</span><span class="sxs-lookup"><span data-stu-id="4fc57-112">Having the actual TID may be useful for troubleshooting issues on the SAP system.</span></span>  
  
 <span data-ttu-id="4fc57-113">傳送 IDOC 完成呼叫之後，必須在 SAP 系統上確認 TID。</span><span class="sxs-lookup"><span data-stu-id="4fc57-113">After the call to send the IDOC is completed, the TID must be confirmed on the SAP system.</span></span> <span data-ttu-id="4fc57-114">這可讓 SAP 系統從其資料庫中刪除 TID。</span><span class="sxs-lookup"><span data-stu-id="4fc57-114">This enables the SAP system to delete the TID from its database.</span></span> <span data-ttu-id="4fc57-115">配接器用戶端可以確認 TID SAP 系統上。</span><span class="sxs-lookup"><span data-stu-id="4fc57-115">The adapter client can confirm the TID on the SAP system.</span></span>  
  
- <span data-ttu-id="4fc57-116">明確地藉由叫用**RfcConfirmTransID**介面卡上的作業。</span><span class="sxs-lookup"><span data-stu-id="4fc57-116">Explicitly, by invoking the **RfcConfirmTransID** operation on the adapter.</span></span> <span data-ttu-id="4fc57-117">這項作業會使 （上述的回應訊息中傳回） 的 GUID，而造成配接器必須確認 SAP 系統上相關聯的 TID。</span><span class="sxs-lookup"><span data-stu-id="4fc57-117">This operation takes a GUID (returned in the response message above) and causes the adapter to confirm the associated TID on the SAP system.</span></span>  
  
- <span data-ttu-id="4fc57-118">以隱含的方式，是藉由設定**AutoConfirmSentIdocs**繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="4fc57-118">Implicitly, by setting the **AutoConfirmSentIdocs** binding property.</span></span> <span data-ttu-id="4fc57-119">如果這個繫結屬性為 true，配接器將會自動認可 TID 之後傳送 IDOC 至 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="4fc57-119">If this binding property is true, the adapter automatically commits the TID after it sends the IDOC to the SAP system.</span></span> <span data-ttu-id="4fc57-120">請參閱[了解 BizTalk Adapter for mySAP Business Suite 繫結屬性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="4fc57-120">See [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md) for more information.</span></span>  
  
  <span data-ttu-id="4fc57-121">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]會使用下列 Rfc 傳送 IDOC:</span><span class="sxs-lookup"><span data-stu-id="4fc57-121">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following RFCs to send an IDOC:</span></span>  
  
- <span data-ttu-id="4fc57-122">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="4fc57-122">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="4fc57-123">使用此函式模組的 SAP 版本 4.0 之前。</span><span class="sxs-lookup"><span data-stu-id="4fc57-123">This function module is used for SAP releases before 4.0.</span></span>  
  
- <span data-ttu-id="4fc57-124">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="4fc57-124">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="4fc57-125">此函式模組是用 SAP 版本 4.0 及更新版本。</span><span class="sxs-lookup"><span data-stu-id="4fc57-125">This function module is used for SAP release 4.0 and later.</span></span>  
  
### <a name="sending-idocs-with-segment-data-across-multiple-lines"></a><span data-ttu-id="4fc57-126">傳送 Idoc 的區段資料跨多行</span><span class="sxs-lookup"><span data-stu-id="4fc57-126">Sending IDOCs with Segment Data Across Multiple Lines</span></span>  
 <span data-ttu-id="4fc57-127">IDOCs 會構成的區段。</span><span class="sxs-lookup"><span data-stu-id="4fc57-127">IDOCs are constituted of segments.</span></span> <span data-ttu-id="4fc57-128">在 IDOC 一般檔案中的每個區段項目包含的區段標頭資訊 （包含 DOCNUM 欄位） 及分割資料。</span><span class="sxs-lookup"><span data-stu-id="4fc57-128">Each segment entry in an IDOC flat-file contains the segment header info (containing the DOCNUM field) and the segment data.</span></span> <span data-ttu-id="4fc57-129">在某些 Idoc，區段資料可以分成多行。</span><span class="sxs-lookup"><span data-stu-id="4fc57-129">In some IDOCs, the segment data can be split across multiple lines.</span></span> <span data-ttu-id="4fc57-130">例如：</span><span class="sxs-lookup"><span data-stu-id="4fc57-130">For example:</span></span>  
  
```  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment data wrapped from the previous line  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
```  
  
 <span data-ttu-id="4fc57-131">以 WCF 為基礎[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援傳送這類的 Idoc 至 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="4fc57-131">The WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending such IDOCs to the SAP system.</span></span> <span data-ttu-id="4fc57-132">若要支援傳送這類的 Idoc，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]決定每個區段的資料是否將延續前一個位置，或是否為新的分割資料。</span><span class="sxs-lookup"><span data-stu-id="4fc57-132">To support sending such IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] determines whether each segment data is a continuation of the previous one, or whether it is a new segment data.</span></span> <span data-ttu-id="4fc57-133">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]剖析每個區段標頭，並尋找 DOCNUM 欄位決定這。</span><span class="sxs-lookup"><span data-stu-id="4fc57-133">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] decides this by parsing each segment header and looking for the DOCNUM field.</span></span> <span data-ttu-id="4fc57-134">如果區段資料分成兩行，第二行沒有區段標頭，因此[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]找不到 DOCNUM 欄位。</span><span class="sxs-lookup"><span data-stu-id="4fc57-134">If the segment data is split across two lines, the second line does not have a segment header and as a result the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find the DOCNUM field.</span></span> <span data-ttu-id="4fc57-135">因此，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可以判斷它是將延續先前的區段資料。</span><span class="sxs-lookup"><span data-stu-id="4fc57-135">Hence, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can determine that it is a continuation of the previous segment data.</span></span>  
  
 <span data-ttu-id="4fc57-136">例如，在如上所示，IDOC 的表示法[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]找不到任何 DOCNUM 欄位中的 」`Segment data wrapped from the previous line`"，而且能夠決定這條線是將延續先前的區段資料。</span><span class="sxs-lookup"><span data-stu-id="4fc57-136">For example, in the representation of an IDOC shown above, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find any DOCNUM field in “`Segment data wrapped from the previous line`” and is able to decide that the line is a continuation of the previous segment data.</span></span> <span data-ttu-id="4fc57-137">考量大小的 IDOC 一般檔案在生產環境中，執行這類檢查每個區段的資料可能會導致增加處理時間。</span><span class="sxs-lookup"><span data-stu-id="4fc57-137">Considering the size of IDOC flat files in production environments, performing such checks for each segment data may result in increased processing time.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4fc57-138">IDOC 資料中，配接器會使用 DOCNUM 欄位，而不是歸位字元傳回換行字元 (CRLF) 來識別和擷取區段中的每筆記錄。</span><span class="sxs-lookup"><span data-stu-id="4fc57-138">The adapter uses the DOCNUM field instead of a carriage return line feed (CRLF) to identify and extract each segment record from IDOC data.</span></span> <span data-ttu-id="4fc57-139">如果 DOCNUM 記錄中的欄位控制項和資料都是無效或部分空白，配接器無法剖析 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-139">If the DOCNUM fields in the control and data records are invalid or partly blank, the adapter fails to parse the IDOC.</span></span> <span data-ttu-id="4fc57-140">因此，不會繼續 IDOC 到 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="4fc57-140">Hence, the IDOC is not sent to the SAP system.</span></span>  
  
### <a name="operations-to-send-an-idoc"></a><span data-ttu-id="4fc57-141">傳送 IDOC 的作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-141">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="4fc57-142">傳送 Idoc 到 SAP 系統支援下列作業：</span><span class="sxs-lookup"><span data-stu-id="4fc57-142">The following operations are supported for sending IDOCs to an SAP system:</span></span>  
  
- <span data-ttu-id="4fc57-143">**傳送**。</span><span class="sxs-lookup"><span data-stu-id="4fc57-143">**Send**.</span></span> <span data-ttu-id="4fc57-144">您可以使用這項作業來傳送 IDOC 至 SAP 系統，請使用強型別結構描述。</span><span class="sxs-lookup"><span data-stu-id="4fc57-144">Use this operation to send an IDOC to the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="4fc57-145">這項作業的結構描述會公開控制記錄的欄位和資料記錄欄位，包括區段標頭和區段的欄位。</span><span class="sxs-lookup"><span data-stu-id="4fc57-145">The schema for this operation exposes control record fields and data record fields, including segment headers and segment fields.</span></span> <span data-ttu-id="4fc57-146">傳送作業是 IDocType + CimType + ReleaseNumber + 版本的特定組合。</span><span class="sxs-lookup"><span data-stu-id="4fc57-146">The Send operation is specific to an IDocType + CimType + ReleaseNumber + Version combination.</span></span>  
  
   <span data-ttu-id="4fc57-147">這項作業會顯示每個 idoc，並且可在特定的 IDOC 節點下[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4fc57-147">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="4fc57-148">若要能夠成功執行**傳送**作業中，您必須在 SAP 系統中的相關的授權。</span><span class="sxs-lookup"><span data-stu-id="4fc57-148">To be able to successfully perform a **Send** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="4fc57-149">如需詳細資訊，</span><span class="sxs-lookup"><span data-stu-id="4fc57-149">For more information.</span></span>  
  
- <span data-ttu-id="4fc57-150">**SendIdoc**。</span><span class="sxs-lookup"><span data-stu-id="4fc57-150">**SendIdoc**.</span></span> <span data-ttu-id="4fc57-151">您可以使用這項作業來傳送 IDOC 至 SAP 系統，請使用弱型別結構描述。</span><span class="sxs-lookup"><span data-stu-id="4fc57-151">Use this operation to send an IDOC to the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="4fc57-152">這項作業的結構描述會公開為單一字串欄位所組成的控制記錄和資料記錄的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="4fc57-152">The schema for this operation exposes IDOCs as a single string field consisting the control record and data record.</span></span> <span data-ttu-id="4fc57-153">SendIdoc 作業將會做為參數的 IDOC 字串和 GUID。</span><span class="sxs-lookup"><span data-stu-id="4fc57-153">The SendIdoc operation takes an IDOC string and a GUID as a parameter.</span></span>  
  
   <span data-ttu-id="4fc57-154">這是呈現 SAP 系統所公開的所有 Idoc 的單一作業，並位在根目錄**IDOC**中的節點[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4fc57-154">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  <span data-ttu-id="4fc57-155">如需詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="4fc57-155">For more information about:</span></span>  
  
- <span data-ttu-id="4fc57-156">傳送 IDOC 至 SAP 系統，請使用 BizTalk Server，請參閱[傳送的 Idoc 至 SAP 使用 BizTalk server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-156">Sending an IDOC to an SAP system using BizTalk Server, see [Send IDOCs to SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md).</span></span>  
  
- <span data-ttu-id="4fc57-157">傳送 IDOC 到 SAP 系統使用 WCF 服務模型，請參閱[傳送的 Idoc 至 SAP 使用 WCF 服務模型](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-157">Sending an IDOC to an SAP system using WCF service model, see [Send IDOCs to SAP by Using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md).</span></span>  
  
- <span data-ttu-id="4fc57-158">訊息結構和 SOAP 動作，以便傳送 IDOC，請參閱[IDOC 作業的訊息結構描述](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-158">Message structures and SOAP action for sending an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="operations-to-receive-an-idoc"></a><span data-ttu-id="4fc57-159">接收 IDOC 的作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-159">Operations to Receive an IDOC</span></span>  
 <span data-ttu-id="4fc57-160">若要接收 IDOC， [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] tRFC 伺服器或 RFC 伺服器可以運作：</span><span class="sxs-lookup"><span data-stu-id="4fc57-160">To receive an IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can behave either as a tRFC server or an RFC server:</span></span>  
  
- <span data-ttu-id="4fc57-161">做為 tRFC 伺服器時，繫結屬性，配接器**TidDatabaseConnectionString**必須設為您的電腦上的 TID 資料庫的連接字串。</span><span class="sxs-lookup"><span data-stu-id="4fc57-161">For the adapter to behave as a tRFC server, the binding property **TidDatabaseConnectionString** must be set to the connection string for the TID database on your computer.</span></span> <span data-ttu-id="4fc57-162">TRFC 伺服器案例中，此配接器會接受 tRFC 用戶端呼叫從 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-162">For a tRFC server scenario, the adapter accepts a tRFC client call from the SAP system to receive the IDOC.</span></span>  
  
- <span data-ttu-id="4fc57-163">行為與 RFC 伺服器中，配接器**TidDatabaseConnectionString**應為 null （預設值）。</span><span class="sxs-lookup"><span data-stu-id="4fc57-163">For the adapter to behave as an RFC server, the **TidDatabaseConnectionString** should be null (default).</span></span> <span data-ttu-id="4fc57-164">RFC 伺服器案例中，此配接器會接受從 SAP 系統接收 IDOC 的 RFC 用戶端呼叫。</span><span class="sxs-lookup"><span data-stu-id="4fc57-164">For an RFC server scenario, the adapter accepts an RFC client call from the SAP system to receive the IDOC.</span></span>  
  
  <span data-ttu-id="4fc57-165">下列 Rfc 用來傳送和接收 Idoc;當傳送 Idoc，配接器會使用這些 Rfc，而 SAP 系統接收 IDOC 時, 使用它們。</span><span class="sxs-lookup"><span data-stu-id="4fc57-165">The following RFCs are used to send and receive IDOCs; when sending IDOCs, the adapter uses these RFCs, whereas when receiving IDOCS, the SAP system uses them.</span></span>  
  
- <span data-ttu-id="4fc57-166">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="4fc57-166">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="4fc57-167">使用此函式模組的 SAP 版本 4.0 之前。</span><span class="sxs-lookup"><span data-stu-id="4fc57-167">This function module is used for SAP releases before 4.0.</span></span>  
  
- <span data-ttu-id="4fc57-168">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="4fc57-168">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="4fc57-169">此函式模組是用 SAP 版本 4.0 及更新版本。</span><span class="sxs-lookup"><span data-stu-id="4fc57-169">This function module is used for SAP release 4.0 and later.</span></span>  
  
  <span data-ttu-id="4fc57-170">從 SAP 系統接收 Idoc 支援下列作業：</span><span class="sxs-lookup"><span data-stu-id="4fc57-170">The following operations are supported for receiving IDOCs from an SAP system:</span></span>  
  
- <span data-ttu-id="4fc57-171">**接收**。</span><span class="sxs-lookup"><span data-stu-id="4fc57-171">**Receive**.</span></span> <span data-ttu-id="4fc57-172">您可以使用此作業，從使用強型別結構描述的 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-172">Use this operation to receive an IDOC from the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="4fc57-173">這項作業的結構描述會公開控制記錄的欄位和資料記錄的欄位，包括區段標頭和區段的欄位。</span><span class="sxs-lookup"><span data-stu-id="4fc57-173">The schema for this operation exposes control record fields and data record fields including segment headers and segment fields.</span></span>  
  
   <span data-ttu-id="4fc57-174">這項作業會顯示每個 idoc，並且可在特定的 IDOC 節點下[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4fc57-174">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="4fc57-175">若要能夠成功執行**接收**作業中，您必須在 SAP 系統中的相關的授權。</span><span class="sxs-lookup"><span data-stu-id="4fc57-175">To be able to successfully perform a **Receive** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="4fc57-176">如需詳細資訊，</span><span class="sxs-lookup"><span data-stu-id="4fc57-176">For more information.</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="4fc57-177">使用**接收**作業中，您也可以接收多個 Idoc。</span><span class="sxs-lookup"><span data-stu-id="4fc57-177">Using the **Receive** operation, you can also receive multiple IDOCs.</span></span>  
  
- <span data-ttu-id="4fc57-178">**ReceiveIdoc**。</span><span class="sxs-lookup"><span data-stu-id="4fc57-178">**ReceiveIdoc**.</span></span> <span data-ttu-id="4fc57-179">您可以使用此作業，從使用弱型別結構描述的 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-179">Use this operation to receive an IDOC from the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="4fc57-180">這項作業的結構描述會公開為單一字串欄位，其中包含控制記錄和資料記錄的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="4fc57-180">The schema for this operation exposes IDOCs as a single string field consisting of the control record and data record.</span></span> <span data-ttu-id="4fc57-181">這項作業下的 XML 訊息中的字串形式接收 Idoc \<idocData\>標記。</span><span class="sxs-lookup"><span data-stu-id="4fc57-181">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  
  
   <span data-ttu-id="4fc57-182">這是呈現 SAP 系統所公開的所有 Idoc 的單一作業，並位在根目錄**IDOC**中的節點[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4fc57-182">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  <span data-ttu-id="4fc57-183">接收 Idoc，時會[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援不同的訊息格式，可以指定為繫結屬性的值， **ReceiveIDocFormat**由[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4fc57-183">When receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports different message formats, which can be specified as a value for the binding property, **ReceiveIDocFormat** exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span>  
  
- <span data-ttu-id="4fc57-184">如果設定為 「 類型 」，XML 結構描述強型別所接收的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-184">If set to "Typed", the XML schema is strongly typed to the specific IDOC being received.</span></span> <span data-ttu-id="4fc57-185">（從其接收作業可看到此訊息的結構描述。</span><span class="sxs-lookup"><span data-stu-id="4fc57-185">(The schema for this message can be seen from the Receive operations.</span></span> <span data-ttu-id="4fc57-186">請注意，結構描述不同的 Idoc 的不同）。</span><span class="sxs-lookup"><span data-stu-id="4fc57-186">Note that the schema is different for different IDOCs).</span></span> <span data-ttu-id="4fc57-187">這會產生 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-187">This yields an XML IDOC.</span></span>  
  
- <span data-ttu-id="4fc57-188">如果設定為"String"，內送的 IDOC 資料會傳回為字串值。</span><span class="sxs-lookup"><span data-stu-id="4fc57-188">If set to "String", the incoming IDOC data is returned as a String value.</span></span> <span data-ttu-id="4fc57-189">（從 ReceiveIdoc 作業可以看到此訊息的結構描述。）</span><span class="sxs-lookup"><span data-stu-id="4fc57-189">(The schema for this message can be seen from the ReceiveIdoc operation).</span></span> <span data-ttu-id="4fc57-190">這會產生的 XML 訊息\<idocData\>標記。</span><span class="sxs-lookup"><span data-stu-id="4fc57-190">This yields an XML message with the \<idocData\> tag.</span></span>  
  
- <span data-ttu-id="4fc57-191">如果設為 「 Rfc 」，將訊息結構描述符合 RFC 作業 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS，根據內送的 IDOC 版本的 RFC （或 tRFC） 結構描述。</span><span class="sxs-lookup"><span data-stu-id="4fc57-191">If set to "Rfc", the message schema matches the RFC (or tRFC) schema for the RFC operations IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS, depending on the incoming IDOC version.</span></span> <span data-ttu-id="4fc57-192">如果您指定這個繫結屬性，您應該使用 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-192">If you specify this binding property you should use the IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS RFC to receive the IDOC.</span></span> <span data-ttu-id="4fc57-193">在前兩個選項中，配接器會在內部使用這個 RFC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-193">In the first two options, the adapter internally uses this RFC.</span></span> <span data-ttu-id="4fc57-194">此選項時，在您明確地使用這個 RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-194">In this option, you explicitly use this RFC to receive an IDOC.</span></span>  
  
  <span data-ttu-id="4fc57-195">您用來接收 IDOC 的作業必須符合配接器所發出的 IDOC 資料的格式。</span><span class="sxs-lookup"><span data-stu-id="4fc57-195">The operation that you use to receive an IDOC must match the format of the IDOC data emitted by the adapter.</span></span> <span data-ttu-id="4fc57-196">下表提供不同的組合，在其中您可以從 SAP 接收 IDOC 的摘要。</span><span class="sxs-lookup"><span data-stu-id="4fc57-196">The following table provides a summary of the different combinations in which you can receive an IDOC from SAP.</span></span>  
  
|<span data-ttu-id="4fc57-197">若要接收的 IDOC 使用</span><span class="sxs-lookup"><span data-stu-id="4fc57-197">To receive an IDOC using</span></span>|<span data-ttu-id="4fc57-198">設定繫結屬性 ReceiveIDOCFormat 至</span><span class="sxs-lookup"><span data-stu-id="4fc57-198">Set the binding property ReceiveIDOCFormat to</span></span>|  
|------------------------------|---------------------------------------------------|  
|<span data-ttu-id="4fc57-199">**接收**作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-199">**Receive** operation</span></span>|<span data-ttu-id="4fc57-200">具型別</span><span class="sxs-lookup"><span data-stu-id="4fc57-200">Typed</span></span>|  
|<span data-ttu-id="4fc57-201">**ReciveIdoc**作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-201">**ReciveIdoc** operation</span></span>|<span data-ttu-id="4fc57-202">String</span><span class="sxs-lookup"><span data-stu-id="4fc57-202">String</span></span>|  
|<span data-ttu-id="4fc57-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span><span class="sxs-lookup"><span data-stu-id="4fc57-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span></span>|<span data-ttu-id="4fc57-204">Rfc</span><span class="sxs-lookup"><span data-stu-id="4fc57-204">Rfc</span></span>|  
|<span data-ttu-id="4fc57-205">INBOUND_IDOC_PROCESS RFC</span><span class="sxs-lookup"><span data-stu-id="4fc57-205">INBOUND_IDOC_PROCESS RFC</span></span>|<span data-ttu-id="4fc57-206">Rfc</span><span class="sxs-lookup"><span data-stu-id="4fc57-206">Rfc</span></span>|  
  
 <span data-ttu-id="4fc57-207">另一個繫結屬性**PadReceivedIdocsWithSpaces**填補空格與接收的 IDOC 的選擇性欄位時收到預期的格式為"String"。</span><span class="sxs-lookup"><span data-stu-id="4fc57-207">Another binding property **PadReceivedIdocsWithSpaces** pads the received IDOC with white spaces for optional fields when receive format expected is “String”.</span></span> <span data-ttu-id="4fc57-208">這可讓使用舊版的配接器接收的 IDOC 資料格式與相容性。</span><span class="sxs-lookup"><span data-stu-id="4fc57-208">This enables compatibility with the IDOC data format received using the previous version of the adapter.</span></span>  
  
 <span data-ttu-id="4fc57-209">如需有關繫結屬性的詳細資訊，請參閱 <<c0> [ 了解 BizTalk Adapter for mySAP Business Suite 繫結屬性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-209">For more information about binding properties, see [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
 <span data-ttu-id="4fc57-210">如需詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="4fc57-210">For more information about:</span></span>  
  
-   <span data-ttu-id="4fc57-211">接收 IDOC，從 SAP 系統，請使用 BizTalk Server 中，請參閱[SAP 使用 BizTalk server 從接收的 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-211">Receiving an IDOC from an SAP system using BizTalk Server, see [Receive IDOCs from SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="4fc57-212">從交易內容，使用 BizTalk Server 中的 SAP 系統接收 IDOC，請參閱[接收的 Idoc，從交易內容所使用的 BizTalk Server 中的 SAP](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-212">Receiving an IDOC from an SAP system in a transactional context using BizTalk Server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="4fc57-213">訊息結構和 SOAP 動作，以便接收 IDOC，請參閱[IDOC 作業的訊息結構描述](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="4fc57-213">Message structures and SOAP action for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
##  <a name="BKMK_Authorize"></a> <span data-ttu-id="4fc57-214">SAP 授權用於傳送或接收作業</span><span class="sxs-lookup"><span data-stu-id="4fc57-214">SAP Authorization for Using Send or Receive Operations</span></span>  
 <span data-ttu-id="4fc57-215">當您使用**傳送**或是**接收**作業來傳送或接收 Idoc 使用強型別結構描述，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]內部叫用 IDOCTYPE_READ_COMPLETE RFC，若要擷取的中繼資料IDOC。</span><span class="sxs-lookup"><span data-stu-id="4fc57-215">When you use the **Send** or **Receive** operations to send or receive IDOCs using a strongly-typed schema, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] internally invokes the IDOCTYPE_READ_COMPLETE RFC to retrieve the metadata for the IDOC.</span></span> <span data-ttu-id="4fc57-216">叫用這個 RFC 需要在 SAP 中的下列授權：</span><span class="sxs-lookup"><span data-stu-id="4fc57-216">Invoking this RFC requires the following authorization in SAP:</span></span>  
  
```  
Authorisation object S_IDOCDEFT, Fields:  
EDI_TCD, value 'WE30'  
ACTVT, value - 03 (display)  
EDI_DOC, value  *  
EDI_CIM, value *  
```  
  
 <span data-ttu-id="4fc57-217">您可以使用 SU01 交易在 SAP 中，以新增授權的物件。</span><span class="sxs-lookup"><span data-stu-id="4fc57-217">You can use the SU01 transaction in SAP to add an authorization object.</span></span> <span data-ttu-id="4fc57-218">如需有關交易的詳細資訊，請連絡您的 SAP 系統管理員，或請參閱 SAP 文件。</span><span class="sxs-lookup"><span data-stu-id="4fc57-218">For more information about the transaction, contact your SAP administrator or refer to SAP documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4fc57-219">另請參閱</span><span class="sxs-lookup"><span data-stu-id="4fc57-219">See Also</span></span>  
 <span data-ttu-id="4fc57-220">[哪些作業可以是執行使用配接器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="4fc57-220">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>