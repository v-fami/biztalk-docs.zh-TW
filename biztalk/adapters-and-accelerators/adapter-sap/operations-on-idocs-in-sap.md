---
title: "在 SAP Idoc 的作業 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IDOC, operations to receive an
- IDOCs
- IDOCs, operations on
- tRFC server
- IDOC, operations to send an
- RFC server
ms.assetid: 6abcc646-c7a3-48cf-a09e-01f516dcef97
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: cebc9e3fb8382fecf7791d14d52a21ac96f77cde
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2017
---
# <a name="operations-on-idocs-in-sap"></a><span data-ttu-id="45357-102">在 SAP Idoc 的作業</span><span class="sxs-lookup"><span data-stu-id="45357-102">Operations on IDOCs in SAP</span></span>
<span data-ttu-id="45357-103">Idoc 是 SAP 支援以非同步方式進行通訊與 SAP 和非 SAP 系統的標準化的 EDI 類似文件。</span><span class="sxs-lookup"><span data-stu-id="45357-103">IDOCs are standardized EDI-like documents that SAP supports for asynchronously communicating with SAP and non-SAP systems.</span></span> <span data-ttu-id="45357-104">Idoc 是用來傳送和接收"business"文件，例如銷售訂單，與交易夥伴的 SAP 系統或外部程式。</span><span class="sxs-lookup"><span data-stu-id="45357-104">IDOCs are used for sending and receiving “business” documents such as sales orders, for example, to or from a trading partner’s SAP system or an external program.</span></span>  
  
 <span data-ttu-id="45357-105">雖然 SAP 系統支援傳送和接收 Idoc 的連接埠類型的數字 (例如檔案連接埠，CPIC 連接埠)，則[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援傳送及接收 Idoc 透過 tRFC 連接埠。</span><span class="sxs-lookup"><span data-stu-id="45357-105">Although the SAP system supports a number of port types to send and receive IDOCs (such as file port, CPIC port), the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending and receiving IDOCs via the tRFC port.</span></span>  
  
## <a name="operations-to-send-an-idoc"></a><span data-ttu-id="45357-106">傳送 IDOC 的作業</span><span class="sxs-lookup"><span data-stu-id="45357-106">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="45357-107">所有 SAP IDOC 呼叫會在內部都視為 tRFC 呼叫中的配接器做為 tRFC 用戶端，並呼叫中傳送 IDOC 到 SAP RFC。</span><span class="sxs-lookup"><span data-stu-id="45357-107">All IDOC calls to SAP are internally treated as tRFC calls in which the adapter acts as a tRFC client and calls an RFC in SAP to send an IDOC.</span></span> <span data-ttu-id="45357-108">如同其他任何 tRFC 用戶端呼叫，配接器用戶端會選擇性地將 GUID 傳遞至接著將它與交易識別碼 (TID)，它會在 SAP 系統上呼叫關聯的配接器。</span><span class="sxs-lookup"><span data-stu-id="45357-108">Just like any other tRFC client call, the adapter client optionally passes a GUID to the adapter, which in turn associates it with the transaction ID (TID) that it uses for the call on the SAP system.</span></span> <span data-ttu-id="45357-109">（如果配接器用戶端未通過 GUID，配接器會產生其專屬 GUID。）GUID 會傳回到配接器中的用戶端的回應訊息。</span><span class="sxs-lookup"><span data-stu-id="45357-109">(If the adapter client does not pass a GUID, the adapter generates its own GUID.) The GUID is returned to the adapter client in the response message.</span></span> <span data-ttu-id="45357-110">配接器用戶端可以確認 TID SAP 系統上的使用此 GUID。</span><span class="sxs-lookup"><span data-stu-id="45357-110">The adapter client can use this GUID to confirm the TID on the SAP system.</span></span> <span data-ttu-id="45357-111">實際的叫用特殊的靜態方法，在 SAP 繫結也可以取得 tRFC 呼叫配接器使用的 SAP TID **ConvertGuidToTid**。</span><span class="sxs-lookup"><span data-stu-id="45357-111">The actual SAP TID used by the adapter for the tRFC call can be obtained by invoking a special static method in the SAP binding, **ConvertGuidToTid**.</span></span> <span data-ttu-id="45357-112">具有實際 TID 可能適用於 SAP 系統上的問題進行疑難排解。</span><span class="sxs-lookup"><span data-stu-id="45357-112">Having the actual TID may be useful for troubleshooting issues on the SAP system.</span></span>  
  
 <span data-ttu-id="45357-113">呼叫之後傳送 IDOC 完成時，必須確認 TID SAP 系統上。</span><span class="sxs-lookup"><span data-stu-id="45357-113">After the call to send the IDOC is completed, the TID must be confirmed on the SAP system.</span></span> <span data-ttu-id="45357-114">這可讓其資料庫中刪除 TID SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="45357-114">This enables the SAP system to delete the TID from its database.</span></span> <span data-ttu-id="45357-115">配接器用戶端可以確認 TID SAP 系統上。</span><span class="sxs-lookup"><span data-stu-id="45357-115">The adapter client can confirm the TID on the SAP system.</span></span>  
  
-   <span data-ttu-id="45357-116">明確地藉由叫用**RfcConfirmTransID**介面卡上的作業。</span><span class="sxs-lookup"><span data-stu-id="45357-116">Explicitly, by invoking the **RfcConfirmTransID** operation on the adapter.</span></span> <span data-ttu-id="45357-117">這項作業會採用 GUID （上述的回應訊息中傳回），並造成配接器必須確認在 SAP 系統上相關聯的 TID。</span><span class="sxs-lookup"><span data-stu-id="45357-117">This operation takes a GUID (returned in the response message above) and causes the adapter to confirm the associated TID on the SAP system.</span></span>  
  
-   <span data-ttu-id="45357-118">以隱含方式，是藉由設定**AutoConfirmSentIdocs**繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="45357-118">Implicitly, by setting the **AutoConfirmSentIdocs** binding property.</span></span> <span data-ttu-id="45357-119">如果這個繫結屬性為 true，配接器會自動認可 TID 之後傳送 IDOC 到 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="45357-119">If this binding property is true, the adapter automatically commits the TID after it sends the IDOC to the SAP system.</span></span> <span data-ttu-id="45357-120">請參閱[了解 BizTalk Adapter for mySAP Business Suite 繫結屬性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="45357-120">See [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md) for more information.</span></span>  
  
 <span data-ttu-id="45357-121">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]用來傳送 IDOC 的下列 Rfc:</span><span class="sxs-lookup"><span data-stu-id="45357-121">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following RFCs to send an IDOC:</span></span>  
  
-   <span data-ttu-id="45357-122">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="45357-122">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="45357-123">使用此函式模組的 SAP 4.0 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="45357-123">This function module is used for SAP releases before 4.0.</span></span>  
  
-   <span data-ttu-id="45357-124">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="45357-124">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="45357-125">此函式的模組是用 SAP 版本 4.0 及更新版本。</span><span class="sxs-lookup"><span data-stu-id="45357-125">This function module is used for SAP release 4.0 and later.</span></span>  
  
### <a name="sending-idocs-with-segment-data-across-multiple-lines"></a><span data-ttu-id="45357-126">傳送 Idoc 的區段資料跨多行</span><span class="sxs-lookup"><span data-stu-id="45357-126">Sending IDOCs with Segment Data Across Multiple Lines</span></span>  
 <span data-ttu-id="45357-127">Idoc 被 constituted 的區段。</span><span class="sxs-lookup"><span data-stu-id="45357-127">IDOCs are constituted of segments.</span></span> <span data-ttu-id="45357-128">在 IDOC 一般檔案中的每個區段項目包含 （包含 DOCNUM 欄位） 的區段標頭資訊以及區段資料。</span><span class="sxs-lookup"><span data-stu-id="45357-128">Each segment entry in an IDOC flat-file contains the segment header info (containing the DOCNUM field) and the segment data.</span></span> <span data-ttu-id="45357-129">在某些 Idoc，區段資料可以分成多行。</span><span class="sxs-lookup"><span data-stu-id="45357-129">In some IDOCs, the segment data can be split across multiple lines.</span></span> <span data-ttu-id="45357-130">例如：</span><span class="sxs-lookup"><span data-stu-id="45357-130">For example:</span></span>  
  
```  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment data wrapped from the previous line  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
```  
  
 <span data-ttu-id="45357-131">WCF 架構[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援傳送這類 Idoc 到 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="45357-131">The WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending such IDOCs to the SAP system.</span></span> <span data-ttu-id="45357-132">若要支援傳送這類的 Idoc，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]決定每個區段的資料是否接續前一個，或是否為新的分割資料。</span><span class="sxs-lookup"><span data-stu-id="45357-132">To support sending such IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] determines whether each segment data is a continuation of the previous one, or whether it is a new segment data.</span></span> <span data-ttu-id="45357-133">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]剖析每個區段標頭，並尋找 DOCNUM 欄位決定這。</span><span class="sxs-lookup"><span data-stu-id="45357-133">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] decides this by parsing each segment header and looking for the DOCNUM field.</span></span> <span data-ttu-id="45357-134">如果區段資料會分成兩行，第二行沒有區段標頭，因此[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]找不到 DOCNUM 欄位。</span><span class="sxs-lookup"><span data-stu-id="45357-134">If the segment data is split across two lines, the second line does not have a segment header and as a result the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find the DOCNUM field.</span></span> <span data-ttu-id="45357-135">因此，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可以判斷它是持續的前一個區段的資料。</span><span class="sxs-lookup"><span data-stu-id="45357-135">Hence, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can determine that it is a continuation of the previous segment data.</span></span>  
  
 <span data-ttu-id="45357-136">如上所示，IDOC 的表示法，例如在[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]找不到任何 DOCNUM 欄位 」`Segment data wrapped from the previous line`"，而且可以決定這條線是持續的前一個區段的資料。</span><span class="sxs-lookup"><span data-stu-id="45357-136">For example, in the representation of an IDOC shown above, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find any DOCNUM field in “`Segment data wrapped from the previous line`” and is able to decide that the line is a continuation of the previous segment data.</span></span> <span data-ttu-id="45357-137">請考慮 IDOC 的大小一般檔案的實際執行環境中，執行這類檢查針對每個區段的資料可能會導致處理時間增加。</span><span class="sxs-lookup"><span data-stu-id="45357-137">Considering the size of IDOC flat files in production environments, performing such checks for each segment data may result in increased processing time.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="45357-138">配接器會使用 DOCNUM 欄位，而不是歸位字元傳回換行字元 (CRLF) 來識別和擷取每個區段記錄從 IDOC 資料。</span><span class="sxs-lookup"><span data-stu-id="45357-138">The adapter uses the DOCNUM field instead of a carriage return line feed (CRLF) to identify and extract each segment record from IDOC data.</span></span> <span data-ttu-id="45357-139">如果 DOCNUM 記錄中的欄位控制項和資料都是無效或部分空白，配接器無法剖析 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-139">If the DOCNUM fields in the control and data records are invalid or partly blank, the adapter fails to parse the IDOC.</span></span> <span data-ttu-id="45357-140">因此，SAP 系統不會傳送 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-140">Hence, the IDOC is not sent to the SAP system.</span></span>  
  
### <a name="operations-to-send-an-idoc"></a><span data-ttu-id="45357-141">傳送 IDOC 的作業</span><span class="sxs-lookup"><span data-stu-id="45357-141">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="45357-142">傳送 Idoc 到 SAP 系統支援下列作業：</span><span class="sxs-lookup"><span data-stu-id="45357-142">The following operations are supported for sending IDOCs to an SAP system:</span></span>  
  
-   <span data-ttu-id="45357-143">**傳送**。</span><span class="sxs-lookup"><span data-stu-id="45357-143">**Send**.</span></span> <span data-ttu-id="45357-144">您可以使用這項作業傳送 IDOC 至 SAP 系統，使用強型別結構描述。</span><span class="sxs-lookup"><span data-stu-id="45357-144">Use this operation to send an IDOC to the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="45357-145">這項作業的結構描述會公開控制項記錄欄位和資料記錄欄位，包括區段標頭和區段欄位。</span><span class="sxs-lookup"><span data-stu-id="45357-145">The schema for this operation exposes control record fields and data record fields, including segment headers and segment fields.</span></span> <span data-ttu-id="45357-146">傳送作業是 IDocType + CimType + ReleaseNumber + 版本的特定組合。</span><span class="sxs-lookup"><span data-stu-id="45357-146">The Send operation is specific to an IDocType + CimType + ReleaseNumber + Version combination.</span></span>  
  
     <span data-ttu-id="45357-147">這項作業會顯示每個 idoc，並適用於特定的 IDOC 節點中[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="45357-147">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="45357-148">若要能夠順利執行**傳送**作業，您必須在 SAP 系統相關的授權。</span><span class="sxs-lookup"><span data-stu-id="45357-148">To be able to successfully perform a **Send** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="45357-149">如需詳細資訊，</span><span class="sxs-lookup"><span data-stu-id="45357-149">For more information.</span></span>  
  
-   <span data-ttu-id="45357-150">**SendIdoc**。</span><span class="sxs-lookup"><span data-stu-id="45357-150">**SendIdoc**.</span></span> <span data-ttu-id="45357-151">您可以使用這項作業傳送 IDOC 至 SAP 系統使用弱式型別的結構描述。</span><span class="sxs-lookup"><span data-stu-id="45357-151">Use this operation to send an IDOC to the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="45357-152">這項作業的結構描述會公開為單一字串欄位所組成的控制記錄和資料記錄的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="45357-152">The schema for this operation exposes IDOCs as a single string field consisting the control record and data record.</span></span> <span data-ttu-id="45357-153">SendIdoc 作業會做為參數的 IDOC 字串和 GUID。</span><span class="sxs-lookup"><span data-stu-id="45357-153">The SendIdoc operation takes an IDOC string and a GUID as a parameter.</span></span>  
  
     <span data-ttu-id="45357-154">這是單一作業中顯示所有 SAP 系統所公開的 Idoc，適用於根**IDOC**節點[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="45357-154">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
 <span data-ttu-id="45357-155">如需詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="45357-155">For more information about:</span></span>  
  
-   <span data-ttu-id="45357-156">傳送 IDOC 到 SAP 系統使用 BizTalk Server，請參閱[傳送 Idoc 到 SAP 使用 BizTalk server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-156">Sending an IDOC to an SAP system using BizTalk Server, see [Send IDOCs to SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="45357-157">傳送 IDOC 到 SAP 系統使用 WCF 服務模型，請參閱[傳送 Idoc 到 SAP 使用 WCF 服務模型](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-157">Sending an IDOC to an SAP system using WCF service model, see [Send IDOCs to SAP by Using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md).</span></span>  
  
-   <span data-ttu-id="45357-158">訊息結構和傳送 IDOC 的 SOAP 動作，請參閱[IDOC 作業的訊息結構描述](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-158">Message structures and SOAP action for sending an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="operations-to-receive-an-idoc"></a><span data-ttu-id="45357-159">接收 IDOC 的作業</span><span class="sxs-lookup"><span data-stu-id="45357-159">Operations to Receive an IDOC</span></span>  
 <span data-ttu-id="45357-160">若要接收 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]行為會視做為 tRFC 伺服器或 RFC 伺服器：</span><span class="sxs-lookup"><span data-stu-id="45357-160">To receive an IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can behave either as a tRFC server or an RFC server:</span></span>  
  
-   <span data-ttu-id="45357-161">配接器做為 tRFC 伺服器時，繫結屬性的行為**TidDatabaseConnectionString**必須設為您的電腦上的 TID 資料庫的連接字串。</span><span class="sxs-lookup"><span data-stu-id="45357-161">For the adapter to behave as a tRFC server, the binding property **TidDatabaseConnectionString** must be set to the connection string for the TID database on your computer.</span></span> <span data-ttu-id="45357-162">TRFC 伺服器案例，此配接器會接受 tRFC 用戶端呼叫從 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-162">For a tRFC server scenario, the adapter accepts a tRFC client call from the SAP system to receive the IDOC.</span></span>  
  
-   <span data-ttu-id="45357-163">配接器的行為與 RFC 伺服器， **TidDatabaseConnectionString**應為 null （預設值）。</span><span class="sxs-lookup"><span data-stu-id="45357-163">For the adapter to behave as an RFC server, the **TidDatabaseConnectionString** should be null (default).</span></span> <span data-ttu-id="45357-164">如需 RFC 伺服器案例中，此配接器會接受的 RFC 用戶端呼叫從 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-164">For an RFC server scenario, the adapter accepts an RFC client call from the SAP system to receive the IDOC.</span></span>  
  
 <span data-ttu-id="45357-165">下列 Rfc 用來傳送和接收的 Idoc。當傳送 Idoc，配接器會使用這些 Rfc，而 SAP 系統接收 IDOC 時, 使用它們。</span><span class="sxs-lookup"><span data-stu-id="45357-165">The following RFCs are used to send and receive IDOCs; when sending IDOCs, the adapter uses these RFCs, whereas when receiving IDOCS, the SAP system uses them.</span></span>  
  
-   <span data-ttu-id="45357-166">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="45357-166">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="45357-167">使用此函式模組的 SAP 4.0 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="45357-167">This function module is used for SAP releases before 4.0.</span></span>  
  
-   <span data-ttu-id="45357-168">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="45357-168">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="45357-169">此函式的模組是用 SAP 版本 4.0 及更新版本。</span><span class="sxs-lookup"><span data-stu-id="45357-169">This function module is used for SAP release 4.0 and later.</span></span>  
  
 <span data-ttu-id="45357-170">從 SAP 系統接收 Idoc 支援下列作業：</span><span class="sxs-lookup"><span data-stu-id="45357-170">The following operations are supported for receiving IDOCs from an SAP system:</span></span>  
  
-   <span data-ttu-id="45357-171">**接收**。</span><span class="sxs-lookup"><span data-stu-id="45357-171">**Receive**.</span></span> <span data-ttu-id="45357-172">使用這項作業，從使用強型別結構描述的 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-172">Use this operation to receive an IDOC from the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="45357-173">這項作業的結構描述會公開控制項記錄欄位和資料包括區段標頭和區段欄位的記錄欄位。</span><span class="sxs-lookup"><span data-stu-id="45357-173">The schema for this operation exposes control record fields and data record fields including segment headers and segment fields.</span></span>  
  
     <span data-ttu-id="45357-174">這項作業會顯示每個 idoc，並適用於特定的 IDOC 節點中[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="45357-174">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="45357-175">若要能夠順利執行**接收**作業，您必須在 SAP 系統相關的授權。</span><span class="sxs-lookup"><span data-stu-id="45357-175">To be able to successfully perform a **Receive** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="45357-176">如需詳細資訊，</span><span class="sxs-lookup"><span data-stu-id="45357-176">For more information.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="45357-177">使用**接收**作業，您也可以接收多個 Idoc。</span><span class="sxs-lookup"><span data-stu-id="45357-177">Using the **Receive** operation, you can also receive multiple IDOCs.</span></span>  
  
-   <span data-ttu-id="45357-178">**ReceiveIdoc**。</span><span class="sxs-lookup"><span data-stu-id="45357-178">**ReceiveIdoc**.</span></span> <span data-ttu-id="45357-179">使用這項作業，從使用弱式型別的結構描述的 SAP 系統接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-179">Use this operation to receive an IDOC from the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="45357-180">這項作業的結構描述會公開為控制記錄和資料記錄所組成的單一字串欄位的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="45357-180">The schema for this operation exposes IDOCs as a single string field consisting of the control record and data record.</span></span> <span data-ttu-id="45357-181">這項作業在 XML 訊息以字串形式接收 Idoc \<idocData\>標記。</span><span class="sxs-lookup"><span data-stu-id="45357-181">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  
  
     <span data-ttu-id="45357-182">這是單一作業中顯示所有 SAP 系統所公開的 Idoc，適用於根**IDOC**節點[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="45357-182">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
 <span data-ttu-id="45357-183">當接收 Idoc，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援不同的訊息格式，可以指定為繫結屬性的值， **ReceiveIDocFormat**所公開[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="45357-183">When receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports different message formats, which can be specified as a value for the binding property, **ReceiveIDocFormat** exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span>  
  
-   <span data-ttu-id="45357-184">如果設定為 「 類型 」，XML 結構描述強型別所接收的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-184">If set to "Typed", the XML schema is strongly typed to the specific IDOC being received.</span></span> <span data-ttu-id="45357-185">（從其接收作業可看到此訊息的結構描述。</span><span class="sxs-lookup"><span data-stu-id="45357-185">(The schema for this message can be seen from the Receive operations.</span></span> <span data-ttu-id="45357-186">請注意，在結構描述不同的 Idoc 的不同）。</span><span class="sxs-lookup"><span data-stu-id="45357-186">Note that the schema is different for different IDOCs).</span></span> <span data-ttu-id="45357-187">這會產生 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-187">This yields an XML IDOC.</span></span>  
  
-   <span data-ttu-id="45357-188">如果設定為 「 字串 」，內送的 IDOC 資料會傳回為字串值。</span><span class="sxs-lookup"><span data-stu-id="45357-188">If set to "String", the incoming IDOC data is returned as a String value.</span></span> <span data-ttu-id="45357-189">（從 ReceiveIdoc 作業可以看到此訊息的結構描述。）</span><span class="sxs-lookup"><span data-stu-id="45357-189">(The schema for this message can be seen from the ReceiveIdoc operation).</span></span> <span data-ttu-id="45357-190">這會產生的 XML 訊息\<idocData\>標記。</span><span class="sxs-lookup"><span data-stu-id="45357-190">This yields an XML message with the \<idocData\> tag.</span></span>  
  
-   <span data-ttu-id="45357-191">如果設定為"Rfc"，訊息結構描述符合 RFC 作業 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS，根據連入的 IDOC 版本的 RFC （或 tRFC） 結構描述。</span><span class="sxs-lookup"><span data-stu-id="45357-191">If set to "Rfc", the message schema matches the RFC (or tRFC) schema for the RFC operations IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS, depending on the incoming IDOC version.</span></span> <span data-ttu-id="45357-192">如果您指定這個繫結屬性，您應該使用 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-192">If you specify this binding property you should use the IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS RFC to receive the IDOC.</span></span> <span data-ttu-id="45357-193">在前兩個選項中，配接器在內部使用這個 RFC。</span><span class="sxs-lookup"><span data-stu-id="45357-193">In the first two options, the adapter internally uses this RFC.</span></span> <span data-ttu-id="45357-194">此選項，在您明確地使用這個 RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-194">In this option, you explicitly use this RFC to receive an IDOC.</span></span>  
  
 <span data-ttu-id="45357-195">您用來接收 IDOC 的作業必須符合配接器所發出的 IDOC 資料的格式。</span><span class="sxs-lookup"><span data-stu-id="45357-195">The operation that you use to receive an IDOC must match the format of the IDOC data emitted by the adapter.</span></span> <span data-ttu-id="45357-196">下表提供不同的組合，您可以從 SAP 接收 IDOC 的摘要。</span><span class="sxs-lookup"><span data-stu-id="45357-196">The following table provides a summary of the different combinations in which you can receive an IDOC from SAP.</span></span>  
  
|<span data-ttu-id="45357-197">若要接收的 IDOC 使用</span><span class="sxs-lookup"><span data-stu-id="45357-197">To receive an IDOC using</span></span>|<span data-ttu-id="45357-198">設定繫結屬性 ReceiveIDOCFormat 至</span><span class="sxs-lookup"><span data-stu-id="45357-198">Set the binding property ReceiveIDOCFormat to</span></span>|  
|------------------------------|---------------------------------------------------|  
|<span data-ttu-id="45357-199">**接收**作業</span><span class="sxs-lookup"><span data-stu-id="45357-199">**Receive** operation</span></span>|<span data-ttu-id="45357-200">具型別</span><span class="sxs-lookup"><span data-stu-id="45357-200">Typed</span></span>|  
|<span data-ttu-id="45357-201">**ReciveIdoc**作業</span><span class="sxs-lookup"><span data-stu-id="45357-201">**ReciveIdoc** operation</span></span>|<span data-ttu-id="45357-202">字串</span><span class="sxs-lookup"><span data-stu-id="45357-202">String</span></span>|  
|<span data-ttu-id="45357-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span><span class="sxs-lookup"><span data-stu-id="45357-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span></span>|<span data-ttu-id="45357-204">Rfc</span><span class="sxs-lookup"><span data-stu-id="45357-204">Rfc</span></span>|  
|<span data-ttu-id="45357-205">INBOUND_IDOC_PROCESS RFC</span><span class="sxs-lookup"><span data-stu-id="45357-205">INBOUND_IDOC_PROCESS RFC</span></span>|<span data-ttu-id="45357-206">Rfc</span><span class="sxs-lookup"><span data-stu-id="45357-206">Rfc</span></span>|  
  
 <span data-ttu-id="45357-207">另一個繫結屬性**PadReceivedIdocsWithSpaces**進行接收的 IDOC，以空格填補的選擇性欄位時收到的預期格式為"String"。</span><span class="sxs-lookup"><span data-stu-id="45357-207">Another binding property **PadReceivedIdocsWithSpaces** pads the received IDOC with white spaces for optional fields when receive format expected is “String”.</span></span> <span data-ttu-id="45357-208">這可讓與使用舊版的配接器接收的 IDOC 資料格式相容性。</span><span class="sxs-lookup"><span data-stu-id="45357-208">This enables compatibility with the IDOC data format received using the previous version of the adapter.</span></span>  
  
 <span data-ttu-id="45357-209">如需繫結屬性的詳細資訊，請參閱[了解 BizTalk Adapter for mySAP Business Suite 繫結屬性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-209">For more information about binding properties, see [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
 <span data-ttu-id="45357-210">如需詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="45357-210">For more information about:</span></span>  
  
-   <span data-ttu-id="45357-211">從使用 BizTalk Server 的 SAP 系統接收 IDOC 看到[從 SAP 使用 BizTalk Server 所接收的 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-211">Receiving an IDOC from an SAP system using BizTalk Server, see [Receive IDOCs from SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="45357-212">從交易內容，使用 BizTalk Server 中的 SAP 系統接收 IDOC，請參閱[從交易內容所使用的 BizTalk Server 中的 SAP 接收的 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-212">Receiving an IDOC from an SAP system in a transactional context using BizTalk Server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="45357-213">訊息結構和用於接收 IDOC 的 SOAP 動作，請參閱[IDOC 作業的訊息結構描述](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="45357-213">Message structures and SOAP action for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
##  <a name="BKMK_Authorize"></a><span data-ttu-id="45357-214">SAP 授權使用傳送或接收作業</span><span class="sxs-lookup"><span data-stu-id="45357-214">SAP Authorization for Using Send or Receive Operations</span></span>  
 <span data-ttu-id="45357-215">當您使用**傳送**或**接收**傳送或接收 Idoc 使用強型別結構描述作業[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]內部叫用 IDOCTYPE_READ_COMPLETE RFC 來擷取中繼資料IDOC。</span><span class="sxs-lookup"><span data-stu-id="45357-215">When you use the **Send** or **Receive** operations to send or receive IDOCs using a strongly-typed schema, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] internally invokes the IDOCTYPE_READ_COMPLETE RFC to retrieve the metadata for the IDOC.</span></span> <span data-ttu-id="45357-216">叫用這個 RFC 需要在 SAP 中的下列授權：</span><span class="sxs-lookup"><span data-stu-id="45357-216">Invoking this RFC requires the following authorization in SAP:</span></span>  
  
```  
Authorisation object S_IDOCDEFT, Fields:  
EDI_TCD, value 'WE30'  
ACTVT, value - 03 (display)  
EDI_DOC, value  *  
EDI_CIM, value *  
```  
  
 <span data-ttu-id="45357-217">您可以使用 sap SU01 交易，以新增授權的物件。</span><span class="sxs-lookup"><span data-stu-id="45357-217">You can use the SU01 transaction in SAP to add an authorization object.</span></span> <span data-ttu-id="45357-218">如需有關交易的詳細資訊，請連絡您的 SAP 系統管理員，或請參閱 SAP 文件。</span><span class="sxs-lookup"><span data-stu-id="45357-218">For more information about the transaction, contact your SAP administrator or refer to SAP documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="45357-219">請參閱</span><span class="sxs-lookup"><span data-stu-id="45357-219">See Also</span></span>  
 <span data-ttu-id="45357-220">[哪些作業可以是執行使用配接器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="45357-220">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>