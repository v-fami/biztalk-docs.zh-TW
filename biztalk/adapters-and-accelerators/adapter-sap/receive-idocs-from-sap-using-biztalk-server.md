---
title: "從 SAP 使用 BizTalk Server 接收 Idoc |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IDOCs, sample (receiving)
- IDOCs, business scenarios for receiving
- IDOCs, receiving from SAP using BizTalk Server
ms.assetid: b904bf07-1108-4ed3-8564-d83eaafff247
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 45dc38a939e71a8f4eb3d3afe87736fc548f8570
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="receive-idocs-from-sap-using-biztalk-server"></a><span data-ttu-id="8b3e2-102">從 SAP 使用 BizTalk Server 接收 Idoc</span><span class="sxs-lookup"><span data-stu-id="8b3e2-102">Receive IDOCs from SAP using BizTalk Server</span></span>
<span data-ttu-id="8b3e2-103">接收 IDOC 包括[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]做為要從 SAP 接收特殊的 RFC 呼叫的 RFC 伺服器。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-103">Receiving an IDOC involves the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to act as an RFC server to receive a special RFC call from SAP.</span></span> <span data-ttu-id="8b3e2-104">SAP 配接器可以接收 Idoc 做為 RFC 伺服器或 tRFC 伺服器。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-104">The SAP adapter can receive IDOCs acting as an RFC server or a tRFC server.</span></span> <span data-ttu-id="8b3e2-105">如需使用行為就像是 tRFC 伺服器配接器接收 IDOC 的詳細資訊，請參閱[從交易內容所使用的 BizTalk Server 中的 SAP 接收的 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-105">For more information about receiving an IDOC with the adapter behaving as a tRFC server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
 <span data-ttu-id="8b3e2-106">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可呈現兩個不同接收 Idoc 的作業：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-106">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces two different operations to receive IDOCs:</span></span>  
  
-   <span data-ttu-id="8b3e2-107">**接收**作業可讓配接器接收 Idoc 具有強型別結構描述。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-107">**Receive** operation enables adapter to receive IDOCs having a strongly-typed schema.</span></span>  
  
-   <span data-ttu-id="8b3e2-108">**ReceiveIdoc**作業可讓配接器接收 Idoc 具有弱式型別的結構描述。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-108">**ReceiveIdoc** operation enables adapter to receive IDOCs having a weakly-typed schema.</span></span> <span data-ttu-id="8b3e2-109">這項作業在 XML 訊息以字串形式接收 Idoc \<idocData > 標記。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-109">This operation receives IDOCs as a string in an XML message under the \<idocData> tag.</span></span>  
  
 <span data-ttu-id="8b3e2-110">在配接器端，您可以指定的值**ReceiveIDocFormat**內容繫結至指定的配接器會接收的 IDOC 格式。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-110">On the adapter side, you can specify a value for the **ReceiveIDocFormat** binding property to specify the format of IDOC the adapter would receive.</span></span>  
  
-   <span data-ttu-id="8b3e2-111">**輸入**指定配接器將會接收 Idoc，使用強型別結構描述。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-111">**Typed** specifies the adapter will receive IDOCs with strongly-typed schema.</span></span> <span data-ttu-id="8b3e2-112">這會產生 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-112">This yields an XML IDOC.</span></span>  
  
-   <span data-ttu-id="8b3e2-113">**字串**指定配接器將會接收 Idoc 弱型別結構描述。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-113">**String** specifies the adapter will receive IDOCs with weakly-typed schema.</span></span> <span data-ttu-id="8b3e2-114">這會產生的 XML 訊息\<idocData > 標記。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-114">This yields an XML message with the \<idocData> tag.</span></span>  
  
-   <span data-ttu-id="8b3e2-115">**Rfc**指定配接器將會接收 Idoc 中的任何格式。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-115">**Rfc** specifies the adapter will receive IDOCs in any format.</span></span>  
  
 <span data-ttu-id="8b3e2-116">接收 Idoc，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]也支援將協調流程中的一組配接器用戶端可以使用的訊息內容屬性。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-116">For receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] also supports a set of message context properties that adapter clients can use in the orchestrations.</span></span> <span data-ttu-id="8b3e2-117">如需屬性的清單，請參閱[接收 Idoc 的訊息內容屬性](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-117">For the list of properties, see [Message Context Properties for Receiving IDOCs](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md).</span></span>  
  
 <span data-ttu-id="8b3e2-118">如需有關如何[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支援接收 Idoc 從 SAP 系統，請參閱[sap Idoc 的作業](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-118">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports receiving IDOCs from an SAP system, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span> <span data-ttu-id="8b3e2-119">接收 IDOC，訊息的 SOAP 結構的詳細資訊，請參閱[IDOC 作業的訊息結構描述](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-119">For more information about the structure of SOAP messages for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="biztalk-scenarios-for-receiving-idocs-from-an-sap-system"></a><span data-ttu-id="8b3e2-120">從 SAP 系統接收 Idoc BizTalk 案例</span><span class="sxs-lookup"><span data-stu-id="8b3e2-120">BizTalk Scenarios for Receiving IDOCs from an SAP System</span></span>  
 <span data-ttu-id="8b3e2-121">下表提供從 SAP 系統接收 Idoc 的重要 BizTalk 案例：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-121">The following table provides key BizTalk scenarios for receiving IDOCs from an SAP system:</span></span>  
  
|<span data-ttu-id="8b3e2-122">從 SAP 配接器輸入</span><span class="sxs-lookup"><span data-stu-id="8b3e2-122">Input to Adapter from SAP</span></span>|<span data-ttu-id="8b3e2-123">BizTalk 處理</span><span class="sxs-lookup"><span data-stu-id="8b3e2-123">BizTalk Processing</span></span>|<span data-ttu-id="8b3e2-124">輸出</span><span class="sxs-lookup"><span data-stu-id="8b3e2-124">Output</span></span>|  
|-------------------------------|------------------------|------------|  
|<span data-ttu-id="8b3e2-125">（透過 tRFC 介面） 的 IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-125">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="8b3e2-126">**中繼資料設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-126">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-127">1.設定繫結屬性 GenerateFlatFileCompatibleIdocSchema 至**True**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-127">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="8b3e2-128">2.產生的結構描述**接收**作業特定的 IDOC 使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-128">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="8b3e2-129">3.設定繫結屬性 ReceiveIdocFormat 至**具型別**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-129">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="8b3e2-130">**協調流程設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-130">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-131">1.接收 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-131">1.  Receive XML IDOC.</span></span><br /><span data-ttu-id="8b3e2-132">2.使用一般檔案組合器將 XML IDOC 轉換成一般檔案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-132">2.  Use flat-file assembler to convert XML IDOC to flat-file.</span></span>|<span data-ttu-id="8b3e2-133">一般檔案 IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-133">Flat-file IDOC</span></span>|  
|<span data-ttu-id="8b3e2-134">（透過 tRFC 介面） 的 IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-134">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="8b3e2-135">**中繼資料設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-135">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-136">1.設定繫結屬性 GenerateFlatFileCompatibleIdocSchema 至**True**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-136">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="8b3e2-137">2.產生的結構描述**接收**作業特定的 IDOC 使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-137">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="8b3e2-138">3.設定繫結屬性 ReceiveIdocFormat 至**具型別**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-138">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="8b3e2-139">**協調流程的設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-139">**Orchestration Design-Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-140">接收 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-140">- Receive XML IDOC.</span></span>|<span data-ttu-id="8b3e2-141">XML IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-141">XML IDOC</span></span>|  
|<span data-ttu-id="8b3e2-142">（透過 tRFC 介面） 的 IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-142">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="8b3e2-143">**中繼資料設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-143">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-144">1.設定繫結屬性 GenerateFlatFileCompatibleIdocSchema 至**True**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-144">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="8b3e2-145">2.產生的結構描述**接收**作業特定的 IDOC 使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-145">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="8b3e2-146">3.設定繫結屬性 ReceiveIdocFormat 至**字串**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-146">3.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="8b3e2-147">**協調流程設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-147">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-148">1.接收一般檔案 IDOC 中的 XML 訊息\<idocData > 標記。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-148">1.  Receive XML message with flat-file IDOC in \<idocData> tag.</span></span><br /><span data-ttu-id="8b3e2-149">2.用於擷取 XML 訊息從一般檔案 IDoc，接收埠組態使用 WCF 配接器的 XPath 支援。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-149">2.  Use the WCF adapter’s XPath support in the receive port configuration to extract the flat-file IDoc from the XML message.</span></span> <span data-ttu-id="8b3e2-150">例如：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-150">For example:</span></span><br />     `/*[local-name()='ReceiveIdoc']/*[local-name()='idocData']`<br /><span data-ttu-id="8b3e2-151">3.使用一般檔案解譯器將一般檔案 IDOC 轉換成 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-151">3.  Use flat-file disassembler to convert flat-file IDOC to XML IDOC.</span></span><br /><br /> <span data-ttu-id="8b3e2-152">**重要**這種方法可以用來接收 Idoc 使用新 WCF 架構[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]然後直接將它們套用在從現有的 BizTalk SAP 配接器接收的 Idoc 寫入現有的 BizTalk 專案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-152">**Important** This approach can be used to receive IDOCs using the new WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and directly apply them in an existing BizTalk project written to receive IDOCs from the existing BizTalk SAP adapter.</span></span> <span data-ttu-id="8b3e2-153">這也是使用版本號碼的版次號碼 (SYSREL) 大於或等於接收 Idoc 的建議的方法。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-153">This is also the recommended approach to receive IDOCs with version number less than the release number (SYSREL).</span></span>|<span data-ttu-id="8b3e2-154">XML IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-154">XML IDOC</span></span>|  
|<span data-ttu-id="8b3e2-155">（透過 tRFC 介面） 的 IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-155">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="8b3e2-156">**中繼資料設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-156">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-157">1.產生的結構描述**ReceiveIdoc**作業從 IDOC 節點使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-157">1.  Generate the schema for the **ReceiveIdoc** operation from the IDOC node using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="8b3e2-158">2.設定繫結屬性 ReceiveIdocFormat 至**字串**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-158">2.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="8b3e2-159">**協調流程設計階段**</span><span class="sxs-lookup"><span data-stu-id="8b3e2-159">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="8b3e2-160">-接收的 IDOC 中的字串表示的 XML 訊息\<idocData > 標記。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-160">- Receive XML message with the IDOC represented as a string in the \<idocData> tag.</span></span>|<span data-ttu-id="8b3e2-161">XML 訊息中的一般檔案 IDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-161">Flat-file IDOC in XML message</span></span>|  
  
## <a name="how-to-receive-an-idoc-from-an-sap-system"></a><span data-ttu-id="8b3e2-162">如何從 SAP 系統接收 IDOC？</span><span class="sxs-lookup"><span data-stu-id="8b3e2-162">How to Receive an IDOC from an SAP System?</span></span>  
 <span data-ttu-id="8b3e2-163">執行 SAP 系統使用的作業[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]牽涉到程序中所述的工作[建立的 SAP 應用程式的建置組塊](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-163">Performing an operation on an SAP system using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to create SAP applications](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span></span> <span data-ttu-id="8b3e2-164">若要從 SAP 系統接收 IDOC，這些工作包括：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-164">To receive an IDOC from an SAP system, these tasks are:</span></span>  
  
1.  <span data-ttu-id="8b3e2-165">建立 BizTalk 專案，並產生您想要叫用之 SAP 系統內的 idoc 的結構描述。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-165">Create a BizTalk project and generate schema for the IDOC you want to invoke in the SAP system.</span></span> <span data-ttu-id="8b3e2-166">產生結構描述時請確定您設定必要的繫結屬性中上, 表中列出。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-166">While generating the schema make sure you set the required binding properties, as listed in the previous table.</span></span> <span data-ttu-id="8b3e2-167">如需有關如何設定繫結屬性的指示，請參閱[設定 SAP 配接器的繫結屬性](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-167">For instructions on how to set the binding properties, see [Configure the binding properties for the SAP adapter](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span></span>  
  
2.  <span data-ttu-id="8b3e2-168">建立傳送和從 SAP 系統接收訊息的 BizTalk 專案中的訊息。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-168">Create messages in the BizTalk project for sending and receiving messages from the SAP system.</span></span>  
  
3.  <span data-ttu-id="8b3e2-169">建立從 SAP 系統接收 IDOC 的協調流程。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-169">Create an orchestration to receive an IDOC from an SAP system.</span></span>  
  
4.  <span data-ttu-id="8b3e2-170">建置和部署 BizTalk 專案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-170">Build and deploy the BizTalk project.</span></span>  
  
5.  <span data-ttu-id="8b3e2-171">設定的 BizTalk 應用程式藉由建立實體傳送和接收埠。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-171">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
6.  <span data-ttu-id="8b3e2-172">啟動 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-172">Start the BizTalk application.</span></span>  
  
 <span data-ttu-id="8b3e2-173">本主題提供執行這些工作的指示。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-173">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="samples-based-on-this-topic"></a><span data-ttu-id="8b3e2-174">根據本主題的範例</span><span class="sxs-lookup"><span data-stu-id="8b3e2-174">Samples Based On This Topic</span></span>  
 <span data-ttu-id="8b3e2-175">範例、 ReceiveIDOC 和 ReceiveIDOC_SYSREL，根據本主題也提供與[!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-175">Samples, ReceiveIDOC and ReceiveIDOC_SYSREL, based on this topic are also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="8b3e2-176">如需詳細資訊，請參閱[適用於 SAP 配接器範例](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-176">For more information, see [Samples for the SAP adapter](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="8b3e2-177">產生結構描述</span><span class="sxs-lookup"><span data-stu-id="8b3e2-177">Generating Schema</span></span>  
 <span data-ttu-id="8b3e2-178">您必須產生結構描述的*接收*作業*ORDERS03。V3.620*下的 IDOC */IDOC/ORDERS/ORDERS03*節點。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-178">You must generate schema for the *Receive* operation of the *ORDERS03.V3.620* IDOC under the */IDOC/ORDERS/ORDERS03* node.</span></span> <span data-ttu-id="8b3e2-179">請參閱[瀏覽、 搜尋和 get 中繼資料中 SAP IDOC 作業的](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md)如需有關如何產生結構描述特定的 IDOC 的指示。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-179">See [Browse, search and get Metadata for IDOC Operations in SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) for instructions on how to generate schema for a particular IDOC.</span></span> <span data-ttu-id="8b3e2-180">在產生結構描述時，您可能想要設定下列屬性：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-180">While generating the schema, you might want to set the following properties as well:</span></span>  
  
-   <span data-ttu-id="8b3e2-181">*GenerateFlatFileCompatibleIDoc* – 產生\<appinfo > 標記放在可以在 BizTalk 案例中使用 BizTalk 一般檔案剖析器，以支援一般檔案 Idoc。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-181">*GenerateFlatFileCompatibleIDoc* –Generates \<appinfo> tags so that the BizTalk flat-file parser can be used in BizTalk scenarios to support flat-file IDOCs.</span></span>  
  
-   <span data-ttu-id="8b3e2-182">*FlatFileSegmentIndicator* – 指出如果 IDOC 結構描述\<appinfo > 區段定義名稱或區段型別名稱，應包含標記。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-182">*FlatFileSegmentIndicator* – Indicates if the IDOC schema \<appinfo> tags should contain segment definition names or segment type names.</span></span> <span data-ttu-id="8b3e2-183">這是適用於使用希望傳送/接收一般檔案 IDOC 至/從 SAP。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-183">This is applicable when a used wishes to send/receive a flat-file IDOC to/from SAP.</span></span> <span data-ttu-id="8b3e2-184">如果*GenerateFlatFileCompatibleIDoc*設定為 false，則*FlatFileSegmentIndicator*繫結屬性會被忽略。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-184">If the *GenerateFlatFileCompatibleIDoc* is set to false, then *FlatFileSegmentIndicator* binding property is ignored.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b3e2-185">因為您正在產生發話 IDOC 的結構描述，請確定您選取**服務 （輸入作業）**從**選取合約型別**下拉式清單中的[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-185">Because you are generating the schema for an inbound IDOC call, make sure you select **Service (Inbound operation)** from the **Select contract type** drop-down list in the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)].</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="8b3e2-186">定義訊息和訊息類型</span><span class="sxs-lookup"><span data-stu-id="8b3e2-186">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="8b3e2-187">您先前產生的結構描述會描述 「 類型 」 所需的協調流程中的訊息。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-187">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="8b3e2-188">訊息通常是為其型別由對應的結構描述所定義的變數。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-188">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="8b3e2-189">您必須連結產生的結構描述您在第一個步驟中的訊息從 BizTalk 專案的協調流程檢視。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-189">You must link the schema you generated in the first step to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="8b3e2-190">本主題中，您必須建立兩個訊息，一個用於接收 IDOC 從 SAP 系統和其他傳送回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-190">For this topic, you must create two messages—one to receive an IDOC from the SAP system and the other to send a response.</span></span>  
  
 <span data-ttu-id="8b3e2-191">執行下列步驟來建立訊息，並將其連結至結構描述：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-191">Perform the following steps to create messages and link them to the schema:</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="8b3e2-192">建立訊息，以及連結至結構描述</span><span class="sxs-lookup"><span data-stu-id="8b3e2-192">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="8b3e2-193">將新的協調流程加入至 BizTalk 專案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-193">Add a new orchestration to the BizTalk project.</span></span>  
  
2.  <span data-ttu-id="8b3e2-194">開啟協調流程檢視 BizTalk 專案中，如果未開啟。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-194">Open the orchestration view the BizTalk project, if not already open.</span></span> <span data-ttu-id="8b3e2-195">按一下**檢視**，指向 **其他視窗**，然後按一下**協調流程檢視**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-195">Click **View**, point to **Other Windows**, and click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="8b3e2-196">在**協調流程檢視**，以滑鼠右鍵按一下**訊息**，然後按一下 **新訊息**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-196">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="8b3e2-197">以滑鼠右鍵按一下新建立的訊息，然後選取**屬性 視窗**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-197">Right-click the newly create message and select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="8b3e2-198">在**屬性**窗格**Message_1**，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-198">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="8b3e2-199">使用</span><span class="sxs-lookup"><span data-stu-id="8b3e2-199">Use this</span></span>|<span data-ttu-id="8b3e2-200">動作</span><span class="sxs-lookup"><span data-stu-id="8b3e2-200">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="8b3e2-201">識別碼</span><span class="sxs-lookup"><span data-stu-id="8b3e2-201">Identifier</span></span>|<span data-ttu-id="8b3e2-202">型別**要求**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-202">Type **Request**.</span></span>|  
    |<span data-ttu-id="8b3e2-203">訊息類型</span><span class="sxs-lookup"><span data-stu-id="8b3e2-203">Message Type</span></span>|<span data-ttu-id="8b3e2-204">從下拉式清單中，展開 **結構描述**，然後選取*ReceiveIDOC.SAPBindingSchema2*，其中*ReceiveIDOC*是您的 BizTalk 專案的名稱。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-204">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema2*, where *ReceiveIDOC* is the name of your BizTalk project.</span></span> <span data-ttu-id="8b3e2-205">*SAPBindingSchema2*是針對接收作業所產生的結構描述。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-205">*SAPBindingSchema2* is the schema generated for the Receive operation.</span></span>|  
  
6.  <span data-ttu-id="8b3e2-206">重複步驟 2 來建立新的訊息。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-206">Repeat step 2 to create a new message.</span></span> <span data-ttu-id="8b3e2-207">在**屬性**窗格新訊息中，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-207">In the **Properties** pane for the new message, do the following:</span></span>  
  
    |<span data-ttu-id="8b3e2-208">使用</span><span class="sxs-lookup"><span data-stu-id="8b3e2-208">Use this</span></span>|<span data-ttu-id="8b3e2-209">動作</span><span class="sxs-lookup"><span data-stu-id="8b3e2-209">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="8b3e2-210">識別碼</span><span class="sxs-lookup"><span data-stu-id="8b3e2-210">Identifier</span></span>|<span data-ttu-id="8b3e2-211">型別**回應**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-211">Type **Response**.</span></span>|  
    |<span data-ttu-id="8b3e2-212">訊息類型</span><span class="sxs-lookup"><span data-stu-id="8b3e2-212">Message Type</span></span>|<span data-ttu-id="8b3e2-213">從下拉式清單中，展開 **結構描述**，然後選取*ReceiveIDOC.SAPBindingSchema3*。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-213">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema3*.</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="8b3e2-214">設定協調流程</span><span class="sxs-lookup"><span data-stu-id="8b3e2-214">Setting up the Orchestration</span></span>  
 <span data-ttu-id="8b3e2-215">您必須建立 BizTalk 協調流程使用[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]從 SAP 系統接收 Idoc。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-215">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving IDOCs from the SAP system.</span></span> <span data-ttu-id="8b3e2-216">在典型的案例中，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]從 SAP 系統接收 IDOC 呼叫、 處理要求，並傳遞至 SAP 系統的回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-216">In a typical scenario, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] receives an IDOC call from the SAP system, processes the request, and passes the response to the SAP system.</span></span> <span data-ttu-id="8b3e2-217">若要達到此協調流程的一部分，必須包含協調流程：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-217">To achieve this as part of an orchestration, the orchestration must contain:</span></span>  
  
-   <span data-ttu-id="8b3e2-218">雙向接收埠從 SAP 系統接收 Idoc，並傳送回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-218">A two-way receive port to receive IDOCs from the SAP system and send the response.</span></span>  
  
-   <span data-ttu-id="8b3e2-219">傳送和接收圖形。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-219">Send and Receive shapes.</span></span>  
  
-   <span data-ttu-id="8b3e2-220">建構訊息圖形，並在其中訊息指派圖形，以產生要傳送到 SAP 系統的回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-220">Construct Message shape, and within that a Message Assignment shape, to generate a response to be sent to the SAP system.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="8b3e2-221">如果協調流程包含雙向接收埠 （要求-回應） 用於從 SAP 系統接收 Idoc，協調流程必須傳送回應給 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-221">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="8b3e2-222">如果沒有，SAP 系統不會傳送下一個 IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-222">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="8b3e2-223">不過，如果單向接收埠，協調流程沒有要傳送至 SAP 系統的回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-223">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  
  
-   <span data-ttu-id="8b3e2-224">單向傳送埠以傳送到資料夾從 SAP 系統接收 Idoc。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-224">A one-way send port to send the IDOCs received from the SAP system to a folder.</span></span>  
  
 <span data-ttu-id="8b3e2-225">從 SAP 系統接收 IDOC 範例協調流程看起來像：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-225">A sample orchestration for receiving an IDOC from an SAP system looks like:</span></span>  
  
 <span data-ttu-id="8b3e2-226">![接收 Idoc 的協調流程](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span><span class="sxs-lookup"><span data-stu-id="8b3e2-226">![Orchestration to receive IDOCs](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="8b3e2-227">新增訊息圖形</span><span class="sxs-lookup"><span data-stu-id="8b3e2-227">Adding Message Shapes</span></span>  
 <span data-ttu-id="8b3e2-228">請確定您針對每個訊息圖形指定下列屬性。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-228">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="8b3e2-229">所列的名稱*圖形*資料行名稱就是訊息圖形上述協調流程中所示。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-229">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  
  
|<span data-ttu-id="8b3e2-230">形狀圖</span><span class="sxs-lookup"><span data-stu-id="8b3e2-230">Shape</span></span>|<span data-ttu-id="8b3e2-231">圖形類型</span><span class="sxs-lookup"><span data-stu-id="8b3e2-231">Shape Type</span></span>|<span data-ttu-id="8b3e2-232">屬性</span><span class="sxs-lookup"><span data-stu-id="8b3e2-232">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="8b3e2-233">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="8b3e2-233">ListenToSAP</span></span>|<span data-ttu-id="8b3e2-234">Receive</span><span class="sxs-lookup"><span data-stu-id="8b3e2-234">Receive</span></span>|<span data-ttu-id="8b3e2-235">-設定**名稱**至*ListenToSAP*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-235">- Set **Name** to *ListenToSAP*</span></span><br /><br /> <span data-ttu-id="8b3e2-236">-設定**啟動**至*，則為 True*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-236">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="8b3e2-237">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-237">SaveIDOC</span></span>|<span data-ttu-id="8b3e2-238">Send</span><span class="sxs-lookup"><span data-stu-id="8b3e2-238">Send</span></span>|<span data-ttu-id="8b3e2-239">-設定**名稱**至*SaveIDOC*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-239">- Set **Name** to *SaveIDOC*</span></span>|  
|<span data-ttu-id="8b3e2-240">SendResponse</span><span class="sxs-lookup"><span data-stu-id="8b3e2-240">SendResponse</span></span>|<span data-ttu-id="8b3e2-241">Send</span><span class="sxs-lookup"><span data-stu-id="8b3e2-241">Send</span></span>|<span data-ttu-id="8b3e2-242">-設定**名稱**至*SendResponse*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-242">- Set **Name** to *SendResponse*</span></span>|  
  
### <a name="adding-construct-message-shape"></a><span data-ttu-id="8b3e2-243">新增 建構訊息圖形</span><span class="sxs-lookup"><span data-stu-id="8b3e2-243">Adding Construct Message Shape</span></span>  
 <span data-ttu-id="8b3e2-244">在協調流程中，您必須產生回應，並傳送至 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-244">Within the orchestration, you must generate a response and send it to the SAP system.</span></span> <span data-ttu-id="8b3e2-245">若要這樣做，您必須新增建構訊息 」 圖形，並在訊息指派圖形至協調流程。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-245">To do so, you must add a Construct Message shape and within that a Message Assignment shape to your orchestration.</span></span> <span data-ttu-id="8b3e2-246">「 訊息指派 」 圖形會叫用產生回應訊息傳送至 SAP 系統的程式碼。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-246">The Message Assignment shape invokes code that generates a response message that is sent to the SAP system.</span></span> <span data-ttu-id="8b3e2-247">「 訊息指派 」 圖形也會設定為傳送到 SAP 系統的回應動作。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-247">The Message Assignment shape also sets the action for the response to be sent to the SAP system.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b3e2-248">如果協調流程包含雙向接收埠 （要求-回應） 用於從 SAP 系統接收 Idoc，協調流程必須傳送回應給 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-248">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="8b3e2-249">如果沒有，SAP 系統不會傳送下一個 IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-249">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="8b3e2-250">不過，如果單向接收埠，協調流程沒有要傳送至 SAP 系統的回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-250">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  
  
 <span data-ttu-id="8b3e2-251">對於 「 建構訊息 」 圖形，設定**建構訊息**屬性**回應**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-251">For the construct message shape, set the **Message Constructed** property to **Response**.</span></span>  
  
 <span data-ttu-id="8b3e2-252">產生回應的程式碼可能是您的 BizTalk 專案相同的 Visual Studio 方案的一部分。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-252">The code to generate the response could be part of the same Visual Studio solution as your BizTalk project.</span></span> <span data-ttu-id="8b3e2-253">產生回應訊息的範例程式碼看起來像這樣。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-253">A sample code for generating a response message looks like this.</span></span>  
  
```  
namespace IdocReceiveResponseMessageCreator  
{  
    public class IdocReceiveResponseMessageCreator  
    {  
        private static XmlDocument Message;  
        private static string XmlFileLocation;  
        private static string ResponseDoc;  
  
        public static XmlDocument XMLMessageCreator()  
        {  
            XmlFileLocation = "C:\\test\\in";  
            try  
            {  
                ResponseDoc = (Directory.GetFiles(XmlFileLocation, "*.xml", SearchOption.TopDirectoryOnly))[0];  
            }  
            catch (Exception ex)  
            {  
                Console.WriteLine("Trying to get XML from: " + XmlFileLocation);  
                Console.WriteLine("EXCEPTION: " + ex.ToString());  
                throw ex;  
            }  
            //Create Message From XML  
            Message = new XmlDocument();  
            Message.PreserveWhitespace = true;  
            Message.Load(ResponseDoc);  
            return Message;  
        }   
    }  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="8b3e2-254">建置專案之後，會建立 IdocReceiveResponseMessageCreator.dll 專案目錄中。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-254">After you build the project, IdocReceiveResponseMessageCreator.dll will be created in the project directory.</span></span> <span data-ttu-id="8b3e2-255">您必須將此 DLL 加入全域組件快取 (GAC)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-255">You must add this DLL to the global assembly cache (GAC).</span></span>  
  
 <span data-ttu-id="8b3e2-256">加入下列運算式叫用此程式碼從 「 訊息指派 」 圖形，並設定傳送到 SAP 系統的回應動作。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-256">Add the following expression to invoke this code from the Message Assignment shape and to set the action for the response sent to the SAP system.</span></span> <span data-ttu-id="8b3e2-257">若要新增運算式，請按兩下訊息指派 」 圖形以開啟運算式編輯器。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-257">To add an expression, double-click the Message Assignment shape to open the Expression Editor.</span></span>  
  
```  
Response = IdocReceiveResponseMessageCreator.IdocReceiveResponseMessageCreator.XMLMessageCreator();  
Response(WCF.Action)= "http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response";  
```  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b3e2-258">您必須明確設定回應訊息上的動作。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-258">You must explicitly set the action on the response message.</span></span> <span data-ttu-id="8b3e2-259">如果您未設定此動作，Wcf-custom 配接器到達動作訊息藉由附加 「 回應 」 要求的動作。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-259">If you do not set the action, WCF-Custom adapter arrives at the action message by appending “Response” to the request action.</span></span> <span data-ttu-id="8b3e2-260">因此，回應訊息的動作會變成`http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-260">So, the action for the response message becomes `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`.</span></span> <span data-ttu-id="8b3e2-261">不過，sapBinding 預期的回應動作藉由附加"/ 回應 」 至要求的動作，例如`http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-261">However, the sapBinding expects the response action by appending “/response” to the request action, for example `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`.</span></span>  
  
### <a name="adding-ports"></a><span data-ttu-id="8b3e2-262">新增連接埠</span><span class="sxs-lookup"><span data-stu-id="8b3e2-262">Adding Ports</span></span>  
 <span data-ttu-id="8b3e2-263">請確定您指定的邏輯連接埠的下列屬性。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-263">Make sure you specify the following properties for the logical port.</span></span> <span data-ttu-id="8b3e2-264">中所列的名稱*連接埠*資料行是顯示在協調流程中的連接埠名稱。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-264">The name listed in the *Port* column is the name of the port as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="8b3e2-265">通訊埠</span><span class="sxs-lookup"><span data-stu-id="8b3e2-265">Port</span></span>|<span data-ttu-id="8b3e2-266">屬性</span><span class="sxs-lookup"><span data-stu-id="8b3e2-266">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="8b3e2-267">ReceiveIDOCPort</span><span class="sxs-lookup"><span data-stu-id="8b3e2-267">ReceiveIDOCPort</span></span>|<span data-ttu-id="8b3e2-268">-設定**識別碼**至*ReceiveIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-268">- Set **Identifier** to *ReceiveIDOCPort*</span></span><br /><br /> <span data-ttu-id="8b3e2-269">-設定**類型**至*ReceiveIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-269">- Set **Type** to *ReceiveIDOCPortType*</span></span><br /><br /> <span data-ttu-id="8b3e2-270">-設定**通訊模式**至*要求-回應*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-270">- Set **Communication Pattern** to *Request-Response*</span></span><br /><br /> <span data-ttu-id="8b3e2-271">-設定**通訊方向**至*接收傳送*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-271">- Set **Communication Direction** to *Receive-Send*</span></span>|  
|<span data-ttu-id="8b3e2-272">GetIDOCPort</span><span class="sxs-lookup"><span data-stu-id="8b3e2-272">GetIDOCPort</span></span>|<span data-ttu-id="8b3e2-273">-設定**識別碼**至*GetIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-273">- Set **Identifier** to *GetIDOCPort*</span></span><br /><br /> <span data-ttu-id="8b3e2-274">-設定**類型**至*GetIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-274">- Set **Type** to *GetIDOCPortType*</span></span><br /><br /> <span data-ttu-id="8b3e2-275">-設定**通訊模式**至*單向*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-275">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="8b3e2-276">-設定**通訊方向**至*傳送*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-276">- Set **Communication Direction** to *Send*</span></span>|  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b3e2-277">如果協調流程包含雙向接收埠 （要求-回應） 用於從 SAP 系統接收 Idoc，協調流程必須傳送回應給 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-277">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="8b3e2-278">如果沒有，SAP 系統不會傳送下一個 IDOC。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-278">If not, the SAP system does not send the next IDOC.</span></span>  
  
### <a name="adding-a-flat-file-assembler"></a><span data-ttu-id="8b3e2-279">加入一般檔案組合器</span><span class="sxs-lookup"><span data-stu-id="8b3e2-279">Adding a Flat File Assembler</span></span>  
 <span data-ttu-id="8b3e2-280">您必須加入將內送的 IDOC 訊息轉換成一般檔案組合器。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-280">You must add an assembler to convert the incoming IDOC message to a flat file.</span></span>  
  
##### <a name="to-add-a-flat-file-assembler"></a><span data-ttu-id="8b3e2-281">若要加入一般檔案組合器</span><span class="sxs-lookup"><span data-stu-id="8b3e2-281">To add a flat file assembler</span></span>  
  
1.  <span data-ttu-id="8b3e2-282">以滑鼠右鍵按一下 BizTalk 專案，指向**新增**，然後選取**新項目**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-282">Right-click the BizTalk project, point to **Add**, and select **New Item**.</span></span>  
  
2.  <span data-ttu-id="8b3e2-283">從對話方塊中，執行下列作業：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-283">From the dialog box, do the following:</span></span>  
  
    |<span data-ttu-id="8b3e2-284">使用</span><span class="sxs-lookup"><span data-stu-id="8b3e2-284">Use this</span></span>|<span data-ttu-id="8b3e2-285">動作</span><span class="sxs-lookup"><span data-stu-id="8b3e2-285">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="8b3e2-286">類別</span><span class="sxs-lookup"><span data-stu-id="8b3e2-286">Categories</span></span>|<span data-ttu-id="8b3e2-287">管線檔案</span><span class="sxs-lookup"><span data-stu-id="8b3e2-287">Pipeline Files</span></span>|  
    |<span data-ttu-id="8b3e2-288">Visual Studio 安裝的範本</span><span class="sxs-lookup"><span data-stu-id="8b3e2-288">Visual Studio installed templates</span></span>|<span data-ttu-id="8b3e2-289">傳送管線</span><span class="sxs-lookup"><span data-stu-id="8b3e2-289">Send Pipeline</span></span>|  
    |<span data-ttu-id="8b3e2-290">名稱</span><span class="sxs-lookup"><span data-stu-id="8b3e2-290">Name</span></span>|<span data-ttu-id="8b3e2-291">SendIDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-291">SendIDOC</span></span>|  
  
3.  <span data-ttu-id="8b3e2-292">這會開啟 「 管線設計師 」。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-292">This opens the Pipeline Designer.</span></span> <span data-ttu-id="8b3e2-293">從**BizTalk 管線元件**工具箱，拖曳**一般檔案組合器**管線元件**組合**傳送管線階段。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-293">From the **BizTalk Pipeline Components** toolbox, drag the **Flat file assembler** pipeline component into the **Assemble** stage of the send pipeline.</span></span>  
  
4.  <span data-ttu-id="8b3e2-294">從**管線元件屬性**檢視中，指定的值**文件結構描述**屬性。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-294">From the **Pipeline Component Properties** view, specify a value for the **Document Schema** property.</span></span> <span data-ttu-id="8b3e2-295">從下拉式清單確認您選取的結構描述對應至 IDOC 接收作業。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-295">From the drop-down make sure you select the schema corresponding to the IDOC receive operation.</span></span>  
  
## <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="8b3e2-296">指定動作圖形訊息並連接至連接埠</span><span class="sxs-lookup"><span data-stu-id="8b3e2-296">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="8b3e2-297">下表指定屬性和其值設為指定的動作圖形，並將它們連結至連接埠的訊息。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-297">The following table specifies the properties and their values to be set to specify messages for action shapes and linking them to the ports.</span></span> <span data-ttu-id="8b3e2-298">所列的名稱*圖形*資料行名稱就是訊息圖形上述協調流程中所示。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-298">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  
  
|<span data-ttu-id="8b3e2-299">形狀圖</span><span class="sxs-lookup"><span data-stu-id="8b3e2-299">Shape</span></span>|<span data-ttu-id="8b3e2-300">屬性</span><span class="sxs-lookup"><span data-stu-id="8b3e2-300">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="8b3e2-301">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="8b3e2-301">ListenToSAP</span></span>|<span data-ttu-id="8b3e2-302">-設定**訊息**至*要求*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-302">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="8b3e2-303">-設定**作業**至*ReceiveIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-303">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="8b3e2-304">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="8b3e2-304">SaveIDOC</span></span>|<span data-ttu-id="8b3e2-305">-設定**訊息**至*要求*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-305">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="8b3e2-306">-設定**作業**至*GetIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-306">- Set **Operation** to *GetIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="8b3e2-307">SendResponse</span><span class="sxs-lookup"><span data-stu-id="8b3e2-307">SendResponse</span></span>|<span data-ttu-id="8b3e2-308">-設定**訊息**至*回應*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-308">- Set **Message** to *Response*</span></span><br /><br /> <span data-ttu-id="8b3e2-309">-設定**作業**至*ReceiveIDOCPort.ReceiveIDOC.Response*</span><span class="sxs-lookup"><span data-stu-id="8b3e2-309">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Response*</span></span>|  
  
 <span data-ttu-id="8b3e2-310">您指定這些屬性之後，連接的訊息 圖形和連接埠，而且您的協調流程已完成。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-310">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="8b3e2-311">您現在必須建置 BizTalk 方案，並部署到[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-311">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="8b3e2-312">如需詳細資訊，請參閱[建置和執行協調流程](../../core/building-and-running-orchestrations.md)</span><span class="sxs-lookup"><span data-stu-id="8b3e2-312">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md)</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="8b3e2-313">設定 BizTalk 應用程式</span><span class="sxs-lookup"><span data-stu-id="8b3e2-313">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="8b3e2-314">部署 BizTalk 專案之後，您稍早建立的協調流程會列在**協調流程**BizTalk Server 管理主控台 窗格。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-314">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="8b3e2-315">您必須使用 BizTalk Server 管理主控台來設定應用程式。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-315">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="8b3e2-316">如需有關如何設定應用程式的詳細資訊，請參閱[如何設定應用程式](../../core/how-to-configure-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-316">For more information about configuring an application, see [How to Configure an Application](../../core/how-to-configure-an-application.md).</span></span>
  
 <span data-ttu-id="8b3e2-317">設定應用程式包括：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-317">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="8b3e2-318">選取應用程式的主機。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-318">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="8b3e2-319">對應至 BizTalk Server 管理主控台中的實體連接埠在協調流程中建立的連接埠。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-319">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="8b3e2-320">此協調流程中，您必須：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-320">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="8b3e2-321">定義傳送位置和實體傳送埠。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-321">Define send locations and physical send port.</span></span> <span data-ttu-id="8b3e2-322">這個位置會包含來自 SAP 系統的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-322">This location will contain the IDOCs coming from the SAP system.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="8b3e2-323">XMLTransmit 管線，請確定您選取***SendIDOC***。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-323">For the XMLTransmit pipeline, make sure you select ***SendIDOC***.</span></span> <span data-ttu-id="8b3e2-324">您建立此管線的 BizTalk 專案的一部分。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-324">You created this pipeline as part of the BizTalk project.</span></span>  
  
    -   <span data-ttu-id="8b3e2-325">定義 WCF 自訂或 WCF SAP 接收埠。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-325">Define a WCF-Custom or WCF-SAP receive port.</span></span> <span data-ttu-id="8b3e2-326">此連接埠會從 SAP 系統接收輸入的 IDOC，並將它傳遞至協調流程。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-326">This port will receive an inbound IDOC from the SAP system and pass it on to the orchestration.</span></span> <span data-ttu-id="8b3e2-327">此連接埠也會傳送至 SAP 系統的回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-327">This port also sends the response to the SAP system.</span></span> <span data-ttu-id="8b3e2-328">如需如何建立連接埠相關資訊，請參閱[以手動方式設定 SAP 配接器的實體連接埠繫結](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-328">For information about how to create ports, see [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span>
  
        > [!IMPORTANT]
        >  <span data-ttu-id="8b3e2-329">請確定繫結屬性**ReceiveIDocFormat**設**具型別**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-329">Make sure the binding property **ReceiveIDocFormat** is set to **Typed**.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="8b3e2-330">如果繫結屬性**EnableBizTalkCompatibilityMode**設為 true，則請確認您新增 BizTalk 屬性結構描述 DLL 的[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]為您的 BizTalk 應用程式，也就是在其中應用程式中的資源程式部署專案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-330">If the binding property **EnableBizTalkCompatibilityMode** is set to true, make sure you add the BizTalk property schema DLL for the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as a resource in your BizTalk application, that is, the application in which your project is deployed.</span></span> <span data-ttu-id="8b3e2-331">如需將資源加入的指示，請參閱[疑難排解操作問題 SAP 配接器](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-331">For instructions on adding resources see [Troubleshoot Operational Issues with the SAP adapter](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="8b3e2-332">產生結構描述使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]也會建立包含連接埠與那些連接埠的設定動作的相關資訊的繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-332">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="8b3e2-333">您可以從 BizTalk 管理主控台來建立 （適用於傳出呼叫） 的傳送埠或接收埠 （適用於進行傳入呼叫時），以匯入此繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-333">You can import this binding file from the BizTalk Administration Console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="8b3e2-334">如需詳細資訊，請參閱[設定實體連接埠繫結使用連接埠繫結檔案至 SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-334">For more information, see [Configure a physical port binding using a port binding file to SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span></span>
  
 <span data-ttu-id="8b3e2-335">您也必須將 IdocReceiveResponseMessageCreator 專案的組件加入您的 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-335">You must also add the assembly for the IdocReceiveResponseMessageCreator project to your BizTalk application.</span></span> <span data-ttu-id="8b3e2-336">您建立此專案來產生要傳送到 SAP 系統的回應。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-336">You created this project to generate the response to be sent to the SAP system.</span></span> <span data-ttu-id="8b3e2-337">若要這樣做：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-337">To do so:</span></span>  
  
1.  <span data-ttu-id="8b3e2-338">在 BizTalk Server 管理主控台的 匯入繫結的 BizTalk 應用程式的左半部的主控台樹狀目錄中以滑鼠右鍵按一下**資源**，指向 **新增**然後按一下**BizTalk 組件**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-338">In the console tree on the left side of the BizTalk Server Administration console, under the BizTalk application where you imported the bindings, right-click **Resources**, point to **Add** and then click **BizTalk Assemblies**.</span></span>  
  
2.  <span data-ttu-id="8b3e2-339">在**新增資源**對話方塊中，按一下**新增**並瀏覽至包含 IdocReceiveResponseMessageCreator.dll 的資料夾。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-339">In the **Add Resources** dialog box, Click **Add** and navigate to the folder containing IdocReceiveResponseMessageCreator.dll.</span></span> <span data-ttu-id="8b3e2-340">選取檔案，然後按一下**開啟**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-340">Select the file and then click **Open**.</span></span>  
  
3.  <span data-ttu-id="8b3e2-341">在**新增資源**對話方塊中，按一下 **確定**。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-341">In the **Add Resources** dialog box, click **OK**.</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="8b3e2-342">啟動應用程式</span><span class="sxs-lookup"><span data-stu-id="8b3e2-342">Starting the Application</span></span>  
 <span data-ttu-id="8b3e2-343">您必須啟動從 SAP 系統接收 IDOC 的 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-343">You must start the BizTalk application for receiving an IDOC from the SAP system.</span></span> <span data-ttu-id="8b3e2-344">如需啟動 BizTalk 應用程式的指示，請參閱[如何啟動協調流程](../../core/how-to-start-an-orchestration.md)，或[如何啟動應用程式](../../core/how-to-start-and-stop-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-344">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md), or [How to start an application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span></span>
  
 <span data-ttu-id="8b3e2-345">在這個階段，請確定：</span><span class="sxs-lookup"><span data-stu-id="8b3e2-345">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="8b3e2-346">執行 FILE 傳送埠，以儲存傳入的 IDOC 至檔案位置</span><span class="sxs-lookup"><span data-stu-id="8b3e2-346">The FILE send port to save the incoming IDOC to a file location is running</span></span>  
  
-   <span data-ttu-id="8b3e2-347">Wcf-custom 或 WCF SAP 接收埠以接收 Idoc 從 SAP 系統正在執行。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-347">The WCF-Custom or WCF-SAP receive port to receive IDOCs from the SAP system is running.</span></span>  
  
-   <span data-ttu-id="8b3e2-348">BizTalk 協調流程的作業正在執行。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-348">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="8b3e2-349">執行作業</span><span class="sxs-lookup"><span data-stu-id="8b3e2-349">Executing the Operation</span></span>  
 <span data-ttu-id="8b3e2-350">執行應用程式之後，您必須移 SAP 系統，並傳送 IDOC 到配接器。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-350">After you run the application, you must go the SAP system and send an IDOC into the adapter.</span></span> <span data-ttu-id="8b3e2-351">配接器接收 IDOC，並將它儲存至檔案位置指定為協調流程的一部分。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-351">The adapter receives the IDOC and saves it to a file location specified as part of the orchestration.</span></span>  
  
## <a name="possible-exceptions"></a><span data-ttu-id="8b3e2-352">可能的例外狀況</span><span class="sxs-lookup"><span data-stu-id="8b3e2-352">Possible Exceptions</span></span>  
 <span data-ttu-id="8b3e2-353">如需從使用 BizTalk Server 的 SAP 系統接收 IDOC 時可能會遇到的例外狀況資訊，請參閱[例外狀況和錯誤處理與 SAP 配接器](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-353">For information about the exceptions you might encounter while receiving an IDOC from an SAP system using BizTalk Server, see [Exceptions and Error Handling with the SAP adapter](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="8b3e2-354">最佳作法</span><span class="sxs-lookup"><span data-stu-id="8b3e2-354">Best Practices</span></span>  
 <span data-ttu-id="8b3e2-355">您部署和設定 BizTalk 專案之後，您可以為 XML 檔案，稱為繫結檔案匯出組態設定。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-355">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="8b3e2-356">一旦產生繫結檔案時，您可以匯入組態設定從檔案，因此您不需要建立傳送埠、 接收埠，等。 針對相同的協調流程。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-356">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="8b3e2-357">如需繫結檔案的詳細資訊，請參閱[重複使用的 SAP 配接器繫結](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="8b3e2-357">For more information about binding files, see [Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="8b3e2-358">另請參閱</span><span class="sxs-lookup"><span data-stu-id="8b3e2-358">See Also</span></span>  
[<span data-ttu-id="8b3e2-359">開發 BizTalk 應用程式</span><span class="sxs-lookup"><span data-stu-id="8b3e2-359">Develop BizTalk applications</span></span>](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md)