---
title: 接收 Oracle E-business Suite 資料庫變更通知，在多個接收位置 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d25faa52-e0a4-4593-8449-3ec93d5887e9
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 78e72333fa88a23b95d05eb75df8d132c4d0d77a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36975431"
---
# <a name="receive-oracle-e-business-suite-database-change-notifications-on-multiple-receive-locations"></a><span data-ttu-id="45ecc-102">接收 Oracle E-business Suite 資料庫變更通知，在多個接收位置</span><span class="sxs-lookup"><span data-stu-id="45ecc-102">Receive Oracle E-Business Suite database change notifications on multiple receive locations</span></span>
<span data-ttu-id="45ecc-103">假設您有多個接收位置設定為接收相同的資料表 (例如 ACCOUNTACTIVITY) 的查詢通知的不同 BizTalk 應用程式的過程中建立相同的資料庫中。</span><span class="sxs-lookup"><span data-stu-id="45ecc-103">Consider a scenario where you have multiple receive locations created as part of different BizTalk applications configured to receive query notifications for the same table (e.g. ACCOUNTACTIVITY) in the same database.</span></span> <span data-ttu-id="45ecc-104">如果一百個記錄插入相同的資料表時，所有接收位置就會都收到通知訊息。</span><span class="sxs-lookup"><span data-stu-id="45ecc-104">If a hundred records are inserted into the same table, all the receive locations will get the notification message.</span></span> <span data-ttu-id="45ecc-105">實際上會收到通知，跨多個接收位置，您可以從 BizTalk 應用程式一接收到通知時，如果接收位置的這種方式來呼叫作業，其他接收位置不會取得相同的通知。</span><span class="sxs-lookup"><span data-stu-id="45ecc-105">To effectively receive notifications across multiple receive locations, you can call operations from your BizTalk application in such a way that if a notification is received by one receive location, the other receive location does not get the same notification.</span></span> <span data-ttu-id="45ecc-106">因此，您可以有效地負載平衡多個位置上收到的通知。</span><span class="sxs-lookup"><span data-stu-id="45ecc-106">So, you can effectively load-balance notifications received on multiple locations.</span></span>  

 <span data-ttu-id="45ecc-107">若要設定負載平衡接收通知的協調流程所需的工作會與針對相同[接收 Oracle E-business Suite 變更通知以累加方式使用 BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-change-notifications-incrementally-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="45ecc-107">The tasks required to set up an orchestration to load-balance receiving notifications are same as that for [Receive Oracle E-Business Suite Change Notifications Incrementally Using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-change-notifications-incrementally-using-biztalk-server.md).</span></span> <span data-ttu-id="45ecc-108">本主題列出的唯一兩種方法之間的差異。</span><span class="sxs-lookup"><span data-stu-id="45ecc-108">This topic lists the only the difference between the two approaches.</span></span>  

## <a name="load-balancing-query-notifications-across-multiple-receive-locations"></a><span data-ttu-id="45ecc-109">跨多個負載平衡查詢通知的接收位置</span><span class="sxs-lookup"><span data-stu-id="45ecc-109">Load-Balancing Query Notifications Across Multiple Receive Locations</span></span>  
 <span data-ttu-id="45ecc-110">本主題所示[接收 Oracle E-business Suite 變更通知以累加方式使用 BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-change-notifications-incrementally-using-biztalk-server.md)，執行 PROCESS_RECORDS 程序設定累加通知。</span><span class="sxs-lookup"><span data-stu-id="45ecc-110">Like in the topic [Receive Oracle E-Business Suite Change Notifications Incrementally Using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-change-notifications-incrementally-using-biztalk-server.md), you configured incremental notifications by executing a PROCESS_RECORDS procedure.</span></span> <span data-ttu-id="45ecc-111">若要設定負載平衡，您可以執行預存程序會刪除已通知的記錄。</span><span class="sxs-lookup"><span data-stu-id="45ecc-111">To configure load-balancing, you could execute a stored procedure that deletes the records that have been notified for.</span></span> <span data-ttu-id="45ecc-112">例如，請考慮使用下列定義的預存程序 NOTIFY_LOAD_BALANCE:</span><span class="sxs-lookup"><span data-stu-id="45ecc-112">For example, consider a stored procedure NOTIFY_LOAD_BALANCE with the following definition:</span></span>  

```  
PROCEDURE NOTIFY_LOAD_BALANCE (TABLE_DATA OUT SYS_REFCURSOR) IS  
  var int;  
BEGIN  
  SELECT TID INTO var FROM ACCOUNTACTIVITY WHERE ROWNUM = 1 FOR UPDATE;  
  OPEN TABLE_DATA FOR SELECT * FROM ACCOUNTACTIVITY WHERE TID = var;  
  DELETE FROM ACCOUNTACTIVITY WHERE TID = var;  
END NOTIFY_LOAD_BALANCE;  
```  

 <span data-ttu-id="45ecc-113">當您執行這個預存程序的 BizTalk 應用程式的一部分時，刪除已收到通知的記錄。</span><span class="sxs-lookup"><span data-stu-id="45ecc-113">When you execute this stored procedure as part of the BizTalk application, the record for which notification is already received gets deleted.</span></span> <span data-ttu-id="45ecc-114">因此，其他接收位置取得通知下, 一筆記錄。</span><span class="sxs-lookup"><span data-stu-id="45ecc-114">So, the other receive location gets notification for the next record.</span></span>  

 <span data-ttu-id="45ecc-115">以下是您必須執行才能設定負載平衡來接收通知的概要步驟。</span><span class="sxs-lookup"><span data-stu-id="45ecc-115">Here are the high-level steps you must perform to configure load-balancing for receiving notifications.</span></span>  

1. <span data-ttu-id="45ecc-116">建立結構描述**通知**（輸入作業） 和**NOTIFY_LOAD_BALANCE**程序 （輸出作業）。</span><span class="sxs-lookup"><span data-stu-id="45ecc-116">Create schema for **Notification** (inbound operation) and **NOTIFY_LOAD_BALANCE** procedure (outbound operation).</span></span>  

2. <span data-ttu-id="45ecc-117">新增協調流程以及接收通知、 執行程序，和取得回應的程序的三個訊息。</span><span class="sxs-lookup"><span data-stu-id="45ecc-117">Add an orchestration and add three messages for receiving notification, executing the procedure, and getting response for the procedure.</span></span>  

3. <span data-ttu-id="45ecc-118">新增傳送和接收圖形、 建構訊息 」 圖形，以及連接埠，以建立協調流程。</span><span class="sxs-lookup"><span data-stu-id="45ecc-118">Create an orchestration by adding Send and Receive shapes, Construct Message shape, and ports.</span></span> <span data-ttu-id="45ecc-119">您可以使用相同的範例程式碼建構的訊息，叫用 NOTIFY_LOAD_BALANCE 預存程序。</span><span class="sxs-lookup"><span data-stu-id="45ecc-119">You can use the same sample code for constructing a message to invoke the NOTIFY_LOAD_BALANCE stored procedure.</span></span> <span data-ttu-id="45ecc-120">請注意，在執行中的作業時[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理主控台中，您必須在位置 C:\TestLocation\MessageIn NOTIFY_LOAD_BALANCE 程序的要求訊息。</span><span class="sxs-lookup"><span data-stu-id="45ecc-120">Note that while performing the operation in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console, you must have the request message for the NOTIFY_LOAD_BALANCE procedure in the location C:\TestLocation\MessageIn.</span></span> <span data-ttu-id="45ecc-121">您會執行，因為程式碼片段您叫用做為建立的協調流程的一部分[接收 Oracle E-business Suite 變更通知以累加方式使用 BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-change-notifications-incrementally-using-biztalk-server.md)建立要求存在 XML 為基礎的要求訊息在 C:\TestLocation\MessageIn。</span><span class="sxs-lookup"><span data-stu-id="45ecc-121">You do so because the code snippet you invoke as part of the orchestration created in [Receive Oracle E-Business Suite Change Notifications Incrementally Using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-change-notifications-incrementally-using-biztalk-server.md) creates a request message based on the request XML present in C:\TestLocation\MessageIn.</span></span>  

4. <span data-ttu-id="45ecc-122">建置及部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="45ecc-122">Build and deploy the application.</span></span> <span data-ttu-id="45ecc-123">若要示範負載平衡，您必須部署此協調流程至少具有兩部不同電腦上[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]和[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]安裝。</span><span class="sxs-lookup"><span data-stu-id="45ecc-123">To demonstrate load-balancing, you must deploy this orchestration at least on two different computers that have [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)] installed.</span></span>  

5. <span data-ttu-id="45ecc-124">在  [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Wcf-oracleebs 的 Wcf-custom 接收位置，管理主控台，在這兩部電腦上的指定下列繫結屬性：</span><span class="sxs-lookup"><span data-stu-id="45ecc-124">In the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console on both the computers, specify the following binding properties for the WCF-Custom or WCF-OracleEBS receive location:</span></span>  


   |     <span data-ttu-id="45ecc-125">繫結屬性</span><span class="sxs-lookup"><span data-stu-id="45ecc-125">Binding Property</span></span>      |                                                                                                                                                                                                                                                                         <span data-ttu-id="45ecc-126">ReplTest1</span><span class="sxs-lookup"><span data-stu-id="45ecc-126">Value</span></span>                                                                                                                                                                                                                                                                         |
   |---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | <span data-ttu-id="45ecc-127">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="45ecc-127">**InboundOperationType**</span></span>  |                                                                                                                                                                                                                                                             <span data-ttu-id="45ecc-128">將此設為**通知**。</span><span class="sxs-lookup"><span data-stu-id="45ecc-128">Set this to **Notification**.</span></span>                                                                                                                                                                                                                                                             |
   |   <span data-ttu-id="45ecc-129">**NotificationPort**</span><span class="sxs-lookup"><span data-stu-id="45ecc-129">**NotificationPort**</span></span>    | <span data-ttu-id="45ecc-130">指定 ODP.NET 必須開啟以接聽從 Oracle 資料庫的資料庫變更通知的連接埠號碼。</span><span class="sxs-lookup"><span data-stu-id="45ecc-130">Specifies the port number that ODP.NET must open to listen for database change notification from Oracle database.</span></span> <span data-ttu-id="45ecc-131">設定為相同的連接埠號碼，您必須已加入的 Windows 防火牆例外清單。</span><span class="sxs-lookup"><span data-stu-id="45ecc-131">Set this to the same port number that you must have added to the Windows Firewall exceptions list.</span></span> <span data-ttu-id="45ecc-132">如需如何將 Windows 防火牆例外清單中的連接埠的指示，請參閱 < [ http://go.microsoft.com/fwlink/?LinkID=196959 ](http://go.microsoft.com/fwlink/?LinkID=196959)。</span><span class="sxs-lookup"><span data-stu-id="45ecc-132">For instructions on how to add ports to Windows Firewall exceptions list, see [http://go.microsoft.com/fwlink/?LinkID=196959](http://go.microsoft.com/fwlink/?LinkID=196959).</span></span> <span data-ttu-id="45ecc-133">**重要事項：** 如果您設定為預設值-1，您必須完全停用 Windows 防火牆，以接收通知訊息。</span><span class="sxs-lookup"><span data-stu-id="45ecc-133">**Important:**  If you set this to the default value of -1, you will have to completely disable Windows Firewall to receive notification messages.</span></span> |
   | <span data-ttu-id="45ecc-134">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="45ecc-134">**NotificationStatement**</span></span> |                                                                                                                                                                 <span data-ttu-id="45ecc-135">將此設為：</span><span class="sxs-lookup"><span data-stu-id="45ecc-135">Set this to:</span></span><br /><br /> <span data-ttu-id="45ecc-136">`SELECT TID,ACCOUNT,PROCESSED FROM SCOTT.ACCOUNTACTIVITY WHERE PROCESSED = ‘n’` **注意：** 您必須指定資料表名稱，以及結構描述名稱。</span><span class="sxs-lookup"><span data-stu-id="45ecc-136">`SELECT TID,ACCOUNT,PROCESSED FROM SCOTT.ACCOUNTACTIVITY WHERE PROCESSED = ‘n’` **Note:**  You must specify the table name along with the schema name.</span></span> <span data-ttu-id="45ecc-137">例如， `SCOTT.ACCOUNTACTIVITY`。</span><span class="sxs-lookup"><span data-stu-id="45ecc-137">For example, `SCOTT.ACCOUNTACTIVITY`.</span></span>                                                                                                                                                                 |
   | <span data-ttu-id="45ecc-138">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="45ecc-138">**NotifyOnListenerStart**</span></span> |                                                                                                                                                                                                                                                                 <span data-ttu-id="45ecc-139">將此設為 **，則為 True**。</span><span class="sxs-lookup"><span data-stu-id="45ecc-139">Set this to **True**.</span></span>                                                                                                                                                                                                                                                                 |


6. <span data-ttu-id="45ecc-140">啟動 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="45ecc-140">Start the BizTalk application.</span></span>  

7. <span data-ttu-id="45ecc-141">若要開始接收通知，數百筆記錄插入 ACCOUNTACTIVITY 資料表。</span><span class="sxs-lookup"><span data-stu-id="45ecc-141">To start receiving notifications, insert a hundred records into the ACCOUNTACTIVITY table.</span></span> <span data-ttu-id="45ecc-142">在這麼做，請確定叫用 NOTIFY_LOAD_BALANCE 程序的要求 XML 位於 C:\TestLocation\MessageIn。</span><span class="sxs-lookup"><span data-stu-id="45ecc-142">While doing so, make sure the request XML for invoking the NOTIFY_LOAD_BALANCE procedure is available in C:\TestLocation\MessageIn.</span></span>  

8. <span data-ttu-id="45ecc-143">監視 BizTalk 應用程式將會捨棄的通知訊息的位置 （在兩部電腦）。</span><span class="sxs-lookup"><span data-stu-id="45ecc-143">Monitor the location (on both the computers) where the BizTalk application will be dropping the notification messages.</span></span> <span data-ttu-id="45ecc-144">您會發現，插入的數百個記錄，一個位置取得某些記錄的通知時其他位置取得剩餘的記錄的通知。</span><span class="sxs-lookup"><span data-stu-id="45ecc-144">You will notice that of the hundred records inserted, one location gets notifications for some records while the other location gets notification for the remaining records.</span></span> <span data-ttu-id="45ecc-145">在一起，這兩個位置會收到數百個的所有記錄的通知。</span><span class="sxs-lookup"><span data-stu-id="45ecc-145">Together, both the locations will get notification for all the hundred records.</span></span>  

## <a name="see-also"></a><span data-ttu-id="45ecc-146">另請參閱</span><span class="sxs-lookup"><span data-stu-id="45ecc-146">See Also</span></span>  
 [<span data-ttu-id="45ecc-147">Oracle E-business Suite 使用接收資料庫變更通知 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="45ecc-147">Receive Oracle E-Business Suite Database Change Notifications Using BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-oracle-ebs/receive-oracle-ebs-database-change-notifications-using-biztalk-server.md)