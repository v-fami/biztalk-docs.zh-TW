---
title: 互動配接器儲存與轉送 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d596780a-085d-48db-be44-a3ae58f591d0
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6c7aff0b2421a19f5fe84ee914c4f9d2bd7ef04e
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2017
ms.locfileid: "25963204"
---
# <a name="interact-adapter-store-and-forward"></a><span data-ttu-id="a436b-102">配接器儲存與轉送互動</span><span class="sxs-lookup"><span data-stu-id="a436b-102">InterAct Adapter Store and Forward</span></span>
<span data-ttu-id="a436b-103">在存放區和順向 (SnF) 模式中，訊息傳送至佇列在傳送時，會從目的地佇列擷取。</span><span class="sxs-lookup"><span data-stu-id="a436b-103">In Store and Forward (SnF) mode, messages are delivered to a queue at send time, and are retrieved from the queue by the destination.</span></span> <span data-ttu-id="a436b-104">使用時 SnF，回應來自 SWIFTNet SnF 本身，並不包含任何來自回應者的意見反應。</span><span class="sxs-lookup"><span data-stu-id="a436b-104">When using SnF, the response comes from SWIFTNet SnF itself, and does not contain any feedback from the Responder.</span></span>  
  
 <span data-ttu-id="a436b-105">訊息和檔案可以路由傳送到佇列為訊息路由傳送至伺服器處理序，不使用 SnF 時相同的彈性。</span><span class="sxs-lookup"><span data-stu-id="a436b-105">Messages and files can be routed into queues with the same flexibility as a message routed to a server process when not using SnF.</span></span> <span data-ttu-id="a436b-106">這個定義是 MRR （內 SWIFTNet) 內。</span><span class="sxs-lookup"><span data-stu-id="a436b-106">This definition is within MRR (inside of SWIFTNet).</span></span> <span data-ttu-id="a436b-107">所以接收者必須決定哪些佇列中的訊息或檔案將會傳送寄件者之後。</span><span class="sxs-lookup"><span data-stu-id="a436b-107">It is the Receiver who decides in which queue a message or file will be put after it is sent by the Sender.</span></span> <span data-ttu-id="a436b-108">將訊息或檔案放在佇列是由 SnF 傳遞模式 （在 RequestControl) 的訊息加上旗標。</span><span class="sxs-lookup"><span data-stu-id="a436b-108">Putting a message or file in a queue is done by flagging the message for SnF delivery mode (within the RequestControl).</span></span>  
  
 <span data-ttu-id="a436b-109">從佇列擷取訊息可能會發生兩個不同的模式，視應用程式的設計工具所做的選擇而定。</span><span class="sxs-lookup"><span data-stu-id="a436b-109">Retrieving a message from a queue can occur in two different modes, depending on the choice made by the application designer.</span></span> <span data-ttu-id="a436b-110">這些模式稱為發送和提取。</span><span class="sxs-lookup"><span data-stu-id="a436b-110">These modes are called push and pull.</span></span>  
  
 <span data-ttu-id="a436b-111">使用推入模式時，將訊息傳遞 initiative 位於與 SWIFTNet SnF。</span><span class="sxs-lookup"><span data-stu-id="a436b-111">When using the push mode, the initiative to deliver a message resides with SWIFTNet SnF.</span></span> <span data-ttu-id="a436b-112">然後 「 推送 」 從 SWIFTNet SnF 訊息，並收到由應用程式伺服器上 SWIFTNet 連結。</span><span class="sxs-lookup"><span data-stu-id="a436b-112">The message is then “pushed” from SWIFTNet SnF and is received by an application server on SWIFTNet Link.</span></span> <span data-ttu-id="a436b-113">請確認訊息 safestored 然後通知以回應對伺服器應用程式。</span><span class="sxs-lookup"><span data-stu-id="a436b-113">The server application has to ensure that the message is safestored before responding with an acknowledgement.</span></span> <span data-ttu-id="a436b-114">此通知指示 SWIFTNet SnF 已收到訊息。</span><span class="sxs-lookup"><span data-stu-id="a436b-114">This acknowledgement indicates to SWIFTNet SnF how the message was received.</span></span> <span data-ttu-id="a436b-115">通知不包含任何額外的"business"邏輯。</span><span class="sxs-lookup"><span data-stu-id="a436b-115">An acknowledgement does not contain any other additional “business” logic.</span></span>  
  
## <a name="queues-in-swiftnet"></a><span data-ttu-id="a436b-116">SWIFTNet 中的佇列</span><span class="sxs-lookup"><span data-stu-id="a436b-116">Queues in SWIFTNet</span></span>  
 <span data-ttu-id="a436b-117">佇列包含訊息和寄件者傳送到傳遞至指定的收件者的檔案。</span><span class="sxs-lookup"><span data-stu-id="a436b-117">Queues contain the messages and files that were sent by the Sender to be delivered to the specified Receiver.</span></span> <span data-ttu-id="a436b-118">佇列也包含由 SWIFTNet SnF 產生傳遞通知。</span><span class="sxs-lookup"><span data-stu-id="a436b-118">Queues contain as well the delivery notifications that are generated by SWIFTNet SnF.</span></span>  
  
 <span data-ttu-id="a436b-119">佇列定義和接收者的組織所設定。</span><span class="sxs-lookup"><span data-stu-id="a436b-119">Queues are defined and configured by the Receiver’s organization.</span></span> <span data-ttu-id="a436b-120">佇列的實際建立方式是 SWIFT 之使用者的要求。</span><span class="sxs-lookup"><span data-stu-id="a436b-120">The actual creation of a queue is done by SWIFT on request of the user.</span></span> <span data-ttu-id="a436b-121">寄件者不知道在其中訊息最終將的佇列的相關的任何項目。</span><span class="sxs-lookup"><span data-stu-id="a436b-121">The Sender does not know anything about the queue in which the message will ultimately be put.</span></span> <span data-ttu-id="a436b-122">這是完全受控制的收件者。</span><span class="sxs-lookup"><span data-stu-id="a436b-122">That is entirely under control of the Receiver.</span></span>  
  
 <span data-ttu-id="a436b-123">佇列視窗大小屬性控制 SWIFTNet SnF 擷取從佇列中未認可的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="a436b-123">The queue Window Size attribute controls the maximum number of messages SWIFTNet SnF retrieves from a queue without acknowledgement.</span></span> <span data-ttu-id="a436b-124">收件者還是必須確認訊息之前釋放 視窗中的位置。</span><span class="sxs-lookup"><span data-stu-id="a436b-124">The receiver still has to acknowledge the message before the slot in the window is freed up.</span></span>  
  
### <a name="delivery-into-a-queue"></a><span data-ttu-id="a436b-125">傳遞至佇列</span><span class="sxs-lookup"><span data-stu-id="a436b-125">Delivery into a Queue</span></span>  
 <span data-ttu-id="a436b-126">使用儲存和轉送服務的收件者會決定的佇列會用來儲存所儲存和轉送模式中傳送的訊息。</span><span class="sxs-lookup"><span data-stu-id="a436b-126">For services using store-and-forward the Receiver decides which queue will be used to store the message that was sent in store-and-forward mode.</span></span>  
  
 <span data-ttu-id="a436b-127">傳遞通知會放在寄件者機構，以傳送訊息的傳遞狀態通知寄件者的佇列。</span><span class="sxs-lookup"><span data-stu-id="a436b-127">Delivery notifications are put into a queue of the Senders institution, to inform the Sender about the delivery status of a message sent.</span></span> <span data-ttu-id="a436b-128">這是可設定與傳送配接器屬性。</span><span class="sxs-lookup"><span data-stu-id="a436b-128">This is configurable with the send adapter properties.</span></span>  
  
## <a name="sessions"></a><span data-ttu-id="a436b-129">工作階段</span><span class="sxs-lookup"><span data-stu-id="a436b-129">Sessions</span></span>  
 <span data-ttu-id="a436b-130">取得佇列，會啟動工作階段。</span><span class="sxs-lookup"><span data-stu-id="a436b-130">When acquiring a queue, a session is started.</span></span> <span data-ttu-id="a436b-131">Sw:SnFSessionId 會傳回每個訊息，由 SWIFTNet SnF。</span><span class="sxs-lookup"><span data-stu-id="a436b-131">The Sw:SnFSessionId is returned for every message that is delivered by SWIFTNet SnF.</span></span> <span data-ttu-id="a436b-132">Sw:SnFSessionId 包含佇列名稱的工作階段模式： 推入，以及工作階段數目。</span><span class="sxs-lookup"><span data-stu-id="a436b-132">The Sw:SnFSessionId contains the queue name, the session mode: push, and a session number.</span></span> <span data-ttu-id="a436b-133">工作階段數目會遞增每個工作階段。</span><span class="sxs-lookup"><span data-stu-id="a436b-133">The session number is incremented for every session.</span></span> <span data-ttu-id="a436b-134">範例如下：</span><span class="sxs-lookup"><span data-stu-id="a436b-134">An example is:</span></span>  
  
 <span data-ttu-id="a436b-135">**\<Sw:SnFSessionId\>bankwxyz_applicq1:p:000458\</Sw:SnFSessionId\>**</span><span class="sxs-lookup"><span data-stu-id="a436b-135">**\<Sw:SnFSessionId\>bankwxyz_applicq1:p:000458\</Sw:SnFSessionId\>**</span></span>  
  
 <span data-ttu-id="a436b-136">"p"指出推入工作階段。</span><span class="sxs-lookup"><span data-stu-id="a436b-136">The “p” indicates a push session.</span></span> <span data-ttu-id="a436b-137">工作階段也是視為佇列的保留由授權者。</span><span class="sxs-lookup"><span data-stu-id="a436b-137">A session can also be seen as a reservation of the queue by an Authorizer.</span></span> <span data-ttu-id="a436b-138">後續的訊息必須由相同的授權者認可。</span><span class="sxs-lookup"><span data-stu-id="a436b-138">The subsequent messages have to be acknowledged by the same Authorizer.</span></span>  
  
 <span data-ttu-id="a436b-139">傳送訊息至儲存和轉送時，工作階段不適用。</span><span class="sxs-lookup"><span data-stu-id="a436b-139">Sessions are not applicable when sending messages to store-and-forward.</span></span>  
  
### <a name="push-session-snf"></a><span data-ttu-id="a436b-140">推入工作階段 SnF</span><span class="sxs-lookup"><span data-stu-id="a436b-140">Push session SnF</span></span>  
 <span data-ttu-id="a436b-141">SnF 順序會假設下列：</span><span class="sxs-lookup"><span data-stu-id="a436b-141">The SnF sequence assumes the following:</span></span>  
  
-   <span data-ttu-id="a436b-142">用戶端處理序已完成其工作，並可立即終止。</span><span class="sxs-lookup"><span data-stu-id="a436b-142">The client process has done its job and can now terminate.</span></span> <span data-ttu-id="a436b-143">若要這樣做，開啟 安全性內容必須先清除上發出 SwSec:DestroyContextRequest。</span><span class="sxs-lookup"><span data-stu-id="a436b-143">To do this, the open security contexts must be cleaned up by issuing an SwSec:DestroyContextRequest.</span></span> <span data-ttu-id="a436b-144">Sw:TermRequest 之後, 處理程序可能 exit （）。</span><span class="sxs-lookup"><span data-stu-id="a436b-144">After the Sw:TermRequest, the process may exit().</span></span>  
  
-   <span data-ttu-id="a436b-145">另一個用戶端已啟動。</span><span class="sxs-lookup"><span data-stu-id="a436b-145">Another client is started.</span></span> <span data-ttu-id="a436b-146">初始設定步驟都與第一個用戶端相同。</span><span class="sxs-lookup"><span data-stu-id="a436b-146">The initialization steps are the same as for the first client.</span></span> <span data-ttu-id="a436b-147">佇列的版本是執行以做為基本輸入 Sw:ReleaseSnFQueueRequest SwCall。</span><span class="sxs-lookup"><span data-stu-id="a436b-147">The release of the queue is by performing an SwCall with the Sw:ReleaseSnFQueueRequest as input primitive.</span></span>  
  
     <span data-ttu-id="a436b-148">SWIFTNet 停止從佇列的訊息傳遞，因為它已順利處理佇列的版本。</span><span class="sxs-lookup"><span data-stu-id="a436b-148">SWIFTNet stops delivery of messages from the queue as soon as it successfully processes the release of the queue.</span></span>  
  
 <span data-ttu-id="a436b-149">伺服器會處理一個要求時。</span><span class="sxs-lookup"><span data-stu-id="a436b-149">The server processes one request at the time.</span></span> <span data-ttu-id="a436b-150">SWIFTNet SnF 提供幾個佇列的要求。</span><span class="sxs-lookup"><span data-stu-id="a436b-150">SWIFTNet SnF delivers several requests out of the queue.</span></span> <span data-ttu-id="a436b-151">伺服器的回應，或發生逾時之前，這些會緩衝網路和 SWIFTNet 連結中。</span><span class="sxs-lookup"><span data-stu-id="a436b-151">These are buffered within the network and SWIFTNet Link until the server responds, or a timeout occurs.</span></span>  
  
 <span data-ttu-id="a436b-152">有可能，有些要求了已被傳遞，但尚未認可之前釋出佇列。</span><span class="sxs-lookup"><span data-stu-id="a436b-152">It is possible that some requests were already being delivered, but not yet acknowledged before releasing the queue.</span></span> <span data-ttu-id="a436b-153">SWIFTNet SnF 不會處理這些訊息的任何多個通知，直到釋放佇列為止。</span><span class="sxs-lookup"><span data-stu-id="a436b-153">SWIFTNet SnF does not process any more acknowledgements for these messages until the queue is released.</span></span> <span data-ttu-id="a436b-154">這些訊息將會重新傳遞後續的工作階段中。</span><span class="sxs-lookup"><span data-stu-id="a436b-154">These messages will be re-delivered in a subsequent session.</span></span>  
  
 <span data-ttu-id="a436b-155">伺服器應用程式仍會以正值通知之後，用戶端發出發行該佇列，但通常這不會發生此情況，系統會從佇列傳送的要求回應是否會維持到本機的實作。</span><span class="sxs-lookup"><span data-stu-id="a436b-155">It is left to the local implementation whether the server application still responds with a positive acknowledgement for requests delivered from a queue after the client has issued the release of that queue, but typically this would not be the case.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a436b-156">請參閱</span><span class="sxs-lookup"><span data-stu-id="a436b-156">See Also</span></span>  
 <span data-ttu-id="a436b-157">[互動的配接器架構](../../adapters-and-accelerators/fileact-interact/interact-adapter-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-157">[InterAct Adapter Architecture](../../adapters-and-accelerators/fileact-interact/interact-adapter-architecture.md) </span></span>  
 <span data-ttu-id="a436b-158">[InterAct 配接器元件](../../adapters-and-accelerators/fileact-interact/interact-adapter-components.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-158">[InterAct Adapter Components](../../adapters-and-accelerators/fileact-interact/interact-adapter-components.md) </span></span>  
 <span data-ttu-id="a436b-159">[配接器訊息互動的商務交換](../../adapters-and-accelerators/fileact-interact/interact-adapter-messages-for-business-exchange.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-159">[InterAct Adapter Messages for Business Exchange](../../adapters-and-accelerators/fileact-interact/interact-adapter-messages-for-business-exchange.md) </span></span>  
 <span data-ttu-id="a436b-160">[InterAct 配接器用戶端應用程式](../../adapters-and-accelerators/fileact-interact/interact-adapter-client-application.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-160">[InterAct Adapter Client Application](../../adapters-and-accelerators/fileact-interact/interact-adapter-client-application.md) </span></span>  
 <span data-ttu-id="a436b-161">[InterAct 配接器伺服器應用程式](../../adapters-and-accelerators/fileact-interact/interact-adapter-server-application.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-161">[InterAct Adapter Server Application](../../adapters-and-accelerators/fileact-interact/interact-adapter-server-application.md) </span></span>  
 <span data-ttu-id="a436b-162">[互動的配接器安全性架構](../../adapters-and-accelerators/fileact-interact/interact-adapter-security-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-162">[InterAct Adapter Security Architecture](../../adapters-and-accelerators/fileact-interact/interact-adapter-security-architecture.md) </span></span>  
 <span data-ttu-id="a436b-163">[互動配接器端對端可靠傳遞](../../adapters-and-accelerators/fileact-interact/interact-adapter-end-to-end-reliable-delivery.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-163">[InterAct Adapter End-to-End Reliable Delivery](../../adapters-and-accelerators/fileact-interact/interact-adapter-end-to-end-reliable-delivery.md) </span></span>  
 <span data-ttu-id="a436b-164">[互動的介面卡狀態監視](../../adapters-and-accelerators/fileact-interact/interact-adapter-status-monitoring.md) </span><span class="sxs-lookup"><span data-stu-id="a436b-164">[InterAct Adapter Status Monitoring](../../adapters-and-accelerators/fileact-interact/interact-adapter-status-monitoring.md) </span></span>  
 [<span data-ttu-id="a436b-165">InterAct 配接器不可否認性</span><span class="sxs-lookup"><span data-stu-id="a436b-165">InterAct Adapter Non-Repudiation</span></span>](../../adapters-and-accelerators/fileact-interact/interact-adapter-non-repudiation.md)