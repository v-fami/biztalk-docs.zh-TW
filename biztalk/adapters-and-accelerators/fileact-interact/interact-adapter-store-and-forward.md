---
title: InterAct 配接器儲存和轉寄 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d596780a-085d-48db-be44-a3ae58f591d0
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2f3ce047de1c926e6e144b1351954774c1d3edb5
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37022588"
---
# <a name="interact-adapter-store-and-forward"></a><span data-ttu-id="e6f26-102">InterAct 配接器儲存和轉寄</span><span class="sxs-lookup"><span data-stu-id="e6f26-102">InterAct Adapter Store and Forward</span></span>
<span data-ttu-id="e6f26-103">在存放區中，並正向 (SnF) 模式中，訊息傳遞給佇列在傳送時，會從目的地佇列擷取。</span><span class="sxs-lookup"><span data-stu-id="e6f26-103">In Store and Forward (SnF) mode, messages are delivered to a queue at send time, and are retrieved from the queue by the destination.</span></span> <span data-ttu-id="e6f26-104">使用時 SnF，回應來自 SWIFTNet SnF 本身並不包含任何來自回應者的意見反應。</span><span class="sxs-lookup"><span data-stu-id="e6f26-104">When using SnF, the response comes from SWIFTNet SnF itself, and does not contain any feedback from the Responder.</span></span>  
  
 <span data-ttu-id="e6f26-105">訊息和檔案可以路由傳送到佇列有相同的彈性，為訊息路由傳送至伺服器處理序時未使用 SnF。</span><span class="sxs-lookup"><span data-stu-id="e6f26-105">Messages and files can be routed into queues with the same flexibility as a message routed to a server process when not using SnF.</span></span> <span data-ttu-id="e6f26-106">此定義位於 MRR （內 SWIFTNet)。</span><span class="sxs-lookup"><span data-stu-id="e6f26-106">This definition is within MRR (inside of SWIFTNet).</span></span> <span data-ttu-id="e6f26-107">它是接收者必須決定哪一個佇列中訊息或檔案會成為寄件者傳送後。</span><span class="sxs-lookup"><span data-stu-id="e6f26-107">It is the Receiver who decides in which queue a message or file will be put after it is sent by the Sender.</span></span> <span data-ttu-id="e6f26-108">將訊息或檔案放在佇列中由 SnF 傳遞模式 （在 RequestControl) 的訊息加上旗標。</span><span class="sxs-lookup"><span data-stu-id="e6f26-108">Putting a message or file in a queue is done by flagging the message for SnF delivery mode (within the RequestControl).</span></span>  
  
 <span data-ttu-id="e6f26-109">從佇列擷取訊息可能會發生兩種不同模式的詳細資訊，視應用程式的設計工具所做的選擇而定。</span><span class="sxs-lookup"><span data-stu-id="e6f26-109">Retrieving a message from a queue can occur in two different modes, depending on the choice made by the application designer.</span></span> <span data-ttu-id="e6f26-110">推送和提取，就會呼叫這些模式。</span><span class="sxs-lookup"><span data-stu-id="e6f26-110">These modes are called push and pull.</span></span>  
  
 <span data-ttu-id="e6f26-111">使用推播模式時，將訊息傳遞計劃會位於使用 SWIFTNet SnF。</span><span class="sxs-lookup"><span data-stu-id="e6f26-111">When using the push mode, the initiative to deliver a message resides with SWIFTNet SnF.</span></span> <span data-ttu-id="e6f26-112">訊息然後 「 從推播 」 SWIFTNet SnF，而且會收到由應用程式伺服器上 SWIFTNet 連結。</span><span class="sxs-lookup"><span data-stu-id="e6f26-112">The message is then “pushed” from SWIFTNet SnF and is received by an application server on SWIFTNet Link.</span></span> <span data-ttu-id="e6f26-113">伺服器應用程式必須確保訊息是 safestored 再回應以確認。</span><span class="sxs-lookup"><span data-stu-id="e6f26-113">The server application has to ensure that the message is safestored before responding with an acknowledgement.</span></span> <span data-ttu-id="e6f26-114">此通知指示 SWIFTNet SnF 已收到訊息的方式。</span><span class="sxs-lookup"><span data-stu-id="e6f26-114">This acknowledgement indicates to SWIFTNet SnF how the message was received.</span></span> <span data-ttu-id="e6f26-115">通知不包含任何其他額外的 「 商業 」 邏輯。</span><span class="sxs-lookup"><span data-stu-id="e6f26-115">An acknowledgement does not contain any other additional “business” logic.</span></span>  
  
## <a name="queues-in-swiftnet"></a><span data-ttu-id="e6f26-116">SWIFTNet 中的佇列</span><span class="sxs-lookup"><span data-stu-id="e6f26-116">Queues in SWIFTNet</span></span>  
 <span data-ttu-id="e6f26-117">佇列包含訊息和傳送的傳送者傳遞至指定的收件者的檔案。</span><span class="sxs-lookup"><span data-stu-id="e6f26-117">Queues contain the messages and files that were sent by the Sender to be delivered to the specified Receiver.</span></span> <span data-ttu-id="e6f26-118">佇列也包含 SWIFTNet SnF 所產生的傳遞告知。</span><span class="sxs-lookup"><span data-stu-id="e6f26-118">Queues contain as well the delivery notifications that are generated by SWIFTNet SnF.</span></span>  
  
 <span data-ttu-id="e6f26-119">佇列所定義且由接收者的組織設定。</span><span class="sxs-lookup"><span data-stu-id="e6f26-119">Queues are defined and configured by the Receiver’s organization.</span></span> <span data-ttu-id="e6f26-120">在使用者的要求，實際建立佇列是由 SWIFT。</span><span class="sxs-lookup"><span data-stu-id="e6f26-120">The actual creation of a queue is done by SWIFT on request of the user.</span></span> <span data-ttu-id="e6f26-121">寄件者不知道在其中訊息最後將的佇列的相關的任何項目。</span><span class="sxs-lookup"><span data-stu-id="e6f26-121">The Sender does not know anything about the queue in which the message will ultimately be put.</span></span> <span data-ttu-id="e6f26-122">這是接收者的完全掌控。</span><span class="sxs-lookup"><span data-stu-id="e6f26-122">That is entirely under control of the Receiver.</span></span>  
  
 <span data-ttu-id="e6f26-123">Queue 的視窗大小屬性控制 SWIFTNet SnF 擷取而不需要通知佇列的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="e6f26-123">The queue Window Size attribute controls the maximum number of messages SWIFTNet SnF retrieves from a queue without acknowledgement.</span></span> <span data-ttu-id="e6f26-124">接收者仍然必須確認訊息之前的視窗中的位置便會釋放。</span><span class="sxs-lookup"><span data-stu-id="e6f26-124">The receiver still has to acknowledge the message before the slot in the window is freed up.</span></span>  
  
### <a name="delivery-into-a-queue"></a><span data-ttu-id="e6f26-125">傳遞到佇列</span><span class="sxs-lookup"><span data-stu-id="e6f26-125">Delivery into a Queue</span></span>  
 <span data-ttu-id="e6f26-126">使用儲存和轉送服務的接收者會判斷哪一個佇列會用來儲存所儲存和轉送模式中傳送的訊息。</span><span class="sxs-lookup"><span data-stu-id="e6f26-126">For services using store-and-forward the Receiver decides which queue will be used to store the message that was sent in store-and-forward mode.</span></span>  
  
 <span data-ttu-id="e6f26-127">傳遞通知會放入寄件者機構，以傳送訊息的傳遞狀態通知寄件者的佇列。</span><span class="sxs-lookup"><span data-stu-id="e6f26-127">Delivery notifications are put into a queue of the Senders institution, to inform the Sender about the delivery status of a message sent.</span></span> <span data-ttu-id="e6f26-128">這是可設定與傳送配接器屬性。</span><span class="sxs-lookup"><span data-stu-id="e6f26-128">This is configurable with the send adapter properties.</span></span>  
  
## <a name="sessions"></a><span data-ttu-id="e6f26-129">工作階段</span><span class="sxs-lookup"><span data-stu-id="e6f26-129">Sessions</span></span>  
 <span data-ttu-id="e6f26-130">取得佇列時, 啟動工作階段。</span><span class="sxs-lookup"><span data-stu-id="e6f26-130">When acquiring a queue, a session is started.</span></span> <span data-ttu-id="e6f26-131">Sw:SnFSessionId 會傳回每個訊息，由 SWIFTNet SnF 傳遞。</span><span class="sxs-lookup"><span data-stu-id="e6f26-131">The Sw:SnFSessionId is returned for every message that is delivered by SWIFTNet SnF.</span></span> <span data-ttu-id="e6f26-132">Sw:SnFSessionId 包含佇列名稱、 工作階段模式： 推送及工作階段數目。</span><span class="sxs-lookup"><span data-stu-id="e6f26-132">The Sw:SnFSessionId contains the queue name, the session mode: push, and a session number.</span></span> <span data-ttu-id="e6f26-133">工作階段數目會遞增每個工作階段。</span><span class="sxs-lookup"><span data-stu-id="e6f26-133">The session number is incremented for every session.</span></span> <span data-ttu-id="e6f26-134">以下是範例：</span><span class="sxs-lookup"><span data-stu-id="e6f26-134">An example is:</span></span>  
  
 <span data-ttu-id="e6f26-135">**\<Sw:SnFSessionId\>bankwxyz_applicq1:p:000458\</Sw:SnFSessionId\>**</span><span class="sxs-lookup"><span data-stu-id="e6f26-135">**\<Sw:SnFSessionId\>bankwxyz_applicq1:p:000458\</Sw:SnFSessionId\>**</span></span>  
  
 <span data-ttu-id="e6f26-136">"p"表示推入工作階段。</span><span class="sxs-lookup"><span data-stu-id="e6f26-136">The “p” indicates a push session.</span></span> <span data-ttu-id="e6f26-137">工作階段可以也會顯示為保留項目佇列的授權者。</span><span class="sxs-lookup"><span data-stu-id="e6f26-137">A session can also be seen as a reservation of the queue by an Authorizer.</span></span> <span data-ttu-id="e6f26-138">後續的訊息需要相同的授權者通知。</span><span class="sxs-lookup"><span data-stu-id="e6f26-138">The subsequent messages have to be acknowledged by the same Authorizer.</span></span>  
  
 <span data-ttu-id="e6f26-139">傳送訊息到儲存和轉送時，工作階段不適用。</span><span class="sxs-lookup"><span data-stu-id="e6f26-139">Sessions are not applicable when sending messages to store-and-forward.</span></span>  
  
### <a name="push-session-snf"></a><span data-ttu-id="e6f26-140">Push 工作階段 SnF</span><span class="sxs-lookup"><span data-stu-id="e6f26-140">Push session SnF</span></span>  
 <span data-ttu-id="e6f26-141">SnF 順序的假設如下：</span><span class="sxs-lookup"><span data-stu-id="e6f26-141">The SnF sequence assumes the following:</span></span>  
  
- <span data-ttu-id="e6f26-142">用戶端處理序已完成其工作，並可以立即終止。</span><span class="sxs-lookup"><span data-stu-id="e6f26-142">The client process has done its job and can now terminate.</span></span> <span data-ttu-id="e6f26-143">若要這樣做，開啟 安全性內容必須先清除上發出 SwSec:DestroyContextRequest。</span><span class="sxs-lookup"><span data-stu-id="e6f26-143">To do this, the open security contexts must be cleaned up by issuing an SwSec:DestroyContextRequest.</span></span> <span data-ttu-id="e6f26-144">之後 Sw:TermRequest，程序可能 exit （）。</span><span class="sxs-lookup"><span data-stu-id="e6f26-144">After the Sw:TermRequest, the process may exit().</span></span>  
  
- <span data-ttu-id="e6f26-145">另一個用戶端已啟動。</span><span class="sxs-lookup"><span data-stu-id="e6f26-145">Another client is started.</span></span> <span data-ttu-id="e6f26-146">初始化步驟會與第一個用戶端相同。</span><span class="sxs-lookup"><span data-stu-id="e6f26-146">The initialization steps are the same as for the first client.</span></span> <span data-ttu-id="e6f26-147">佇列的版本是執行以做為輸入的基本型別 Sw:ReleaseSnFQueueRequest SwCall。</span><span class="sxs-lookup"><span data-stu-id="e6f26-147">The release of the queue is by performing an SwCall with the Sw:ReleaseSnFQueueRequest as input primitive.</span></span>  
  
   <span data-ttu-id="e6f26-148">SWIFTNet 會停止從佇列的訊息傳遞，因為它已順利處理佇列的版本。</span><span class="sxs-lookup"><span data-stu-id="e6f26-148">SWIFTNet stops delivery of messages from the queue as soon as it successfully processes the release of the queue.</span></span>  
  
  <span data-ttu-id="e6f26-149">伺服器會處理一個要求時。</span><span class="sxs-lookup"><span data-stu-id="e6f26-149">The server processes one request at the time.</span></span> <span data-ttu-id="e6f26-150">SWIFTNet SnF 提供數個移出佇列的要求。</span><span class="sxs-lookup"><span data-stu-id="e6f26-150">SWIFTNet SnF delivers several requests out of the queue.</span></span> <span data-ttu-id="e6f26-151">伺服器回應，或發生逾時之前，這些會緩衝中的網路和 SWIFTNet 連結。</span><span class="sxs-lookup"><span data-stu-id="e6f26-151">These are buffered within the network and SWIFTNet Link until the server responds, or a timeout occurs.</span></span>  
  
  <span data-ttu-id="e6f26-152">可以，某些要求已被送達，但尚未認可之前釋出佇列。</span><span class="sxs-lookup"><span data-stu-id="e6f26-152">It is possible that some requests were already being delivered, but not yet acknowledged before releasing the queue.</span></span> <span data-ttu-id="e6f26-153">SWIFTNet SnF 不會處理這些訊息的任何詳細通知，直到佇列被釋放為止。</span><span class="sxs-lookup"><span data-stu-id="e6f26-153">SWIFTNet SnF does not process any more acknowledgements for these messages until the queue is released.</span></span> <span data-ttu-id="e6f26-154">這些訊息將會在後續的工作階段重新傳遞。</span><span class="sxs-lookup"><span data-stu-id="e6f26-154">These messages will be re-delivered in a subsequent session.</span></span>  
  
  <span data-ttu-id="e6f26-155">伺服器應用程式仍會回應之後，用戶端發出發行該佇列，但通常這不會發生這個狀況，從佇列傳遞的要求正通知是否，它會保留給本機的實作。</span><span class="sxs-lookup"><span data-stu-id="e6f26-155">It is left to the local implementation whether the server application still responds with a positive acknowledgement for requests delivered from a queue after the client has issued the release of that queue, but typically this would not be the case.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e6f26-156">另請參閱</span><span class="sxs-lookup"><span data-stu-id="e6f26-156">See Also</span></span>  
 <span data-ttu-id="e6f26-157">[InterAct 配接器架構](../../adapters-and-accelerators/fileact-interact/interact-adapter-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-157">[InterAct Adapter Architecture](../../adapters-and-accelerators/fileact-interact/interact-adapter-architecture.md) </span></span>  
 <span data-ttu-id="e6f26-158">[InterAct 配接器元件](../../adapters-and-accelerators/fileact-interact/interact-adapter-components.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-158">[InterAct Adapter Components](../../adapters-and-accelerators/fileact-interact/interact-adapter-components.md) </span></span>  
 <span data-ttu-id="e6f26-159">[商務交換的 interAct 配接器訊息](../../adapters-and-accelerators/fileact-interact/interact-adapter-messages-for-business-exchange.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-159">[InterAct Adapter Messages for Business Exchange](../../adapters-and-accelerators/fileact-interact/interact-adapter-messages-for-business-exchange.md) </span></span>  
 <span data-ttu-id="e6f26-160">[InterAct 配接器用戶端應用程式](../../adapters-and-accelerators/fileact-interact/interact-adapter-client-application.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-160">[InterAct Adapter Client Application](../../adapters-and-accelerators/fileact-interact/interact-adapter-client-application.md) </span></span>  
 <span data-ttu-id="e6f26-161">[InterAct 配接器伺服器應用程式](../../adapters-and-accelerators/fileact-interact/interact-adapter-server-application.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-161">[InterAct Adapter Server Application](../../adapters-and-accelerators/fileact-interact/interact-adapter-server-application.md) </span></span>  
 <span data-ttu-id="e6f26-162">[InterAct 配接器安全性架構](../../adapters-and-accelerators/fileact-interact/interact-adapter-security-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-162">[InterAct Adapter Security Architecture](../../adapters-and-accelerators/fileact-interact/interact-adapter-security-architecture.md) </span></span>  
 <span data-ttu-id="e6f26-163">[互動配接器端對端可靠傳遞](../../adapters-and-accelerators/fileact-interact/interact-adapter-end-to-end-reliable-delivery.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-163">[InterAct Adapter End-to-End Reliable Delivery](../../adapters-and-accelerators/fileact-interact/interact-adapter-end-to-end-reliable-delivery.md) </span></span>  
 <span data-ttu-id="e6f26-164">[InterAct 配接器狀態監視](../../adapters-and-accelerators/fileact-interact/interact-adapter-status-monitoring.md) </span><span class="sxs-lookup"><span data-stu-id="e6f26-164">[InterAct Adapter Status Monitoring](../../adapters-and-accelerators/fileact-interact/interact-adapter-status-monitoring.md) </span></span>  
 [<span data-ttu-id="e6f26-165">InterAct 配接器不可否認性</span><span class="sxs-lookup"><span data-stu-id="e6f26-165">InterAct Adapter Non-Repudiation</span></span>](../../adapters-and-accelerators/fileact-interact/interact-adapter-non-repudiation.md)