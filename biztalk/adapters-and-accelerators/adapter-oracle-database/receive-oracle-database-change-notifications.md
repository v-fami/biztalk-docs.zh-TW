---
title: 接收 Oracle 資料庫的變更通知 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3ffabf27-7223-4473-b33e-af6f2990cb96
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1d1c33ef7bacf96a152d4b02d0c8c08991f96d64
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22215654"
---
# <a name="receive-oracle-database-change-notifications"></a><span data-ttu-id="c9850-102">接收 Oracle 資料庫的變更通知</span><span class="sxs-lookup"><span data-stu-id="c9850-102">Receive Oracle Database Change Notifications</span></span>
<span data-ttu-id="c9850-103">[!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)]支援 ODP.NET 資料庫變更通知功能。</span><span class="sxs-lookup"><span data-stu-id="c9850-103">The [!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)] supports the ODP.NET Database Change Notification feature.</span></span> <span data-ttu-id="c9850-104">使用這項功能，配接器用戶端可以註冊的 SELECT 陳述式與通知查詢資料庫，而資料庫將通知傳送給配接器用戶端，並在結果集的 SELECT 陳述式變更時。</span><span class="sxs-lookup"><span data-stu-id="c9850-104">Using this feature, the adapter clients can register a SELECT statement as the notification query on the database, and the database sends a notification to the adapter client as and when the result set of the SELECT statement changes.</span></span> <span data-ttu-id="c9850-105">配接器使用 OracleDependency 類別中實作的資料庫變更通知。</span><span class="sxs-lookup"><span data-stu-id="c9850-105">The database change notification is implemented in the adapter using the OracleDependency class.</span></span> <span data-ttu-id="c9850-106">如需 ODP.NET 和 OracleDependency 類別中的資料庫變更的支援功能的詳細資訊，請參閱[http://go.microsoft.com/fwlink/?LinkId=124801](http://go.microsoft.com/fwlink/?LinkId=124801)。</span><span class="sxs-lookup"><span data-stu-id="c9850-106">For more information about the Database Change Support feature in ODP.NET and the OracleDependency class, see [http://go.microsoft.com/fwlink/?LinkId=124801](http://go.microsoft.com/fwlink/?LinkId=124801).</span></span>  
  
 <span data-ttu-id="c9850-107">[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]公開的輸入的作業通知，以支援資料庫的變更通知。</span><span class="sxs-lookup"><span data-stu-id="c9850-107">The [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] exposes an inbound operation, Notification, to support database change notification.</span></span> <span data-ttu-id="c9850-108">不過，資料庫的變更通知，才能使用[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]，您必須確定下列：</span><span class="sxs-lookup"><span data-stu-id="c9850-108">However, for the database change notification to work with [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)], you must ensure the following:</span></span>  
  
-   <span data-ttu-id="c9850-109">連接到 Oracle 資料庫與基底的 Oracle 資料庫版本 10.2 或更新版本。</span><span class="sxs-lookup"><span data-stu-id="c9850-109">Connect to the Oracle database with the underlying Oracle database version 10.2 or later.</span></span> <span data-ttu-id="c9850-110">10.2 之前的 oracle 資料庫版本不支援通知。</span><span class="sxs-lookup"><span data-stu-id="c9850-110">Oracle database versions prior to 10.2 do not support notifications.</span></span>  
  
-   <span data-ttu-id="c9850-111">擁有建立通知登錄的變更通知權限的使用者身分連接到 Oracle 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c9850-111">Connect to Oracle database as a user that has the CHANGE NOTIFICATION privilege to create a notification registration.</span></span> <span data-ttu-id="c9850-112">若要變更通知權限授與使用者，具有系統管理權限的使用者身分連接到 Oracle 資料庫並在 SQL 提示字元執行下列命令：</span><span class="sxs-lookup"><span data-stu-id="c9850-112">To grant the CHANGE NOTIFICATION privilege to a user, connect to the Oracle database as a user with administrative privileges, and run the following command at the SQL prompt:</span></span>  
  
    ```  
    grant change notification to <user name>  
    ```  
  
-   <span data-ttu-id="c9850-113">決定可供 ODP.NET 接收從 Oracle 資料庫的資料庫變更通知的 TCP 通訊埠。</span><span class="sxs-lookup"><span data-stu-id="c9850-113">Decide on a TCP port that can be used by ODP.NET to receive database change notifications from Oracle database.</span></span> <span data-ttu-id="c9850-114">加入 Windows 防火牆例外清單中的 TCP 連接埠。</span><span class="sxs-lookup"><span data-stu-id="c9850-114">Add the TCP port to Windows Firewall exceptions list.</span></span> <span data-ttu-id="c9850-115">如需如何將連接埠新增至 Windows 防火牆例外清單的指示，請參閱[http://go.microsoft.com/fwlink/?LinkID=196959](http://go.microsoft.com/fwlink/?LinkID=196959)。</span><span class="sxs-lookup"><span data-stu-id="c9850-115">For instructions on how to add ports to Windows Firewall exceptions list, see [http://go.microsoft.com/fwlink/?LinkID=196959](http://go.microsoft.com/fwlink/?LinkID=196959).</span></span> <span data-ttu-id="c9850-116">您必須提供相同的 TCP 通訊埠編號，如**NotificationPort**繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="c9850-116">You must provide the same TCP port number for the **NotificationPort** binding property.</span></span> <span data-ttu-id="c9850-117">如需繫結屬性的詳細資訊，請參閱[使用繫結屬性](https://msdn.microsoft.com/library/dd788467.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c9850-117">For more information about the binding property, see [Working with binding properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span>  
  
 <span data-ttu-id="c9850-118">通知使用一般的資料庫變更[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]牽涉到下列：</span><span class="sxs-lookup"><span data-stu-id="c9850-118">A typical database change notification using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] involves the following:</span></span>  
  
1.  <span data-ttu-id="c9850-119">配接器用戶端必須指定`Notification`為中的輸入作業**InboundOperationType**繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="c9850-119">The adapter clients must specify `Notification` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="c9850-120">正在輪詢此繫結屬性的預設值。</span><span class="sxs-lookup"><span data-stu-id="c9850-120">The default value for this binding property is Polling.</span></span>  
  
2.  <span data-ttu-id="c9850-121">配接器用戶端必須指定 SQL SELECT 陳述式資料庫中的變更通知註冊**NotificationStatement**繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="c9850-121">The adapter clients must specify a SQL SELECT statement to register for database change notifications in the **NotificationStatement** binding property.</span></span> <span data-ttu-id="c9850-122">從 Oracle 資料庫視為，並在結果集為指定的 SQL 陳述式變更時，配接器用戶端會收到通知。</span><span class="sxs-lookup"><span data-stu-id="c9850-122">The adapter client gets a notification from Oracle database as and when the result set for the specified SQL statement changes.</span></span>  
  
3.  <span data-ttu-id="c9850-123">配接器用戶端必須指定是否配接器傳送通知給配接器用戶端以啟動接聽程式之後儘速**NotifyOnListenerStart**繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="c9850-123">The adapter clients must specify whether the adapter sends a notification to the adapter clients as soon as the listener is started in the **NotifyOnListenerStart** binding property.</span></span>  
  
4.  <span data-ttu-id="c9850-124">通知會傳送至配接器用戶端，做為並結果集的 SELECT 陳述式中指定**NotificationStatement**繫結屬性已變更。</span><span class="sxs-lookup"><span data-stu-id="c9850-124">The notification is sent to the adapter clients as and when the result set of the SELECT statement specified in the **NotificationStatement** binding property is changed.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="c9850-125">如果沒有 Oracle 資料庫與配接器用戶端之間的網路中斷，通知不會傳送到配接器用戶端網路中斷，這段期間完成的 Oracle 資料庫上的變更之後。</span><span class="sxs-lookup"><span data-stu-id="c9850-125">If there is a network outage between the Oracle database and the adapter client, the notifications will not be sent to the adapter clients for the changes done on the Oracle database during the period of network outage, and thereafter.</span></span> <span data-ttu-id="c9850-126">因此，您必須使用輪詢作業，而不是用在關鍵狀況通知操作。</span><span class="sxs-lookup"><span data-stu-id="c9850-126">Therefore, you must use the Polling operation instead of the Notification operation for critical scenarios.</span></span>  
  
## <a name="differences-between-notification-and-polling"></a><span data-ttu-id="c9850-127">通知輪詢之間的差異</span><span class="sxs-lookup"><span data-stu-id="c9850-127">Differences between Notification and Polling</span></span>  
 <span data-ttu-id="c9850-128">雖然告知和輪詢這兩個輸入的作業，然後通知配接器用戶端有關 Oracle 資料庫中的資料變更下, 表將說明兩者之間的一些差異。</span><span class="sxs-lookup"><span data-stu-id="c9850-128">Though notification and polling are both inbound operations, and inform the adapter clients about the data changes in the Oracle database, the following table illustrates some differences between the two.</span></span> <span data-ttu-id="c9850-129">下列差異，可協助您決定在針對作業，視您的需求而定：</span><span class="sxs-lookup"><span data-stu-id="c9850-129">The following differences will help you decide on an operation depending on your requirements:</span></span>  
  
|<span data-ttu-id="c9850-130">通知</span><span class="sxs-lookup"><span data-stu-id="c9850-130">Notification</span></span>|<span data-ttu-id="c9850-131">輪詢</span><span class="sxs-lookup"><span data-stu-id="c9850-131">Polling</span></span>|  
|------------------|-------------|  
|<span data-ttu-id="c9850-132">通知是支援僅針對 Oracle 資料庫版本 10.2 和更新版本。</span><span class="sxs-lookup"><span data-stu-id="c9850-132">Notification is supported only for Oracle database versions 10.2 and later.</span></span>|<span data-ttu-id="c9850-133">支援的所有 Oracle 資料庫版本都支援輪詢[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="c9850-133">Polling is supported for all the Oracle database versions that are supported by the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span></span>|  
|<span data-ttu-id="c9850-134">資料變更通知是一律在瞬間完成。</span><span class="sxs-lookup"><span data-stu-id="c9850-134">The data-change notification is always instantaneous.</span></span>|<span data-ttu-id="c9850-135">您可以設定輪詢間隔，以檢查適用於定期輪詢資料，或立即一樣，當有可用的資料。</span><span class="sxs-lookup"><span data-stu-id="c9850-135">You can either configure the polling interval to check the data available for polling at regular intervals or instantaneously as and when the data is available.</span></span> <span data-ttu-id="c9850-136">**提示：** 輪詢可讓您更佳的輸送量持續發生資料變更並不想為每項變更，並發生時加以通知。</span><span class="sxs-lookup"><span data-stu-id="c9850-136">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="c9850-137">相反地，您可以指定您要在其後發生是因為最後一個變更通知的所有變更的通知輪詢間隔。</span><span class="sxs-lookup"><span data-stu-id="c9850-137">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last change notification.</span></span>|  
|<span data-ttu-id="c9850-138">通知是由 Oracle 資料庫啟動。</span><span class="sxs-lookup"><span data-stu-id="c9850-138">Notification is initiated by the Oracle database.</span></span> <span data-ttu-id="c9850-139">只在配接器發出的通知陳述式會指示資料庫在陳述式的結果集變更的情況下起始通知。</span><span class="sxs-lookup"><span data-stu-id="c9850-139">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span> <span data-ttu-id="c9850-140">通知是 Oracle 資料庫的功能。</span><span class="sxs-lookup"><span data-stu-id="c9850-140">Notification is a feature of the Oracle database.</span></span>|<span data-ttu-id="c9850-141">輪詢配接器所起始。</span><span class="sxs-lookup"><span data-stu-id="c9850-141">Polling is initiated by the adapter.</span></span> <span data-ttu-id="c9850-142">若要驗證是否資料適用於輪詢，並以起始輪詢執行輪詢陳述式，如果某些資料可用於輪詢 SQL 陳述式執行配接器。</span><span class="sxs-lookup"><span data-stu-id="c9850-142">The adapter executes a SQL statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>|  
|<span data-ttu-id="c9850-143">您可以使用通知陳述式只讀取 Oracle 資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="c9850-143">You can use the notification statement to only read data in an Oracle database.</span></span>|<span data-ttu-id="c9850-144">您可以使用輪詢陳述式來讀取或更新的 Oracle 資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="c9850-144">You can use the polling statement to read or update data in the Oracle database.</span></span>|  
|<span data-ttu-id="c9850-145">通知會告知中插入，例如資料的變更類型的相關更新和刪除。</span><span class="sxs-lookup"><span data-stu-id="c9850-145">Notification informs only about the type of change in the data such as Insert, Update, and Delete.</span></span>|<span data-ttu-id="c9850-146">輪詢會通知您有關已變更的實際資料。</span><span class="sxs-lookup"><span data-stu-id="c9850-146">Polling informs you about the actual data that has changed.</span></span>|  
  
 <span data-ttu-id="c9850-147">如需詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="c9850-147">For more information about:</span></span>  
  
-   <span data-ttu-id="c9850-148">繫結屬性與通知作業，請參閱[使用繫結屬性](https://msdn.microsoft.com/library/dd788467.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c9850-148">The binding properties related to the Notification operation, see [Working with binding properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span>  
  
-   <span data-ttu-id="c9850-149">如何使用中的通知作業[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]，請參閱[接收 Oracle 資料庫變更通知使用 BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="c9850-149">How to use the Notification operation in [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)], see [Receiving Oracle Database Change Notifications Using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-using-biztalk-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c9850-150">另請參閱</span><span class="sxs-lookup"><span data-stu-id="c9850-150">See Also</span></span>  
 <span data-ttu-id="c9850-151">[哪些作業可以是執行使用配接器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="c9850-151">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>