---
title: "裝載於 IIS 使用 WCF LOB Adapter SDK 的配接器 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 90b6cd97-01b3-4c98-a190-c6e0ccf24d2b
caps.latest.revision: "16"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 77750a3ae6232b842961b83d3b672d2bbb084a73
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="host-an-adapter-in-iis-using-the-wcf-lob-adapter-sdk"></a><span data-ttu-id="62c1f-102">使用 WCF LOB Adapter SDK 的 IIS 中的配接器主機</span><span class="sxs-lookup"><span data-stu-id="62c1f-102">Host an adapter in IIS using the WCF LOB Adapter SDK</span></span>
<span data-ttu-id="62c1f-103">本章節包含有關裝載使用所建置的配接器的資訊[!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)]網際網路資訊服務 (IIS) 中。</span><span class="sxs-lookup"><span data-stu-id="62c1f-103">This section contains information about hosting an adapter built by using the [!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)] in Internet Information Services (IIS).</span></span> <span data-ttu-id="62c1f-104">如需有關其他裝載選項的詳細資訊，請參閱[裝載服務](https://msdn.microsoft.com/library/ms730158.aspx)。</span><span class="sxs-lookup"><span data-stu-id="62c1f-104">For more information about other hosting options, see [Hosting Services](https://msdn.microsoft.com/library/ms730158.aspx).</span></span>
  
## <a name="use-iis-and-aspnet"></a><span data-ttu-id="62c1f-105">使用 IIS 和 ASP.NET</span><span class="sxs-lookup"><span data-stu-id="62c1f-105">Use IIS and ASP.NET</span></span>
 <span data-ttu-id="62c1f-106">您可以使用 IIS 來發佈 WCF LOB 配接器 SDK 所建立的配接器啟用 asp.net。</span><span class="sxs-lookup"><span data-stu-id="62c1f-106">You can use IIS with ASP.NET enabled to publish adapters created with the WCF LOB Adapter SDK.</span></span> <span data-ttu-id="62c1f-107">若要裝載所建立的配接器[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]，您可以設定網際網路資訊服務 (IIS) 發佈 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="62c1f-107">To host an adapter created by the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)], you configure Internet Information Services (IIS) for publishing WCF services.</span></span> <span data-ttu-id="62c1f-108">接下來，請考慮如何使用您的 WCF adapterwith ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="62c1f-108">Next, consider how to use your WCF adapterwith ASP.NET.</span></span>
 
 <span data-ttu-id="62c1f-109">當裝載在 IIS 中的 WCF 服務，有兩種裝載模式可用：**來並行**和 A**ASP.NET 相容性模式**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-109">When hosting a WCF service in IIS, there are two hosting modes available: **side-by-side** and A**SP.NET compatibility mode**.</span></span> <span data-ttu-id="62c1f-110">主控模式的預設值是由並行。</span><span class="sxs-lookup"><span data-stu-id="62c1f-110">The default hosting mode is side-by-side.</span></span> <span data-ttu-id="62c1f-111">與其他 WCF 裝載方案來並行模式行為一致。</span><span class="sxs-lookup"><span data-stu-id="62c1f-111">Side-by-side mode behaves consistently with other WCF hosting solutions.</span></span> <span data-ttu-id="62c1f-112">因此，在 IIS 中裝載的 WCF 服務的行為與其中一個裝載於主控台應用程式相同。</span><span class="sxs-lookup"><span data-stu-id="62c1f-112">Therefore, a WCF service hosted in IIS behaves the same as one hosted in a console application.</span></span> <span data-ttu-id="62c1f-113">不過，這可能不是想要因為 web 開發人員可能預期的行為類似於 ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="62c1f-113">However, this may not be desirable because web developers might expect behavior similar to ASP.NET.</span></span> <span data-ttu-id="62c1f-114">比方說，在由並行模式中，WCF 不會遵守任何中所指定的 URL 為基礎的授權規則`<system.web> <authorization>`web.config 的組態項目。</span><span class="sxs-lookup"><span data-stu-id="62c1f-114">For instance, in side-by-side mode, WCF does not adhere to any URL-based authorization rules specified in the `<system.web> <authorization>` configuration element of web.config.</span></span>  
  
 <span data-ttu-id="62c1f-115">ASP.NET 相容性模式可讓 WCF 服務使用的 ASP.NET，所有功能和 ASPX 頁面; 相同的行為不過，您必須採取其他步驟，建立您的 WCF 配接器，以啟用這項功能時。</span><span class="sxs-lookup"><span data-stu-id="62c1f-115">ASP.NET compatibility mode allows the WCF service to use all the features of ASP.NET, and to behave the same as an ASPX page; however, you must take additional steps when creating your WCF adapter to enable this functionality.</span></span> <span data-ttu-id="62c1f-116">如需詳細資訊，請參閱：</span><span class="sxs-lookup"><span data-stu-id="62c1f-116">For more information, see:</span></span> 
 
 [<span data-ttu-id="62c1f-117">WCF 服務與 ASP.NET</span><span class="sxs-lookup"><span data-stu-id="62c1f-117">WCF Services and ASP.NET</span></span>](https://msdn.microsoft.com/library/aa702682.aspx)
 
[<span data-ttu-id="62c1f-118">裝載在 Internet Information Services</span><span class="sxs-lookup"><span data-stu-id="62c1f-118">Hosting in Internet Information Services</span></span>](https://msdn.microsoft.com/library/ms734710.aspx)

[<span data-ttu-id="62c1f-119">裝載服務的 WCF</span><span class="sxs-lookup"><span data-stu-id="62c1f-119">WCF Hosting Services</span></span>](https://msdn.microsoft.com/library/ms730158.aspx)

## <a name="use-the-wcf-adapter-service-development-wizard"></a><span data-ttu-id="62c1f-120">使用 WCF 配接器服務開發精靈</span><span class="sxs-lookup"><span data-stu-id="62c1f-120">Use the WCF Adapter Service Development Wizard</span></span>

<span data-ttu-id="62c1f-121">使用[!INCLUDE[afsvcdevwizlong](../../includes/afsvcdevwizlong-md.md)]自動建立 Web 專案以裝載您的配接器在網際網路資訊服務 (IIS)。</span><span class="sxs-lookup"><span data-stu-id="62c1f-121">Use the [!INCLUDE[afsvcdevwizlong](../../includes/afsvcdevwizlong-md.md)] to automate creation of a Web project for hosting your adapter within Internet Information Services (IIS).</span></span> <span data-ttu-id="62c1f-122">裝載介面卡然後可供用戶端使用 Windows Communication Framework (WCF) 或 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="62c1f-122">The hosted adapter can then be consumed by clients using Windows Communication Framework (WCF) or Web services.</span></span>  
  
### <a name="publish-an-adapter-as-a-wcf-service-hosted-in-iis"></a><span data-ttu-id="62c1f-123">發佈為 WCF 服務裝載在 IIS 中的配接器</span><span class="sxs-lookup"><span data-stu-id="62c1f-123">Publish an adapter as a WCF service hosted in IIS</span></span>  
  
1.  <span data-ttu-id="62c1f-124">開啟 [!INCLUDE[btsVStudioNoVersion_md](../../includes/btsvstudionoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="62c1f-124">Open [!INCLUDE[btsVStudioNoVersion_md](../../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="62c1f-125">在**檔案**功能表上，選取**新增**，然後選取**網站**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-125">On the **File** menu, select **New**, and then select **Web Site**.</span></span>  
  
2.  <span data-ttu-id="62c1f-126">在**範本**，選取**Visual C#**，然後選取**WCF 配接器服務**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-126">In **Templates**, select **Visual C#**, and select **WCF Adapter Service**.</span></span>  
  
3.  <span data-ttu-id="62c1f-127">輸入的資料夾以儲存方案，然後選取**確定**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-127">Enter the folder to save the solution, and then select **OK**.</span></span> <span data-ttu-id="62c1f-128">**WCF 配接器服務開發精靈**啟動。</span><span class="sxs-lookup"><span data-stu-id="62c1f-128">The **WCF Adapter Service Development Wizard** starts.</span></span>  
  
4.  <span data-ttu-id="62c1f-129">在**簡介**頁面上，按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-129">On the **Introduction** page, click **Next**.</span></span>  
  
5.  <span data-ttu-id="62c1f-130">在**選擇作業**頁面上，指定要用於這個託管服務繫結、 合約和作業。</span><span class="sxs-lookup"><span data-stu-id="62c1f-130">On the **Choose Operations** page, specify the binding, contract, and operations to use for this hosted service.</span></span>  
  
    1.  <span data-ttu-id="62c1f-131">在**選取繫結**清單中，選取配接器繫結來使用，然後按一下**設定**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-131">In the **Select a binding** list, select the adapter binding to use, and then click **Configure**.</span></span> <span data-ttu-id="62c1f-132">這會顯示**設定配接器** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="62c1f-132">This displays the **Configure Adapter** dialog box.</span></span> <span data-ttu-id="62c1f-133">提供叫用配接器，以及擷取作業的中繼資料所需的值。</span><span class="sxs-lookup"><span data-stu-id="62c1f-133">Provide the values necessary to invoke the adapter and to retrieve operation metadata.</span></span>  
  
    2.  <span data-ttu-id="62c1f-134">在**安全性**索引標籤上，選取**用戶端認證類型**来傳遞至配接器的用戶端認證時使用。</span><span class="sxs-lookup"><span data-stu-id="62c1f-134">On the **Security** tab, select the **Client credential type** to use when passing client credentials to the adapter.</span></span>  
  
        |<span data-ttu-id="62c1f-135">認證類型</span><span class="sxs-lookup"><span data-stu-id="62c1f-135">Credential Type</span></span>|<span data-ttu-id="62c1f-136">Description</span><span class="sxs-lookup"><span data-stu-id="62c1f-136">Description</span></span>|  
        |---------------------|-----------------|  
        |<span data-ttu-id="62c1f-137">**無**</span><span class="sxs-lookup"><span data-stu-id="62c1f-137">**None**</span></span>|<span data-ttu-id="62c1f-138">不需要用戶端會出示認證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-138">The client does not need to present credentials.</span></span>|  
        |<span data-ttu-id="62c1f-139">**視窗**</span><span class="sxs-lookup"><span data-stu-id="62c1f-139">**Windows**</span></span>|<span data-ttu-id="62c1f-140">用戶端會使用 Windows 認證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-140">The client will use Windows credentials.</span></span>|  
        |<span data-ttu-id="62c1f-141">**使用者名稱**</span><span class="sxs-lookup"><span data-stu-id="62c1f-141">**Username**</span></span>|<span data-ttu-id="62c1f-142">用戶端將會提供使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="62c1f-142">The client will supply a user name and password.</span></span>|  
        |<span data-ttu-id="62c1f-143">**[MSSQLSERVER 的通訊協定內容]**</span><span class="sxs-lookup"><span data-stu-id="62c1f-143">**Certificate**</span></span>|<span data-ttu-id="62c1f-144">用戶端將會使用 X.509 憑證驗證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-144">The client will be authenticated by using an X.509 certificate.</span></span> <span data-ttu-id="62c1f-145">如果此值設定，請按一下**瀏覽**中**用戶端憑證**區域中，，然後選取要使用的憑證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-145">If this value is set, click **Browse** in the **Client Certificate** area, and then select the certificate to use.</span></span>|  
  
    3.  <span data-ttu-id="62c1f-146">在**URI 屬性**索引標籤上，指定所需的配接器 URI 參數。</span><span class="sxs-lookup"><span data-stu-id="62c1f-146">On the **URI Properties** tab, specify the URI parameters required by the adapter.</span></span> <span data-ttu-id="62c1f-147">此索引標籤中顯示的項目中公開的屬性視`ConnectionUri Properties`配接器的類別。</span><span class="sxs-lookup"><span data-stu-id="62c1f-147">The entries displayed in this tab vary based on the properties exposed in the  `ConnectionUri Properties` class of the adapter.</span></span>  
  
    4.  <span data-ttu-id="62c1f-148">在**繫結屬性**索引標籤上，指定配接器所需的繫結屬性的值。</span><span class="sxs-lookup"><span data-stu-id="62c1f-148">On the **Binding Properties** tab, specify values for the binding properties required for the adapter.</span></span> <span data-ttu-id="62c1f-149">**一般**> 一節包含一般的設定，例如逾時值。</span><span class="sxs-lookup"><span data-stu-id="62c1f-149">The **General** section contains common settings such as timeout values.</span></span> <span data-ttu-id="62c1f-150">其他屬性會根據自訂中公開的屬性列出您`AdapterBinding`類別。</span><span class="sxs-lookup"><span data-stu-id="62c1f-150">Additional properties are listed based on the custom properties exposed in your `AdapterBinding` class.</span></span>  
  
6.  <span data-ttu-id="62c1f-151">一旦您已經指定的設定值，按一下 **連接**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-151">Once you have specified the configuration values, click **Connect**.</span></span>  
  
    1.  <span data-ttu-id="62c1f-152">從**選取合約型別**清單中，選取要使用的合約。</span><span class="sxs-lookup"><span data-stu-id="62c1f-152">From the **Select contract type** list, select the contract to use.</span></span> <span data-ttu-id="62c1f-153">如此即會填入**選取類別目錄**樹狀控制項的類別和作業可從這張介面卡的清單。</span><span class="sxs-lookup"><span data-stu-id="62c1f-153">This populates the **Select a category** tree control with a list of categories and operations available from this adapter.</span></span> <span data-ttu-id="62c1f-154">如果配接器實作搜尋功能，透過`MetadataRetrievalClient`類別，您可以輸入中的搜尋詞彙**類別目錄中的搜尋**只有類別和包含搜尋詞彙的作業傳回的欄位。</span><span class="sxs-lookup"><span data-stu-id="62c1f-154">If the adapter implements search functionality through a `MetadataRetrievalClient` class, you can enter a search term in the **Search in category** field to return only categories and operations that contain the search term.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="62c1f-155">只有輸出作業可供選擇。</span><span class="sxs-lookup"><span data-stu-id="62c1f-155">Only outbound operations are available for selection.</span></span>  
  
    2.  <span data-ttu-id="62c1f-156">從**可用的類別和作業**方塊中，選取要新增，然後再按的項目**新增**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-156">From the **Available categories and operations** box, select the items to add, and then click **Add**.</span></span> <span data-ttu-id="62c1f-157">一旦您加入所需的項目，按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-157">Once you have added the desired items, click **Next**.</span></span>  
  
7.  <span data-ttu-id="62c1f-158">在**設定服務與端點行為**頁面上，設定此配接器所需的行為。</span><span class="sxs-lookup"><span data-stu-id="62c1f-158">On the **Configure Service and Endpoint Behaviors** page, set the desired behaviors for this adapter.</span></span>  
  
    1.  <span data-ttu-id="62c1f-159">**服務行為組態**章節包含可控制服務之行為項目。</span><span class="sxs-lookup"><span data-stu-id="62c1f-159">The **Service Behavior Configuration** section contains entries that control the service behavior.</span></span> <span data-ttu-id="62c1f-160">執行精靈之後，您可以藉由編輯 web.config 檔案中修改選取的服務行為。</span><span class="sxs-lookup"><span data-stu-id="62c1f-160">After running the wizard, you can modify the selected service behaviors by editing the web.config file.</span></span>  
  
        |<span data-ttu-id="62c1f-161">屬性</span><span class="sxs-lookup"><span data-stu-id="62c1f-161">Property</span></span>|<span data-ttu-id="62c1f-162">Description</span><span class="sxs-lookup"><span data-stu-id="62c1f-162">Description</span></span>|  
        |--------------|-----------------|  
        |<span data-ttu-id="62c1f-163">**EnableMetadataExchange**</span><span class="sxs-lookup"><span data-stu-id="62c1f-163">**EnableMetadataExchange**</span></span>|<span data-ttu-id="62c1f-164">此值設定為**True**可讓服務用戶端要求的中繼資料發行。</span><span class="sxs-lookup"><span data-stu-id="62c1f-164">Setting this value to **True** enables service metadata publishing to client requests.</span></span> <span data-ttu-id="62c1f-165">這也可以設定藉由修改\< **serviceMetadata httpGetEnabled =""**> 在 web.config 中。預設值是**False**</span><span class="sxs-lookup"><span data-stu-id="62c1f-165">This can also be set by modifying \<**serviceMetadata httpGetEnabled=””**> in web.config. Default is **False**</span></span>|  
        |<span data-ttu-id="62c1f-166">**IncludeExceptionDetailsinFault**</span><span class="sxs-lookup"><span data-stu-id="62c1f-166">**IncludeExceptionDetailsinFault**</span></span>|<span data-ttu-id="62c1f-167">此值設定為**True**導致 managed 例外狀況資訊傳回 SOAP 錯誤中的用戶端。</span><span class="sxs-lookup"><span data-stu-id="62c1f-167">Setting this value to **True** results in managed exception information returned to the client in SOAP faults.</span></span> <span data-ttu-id="62c1f-168">這也可以設定藉由修改\< **serviceDebug usingincludeExceptionDetailInFaults =""**> 在 web.config 中。預設值是**False**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-168">This can also be set by modifying \<**serviceDebug usingincludeExceptionDetailInFaults=””**> in web.config. Default is **False**.</span></span>|  
        |<span data-ttu-id="62c1f-169">**名稱**</span><span class="sxs-lookup"><span data-stu-id="62c1f-169">**Name**</span></span>|<span data-ttu-id="62c1f-170">服務行為組態名稱。</span><span class="sxs-lookup"><span data-stu-id="62c1f-170">Name for the service behavior configuration.</span></span>|  
        |<span data-ttu-id="62c1f-171">**UseServiceCertificate**</span><span class="sxs-lookup"><span data-stu-id="62c1f-171">**UseServiceCertificate**</span></span>|<span data-ttu-id="62c1f-172">這個值會決定服務是否會使用 X.509 憑證來向用戶端處理序。</span><span class="sxs-lookup"><span data-stu-id="62c1f-172">This value determines whether the service will use an X.509 certificate to authenticate itself to the client process.</span></span> <span data-ttu-id="62c1f-173">預設值是**True**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-173">Default is **True**.</span></span>|  
        |<span data-ttu-id="62c1f-174">**FindValue**</span><span class="sxs-lookup"><span data-stu-id="62c1f-174">**FindValue**</span></span>|<span data-ttu-id="62c1f-175">這個值用來搜尋特定的 X.509 憑證的憑證存放區。</span><span class="sxs-lookup"><span data-stu-id="62c1f-175">This value is used to search for a specific X.509 certificate in the certificate store.</span></span> <span data-ttu-id="62c1f-176">也藉由修改設定\< **serviceCredentials findValue =""**> 在 web.config 中**附註：**指定這個屬性只有當值**UseServiceCertificate**設**True**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-176">This can also be set by modifying \<**serviceCredentials findValue=””**> in web.config **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
        |<span data-ttu-id="62c1f-177">**StoreLocation**</span><span class="sxs-lookup"><span data-stu-id="62c1f-177">**StoreLocation**</span></span>|<span data-ttu-id="62c1f-178">這個值會指定系統存放區位置來搜尋指定的憑證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-178">This value specifies system store location to search for the specified certificate.</span></span> <span data-ttu-id="62c1f-179">這也可以設定藉由修改\< **serviceCredentials storeLocation =""**> 在 web.config 中。**注意：**指定的值為這個屬性才**UseServiceCertificate**設**True**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-179">This can also be set by modifying \<**serviceCredentials storeLocation=””**> in web.config. **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
        |<span data-ttu-id="62c1f-180">**StoreName**</span><span class="sxs-lookup"><span data-stu-id="62c1f-180">**StoreName**</span></span>|<span data-ttu-id="62c1f-181">這個值會指定特定的系統存放區，來搜尋指定的憑證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-181">This value specifies the specific system store to search for the specified certificate.</span></span> <span data-ttu-id="62c1f-182">也藉由修改設定\< **serviceCredentials storeName =""**> 在 web.config 中**附註：**指定這個屬性只有當值**UseServiceCertificate**設**True**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-182">This can also be set by modifying \<**serviceCredentials storeName=””**> in web.config **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
        |<span data-ttu-id="62c1f-183">**X509FindType**</span><span class="sxs-lookup"><span data-stu-id="62c1f-183">**X509FindType**</span></span>|<span data-ttu-id="62c1f-184">搜尋用於 FindValue 的類型稍早指定，以便找出要使用的特定憑證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-184">The type of search to use with the FindValue specified earlier in order to find the specific certificate to use.</span></span> <span data-ttu-id="62c1f-185">也藉由修改設定\< **serviceCredentials x509FindType =""**> 在 web.config 中**附註：**指定這個屬性只有當值**UseServiceCertificate**設**True**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-185">This can also be set by modifying \<**serviceCredentials x509FindType=””**> in web.config **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
  
    2.  <span data-ttu-id="62c1f-186">**端點行為組態**區段控制端點行為。</span><span class="sxs-lookup"><span data-stu-id="62c1f-186">The **Endpoint Behavior Configuration** section controls the endpoint behavior.</span></span>  
  
        |<span data-ttu-id="62c1f-187">屬性</span><span class="sxs-lookup"><span data-stu-id="62c1f-187">Property</span></span>|<span data-ttu-id="62c1f-188">Description</span><span class="sxs-lookup"><span data-stu-id="62c1f-188">Description</span></span>|  
        |--------------|-----------------|  
        |<span data-ttu-id="62c1f-189">**名稱**</span><span class="sxs-lookup"><span data-stu-id="62c1f-189">**Name**</span></span>|<span data-ttu-id="62c1f-190">端點行為的名稱</span><span class="sxs-lookup"><span data-stu-id="62c1f-190">The name of the endpoint behavior</span></span>|  
        |<span data-ttu-id="62c1f-191">**AuthenticationType**</span><span class="sxs-lookup"><span data-stu-id="62c1f-191">**AuthenticationType**</span></span>|<span data-ttu-id="62c1f-192">這個值會指示配接器來取得用戶端認證的內送文件的位置。</span><span class="sxs-lookup"><span data-stu-id="62c1f-192">This value instructs the adapter where to obtain the client credentials of the incoming document.</span></span> <span data-ttu-id="62c1f-193">若要啟用用戶端指定要向服務驗證的用戶端憑證，將此設**ClientCredentialUsernamePassword**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-193">To enable clients to specify a client certificate to authenticate to the service, set this to **ClientCredentialUsernamePassword**.</span></span> <span data-ttu-id="62c1f-194">若要啟用用戶端指定的使用者名稱和密碼做為 HTTP 標頭的一部分，將此設**HTTPUsernamePassword**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-194">To enable clients to specify the user name and password as part of the HTTP header, set this to **HTTPUsernamePassword**.</span></span> <span data-ttu-id="62c1f-195">若要啟用用戶端指定認證，透過 ClientCredential 介面，將此設**自動**。如果失敗，用戶端才能將認證傳遞做為 HTTP 標頭的一部分。</span><span class="sxs-lookup"><span data-stu-id="62c1f-195">To enable clients to specify credentials through the ClientCredential interface, set this to **Auto**. If this fails, clients can pass credentials as part of the HTTP header.</span></span><br /><br /> <span data-ttu-id="62c1f-196">這個值也可以藉由修改設定\< **[endpointbehavior] adapterSecurityBridgeType**> 在 web.config 中。預設值是**自動**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-196">This value can also be set by modifying \<**endpointBehavior adapterSecurityBridgeType**> in web.config. Default is **Auto**.</span></span>|  
        |<span data-ttu-id="62c1f-197">**UsernameHeader**</span><span class="sxs-lookup"><span data-stu-id="62c1f-197">**UsernameHeader**</span></span>|<span data-ttu-id="62c1f-198">這會指定將用來傳遞至服務的使用者名稱標頭名稱。</span><span class="sxs-lookup"><span data-stu-id="62c1f-198">This specifies the name of the header that will be used to pass the user name to the service.</span></span> <span data-ttu-id="62c1f-199">HTTP 標頭的詳細資訊，請參閱 < 自訂 HTTP 和 SOAP 標頭的支援 >，網址[http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span><span class="sxs-lookup"><span data-stu-id="62c1f-199">For more information about HTTP headers, see “Support for Custom HTTP and SOAP headers” at [http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span></span><br /><br /> <span data-ttu-id="62c1f-200">這個值也可以藉由修改設定\< **[endpointbehavior] usernameHttpHeader**> 在 web.config 中。**注意：**您必須指定此屬性的值，如果**AuthenticationType**設**HTTPUserNamePassword**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-200">This value can also be set by modifying \<**endpointBehavior usernameHttpHeader**> in web.config. **Note:**  You must specify a value for this property if the **AuthenticationType** is set to **HTTPUserNamePassword**.</span></span>  <span data-ttu-id="62c1f-201">如果設定為**自動**，這是選擇性屬性。</span><span class="sxs-lookup"><span data-stu-id="62c1f-201">If set to **Auto**, this property is optional.</span></span>|  
        |<span data-ttu-id="62c1f-202">**PasswordHeader**</span><span class="sxs-lookup"><span data-stu-id="62c1f-202">**PasswordHeader**</span></span>|<span data-ttu-id="62c1f-203">這會指定將用來將使用者密碼傳遞給服務的標頭名稱。</span><span class="sxs-lookup"><span data-stu-id="62c1f-203">This specifies the name of the header that will be used to pass the user password to the service.</span></span> <span data-ttu-id="62c1f-204">HTTP 標頭的詳細資訊，請參閱 < 支援的自訂 HTTP 和 SOAP 標頭 >，網址[http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span><span class="sxs-lookup"><span data-stu-id="62c1f-204">For more information about HTTP headers, see “Support for Custom HTTP and SOAP Headers” at [http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span></span><br /><br /> <span data-ttu-id="62c1f-205">這個值也可以藉由修改設定 <**[endpointbehavior] passwordHttpHeader**< web.config 中。**注意：**您必須指定此屬性的值，如果**AuthenticationType**設**HTTPUserNamePassword**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-205">This value can also be set by modifying <**endpointBehavior passwordHttpHeader**< in web.config. **Note:**  You must specify a value for this property if the **AuthenticationType** is set to **HTTPUserNamePassword**.</span></span> <span data-ttu-id="62c1f-206">如果設定為**自動**，這是選擇性屬性。</span><span class="sxs-lookup"><span data-stu-id="62c1f-206">If set to **Auto**, this property is optional.</span></span>|  
  
    3.  <span data-ttu-id="62c1f-207">設定所要的行為後, 按一下**下一步**才能繼續。</span><span class="sxs-lookup"><span data-stu-id="62c1f-207">After setting the desired behavior, click **Next** to continue.</span></span>  
  
8.  <span data-ttu-id="62c1f-208">在**設定服務端點繫結和位址** 頁面上，您可以設定做為合約的位址和繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="62c1f-208">On the **Configure Service Endpoint Binding and Address** page, you can configure the address and binding properties for the contracts.</span></span> <span data-ttu-id="62c1f-209">選取在合約**選取要設定的合約**清單，，然後輸入所需的值在**設定的位址和合約繫結** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="62c1f-209">Select the contract in the **Select a contract to configure** list, and then enter the desired values in the **Configure the address and binding for the contract** dialog box.</span></span>  
  
    1.  <span data-ttu-id="62c1f-210">選取**BindingConfiguration**下繫結屬性的項目。</span><span class="sxs-lookup"><span data-stu-id="62c1f-210">Select the **BindingConfiguration** entry under Binding Properties.</span></span> <span data-ttu-id="62c1f-211">此精靈只支援基本 HTTP 繫結，讓繫結組態 欄位會自動設為**System.ServiceModel.Configuration.BasicHttpBindingElement**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-211">The wizard only supports basic HTTP binding so the binding configuration field is automatically set to **System.ServiceModel.Configuration.BasicHttpBindingElement**.</span></span> <span data-ttu-id="62c1f-212">若要變更此繫結的組態屬性，按一下省略符號**...**</span><span class="sxs-lookup"><span data-stu-id="62c1f-212">To change the configuration properties for this binding, click the ellipsis **…**</span></span> <span data-ttu-id="62c1f-213">按鈕，可選取色彩。</span><span class="sxs-lookup"><span data-stu-id="62c1f-213">button.</span></span> <span data-ttu-id="62c1f-214">若要使用安全通訊通道，您都必須設定**模式**屬性**傳輸**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-214">To use a secure communication channel, you must always set the **Mode** property to **Transport**.</span></span> <span data-ttu-id="62c1f-215">這是預設值。</span><span class="sxs-lookup"><span data-stu-id="62c1f-215">This is the default value.</span></span>  
  
    2.  <span data-ttu-id="62c1f-216">選取**EndpointName**，然後輸入所需的端點名稱。</span><span class="sxs-lookup"><span data-stu-id="62c1f-216">Select the **EndpointName**, and then enter the desired name of the endpoint.</span></span>  
  
    3.  <span data-ttu-id="62c1f-217">若要套用您的變更，請按一下**套用**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-217">To apply your changes, click **Apply**.</span></span>  
  
9. <span data-ttu-id="62c1f-218">若要繼續進行，請按 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-218">To continue, click **Next**.</span></span> <span data-ttu-id="62c1f-219">[摘要] 頁面會列出所選取的配接器作業的樹狀結構。</span><span class="sxs-lookup"><span data-stu-id="62c1f-219">The Summary page lists a tree structure of the adapter operations that were selected.</span></span>  
  
10. <span data-ttu-id="62c1f-220">檢閱 [摘要]，然後按一下**完成**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-220">Review the summary, and then click **Finish**.</span></span>  
  
11. <span data-ttu-id="62c1f-221">精靈會建立 Web 專案，並將下列檔案。</span><span class="sxs-lookup"><span data-stu-id="62c1f-221">The wizard creates a Web project and adds the following files.</span></span>  
  
    |<span data-ttu-id="62c1f-222">檔案</span><span class="sxs-lookup"><span data-stu-id="62c1f-222">File</span></span>|<span data-ttu-id="62c1f-223">Description</span><span class="sxs-lookup"><span data-stu-id="62c1f-223">Description</span></span>|  
    |----------|-----------------|  
    |<span data-ttu-id="62c1f-224">.svc</span><span class="sxs-lookup"><span data-stu-id="62c1f-224">.svc</span></span>|<span data-ttu-id="62c1f-225">服務參考到 WCF proxy 的檔案。</span><span class="sxs-lookup"><span data-stu-id="62c1f-225">Service file that references to the WCF proxy.</span></span>|  
    |<span data-ttu-id="62c1f-226">.cs</span><span class="sxs-lookup"><span data-stu-id="62c1f-226">.cs</span></span>|<span data-ttu-id="62c1f-227">實作 WCF proxy。</span><span class="sxs-lookup"><span data-stu-id="62c1f-227">Implements the WCF proxy.</span></span>|  
    |<span data-ttu-id="62c1f-228">web.config</span><span class="sxs-lookup"><span data-stu-id="62c1f-228">web.config</span></span>|<span data-ttu-id="62c1f-229">包含\<**端點**>， \<**繫結**>，並\<**行為**> 項目\< **系統。ServiceModel**></span><span class="sxs-lookup"><span data-stu-id="62c1f-229">Contains \<**endpoint**>, \<**bindings**>, and \<**behaviors**> elements for \<**system.ServiceModel**></span></span>|  
  
12. <span data-ttu-id="62c1f-230">發佈 WCF 服務專案。</span><span class="sxs-lookup"><span data-stu-id="62c1f-230">Publish the WCF service project.</span></span>  
  
    1.  <span data-ttu-id="62c1f-231">以滑鼠右鍵按一下方案總管 中的專案，然後按一下**發行**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-231">Right-click the project in Solution Explorer, and then click **Publish**.</span></span>  
  
    2.  <span data-ttu-id="62c1f-232">在**發行網站**對話方塊方塊中，指定 WCF 服務的目標 URL。</span><span class="sxs-lookup"><span data-stu-id="62c1f-232">In the **Publish Web Site** dialog box, specify the target URL for the WCF service.</span></span>  
  
    3.  <span data-ttu-id="62c1f-233">選取**允許更新此先行編譯的網站**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-233">Select **Allow this precompiled site to be updated**.</span></span>  
  
    4.  <span data-ttu-id="62c1f-234">選取**使用固定命名和單一網頁組件**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-234">Select **Use fixed naming and single page assemblies**.</span></span>  
  
    5.  <span data-ttu-id="62c1f-235">選取**啟用強式命名的先行編譯的組件**，然後指定要使用的簽章金鑰。</span><span class="sxs-lookup"><span data-stu-id="62c1f-235">Select **Enable strong naming on precompiled assemblies**, and then specify the signing key to use.</span></span>  
  
13. <span data-ttu-id="62c1f-236">若要發行的網站，按一下 **確定**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-236">To publish the Web site, click **OK**.</span></span>  
  
14. <span data-ttu-id="62c1f-237">請確認服務已成功發行。</span><span class="sxs-lookup"><span data-stu-id="62c1f-237">Verify that the service is published successfully.</span></span>  
  
    1.  <span data-ttu-id="62c1f-238">啟動 IIS 管理主控台。</span><span class="sxs-lookup"><span data-stu-id="62c1f-238">Start the IIS Management Console.</span></span>  <span data-ttu-id="62c1f-239">按一下**啟動**，指向 **系統管理工具**，然後按一下  **Internet Information Services**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-239">Click **Start**, point to **Administrative Tools**, and then click **Internet Information Services**.</span></span>  
  
    2.  <span data-ttu-id="62c1f-240">瀏覽至您用來發行服務的節點。</span><span class="sxs-lookup"><span data-stu-id="62c1f-240">Navigate to the node where you published the service.</span></span>  <span data-ttu-id="62c1f-241">如果服務已發行為 http://localhost/myservice，瀏覽至**Internet Information Services**> **電腦名稱**> **網站** >  **Default Web Site**> **myservice**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-241">If the service was published as http://localhost/myservice, navigate to **Internet Information Services**> **Computer Name**> **Web Sites**> **Default Web Site**> **myservice**.</span></span>  
  
    3.  <span data-ttu-id="62c1f-242">在右窗格中，.svc 檔案中，以滑鼠右鍵按一下，然後按一下 **瀏覽**。</span><span class="sxs-lookup"><span data-stu-id="62c1f-242">On the right pane, right-click the .svc file, and then click **Browse**.</span></span> <span data-ttu-id="62c1f-243">Web 網頁會顯示與服務的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="62c1f-243">The Web page shows up with information about the service.</span></span> <span data-ttu-id="62c1f-244">您現在可以使用從用戶端應用程式的 WCF 或 Web 服務呼叫，以使用此服務。</span><span class="sxs-lookup"><span data-stu-id="62c1f-244">You can now consume this service by using WCF or Web service calls from client applications.</span></span> 

## <a name="security"></a><span data-ttu-id="62c1f-245">安全性</span><span class="sxs-lookup"><span data-stu-id="62c1f-245">Security</span></span>
<span data-ttu-id="62c1f-246">當配接器裝載於服務中時，從用戶端應用程式的呼叫會使用配接器安全性橋接器將用戶端認證傳遞給配接器。</span><span class="sxs-lookup"><span data-stu-id="62c1f-246">When the adapter is hosted within a service, calls from client applications use the Adapter Security Bridge to pass client credentials to the adapter.</span></span>  
  
 <span data-ttu-id="62c1f-247">當 WCF 用戶端會傳送至 WCF 服務驗證時，服務通常會使用驗證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-247">When a WCF client sends authentication to a WCF service, normally the service consumes the authentication.</span></span> <span data-ttu-id="62c1f-248">不過，在配接器的情況下的觀念並擷取基礎 LOB 系統搭配使用的驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="62c1f-248">However, in the case of an adapter, the idea is to capture the authentication information for use with the underlying LOB system.</span></span> <span data-ttu-id="62c1f-249">這被實作透過配接器安全性橋接器，會呈現為端點行為。</span><span class="sxs-lookup"><span data-stu-id="62c1f-249">This is implemented through the Adapter Security Bridge, which is surfaced as an endpoint behavior.</span></span> <span data-ttu-id="62c1f-250">身為配接器開發人員，沒有任何需要實作，以充分利用這項功能。不過，在部署配接器時，您必須考慮如何在用戶端將提供認證給服務。</span><span class="sxs-lookup"><span data-stu-id="62c1f-250">As an adapter developer, there is nothing that needs to be implemented to take advantage of this functionality; however, when deploying the adapter, you must consider how the client will be providing credentials to the service.</span></span>  
  
 <span data-ttu-id="62c1f-251">如果您使用訊息層級安全性，配接器安全性橋接器可以擷取任何繫結上的用戶端應用程式所傳送的 ClientCredentials。</span><span class="sxs-lookup"><span data-stu-id="62c1f-251">If you are using message-level security, the Adapter Security Bridge can retrieve the ClientCredentials sent by the client application on any binding.</span></span> <span data-ttu-id="62c1f-252">如果您使用基本 HTTP 繫結，您可以改為選取要用於自訂的標頭傳遞使用者名稱和密碼資訊。</span><span class="sxs-lookup"><span data-stu-id="62c1f-252">If you are using basic HTTP binding, you can instead select to use a custom header to pass the user name and password information.</span></span> <span data-ttu-id="62c1f-253">建議使用 WCF 提供的 ClientCredential 類別傳遞認證，但是許多 Web 服務用戶端應用程式必須將認證傳遞使用的自訂標頭。</span><span class="sxs-lookup"><span data-stu-id="62c1f-253">It is recommended to use the ClientCredential class provided by WCF to pass credentials, however many Web Service client applications will need to use a custom header to pass credentials.</span></span>  
  
 <span data-ttu-id="62c1f-254">以下是範例設定配接器從中尋找用戶端應用程式提供 ClientCredentials 中的認證。</span><span class="sxs-lookup"><span data-stu-id="62c1f-254">The following is an example configuration where the adapter looks for credentials in the ClientCredentials that the client application provides.</span></span> <span data-ttu-id="62c1f-255">如果找不到，配接器接著會查看所指定的 HTTP 要求標頭。</span><span class="sxs-lookup"><span data-stu-id="62c1f-255">If none is found, the adapter then looks in the HTTP request headers that are specified.</span></span>  
  
```  
<endpointBehaviors>  
   <behavior name="customEndpointBehavior">  
      <endpointBehavior usernameHttpHeader="UNHdr" passwordHttpHeader="PWHdr"  
         adapterSecurityBridgeType="Auto" />  
    </behavior>  
</endpointBehaviors>  
```      
  
## <a name="see-also"></a><span data-ttu-id="62c1f-256">另請參閱</span><span class="sxs-lookup"><span data-stu-id="62c1f-256">See Also</span></span>  
 [<span data-ttu-id="62c1f-257">開發活動</span><span class="sxs-lookup"><span data-stu-id="62c1f-257">Development Activities</span></span>](../../esb-toolkit/development-activities.md)