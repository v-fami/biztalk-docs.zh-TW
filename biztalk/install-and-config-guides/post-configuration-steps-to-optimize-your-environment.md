---
title: 組態後步驟來最佳化您的環境 |Microsoft 文件
description: 工作完成之後安裝和設定 BizTalk Server 中，包括設定的 SQL Agent 工作、 安裝 EDI 結構描述、 建立主控件和主控件執行個體，以及 BizTalk Server 中的多個
ms.custom: ''
ms.prod: biztalk-server
ms.date: 09/27/2017
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d0fef6ea-e7cc-4ea9-936d-5d638bc43feb
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 80c5f4b69e8204c89ebb3dd74252e85e815b1867
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2017
ms.locfileid: "25976836"
---
# <a name="post-configuration-steps-to-optimize-your-environment"></a><span data-ttu-id="f1e43-103">環境最佳化的後續設定步驟</span><span class="sxs-lookup"><span data-stu-id="f1e43-103">Post-configuration steps to optimize your environment</span></span>
<span data-ttu-id="f1e43-104">協助改善效能、維護 BizTalk 環境，以及安裝 EDI 結構描述的設定後續作業步驟。</span><span class="sxs-lookup"><span data-stu-id="f1e43-104">Post-configuration steps to help improve performance, maintain your BizTalk environment, and install the EDI schemas.</span></span>

## <a name="disable-shared-memory-protocol-in-sql-server"></a><span data-ttu-id="f1e43-105">停用 SQL Server 的共用記憶體通訊協定</span><span class="sxs-lookup"><span data-stu-id="f1e43-105">Disable Shared Memory protocol in SQL Server</span></span>

1. <span data-ttu-id="f1e43-106">開啟 **SQL Server 組態管理員**。</span><span class="sxs-lookup"><span data-stu-id="f1e43-106">Open **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="f1e43-107">展開 [SQL Server 網路組態]，然後選取 [Protocols for MSSQLSERVER (MSSQLSERVER 的通訊協定)]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-107">Expand **SQL Server Network Configuration**, and select **Protocols for MSSQLSERVER**.</span></span>
3. <span data-ttu-id="f1e43-108">以滑鼠右鍵按一下 [共用記憶體]，然後選取 [停用]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-108">Right-click **Shared Memory**, and select **Disable**.</span></span>
4. <span data-ttu-id="f1e43-109">選取 [SQL Server 服務]，再用滑鼠右鍵按一下 [SQL Server (MSSQLServer)]，然後選取 [重新啟動]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-109">Select **SQL Server Services**, right-click **SQL Server (MSSQLServer)**, and select **Restart**.</span></span>
5. <span data-ttu-id="f1e43-110">關閉 **SQL Server 組態管理員**。</span><span class="sxs-lookup"><span data-stu-id="f1e43-110">Close **SQL Server Configuration Manager**.</span></span>

## <a name="configure-the-sql-agent-jobs"></a><span data-ttu-id="f1e43-111">設定 SQL Agent 作業</span><span class="sxs-lookup"><span data-stu-id="f1e43-111">Configure the SQL Agent jobs</span></span>

1. <span data-ttu-id="f1e43-112">**SQL Server Management Studio**，並連接到 **Database Engine**。</span><span class="sxs-lookup"><span data-stu-id="f1e43-112">**SQL Server Management Studio**, and connect to **Database Engine**.</span></span>
2. <span data-ttu-id="f1e43-113">展開 [SQL Server Agent]，再展開 [作業]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-113">Expand **SQL Server Agent**, and expand **Jobs**.</span></span> <span data-ttu-id="f1e43-114">設定下列作業：</span><span class="sxs-lookup"><span data-stu-id="f1e43-114">Configure the following jobs:</span></span>  

    <span data-ttu-id="f1e43-115">作業名稱</span><span class="sxs-lookup"><span data-stu-id="f1e43-115">Job Name</span></span>  |<span data-ttu-id="f1e43-116">描述</span><span class="sxs-lookup"><span data-stu-id="f1e43-116">Description</span></span>  |<span data-ttu-id="f1e43-117">為何需要它</span><span class="sxs-lookup"><span data-stu-id="f1e43-117">Why you need it</span></span>  
    ---------|---------|---------
    <span data-ttu-id="f1e43-118">備份 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="f1e43-118">Backup BizTalk Server</span></span> | <span data-ttu-id="f1e43-119">備份 BizTalk Server 資料庫和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="f1e43-119">Backs up the BizTalk Server databases and the log files.</span></span> <span data-ttu-id="f1e43-120">設定作業時，您可以決定頻率和檔案位置等參數。</span><span class="sxs-lookup"><span data-stu-id="f1e43-120">When configuring the job, you determine parameters like frequency and file location.</span></span><br/><br/><span data-ttu-id="f1e43-121">下列連結會說明 SQL Agent 作業和其參數︰</span><span class="sxs-lookup"><span data-stu-id="f1e43-121">The following links describe the SQL Agent job and its parameters:</span></span><br/><br/>[<span data-ttu-id="f1e43-122">備份和還原 BizTalk Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="f1e43-122">Backing Up and Restoring BizTalk Server Databases</span></span>](../core/backing-up-and-restoring-biztalk-server-databases.md)<br/>[<span data-ttu-id="f1e43-123">如何設定備份 BizTalk Server 作業</span><span class="sxs-lookup"><span data-stu-id="f1e43-123">How to Configure the Backup BizTalk Server Job</span></span>](../core/how-to-configure-the-backup-biztalk-server-job.md)|<span data-ttu-id="f1e43-124">此 SQL Agent 作業也會截斷交易記錄檔，有利改善效能。</span><span class="sxs-lookup"><span data-stu-id="f1e43-124">This SQL Agent job also truncates the transaction logs, which helps improve performance.</span></span><br/><br/><span data-ttu-id="f1e43-125">這項作業不會移除或刪除備份檔案，包括較舊的檔案。</span><span class="sxs-lookup"><span data-stu-id="f1e43-125">This job does not remove or delete backup files, including older files.</span></span> <span data-ttu-id="f1e43-126">若要刪除備份檔案，請參照 Microsoft BizTalk Server 資料庫伺服器與時俱增的備份檔案中失敗的「備份 BizTalk Server」作業。</span><span class="sxs-lookup"><span data-stu-id="f1e43-126">To delete backup files, refer to The "Backup BizTalk Server" job fails when backup files accumulate over time in the Microsoft BizTalk Server database server.</span></span>
    <span data-ttu-id="f1e43-127">DTA 清除與封存</span><span class="sxs-lookup"><span data-stu-id="f1e43-127">DTA Purge and Archive</span></span> |<span data-ttu-id="f1e43-128">截斷並封存 BizTalk Server 追蹤資料庫 (BizTalkDTADb)。</span><span class="sxs-lookup"><span data-stu-id="f1e43-128">Truncates and archives the BizTalk Server Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="f1e43-129">設定作業時，您可以決定已完成執行個體的保留天數以及所有資料的保留天數等參數。</span><span class="sxs-lookup"><span data-stu-id="f1e43-129">When configuring the job, you determine parameters like how many days to keep completed instances and how many to days to keep all data.</span></span><br/><br/><span data-ttu-id="f1e43-130">下列連結會說明 SQL Agent 作業和其參數︰</span><span class="sxs-lookup"><span data-stu-id="f1e43-130">The following links describe the SQL Agent job and its parameters:</span></span> <br/><br/>[<span data-ttu-id="f1e43-131">封存和清除 BizTalk 追蹤資料庫</span><span class="sxs-lookup"><span data-stu-id="f1e43-131">Archiving and Purging the BizTalk Tracking Database</span></span>](../core/archiving-and-purging-the-biztalk-tracking-database.md)<br/>[<span data-ttu-id="f1e43-132">如何設定 DTA 清除與封存作業</span><span class="sxs-lookup"><span data-stu-id="f1e43-132">How to Configure the DTA Purge and Archive Job</span></span>](../core/how-to-configure-the-dta-purge-and-archive-job.md)|<span data-ttu-id="f1e43-133">此 SQL Agent 工作維護追蹤主機以及清除追蹤事件，而直接影響效能。</span><span class="sxs-lookup"><span data-stu-id="f1e43-133">This SQL Agent job directly impacts performance by maintaining the Tracking host and purging tracking events.</span></span>

## <a name="maintain-your-backup-files"></a><span data-ttu-id="f1e43-134">維護備份檔案</span><span class="sxs-lookup"><span data-stu-id="f1e43-134">Maintain your backup files</span></span>

<span data-ttu-id="f1e43-135">BizTalk Server 不包含任何刪除備份檔案的作業。</span><span class="sxs-lookup"><span data-stu-id="f1e43-135">BizTalk Server does not include any job to delete backup files.</span></span> <span data-ttu-id="f1e43-136">所以，如何維護備份檔是由您決定。</span><span class="sxs-lookup"><span data-stu-id="f1e43-136">As a result, how you maintain your backup files is up to you.</span></span> <span data-ttu-id="f1e43-137">許多使用者會建立 sp_DeleteBackupHistoryAndFiles 預存程序，然後直接在備份 BizTalk Server 作業中呼叫此預存程序。</span><span class="sxs-lookup"><span data-stu-id="f1e43-137">Many users create the sp_DeleteBackupHistoryAndFiles stored procedure, and then call this stored procedure directly in the Backup BizTalk Server job.</span></span> <span data-ttu-id="f1e43-138">有些使用者則是建立維護計畫。</span><span class="sxs-lookup"><span data-stu-id="f1e43-138">Some users create a maintenance plan.</span></span> <span data-ttu-id="f1e43-139">由您作主。</span><span class="sxs-lookup"><span data-stu-id="f1e43-139">The choice is yours.</span></span> <span data-ttu-id="f1e43-140">本主題列出這兩個選項。</span><span class="sxs-lookup"><span data-stu-id="f1e43-140">This topic lists both options.</span></span>

#### <a name="option-1-create-the-spdeletebackuphistoryandfiles-stored-procedure"></a><span data-ttu-id="f1e43-141">選項 1︰建立 sp_DeleteBackupHistoryAndFiles 預存程序</span><span class="sxs-lookup"><span data-stu-id="f1e43-141">Option 1: Create the sp_DeleteBackupHistoryAndFiles stored procedure</span></span>

1. <span data-ttu-id="f1e43-142">在 SQL Server Management Studio 中，選取 BizTalk 管理資料庫 (BizTalkMgmtDb)。</span><span class="sxs-lookup"><span data-stu-id="f1e43-142">In SQL Server Management Studio, select the BizTalk Management database (BizTalkMgmtDb).</span></span> 
2. <span data-ttu-id="f1e43-143">選取 [新增查詢]，並執行下列 T-SQL 指令碼建立 sp_DeleteBackupHistoryAndFiles 預存程序︰</span><span class="sxs-lookup"><span data-stu-id="f1e43-143">Select **New Query**, and run the following T-SQL script to create the sp_DeleteBackupHistoryAndFiles stored procedure:</span></span> 

    ```
    CREATE PROCEDURE [dbo].[sp_DeleteBackupHistoryAndFiles] @DaysToKeep smallint = null
    AS

    BEGIN
    set nocount on
    IF @DaysToKeep IS NULL OR @DaysToKeep <= 1
    RETURN
    /*
    Only delete full sets
    If a set spans a day in such a way that some items fall into the deleted group and the other does not, do not delete the set
    */

    DECLARE DeleteBackupFiles CURSOR
    FOR SELECT 'del "' + [BackupFileLocation] + '\' + [BackupFileName] + '"' FROM [adm_BackupHistory]
    WHERE  datediff( dd, [BackupDateTime], getdate() ) >= @DaysToKeep
    AND [BackupSetId] NOT IN ( SELECT [BackupSetId] FROM [dbo].[adm_BackupHistory] [h2] WHERE [h2].[BackupSetId] = [BackupSetId] AND datediff( dd, [h2].[BackupDateTime], getdate() ) < @DaysToKeep )
 
    DECLARE @cmd varchar(400)
    OPEN DeleteBackupFiles
    FETCH NEXT FROM DeleteBackupFiles INTO @cmd
    WHILE (@@fetch_status <> -1)
    BEGIN
        IF (@@fetch_status <> -2)
        BEGIN
            EXEC master.dbo.xp_cmdshell @cmd, NO_OUTPUT
            delete from [adm_BackupHistory] WHERE CURRENT OF DeleteBackupFiles
            print @cmd
        END
        FETCH NEXT FROM DeleteBackupFiles INTO @cmd
    END

    CLOSE DeleteBackupFiles
    DEALLOCATE DeleteBackupFiles
    END
    GO
    ```

3. <span data-ttu-id="f1e43-144">開啟 [備份 BizTalk Server] 作業，然後選取 [步驟]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-144">Open the Backup BizTalk Server job, and select **Steps**.</span></span>
4. <span data-ttu-id="f1e43-145">編輯**清除備份記錄**步驟，讓它呼叫新的 *sp_DeleteBackupHistoryAndFiles* 預存程序，而不是原先的 *sp_DeleteBackupHistory* 預存程序。</span><span class="sxs-lookup"><span data-stu-id="f1e43-145">Edit the **Clear Backup History** step so that it calls the new *sp_DeleteBackupHistoryAndFiles* stored procedure instead of the previous *sp_DeleteBackupHistory* stored procedure.</span></span>
5. <span data-ttu-id="f1e43-146">選取 [確定] 儲存您的變更。</span><span class="sxs-lookup"><span data-stu-id="f1e43-146">Select **OK** to save your changes.</span></span>

#### <a name="option-2-create-a-maintenance-plan"></a><span data-ttu-id="f1e43-147">選項 2：建立維護計畫</span><span class="sxs-lookup"><span data-stu-id="f1e43-147">Option 2: Create a maintenance plan</span></span>

1. <span data-ttu-id="f1e43-148">在 SQL Server Management Studio 中，展開 [管理]，以滑鼠右鍵按一下 [維護計畫]，然後選取 [維護計畫精靈]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-148">In SQL Server Management Studio, expand **Management**, right-click **Maintenance Plans**, and select **Maintenance Plan Wizard**.</span></span>
2. <span data-ttu-id="f1e43-149">命名計劃 (例如，將它命名為「清除備份檔案」)，然後選取 [排程] 旁的 [變更] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="f1e43-149">Name the plan (for example, name it *Purge Backup Files*), and then select the **Change** button next to **Schedule**.</span></span>
3. <span data-ttu-id="f1e43-150">選擇您想要的備份檔案清除頻率。</span><span class="sxs-lookup"><span data-stu-id="f1e43-150">Choose how frequently you want to purge the backup files.</span></span> <span data-ttu-id="f1e43-151">這些設定完全由您決定。</span><span class="sxs-lookup"><span data-stu-id="f1e43-151">These settings are completely up to you.</span></span> <span data-ttu-id="f1e43-152">依序選取 [確定] 和 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-152">Select **OK**, and then select **Next**.</span></span>
4. <span data-ttu-id="f1e43-153">選取 [維護清除工作]，然後選取 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-153">Select **Maintenance Cleanup Task**, and select **Next**.</span></span>
5. <span data-ttu-id="f1e43-154">在 [Cleanup Task (清除工作)] 視窗中，移至 [Search folder and delete files... (搜尋資料夾及刪除檔案)]，選取您的備份資料夾 (可能是 f:\BizTalkBackUps)，然後輸入 **.bak** 副檔名。</span><span class="sxs-lookup"><span data-stu-id="f1e43-154">In the **Cleanup Task** window, go to **Search folder and delete files...**, select your backup Folder (maybe f:\BizTalkBackUps), and enter **.bak** for the File extension.</span></span> <span data-ttu-id="f1e43-155">您也可以選擇依據檔案存在時間刪除檔案。</span><span class="sxs-lookup"><span data-stu-id="f1e43-155">You can also choose to delete files based on their age.</span></span> <span data-ttu-id="f1e43-156">例如，如果想要刪除存在時間超過 3 週的檔案，輸入 3。</span><span class="sxs-lookup"><span data-stu-id="f1e43-156">For example, enter 3 if you want to delete files that are older than 3 weeks.</span></span> <span data-ttu-id="f1e43-157">選取 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-157">Select **Next**.</span></span>
6. <span data-ttu-id="f1e43-158">完成執行精靈，並輸入您想要的任何其他資訊。</span><span class="sxs-lookup"><span data-stu-id="f1e43-158">Finish going through the wizard and enter any additional information you want.</span></span> <span data-ttu-id="f1e43-159">選取 [完成]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-159">Select **Finish**.</span></span>

  
## <a name="install-edi-schemas-and-more-edi-as2-configuration"></a><span data-ttu-id="f1e43-160">安裝 EDI 結構描述及更多的 EDI AS2 設定</span><span class="sxs-lookup"><span data-stu-id="f1e43-160">Install EDI schemas and more EDI AS2 configuration</span></span>
 <span data-ttu-id="f1e43-161">EANCOM、EDIFACT、HIPAA 和 X12 結構描述檔案都包含在名為 MicrosoftEdiXSDTemplates.exe 的自動解壓縮可執行檔中。</span><span class="sxs-lookup"><span data-stu-id="f1e43-161">The EANCOM, EDIFACT, HIPAA, and X12 schema files are included in a self-extracting executable file named  MicrosoftEdiXSDTemplates.exe.</span></span> <span data-ttu-id="f1e43-162">若要建立 EDI 解決方案，請解壓縮這些檔案，並使用您的專案部署。</span><span class="sxs-lookup"><span data-stu-id="f1e43-162">To create EDI solutions, extract these files, and deploy with your projects.</span></span> <span data-ttu-id="f1e43-163">安裝並解壓縮這些檔案︰</span><span class="sxs-lookup"><span data-stu-id="f1e43-163">To install and extract these files:</span></span>  
  
1.  <span data-ttu-id="f1e43-164">執行 [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 安裝，然後安裝**開發者工具與 SDK** 元件。</span><span class="sxs-lookup"><span data-stu-id="f1e43-164">Run the [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] installation, and install the **Developer Tools and SDK** component.</span></span> <span data-ttu-id="f1e43-165">此元件會將 MicrosoftEdiXSDTemplates.exe EDI 結構描述檔案下載至 \XSD_Schema\EDI 資料夾中。</span><span class="sxs-lookup"><span data-stu-id="f1e43-165">This component  downloads the MicrosoftEdiXSDTemplates.exe EDI schema file to the \XSD_Schema\EDI folder.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="f1e43-166">如果升級 [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]，原安裝中的 MicrosoftEdiXSDTemplates.exe 檔案會替換成與升級相關聯的新 MicrosoftEdiXSDTemplates.exe 檔案。</span><span class="sxs-lookup"><span data-stu-id="f1e43-166">If you upgrade [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)], the MicrosoftEdiXSDTemplates.exe file in your installation is replaced with the new MicrosoftEdiXSDTemplates.exe file associated with the upgrade.</span></span> <span data-ttu-id="f1e43-167">如果需要原先的結構描述，請備份先前的 MicrosoftEdiXSDTemplates.exe 檔案。</span><span class="sxs-lookup"><span data-stu-id="f1e43-167">If you need the previous the schemas, then back up the previous MicrosoftEdiXSDTemplates.exe file.</span></span>  
  
    > [!NOTE] 
    > <span data-ttu-id="f1e43-168">如果您在將 [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 升級到更新的組建時升級了訊息結構描述，您可能會在使用更新過的結構描述時遇到問題，或是您可能必須執行其他的更新步驟。</span><span class="sxs-lookup"><span data-stu-id="f1e43-168">If you upgrade message schemas when you upgrade [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] to a later build, you may encounter issues using the updated schemas, or you may have to perform additional updating steps.</span></span> <span data-ttu-id="f1e43-169">請參閱[更新應用程式的重要考量](../core/important-considerations-for-updating-applications.md)的＜更新結構描述的考量＞一節。</span><span class="sxs-lookup"><span data-stu-id="f1e43-169">See the "Considerations for updating schemas" section in [Important Considerations for Updating Applications](../core/important-considerations-for-updating-applications.md)</span></span>
  
2.  <span data-ttu-id="f1e43-170">移至 [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI，並按兩下 MicrosoftEdiXSDTemplates.exe。</span><span class="sxs-lookup"><span data-stu-id="f1e43-170">Go  to [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI, and double-click MicrosoftEdiXSDTemplates.exe.</span></span>  
  
3.  <span data-ttu-id="f1e43-171">將結構描述解壓縮至 [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI。</span><span class="sxs-lookup"><span data-stu-id="f1e43-171">Extract the schemas to [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI.</span></span> <span data-ttu-id="f1e43-172">當您解壓縮結構描述時，它們會儲存在 EANCOM、EDIFACT、HIPAA 和 X12 資料夾中。</span><span class="sxs-lookup"><span data-stu-id="f1e43-172">When you extract the schemas, they are stored in EANCOM, EDIFACT, HIPAA, and X12 folders.</span></span>  
  
#### <a name="add-a-reference-to-the-biztalk-server-edi-application"></a><span data-ttu-id="f1e43-173">加入 BizTalk Server EDI 應用程式的參考</span><span class="sxs-lookup"><span data-stu-id="f1e43-173">Add a reference to the BizTalk Server EDI application</span></span>  
 <span data-ttu-id="f1e43-174">EDI 結構描述、管線及協調流程會部署在 **BizTalk EDI 應用程式**中。</span><span class="sxs-lookup"><span data-stu-id="f1e43-174">EDI schemas, pipelines, and orchestrations are deployed in the **BizTalk EDI Application**.</span></span> <span data-ttu-id="f1e43-175">若要將任何其他應用程式用為 EDI 應用程式，請加入 **BizTalk EDI 應用程式**的參考。</span><span class="sxs-lookup"><span data-stu-id="f1e43-175">To use any other application as an EDI application, add a reference to the **BizTalk EDI Application**.</span></span> <span data-ttu-id="f1e43-176">步驟：</span><span class="sxs-lookup"><span data-stu-id="f1e43-176">Steps:</span></span>  
  
1.  <span data-ttu-id="f1e43-177">在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理主控台中，展開 [應用程式]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-177">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand  **Applications**.</span></span> <span data-ttu-id="f1e43-178">以滑鼠右鍵按一下您想要用於 EDI 的應用程式 (例如 *BizTalk Application 1*)，選取 [新增], ，然後選取 [參考]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-178">Right-click the application that you want to use for EDI (such as *BizTalk Application 1*), select **Add**, and then select **References**.</span></span>  
  
2.  <span data-ttu-id="f1e43-179">選取 [BizTalk EDI 應用程式]，然後選取 [確定] 儲存變更。</span><span class="sxs-lookup"><span data-stu-id="f1e43-179">Select **BizTalk EDI Application**, and select **OK** to save your changes.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="f1e43-180">若要查看其他應用程式的參考，請以滑鼠右鍵按一下任何應用程式，然後選取 [內容]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-180">To see references to other applications, right-click any application, and select **Properties**.</span></span> <span data-ttu-id="f1e43-181">選取 [參考]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-181">Select **References**.</span></span> <span data-ttu-id="f1e43-182">您也可以加入新的參考，然後移除現有的參考。</span><span class="sxs-lookup"><span data-stu-id="f1e43-182">You can also add new references, and remove existing references.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f1e43-183">請勿將自訂成品加入 [BizTalk EDI 應用程式] 中。</span><span class="sxs-lookup"><span data-stu-id="f1e43-183">Do not add custom artifacts to the BizTalk EDI Application.</span></span> <span data-ttu-id="f1e43-184">此應用程式最好保持原樣。</span><span class="sxs-lookup"><span data-stu-id="f1e43-184">It's best to leave this application as-is.</span></span>  
  
#### <a name="start-batch-orchestrations"></a><span data-ttu-id="f1e43-185">啟動批次協調流程</span><span class="sxs-lookup"><span data-stu-id="f1e43-185">Start batch orchestrations</span></span>  
 <span data-ttu-id="f1e43-186">如果您讓合作對象啟用接收及/或傳送 EDI 批次功能，您就必須啟動批次協調流程。</span><span class="sxs-lookup"><span data-stu-id="f1e43-186">If you enable a party to receive and/or send EDI batches, then start the batching orchestrations.</span></span> <span data-ttu-id="f1e43-187">這些協調流程不會由安裝精靈或組態精靈啟動。</span><span class="sxs-lookup"><span data-stu-id="f1e43-187">These orchestrations are not started by the installation wizard or the configuration wizard.</span></span> <span data-ttu-id="f1e43-188">步驟：</span><span class="sxs-lookup"><span data-stu-id="f1e43-188">Steps:</span></span>  
  
1.  <span data-ttu-id="f1e43-189">在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理主控台中，展開 [BizTalk EDI 應用程式]，然後選取 [協調流程]。</span><span class="sxs-lookup"><span data-stu-id="f1e43-189">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand **BizTalk EDI Application**, and select**Orchestrations**.</span></span>  
  
2.  <span data-ttu-id="f1e43-190">以滑鼠右鍵按一下下列每個協調流程，然後選取 [啟動]：</span><span class="sxs-lookup"><span data-stu-id="f1e43-190">Right-click each of the following orchestrations, and select **Start**:</span></span>  
  
    -   <span data-ttu-id="f1e43-191">Microsoft.BizTalk.Edi.BatchSuspendOrchestration.BatchElementSuspendService (組件：Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span><span class="sxs-lookup"><span data-stu-id="f1e43-191">Microsoft.BizTalk.Edi.BatchSuspendOrchestration.BatchElementSuspendService (assembly: Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span></span>  
  
    -   <span data-ttu-id="f1e43-192">Microsoft.BizTalk.Edi.BatchingOrchestration.BatchingService (組件：Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span><span class="sxs-lookup"><span data-stu-id="f1e43-192">Microsoft.BizTalk.Edi.BatchingOrchestration.BatchingService (assembly: Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span></span>  
  
    -   <span data-ttu-id="f1e43-193">Microsoft.BizTalk.Edi.RoutingOrchestration.BatchRoutingService (組件：Microsoft.BizTalk.Edi.RoutingOrchestration.dll)</span><span class="sxs-lookup"><span data-stu-id="f1e43-193">Microsoft.BizTalk.Edi.RoutingOrchestration.BatchRoutingService (assembly: Microsoft.BizTalk.Edi.RoutingOrchestration.dll)</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f1e43-194">只有在您接收及/或傳送 EDI 批次時，這些 EDI 批次處理協調流程才會啟動。</span><span class="sxs-lookup"><span data-stu-id="f1e43-194">The EDI batching orchestrations should only be started if you receive and/or send EDI batches.</span></span> <span data-ttu-id="f1e43-195">若是在系統不是正在接收或傳送 EDI 批次時啟動這些協調流程，可能會影響系統效能。</span><span class="sxs-lookup"><span data-stu-id="f1e43-195">Starting them when the system is not receiving or sending EDI batches could affect system performance.</span></span>  
  
#### <a name="migrate-edi-artifacts-from-a-previous-biztalk-version"></a><span data-ttu-id="f1e43-196">將 EDI 成品移轉舊版 BizTalk 中</span><span class="sxs-lookup"><span data-stu-id="f1e43-196">Migrate EDI artifacts from a previous BizTalk version</span></span>  
 <span data-ttu-id="f1e43-197">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 及較新版本已更新在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中管理交易夥伴的方式。</span><span class="sxs-lookup"><span data-stu-id="f1e43-197">The way trading partners are managed in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] was updated in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 and newer versions.</span></span> <span data-ttu-id="f1e43-198">在上一版 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中，只能為交易夥伴建立合作對象，不能為主控 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的夥伴建立。</span><span class="sxs-lookup"><span data-stu-id="f1e43-198">In the previous [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] versions, a party was created only for the trading partner, and not for the partner hosting [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f1e43-199">在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 及更新版本中，必須為所有的交易夥伴，包括主控 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的夥伴建立合作對象。</span><span class="sxs-lookup"><span data-stu-id="f1e43-199">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 and newer, a party must be created for all the trading partners, including the partner hosting [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f1e43-200">上一版 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 是在合作對象層級定義編碼 (X12 和 EDIFACT) 與傳輸 (AS2) 通訊協定內容。</span><span class="sxs-lookup"><span data-stu-id="f1e43-200">In previous [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] versions, the encoding (X12 and EDIFACT) and transport (AS2) protocol properties are defined at the party level.</span></span> <span data-ttu-id="f1e43-201">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 及更新版本是透過協議定義這些內容。</span><span class="sxs-lookup"><span data-stu-id="f1e43-201">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 and newer versions, these properties are defined through agreements.</span></span>  
  
 <span data-ttu-id="f1e43-202">若要從舊版移轉合作對象資料，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 要有合作對象移轉工具。</span><span class="sxs-lookup"><span data-stu-id="f1e43-202">To migrate party data from previous versions, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] includes a Party Migration Tool.</span></span> <span data-ttu-id="f1e43-203">請考慮下列移轉路徑︰</span><span class="sxs-lookup"><span data-stu-id="f1e43-203">Consider the following migration paths:</span></span>  
  
|[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f1e43-204"> 版本</span><span class="sxs-lookup"><span data-stu-id="f1e43-204"> Version</span></span>|<span data-ttu-id="f1e43-205">移轉路徑</span><span class="sxs-lookup"><span data-stu-id="f1e43-205">Migration Path</span></span>|  
|---------------------------------------------------------------------------------------|--------------------|  
|**[!INCLUDE[btsbiztalkserver2006r2](../includes/btsbiztalkserver2006r2-md.md)]**|<span data-ttu-id="f1e43-206">升級到 BizTalk Server 2009。</span><span class="sxs-lookup"><span data-stu-id="f1e43-206">Upgrade to BizTalk Server 2009.</span></span> <span data-ttu-id="f1e43-207">然後，使用 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 隨附的合作對象移轉工具移轉至 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="f1e43-207">Then, use the Party Migration Tool included with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 to migrate to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span><br /><br /> <span data-ttu-id="f1e43-208">**或者**，使用 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 隨附的合作對象移轉工具移轉至 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010。</span><span class="sxs-lookup"><span data-stu-id="f1e43-208">**Or**, use the Party Migration Tool included with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 to migrate to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010.</span></span> <span data-ttu-id="f1e43-209">接著，升級到 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="f1e43-209">Then, upgrade to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span>|  
|<span data-ttu-id="f1e43-210">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2009**</span><span class="sxs-lookup"><span data-stu-id="f1e43-210">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2009**</span></span>|<span data-ttu-id="f1e43-211">使用 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 隨附的合作對象移轉工具直接移轉至 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="f1e43-211">Use the Party Migration Tool included with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 to migrate directly to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span>|  
|<span data-ttu-id="f1e43-212">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010**</span><span class="sxs-lookup"><span data-stu-id="f1e43-212">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010**</span></span>|<span data-ttu-id="f1e43-213">升級至 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="f1e43-213">Upgrade to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span>|  
  
 <span data-ttu-id="f1e43-214">合作對象移轉工具位於 \PartyMigrationTool 資料夾下的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 媒體中。</span><span class="sxs-lookup"><span data-stu-id="f1e43-214">The Party Migration Tool is available on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] media under the \PartyMigrationTool folder.</span></span>  

  
## <a name="install-biztalk-health-monitor-bhm"></a><span data-ttu-id="f1e43-215">安裝 BHM 狀況監控 (BHM)</span><span class="sxs-lookup"><span data-stu-id="f1e43-215">Install BizTalk Health Monitor (BHM)</span></span>

<span data-ttu-id="f1e43-216">BHM 狀況監控提供儀表板，以建立及檢視 MessageBox 檢視器報表、建立自訂查詢、執行結束字元工作、監視多個 BizTalk 環境等等。</span><span class="sxs-lookup"><span data-stu-id="f1e43-216">BizTalk Health Monitor provides a dashboard to create and view MessageBox Viewer reports, create custom queries, run Terminator tasks, monitor multiple BizTalk environments, and more.</span></span> <span data-ttu-id="f1e43-217">如果您負責 BizTalk 環境，建議您安裝並使用此工具來檢查與維護 BizTalk 環境的狀況。</span><span class="sxs-lookup"><span data-stu-id="f1e43-217">If you are responsible for a BizTalk envrionment, we suggest you install and use this tool to check the health of your BizTalk environment, and also maintain it.</span></span>

<span data-ttu-id="f1e43-218">重要連結：</span><span class="sxs-lookup"><span data-stu-id="f1e43-218">Key links:</span></span>

[<span data-ttu-id="f1e43-219">下載 BHM</span><span class="sxs-lookup"><span data-stu-id="f1e43-219">Download BHM</span></span>](https://www.microsoft.com/download/details.aspx?id=43716)  
[<span data-ttu-id="f1e43-220">安裝 BHM</span><span class="sxs-lookup"><span data-stu-id="f1e43-220">Install BHM</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/26466.biztalk-server-how-to-install-the-new-biztalk-health-monitor-snap-in.aspx)  
[<span data-ttu-id="f1e43-221">BHM 官方部落格</span><span class="sxs-lookup"><span data-stu-id="f1e43-221">BHM Official Blog</span></span>](https://blogs.msdn.microsoft.com/biztalkhealthmonitor/)

## <a name="create-your-hosts-and-host-instances"></a><span data-ttu-id="f1e43-222">建立您的主控件與主控件執行個體</span><span class="sxs-lookup"><span data-stu-id="f1e43-222">Create your hosts and host instances</span></span>
<span data-ttu-id="f1e43-223">建議將重要的工作分成不同的主控件。</span><span class="sxs-lookup"><span data-stu-id="f1e43-223">It is recommended to separate some key tasks into separate hosts.</span></span> <span data-ttu-id="f1e43-224">例如，一律分別建立專門用於追蹤的主控件。</span><span class="sxs-lookup"><span data-stu-id="f1e43-224">For example, always create a separate host that is dedicated to only tracking.</span></span> <span data-ttu-id="f1e43-225">建立專門接收訊息的另一個主控件/主控件執行個體、傳送訊息的另一個主控件/主控件執行個體，以及用於協調流程的另一個主控件/主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="f1e43-225">Create another host/host instance that focuses on receiving messages, another host/host instance for sending messages, and another host/host instance for orchestration.</span></span> 

<span data-ttu-id="f1e43-226">有很多關於這方面的建議。</span><span class="sxs-lookup"><span data-stu-id="f1e43-226">There are many recommendations in this area.</span></span> <span data-ttu-id="f1e43-227">下面這些可以讓您快速上手︰</span><span class="sxs-lookup"><span data-stu-id="f1e43-227">Here are a few to get you started:</span></span> 

[<span data-ttu-id="f1e43-228">管理 BizTalk 主控件和主控件執行個體</span><span class="sxs-lookup"><span data-stu-id="f1e43-228">Managing BizTalk Hosts and Host Instances</span></span>](../core/managing-biztalk-hosts-and-host-instances.md)  
[<span data-ttu-id="f1e43-229">為 BizTalk 主控件提供高可用性</span><span class="sxs-lookup"><span data-stu-id="f1e43-229">Providing High Availability for BizTalk Hosts</span></span>](../core/providing-high-availability-for-biztalk-hosts.md)  
<span data-ttu-id="f1e43-230">[BizTalk Server Best Practices: Create and Configure BizTalk Server Host and Host Instances](http://social.technet.microsoft.com/wiki/contents/articles/19701.biztalk-server-best-practices-create-and-configure-biztalk-server-host-and-host-instances.aspx) (BizTalk 伺服器的最佳做法︰建立與配置 BizTalk Server 主控件和主控件執行個體)</span><span class="sxs-lookup"><span data-stu-id="f1e43-230">[Best Practices: Create and Configure BizTalk Server Host and Host](http://social.technet.microsoft.com/wiki/contents/articles/19701.biztalk-server-best-practices-create-and-configure-biztalk-server-host-and-host-instances.aspx)</span></span>  
<span data-ttu-id="f1e43-231">[BizTalk Server: Running Orchestrations in Multiple Hosts on the Same Computer](http://social.technet.microsoft.com/wiki/contents/articles/31183.biztalk-server-running-orchestrations-in-multiple-hosts-on-the-same-computer.aspx) (在同一部電腦的多個主控件中執行協調流程)</span><span class="sxs-lookup"><span data-stu-id="f1e43-231">[Running Orchestrations in Multiple Hosts on the Same Computer](http://social.technet.microsoft.com/wiki/contents/articles/31183.biztalk-server-running-orchestrations-in-multiple-hosts-on-the-same-computer.aspx)</span></span>  
[<span data-ttu-id="f1e43-232">PowerShell 建立和設定 BizTalk Server 主控件、 主控件執行個體和處理常式</span><span class="sxs-lookup"><span data-stu-id="f1e43-232">PowerShell to Create and Configure BizTalk Server Host, Host Instances and Handlers</span></span>](https://gallery.technet.microsoft.com/PowerShell-to-Configure-43d77916)  
<span data-ttu-id="f1e43-233">[BizTalk Server Resources on the TechNet Wiki](http://social.technet.microsoft.com/wiki/contents/articles/2240.biztalk-server-resources-on-the-technet-wiki.aspx) (TechNet Wiki 上的 BizTalk Server 資源)</span><span class="sxs-lookup"><span data-stu-id="f1e43-233">[BizTalk Server Resources on the TechNet Wiki](http://social.technet.microsoft.com/wiki/contents/articles/2240.biztalk-server-resources-on-the-technet-wiki.aspx)</span></span>
