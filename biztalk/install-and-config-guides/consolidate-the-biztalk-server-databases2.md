---
title: "合併 BizTalk Server Databases2 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d7fc4fe6-3fc2-4164-9f16-90b6f473ba8c
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 56a8f594298569caaa4842a5f754ba991e9e5f51
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="consolidate-the-biztalk-server-databases2"></a><span data-ttu-id="db6a4-102">合併 BizTalk Server 資料庫2</span><span class="sxs-lookup"><span data-stu-id="db6a4-102">Consolidate the BizTalk Server Databases2</span></span>
<span data-ttu-id="db6a4-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 安裝需要在 Microsoft [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 中建立多達 13 個不同的資料庫，以做為各種 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 功能的資料存放區。</span><span class="sxs-lookup"><span data-stu-id="db6a4-103">A Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] installation may require the creation of up to 13 separate databases in Microsoft [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] for use as data stores for various [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] features.</span></span> <span data-ttu-id="db6a4-104">基於管理和維護這些資料庫所需的額外負荷，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 會將其中數個資料庫合併為單一資料庫。</span><span class="sxs-lookup"><span data-stu-id="db6a4-104">Due to the overhead required to manage and maintain these databases, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] accommodates the consolidation of several of these databases into a single database.</span></span> <span data-ttu-id="db6a4-105">本節說明如何達成 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫合併，並討論實作 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫合併的考量。</span><span class="sxs-lookup"><span data-stu-id="db6a4-105">This section describes how to accomplish [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation and discusses considerations for implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="db6a4-106">如需安裝 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 時所需之所有資料庫的完整清單，請參閱 [BizTalk Server 中的資料庫](../core/databases-in-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="db6a4-106">For a complete list of all of the databases that are required when installing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], see [Databases in BizTalk Server](../core/databases-in-biztalk-server.md).</span></span>  
  
## <a name="implementing-biztalk-database-consolidation"></a><span data-ttu-id="db6a4-107">實作 BizTalk 資料庫合併</span><span class="sxs-lookup"><span data-stu-id="db6a4-107">Implementing BizTalk Database Consolidation</span></span>  
 <span data-ttu-id="db6a4-108">在安裝 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 之後，進行 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 設定期間，可以執行 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫合併。</span><span class="sxs-lookup"><span data-stu-id="db6a4-108">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation is performed after installing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], during [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] configuration.</span></span> <span data-ttu-id="db6a4-109">請依照下列步驟，實作 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫合併：</span><span class="sxs-lookup"><span data-stu-id="db6a4-109">Follow these steps to implement [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation:</span></span>  
  
1.  <span data-ttu-id="db6a4-110">按一下 [開始]，依序指向 [程式集] 和 [[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]]，然後按一下 [BizTalk Server 組態]。</span><span class="sxs-lookup"><span data-stu-id="db6a4-110">Click **Start**, point to **Programs**, point to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and then click **BizTalk Server Configuration**.</span></span> <span data-ttu-id="db6a4-111">如果系統提示您選取組態類型，請按一下 [自訂組態]。</span><span class="sxs-lookup"><span data-stu-id="db6a4-111">If prompted to select a configuration type, click **Custom configuration**.</span></span>  
  
2.  <span data-ttu-id="db6a4-112">請針對下列其中一個或多個資料存放區，輸入相同的 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]「伺服器名稱」和「資料庫名稱」(例如 *BizTalkConsolidatedDb*)：</span><span class="sxs-lookup"><span data-stu-id="db6a4-112">Enter the same [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**Server Name** and **Database Name** (for example *BizTalkConsolidatedDb*) for one of more of the following data stores:</span></span>  
  
    |<span data-ttu-id="db6a4-113">功能名稱</span><span class="sxs-lookup"><span data-stu-id="db6a4-113">Feature Name</span></span>|<span data-ttu-id="db6a4-114">資料存放區名稱</span><span class="sxs-lookup"><span data-stu-id="db6a4-114">Data Store Name</span></span>|  
    |------------------|---------------------|  
    |<span data-ttu-id="db6a4-115">企業 SSO</span><span class="sxs-lookup"><span data-stu-id="db6a4-115">Enterprise SSO</span></span>|<span data-ttu-id="db6a4-116">SSO 資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-116">SSO Database</span></span>|  
    |<span data-ttu-id="db6a4-117">群組</span><span class="sxs-lookup"><span data-stu-id="db6a4-117">Group</span></span>|<span data-ttu-id="db6a4-118">BizTalk 管理資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-118">BizTalk Management Database</span></span>|  
    |<span data-ttu-id="db6a4-119">群組</span><span class="sxs-lookup"><span data-stu-id="db6a4-119">Group</span></span>|<span data-ttu-id="db6a4-120">BizTalk MessageBox 資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-120">BizTalk MessageBox Database</span></span>|  
    |<span data-ttu-id="db6a4-121">群組</span><span class="sxs-lookup"><span data-stu-id="db6a4-121">Group</span></span>|<span data-ttu-id="db6a4-122">BizTalk 追蹤資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-122">BizTalk Tracking Database</span></span>|  
    |<span data-ttu-id="db6a4-123">商務規則引擎</span><span class="sxs-lookup"><span data-stu-id="db6a4-123">Business Rules Engine</span></span>|<span data-ttu-id="db6a4-124">規則引擎資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-124">Rule Engine Database</span></span>|  
  
     <span data-ttu-id="db6a4-125">請注意，下列資料存放區**不**應該設定為共用 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 資料庫：</span><span class="sxs-lookup"><span data-stu-id="db6a4-125">Note that the following data stores should **not** be configured to share a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database:</span></span>  
  
    |<span data-ttu-id="db6a4-126">功能名稱</span><span class="sxs-lookup"><span data-stu-id="db6a4-126">Feature Name</span></span>|<span data-ttu-id="db6a4-127">資料存放區名稱</span><span class="sxs-lookup"><span data-stu-id="db6a4-127">Data Store Name</span></span>|  
    |------------------|---------------------|  
    |<span data-ttu-id="db6a4-128">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="db6a4-128">BAM Tools</span></span>|<span data-ttu-id="db6a4-129">BAM 主要匯入資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-129">BAM Primary Import Database</span></span>|  
    |<span data-ttu-id="db6a4-130">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="db6a4-130">BAM Tools</span></span>|<span data-ttu-id="db6a4-131">BAM 封存資料庫</span><span class="sxs-lookup"><span data-stu-id="db6a4-131">BAM Archive Database</span></span>|  
  
3.  <span data-ttu-id="db6a4-132">設定其餘組態選項，然後套用此組態。</span><span class="sxs-lookup"><span data-stu-id="db6a4-132">Set the remaining configuration options and apply the configuration.</span></span> <span data-ttu-id="db6a4-133">組態工具會針對已指定相同 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]「伺服器名稱」和「資料庫名稱」的資料存放區，在共用的 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 資料庫中建立資料表。</span><span class="sxs-lookup"><span data-stu-id="db6a4-133">The configuration tool will create tables in the shared [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database for the data stores for which you specified the same [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**Server Name** and **Database Name**.</span></span>  
  
## <a name="considerations-for-implementing-biztalk-database-consolidation"></a><span data-ttu-id="db6a4-134">實作 BizTalk 資料庫合併的考量</span><span class="sxs-lookup"><span data-stu-id="db6a4-134">Considerations for Implementing BizTalk Database Consolidation</span></span>  
 <span data-ttu-id="db6a4-135">合併 BizTalk 資料庫時，請考量下列事項：</span><span class="sxs-lookup"><span data-stu-id="db6a4-135">When consolidating a BizTalk Database, consider the following:</span></span>  
  
1.  <span data-ttu-id="db6a4-136">資料庫合併會降低與管理及維護 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫相關的額外負荷，但只能在適當環境中實作。</span><span class="sxs-lookup"><span data-stu-id="db6a4-136">Database consolidation reduces the overhead associated with managing and maintaining the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases but should only be implemented in the appropriate environment.</span></span> <span data-ttu-id="db6a4-137">在實際執行環境中實作 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫之前，必須先在執行環境中衡量對 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 持續性效能的影響。</span><span class="sxs-lookup"><span data-stu-id="db6a4-137">Before implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation in a production environment, the effect on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sustained performance should be measured in a staging environment.</span></span> <span data-ttu-id="db6a4-138">在下列情況下，請考量實作 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫合併，以簡化資料庫管理及維護：</span><span class="sxs-lookup"><span data-stu-id="db6a4-138">Consider implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation to simplify database administration and maintenance in the following scenarios:</span></span>  
  
    -   <span data-ttu-id="db6a4-139">小型、低資料量的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 實際執行環境，此時資料庫效能很難成為效能瓶頸。</span><span class="sxs-lookup"><span data-stu-id="db6a4-139">Small scale, low volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments where database performance is very unlikely to become a performance bottleneck.</span></span>  
  
    -   <span data-ttu-id="db6a4-140">中型、中量資料的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 實際執行環境，此時 BizTalk 追蹤資料庫不包含在合併中，而且理想上，BizTalk 追蹤資料庫是建立在不同於合併資料庫的實體磁碟上。</span><span class="sxs-lookup"><span data-stu-id="db6a4-140">Medium scale, medium volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments if the BizTalk tracking database is not included in the consolidation and, ideally, if the BizTalk tracking database is created on a separate physical disk from the consolidated database.</span></span>  
  
    -   <span data-ttu-id="db6a4-141">大型、大量資料的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 生產環境，此時共用的 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 資料庫位在極高效能的儲存區域網路 (SAN) 裝置上，而資料庫不大可能形成效能瓶頸。</span><span class="sxs-lookup"><span data-stu-id="db6a4-141">Large scale, high volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments if the shared [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database is physically located on a very high performance storage area network (SAN) device where the likelihood of the database becoming a performance bottleneck is very low.</span></span>  
  
    -   <span data-ttu-id="db6a4-142">資料庫效能是次要考量之概念或開發環境的證明。</span><span class="sxs-lookup"><span data-stu-id="db6a4-142">Proof of concept or development environments where database performance is of secondary concern.</span></span>  
  
2.  <span data-ttu-id="db6a4-143">整體的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 效能通常由 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫的效能決定。</span><span class="sxs-lookup"><span data-stu-id="db6a4-143">Overall [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance is usually dependent upon the performance of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="db6a4-144">因此，任何正在處理或即將處理大量資料的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 實際執行環境，都不應該實作資料庫合併。</span><span class="sxs-lookup"><span data-stu-id="db6a4-144">Therefore database consolidation should not be implemented in any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environment that is experiencing or will be experiencing high volume.</span></span> <span data-ttu-id="db6a4-145">唯一的例外是當 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫位在極高效能的儲存區域網路 (SAN) 裝置，此時資料庫不大可能會造成效能瓶頸。</span><span class="sxs-lookup"><span data-stu-id="db6a4-145">One exception to this is if the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases are located on a very high performance storage area network (SAN) device where the likelihood of the database becoming a performance bottleneck is very low.</span></span> <span data-ttu-id="db6a4-146">如果資料庫磁碟不是裝載於高效能的儲存區域網路，分散式資料庫便可針對合併的資料庫提供絕佳效能，這點在負載過低時更是明顯。</span><span class="sxs-lookup"><span data-stu-id="db6a4-146">If the database disks are not housed on a high performance SAN, distributed databases provide superior performance to consolidated databases, especially under load.</span></span>  
  
3.  <span data-ttu-id="db6a4-147">如果資料庫合併中有包含 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理資料庫，而該合併資料庫的名稱不是 **BizTalkMgmtDb**，這時 [BizTalk 管理] 主控台必須設定為指向該合併資料庫。</span><span class="sxs-lookup"><span data-stu-id="db6a4-147">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management database is included in the database consolidation and the consolidation database is not named **BizTalkMgmtDb**, then the BizTalk Administration console must be configured to point to the consolidation database.</span></span> <span data-ttu-id="db6a4-148">請依照[如何連接至現有的群組](../core/how-to-connect-to-an-existing-group.md)中的步驟，並將 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理主控台設定為指向該合併資料庫，以便管理 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 群組。</span><span class="sxs-lookup"><span data-stu-id="db6a4-148">Follow the steps in [How to Connect to an Existing Group](../core/how-to-connect-to-an-existing-group.md) and configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to point to the consolidation database in order to manage the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  
  
4.  <span data-ttu-id="db6a4-149">如需持續性 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 效能的詳細資訊，請參閱[持續性效能的規劃](../core/planning-for-sustained-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="db6a4-149">For more information about sustainable [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance, please refer to [Planning for Sustained Performance](../core/planning-for-sustained-performance.md).</span></span>  
  
 <span data-ttu-id="db6a4-150">如需 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫維護相關活動的詳細資訊，請參閱[維護 BizTalk Server1](../core/maintaining-biztalk-server1.md)。</span><span class="sxs-lookup"><span data-stu-id="db6a4-150">For more information about activities related to maintaining the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, please refer to [Maintaining BizTalk Server1](../core/maintaining-biztalk-server1.md).</span></span>