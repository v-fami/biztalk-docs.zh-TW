---
title: 升級到 BizTalk Server 2016 |Microsoft Docs
ms.custom: ''
ms.prod: biztalk-server
ms.date: 06/08/2017
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 975ec82b-ed27-4545-8e4a-0e567507c9ba
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bbd6debef5517e95295be0b7680244ee433b6e2f
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36976575"
---
# <a name="upgrade-to-biztalk-server-2016"></a><span data-ttu-id="32262-102">升級到 BizTalk Server 2016</span><span class="sxs-lookup"><span data-stu-id="32262-102">Upgrade to BizTalk Server 2016</span></span>
<span data-ttu-id="32262-103">從 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] 或 BizTalk Server 2013 升級至 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="32262-103">Upgrading to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] from [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)], or BizTalk Server 2013.</span></span>

<span data-ttu-id="32262-104">本文件提供 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 升級程序的概觀、重要資訊，以及從 BizTalk Server 2013 R2 或 BizTalk Server 2013 升級的逐步指示。</span><span class="sxs-lookup"><span data-stu-id="32262-104">This topic provides an overview of the [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] upgrade process, key information, and step-by-step instructions for upgrading from BizTalk Server 2013 R2 or BizTalk Server 2013.</span></span>


## <a name="upgrade-overview"></a><span data-ttu-id="32262-105">升級概觀</span><span class="sxs-lookup"><span data-stu-id="32262-105">Upgrade overview</span></span>

- <span data-ttu-id="32262-106">升級之前請完整閱讀本文件。</span><span class="sxs-lookup"><span data-stu-id="32262-106">Read this entire document before you upgrade.</span></span> <span data-ttu-id="32262-107">BizTalk Server 會將許多不同元件的內部和外部都連線到您的企業中。</span><span class="sxs-lookup"><span data-stu-id="32262-107">BizTalk Server connects many disparate components, both internal and external, to your enterprise.</span></span> <span data-ttu-id="32262-108">在現實世界中，通常會部署到多部伺服器，最後得到同時混合了實體電腦與虛擬電腦的叢集。</span><span class="sxs-lookup"><span data-stu-id="32262-108">Most real-world deployment scenarios extend much farther to include multiple servers and eventually clusters of both physical and virtual computers.</span></span>

- <span data-ttu-id="32262-109">沒有 BizTalk Server 部署會彼此相同。</span><span class="sxs-lookup"><span data-stu-id="32262-109">No two BizTalk Server deployments are the same.</span></span> <span data-ttu-id="32262-110">在升級前，請收集企業需求的資訊，並與 IT 專業人員、系統管理員和要使用 BizTalk Server 的開發人員一起討論部署範圍。</span><span class="sxs-lookup"><span data-stu-id="32262-110">Before you upgrade, gather information on your enterprise needs, and discuss the scope of your deployment with the IT Professionals, System Administrators, and Developers who use BizTalk Server.</span></span> <span data-ttu-id="32262-111">只要詳閱本升級指南並決定企業的特殊需求，您就可以建立自己的部署藍圖。</span><span class="sxs-lookup"><span data-stu-id="32262-111">By studying this upgrade guide, and determining the specific needs of your enterprise, you are creating your own deployment roadmap.</span></span>

- <span data-ttu-id="32262-112">使用 BizTalk Server Best Practices Analyzer (BPA) 檢查 BizTalk Server 部署，並產生最佳做法清單。</span><span class="sxs-lookup"><span data-stu-id="32262-112">Use the BizTalk Server Best Practices Analyzer (BPA) to examine a BizTalk Server deployment, and generate a list of best practices.</span></span> <span data-ttu-id="32262-113">BPA 會執行組態層級驗證 (僅讀取和報告)，並運用所收集的資料來研判是否已遵循最佳作法。</span><span class="sxs-lookup"><span data-stu-id="32262-113">BPA performs configuration-level verification, by reading and reporting only, and uses the gathered data to determine whether best practices are being followed.</span></span>

### <a name="planning-your-upgrade"></a><span data-ttu-id="32262-114">規劃升級</span><span class="sxs-lookup"><span data-stu-id="32262-114">Planning your upgrade</span></span>

<span data-ttu-id="32262-115">以下是升級程序的高等級檢視。</span><span class="sxs-lookup"><span data-stu-id="32262-115">The following is a high-level view of the upgrade process.</span></span> <span data-ttu-id="32262-116">每個所列出的步驟都必須依顯示的順序執行。</span><span class="sxs-lookup"><span data-stu-id="32262-116">Each of the steps listed must be run in the order shown.</span></span>

- <span data-ttu-id="32262-117">作業系統升級路徑</span><span class="sxs-lookup"><span data-stu-id="32262-117">Operating systems upgrade paths</span></span>
- <span data-ttu-id="32262-118">Microsoft SQL Server® 升級路徑</span><span class="sxs-lookup"><span data-stu-id="32262-118">Microsoft SQL Server® upgrade paths</span></span>
- <span data-ttu-id="32262-119">Windows® SharePoint® Services 升級</span><span class="sxs-lookup"><span data-stu-id="32262-119">Windows® SharePoint® Services upgrade</span></span>
- <span data-ttu-id="32262-120">並存安裝 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="32262-120">Install Visual Studio side-by-side</span></span>
- <span data-ttu-id="32262-121">並存安裝 Microsoft Office 2016/2013</span><span class="sxs-lookup"><span data-stu-id="32262-121">Install Microsoft Office 2016/2013 side-by-side</span></span>

### <a name="supported-upgrade-paths"></a><span data-ttu-id="32262-122">支援的升級路徑</span><span class="sxs-lookup"><span data-stu-id="32262-122">Supported upgrade paths</span></span>
<span data-ttu-id="32262-123">下表列出可以升級至 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的支援作業系統。</span><span class="sxs-lookup"><span data-stu-id="32262-123">The following table lists the supported operating systems that can be upgraded to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="32262-124">「是」表示在該作業系統上執行的 BizTalk Server 版本可以升級。</span><span class="sxs-lookup"><span data-stu-id="32262-124">“Yes” means the BizTalk Server version running on that operating system can be upgraded.</span></span> <span data-ttu-id="32262-125">「否」表示在該作業系統上執行的 BizTalk Server 版本無法升級。</span><span class="sxs-lookup"><span data-stu-id="32262-125">“No” means the BizTalk Server version running on that operating system cannot be upgraded.</span></span> <span data-ttu-id="32262-126">當出現「否」時，必須在支援的作業系統上重新建立 BizTalk 環境。</span><span class="sxs-lookup"><span data-stu-id="32262-126">When “No”, the BizTalk environment must be recreated on a supported operating system.</span></span>  <span data-ttu-id="32262-127">[BizTalk Server 2016 的硬體和軟體需求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)會列出支援的作業系統。</span><span class="sxs-lookup"><span data-stu-id="32262-127">[Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) lists the supported operating systems.</span></span>

| <span data-ttu-id="32262-128">作業系統</span><span class="sxs-lookup"><span data-stu-id="32262-128">Operating Systems</span></span> | <span data-ttu-id="32262-129">BizTalk Server 2013 R2</span><span class="sxs-lookup"><span data-stu-id="32262-129">BizTalk Server 2013 R2</span></span> |<span data-ttu-id="32262-130">BizTalk Server 2013</span><span class="sxs-lookup"><span data-stu-id="32262-130">BizTalk Server 2013</span></span> |
| --- | --- | --- |
| <span data-ttu-id="32262-131">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="32262-131">Windows Server 2012 R2</span></span> | <span data-ttu-id="32262-132">是</span><span class="sxs-lookup"><span data-stu-id="32262-132">Yes</span></span> | <span data-ttu-id="32262-133">否</span><span class="sxs-lookup"><span data-stu-id="32262-133">No</span></span> |
| <span data-ttu-id="32262-134">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="32262-134">Windows Server 2012</span></span> | <span data-ttu-id="32262-135">否</span><span class="sxs-lookup"><span data-stu-id="32262-135">No</span></span> | <span data-ttu-id="32262-136">否</span><span class="sxs-lookup"><span data-stu-id="32262-136">No</span></span> |
| <span data-ttu-id="32262-137">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="32262-137">Windows 8.1</span></span> | <span data-ttu-id="32262-138">是</span><span class="sxs-lookup"><span data-stu-id="32262-138">Yes</span></span> | <span data-ttu-id="32262-139">否</span><span class="sxs-lookup"><span data-stu-id="32262-139">No</span></span> |
| <span data-ttu-id="32262-140">Windows 8</span><span class="sxs-lookup"><span data-stu-id="32262-140">Windows 8</span></span> | <span data-ttu-id="32262-141">否</span><span class="sxs-lookup"><span data-stu-id="32262-141">No</span></span> | <span data-ttu-id="32262-142">否</span><span class="sxs-lookup"><span data-stu-id="32262-142">No</span></span>
| <span data-ttu-id="32262-143">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="32262-143">Windows 7 SP1</span></span> | <span data-ttu-id="32262-144">否</span><span class="sxs-lookup"><span data-stu-id="32262-144">No</span></span> | <span data-ttu-id="32262-145">否</span><span class="sxs-lookup"><span data-stu-id="32262-145">No</span></span> |

<span data-ttu-id="32262-146">下表列出可以升級至 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的支援 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="32262-146">The following table lists the supported SQL Server versions that can be upgraded to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="32262-147">SQL Server 會主控 BizTalk Server 所使用的資料庫。</span><span class="sxs-lookup"><span data-stu-id="32262-147">The SQL Server hosts the databases used by BizTalk Server.</span></span> <span data-ttu-id="32262-148">「是」表示可以升級使用該 SQL Server 版本的 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="32262-148">“Yes” means BizTalk Server using that SQL Server version can be upgraded.</span></span> <span data-ttu-id="32262-149">「否」表示不能升級使用該 SQL Server 版本的 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="32262-149">“No” means BizTalk Server using that SQL Server version cannot be upgraded.</span></span> <span data-ttu-id="32262-150">當出現「否」時，必須在支援的 SQL Server 版本上重新建立 BizTalk 環境。</span><span class="sxs-lookup"><span data-stu-id="32262-150">When “No”, the BizTalk environment must be recreated on a supported SQL Server version.</span></span> <span data-ttu-id="32262-151">[BizTalk Server 2016 的硬體和軟體需求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)會列出支援的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="32262-151">[Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) lists the supported SQL Server versions.</span></span> 

> [!TIP]
> <span data-ttu-id="32262-152">如果您的 SQL Server 版本不受支援或不在下列清單中，請參閱 SQL Server 升級文件。</span><span class="sxs-lookup"><span data-stu-id="32262-152">If you're SQL Server version isn't supported, or isn't in the following list, then review the SQL Server upgrade documentation.</span></span> <span data-ttu-id="32262-153">SQL 升級涵蓋的版本比 BizTalk 支援的多。</span><span class="sxs-lookup"><span data-stu-id="32262-153">The SQL upgrade covers more versions than what BizTalk supports.</span></span> <span data-ttu-id="32262-154">例如，如果您使用 SQL Server 2008，您可以升級至 SQL Server 2016。</span><span class="sxs-lookup"><span data-stu-id="32262-154">For example, if you're using SQL Server 2008, you may be able to upgrade SQL Server 2016.</span></span> <span data-ttu-id="32262-155">然後可以升級至 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="32262-155">Then, you can upgrade to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="32262-156">[升級到 SQL Server 2016](https://msdn.microsoft.com/library/bb677622.aspx) 和[升級至 SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx) 會列出可以升級的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="32262-156">[Upgrade to SQL Server 2016](https://msdn.microsoft.com/library/bb677622.aspx) and [Upgrade to SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx) lists the SQL Server versions that can be upgraded.</span></span>

| <span data-ttu-id="32262-157">[SQL Server]</span><span class="sxs-lookup"><span data-stu-id="32262-157">SQL Server</span></span> | <span data-ttu-id="32262-158">BizTalk Server 2013 R2</span><span class="sxs-lookup"><span data-stu-id="32262-158">BizTalk Server 2013 R2</span></span> |<span data-ttu-id="32262-159">BizTalk Server 2013</span><span class="sxs-lookup"><span data-stu-id="32262-159">BizTalk Server 2013</span></span> |
| --- | --- | --- |
| <span data-ttu-id="32262-160">SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="32262-160">SQL Server 2014</span></span> | <span data-ttu-id="32262-161">是</span><span class="sxs-lookup"><span data-stu-id="32262-161">Yes</span></span> | <span data-ttu-id="32262-162">否</span><span class="sxs-lookup"><span data-stu-id="32262-162">No</span></span> |
| <span data-ttu-id="32262-163">SQL Server 2012 SP1</span><span class="sxs-lookup"><span data-stu-id="32262-163">SQL Server 2012 SP1</span></span>| <span data-ttu-id="32262-164">否</span><span class="sxs-lookup"><span data-stu-id="32262-164">No</span></span> | <span data-ttu-id="32262-165">否</span><span class="sxs-lookup"><span data-stu-id="32262-165">No</span></span> |
| <span data-ttu-id="32262-166">SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="32262-166">SQL Server 2012</span></span> | <span data-ttu-id="32262-167">否</span><span class="sxs-lookup"><span data-stu-id="32262-167">No</span></span> | <span data-ttu-id="32262-168">否</span><span class="sxs-lookup"><span data-stu-id="32262-168">No</span></span> |
| <span data-ttu-id="32262-169">SQL Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="32262-169">SQL Server 2008 R2 SP1</span></span> | <span data-ttu-id="32262-170">否</span><span class="sxs-lookup"><span data-stu-id="32262-170">No</span></span> | <span data-ttu-id="32262-171">否</span><span class="sxs-lookup"><span data-stu-id="32262-171">No</span></span> |


<span data-ttu-id="32262-172">下表列出從 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的支援版本升級路徑。</span><span class="sxs-lookup"><span data-stu-id="32262-172">The following table lists the supported Edition upgrade path from [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="32262-173">「是」表示 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 版本可以升級至該版本。</span><span class="sxs-lookup"><span data-stu-id="32262-173">“Yes” means the [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 edition can be upgraded to the edition.</span></span> <span data-ttu-id="32262-174">「否」表示 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 版本不能升級至該版本。</span><span class="sxs-lookup"><span data-stu-id="32262-174">“No” means the [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 edition cannot be upgraded to the edition.</span></span> <span data-ttu-id="32262-175">當出現「否」時，就必須重新建立 BizTalk 環境。</span><span class="sxs-lookup"><span data-stu-id="32262-175">When “No”, the BizTalk environment must be recreated.</span></span>

| <span data-ttu-id="32262-176">BizTalk Server 2013 R2/2013</span><span class="sxs-lookup"><span data-stu-id="32262-176">BizTalk Server 2013 R2/2013</span></span> | <span data-ttu-id="32262-177">BizTalk Server 2016 Evaluation Edition</span><span class="sxs-lookup"><span data-stu-id="32262-177">BizTalk Server 2016 Evaluation Edition</span></span> | <span data-ttu-id="32262-178">BizTalk Server 2016 Branch Edition</span><span class="sxs-lookup"><span data-stu-id="32262-178">BizTalk Server 2016 Branch Edition</span></span> | <span data-ttu-id="32262-179">BizTalk Server 2016 Developer Edition</span><span class="sxs-lookup"><span data-stu-id="32262-179">BizTalk Server 2016 Developer Edition</span></span> | <span data-ttu-id="32262-180">BizTalk Server 2016 Standard Edition</span><span class="sxs-lookup"><span data-stu-id="32262-180">BizTalk Server 2016 Standard Edition</span></span> | <span data-ttu-id="32262-181">BizTalk Server 2016 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="32262-181">BizTalk Server 2016 Enterprise Edition</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="32262-182">Evaluation</span><span class="sxs-lookup"><span data-stu-id="32262-182">Evaluation</span></span> | <span data-ttu-id="32262-183">否</span><span class="sxs-lookup"><span data-stu-id="32262-183">No</span></span> | <span data-ttu-id="32262-184">否</span><span class="sxs-lookup"><span data-stu-id="32262-184">No</span></span> | <span data-ttu-id="32262-185">否</span><span class="sxs-lookup"><span data-stu-id="32262-185">No</span></span> | <span data-ttu-id="32262-186">否</span><span class="sxs-lookup"><span data-stu-id="32262-186">No</span></span> | <span data-ttu-id="32262-187">是</span><span class="sxs-lookup"><span data-stu-id="32262-187">Yes</span></span> | 
| <span data-ttu-id="32262-188">分支</span><span class="sxs-lookup"><span data-stu-id="32262-188">Branch</span></span> | <span data-ttu-id="32262-189">否</span><span class="sxs-lookup"><span data-stu-id="32262-189">No</span></span> | <span data-ttu-id="32262-190">是</span><span class="sxs-lookup"><span data-stu-id="32262-190">Yes</span></span> | <span data-ttu-id="32262-191">否</span><span class="sxs-lookup"><span data-stu-id="32262-191">No</span></span> | <span data-ttu-id="32262-192">否</span><span class="sxs-lookup"><span data-stu-id="32262-192">No</span></span> | <span data-ttu-id="32262-193">是</span><span class="sxs-lookup"><span data-stu-id="32262-193">Yes</span></span> | 
| <span data-ttu-id="32262-194">開發人員</span><span class="sxs-lookup"><span data-stu-id="32262-194">Developer</span></span> | <span data-ttu-id="32262-195">否</span><span class="sxs-lookup"><span data-stu-id="32262-195">No</span></span> | <span data-ttu-id="32262-196">否</span><span class="sxs-lookup"><span data-stu-id="32262-196">No</span></span> | <span data-ttu-id="32262-197">是</span><span class="sxs-lookup"><span data-stu-id="32262-197">Yes</span></span> | <span data-ttu-id="32262-198">否</span><span class="sxs-lookup"><span data-stu-id="32262-198">No</span></span> | <span data-ttu-id="32262-199">是</span><span class="sxs-lookup"><span data-stu-id="32262-199">Yes</span></span> | 
| <span data-ttu-id="32262-200">Standard</span><span class="sxs-lookup"><span data-stu-id="32262-200">Standard</span></span> | <span data-ttu-id="32262-201">否</span><span class="sxs-lookup"><span data-stu-id="32262-201">No</span></span> | <span data-ttu-id="32262-202">否</span><span class="sxs-lookup"><span data-stu-id="32262-202">No</span></span> | <span data-ttu-id="32262-203">否</span><span class="sxs-lookup"><span data-stu-id="32262-203">No</span></span> | <span data-ttu-id="32262-204">是</span><span class="sxs-lookup"><span data-stu-id="32262-204">Yes</span></span> | <span data-ttu-id="32262-205">是</span><span class="sxs-lookup"><span data-stu-id="32262-205">Yes</span></span> | 
| <span data-ttu-id="32262-206">Enterprise</span><span class="sxs-lookup"><span data-stu-id="32262-206">Enterprise</span></span> | <span data-ttu-id="32262-207">否</span><span class="sxs-lookup"><span data-stu-id="32262-207">No</span></span> | <span data-ttu-id="32262-208">否</span><span class="sxs-lookup"><span data-stu-id="32262-208">No</span></span> | <span data-ttu-id="32262-209">否</span><span class="sxs-lookup"><span data-stu-id="32262-209">No</span></span> | <span data-ttu-id="32262-210">否</span><span class="sxs-lookup"><span data-stu-id="32262-210">No</span></span> | <span data-ttu-id="32262-211">是</span><span class="sxs-lookup"><span data-stu-id="32262-211">Yes</span></span> | 

## <a name="before-the-upgrade--what-you-need-to-know"></a><span data-ttu-id="32262-212">在升級之前 – 您必須了解的事項</span><span class="sxs-lookup"><span data-stu-id="32262-212">Before the upgrade – what you need to know</span></span>


- <span data-ttu-id="32262-213">**權限**：執行升級的使用者必須為下列使用者群組成員，或擁有對等的權限：</span><span class="sxs-lookup"><span data-stu-id="32262-213">**Permissions**: The user performing the upgrade must be a member of the following user groups or have the equivalent permissions:</span></span>

    - <span data-ttu-id="32262-214">本機電腦的 Administrators 群組</span><span class="sxs-lookup"><span data-stu-id="32262-214">Administrators group on the local computer</span></span>
    - <span data-ttu-id="32262-215">SQL Server 的 SQL Server 系統管理員群組</span><span class="sxs-lookup"><span data-stu-id="32262-215">SQL Server System Administrators group on the SQL Server</span></span>
    - <span data-ttu-id="32262-216">BizTalk Server 系統管理員群組</span><span class="sxs-lookup"><span data-stu-id="32262-216">BizTalk Server Administrators group</span></span>
    - <span data-ttu-id="32262-217">單一登入 (SSO) 系統管理員群組</span><span class="sxs-lookup"><span data-stu-id="32262-217">Single Sign-On (SSO) Administrators group</span></span>

- <span data-ttu-id="32262-218">**SSO**：單一登入主要密碼伺服器與主控 SSO 資料庫的 SQL Server 必須在升級期間執行。</span><span class="sxs-lookup"><span data-stu-id="32262-218">**SSO**: The Single Sign-On Master Secret Server and the SQL Server that hosts the SSO database must be running during the upgrade.</span></span>

- <span data-ttu-id="32262-219">**網路服務帳戶**：必須具有 %windir%\temp 的寫入權限。</span><span class="sxs-lookup"><span data-stu-id="32262-219">**Network Service Account**: Must have write access to %windir%\temp.</span></span>

- <span data-ttu-id="32262-220">**憑證**：備份 Windows 憑證存放區：</span><span class="sxs-lookup"><span data-stu-id="32262-220">**Certificates**: Back up the Windows certificates store:</span></span>  

    [<span data-ttu-id="32262-221">Windows 7 和 Windows Server 2008 R2︰匯入憑證</span><span class="sxs-lookup"><span data-stu-id="32262-221">Windows 7 and Windows Server 2008 R2: Import a Certificate</span></span>](http://technet.microsoft.com/library/cc754489.aspx)  
    [<span data-ttu-id="32262-222">Windows 7 和 Windows Server 2008 R2︰匯出憑證</span><span class="sxs-lookup"><span data-stu-id="32262-222">Windows 7 and Windows Server 2008 R2: Export a Certificate</span></span>](http://technet.microsoft.com/library/cc730988.aspx)  

- <span data-ttu-id="32262-223">**DTC**：啟用 Microsoft 分散式交易協調器 (MSDTC) ([環境最佳化的後續設定步驟](../install-and-config-guides/post-configuration-steps-to-optimize-your-environment.md))，然後再啟用輸入/輸出 DTC 規則：</span><span class="sxs-lookup"><span data-stu-id="32262-223">**DTC**: Enable Microsoft Distributed Transaction Coordinator (MSDTC) ([Post-configuration steps to optimize your environment](../install-and-config-guides/post-configuration-steps-to-optimize-your-environment.md)), and then enable the Inbound/Outbound DTC rules:</span></span>

    1. <span data-ttu-id="32262-224">在 [伺服器管理員] 中選取 [工具]，並開啟 [具有進階安全性的 Windows 防火牆]。</span><span class="sxs-lookup"><span data-stu-id="32262-224">In Server Manager, select **Tools**, and open **Windows Firewall with Advanced Security**.</span></span>
    2. <span data-ttu-id="32262-225">選取 [輸入規則]。</span><span class="sxs-lookup"><span data-stu-id="32262-225">Select **Inbound Rules**.</span></span>
    3. <span data-ttu-id="32262-226">在 **輸入規則**，以滑鼠右鍵按一下**分散式交易協調器**\* （適合的話），然後**啟用規則**。</span><span class="sxs-lookup"><span data-stu-id="32262-226">In **Inbound Rules**, right-click **Distributed Transaction Coordinator** \* (as appropriate), and then **Enable Rule**.</span></span>
    4.  <span data-ttu-id="32262-227">在 [具有進階安全性的 Windows 防火牆] 中，選取 [輸出規則]。</span><span class="sxs-lookup"><span data-stu-id="32262-227">In Windows Firewall with Advanced Security, select **Outbound Rules**.</span></span>
    5.  <span data-ttu-id="32262-228">在 **輸出規則**，以滑鼠右鍵按一下**分散式交易協調器**\* （適合的話），然後**啟用規則**。</span><span class="sxs-lookup"><span data-stu-id="32262-228">In **Outbound Rules**, right-click **Distributed Transaction Coordinator** \* (as appropriate), and then **Enable Rule**.</span></span>

- <span data-ttu-id="32262-229">**SharePoint**：用戶端物件模型 (CSOM) 用來連接到 SharePoint Services。</span><span class="sxs-lookup"><span data-stu-id="32262-229">**SharePoint**: The Client Side Object Model (CSOM) is used to connect to SharePoint Services.</span></span> <span data-ttu-id="32262-230">[!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 已移除伺服器端物件模型 (SSOM) (web 服務)。</span><span class="sxs-lookup"><span data-stu-id="32262-230">The  Server Side Object Model (SSOM) (the web service) is removed in [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span>

    <span data-ttu-id="32262-231">如果您使用不支援 CSOM 的 SharePoint 版本，您可以升級至支援的 SharePoint 版本︰</span><span class="sxs-lookup"><span data-stu-id="32262-231">If you are using SharePoint versions that doesn't support CSOM, you may be able to upgrade to a supported SharePoint version:</span></span>

    <span data-ttu-id="32262-232">[升級到 SharePoint 2016](https://technet.microsoft.com/library/cc303420(v=office.16).aspx)</span><span class="sxs-lookup"><span data-stu-id="32262-232">[Upgrade to SharePoint 2016](https://technet.microsoft.com/library/cc303420(v=office.16).aspx)</span></span>  
    <span data-ttu-id="32262-233">[升級到 SharePoint 2013](https://technet.microsoft.com/library/cc303420(v=office.15).aspx)</span><span class="sxs-lookup"><span data-stu-id="32262-233">[Upgrade to SharePoint 2013](https://technet.microsoft.com/library/cc303420(v=office.15).aspx)</span></span>

- <span data-ttu-id="32262-234">**.NET framework**︰.NET Framework 4.5 和 .NET Framework 4.6 之間沒有並存安裝的概念。</span><span class="sxs-lookup"><span data-stu-id="32262-234">**.NET Framework**: There is no concept of side-by-side installation between .NET Framework 4.5 and .NET Framework 4.6.</span></span> <span data-ttu-id="32262-235">.NET Framework 4.6 二進位檔會覆寫 .NET Framework 4.5 二進位檔。</span><span class="sxs-lookup"><span data-stu-id="32262-235">The .NET Framework 4.6 binaries overwrite .NET Framework 4.5 binaries.</span></span> <span data-ttu-id="32262-236">.NET framework 4.6 是 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 需求，舊版 BizTalk Server 並不支援 (也不應該安裝)。</span><span class="sxs-lookup"><span data-stu-id="32262-236">.NET Framework 4.6 is a [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] requirement, and is not supported (and should not be installed) in previous BizTalk Server versions.</span></span>

- <span data-ttu-id="32262-237">**Office 2016 和 Office 2013**：[在同一部電腦上安裝和使用不同版本的 Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF)。</span><span class="sxs-lookup"><span data-stu-id="32262-237">**Office 2016 and Office 2013**: [Install and use different versions of Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF) on the same computer.</span></span> <span data-ttu-id="32262-238">亦請查看[這些問題](https://support.microsoft.com/kb/3094527)。</span><span class="sxs-lookup"><span data-stu-id="32262-238">Also, check out [these issues](https://support.microsoft.com/kb/3094527).</span></span>

- <span data-ttu-id="32262-239">**Biztalkserverapplication 主控件**︰升級時需要有預設主控件存在。</span><span class="sxs-lookup"><span data-stu-id="32262-239">**BizTalkServerApplication Host**: The upgrade requires the existence of the default host.</span></span> <span data-ttu-id="32262-240">如已移除與 SQL 配接器傳送埠和接收位置關聯的預設主控件執行個體，請在升級前建立預設主控件與 SQL 配接器的關聯。</span><span class="sxs-lookup"><span data-stu-id="32262-240">If the default host instance associated with the SQL Adapter send ports and receive locations is removed, associate the default host to the SQL Adapter before upgrading.</span></span> <span data-ttu-id="32262-241">完成升級之後，您可以從清單中移除預設主控件。</span><span class="sxs-lookup"><span data-stu-id="32262-241">After upgrade is complete, you can remove the default host from the list.</span></span>

- <span data-ttu-id="32262-242">**自訂繫結**：升級之後，使用舊版 .NET Framework 建置的使用者定義自訂繫結將無法使用。</span><span class="sxs-lookup"><span data-stu-id="32262-242">**Custom Bindings**: User-defined custom bindings that are built with earlier versions of the .NET Framework are not available after you upgrade.</span></span> <span data-ttu-id="32262-243">若要使用自訂繫結，請在 .NET Framework 4.6 machine.config 檔案中手動新增自訂繫結。</span><span class="sxs-lookup"><span data-stu-id="32262-243">To use the custom bindings, manually add the custom bindings in the .NET Framework 4.6 machine.config file.</span></span>

- <span data-ttu-id="32262-244">**設定檔**：備份 BizTalk Server 2013 R2/2013 中的所有自訂設定檔。</span><span class="sxs-lookup"><span data-stu-id="32262-244">**Configuration Files**: Back up all custom configuration files in BizTalk Server 2013 R2/2013.</span></span> <span data-ttu-id="32262-245">BizTalk Server 只支援移轉 `btsntsvc.exe.config` 和 `bm.exe.config` 檔案中的變更。</span><span class="sxs-lookup"><span data-stu-id="32262-245">BizTalk Server supports migration of changes only in the `btsntsvc.exe.config` and `bm.exe.config` files.</span></span>



### <a name="bam-alerts"></a><span data-ttu-id="32262-246">BAM 警示</span><span class="sxs-lookup"><span data-stu-id="32262-246">BAM Alerts</span></span>

<span data-ttu-id="32262-247">需要 SQL Server Database Mail 才能使用 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-247">SQL Server Database Mail is required to use BAM Alerts.</span></span> <span data-ttu-id="32262-248">如果 SQL Server 正在從使用現有 BAM 警示定義與通知服務的 SQL 版本進行升級，您可以備份 BAM 警示定義並在升級之後部署它們。</span><span class="sxs-lookup"><span data-stu-id="32262-248">If SQL Server is being upgraded from a SQL version that used existing BAM Alert definitions with Notification Services, then you can back up your BAM alert definitions, and deploy them after upgrading.</span></span> <span data-ttu-id="32262-249">使用 BM.exe 命令列工具 (`\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`)。</span><span class="sxs-lookup"><span data-stu-id="32262-249">Use the BM.exe command line tool (`\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`).</span></span> <span data-ttu-id="32262-250">特定步驟包含：</span><span class="sxs-lookup"><span data-stu-id="32262-250">Specific steps include:</span></span>

1. <span data-ttu-id="32262-251">開啟命令提示字元，並移至 `\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`。</span><span class="sxs-lookup"><span data-stu-id="32262-251">Open a command prompt and go to `\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`.</span></span>
2. <span data-ttu-id="32262-252">在命令提示字元中建立定義檔：`bm.exe get-defxml -FileName:YourBAMDefinition.xml`</span><span class="sxs-lookup"><span data-stu-id="32262-252">Create a definition file in the command prompt: `bm.exe get-defxml -FileName:YourBAMDefinition.xml`</span></span>
3. <span data-ttu-id="32262-253">在 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 設定中，取消設定 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-253">In [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 Configuration, unconfigure BAM Alerts.</span></span>
4. <span data-ttu-id="32262-254">升級到 SQL Server 2016 或 SQL Server 2014 SP1。</span><span class="sxs-lookup"><span data-stu-id="32262-254">Upgrade to SQL Server 2016 or SQL Server 2014 SP1.</span></span>
5. <span data-ttu-id="32262-255">設定 SQL Server Database Mail。</span><span class="sxs-lookup"><span data-stu-id="32262-255">Configure SQL Server Database Mail.</span></span>
6. <span data-ttu-id="32262-256">升級到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="32262-256">Upgrade to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span>
7. <span data-ttu-id="32262-257">在 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 設定中，設定 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-257">In [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] Configuration, configure BAM Alerts.</span></span>
8. <span data-ttu-id="32262-258">將已儲存的定義檔部署在命令提示字元中：`bm.exe update-all -DefinitionFile:YourBAMDefinition.xml`</span><span class="sxs-lookup"><span data-stu-id="32262-258">Deploy the saved definition file in the command prompt: `bm.exe update-all -DefinitionFile:YourBAMDefinition.xml`</span></span>

> [!IMPORTANT]
> <span data-ttu-id="32262-259">如果您不依列出的順序進行這些步驟或建立定義檔案，您必須在 BizTalk Server 升級之後重新建立定義檔。</span><span class="sxs-lookup"><span data-stu-id="32262-259">If you don’t follow these steps in the order listed or create a definition file, you must recreate the definition files after the BizTalk Server upgrade.</span></span>
> 
> <span data-ttu-id="32262-260">若要檢視 BM.exe 說明，請輸入：`bm.exe help`。</span><span class="sxs-lookup"><span data-stu-id="32262-260">To view the BM.exe help, type: `bm.exe help`.</span></span>


### <a name="bam"></a><span data-ttu-id="32262-261">BAM</span><span class="sxs-lookup"><span data-stu-id="32262-261">BAM</span></span> 

- <span data-ttu-id="32262-262">**BAM DTS 套件**：停止所有 BAM Data Transformation Services (DTS) 套件。</span><span class="sxs-lookup"><span data-stu-id="32262-262">**BAM DTS Packages**: Stop all BAM Data Transformation Services (DTS) packages.</span></span> <span data-ttu-id="32262-263">否則資料可能遺失，或是線上分析處理 (OLAP) Cube 可能會損毀。</span><span class="sxs-lookup"><span data-stu-id="32262-263">Otherwise, data may be lost or an online analytical processing (OLAP) cube may corrupt.</span></span> 

- <span data-ttu-id="32262-264">**磁碟空間**：可用磁碟空間應該至少為現有 BAM 資料庫的大小。</span><span class="sxs-lookup"><span data-stu-id="32262-264">**Disk Space**: The free disk space should be at least the size of the existing BAM databases.</span></span>

- <span data-ttu-id="32262-265">**即時彙總**：如果您在目前的 BizTalk Server 版本中使用 BAM 即時彙總，且已升級為 SQL Server，請安裝或升級為 SQL Server Enterprise Edition。</span><span class="sxs-lookup"><span data-stu-id="32262-265">**Real-time Aggregations**: If you are using BAM real-time aggregations in your current version of BizTalk Server and are upgrading SQL Server, install or upgrade to the SQL Server Enterprise Edition.</span></span> <span data-ttu-id="32262-266">否則，升級會失敗。</span><span class="sxs-lookup"><span data-stu-id="32262-266">Otherwise, the upgrade fails.</span></span>

- <span data-ttu-id="32262-267">**maxTimeout 值**：如果您有大型的 BAM 資料庫，請更新 machine.config 檔中分散式交易的 `maxTimeout` 值，以：</span><span class="sxs-lookup"><span data-stu-id="32262-267">**maxTimeout value**: If you have a large BAM database, update the `maxTimeout` value for distributed transactions in your machine.config file to:</span></span>  

    ```
    <system.transactions>
       <machineSettings maxTimeout="23:59:59" />
    </system.transactions>
    ```

- <span data-ttu-id="32262-268">**使用追蹤設定檔編輯器 (TPE) 啟用的 BAM 追蹤**：升級之後，會升級先前部署的追蹤設定檔；不過，它們對應的攔截器設定不會升級。</span><span class="sxs-lookup"><span data-stu-id="32262-268">**BAM tracking enabled with Tracking Profile Editor (TPE)**: After you upgrade, tracking profiles that were previously deployed are upgraded; however, their corresponding interceptor configurations are not upgraded.</span></span> <span data-ttu-id="32262-269">攔截到的任何新 BAM 訊息可能仍然會有 BizTalk Server 2013 R2/2013 參考。</span><span class="sxs-lookup"><span data-stu-id="32262-269">Any new intercepted BAM messages may still have the BizTalk Server 2013 R2/2013 references.</span></span> <span data-ttu-id="32262-270">若要升級對應的攔截器設定，請使用追蹤設定檔編輯器來擷取活動的設定檔，然後重新套用設定檔。</span><span class="sxs-lookup"><span data-stu-id="32262-270">To upgrade the corresponding interceptor configurations, use the Tracking Profile Editor to retrieve the profile for the activity, and then reapply the profile.</span></span>

- <span data-ttu-id="32262-271">**即時資料活頁簿**：如果您在 BizTalk Server 2013 R2/2013 中使用 BAM，則升級之後，就必須手動重新產生即時資料活頁簿。</span><span class="sxs-lookup"><span data-stu-id="32262-271">**LiveData Workbook**: If you are using BAM in BizTalk Server 2013 R2/2013, after the upgrade, you must manually regenerate the LiveData Workbook.</span></span> <span data-ttu-id="32262-272">若要重新產生即時資料活頁簿：</span><span class="sxs-lookup"><span data-stu-id="32262-272">To regenerate the LiveData Workbook:</span></span>

  1. <span data-ttu-id="32262-273">執行下列命令，擷取 BAM 定義：</span><span class="sxs-lookup"><span data-stu-id="32262-273">Retrieve the BAM Definition by running the following command:</span></span>  
     `BM get-defxml MyDef.xml`
  2. <span data-ttu-id="32262-274">開啟 Microsoft Office Excel，再選取 BAM 增益集，重新建立樞紐分析表。匯入步驟 (1) 中建立的 *MyDef.xml* 檔案，然後重新建立樞紐分析表。</span><span class="sxs-lookup"><span data-stu-id="32262-274">Re-create the PivotTable reports by opening Microsoft Office Excel, and then selecting the BAM Add-ins. Import the *MyDef.xml* file created in step (1), and recreate the PivotTable reports.</span></span> <span data-ttu-id="32262-275">將新的 BAM 活頁簿儲存為 *MyNewBook.xls*。</span><span class="sxs-lookup"><span data-stu-id="32262-275">Save the new BAM Workbook as *MyNewBook.xls*.</span></span>
  3. <span data-ttu-id="32262-276">在 `<BAMDefinition>\<Extension>\<OWC>\<PivotTableView>\<PivotTable>\<PivotView>\<Label>` 路徑的 `<Caption>` 下，於 *MyDef.xml* 中尋找樞紐分析表的名稱。</span><span class="sxs-lookup"><span data-stu-id="32262-276">Rename the PivotTable reports by finding the PivotTable names in *MyDef.xml* under `<Caption>` in the  `<BAMDefinition>\<Extension>\<OWC>\<PivotTableView>\<PivotTable>\<PivotView>\<Label>` path.</span></span> <span data-ttu-id="32262-277">使用這些名稱重新命名 *MyNewBook.xls* 中的樞紐分析表。</span><span class="sxs-lookup"><span data-stu-id="32262-277">Use these names to rename your PivotTable reports in *MyNewBook.xls*.</span></span>
  4. <span data-ttu-id="32262-278">執行下列命令，重新產生即時資料活頁簿：</span><span class="sxs-lookup"><span data-stu-id="32262-278">Regenerate the LiveData Workbook by running the following command:</span></span>  
     `BM regenerate-livedataworkbook MyNewBook.xls`

     > [!NOTE]
     > <span data-ttu-id="32262-279">重新產生的即時資料活頁簿不會重新建立原始即時資料活頁簿中的 Excel 成品 (例如，圖表)。</span><span class="sxs-lookup"><span data-stu-id="32262-279">Regenerated LiveData Workbooks do not recreate the Excel artifacts (for example, charts) in the original LiveData Workbook.</span></span> <span data-ttu-id="32262-280">手動重新建立成品。</span><span class="sxs-lookup"><span data-stu-id="32262-280">Manually recreate the artifacts.</span></span>


### <a name="enterprise-single-sign-on-esso"></a><span data-ttu-id="32262-281">企業單一登入 (ESSO)</span><span class="sxs-lookup"><span data-stu-id="32262-281">Enterprise Single Sign-On (ESSO)</span></span>

|                            <span data-ttu-id="32262-282">狀況</span><span class="sxs-lookup"><span data-stu-id="32262-282">Scenario</span></span>                            |                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="32262-283">其他資訊</span><span class="sxs-lookup"><span data-stu-id="32262-283">More info</span></span>                                                                                                                                                                                                                                                                                                                                          |
|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="32262-284">從舊版企業單一登入升級</span><span class="sxs-lookup"><span data-stu-id="32262-284">Upgrading from an earlier version of Enterprise Single Sign-on</span></span> | <span data-ttu-id="32262-285">BizTalk Server 包含更新版企業單一登入 (ESSO)。</span><span class="sxs-lookup"><span data-stu-id="32262-285">BizTalk Server includes an updated version of Enterprise Single Sign-On (ESSO).</span></span> <span data-ttu-id="32262-286">如果您在具有舊版 BizTalk 的電腦上安裝此版本，則安裝期間會自動更新 ESSO。</span><span class="sxs-lookup"><span data-stu-id="32262-286">If you are installing this release on a computer with an earlier version of BizTalk, ESSO is automatically updated during setup.</span></span> <span data-ttu-id="32262-287">建議您先執行下列步驟，再進行升級：</span><span class="sxs-lookup"><span data-stu-id="32262-287">We recommend that you perform the following steps before upgrading:</span></span> <br/><br/> <span data-ttu-id="32262-288">1.確認已將目前版本的單一登入資料庫 (SSODB) 備份至安全的位置。</span><span class="sxs-lookup"><span data-stu-id="32262-288">1. Verify that a current version of the Single Sign-On database (SSODB) is backed up to a secure location.</span></span> <br/><span data-ttu-id="32262-289">2.確認已將目前的主要密碼金鑰備份至安全的位置。</span><span class="sxs-lookup"><span data-stu-id="32262-289">2. Verify that the current master secret key is backed up to a secure location.</span></span><br/><span data-ttu-id="32262-290">3.知道主要密碼的密碼。</span><span class="sxs-lookup"><span data-stu-id="32262-290">3. Know the password to the master secret.</span></span><br/><br/><span data-ttu-id="32262-291">將 BizTalk 群組中的所有伺服器都升級至相同版本。</span><span class="sxs-lookup"><span data-stu-id="32262-291">Upgrade all the servers in a BizTalk group to the same release.</span></span> <span data-ttu-id="32262-292">此需求也適用於獨立的主要密碼伺服器。</span><span class="sxs-lookup"><span data-stu-id="32262-292">This requirement also applies to a standalone master secret server.</span></span> |
|  <span data-ttu-id="32262-293">使用企業單一登入獨立安裝程式進行升級</span><span class="sxs-lookup"><span data-stu-id="32262-293">Upgrade using the Enterprise Single Sign-On standalone setup</span></span>  |             <span data-ttu-id="32262-294">使用下列步驟，在已安裝獨立企業單一登入的電腦 (如專用的主要密碼伺服器) 上執行升級。</span><span class="sxs-lookup"><span data-stu-id="32262-294">Use the following steps to perform an upgrade on computers that have a standalone Enterprise Single Sign on installation, such as a dedicated master secret server.</span></span><br/><br/><span data-ttu-id="32262-295">1.確認已將目前的主要密碼金鑰備份至安全的位置。</span><span class="sxs-lookup"><span data-stu-id="32262-295">1. Verify that the current master secret key is backed up to a secure location.</span></span><br/><span data-ttu-id="32262-296">2.確認已將目前版本的 SSODB 備份至安全的位置。</span><span class="sxs-lookup"><span data-stu-id="32262-296">2. Verify that a current version of the SSODB is backed up to a secure location.</span></span><br/><span data-ttu-id="32262-297">3.從 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 安裝媒體中執行 ESSO **Setup.exe**。</span><span class="sxs-lookup"><span data-stu-id="32262-297">3. Run the ESSO **Setup.exe** from the [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] installation media.</span></span> <span data-ttu-id="32262-298">預設的安裝資料夾是 `\Platform\SSO`。</span><span class="sxs-lookup"><span data-stu-id="32262-298">The default installation folder is `\Platform\SSO`.</span></span><br/><span data-ttu-id="32262-299">4.在 [自動執行] 對話方塊中，選取 [Microsoft 企業單一登入]。</span><span class="sxs-lookup"><span data-stu-id="32262-299">4. In the **Autorun** dialog box, select **Microsoft Enterprise Single Sign-On**.</span></span><br/><span data-ttu-id="32262-300">5.在 [摘要] 對話方塊中，選取 [升級]。</span><span class="sxs-lookup"><span data-stu-id="32262-300">5. In the Summary dialog box, select **Upgrade**.</span></span>              |

### <a name="multicomputer-environment"></a><span data-ttu-id="32262-301">多重電腦環境</span><span class="sxs-lookup"><span data-stu-id="32262-301">Multicomputer environment</span></span>
<span data-ttu-id="32262-302">在多重電腦環境中，升級 SSO 主要密碼伺服器電腦。</span><span class="sxs-lookup"><span data-stu-id="32262-302">In a multicomputer environment, upgrade the SSO master secret server computer.</span></span> <span data-ttu-id="32262-303">接著，升級其他 BizTalk Server 電腦。</span><span class="sxs-lookup"><span data-stu-id="32262-303">Then, upgrade the other BizTalk Server computers.</span></span> <span data-ttu-id="32262-304">不支援同時升級同一群組中的 BizTalk 電腦。</span><span class="sxs-lookup"><span data-stu-id="32262-304">Simultaneously upgrading the BizTalk computers in a group is not supported.</span></span> <span data-ttu-id="32262-305">依照下列順序一次升級一部電腦：</span><span class="sxs-lookup"><span data-stu-id="32262-305">Upgrade one computer at a time in the following order:</span></span>

1. <span data-ttu-id="32262-306">單一登入主要密碼伺服器</span><span class="sxs-lookup"><span data-stu-id="32262-306">Single Sign-On master secret server</span></span>
2. <span data-ttu-id="32262-307">執行 BizTalk Server 的執行階段電腦</span><span class="sxs-lookup"><span data-stu-id="32262-307">Run-time computers that are running BizTalk Server</span></span>
3. <span data-ttu-id="32262-308">管理工具與監控電腦</span><span class="sxs-lookup"><span data-stu-id="32262-308">Administration tools and monitoring computer</span></span>
4. <span data-ttu-id="32262-309">開發電腦和其餘執行 BizTalk Server 的任何電腦</span><span class="sxs-lookup"><span data-stu-id="32262-309">Development and any other remaining computers that are running BizTalk Server</span></span>

<span data-ttu-id="32262-310">**其他**</span><span class="sxs-lookup"><span data-stu-id="32262-310">**Additional**</span></span>  
<span data-ttu-id="32262-311">設定儀表板可讓您大幅調整 BizTalk Server 設定來達到最佳效能。</span><span class="sxs-lookup"><span data-stu-id="32262-311">Using the Settings Dashboard, you can extensively tweak BizTalk Server settings for performance optimization.</span></span> <span data-ttu-id="32262-312">您也可以修改 BizTalk 群組、BizTalk 主控件與 BizTalk 主控件執行個體的設定。</span><span class="sxs-lookup"><span data-stu-id="32262-312">You can also modify settings for the BizTalk Group, BizTalk Host, and BizTalk Host Instance.</span></span> <span data-ttu-id="32262-313">請參閱[針對 BizTalk Server 效能調整使用設定儀表板](../core/using-settings-dashboard-for-biztalk-server-performance-tuning.md)。</span><span class="sxs-lookup"><span data-stu-id="32262-313">See [Using Settings Dashboard for BizTalk Server Performance Tuning](../core/using-settings-dashboard-for-biztalk-server-performance-tuning.md).</span></span>

### <a name="general-information"></a><span data-ttu-id="32262-314">一般資訊</span><span class="sxs-lookup"><span data-stu-id="32262-314">General information</span></span>

- <span data-ttu-id="32262-315">**帳戶名稱**：您應該盡量使用預設帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="32262-315">**Account names**: Use the default account names whenever possible.</span></span> <span data-ttu-id="32262-316">BizTalk Server 安裝程式會自動將已安裝的元件設定成使用預設帳戶。</span><span class="sxs-lookup"><span data-stu-id="32262-316">The BizTalk Server Setup program automatically configures installed components to use the default accounts.</span></span> <span data-ttu-id="32262-317">如果在 Active Directory 樹系中有多個 BizTalk Server 群組，請變更帳戶名稱以避免發生衝突。</span><span class="sxs-lookup"><span data-stu-id="32262-317">If there are multiple BizTalk Server groups in an Active Directory forest, change the account names to avoid conflicts.</span></span> <span data-ttu-id="32262-318">針對服務帳戶和 Windows 群組，BizTalk Server 只支援 `<NetBIOS domain name>\<user>` 名稱格式。</span><span class="sxs-lookup"><span data-stu-id="32262-318">BizTalk Server supports only `<NetBIOS domain name>\<user>` name formats for service accounts and Windows groups.</span></span>

- <span data-ttu-id="32262-319">**帳戶名稱與 BAM 管理 Web 服務**：BizTalk Server 不支援使用內建帳戶或無密碼的帳戶作為 BAM 管理 Web 服務使用者。</span><span class="sxs-lookup"><span data-stu-id="32262-319">**Account names with BAM Management Web Service**: BizTalk Server does not support built-in accounts or accounts without passwords for the BAM Management Web Service User.</span></span> 

  <span data-ttu-id="32262-320">使用這類帳戶來設定 BizTalk Server 或許看似成功，但 BAM 管理 Web 服務會失敗。</span><span class="sxs-lookup"><span data-stu-id="32262-320">Configuring BizTalk Server with such accounts may appear to succeed, but the BAM Management Web Service fails.</span></span> 

  <span data-ttu-id="32262-321">支援在 BAM 應用程式集區使用這類帳戶。</span><span class="sxs-lookup"><span data-stu-id="32262-321">Use of such accounts for the BAM Application pool is supported.</span></span>

- <span data-ttu-id="32262-322">64 位元作業系統不支援 **BizTalk 組件檢視工具**。</span><span class="sxs-lookup"><span data-stu-id="32262-322">**BizTalk Assembly Viewer** is not supported on a 64-bit operating system.</span></span>

- <span data-ttu-id="32262-323">**安裝與解除安裝**：當您解除安裝 BizTalk Server 時，請手動刪除 BizTalk Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="32262-323">**Install and Uninstall**: When you uninstall BizTalk Server, manually delete the BizTalk Server databases.</span></span> <span data-ttu-id="32262-324">如果以開發人員或評估員身分來安裝 BizTalk Server，請考慮安裝在虛擬機器上。</span><span class="sxs-lookup"><span data-stu-id="32262-324">If you are installing BizTalk Server as a developer or evaluator, consider installing on a virtual machine.</span></span> <span data-ttu-id="32262-325">如此一來，當您需要重新安裝時，就可以輕鬆地回復至預設的檢查點，而不需要經過解除安裝程序。</span><span class="sxs-lookup"><span data-stu-id="32262-325">This way, if you have to reinstall, you can easily roll back to a preset checkpoint without having to go through the uninstall process.</span></span>

- <span data-ttu-id="32262-326">**32 位元和 64 位元電腦**：在 32 位元 Windows 或 64 位元 Windows 上安裝 BizTalk Server 時有幾項差異。</span><span class="sxs-lookup"><span data-stu-id="32262-326">**32-bit and 64-bit computers**: There are few differences when installing BizTalk Server on 32-bit Windows or 64-bit Windows.</span></span> <span data-ttu-id="32262-327">本文件同時包含 32 位元與 64 位元的安裝。</span><span class="sxs-lookup"><span data-stu-id="32262-327">This document covers both 32-bit and 64-bit installations.</span></span> <span data-ttu-id="32262-328">它們之間的差異會被註明。</span><span class="sxs-lookup"><span data-stu-id="32262-328">Differences between them are noted.</span></span>

- <span data-ttu-id="32262-329">**工作群組**：支援在工作群組環境的單一電腦上安裝和設定 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="32262-329">**Workgroups**: Installing and configuring BizTalk Server in a workgroup environment on a single computer is supported.</span></span> <span data-ttu-id="32262-330">在此情況下，SQL Server 與 BizTalk Server 的功能和元件都是在同一部電腦上安裝和設定。</span><span class="sxs-lookup"><span data-stu-id="32262-330">In this scenario, both SQL Server and BizTalk Server features and components are installed and configured on the same computer.</span></span>

- <span data-ttu-id="32262-331">**終端機伺服器**：不支援使用在應用程式模式下執行的終端機伺服器來安裝 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="32262-331">**Terminal Server**: Installing BizTalk Server using Terminal Server running in application mode is not supported.</span></span> <span data-ttu-id="32262-332">請參閱 [KB 832027](https://support.microsoft.com/kb/832027)。</span><span class="sxs-lookup"><span data-stu-id="32262-332">See [KB 832027](https://support.microsoft.com/kb/832027).</span></span>

- <span data-ttu-id="32262-333">不支援**無訊息升級**。</span><span class="sxs-lookup"><span data-stu-id="32262-333">**Silent Upgrade** is not supported.</span></span>

- <span data-ttu-id="32262-334">**不支援的應用程式**：BizTalk Server 不支援以不支援的 API 建置的自訂應程式，例如 PAM API、預存程序或直接資料庫存取。</span><span class="sxs-lookup"><span data-stu-id="32262-334">**Unsupported Applications**: BizTalk Server does not support custom applications built on unsupported APIs such as PAM APIs, stored procedures, or direct database access.</span></span> <span data-ttu-id="32262-335">在升級生產環境之前，請至少執行一次測試升級。</span><span class="sxs-lookup"><span data-stu-id="32262-335">Run at least one test upgrade before you upgrade your production environment.</span></span>

- <span data-ttu-id="32262-336">**SQL Server 執行個體**：您最好在升級平台之前先升級任何的 SQL Server 執行個體。</span><span class="sxs-lookup"><span data-stu-id="32262-336">**SQL Server instances**: It’s a good practice to upgrade any SQL Server instances before you upgrade the platform.</span></span>

## <a name="prepare-your-computer-for-upgrade"></a><span data-ttu-id="32262-337">備妥電腦準備升級</span><span class="sxs-lookup"><span data-stu-id="32262-337">Prepare your computer for upgrade</span></span>

|                 <span data-ttu-id="32262-338">工作</span><span class="sxs-lookup"><span data-stu-id="32262-338">Task</span></span>                  |                                                                                                                                                                                                                                        <span data-ttu-id="32262-339">資訊</span><span class="sxs-lookup"><span data-stu-id="32262-339">Info</span></span>                                                                                                                                                                                                                                         |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   <span data-ttu-id="32262-340">安裝 Windows 重大更新</span><span class="sxs-lookup"><span data-stu-id="32262-340">Install Critical Windows Updates</span></span>    |                                                                                                                                                                                                <span data-ttu-id="32262-341">從 [程式] 功能表中選取 [Windows Update]。</span><span class="sxs-lookup"><span data-stu-id="32262-341">Select Windows Update from the Programs menu.</span></span> <span data-ttu-id="32262-342">您可能需要重新啟動電腦。</span><span class="sxs-lookup"><span data-stu-id="32262-342">You may need to restart your computer.</span></span>                                                                                                                                                                                                 |
|      <span data-ttu-id="32262-343">儲存 BAM 警示定義</span><span class="sxs-lookup"><span data-stu-id="32262-343">Save BAM Alert Definitions</span></span>       |                                    <span data-ttu-id="32262-344">只有目前使用現有的 BAM 警示定義與 SQL Server 通知服務時才適用。</span><span class="sxs-lookup"><span data-stu-id="32262-344">Applies only if you currently use existing BAM Alert definitions with SQL Server Notification Services.</span></span> <span data-ttu-id="32262-345">使用 BM.exe 建立一個定義檔案並取消設定 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 設定中的 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-345">Create a definition file using BM.exe and unconfigure BAM Alerts in the [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 Configuration.</span></span><br/><br/><span data-ttu-id="32262-346">**在升級之前** (在本主題中) 列出特定的步驟。</span><span class="sxs-lookup"><span data-stu-id="32262-346">**Before the upgrade** (in this topic) lists the specific steps.</span></span><br/><br/><span data-ttu-id="32262-347">否則在升級之後重新建立 BAM 警示定義。</span><span class="sxs-lookup"><span data-stu-id="32262-347">Otherwise, recreate the BAM Alert definitions after you upgrade.</span></span>                                    |
|          <span data-ttu-id="32262-348">升級 SQL Server</span><span class="sxs-lookup"><span data-stu-id="32262-348">Upgrade SQL Server</span></span>           |                                         <span data-ttu-id="32262-349">升級至支援的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="32262-349">Upgrade to a supported SQL Server version.</span></span> <span data-ttu-id="32262-350">請參閱：</span><span class="sxs-lookup"><span data-stu-id="32262-350">See:</span></span><br/><br/>[<span data-ttu-id="32262-351">BizTalk Server 2016 的硬體和軟體需求</span><span class="sxs-lookup"><span data-stu-id="32262-351">Hardware and Software Requirements for BizTalk Server 2016</span></span>](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)<br/>[<span data-ttu-id="32262-352">升級到 SQL Server 2016</span><span class="sxs-lookup"><span data-stu-id="32262-352">Upgrade to SQL Server 2016</span></span>](https://msdn.microsoft.com/library/bb677622.aspx)<br/><span data-ttu-id="32262-353">[升級到 SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="32262-353">[Upgrade to SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx)</span></span>                                          |
|    <span data-ttu-id="32262-354">升級 SQL Server 用戶端工具</span><span class="sxs-lookup"><span data-stu-id="32262-354">Upgrade SQL Server Client Tools</span></span>    |                                                                                                                                                <span data-ttu-id="32262-355">在多重電腦環境中，管理工具可能被安裝在另一部電腦上。</span><span class="sxs-lookup"><span data-stu-id="32262-355">In a multicomputer environment, the Administration tools may be installed on a separate computer.</span></span> <span data-ttu-id="32262-356">升級 SQL Server 管理用戶端工具，包括管理工具。</span><span class="sxs-lookup"><span data-stu-id="32262-356">Upgrade the SQL Server Administration Client Tools, including the Management Tools.</span></span>                                                                                                                                                |
|         <span data-ttu-id="32262-357">安裝 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="32262-357">Install Visual Studio</span></span>         |                         <span data-ttu-id="32262-358">請參閱 [BizTalk Server 2016 的硬體和軟體需求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)取得支援的版本。</span><span class="sxs-lookup"><span data-stu-id="32262-358">See [Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) for the supported versions.</span></span> <span data-ttu-id="32262-359">不同的 Visual Studio 版本可以並存安裝。</span><span class="sxs-lookup"><span data-stu-id="32262-359">Different Visual Studio versions can be installed side-by-side.</span></span> <span data-ttu-id="32262-360">請參閱 [Visual Studio 2015](https://msdn.microsoft.com/library/ms246609(v=vs.140).aspx) 和 [Visual Studio 2013](https://msdn.microsoft.com/library/ms246609(v=vs.120).aspx)。</span><span class="sxs-lookup"><span data-stu-id="32262-360">See [Visual Studio 2015](https://msdn.microsoft.com/library/ms246609(v=vs.140).aspx) and [Visual Studio 2013](https://msdn.microsoft.com/library/ms246609(v=vs.120).aspx).</span></span>                         |
|            <span data-ttu-id="32262-361">安裝 Office</span><span class="sxs-lookup"><span data-stu-id="32262-361">Install Office</span></span>             |                                     <span data-ttu-id="32262-362">請參閱[在同一部電腦上安裝和使用不同版本的 Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF)。</span><span class="sxs-lookup"><span data-stu-id="32262-362">See [Install and use different versions of Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF) on the same computer.</span></span> <span data-ttu-id="32262-363">[BizTalk Server 2016 的硬體和軟體需求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)會列出支援的 Office 版本。</span><span class="sxs-lookup"><span data-stu-id="32262-363">[Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) lists the supported Office versions.</span></span>                                     |
| <span data-ttu-id="32262-364">停止 BizTalk 和 Windows 服務</span><span class="sxs-lookup"><span data-stu-id="32262-364">Stop the BizTalk and Windows Services</span></span> |                                                                                                      <span data-ttu-id="32262-365">- BizTalk 服務 BizTalk 群組：*<應用程式名稱>*</span><span class="sxs-lookup"><span data-stu-id="32262-365">- BizTalk Service BizTalk Group:  *<Application_Name>*</span></span><br/><span data-ttu-id="32262-366">- BizTalk 基底 EDI 服務</span><span class="sxs-lookup"><span data-stu-id="32262-366">- BizTalk Base EDI Service</span></span><br/><span data-ttu-id="32262-367">- 規則引擎更新服務</span><span class="sxs-lookup"><span data-stu-id="32262-367">- Rule Engine Update Service</span></span><br/><span data-ttu-id="32262-368">- World Wide Web Publishing Service</span><span class="sxs-lookup"><span data-stu-id="32262-368">- World Wide Web Publishing Service</span></span><br/><br/><span data-ttu-id="32262-369">**注意**</span><span class="sxs-lookup"><span data-stu-id="32262-369">**NOTE**</span></span><br/><span data-ttu-id="32262-370">如果您已安裝任何 BizTalk Server 加速器，請停止 HL7 記錄服務。</span><span class="sxs-lookup"><span data-stu-id="32262-370">If you have any BizTalk Server accelerators installed, stop the HL7 Logging Service.</span></span>                                                                                                      |
|         <span data-ttu-id="32262-371">備份資料庫</span><span class="sxs-lookup"><span data-stu-id="32262-371">Back up the databases</span></span>         | <span data-ttu-id="32262-372">- Master</span><span class="sxs-lookup"><span data-stu-id="32262-372">- Master</span></span><br/><span data-ttu-id="32262-373">- MSDB</span><span class="sxs-lookup"><span data-stu-id="32262-373">- MSDB</span></span><br/><span data-ttu-id="32262-374">- BAMArchive</span><span class="sxs-lookup"><span data-stu-id="32262-374">- BAMArchive</span></span><br/><span data-ttu-id="32262-375">- BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="32262-375">- BAMPrimaryImport</span></span><br/><span data-ttu-id="32262-376">- BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="32262-376">- BAMStarSchema</span></span><br/><span data-ttu-id="32262-377">- BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="32262-377">- BizTalkDTADb</span></span><br/><span data-ttu-id="32262-378">- BizTalkEDIDb</span><span class="sxs-lookup"><span data-stu-id="32262-378">- BizTalkEDIDb</span></span><br/><span data-ttu-id="32262-379">- BizTalkHwsDb</span><span class="sxs-lookup"><span data-stu-id="32262-379">- BizTalkHwsDb</span></span><br/><span data-ttu-id="32262-380">- BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="32262-380">- BizTalkMgmtDb</span></span><br/><span data-ttu-id="32262-381">- BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="32262-381">- BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="32262-382">- BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="32262-382">- BizTalkRuleEngineDb</span></span><br/><span data-ttu-id="32262-383">- TPM</span><span class="sxs-lookup"><span data-stu-id="32262-383">- TPM</span></span><br/><span data-ttu-id="32262-384">- BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="32262-384">- BizTalkAnalysisDb</span></span><br/><span data-ttu-id="32262-385">- BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="32262-385">- BAMAnalysis</span></span><br/><br/><span data-ttu-id="32262-386">[SQL Server 2014：備份概觀](https://technet.microsoft.com/library/ms175477(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="32262-386">[SQL Server 2014: Backup Overview](https://technet.microsoft.com/library/ms175477(v=sql.120).aspx)</span></span><br/><span data-ttu-id="32262-387">[SQL Server 2012：備份概觀](https://technet.microsoft.com/library/ms175477(v=sql.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="32262-387">[SQL Server 2012: Backup Overview](https://technet.microsoft.com/library/ms175477(v=sql.110).aspx)</span></span> |
|  <span data-ttu-id="32262-388">設定 SQL Server Database Mail</span><span class="sxs-lookup"><span data-stu-id="32262-388">Configure SQL Server Database Mail</span></span>   |                                                                                                                      <span data-ttu-id="32262-389">只有使用 BAM 警示定義與 SQL Server 通知服務時才適用。</span><span class="sxs-lookup"><span data-stu-id="32262-389">Applies only if you use BAM Alert definitions with SQL Server Notification Services.</span></span><br/><br/><span data-ttu-id="32262-390">**在升級之前** (在本主題中) 列出特定的步驟。</span><span class="sxs-lookup"><span data-stu-id="32262-390">**Before the upgrade** (in this topic) lists the specific steps.</span></span><br/><br/><span data-ttu-id="32262-391">否則在升級之後重新建立 BAM 警示定義。</span><span class="sxs-lookup"><span data-stu-id="32262-391">Otherwise, recreate the BAM Alert definitions after you upgrade.</span></span>                                                                                                                       |

## <a name="do-the-upgrade"></a><span data-ttu-id="32262-392">執行升級作業</span><span class="sxs-lookup"><span data-stu-id="32262-392">Do the upgrade</span></span>

> [!IMPORTANT]
> <span data-ttu-id="32262-393">安裝 SQL Server 之後，安裝程式會將系統管理員權限授與您已登入的帳戶。</span><span class="sxs-lookup"><span data-stu-id="32262-393">When you installed SQL Server, setup granted your logged-on account system administrator rights.</span></span> <span data-ttu-id="32262-394">安裝 BizTalk Server 也需要系統管理員權限。</span><span class="sxs-lookup"><span data-stu-id="32262-394">System administrator rights are also required to install BizTalk Server.</span></span> <span data-ttu-id="32262-395">執行下列其中之一：</span><span class="sxs-lookup"><span data-stu-id="32262-395">Do one of the following:</span></span>
> 
> - <span data-ttu-id="32262-396">使用您在安裝 SQL Server 時所使用的相同帳戶</span><span class="sxs-lookup"><span data-stu-id="32262-396">Use the same account you used when you installed SQL Server</span></span>  
> <span data-ttu-id="32262-397">**或**</span><span class="sxs-lookup"><span data-stu-id="32262-397">**OR**</span></span>  
> - <span data-ttu-id="32262-398">確定目前的已登入帳戶具有系統管理員權限</span><span class="sxs-lookup"><span data-stu-id="32262-398">Make sure the current logged-on account has system administrator rights</span></span>

### <a name="upgrade-steps"></a><span data-ttu-id="32262-399">升級步驟</span><span class="sxs-lookup"><span data-stu-id="32262-399">Upgrade steps</span></span>

1. <span data-ttu-id="32262-400">關閉所有開啟的程式。</span><span class="sxs-lookup"><span data-stu-id="32262-400">Close any open programs.</span></span>
2. <span data-ttu-id="32262-401">從安裝媒體執行 **Setup.exe**。</span><span class="sxs-lookup"><span data-stu-id="32262-401">Run **Setup.exe** from the installation media.</span></span>
3. <span data-ttu-id="32262-402">在 [開始] 功能表中，選取 [安裝 Microsoft BizTalk Server]。</span><span class="sxs-lookup"><span data-stu-id="32262-402">In Start, select **Install Microsoft BizTalk Server**.</span></span>
4. <span data-ttu-id="32262-403">在 [客戶資訊] 輸入您的使用者名稱、組織以及產品金鑰。</span><span class="sxs-lookup"><span data-stu-id="32262-403">In **Customer Information**, enter your user name, organization, and product key.</span></span> <span data-ttu-id="32262-404">選取 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="32262-404">Select **Next**.</span></span>
5. <span data-ttu-id="32262-405">接受授權合約，然後選取 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="32262-405">Accept the license agreement, and select **Next**.</span></span>
6. <span data-ttu-id="32262-406">在客戶經驗改進計畫中輸入您的喜好設定。</span><span class="sxs-lookup"><span data-stu-id="32262-406">In Customer Experience Improvement Program, enter you preference.</span></span> <span data-ttu-id="32262-407">請參閱本主題中的**附錄 A** 以取得相關資訊。</span><span class="sxs-lookup"><span data-stu-id="32262-407">See **Appendix A** (in this topic) for more information.</span></span>
7. <span data-ttu-id="32262-408">在 [元件安裝] 檢閱可用的元件，然後選取 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="32262-408">In **Component Installation**, review the available components, and select **Next**.</span></span>
8. <span data-ttu-id="32262-409">如果電腦缺少必要元件，安裝程式可以安裝必要的可轉散發套件。</span><span class="sxs-lookup"><span data-stu-id="32262-409">If your computer is missing a prerequisite, Setup can install the redistributable prerequisites.</span></span> <span data-ttu-id="32262-410">您可以：</span><span class="sxs-lookup"><span data-stu-id="32262-410">You can either:</span></span>

    - <span data-ttu-id="32262-411">選取 [從 Web 自動安裝必要的可轉散發套件]</span><span class="sxs-lookup"><span data-stu-id="32262-411">Select Automatically install the redistributable prerequisites from the web</span></span>  

      <span data-ttu-id="32262-412">OR</span><span class="sxs-lookup"><span data-stu-id="32262-412">OR</span></span>  

    - <span data-ttu-id="32262-413">如果您已下載封包檔，則可以選取 [從封包檔自動安裝必要的可轉散發套件]。</span><span class="sxs-lookup"><span data-stu-id="32262-413">Select Automatically install the redistributable prerequisites from a CAB file if you downloaded the CAB file.</span></span> <span data-ttu-id="32262-414">瀏覽至封包檔位置，然後選取該檔案。</span><span class="sxs-lookup"><span data-stu-id="32262-414">Browse to the location of the CAB file and select it.</span></span>

9. <span data-ttu-id="32262-415">在 [摘要] 檢視可升級的元件。</span><span class="sxs-lookup"><span data-stu-id="32262-415">In **Summary**, review the upgradable components.</span></span>
10. <span data-ttu-id="32262-416">選取 [升級] 啟動作業。</span><span class="sxs-lookup"><span data-stu-id="32262-416">Select **Upgrade** to start.</span></span>
11. <span data-ttu-id="32262-417">或者：選取 [在我檢查更新時使用 Microsoft Update (建議使用)]。</span><span class="sxs-lookup"><span data-stu-id="32262-417">Optional: Select **Use the Microsoft Update when I check for updates (recommended)**.</span></span>
12. <span data-ttu-id="32262-418">在 [升級已完成] 中清除 [啟動 BizTalk Server 組態] 核取方塊，然後選取 [完成]。</span><span class="sxs-lookup"><span data-stu-id="32262-418">In **Upgrade Completed**, clear the L**aunch BizTalk Server Configuration** check box, and then select **Finish**.</span></span>

<span data-ttu-id="32262-419">**其他**</span><span class="sxs-lookup"><span data-stu-id="32262-419">**ADDITIONAL**</span></span>  
<span data-ttu-id="32262-420">在 BizTalk Server 升級過程中會經常發生，且過程中發生錯誤也屢見不鮮。</span><span class="sxs-lookup"><span data-stu-id="32262-420">A lot happens during an upgrade of BizTalk Server, and it’s not uncommon to run into an error during the process.</span></span> <span data-ttu-id="32262-421">不過，只要事前有所準備，很容易解決大部分錯誤。</span><span class="sxs-lookup"><span data-stu-id="32262-421">However, most errors are easily remedied if you’re prepared.</span></span> <span data-ttu-id="32262-422">建議您閱讀本主題的**附錄 B**，以取得如何避免升級錯誤的秘訣，並了解發生錯誤時如何因應。</span><span class="sxs-lookup"><span data-stu-id="32262-422">We recommend reading the **Appendix B** (in this topic) for tips on how to avoid upgrade errors, and what to do if one occurs.</span></span>

<span data-ttu-id="32262-423">升級程序只會升級舊版 BizTalk Server 中的功能。</span><span class="sxs-lookup"><span data-stu-id="32262-423">The upgrade process only upgrades features that were part of your previous version of BizTalk Server.</span></span> <span data-ttu-id="32262-424">在升級期間不會安裝新的功能。</span><span class="sxs-lookup"><span data-stu-id="32262-424">New features are not installed during an upgrade.</span></span> <span data-ttu-id="32262-425">若要安裝這些功能，請在升級之後重新執行安裝程式，選擇 [修改]，然後選取您要安裝的功能。</span><span class="sxs-lookup"><span data-stu-id="32262-425">To install these features, rerun Setup after the upgrade, choose **Modify**, and select the features you want to install.</span></span> <span data-ttu-id="32262-426">安裝後，請使用 **BizTalk Server 組態管理員**來設定它們。</span><span class="sxs-lookup"><span data-stu-id="32262-426">Once installed, configure them using the **BizTalk Server Configuration Manager**.</span></span>

<span data-ttu-id="32262-427">若要確認升級是否成功，請開啟 [程式和功能] 並尋找 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="32262-427">To verify if the upgrade is successful, open **Programs and Features** and look for [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="32262-428">如果有列出，即表示安裝成功。</span><span class="sxs-lookup"><span data-stu-id="32262-428">If it’s listed, setup succeeded.</span></span>

## <a name="post-upgrade"></a><span data-ttu-id="32262-429">升級之後</span><span class="sxs-lookup"><span data-stu-id="32262-429">Post upgrade</span></span>
<span data-ttu-id="32262-430">您無法回復到 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013。</span><span class="sxs-lookup"><span data-stu-id="32262-430">You cannot roll back to [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013.</span></span>

- <span data-ttu-id="32262-431">**如已建立 BAM 警示定義 XML 檔**︰在 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 設定中，設定 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-431">**If you created a BAM Alerts definition XML file**: In [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] Configuration, configure BAM Alerts.</span></span> <span data-ttu-id="32262-432">然後部署已儲存的定義。</span><span class="sxs-lookup"><span data-stu-id="32262-432">Then, deploy the saved Definitions.</span></span>

    <span data-ttu-id="32262-433">**在升級之前** (在本主題中) 列出特定的步驟。</span><span class="sxs-lookup"><span data-stu-id="32262-433">**Before the upgrade** (in this topic) lists the specific steps.</span></span> <span data-ttu-id="32262-434">否則在升級之後重新建立 BAM 警示定義。</span><span class="sxs-lookup"><span data-stu-id="32262-434">Otherwise, recreate the BAM Alert definitions after you upgrade.</span></span>

- <span data-ttu-id="32262-435">**安裝 MQSAgent**：如果 MQsagent.dll 檔案安裝在遠端 WebSphere MQ Server 上，請將來自 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的新版 MQ 代理程式安裝在遠端的 WebSphere MQ Server 上。</span><span class="sxs-lookup"><span data-stu-id="32262-435">**Install MQSAgent**: If the MQSAgent.dll file is installed on a remote WebSphere MQ Server, install a new version of the MQ Agent from [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] on the remote WebSphere MQ Server.</span></span>

- <span data-ttu-id="32262-436">**啟動 MSMQ**：如果您使用 MSMQ 配接器，請啟動訊息佇列服務。</span><span class="sxs-lookup"><span data-stu-id="32262-436">**Start MSMQ**: If you use the MSMQ adapter, start the Message Queuing service.</span></span>

- <span data-ttu-id="32262-437">**自訂 EXE 及 BRE**：如果您有自訂的受管理可執行檔，而且此檔案參考 BizTalk Server 2010 中的商務規則引擎組件，請將下列項目加入應用程式設定檔案，以在 .NET Framework 2.0 中執行此程序。</span><span class="sxs-lookup"><span data-stu-id="32262-437">**Custom EXE and BRE**: If you have a custom managed executable file that references Business Rule Engine assembly in BizTalk Server 2010, add the following to the application configuration file to run the process in the .NET Framework 2.0.</span></span>

    ```
    <?xml version="1.0" encoding="Windows-1252"?>
    <configuration> 
     <startup>
      <supportedRuntime version="v2.0.50727" />
     </startup>   
    </configuration>
    ```

- <span data-ttu-id="32262-438">**SQL Agent 作業**：重新設定下列 SQL Server Agent 作業：</span><span class="sxs-lookup"><span data-stu-id="32262-438">**SQL Agent job**: Reconfigure the following SQL Server Agent jobs:</span></span>

    -   <span data-ttu-id="32262-439">DTA 清除與封存 (BizTalkDTADb)：請參閱[如何設定 DTA 的清除與封存作業](../core/how-to-configure-the-dta-purge-and-archive-job.md)</span><span class="sxs-lookup"><span data-stu-id="32262-439">DTA Purge and Archive (BizTalkDTADb): See [How to Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md)</span></span>
    -   <span data-ttu-id="32262-440">備份 BizTalk Server (BizTalkMgmtDb)：請參閱 [如何設定備份 BizTalk Server 作業](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="32262-440">Backup BizTalk Server (BizTalkMgmtDb): See [How to Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>

- <span data-ttu-id="32262-441">**重新啟動應用程式**：重新啟動已升級的所有部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="32262-441">**Restart applications**: Restart all deployed applications that are upgraded.</span></span>

- <span data-ttu-id="32262-442">**BAM 入口網站錯誤**︰當您開啟 BAM 入口網站時，您可能會收到下列錯誤訊息︰</span><span class="sxs-lookup"><span data-stu-id="32262-442">**BAM Portal error**: When you open the BAM portal, you may receive the following error message:</span></span> 

    `The server encountered a critical failure while trying to access the list of Views. The Business Management Web Service requires Administrator's attention.` 

    <span data-ttu-id="32262-443">如果 BAM 入口網站是設定在執行 .NET Framework 2.0 的應用程式所使用的網站上，則可能會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="32262-443">This error can occur if the BAM portal is configured on a website used by applications that are running .NET Framework 2.0.</span></span> <span data-ttu-id="32262-444">在此情況下，請將 BAM 入口網站架設在新的網站上。</span><span class="sxs-lookup"><span data-stu-id="32262-444">In this scenario, host the BAM portal on a new website.</span></span> <span data-ttu-id="32262-445">若要加入網站，請參閱 [Create a Web Site (IIS 7)](http://go.microsoft.com/fwlink/p/?LinkID=196470) (建立網站 (IIS 7))。</span><span class="sxs-lookup"><span data-stu-id="32262-445">To add a website, see [Create a Web Site](http://go.microsoft.com/fwlink/p/?LinkID=196470).</span></span> <span data-ttu-id="32262-446">建立網站之後，重新設定 BAM 入口網站：</span><span class="sxs-lookup"><span data-stu-id="32262-446">After creating the website, reconfigure the BAM Portal:</span></span>

    1. <span data-ttu-id="32262-447">開啟 [BizTalk Server 組態]。</span><span class="sxs-lookup"><span data-stu-id="32262-447">Open **BizTalk Server Configuration**.</span></span>
    2. <span data-ttu-id="32262-448">選取 [取消設定功能]。</span><span class="sxs-lookup"><span data-stu-id="32262-448">Select **Unconfigure Features**.</span></span> <span data-ttu-id="32262-449">在 [取消設定功能] 中選取 [BAM 入口網站] 核取方塊，然後選取 [確定]。</span><span class="sxs-lookup"><span data-stu-id="32262-449">In **Unconfigure Features**, select the **BAM Portal** check box, and select **OK**.</span></span>
    3. <span data-ttu-id="32262-450">從 [BAM 入口網站] 清單中選取新的網站，以重新設定 BAM 入口網站。</span><span class="sxs-lookup"><span data-stu-id="32262-450">Reconfigure the BAM portal by selecting the new website from the **BAM Portal Web Site** list.</span></span>

- <span data-ttu-id="32262-451">**BizTalk 2016 Accelerator for SWIFT**：BizTalk Server 升級程序不會更新編輯過的 *BREDeployment.exe.config* 檔案。</span><span class="sxs-lookup"><span data-stu-id="32262-451">**BizTalk 2016 Accelerator for SWIFT**: The BizTalk Server upgrade process does not update an edited *BREDeployment.exe.config* file.</span></span> <span data-ttu-id="32262-452">在 `\Program Files\Microsoft BizTalk 2016 Accelerator for SWIFT\SDK\Tools` 資料夾的 *BREDeployment.exe.config* 檔案中手動變更路徑。</span><span class="sxs-lookup"><span data-stu-id="32262-452">Manually change the paths in the *BREDeployment.exe.config* file located in the `\Program Files\Microsoft BizTalk 2016 Accelerator for SWIFT\SDK\Tools` folder.</span></span>

    <span data-ttu-id="32262-453">此外，A4SWIFT Web 服務和 Message Pack 設定遺失。</span><span class="sxs-lookup"><span data-stu-id="32262-453">Also, the A4SWIFT Web Services and Message Pack configuration is lost.</span></span> <span data-ttu-id="32262-454">BizTalk Server 升級之後重新設定這些項目。</span><span class="sxs-lookup"><span data-stu-id="32262-454">Reconfigure these after BizTalk Server is upgraded.</span></span>

## <a name="appendix-a-customer-experience-improvement-program"></a><span data-ttu-id="32262-455">附錄 A：客戶經驗改進計畫</span><span class="sxs-lookup"><span data-stu-id="32262-455">Appendix A: Customer experience improvement Program</span></span>
<span data-ttu-id="32262-456">做為在 BizTalk Server 中的客戶經驗改進計畫的一部分，您可以針對 BizTalk Server 的功能使用提供實用的意見，並反應給 Microsoft。</span><span class="sxs-lookup"><span data-stu-id="32262-456">As part of the Customer Experience Improvement Program in BizTalk Server, you can provide useful feedback to Microsoft regarding feature usage of BizTalk Server.</span></span> <span data-ttu-id="32262-457">收集的資料會是匿名形式，無法用來識別您的身分。</span><span class="sxs-lookup"><span data-stu-id="32262-457">The data collected is anonymous, and cannot be used to identify you.</span></span> <span data-ttu-id="32262-458">加入這項計畫後，Microsoft 也會收集使用統計資料。</span><span class="sxs-lookup"><span data-stu-id="32262-458">Microsoft collects feature usage statistics as part of this program.</span></span>

<span data-ttu-id="32262-459">如果您參與這項計畫，將能協助我們改善 BizTalk Server 各項功能的可靠性和效能。</span><span class="sxs-lookup"><span data-stu-id="32262-459">By participating in this program, you can help improve the reliability and performance of various features of BizTalk Server.</span></span> <span data-ttu-id="32262-460">如需這項計畫和其隱私權原則的詳細資訊，請參閱 [Microsoft BizTalk Server CEIP 隱私權原則](http://go.microsoft.com/fwlink/p/?LinkId=188553)。</span><span class="sxs-lookup"><span data-stu-id="32262-460">For more information about this program and its privacy policy, see [Microsoft BizTalk Server CEIP Privacy Policy](http://go.microsoft.com/fwlink/p/?LinkId=188553).</span></span>

## <a name="appendix-b-known-issues"></a><span data-ttu-id="32262-461">附錄 B：已知問題</span><span class="sxs-lookup"><span data-stu-id="32262-461">Appendix B: Known issues</span></span>

- <span data-ttu-id="32262-462">**在管理電腦上設定 BAM 警示**：這是一個管理、執行階段和 SQL Server 元件安裝在不同電腦上的多重電腦環境。</span><span class="sxs-lookup"><span data-stu-id="32262-462">**Configure BAM Alerts on Administration computer**: There is a multicomputer environment with the Administration, Runtime, and SQL Server components installed on separate computers.</span></span> <span data-ttu-id="32262-463">當使用 BAM 工具或 BAM 警示時，可能會發生下列問題：</span><span class="sxs-lookup"><span data-stu-id="32262-463">When working with BAM Tools or BAM Alerts, the following issues can occur:</span></span>

    <span data-ttu-id="32262-464">**問題**：當您在 BizTalk 管理電腦上設定 BAM 工具時，發生下列錯誤：</span><span class="sxs-lookup"><span data-stu-id="32262-464">**ISSUE**: When you configure BAM Tools on a BizTalk Administration computer, the following error occurs:</span></span>

    `Service BAMAlerts was not found on computer ‘.’.The specified service does not exist as an installed service.`

    <span data-ttu-id="32262-465">**問題**：當您從執行階段電腦部署 BAM 活動定義時，發生下列錯誤：</span><span class="sxs-lookup"><span data-stu-id="32262-465">**ISSUE**: When you deploy a BAM Activity Definition from Runtime computer, the following error occurs:</span></span>

    `A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) (.Net SqlClient Data Provider)`

    <span data-ttu-id="32262-466">如果在執行階段電腦上設定 BAM 警示就會發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="32262-466">This occurs if BAM Alerts is configured on the Runtime computer.</span></span> <span data-ttu-id="32262-467">若要解決，請在相同電腦上的 BizTalk 管理主控台中設定 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-467">To resolve, configure BAM Alerts on the same computer as the BizTalk Administration console.</span></span> <span data-ttu-id="32262-468">請勿在執行階段電腦上設定 BAM 警示。</span><span class="sxs-lookup"><span data-stu-id="32262-468">Do not configure BAM Alerts on the Runtime computer.</span></span>

- <span data-ttu-id="32262-469">**從失敗的升級復原**︰升級期間隨時都會發生升級失敗。</span><span class="sxs-lookup"><span data-stu-id="32262-469">**Recovering from a Failed Upgrade**: A failed upgrade can occur at any time during the upgrade.</span></span> <span data-ttu-id="32262-470">從升級失敗中復原的方式取決於每個階段中發生失敗的時間點而定。</span><span class="sxs-lookup"><span data-stu-id="32262-470">How you recover from a failed upgrade is determined from what point during each phase the failure occurred.</span></span>

  - <span data-ttu-id="32262-471">如果在安裝先決條件時升級失敗，安裝程式就會停止進一步安裝必要元件，並傳回錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="32262-471">If the upgrade fails when installing the prerequisites, then setup stops further installation of prerequisites, and returns a message with the error.</span></span> <span data-ttu-id="32262-472">然後，您可以更正問題，並重新執行安裝程式。</span><span class="sxs-lookup"><span data-stu-id="32262-472">You can then correct the problem and rerun setup.</span></span>

  - <span data-ttu-id="32262-473">如果在升級資料庫、從現有的 BizTalk Server 版本中移除功能，或安裝新的版本時升級失敗，安裝程式會停止進一步安裝並傳回錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="32262-473">If the upgrade fails when upgrading the databases, removing features from the existing BizTalk Server version, or installing the new version, then setup stops further installation, and returns a message with the error.</span></span> <span data-ttu-id="32262-474">所有變更都會復原。</span><span class="sxs-lookup"><span data-stu-id="32262-474">Any changes are rolled back.</span></span> <span data-ttu-id="32262-475">對 BizTalk Server 資料庫所做的變更無法回復。</span><span class="sxs-lookup"><span data-stu-id="32262-475">Changes made to the BizTalk Server databases cannot be rolled back.</span></span>

      <span data-ttu-id="32262-476">如果 BizTalk Server 舊版安裝的元件在升級期間移除，您的電腦可能會處於沒有任何 BizTalk Server 元件的情況。</span><span class="sxs-lookup"><span data-stu-id="32262-476">If components of the previous BizTalk Server installation are removed during upgrade, your computer may be left in a state with no BizTalk Server components.</span></span> <span data-ttu-id="32262-477">可能會保留舊版安裝的功能組態資訊。</span><span class="sxs-lookup"><span data-stu-id="32262-477">Feature configuration information from the previous installation may be retained.</span></span> <span data-ttu-id="32262-478">而且根據升級程序失敗的位置，BizTalk Server 資料庫可能已經升級。</span><span class="sxs-lookup"><span data-stu-id="32262-478">And depending on where the upgrade process fails, the BizTalk Server databases may have been upgraded.</span></span> <span data-ttu-id="32262-479">此時，您可能必須先還原之前備份的資料庫，然後再次執行安裝程式。</span><span class="sxs-lookup"><span data-stu-id="32262-479">It may be necessary to restore the databases which you backed up earlier before running setup again.</span></span>

  - <span data-ttu-id="32262-480">如果在重新設定 BizTalk Server 功能時升級失敗，安裝程式會傳回完成程度的訊息。</span><span class="sxs-lookup"><span data-stu-id="32262-480">If the upgrade fails when reconfiguring the BizTalk Server features, then the setup returns a message with the level of completion.</span></span> <span data-ttu-id="32262-481">如果設定升級失敗或部分成功，請執行 BizTalk Server 設定完成升級。</span><span class="sxs-lookup"><span data-stu-id="32262-481">If configuration upgrade fails or partially succeeds, run the BizTalk Server configuration to complete the upgrade.</span></span>

    <span data-ttu-id="32262-482">如果升級持續失敗，且您需要回復至舊版 BizTalk Server，您必須還原已備份的資料庫，然後重新安裝舊版的 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="32262-482">If the upgrade continues to fail and you need to regress to your previous version of BizTalk Server, you must restore the databases you backed up, and then reinstall your previous BizTalk Server version.</span></span>

- <span data-ttu-id="32262-483">**使用相同的版本**：在 BizTalk 應用程式群組中，您無法執行具有不同 BizTalk Server 版本的電腦。</span><span class="sxs-lookup"><span data-stu-id="32262-483">**Use the same versions**: In a BizTalk application group, you cannot run machines with different versions of BizTalk Server.</span></span> <span data-ttu-id="32262-484">例如，在 BizTalk 管理主控台中，您無法將執行某版 BizTalk Server 的傳送埠繫結至執行不同版本 BizTalk Server 的接收位置。</span><span class="sxs-lookup"><span data-stu-id="32262-484">For example, in the BizTalk Administration Console, you cannot bind a send port running on one version of BizTalk Server to a receive location running on a different version of BizTalk Server.</span></span> 

- <span data-ttu-id="32262-485">**重新啟動 SSO 服務**：如果您在電腦上安裝舊版的 Visual Studio 或 .NET Framework 4.5，則舊版 BizTalk Server 中的 SSO 服務就會停止運作。</span><span class="sxs-lookup"><span data-stu-id="32262-485">**Restart SSO Service**: If you have a previous Visual Studio version or .NET Framework 4.5 installed on your machine, then the SSO service in earlier versions of BizTalk Server stops working.</span></span> <span data-ttu-id="32262-486">請從 Visual Studio 命令提示字元執行 `regasm SSOSQL.dll` 命令，以解決此問題。</span><span class="sxs-lookup"><span data-stu-id="32262-486">To resolve this issue, run the `regasm SSOSQL.dll` command from the Visual Studio command prompt.</span></span> <span data-ttu-id="32262-487">此命令會重新啟動 SSO 服務。</span><span class="sxs-lookup"><span data-stu-id="32262-487">This command restarts the SSO service.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32262-488">在 64 位元的電腦上，執行 32 位元和 64 位元版本的 regasm 命令。</span><span class="sxs-lookup"><span data-stu-id="32262-488">On a 64-bit computer, run the 32-bit and 64-bit versions of the regasm command.</span></span>

- <span data-ttu-id="32262-489">**無法使用 SOAP**：在平台升級之後，因為權限問題，您可能無法傳送 SOAP 訊息。</span><span class="sxs-lookup"><span data-stu-id="32262-489">**Unable to use SOAP**: After a platform upgrade, you may not be able to send SOAP message because of permissions.</span></span> <span data-ttu-id="32262-490">若要解決此問題，請使用下列文字來編輯 `C:\inetpub\wwwroot\<SOAPExternalAppName>\` 中的 Web.config 檔案：</span><span class="sxs-lookup"><span data-stu-id="32262-490">To resolve this, edit the Web.config file at `C:\inetpub\wwwroot\<SOAPExternalAppName>\` with the following text:</span></span>

    ```
    <securityPolicy>
    <trustLevel name="Full" policyFile="internal" />
    <trustLevel name="High" policyFile="web_hightrust.config" />
    <trustLevel name="Medium" policyFile="web_mediumtrust.config" />
    <trustLevel name="Low" policyFile="web_lowtrust.config" />
    <trustLevel name="Minimal" policyFile="web_minimaltrust.config"/>
    </securityPolicy>
    <trust level="Full" originUrl="" processRequestInApplicationTrust="true"/>
    ```

    <span data-ttu-id="32262-491">您也可能必須將自訂錯誤模式從 [Remote Only (僅限遠端)] 變更為 [關閉]。</span><span class="sxs-lookup"><span data-stu-id="32262-491">You may also have to change the custom error mode from **Remote Only** to **Off**.</span></span>

- <span data-ttu-id="32262-492">**憑證存放區**：升級後，從 BizTalk Server 管理主控台開啟傳送埠或接收位置時，發生錯誤：`Could not open certificate store, the system cannot find the file specified (System).`。</span><span class="sxs-lookup"><span data-stu-id="32262-492">**Certificate Store**: After you upgrade, you open a send port or receive location from the BizTalk Server Administration console, and get error: `Could not open certificate store, the system cannot find the file specified (System).`</span></span>

    <span data-ttu-id="32262-493">如果憑證存放區遺失就會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="32262-493">This error occurs if the certificate store is missing.</span></span>

- <span data-ttu-id="32262-494">**BAM 入口網站**：在 64 位元電腦上，升級之後就無法存取 BAM 入口網站。</span><span class="sxs-lookup"><span data-stu-id="32262-494">**BAM Portal**: On a 64-bit machine, you cannot access BAM portal after you upgrade.</span></span> <span data-ttu-id="32262-495">可能的解決方案：</span><span class="sxs-lookup"><span data-stu-id="32262-495">Possible resolution:</span></span>

  1. <span data-ttu-id="32262-496">建立 `%BizTalkInstallDir%\BAMPortal\web.config` 的 web.config 檔案的備份副本。</span><span class="sxs-lookup"><span data-stu-id="32262-496">Create a backup copy of the web.config file located at `%BizTalkInstallDir%\BAMPortal\web.config`.</span></span>

  2. <span data-ttu-id="32262-497">使用 BizTalk Server Tracking 資料夾中的 bm.exe，在命令提示字元中執行下列命令：`bm.exe get-config –FileName:<filepath> -Server:MyServer -Database:MyDB`</span><span class="sxs-lookup"><span data-stu-id="32262-497">Using bm.exe in the BizTalk Server Tracking folder, run the following at the command prompt: `bm.exe get-config –FileName:<filepath> -Server:MyServer -Database:MyDB`</span></span>

     <span data-ttu-id="32262-498">從 Config XML 檔案中取得 *BAMVRoot* 的值 (xpath: BAMConfiguration\ GlobalProperty\Name="BAMVRoot")。</span><span class="sxs-lookup"><span data-stu-id="32262-498">From the Config XML file, get the value for *BAMVRoot* (xpath: BAMConfiguration\ GlobalProperty\Name="BAMVRoot").</span></span>

  3. <span data-ttu-id="32262-499">在列為 BAMVRoot 值的電腦上開啟 BizTalk Server 組態，並取消設定 BAM 入口網站。</span><span class="sxs-lookup"><span data-stu-id="32262-499">Open the BizTalk Server Configuration on the computer that is listed as the BAMVRoot value, and unconfigure the BAM portal.</span></span>

  4. <span data-ttu-id="32262-500">開啟 BizTalk Server 組態，並設定 BAM 入口網站。</span><span class="sxs-lookup"><span data-stu-id="32262-500">Open the BizTalk Server Configuration, and configure the BAM portal.</span></span>

  5. <span data-ttu-id="32262-501">從步驟 (1) 提及的位置開啟新的 web.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="32262-501">Open the new web.config file from location mentioned in step (1).</span></span>

  6. <span data-ttu-id="32262-502">使用 web.config 檔案的備份副本，設定下列值 (在 `configuration\appSettings` 下)：</span><span class="sxs-lookup"><span data-stu-id="32262-502">Using the backup copy of the web.config file, set the following values (under `configuration\appSettings`):</span></span>

      - <span data-ttu-id="32262-503">key="MainPageContentUrl"</span><span class="sxs-lookup"><span data-stu-id="32262-503">key="MainPageContentUrl"</span></span>
      - <span data-ttu-id="32262-504">key="AlertNotificationOptions"</span><span class="sxs-lookup"><span data-stu-id="32262-504">key="AlertNotificationOptions"</span></span>

     > [!NOTE] 
     > <span data-ttu-id="32262-505">在 64 位元電腦上，在您升級作業系統之後，我們建議您重新設定 BAM 入口網站。</span><span class="sxs-lookup"><span data-stu-id="32262-505">On a 64-bit machine, after you upgrade the operating system, we recommend that you reconfigure the BAM portal.</span></span>

- <span data-ttu-id="32262-506">**部署 EDI BAM 活動**：升級時，升級可能只有部分成功。</span><span class="sxs-lookup"><span data-stu-id="32262-506">**Deploy EDI BAM activities**: When you upgrade, the upgrade may partially succeed.</span></span> <span data-ttu-id="32262-507">當您升級 SQL Server (已設定 EDI) 時可能發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="32262-507">This can happen when you upgrade SQL Server (with EDI configured).</span></span> <span data-ttu-id="32262-508">可能未正確升級 EDI BAM 活動。</span><span class="sxs-lookup"><span data-stu-id="32262-508">The EDI BAM activities might not be upgraded properly.</span></span> <span data-ttu-id="32262-509">若要解決此問題，請在命令提示字元中，使用系統管理認證執行下列命令，以部署 BAM 活動：</span><span class="sxs-lookup"><span data-stu-id="32262-509">To resolve this issue, deploy the BAM activities by running the following commands at the command prompt with administrative credentials:</span></span>

    `"<BizTalk Installation Folder>\Tracking\bm.exe" deploy-all -DefinitionFile:"<BizTalk Installation Folder>\AS2ResendActivityDefs.xml" -Server:"<BAM Database Server Name>" -Database:"<BAM Database Name>"`

    `"<BizTalk Installation Folder>\Tracking\bm.exe" update-all -DefinitionFile:"<BizTalk Installation Folder>\Microsoft.BizTalk.Configuration.EdiAS2.UpgradeR2toR3.xml" -Server:"<BAM Database Server Name>" -Database:"<BAM Database Name>"`

    `"<BizTalk Installation Folder>\Tracking\bm.exe" update-all -DefinitionFile:"<BizTalk Installation Folder>\Microsoft.BizTalk.Configuration.Batching.UpgradeR2toR3.xml" -Server:"<BAM Database Server Name>" -Database:"<BAM Database Name>"`

- <span data-ttu-id="32262-510">**叢集上的 SSO 錯誤**：在 BizTalk Server 執行階段叢集環境中，當您嘗試升級時，可能會收到錯誤訊息：</span><span class="sxs-lookup"><span data-stu-id="32262-510">**SSO Error on Cluster**: On a BizTalk Server runtime cluster environment, when you try to upgrade, you may receive an error message:</span></span>

    `SSO Master Secret Server service is not running on <Cluster name>.Please start the service to continue the upgrade.` 

    <span data-ttu-id="32262-511">若要解決此問題，請重新整理 SSO 和 BizTalk Server 執行階段叢集中的 SSO 服務。</span><span class="sxs-lookup"><span data-stu-id="32262-511">To resolve this issue, refresh the SSO services both in the SSO and BizTalk Server runtime cluster.</span></span>

    <span data-ttu-id="32262-512">**重新整理 SSO 叢集中的 SSO 服務**：</span><span class="sxs-lookup"><span data-stu-id="32262-512">**To refresh the SSO services in SSO cluster**:</span></span>

  1. <span data-ttu-id="32262-513">在叢集系統管理員中，將包含叢集化企業 SSO 服務資源的叢集群組**上線**。</span><span class="sxs-lookup"><span data-stu-id="32262-513">In Cluster Administrator, **Bring Online** the cluster group that contains the clustered Enterprise SSO service resource.</span></span> <span data-ttu-id="32262-514">這樣應該會啟動叢集群組中的所有資源。</span><span class="sxs-lookup"><span data-stu-id="32262-514">This should start all of the resources in the cluster group.</span></span>

  2. <span data-ttu-id="32262-515">[離線] 企業 SSO 服務的叢集執行個體。</span><span class="sxs-lookup"><span data-stu-id="32262-515">**Take Offline** the clustered instance of the Enterprise SSO service.</span></span> <span data-ttu-id="32262-516">然後，再讓它回到**線上**。</span><span class="sxs-lookup"><span data-stu-id="32262-516">And then, bring it back **Online**.</span></span>

  3. <span data-ttu-id="32262-517">[移動] 叢集群組。</span><span class="sxs-lookup"><span data-stu-id="32262-517">**Move** the cluster group.</span></span> <span data-ttu-id="32262-518">這個步驟應該會將包含叢集企業 SSO 服務資源的叢集群組從第一個節點移動到第二個節點。</span><span class="sxs-lookup"><span data-stu-id="32262-518">This step should move the cluster group that contains the clustered Enterprise SSO services resource from the first node to the second node.</span></span>

  4. <span data-ttu-id="32262-519">[離線] 企業 SSO 服務的叢集執行個體。</span><span class="sxs-lookup"><span data-stu-id="32262-519">**Take Offline** the clustered instance of the Enterprise SSO service.</span></span> <span data-ttu-id="32262-520">然後，再讓它回到**線上**。</span><span class="sxs-lookup"><span data-stu-id="32262-520">And then, bring it back **Online**.</span></span>

     <span data-ttu-id="32262-521">**重新整理 BizTalk Server 執行階段叢集中的 SSO 服務**：</span><span class="sxs-lookup"><span data-stu-id="32262-521">**To refresh the SSO services in a BizTalk Server Runtime cluster**:</span></span>

  5. <span data-ttu-id="32262-522">在叢集系統管理員中，將包含叢集化BizTalk Server 執行階段資源的叢集群組**上線**。</span><span class="sxs-lookup"><span data-stu-id="32262-522">In Cluster Administrator, **Bring Online** the cluster group that contains the clustered BizTalk Server runtime resource.</span></span> <span data-ttu-id="32262-523">這樣應該會啟動叢集群組中的所有資源。</span><span class="sxs-lookup"><span data-stu-id="32262-523">This should start all of the resources in the cluster group.</span></span>

  6. <span data-ttu-id="32262-524">[離線] 企業 SSO 服務的叢集執行個體。</span><span class="sxs-lookup"><span data-stu-id="32262-524">**Take Offline** the clustered instance of the Enterprise SSO services.</span></span> <span data-ttu-id="32262-525">然後，再讓它回到**線上**。</span><span class="sxs-lookup"><span data-stu-id="32262-525">And then, bring it back **Online**.</span></span>

  7. <span data-ttu-id="32262-526">[移動] 叢集群組。</span><span class="sxs-lookup"><span data-stu-id="32262-526">**Move** the cluster group.</span></span> <span data-ttu-id="32262-527">這個步驟應該會將包含叢集 BizTalk Server 執行階段資源的叢集群組從第一個節點移動到第二個節點。</span><span class="sxs-lookup"><span data-stu-id="32262-527">This step should move the cluster group that contains the clustered BizTalk Server runtime resource from the first node to the second node.</span></span>

  8. <span data-ttu-id="32262-528">[離線] 企業 SSO 服務的叢集執行個體。</span><span class="sxs-lookup"><span data-stu-id="32262-528">**Take Offline** the clustered instance of the Enterprise SSO services.</span></span> <span data-ttu-id="32262-529">然後，再讓它回到**線上**。</span><span class="sxs-lookup"><span data-stu-id="32262-529">And then, bring it back **Online**.</span></span>
