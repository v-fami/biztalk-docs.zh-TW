---
title: 使用效能分析的記錄檔 (PAL) 工具 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d563aa7d-102d-4fe6-a892-66794feaf83b
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 889cbe2a88859eec82f76d0eec309865bf727bfe
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37024564"
---
# <a name="using-the-performance-analysis-of-logs-pal-tool"></a>使用效能分析的記錄檔 (PAL) 工具
PAL （效能分析的記錄檔） 工具會在效能監視器計數器記錄檔 （任何已知的格式） 中讀取，並分析使用複雜，但是已知的臨界值 （提供）。 此工具會產生 HTML 報告，以圖形方式圖表重要的效能計數器，超過閾值時，會擲回警示。 臨界值最初會根據 Microsoft 產品團隊，包括所定義的臨界值[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，和成員的 Microsoft 支援。 此工具不會取代傳統的效能分析，但它會自動分析的效能計數器記錄檔不足以幫您節省時間。 [PAL] 工具中：  

- 分析臨界值的效能計數器記錄  

- 對於大型的 Perfmon 記錄檔很有用  

- 識別[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和作業系統效能計數器瓶頸，藉由分析臨界值  

- 可進行的任何效能計數器的分析  

- 可用來協助撰寫您自己的計數器  

  PAL 是可在免費下載[ http://go.microsoft.com/fwlink/?linkid=98098 ](http://go.microsoft.com/fwlink/?linkid=98098)。 它需要 Microsoft 記錄檔剖析器。 記錄檔剖析器是功能強大、 用途廣泛的工具，提供以文字為基礎的資料，例如記錄檔、 XML 檔案、 CSV 檔案，以及索引鍵的資料來源的通用查詢存取 Windows 作業系統，例如事件記錄檔、 登錄、 檔案系統和 ActiveDirectory® 目錄服務。 若要使用此工具來查詢大量的記錄資訊。 您可以下載 Log Parser 工具，在[ http://go.microsoft.com/fwlink/?linkid=85574 ](http://go.microsoft.com/fwlink/?linkid=85574)。  

## <a name="using-pal-with-performance-counter-logs-in-different-languages"></a>使用效能計數器的 PAL 登入不同的語言  
 [PAL] 工具會分析效能計數器記錄檔，僅以英文的語言。 若要使用其他語言中的效能計數器記錄檔中的 [PAL] 工具，您必須先將轉譯要英文語言的記錄檔。 您可以使用**Perfmon 記錄檔 Translator**工具可從[ http://go.microsoft.com/fwlink/?LinkId=158802 ](http://go.microsoft.com/fwlink/?LinkId=158802)翻譯成英文原始的效能計數器記錄檔。  

## <a name="understanding-the-pal-tool-report-for-microsoft-biztalk-server-2010"></a>了解 Microsoft BizTalk Server 2010 的 PAL 工具報告  
 PAL tool 的 Windows 作業系統，Microsoft SQL Server，提供 Perfmon 記錄檔分析臨界值和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。 本節說明大部分的 BizTalk Server 閾值的報告 [PAL] 工具中分析。  

> [!NOTE]  
>  本主題是很長，以便可在同一處以方便參考包含有關 PAL 工具的完整資訊。  

 [PAL] 工具會報告下列分析和臨界值。  


|                                分析的類型和名稱                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       分析說明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                        核心傾印的磁碟： 磁碟可用空間                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  這項分析會檢查以確定沒有足夠的磁碟空間，用於作業系統磁碟的所有記憶體傾都印。 如果可用磁碟空間不足，作業系統將無法建立 memory.dmp 時，必須分析根本原因的核心傾印檔案。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                    磁碟： 邏輯/實體磁碟介面分析                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    這項分析會查看每個實體磁碟的閒置時間。 多閒置磁碟，使用磁碟越低。 此計數器適合在一個磁碟會在邏輯磁碟。 "%閒置時間 」 報告的範例間隔期間磁碟閒置時間百分比。<br /><br /> 參考： 排除磁碟繫結的問題 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                磁碟： 邏輯/實體磁碟讀取/寫入延遲分析                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Windows 偵測到的磁碟效能瓶頸，最可靠方式是藉由測量其回應時間。 如果回應時間大於.025 （25 毫秒為單位），這是保守的臨界值，然後可能會發生明顯的速度變慢和會影響使用者的效能問題。 如需詳細資訊，請參閱邏輯/實體磁碟讀取/寫入延遲分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                           磁碟： Logical Disk Transfers/sec                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "Disk Transfers/sec"是讀取的速度和寫入磁碟上的作業。 這項分析檢查以查看是否有任何邏輯磁碟的臨界值會顯示回應時間不佳 （大於 25 毫秒回應時間的 I/O 作業）。 如果為 true，則每秒磁碟轉移操作應該等於或高於 80。 如果沒有，則磁碟架構需要進行調查。 不佳的磁碟 I/O 的最常見原因是多載 SAN 上的 LUN。 如需詳細資訊，請參閱 Logical Disk Transfers/sec 本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                            磁碟： LogicalDisk %可用空間                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 「 %可用空間 」 是已在所選邏輯磁碟機上可用的總可用空間的百分比。 應該不會影響效能，直到有可用的磁碟機空間低於 30%。 使用磁碟機的 70%時，剩餘的可用空間是位於更接近磁碟的磁針的磁碟機，這是在較低的效能層級運作。 可用磁碟空間不足，可能會造成嚴重的磁碟效能。<br /><br /> 參考： NT 伺服器和磁碟子系統效能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   磁碟： 處理 IO Data Operations/sec 和處理 IO 其他作業數/秒分析   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            這些計數器會計算包含檔案、 網路與裝置 I/o 處理序所產生的所有 I/O 活動。 處理序正在執行超過 1,000 個我 / O 的每秒，並將它標示為警告時，就會檢查這些分析。 這些分析最適合用於與其他分析，例如磁碟分析相互關聯來判斷哪些處理程序可能會牽涉到的 I/O 活動。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                               可用的記憶體： 記憶體                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             這項分析會檢查總可用記憶體是否不足 – 10%可用警告] 和 [可用的 5%的重大。 10 MB 的每小時遞減趨勢偵測到，這可能表示潛在的即將發行的記憶體條件時，也會收到警示警告。 增加的特殊權限模式下 CPU 和系統的延遲，可能會導致實體記憶體不足。 如需詳細資訊，請參閱可用 MemoryAnalysis 本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                        記憶體︰ 可用系統分頁表項目                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Free System Page Table Entries (PTE) 是由系統目前未使用的分頁表項目數目。 這項分析會判斷系統是否已藉由檢查是否有少於 5000 免費 PTE 的警告有少於 10,000 免費 PTE 的執行 PTE 的不足。 缺乏足夠 PTE 可能會導致整個系統停止回應。 也請注意，/3GB 切換將會大幅降低可用 PTE 數量。 如需詳細資訊，請參閱可用系統分頁資料表項目分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                             記憶體︰ 記憶體流失偵測                             |                                                                                                                                                                                                                                                                                                                                                                                             這項分析會判斷是否有任何處理序正在耗用大量系統的記憶體和處理程序是否持續一段時間的記憶體耗用量增加。 耗用記憶體的很大一部分的程序是正常的只要處理程序傳回給系統的記憶體。 尋找增加圖表中的趨勢。 這段很長一段時間增加的趨勢可能表示記憶體流失。 「 私用位元組 」 是記憶體的目前的大小，以位元組為單位，此程序已配置，不能與其他處理序共用。 這項分析會檢查 10 MB 的每小時和 5 MB 的每小時增加的趨勢。 您可以使用這項分析中與 PAL 中的可用記憶體分析相互關聯。 如需詳細資訊，請參閱記憶體流失偵測分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                              |
|                             記憶體： 控制代碼流失偵測                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  這項分析會檢查來判斷多少處理每個處理程序的所有已開啟，並以判斷是否有控制代碼流失懷疑。 具有大量的控制代碼和/或積極趨勢向上的程序可能表示控制代碼流失，這通常會導致記憶體流失。 此程序目前開啟的控制代碼的總數會等於此程序中的每個執行緒目前開啟的控制碼總數。<br /><br /> 參考： 偵錯在診斷工具 v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                            記憶體︰ 記憶體 Pages Input/sec                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      「 Pages Input/sec"是從為解決硬體分頁錯誤的磁碟讀取分頁的速率。 處理程序是指不在其工作集或其他位置中的實體記憶體，因而必須從磁碟擷取的虛擬記憶體分頁時，就會發生硬體分頁錯誤。 這項分析會檢查是否有每秒 10 個以上的頁面檔案讀取。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                               記憶體︰ 記憶體 Pages/sec                                |                                                                                                                                                                                                                                                                                                                                                                                這項分析會檢查 「 頁/秒 」 是否很高 （超過 1,000 個）。 是否很高，然後系統可能用盡記憶體嘗試分頁至磁碟的記憶體。 「 頁/秒 」 是在讀取或寫入磁碟以解決硬體分頁錯誤頁面的速率。 此計數器是導致整個系統延遲錯誤的種類的主要指示器。  您可以使用這項分析中可用的記憶體分析與 PAL 中的記憶體流失偵測分析的相互關聯。 如果所有這些分析會在此同時，擲回警示，則這可能表示系統已用盡記憶體，並牽涉到的可疑處理程序，並遵循 PAL 中的記憶體流失偵測分析中所述的分析步驟。<br /><br /> 如需詳細資訊，請參閱本主題中的記憶體頁面/秒分析。                                                                                                                                                                                                                                                                                                                                                                                 |
|                      記憶體︰ 記憶體系統快取常駐位元組                       |                                                                                                                                                                                                                                                                                                                                      「 系統快取常駐位元組 」 是大小，以位元組為單位的可分頁作業系統程式碼，在檔案系統快取中。 此值包含目前的實體頁面，而不包含任何非目前駐留的虛擬記憶體分頁。 這個值是元件的 「 記憶體\\\System 程式碼常駐位元組 」 表示目前位於實體記憶體的所有可分頁作業系統程式碼。 此計數器會顯示最後觀察到的值它不是平均值。 這項分析會檢查每小時遞增趨勢 10 mb。 在負載下，伺服器可能會使用系統快取，以便快取 I/O 活動，例如磁碟。 用於相互關聯處理序 IO Data Operations/sec 與其他處理序 IO 作業數/秒 PAL 中的分析。<br /><br /> 參考資料︰ 檔案快取的效能和微調，位於 [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)                                                                                                                                                                                                                                                                                                                                      |
|                             集區未分頁位元組的記憶體：                              |                                                                                                                                                                                                                                                                                                                                                                             「 集區未分頁的位元組 」 是以位元組為單位的非分頁集區，無法寫入的物件系統記憶體區域的大小，磁碟、 但只要已配置，必須保留在實體記憶體中。 這項分析會檢查以查看系統是否即將接近最大的集區未分頁記憶體大小。 其做法是估計納入考量的集區大小/3 GB、 實體記憶體大小，以及 32 位元/64 位元，然後判斷值是否大於 60%，估計集區大小。 如果系統變成接近最大的大小，系統可能會導致系統寬的停止回應。<br /><br /> Boot.ini 檔案中的 /3GB 參數選項會大幅降低此記憶體集區的大小。<br /><br /> 如需詳細資訊，請參閱 Pool Non-Paged 位元組分析本主題中。                                                                                                                                                                                                                                                                                                                                                                             |
|                               記憶體： 集區分頁位元組                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      這項分析會檢查以查看是否即將接近最大的集區的系統分頁記憶體大小。 其做法是估計納入考量的集區大小/3 GB、 實體記憶體大小，以及 32 位元/64 位元，然後判斷值是否大於 60%，估計集區大小。 如果系統變成接近最大的大小，系統可能會導致系統寬的停止回應。<br /><br /> Boot.ini 檔案中的 /3GB 參數選項會大幅降低此記憶體集區的大小。<br /><br /> 如需詳細資訊，請參閱集區的分頁位元組分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                             記憶體： 處理序執行緒計數                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     這項分析會檢查所有的處理程序來判斷處理程序是否有 500 個以上的執行緒和執行緒的數目增加 50 的執行緒，每小時。 處理程序，且含有大量執行緒及/或積極趨勢向上可能表示執行緒流失這通常會導致記憶體流失或是高內容切換。 高內容切換，會導致高特殊權限模式 CPU。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                              記憶體： 處理序工作集                              |                                                                                                                                                                                                                                                                                                                                                                                          「 工作集 」 是目前的大小，以位元組為單位，此程序工作集。 工作集是最近處理程序中執行緒的記憶體分頁集。 如果電腦中的可用記憶體高於臨界值，即使未使用頁面會保留處理程序工作集中。 當可用記憶體低於臨界值時，頁面會刪減工作集。 當需要它們會被寫回工作集然後退出主記憶體。 這項分析會檢查遞增趨勢 10 mb 或每個處理程序中的其他資訊。 在相互關聯使用 PAL 中的可用記憶體分析。<br /><br /> 參考： 偵測在記憶體瓶頸 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)                                                                                                                                                                                                                                                                                                                                                                                           |
|                     網路： 網路輸出佇列長度分析                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      這項分析會檢查幾個執行緒正在等待的網路介面卡。 如果有很多執行緒正在等候網路介面卡，然後系統會可能讓網路飽和 I/O 由於網路延遲或網路頻寬。 "Output Queue Length"是輸出封包佇列長度 （以封包）。 延遲會指出如果這是大於 2，並且應該找到並盡快解決瓶頸。 網路輸出佇列的一般原因包括大量的小型網路要求與網路延遲。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                         網路： 網路使用率分析                         |                                                                                                                                                                                                                                                                                                                                   "Bytes Total/sec"是在傳送及接收每個網路介面卡，包括框架字元位元組的速率。 「 Network Interface\Bytes Received/sec"是"Network Interface\Bytes Received/sec"和"Network Interface\Bytes Sent/sec"的總和。 此計數器可協助您了解在您的網路介面卡的流量是否已飽和，以及您是否需要新增另一個網路介面卡。 您可以識別問題的速度取決於類型的網路有以及您是否共用頻寬與其他應用程式。 這項分析會將"Bytes Total/sec"轉換成位元，並比對目前頻寬的網路介面卡，來計算網路使用率。 接下來，它會檢查使用率超過 50%。<br /><br /> 參考： 測量在.NET 應用程式效能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)                                                                                                                                                                                                                                                                                                                                    |
|                   分頁檔： 分頁檔案使用量百分比和 %使用率正達尖峰                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          以百分比表示的使用中的頁面檔案執行個體數量。 另請參閱 「 處理程序\\\Page File Bytes"。 這項分析會檢查是否大於 70%的使用量百分比。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|  處理器： 處理器使用率分析和處理序過度佔用處理器使用   |                                                                                                                                                                                                                                                                                                                                                                                                                                                          此計數器是處理器活動的主要指標，並顯示在取樣間隔時間期間觀察到的忙碌時間平均百分比。 其計算方式是監視該服務處於非使用中的時間，然後從 100%減去該值。 這項分析會檢查使用率大於 60%，每個處理器上。 如果是的話，判斷它是否高使用者模式 CPU 或高特殊權限的模式。 如果懷疑高特殊權限的模式 CPU，則會看到在 PAL 中的特殊權限的模式 CPU 分析。 如果懷疑的使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用量的函式。                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                           處理器： 處理器佇列長度                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            這項分析會判斷平均處理器佇列長度是否超過處理器的數目。 如果是的話，這可能表示發生處理器瓶頸。 您可以使用這項分析中特殊權限的模式 CPU 分析與過多的處理器使用 PAL 中的程序分析的相互關聯。 如需詳細資訊，請參閱處理器佇列長度分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                       處理器： 特殊權限的模式 CPU 分析                        |                                                                                                                                                                                                                                                                                                                                                                                                                                        此計數器表示執行緒在特權模式下所執行時間的百分比。 當您的應用程式呼叫作業系統 （例如來執行檔案或網路 I/O，或配置記憶體） 的函式時，這些作業系統函式會執行特殊權限模式。 這項分析會檢查以了解多達 30%的總 CPU 時，是否要使用特殊權限的模式 CPU。 如果如此，則 CPU 耗用量是可能的處理器，例如網路、 記憶體或磁碟 I/O 以外的另一個瓶頸所造成。 用於相互關聯使用處理器: %Interrupt Time 及處理器： 高內容切換 PAL 中的分析。 如需詳細資訊，請參閱特殊權限的模式 CPU 分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                               處理器： 插斷的時間                               |                                                                                                                                                                                                                                                                        "%Interrupt Time 是處理器花費在接收與處理硬體插斷，取樣間隔期間的時間。 這個值是產生插斷，例如系統時鐘、 滑鼠、 磁碟驅動程式、 資料通訊線路、 網路介面卡及其他週邊裝置的裝置活動的間接指示器。 這些裝置通常處理器發出插斷時完成的工作或有需要注意。 在插斷期間暫停執行一般執行緒。 大多數的系統時鐘處理器發出插斷每隔 10 毫秒，建立中斷活動的背景。 大幅提高此計數器指出可能硬體問題。 這項分析會檢查 「 插斷時間百分比 」 大於百分之 30。 如果發生這種情況，請考慮更新此警示的裝置硬體的驅動程式會將相互關聯。<br /><br /> 參考： 測量在.NET 應用程式效能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)                                                                                                                                                                                                                                                                        |
|                          處理器： 高內容切換                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                         當高優先順序的執行緒優先執行的較低優先順序的執行緒目前正在執行，或當高優先順序執行緒會封鎖，就會發生內容切換。 當許多執行緒共用相同的優先權層級時，可能會發生高層級內容切換。 這通常表示太多的執行緒會競爭處理器系統上。 一般而言，內容 5,000 個以下，每個處理器每秒切換速率不值得擔心。 如果內容切換率超過 15,000 每秒，每個處理器，則沒有條件約束。 如需詳細資訊，請參閱高內容切換 Analysis 本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|              Microsoft BizTalk Server: BizTalk 凍結協調流程              |                                                                                                                                                                                        當許多長時間執行商務程序執行一次時，記憶體和效能的問題是可能的。 協調流程引擎透過「凍結」和「解除凍結」協調流程執行個體來解決這些問題。 凍結是將協調流程狀態序列化到 SQL Server 資料庫中的程序。 解除凍結是此程序的反向： 還原序列化之資料庫的協調流程最後一個執行中狀態。 凍結是藉由減少必須一次在記憶體中產生的協調流程數目，來將系統資源的使用降至最低。 因此，dehyrations 儲存記憶體耗用量，但會相當耗費資源的作業來執行。 這項分析會檢查 dehydrations 10 或更多。 如果是這樣，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能記憶體不足 （虛擬或實體），請執行較高的協調流程數目是否在等待訊息，或凍結設定未正確設定。<br /><br /> 參考： 協調流程凍結和解除凍結，在  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)                                                                                                                                                                                         |
|               Microsoft BizTalk Server: BizTalk 高資料庫工作階段               |                                                                                                                                                                                                                                                                                                                                                                                                               此計數器有兩個可能的值︰ normal (0) 或超過閾值 (1)。 這項分析會檢查值為 1。 如果是的話，BizTalk 就已超過允許的資料庫工作階段數目的臨界值。 這個值是 「 每一 CPU 的資料庫連線 」 值中的 BizTalk 主控件節流設定所控制。 「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中資料庫連線數目。 此參數只會影響輸出訊息節流。 如需詳細資訊，請參閱 BizTalk 高資料庫工作階段分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                               |
|                 Microsoft BizTalk Server: BizTalk 高資料庫大小                  |                                                                                                                                                                                                         此計數器將集合設為 1 的值，如果任一個條件，列出資料庫閾值中的訊息計數，就會發生。 根據預設主機訊息資料庫節流閾值中的計數是設定為 50000，會觸發節流情況，在下列情況下的值：<br /><br /> 訊息發佈的工作、 狀態和擱置的佇列訂閱的主控件的主控件執行個體-總數超過 50,000。<br />-多工緩衝處理表格或追蹤資料表中的訊息數目超過 500,000 的訊息。<br /><br /> 如果發生這種情況，請考慮採取的動作，將會減少在資料庫中的訊息數目。 例如，請確定 SQL Server 工作，在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]正在執行不會發生錯誤，而且使用中的 [群組中樞] 頁面[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台來判斷是否要將訊息增多造成的大量擱置的訊息。 如需詳細資訊，請參閱 BizTalk 高資料庫大小分析本主題中。                                                                                                                                                                                                         |
|           Microsoft BizTalk Server: BizTalk 高內含式訊息計數            |                                                                                                                                                                                                                                                                                                                                                                                                                                              這項分析會檢查高內含式訊息計數 」 計數器來判定是否發生這種節流。 如果是的話，請考慮調整的 「 訊息每一 CPU 的內含式 」 的設定。 此參數只會影響輸出訊息節流。 若要停用節流設定的每一 CPU 的內含式訊息數目為基礎的 「 訊息每一 CPU 的內含式 」 設定中輸入值為 0。 「 訊息每一 CPU 的內含式 」 設定的預設值為 1,000。 請注意，修改這個值可以也會影響低延遲的訊息及/或 BizTalk 資源的效率。 如需詳細資訊，請參閱 BizTalk 高內含式訊息計數分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|             Microsoft BizTalk Server: BizTalk 高訊息傳遞速率             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     這項分析會檢查高訊息傳遞速率計數器中的 1 的值。 高訊息傳遞速率可能因高處理複雜性、 慢速輸出配接器或暫時的系統資源不足。 如需詳細資訊，請參閱 BizTalk 高訊息傳遞速率分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|            Microsoft BizTalk Server: BizTalk 高訊息發佈速率            |                                                                                                                                                                                       輸入主控件節流，也稱為訊息發佈節流中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，套用至主控件執行個體，包含接收配接器或協調流程，將訊息發佈到 MessageBox 資料庫。 這項分析會檢查高訊息發佈速率計數器中的 1 的值。 如果發生這種情況，則資料庫無法跟上發佈速率的訊息到 BizTalk MessageBox 資料庫。<br /><br /> 參考：<br /><br /> -主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)<br />-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)<br />訊息發佈節流設定 對話方塊中，在 [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)<br />-什麼是主控件節流？在 [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)                                                                                                                                                                                        |
|                Microsoft BizTalk Server: BizTalk 高程序記憶體                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           節流臨界值 設定的 BizTalk 程序記憶體使用量是記憶體的比較可用虛擬記憶體的處理序與工作集大小的總和，如果輸入從 1 到 100 的值使用百分比。 當指定某個百分比值時，則會以定期間隔重新計算程序記憶體閾值。 這項分析會檢查高的處理序記憶體計數器中的 1 的值。 如需詳細資訊，請參閱 BizTalk 高的處理程序的記憶體分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                 Microsoft BizTalk Server: BizTalk 高系統記憶體                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     BizTalk 的實體記憶體使用量節流臨界值設定為輸入則是相較於若其值的可用實體記憶體的總量，從 1 到 100 的記憶體耗用量的百分比。 如果您輸入大於 100 的值，這項設定也可以是以 mb 為單位的可用實體記憶體的總量。 輸入值為 0 時可停用以實體記憶體使用量為基礎的節流。 預設值是 0。 如需詳細資訊，請參閱 BizTalk 高系統記憶體分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                 Microsoft BizTalk Server: BizTalk 高執行緒計數                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。 如果超過此臨界值時，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會嘗試減少 EPM 執行緒集區和訊息代理程式 」 執行緒集區的大小。 在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。 此參數會同時影響輸入和輸出節流。 依預設會停用執行緒為基礎的節流。 如需詳細資訊，請參閱 BizTalk 高執行緒計數分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                 Microsoft BizTalk Server: BizTalk 主控件佇列長度                  |                                                                                                                                                                                                                                                                                            BizTalk 主控件佇列長度會追蹤特定主控件佇列中的訊息總數。 您可以使用長度大小 （亦即，' BizTalk:MessageBox:HostCounters:Host 佇列 – 長度 '） 提供給正在排在內部所顯示的佇列深度為個別主機的訊息數目的更詳細的檢視。 此計數器可用於判斷是否特定主機的瓶頸。 假設每個傳輸使用唯一的主機，這能幫助您判斷潛在的傳輸瓶頸。 這項分析會檢查平均佇列長度大於 1。 主控件佇列長度會是藉由彙總所有的佇列 (工作 Q，狀態 Q，暫止 Q) 的記錄計數的目標主機加權的佇列長度。<br /><br /> 參考： BizTalk Server 2006： 管理在成功的效能實驗室[ http://go.microsoft.com/fwlink/?linkid=104152 ](http://go.microsoft.com/fwlink/?linkid=104152) **附註：** 這份白皮書也是適用於 BizTalk Server。                                                                                                                                                                                                                                                                                             |
|        Microsoft BizTalk Server: BizTalk 主控件擱置的訊息佇列長度         |                                                                                                                                                                                          此計數器會追蹤特定主控件擱置的訊息總數。 擱置的訊息是訊息或協調流程的執行個體，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止處理因為發生錯誤的系統或訊息中。 一般來說，因系統錯誤而擱置的執行個體會在系統問題獲得解決後繼續。 通常，因訊息有問題而擱置的執行個體是不可繼續處理，而且必須修正訊息本身，並提交至[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。<br /><br /> 擱置的訊息佇列是包含的錯誤或失敗的處理過程中發現的工作項目。 訊息擱置佇列會儲存訊息直到修正和重新處理或是刪除後為止。 這項分析會檢查任何擱置的訊息出現。 增加的趨勢可能表示嚴重的處理錯誤。<br /><br /> 參考： BizTalk Server 2004： 監視，並在進行疑難排解 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)                                                                                                                                                                                          |
|                     BizTalk Server: BizTalk 閒置協調流程                      |                                                                                                                    目前由主控件執行個體裝載而閒置的協調流程執行個體數。 此計數器是指不進行進度，但不是可凍結的協調流程。 協調流程會遭到封鎖時，可能會發生這種情況下等待接收，接聽或不可部分完成的交易的延遲時間。 如果大量的非可凍結的協調流程會累積，BizTalk 可能會用盡記憶體。<br /><br /> 凍結是將協調流程狀態序列化到 SQL Server 資料庫中的程序。 解除凍結是此程序的反向： 還原序列化之資料庫的協調流程最後一個執行中狀態。 凍結是藉由減少必須一次在記憶體中產生的協調流程數目，來將系統資源的使用降至最低。 引擎會儲存狀態以凍結執行個體，並釋出執行個體所需的記憶體。 透過凍結休眠的協調流程執行個體，引擎就可以讓大量的長時間執行之商務程序在相同電腦上同時執行。 這項分析會檢查遞增趨勢的每小時一個閒置的協調流程。<br /><br /> 參考： 協調流程凍結和解除凍結，在  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)                                                                                                                     |
|                       BizTalk Server: BizTalk 輸入延遲                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        平均延遲 （毫秒），傳訊引擎收到文件從配接器之前發佈到 MessageBox。 減少延遲，請務必使用的 BizTalk 中，某些使用者因此追蹤時間的文件花費在輸入配接器是很重要。 如需詳細資訊，請參閱 BizTalk 輸入延遲分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                    BizTalk Server: BizTalk 訊息傳遞延遲                    |                                                                                                                                                                         這是目前的延遲毫秒 (ms) 每個訊息傳遞批次 （適用於訊息傳遞正在進行節流）。 節流的相關事宜，在發行或處理訊息，根據訊息是傳入或傳出時套用延遲。 延遲期間節流狀況的嚴重性成正比。 較高的嚴重性節流狀況將會起始與較低的嚴重性節流狀況的更長的節流期間。 透過狀況變更時的節流機制，這個延遲期間可在特定範圍內上下調整。 目前的延遲期間會公開透過訊息傳遞延遲 （毫秒） 」 和 「 訊息發佈延遲 （毫秒） 效能計數器與 biztalk： 訊息代理程式的效能物件類別相關聯。 這項分析會檢查訊息傳遞延遲大於 5 秒。 長訊息傳遞延遲，可能表示大量的節流，因為高負載。<br /><br /> 參考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)                                                                                                                                                                         |
|              BizTalk Server: BizTalk 訊息傳遞節流狀態               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           BizTalk 訊息傳遞節流狀態是節流的主要指標。 它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸出傳輸） 的訊息傳遞。 節流情況是計數器的數值表示。 如需詳細資訊，請參閱本主題中的 BizTalk 訊息傳遞節流狀態分析。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                   BizTalk Server: BizTalk 訊息發佈延遲                   |                                                                                                                                                                                                    插入每個合格批次因為調整訊息發佈延遲。 節流的相關事宜，在發行或處理訊息，根據訊息是傳入或傳出時套用延遲。 延遲期間節流狀況的嚴重性成正比。 較高的嚴重性節流狀況將會起始與較低的嚴重性節流狀況的更長的節流期間。 透過狀況變更時的節流機制，這個延遲期間可在特定範圍內上下調整。 目前的延遲期間會公開透過訊息傳遞延遲 （毫秒） 」 和 「 訊息發佈延遲 （毫秒） 效能計數器與 biztalk： 訊息代理程式的效能物件類別相關聯。 這項分析會檢查訊息，發佈大於 5 秒的延遲。 長訊息傳遞延遲，可能表示大量的節流，因為高負載。<br /><br /> 參考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)                                                                                                                                                                                                    |
|           BizTalk Server: BizTalk MessageBox 資料庫連線失敗            |                                                                                                                                                                                                                                                                                                                                                                                     此效能計數器是資料庫連線嘗試失敗，因為啟動主控件執行個體的數目。 如果因為任何原因，裝載 BizTalk 資料庫的 SQL Server 服務變成無法使用，資料庫叢集會將資源從主動電腦傳送到被動電腦中。 容錯移轉過程中，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]服務執行個體發生資料庫連線失敗，並自動重新啟動以重新連接到資料庫。 正在運作的資料庫電腦 (先前為被動電腦) 會在容錯移轉期間獲得資源後，開始處理資料庫連接。 如需詳細資訊，請參閱 BizTalk MessageBox 資料庫連線失敗分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                      |
|         BizTalk Server: BizTalk 傳訊延遲： 要求回應延遲         |                                                                                                                                                                                                                                                                                                                                                              傳訊引擎從配接器收到要求文件，到回應文件傳回該配接器之間的平均延遲 (毫秒)。 請參閱 BizTalk 輸入延遲分析中測量延遲是如何，本主題中所顯示的圖表。 假設低延遲的環境，這項分析會檢查大於 5 秒的要求-回應延遲。 這可能表示輸入配接器和輸出配接器之間的處理延遲。<br /><br /> 參考：<br /><br /> -要求/回應訊息在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)<br />BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)                                                                                                                                                                                                                                                                                                                                                              |
|            BizTalk Server: BizTalk 訊息發佈節流狀態             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           BizTalk 訊息發佈節流狀態是節流的主要指標。 它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸入的傳輸） 的訊息發佈。 如需詳細資訊，請參閱 BizTalk 訊息發佈節流狀態分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                BizTalk Server: BizTalk 協調流程已暫止/秒                |                                                                                                                                                                                                                                                                                                                                                                                        擱置的訊息是訊息或協調流程的執行個體，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止處理因為發生錯誤的系統或訊息中。 一般來說，因系統錯誤而擱置的執行個體會在系統問題獲得解決後繼續。 通常，因訊息有問題而擱置的執行個體是不可繼續處理，而且必須修正訊息本身，並提交至[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。 這項分析會檢查任何擱置的訊息/協調流程。<br /><br /> 參考： BizTalk Server 2004： 監視，並在進行疑難排解 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)                                                                                                                                                                                                                                                                                                                                                                                        |
|               BizTalk Server: BizTalk 協調流程已完成/秒                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       這是已完成的 BizTalk 協調流程數 / 秒。 這是很好的指標，指出在處理 BizTalk 多少輸送量。 這項分析會提供僅限統計資料。<br /><br /> 參考： BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究 <br />[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                   BizTalk Server: BizTalk 協調流程捨棄                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          自從主控件執行個體啟動之後，已從記憶體捨棄的協調流程執行個體數。 如果引擎無法保存協調流程的狀態，即可予以捨棄。 這項分析會檢查有任何已捨棄的訊息。<br /><br /> 參考： BizTalk 核心引擎的部落格<br />[http://go.microsoft.com/fwlink/?linkid=108775](http://go.microsoft.com/fwlink/?linkid=108775)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|              BizTalk Server: BizTalk 協調流程常駐在記憶體中               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           目前由主控件執行個體裝載的協調流程執行個體數。 這項分析會檢查遞增趨勢中的記憶體，以及超過 50%的記憶體中駐留的協調流程不是可凍結的協調流程中。 如需詳細資訊，請參閱 BizTalk 協調流程常駐在記憶體分析。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                   BizTalk Server: BizTalk 配接器輸出延遲                   |                                                                                                  這是配接器收到文件，傳訊引擎從配接器傳送的時間之前的秒數的平均延遲。 請參閱 BizTalk 輸入延遲分析中測量延遲是如何，本主題中所顯示的圖表。 假設低延遲的環境，這項分析會檢查在輸出配接器中的大於 5 秒的延遲平均。 這可能表示之傳輸的訊息透過此主控件執行個體中的輸出配接器的處理延遲。 如果多個輸出配接器存在於此主控件執行個體，請考慮將它們分割到他們自己的主機，以判斷哪一個輸出配接器具有高延遲。<br /><br /> 參考：<br /><br /> -要求/回應訊息在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)<br />BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)<br />識別 BizTalk 層中的瓶頸 [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)<br />BizTalk Server 2004： 的低延遲的訊息以效能微調 [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)                                                                                                   |
|                       暫止訊息的 BizTalk Server: BizTalk                       |                                                                                                                                                                                                        接收到 MessageBox 收到尚未認可的訊息數目。 擱置的訊息會有已提取至記憶體，並傳遞至 XLANG 協調流程中，但是尚未已處理訊息。 這種情況下有不執行任何動作，而遺失資料。  傳遞訊息至協調流程是多步驟程序，只是位在資料庫中的多工緩衝處理資料表中的訊息執行個體。 這些暫止訊息計數為內含式訊息;因此，需要大量的記憶體中可能會導致記憶體節流設定在系統上。 調整 [內部訊息佇列大小] 設定將有助於與可控制的暫止訊息數目。 每個 CPU 的內含式訊息設定會影響當節流會叫用大量的暫止訊息發生時。 在 BizTalk 管理主控台中的主控件屬性中找到這些設定。 這項分析會檢查只為這個計數器會顯示統計資料。<br /><br /> 參考： 在協調流程引擎效能計數器 [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)                                                                                                                                                                                                         |
|                  BizTalk Server: BizTalk 持續點/秒                   |                                                                                         平均每秒保存的協調流程執行個體數。 協調流程引擎會在不同點儲存執行中協調流程執行個體的狀態。 如果需要解除凍結協調流程執行個體、 從受控制的關機，啟動或從復原意外關機，則它會從上次保存點執行協調流程執行個體。 若要將保存協調流程執行個體，所有物件協調流程直接或間接參考的執行個體 （像是透過其他物件） 必須是可序列化。 為訊息保存頻率 （資料需要保存的時間的數字） 增加，整體效能會降低。 實際上，每個持續點是資料庫往返，因此盡可能減少持續點的頻率避免或彙總的持續點。 請參閱下列參考，如需持續點發生的時機詳細資訊。 這項分析會檢查超過 10 個持續點，每秒平均。 這是一般的起始點。<br /><br /> 參考：<br /><br /> -在協調流程中的持續性 [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)<br />持續性及在協調流程引擎 [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)                                                                                         |
|                        BizTalk Server: BizTalk 私用位元組                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       這是主控件執行個體，與比較的私用記憶體配置的 mb"\Process (\*) \Private 位元組 」 效能計數器。 這項分析會判斷任何主控件執行個體是否使用大型系統的記憶體大小和主控件執行個體是否持續一段時間的記憶體耗用量增加。 本主題，如需詳細資訊，請參閱 BizTalk 私用位元組分析。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                       BizTalk Server: BizTalk 多工緩衝處理表格大小                       |                                                  MessageBox 多工緩衝處理表格包含系統中的每個訊息的記錄 (作用中或等候 「 回收 」)。 監視此資料表中的資料列數目和增加系統負載提供簡單的方法來尋找最大持續輸送量時，每秒接收的訊息數目。 只要增加可能是 1) 的多工緩衝處理表格開始無限成長之前的輸入的負載或 2） 每個第二個富饒，視何者先，也就是您最大持續輸送量所接收的訊息數目。 總而言之，無論其他指標，此量值會讓您快速且輕鬆的方式，來評估您的系統過度不。 當 BizTalk 多工緩衝處理表格大小會增加的趨勢時，然後由於而進行節流不平衡的訊息傳遞速率 （輸入的速率超過輸出速率） 或可能是由於資料庫大小而進行節流。 這項分析會檢查在 BizTalk 多工緩衝處理表格大小增加的趨勢。<br /><br /> 參考：<br /><br /> -了解 BizTalk Server 2004 SP1 輸送量和容量 [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)<br />-持續性負載測試 [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)<br />-建議測試引擎效能時 [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)                                                   |
|                      BizTalk Server: BizTalk 追蹤資料大小                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                  當 BizTalk Server 處理您的系統上的多資料時，BizTalk 追蹤資料庫 (BizTalkDTADb) 持續成長的大小。 若未發現此成長現象將會降低系統效能，並且可能會在 Tracking Data Delivery Service (TDDS) 中產生錯誤。 除了一般追蹤資料以外，追蹤的訊息也會累積在 MessageBox 資料庫，導致磁碟效能變差。 這項分析會檢查超過 5 mb 的每小時追蹤以遞增趨勢的資料大小。<br /><br /> 參考：<br /><br /> 封存和清除 BizTalk 追蹤資料庫  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                 BizTalk Server: BizTalk 交易式範圍中止                 |                                                                                                                                                                                                                                                                                       這是主控件執行個體啟動後已中止的長時間執行或不可部分完成的範圍數目。 交易式範圍中止為協調流程內的交易範圍內發生的失敗。 請務必了解的範圍已順利完成，但是然後才可以復原，因為周圍的範圍已決定中止 （因為在程序稍後可能會發生的失敗） 時，才可以叫用範圍的補償處理常式。 此外，「 自動 」 復原的狀態就會發生交易中止時。 您可以達到這個結果，以程式設計方式透過例外狀況和補償處理常式。 交易式範圍中止應該不通常發生在生產環境中;因此，這項分析會檢查任何中止的交易式範圍的相符項目。<br /><br /> 參考：<br /><br /> 交易，無論在 BizTalk Server 2004 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)                                                                                                                                                                                                                                                                                       |
|               BizTalk Server: BizTalk 交易式範圍補償               |                                                                                                                                                                                                                                                                                                                                  補償可以視為邏輯復原已成功提交回應某個錯誤狀況的工作。 請務必了解的範圍已順利完成，但是然後才可以復原，因為周圍的範圍已決定中止 （因為在程序稍後可能會發生的失敗） 時，才可以叫用範圍的補償處理常式。 此外，「 自動 」 復原的狀態就會發生交易中止時。 您可以透過例外狀況和補償處理常式，以程式設計方式來達成這點。 交易式範圍的補償不應該通常發生在實際執行環境;因此，這項分析會檢查任何中止的交易式範圍的相符項目。<br /><br /> 參考： 交易，無論在 BizTalk Server 2004 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)                                                                                                                                                                                                                                                                                                                                   |
|                        BizTalk 虛擬位元組時，BizTalk Server:                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         這是保留給主控件執行個體的虛擬記憶體 （mb）。 這項分析會判斷是否任何主控件執行個體正在耗用大量系統的記憶體和主控件執行個體是否持續一段時間的記憶體耗用量增加。 如需詳細資訊，請參閱 BizTalk 虛擬位元組分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|          BizTalk Server: BizTalk 訊息代理程式工作階段節流的資料庫           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 這是相較於其節流設定的個別 BizTalk MessageBox 的開啟資料庫連線數目。 「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。 如需詳細資訊，請參閱 BizTalk 訊息代理程式資料庫工作階段節流分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|     BizTalk Server: BizTalk 訊息代理程式資料庫工作階段節流閾值      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          這是到 MessageBox 的開啟資料庫連線數目的目前閾值。 「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。 如需詳細資訊，請參閱 BizTalk 訊息代理程式資料庫工作階段節流閾值分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|      BizTalk Server: BizTalk 訊息代理程式內含式訊息計數節流       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   這是服務類別正在處理的並行訊息數目。 「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。 如需詳細資訊，請參閱本主題中 BizTalk 訊息代理程式內含式訊息計數節流分析。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| BizTalk Server: BizTalk 訊息代理程式內含式訊息計數節流閾值  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 這是目前的服務類別正在處理的並行訊息數的閾值。 「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。 如需詳細資訊，請參閱 BizTalk 訊息代理程式內含式訊息計數節流閾值分析本主題中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|      BizTalk Server: BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    這是目前的處理序 (MB) 的記憶體使用量。 如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。 如需詳細資訊，請參閱本主題中的 BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流分析。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| BizTalk Server: BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流閾值 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         這是目前的處理序 (MB) 的記憶體使用量的目前閾值。 閾值可以根據實際數量的記憶體可供此程序和其記憶體耗用量模式動態調整。 如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。 如需詳細資訊，請參閱 BizTalk 訊息代理程式處理序記憶體使用量 (MB) 本主題中的節流臨界值分析。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|            節流的 BizTalk Server: BizTalk 訊息代理程式執行緒計數             | BizTalk 處理序中執行緒的總數。 「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。 若超過此閾值，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式執行緒集區的大小。 在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。 此參數會同時影響輸入和輸出節流。 依預設會停用執行緒為基礎的節流。 這項分析會檢查 BizTalk 執行緒計數是否大於 80%的節流的臨界值，指出可能的節流狀況。<br /><br /> 參考：<br /><br /> -主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)<br />-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)<br />-如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)<br />會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)<br />執行緒，資料庫中工作階段，並在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793) |
|       節流臨界值的 BizTalk Server: BizTalk 訊息代理程式執行緒計數        |                    這是目前的處理序中的執行緒總數閾值。 「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。 若超過此閾值，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式執行緒集區的大小。 在其中高負載可能會導致建立大量執行緒的情況下應該啟用執行緒為基礎的節流。 此參數會同時影響輸入和輸出節流。<br /><br /> 這項分析會檢查此節流的設定是否設定為非預設值。 依預設會停用執行緒為基礎的節流。<br /><br /> 參考：<br /><br /> -主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)<br />-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)<br />-如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)<br />會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)<br />執行緒，資料庫中工作階段，並在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)                    |

## <a name="logicalphysical-disk-readwrite-latency-analysis"></a>邏輯/實體磁碟讀取/寫入延遲分析  
 Windows 偵測到的磁碟效能瓶頸，最可靠方式是藉由測量其回應時間。 如果回應時間大於.025 （25 毫秒為單位），這是保守的臨界值，然後可能會發生明顯的速度變慢和會影響使用者的效能問題。  

 不佳的磁碟延遲的常見原因是磁碟分散程度，效能快取、 使用量飽和的 SAN，並在磁碟上的負載過大。 使用 SPA 工具來協助識別的前幾個檔案和使用磁碟的程序。 也請檢查"處理序 IO Data Operations/sec"和"處理序 IO 其他 Operations/sec"，了解哪些處理程序會使用最多磁碟 I / O 的 請記住，效能監視器計數器無法指定涉及哪些檔案。  

### <a name="references"></a>參考  

-   排除磁碟繫結的問題 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)  

-   如何找出使用 Microsoft Server 效能 Advisor (SPA) 工具，在磁碟效能瓶頸 [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)  

-   在 Microsoft 服務 Performance Advisor (SPA) 下載詳細資料： [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)  

## <a name="logical-disk-transferssec"></a>Logical Disk Transfers/sec  
 "Disk Transfers/sec"是讀取的速度和寫入磁碟上的作業。 雖然磁碟轉移操作不是直接的相互關聯至磁碟 I / O 的他們告訴我們發生多少磁碟作業。 如果您平均循序我 / O 的隨機 I / O 的則您會得到大約 80 I / O 的每個第二個一般的經驗法則。 因此，我們應該預期 SAN 磁碟機執行超過 80 I/O 的每個底下的第二個 when 載入。 這項分析檢查以查看是否有任何邏輯磁碟的臨界值會顯示回應時間不佳 （大於 25 毫秒回應時間的 I/O 作業）。 如果為 true，我們應該預期每秒要等於或高於 80 磁碟轉移操作。 如果沒有，則磁碟架構需要進行調查。 不佳的磁碟 I/O 的最常見原因是多載 san – 這表示多個 LUN 使用小型的實體磁碟陣列的位置條件的邏輯單元編號 (LUN)。  

### <a name="reference"></a>參考  
 NT 伺服器和磁碟子系統效能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)  

## <a name="available-memory-analysis"></a>可用的記憶體分析  
 "Available Mbytes 」 是以 mb 為單位的電腦上執行的處理序可用的實體記憶體數量。 虛擬記憶體管理員會持續調整用於在實體記憶體和磁碟上維護最小作業系統和處理序的可用位元組數目的空間。 當可用的位元組是大量時，虛擬記憶體管理員可讓處理程序的工作集成長，或使其保持在穩定藉由移除舊的頁面，加入每一個新頁面。 可用的位元組數時，虛擬記憶體管理員必須修剪流程，以便維持所需的最小工作集。  

 這項分析會檢查以查看總可用記憶體是否不足 – 10%可用警告] 和 [可用的 5%的重大。 警告也會收到警示，遞減趨勢 10 MB 的每小時會偵測到，指出潛在的即將發行的記憶體狀態。 增加的特殊權限模式下 CPU 和系統的延遲，可能會導致實體記憶體不足。  

### <a name="references"></a>參考  

-   在偵測記憶體瓶頸 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)  

-   排除記憶體繫結的問題 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)  

## <a name="memory-leak-detection-analysis"></a>記憶體流失偵測分析  
 這項分析會判斷是否有任何處理序正在耗用大量系統的記憶體和處理程序是否持續一段時間的記憶體耗用量增加。 耗用記憶體的很大一部分的程序也沒關係，只要處理程序傳回給系統的記憶體。 尋找增加圖表中的趨勢。 這段很長一段時間增加的趨勢可能表示記憶體流失。 私用位元組是記憶體的目前的大小，以位元組為單位，此程序已配置，不能與其他處理序共用。 這項分析會檢查 10 MB 的每小時和 5 MB 的每小時增加的趨勢。 您可以使用這項分析中可用的記憶體分析與相互關聯。  

 此外，請記住，新啟動處理程序一開始會顯示為記憶體流失時只是一般的啟動行為。 當處理程序會繼續耗用記憶體，並不會釋放記憶體一段長時間，就會發生記憶體流失。  

 如果您懷疑有記憶體流失情況，然後安裝並使用偵錯診斷工具。 如需有關 「 偵錯診斷工具的詳細資訊，請參閱 [參考] 區段。  

### <a name="reference"></a>參考  
 偵錯在診斷工具 v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

## <a name="memory-pagessec-analysis"></a>記憶體每秒頁面分析  
 這項分析會檢查 「 頁/秒 」 是否很高。 是否很高，然後系統可能用盡記憶體嘗試分頁至磁碟的記憶體。 「 頁/秒 」 是在讀取或寫入磁碟以解決硬體分頁錯誤頁面的速率。 此計數器是導致整個系統延遲錯誤的種類的主要指示器。  它是 「 Memory\Pages Input/sec"和"Memory\Pages Output/sec"的總和。 它會計算分頁數，因此它可以與其他分頁數，例如"Memory\Page Faults/sec"。  

 此計數器，一律應低於 1,000。 這項分析會檢查超過 1,000 個的值。 您可以使用這項分析中可用的記憶體分析與記憶體流失偵測分析與相互關聯。 如果所有分析會在此同時，擲都回警示，這可能表示系統已用盡記憶體。 請遵循本主題中的其他資訊有關記憶體流失偵測分析中所述的分析步驟。  

### <a name="reference"></a>參考  
 排除記憶體繫結的問題 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)  

## <a name="memory-system-cache-resident-bytes-analysis"></a>記憶體系統快取常駐位元組分析  
 「 系統快取常駐位元組 」 是大小，以位元組為單位的可分頁作業系統程式碼，在檔案系統快取中。 此值包含目前的實體頁面，而不包含任何非目前駐留的虛擬記憶體分頁。 它等於顯示在 工作管理員的系統快取值。 如此一來，此值可能小於實際的使用中的檔案系統快取的虛擬記憶體量。 這個值是元件的 「 記憶體\\\System 常駐位元組的程式碼 」，表示目前位於實體記憶體的所有可分頁作業系統程式碼。 此計數器會顯示最後觀察到的值它不是平均值。  

 這項分析會檢查每小時遞增趨勢 10 mb。 在負載下，伺服器可能會使用系統快取，以便快取 I/O 活動，例如磁碟。 用於相互關聯處理序 IO Data Operations/sec 與其他處理序 IO 作業數/秒的分析。  

## <a name="processor-utilization-analysis-and-excessive-processor-use-by-processes"></a>處理器使用率分析和處理序過度佔用處理器使用  
 「 處理器時間百分比 」 是處理器花費在執行非閒置執行緒所經過時間的百分比。 其計算方式是測量閒置執行緒處於使用中取樣間隔時間的持續時間，然後再從減去該時間間隔持續時間。 （每顆處理器具有閒置執行緒可消耗的週期沒有其他執行緒已準備好執行時）。此計數器是處理器活動的主要指標，並顯示在取樣間隔時間期間觀察到的忙碌時間平均百分比。 其計算方式是監視該服務處於非使用狀態的時間，然後從 100%減去該值。  

 這項分析會檢查使用率大於 60%，每個個別的處理器上。 如果是的話，判斷它是否高使用者模式 CPU 或高特殊權限的模式。 如果懷疑高特殊權限的模式 CPU，則會看到 「 特殊權限模式 CPU 分析 」。 如果懷疑的使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用量的函式。 請參閱 「 如何來： 識別造成高的使用者模式 CPU 瓶頸的伺服器應用程式在生產環境中的函式 「 如需詳細資訊的 [參考] 區段中的發行項。  

## <a name="processor-queue-length-analysis"></a>處理器佇列長度分析  
 「 處理器佇列長度 」 是處理器佇列中的執行緒數目。 不同於磁碟計數器，此計數器會顯示準備就緒的執行緒，不會執行的執行緒。  即使使用多個處理器的電腦上，有處理器時間僅有單一佇列。 因此，如果電腦有多個處理器，您需要此值除以處理工作負載的處理器數目。 佇列持續少於 10 個執行緒，每個處理器是可以接受相依的工作負載。  

 這項分析會判斷平均處理器佇列長度是否超過處理器的數目。 如果是的話，這可能表示發生處理器瓶頸。 您可以使用這項分析中具有特殊權限的模式 CPU 分析和處理序過多的處理器使用的相互關聯。 處理器佇列已準備好，但不能以處理器執行，因為目前正在執行另一個使用中執行緒的執行緒的集合。 持續性或週期性的多個執行緒的處理器數目超過佇列是處理器瓶頸的徵兆。  

 您可以使用此計數器搭配 「 處理器\\%Processor Time"計數器，判定是否您的應用程式可受益於更多的 Cpu。 沒有單一佇列的處理器時間，即使在多處理器電腦上。 因此，在多處理器的電腦中，「 處理器佇列長度 」 (PQL) 值除以處理工作負載的處理器數目  

 如果 CPU 是非常忙碌 （90%和更高的使用率） 和 PQL 平均一直高於處理器數目，則您可能無法受益於額外的 Cpu 處理器瓶頸。 或者，您可以減少執行緒和應用程式層級的佇列數目。 這會導致較少的內容切換，這是適合用來減少 CPU 負載。 處理器時間的要求到達隨機，，和執行緒需求異常大量的處理器時間高 PQL 低 CPU 使用率的常見原因。 這表示處理器不是瓶頸。 相反地，執行緒的邏輯，需要改善。  

 如果懷疑的使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用量的函式。 請參閱 「 如何來： 識別造成高的使用者模式 CPU 瓶頸的伺服器應用程式在生產環境中的函式 「 如需詳細資訊的 [參考] 區段中的發行項。  

## <a name="privileged-mode-cpu-analysis"></a>特殊權限的模式 CPU 分析  
 此計數器表示執行緒在特權模式下所執行時間的百分比。 當您的應用程式呼叫作業系統 （例如來執行檔案或網路 I/O，或配置記憶體） 的函式時，這些作業系統函式會執行特殊權限模式。  

 高特殊權限的模式 CPU 指出電腦花太多時間在真實 （使用者模式） 與系統 I/O 的工作。 "%授權的時間 」 是處理序執行緒花在特權模式下執行的程式碼的經過時間的百分比。  呼叫 Windows 系統服務時，服務通常會在取得存取權系統私用資料的特殊權限模式執行。 這類資料會受到在使用者模式中執行的執行緒存取。 對系統的呼叫可以是明確或隱含方式，例如分頁錯誤或中斷。 與某些早期作業系統不同 Windows 會使用處理序界限來保護子系統的傳統保護除了使用者和特殊權限的模式。 由 Windows 代表應用程式某些工作可能會出現在其他子系統處理序，除了處理序中的特殊權限時間之外。  

 這項分析會檢查以了解多達 30%的總 CPU 時，是否要使用特殊權限的模式 CPU。 如果如此，則 CPU 耗用量是可能的處理器，例如網路、 記憶體或磁碟 I/O 以外的另一個瓶頸所造成。 用於相互關聯與 %Interrupt Time 過高內容切換的分析。  

## <a name="high-context-switching-analysis"></a>高內容切換分析  
 當高優先順序的執行緒優先執行的較低優先順序的執行緒目前正在執行，或當高優先順序執行緒會封鎖，就會發生內容切換。 當許多執行緒共用相同的優先權層級時，可能會發生高層級內容切換。 這通常表示太多的執行緒會競爭處理器系統上。 如果您看不太多的處理器使用率，而且您查看非常低的層級內容切換，則可能表示執行緒會被封鎖。  

 高內容切換只應該加以調查，高 CPU 和整體 CPU 的特殊權限的模式時。 一般而言，內容 5,000 個以下，每個處理器每秒切換速率不值得擔心。 如果內容切換率超過 15,000 每秒，每個處理器，則沒有條件約束。  

 這項分析會檢查高 CPU、 高特殊權限的模式 CPU 和高 （超過 5,000 每個處理器） 系統內容會切換每秒所有發生在相同的時間。 如果發生高內容切換，然後以減少執行緒和處理序在系統上執行的數目。  

## <a name="biztalk-high-database-sessions-analysis"></a>BizTalk 高資料庫工作階段分析  
 此計數器會有兩個可能的值也就是正常 (0)，或超過 (1)。 這項分析會檢查值為 1。 如果是的話，BizTalk 就已超過允許的資料庫工作階段數目的臨界值。 這個值是 「 每一 CPU 的資料庫連線 」 值中的 BizTalk 主控件節流設定所控制。  

 「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。 一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。 此選項會停用的預設值;一般而言，這項設定應該只啟用如果資料庫伺服器是瓶頸或低階的資料庫伺服器的 BizTalk Server 系統中。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中的資料庫連線數目。 此參數只會影響輸出訊息節流。 輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。 預設值是 0。  

> [!NOTE]  
>  「 MaxWorkerThreads"登錄機碼會影響 biztalk 可用的執行緒數目，並有助於如果大部分的 BizTalk 執行緒忙碌中，資料庫連接。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  

-   會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

## <a name="biztalk-high-database-size-analysis"></a>BizTalk 高資料庫大小分析  
 此計數器是指在此程序已發佈的資料庫佇列中的訊息數目。 這個值是由所有主控件的佇列表格中之項目數目以及多工緩衝處理與追蹤表格中的項目數目來測量。 佇列包含在工作佇列、 狀態佇列和擱置的佇列。 若程序正發佈到多個佇列，則此計數器會反映所有佇列的加權平均值。  

 若重新啟動主控件，則會遺失保留在記憶體中的統計值。 因為涉及一些額外負荷時，BizTalk Server 將會繼續收集統計資料，只有當有至少 100 發佈，其中 5%的總會發佈在重新啟動主控件程序中。  

 此計數器將集合設為 1 的值，如果任一個條件，列出資料庫閾值中的訊息計數，就會發生。 此閾值記錄主題中的 < 如何修改預設主控件節流設定下列參考。 根據預設主機訊息資料庫節流閾值中的計數是設定為 50000，會觸發節流情況，在下列情況下的值：  

- 主控件執行個體發佈到訂閱之主控件的工作、狀態和擱置佇列的訊息總數超過 50,000。  

- 多工緩衝處理表格或追蹤表格中的訊息數目超過 50,000 個訊息。  

  即使 BizTalk server 發生低或完全無負載中 database 計算中的訊息計數包含擱置的訊息，因為是的訊息發佈節流設定會發生的。  

  這項分析會檢查值為 1。 如果發生這種情況，請考慮採取的動作，將會減少在資料庫中的訊息數目。 比方說，確定 BizTalk SQL Server 工作正在執行不會發生錯誤，並在 BizTalk 管理主控台中使用 群組中樞，以判斷是否要將訊息增多造成的大量擱置的訊息。  

### <a name="references"></a>參考  

-   在 資料庫節流閾值中訊息計數包含擱置的訊息 [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

## <a name="biztalk-high-in-process-message-count-analysis"></a>BizTalk 高內含式訊息計數分析  
 「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。 此數目不包含擷取自資料庫，但仍然等候中的記憶體中佇列傳遞的訊息。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的內含式訊息計數效能計數器來監視內含式訊息數目。 當您考慮節流狀況時，這個參數會提供提示給節流機制。 實際閾值會受自我調整影響而不同。 您可以監視的內含式訊息計數效能計數器，以確認實際閾值。  

 這個參數可以將大型訊息實例，其中的平均訊息大小很高，或訊息的處理可能需要大量的訊息較小的值。 如果案例發生記憶體為根據的節流太頻繁，而且記憶體臨界值可讓您取得自動調整為相當低的值，這很明顯。 此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。 此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。  

 這項分析會檢查高內含式訊息計數 」 計數器來判定是否發生這種節流。 如果是的話，請考慮調整的 「 訊息每一 CPU 的內含式 」 的設定。 此參數只會影響輸出訊息節流。 若要停用節流設定的每一 CPU 的內含式訊息數目為基礎的 「 訊息每一 CPU 的內含式 」 設定中輸入值為 0。 「 訊息每一 CPU 的內含式 」 設定的預設值為 1,000。 請注意，修改這個值可以也會影響低延遲的訊息及/或 BizTalk 資源的效率。  

### <a name="references"></a>參考  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

## <a name="biztalk-high-message-delivery-rate-analysis"></a>BizTalk 高訊息傳遞速率分析  
 對於輸出 （已傳遞） 訊息，BizTalk Server 會調整訊息的傳遞如果主控件執行個體的訊息傳遞內送速率超過訊息傳遞外寄速率 * 指定的速率增加因數 （百分比） 值。 在訊息處理節流設定 對話方塊中，速率增加因數 （百分比） 參數是可設定的。 輸出訊息的速率型節流是主要是由從記憶體中佇列中移除訊息，並將訊息傳遞到結束點管理員 」 (EPM) 或協調流程引擎以進行處理之前，引發延遲來完成。 若要完成輸出訊息的速率型節流會不採取任何其他動作。  

 輸出節流會造成訊息延遲傳遞，而且訊息可能建立在記憶體中佇列內，並造成清除佇列執行緒遭到封鎖，直到移轉了節流狀況為止。 當清除佇列執行緒遭到封鎖，，沒有其他訊息從 MessageBox 提取至記憶體中的佇列進行輸出傳遞。  

 這項分析會檢查高訊息傳遞速率計數器中的 1 的值。 高訊息傳遞速率可能因高處理複雜性、 慢速輸出配接器或暫時的系統資源不足。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

## <a name="biztalk-high-process-memory-analysis"></a>BizTalk 高程序記憶體分析  
 節流臨界值 設定的 BizTalk 程序記憶體使用量是記憶體的比較可用虛擬記憶體的處理序與工作集大小的總和，如果輸入從 1 到 100 的值使用百分比。 根據預設，BizTalk 處理序記憶體使用量節流設定為 25。 當指定某個百分比值時，則會以定期間隔重新計算程序記憶體閾值。 如果使用者指定的百分比值，它將會以根據可用的記憶體為認可和目前的處理序記憶體使用量計算。  

 這項分析會檢查高的處理序記憶體計數器中的 1 的值。 如果發生這種情況，然後再次嘗試使用 Debug diag 塊來判斷記憶體增加的原因 （請參閱中的記憶體流失偵測分析的參考）。 請注意，是它正常的處理程序期間啟動，而這會耗用相當可觀的記憶體可能一開始會顯示為記憶體流失，但在處理序無法釋放不再需要藉此減少可用的我的記憶體時，就會發生真正的記憶體遺漏mory 經過一段時間。 如何以一般方式分析在 BizTalk 中的程序記憶體流失，請參閱下面的 「 如何以擷取記憶體傾印的處理程序，是流失記憶體 」 參考及/或 PAL 中的 「 記憶體流失偵測 」 分析，如需詳細資訊。  

 高程序記憶體節流發生的原因要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息。  若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。 如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，則請考慮減少內部訊息佇列大小的值，內含式訊息，每一 CPU 閾值。 此策略特別會與大型訊息處理實例有關。 此外，這個值應設為需要大量記憶體需求，每個訊息的案例較低的值。 設定較低的值，會及早節流開始作用，並防止在程序中的記憶體量暴增。  

 如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。 在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2GB 的 32 位元。 一般情況下，強烈建議 64 位元 BizTalk 和 64 位元 SQL Server。 請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。  

### <a name="references"></a>參考  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

-   如何擷取發生記憶體溢位在的處理序的記憶體傾印 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)  

-   在 BizTalk Server 64 位元支援 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)  

## <a name="biztalk-high-system-memory-analysis"></a>BizTalk 高系統記憶體分析  
 BizTalk 的實體記憶體使用量節流臨界值設定為輸入則是相較於若其值的可用實體記憶體的總量，從 1 到 100 的記憶體耗用量的百分比。 如果您輸入大於 100 的值，這項設定也可以是以 mb 為單位的可用實體記憶體的總量。 輸入值為 0 時可停用以實體記憶體使用量為基礎的節流。 預設值是 0。  

 這項分析會檢查系統的高記憶體計數器中的 1 的值。 因為這會測量系統記憶體總量，若非 BizTalk Server 程序正耗用過量的系統記憶體，則可能觸發節流狀況。 因此如果發生這種情況，最好的方法是找出哪些處理程序正在耗用最多實體記憶體和/或將額外的實體記憶體新增至伺服器。 此外，請考慮減少負載，藉由減少 EPM 執行緒集區的預設大小和 （或） 配接器批次大小。 如需詳細資訊，請參閱 PAL 中的記憶體流失偵測分析。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

## <a name="biztalk-high-thread-count-analysis"></a>BizTalk 高執行緒計數分析  
 「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。 如果超過此臨界值時，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式 」 執行緒集區的大小。 在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。 此參數會同時影響輸入和輸出節流。 依預設會停用執行緒為基礎的節流。  

> [!NOTE]  
>  使用者指定的值做為指導方針，以及主應用程式可能會以動態方式自我調整此記憶體使用量模式和處理序執行緒需求為基礎的臨界值。  

 這項分析會檢查高執行緒計數計數器中的 1 的值。 考慮調整不同的執行緒集區大小，以確定系統不會建立大量的執行緒。 這項分析可以相互關聯與內容切換每個第二個的分析，以判斷是否作業系統已飽和，太多的執行緒，但在大部分情況下，高執行緒計數原因後端資料庫與 BizTalk server 上的多個競爭。 如需修改執行緒集區大小的詳細資訊請參閱 < 如何修改預設主控件節流設定在參考中。  

### <a name="references"></a>參考  

- 主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

- BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

- 如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

- 會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  

- 執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  

  BizTalk 輸入延遲 AnalysisAverage 延遲 （毫秒），傳訊引擎收到文件從配接器之前發佈至 messagebox。 減少延遲，請務必使用的 BizTalk 中，某些使用者因此追蹤時間的文件花費在輸入配接器是很重要。  

  以下是顯示方式測量延遲的圖表。  

|1|2|3|4|5|6|  
|-------|-------|-------|-------|-------|-------|  
|配接器接收訊息並提交到引擎，訊息傳送給不引擎之前，配接器中完成的工作擷取這些效能計數器|引擎從配接器接收訊息、 執行接收管線、 對應、 訂用帳戶評估，持續在 DB 中的訊息。|協調流程或請求-回應連接埠執行，並產生回應訊息。|傳訊引擎中的回應訊息已從佇列清除、 執行傳送管線、 對應。|傳訊引擎可讓配接器的回應訊息。|配接器會通知引擎郵件告一段落。|  
||I|||||  
||RR|RR|RR|||  
||||O|O|O|  
|||||OA|OA|  

 我 = 輸入的延遲  

 RR = 要求回應延遲  

 O = 輸出延遲  

 OA = 配接器輸出延遲  

 假設低延遲的環境，這項分析會檢查是否在文件所花費的時間超過 5 秒的輸入配接器中。 這可能表示在此主控件執行個體中的輸入配接器的訊息傳輸的處理延遲。 如果多個的輸入配接器存在於此主控件執行個體，請考慮將它們分割到他們自己的主機，以判斷哪一個輸入配接器具有高延遲。  

### <a name="references"></a>參考  

-   BizTalk Server 資料庫最佳化  
    [http://go.microsoft.com/fwlink/?linkid=104427](http://go.microsoft.com/fwlink/?linkid=104427)  

-   要求/回應傳訊  
    [http://go.microsoft.com/fwlink/?LinkID=155288](http://go.microsoft.com/fwlink/?LinkID=155288)  

-   識別 BizTalk 層中的瓶頸  
    [http://go.microsoft.com/fwlink/?LinkID=155289](http://go.microsoft.com/fwlink/?LinkID=155289)  

## <a name="biztalk-message-delivery-throttling-state-analysis"></a>BizTalk 訊息傳遞節流狀態分析  
 BizTalk 訊息傳遞節流狀態是節流的主要指標。 它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸出傳輸） 的訊息傳遞。 節流情況是計數器的數值表示。 以下是一份值和其各自的意義：  

|||  
|-|-|  
|0|未進行節流|  
|1|由於不平衡的訊息傳遞速率 (輸入速率超過輸出速率) 而進行節流|  
|3|由於高內含式訊息計數而進行節流|  
|4|由於處理程序記憶體壓力而進行節流|  
|5|由於系統記憶體壓力而進行節流|  
|9|由於高執行緒計數而進行節流|  
|10|由於傳遞時使用者覆寫而進行節流|  

 這項分析會檢查每個這些值，並為每個具有特定的警示。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

## <a name="biztalk-messagebox-database-connection-failures-analysis"></a>BizTalk MessageBox 資料庫連線失敗分析  
 此效能計數器是資料庫連線嘗試失敗，因為啟動主控件執行個體的數目。 如果因為任何原因，裝載 BizTalk 資料庫的 SQL Server 服務變成無法使用，資料庫叢集會將資源從主動電腦傳送到被動電腦中。 在此容錯移轉程序期間，BizTalk Server 服務執行個體發生資料庫連接失敗並自動重新啟動以重新連接到資料庫。 正在運作的資料庫電腦 (先前為被動電腦) 會在容錯移轉期間獲得資源後，開始處理資料庫連接。  

 當 BizTalk Server 執行階段無法與 MessageBox 」 或 「 管理 」 資料庫通訊時，會發生 DBNetLib （資料庫網路程式庫） 錯誤。 當發生這種情況時，攔截到例外狀況的 BizTalk Server 執行階段執行個體關閉，並接著每分鐘循環查看資料庫是否可用。 在本主題，請參閱 [參考] 區段，如需詳細資訊。  

 當用戶端起始 TCP/IP 通訊端連線聯繫伺服器時，用戶端通常會連接到伺服器上特定的連接埠，並要求伺服器透過短期有效的臨時 TCP 或 UDP 連接埠回應用戶端。 在 Windows Server 2003 和 Windows XP 上，用戶端應用程式所使用的暫時連接埠預設範圍是從 1025 到 5000。 在某些情況下很可能就會耗盡可用的連接埠中的預設範圍。 在本主題，請參閱 [參考] 區段，如需詳細資訊。  

 這項分析會檢查資料庫連線失敗的任何項目。 資料庫連線失敗非常重要，因為 BizTalk 無法運作而不需要資料庫。 如果資料庫連線失敗的原因不明時，則請考慮下面所列的參考和/或連絡 Microsoft 支援服務以判斷連線失敗的本質。  

### <a name="references"></a>參考  

-   向外擴充的資料庫  
    [http://go.microsoft.com/fwlink/?LinkId=155307](http://go.microsoft.com/fwlink/?LinkId=155307)  

-   避免 DBNETLIB 例外狀況  
    [http://go.microsoft.com/fwlink/?LinkId=155308](http://go.microsoft.com/fwlink/?LinkId=155308)  

-   避免 TCP/IP 連接埠耗盡  
    [http://go.microsoft.com/fwlink/?LinkId=155309](http://go.microsoft.com/fwlink/?LinkId=155309)  

## <a name="biztalk-messaging-publishing-throttling-state-analysis"></a>BizTalk 訊息發佈節流狀態分析  
 BizTalk 訊息發佈節流狀態是節流的主要指標。 它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸入的傳輸） 的訊息發佈。節流情況是計數器的數值表示。 以下是一份值和其各自的意義：  

|||  
|-|-|  
|0|未進行節流|  
|2|由於不平衡的訊息發佈速率 (輸入速率超過輸出速率) 而進行節流|  
|4|由於處理程序記憶體壓力而進行節流|  
|5|由於系統記憶體壓力而進行節流|  
|6|由於資料庫成長而進行節流|  
|8|由於高工作階段計數而進行節流|  
|9|由於高執行緒計數而進行節流|  
|11|由於發佈時使用者覆寫而進行節流|  

 這項分析會檢查每個這些值，並為每個具有特定的警示。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

## <a name="biztalk-orchestrations-resident-in-memory"></a>BizTalk 協調流程常駐在記憶體中  
 目前由主控件執行個體裝載的協調流程執行個體數。 雖然尖峰 」 或 「 高載的記憶體中駐留的協調流程可能會被視為一般，增加的趨勢可能表示 「 不斷累積 」 的協調流程在記憶體中。 當 BizTalk 無法凍結訊息/協調流程執行個體時，可能會發生一段時間遞增的趨勢。 嘗試將此計數器與 「 XLANG/s Orchestrations(?) 相互關聯\Dehydratable 協調流程 」 其中問號 （？） 會是相同計數器執行個體，以做為這個計數器。  

 如果有大量的協調流程是常駐在記憶體中的，如果協調流程數過低會凍結，則協調流程可能會在記憶體中的閒置，而且可能造成記憶體流失的狀況。 如果有的話，請使用這項分析中使用 「 \XLANG/s 協調流程 （*） \Idle 協調流程 」 的相互關聯。 BizTalk 閒置的協調流程中遞增趨勢是更好的指標，因為無法凍結協調流程執行個體的記憶體流失。  

 這項分析會檢查遞增趨勢常駐在記憶體及超過 50%的記憶體中駐留的協調流程是否可凍結的協調流程中。  

### <a name="references"></a>參考  

-   協調流程引擎效能計數器  
    [http://go.microsoft.com/fwlink/?LinkID=155290](http://go.microsoft.com/fwlink/?LinkID=155290)  

-   協調流程凍結和解除凍結  
    [http://go.microsoft.com/fwlink/?LinkID=155284](http://go.microsoft.com/fwlink/?LinkID=155284)  

## <a name="biztalk-private-bytes-analysis"></a>BizTalk 私用位元組分析  
 這是已配置的私用記憶體的主控件執行個體，與比較 「 \Process （*） \Private 位元組 」 效能計數器的 mb。 私用位元組是記憶體的目前的大小，以位元組為單位的處理序已配置，不能與其他處理序共用。 這項分析會判斷任何主控件執行個體是否使用大型系統的記憶體大小和主控件執行個體是否持續一段時間的記憶體耗用量增加。 耗用記憶體的很大一部分的主控件執行個體是正常的只要它傳回至系統的記憶體。 尋找增加圖表中的趨勢。 這段很長一段時間增加的趨勢可能表示記憶體流失。  

 這項分析會檢查每個小時 10 MB-遞增的趨勢。 您可以使用這項分析中的可用記憶體分析與記憶體流失分析的相互關聯。 此外，請記住，新啟動主控件執行個體一開始會顯示為記憶體流失時只是一般啟動行為。 記憶體流失時，處理程序會繼續耗用記憶體和沒有釋出一段長時間的記憶體。 如果您懷疑有記憶體流失的情況，請閱讀 「 記憶體成長中 BizTalk 傳訊 」 文章下面所參照。 否則，安裝並使用偵錯診斷工具。 如需有關 「 偵錯診斷工具的詳細資訊，請參閱 [參考] 區段。  

### <a name="references"></a>參考  

-   偵錯診斷工具 v1.1  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

-   在 「 BizTalk 訊息的記憶體成長  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  

## <a name="biztalk-virtual-bytes-analysis"></a>BizTalk 虛擬位元組分析  
 這是保留給主控件執行個體的虛擬記憶體 （mb）。 這項分析會判斷是否任何主控件執行個體正在耗用大量系統的記憶體和主控件執行個體是否持續一段時間的記憶體耗用量增加。 耗用記憶體的很大一部分的主控件執行個體是正常的只要它傳回至系統的記憶體。 尋找增加圖表中的趨勢。 這段很長一段時間增加的趨勢可能表示記憶體流失。  

 這項分析會檢查每個小時 10 MB-遞增的趨勢，以虛擬位元組為單位。 您可以使用這項分析中的可用記憶體分析與記憶體流失分析的相互關聯。 此外，請記住，新啟動主控件執行個體一開始會顯示為記憶體流失時只是一般啟動行為。 記憶體流失時，處理程序會繼續耗用記憶體和沒有釋出一段長時間的記憶體。 如果您懷疑有記憶體流失情況，然後讀取下列 「 記憶體成長中 BizTalk 傳訊 」 文章。 否則，安裝並使用偵錯診斷工具。 如需有關 「 偵錯診斷工具的詳細資訊，請參閱 [參考] 區段。  

### <a name="references"></a>參考  

-   偵錯診斷工具 v1.1  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

-   在 「 BizTalk 訊息的記憶體成長  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  

## <a name="biztalk-message-agent-database-session-throttling-analysis"></a>BizTalk 訊息代理程式的資料庫工作階段節流分析  
 這是相較於其節流設定的個別 BizTalk MessageBox 的開啟資料庫連線數目。 「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。 一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。 此選項預設為停用；通常只有在資料庫伺服器是 BizTalk Server 系統中的瓶頸時，才應啟用此設定。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中的資料庫連線數目。 此參數只會影響輸出訊息節流。 輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。 預設值是 0。  

 MaxWorkerThreads 登錄機碼會影響 biztalk 可用的執行緒數目，並有助於在其中的 BizTalk 的執行緒大部分都是忙碌中，資料庫連線的情況下。 這項分析會檢查到 MessageBox 的開啟資料庫連線數目是否大於 80%的資料庫工作階段，節流設定，這表示可能的節流條件。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  

-   執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  

## <a name="biztalk-message-agent-database-session-throttling-threshold-analysis"></a>節流臨界值分析的 BizTalk 訊息代理程式的資料庫工作階段  
 這是到 MessageBox 的開啟資料庫連線數目的目前閾值。 「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。 一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。 此選項預設為停用；通常只有在資料庫伺服器是 BizTalk Server 系統中的瓶頸時，才應啟用此設定。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中的資料庫連線數目。 此參數只會影響輸出訊息節流。 輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。 預設值是 0。  

 MaxWorkerThreads 登錄機碼會影響 biztalk 可用的執行緒數目，並有助於在其中的 BizTalk 的執行緒大部分都是忙碌中，資料庫連線的情況下。 這項分析會檢查以查看是否從其預設值將它修改此值。 根據預設，此設定會是 0，這表示節流的資料庫工作階段上已停用。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  

-   執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  

## <a name="biztalk-message-agent-in-process-message-count-throttling-analysis"></a>BizTalk 訊息代理程式內含式訊息計數節流分析  
 這是服務類別正在處理的並行訊息數目。 「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。 這不包括從資料庫擷取但仍在等候記憶體中的佇列中傳遞的訊息。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的內含式訊息計數效能計數器來監視內含式訊息數目。 此參數提供提示給節流機制，做為節流狀況的考量。 實際閾值會受自我調整影響而不同。 您可以監視的內含式訊息計數效能計數器，以確認實際閾值。  

 如需大型訊息案例 （其中平均訊息大小很高，或訊息的處理可能需要大量的訊息），這個參數可以設定為較小的值。 大型訊息實例被表示如果記憶體為根據的節流經常發生，且記憶體臨界值可讓您取得自動調整為相當低的值。 此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。 此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。 這項分析會檢查高內含式訊息計數計數器，來判斷其是否大於 80%的相同名稱下其節流設定值，表示節流狀況有可能。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

## <a name="biztalkmessage-agent-in-process-message-count-throttling-threshold-analysis"></a>Biztalk： 訊息代理程式內含式訊息計數節流閾值分析  
 這是目前的服務類別正在處理的並行訊息數的閾值。 「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。 這不包括從資料庫擷取但仍在等候記憶體中的佇列中傳遞的訊息。 您可以使用 biztalk： 訊息代理程式的效能物件類別下的內含式訊息計數效能計數器來監視內含式訊息數目。 此參數提供提示給節流機制，做為節流狀況的考量。 實際閾值會受自我調整影響而不同。 您可以監視的內含式訊息計數效能計數器，以確認實際閾值。  

 如需大型訊息案例 （其中平均訊息大小很高，或訊息的處理可能需要大量的訊息），這個參數可以設定為較小的值。 大型訊息實例被表示如果記憶體為根據的節流經常發生，且記憶體臨界值可讓您取得自動調整為相當低的值。 此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。 此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。 這項分析會檢查高內含式訊息計數節流臨界值的非預設值。  

### <a name="references"></a>參考  

-   主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

## <a name="biztalk-message-agent-process-memory-usage-mb-throttling-analysis"></a>BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流分析  
 這是目前的處理序 (MB) 的記憶體使用量。 如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。  若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。 如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，則請考慮減少內部訊息佇列大小的值，內含式訊息，每一 CPU 閾值。 此策略特別會與大型訊息處理實例有關。  

 如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。 在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2GB 的 32 位元。 一般情況下，強烈建議 64 位元 BizTalk 和 64 位元 SQL Server。 請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。 這項分析會檢查程序記憶體使用量是否大於 80%的相同名稱的其各自的節流臨界值。 根據預設，BizTalk 處理序記憶體使用量節流設定是 25%之處理序可用的虛擬記憶體。 /3GB 參數已不會影響此設定。  

### <a name="references"></a>參考  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

-   如何擷取發生記憶體溢位在的處理序的記憶體傾印 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)  

-   在 BizTalk Server 64 位元支援 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)  

## <a name="biztalkmessage-agent-process-memory-usage-mb-throttling-threshold-analysis"></a>Biztalk： 訊息代理程式處理序記憶體使用量 (MB) 節流閾值分析  
 這是目前的處理序 (MB) 的記憶體使用量的目前閾值。 閾值可以根據實際數量的記憶體可供此程序和其記憶體耗用量模式動態調整。 如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。 若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。 如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，則請考慮減少內部訊息佇列大小的值，內含式訊息，每一 CPU 閾值。 此策略特別會與大型訊息處理實例有關。  

 如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。 在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2GB 的 32 位元。 一般情況下，強烈建議 64 位元 BizTalk 和 64 位元 SQL Server。 請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。 這項分析會檢查是否程序記憶體節流是否為非預設值。  

### <a name="references"></a>參考  

-   BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  

-   如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  

-   如何擷取發生記憶體溢位在的處理序的記憶體傾印 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)  

-   在 BizTalk Server 64 位元支援 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)