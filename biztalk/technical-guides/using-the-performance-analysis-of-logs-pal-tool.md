---
title: 使用效能分析的記錄檔 (PAL) 工具 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d563aa7d-102d-4fe6-a892-66794feaf83b
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 889cbe2a88859eec82f76d0eec309865bf727bfe
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37024564"
---
# <a name="using-the-performance-analysis-of-logs-pal-tool"></a><span data-ttu-id="d5a1f-102">使用效能分析的記錄檔 (PAL) 工具</span><span class="sxs-lookup"><span data-stu-id="d5a1f-102">Using the Performance Analysis of Logs (PAL) Tool</span></span>
<span data-ttu-id="d5a1f-103">PAL （效能分析的記錄檔） 工具會在效能監視器計數器記錄檔 （任何已知的格式） 中讀取，並分析使用複雜，但是已知的臨界值 （提供）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-103">The PAL (Performance Analysis of Logs) tool reads in a performance monitor counter log (any known format) and analyzes it using complex, but known thresholds (provided).</span></span> <span data-ttu-id="d5a1f-104">此工具會產生 HTML 報告，以圖形方式圖表重要的效能計數器，超過閾值時，會擲回警示。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-104">The tool generates an HTML based report that graphically charts important performance counters and throws alerts when thresholds are exceeded.</span></span> <span data-ttu-id="d5a1f-105">臨界值最初會根據 Microsoft 產品團隊，包括所定義的臨界值[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，和成員的 Microsoft 支援。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-105">The thresholds are originally based on thresholds defined by the Microsoft product teams, including [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and members of Microsoft support.</span></span> <span data-ttu-id="d5a1f-106">此工具不會取代傳統的效能分析，但它會自動分析的效能計數器記錄檔不足以幫您節省時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-106">This tool is not a replacement of traditional performance analysis, but it automates the analysis of performance counter logs enough to help save you time.</span></span> <span data-ttu-id="d5a1f-107">[PAL] 工具中：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-107">The PAL tool:</span></span>  

- <span data-ttu-id="d5a1f-108">分析臨界值的效能計數器記錄</span><span class="sxs-lookup"><span data-stu-id="d5a1f-108">Analyzes performance counter logs for thresholds</span></span>  

- <span data-ttu-id="d5a1f-109">對於大型的 Perfmon 記錄檔很有用</span><span class="sxs-lookup"><span data-stu-id="d5a1f-109">Is helpful for large Perfmon logs</span></span>  

- <span data-ttu-id="d5a1f-110">識別[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和作業系統效能計數器瓶頸，藉由分析臨界值</span><span class="sxs-lookup"><span data-stu-id="d5a1f-110">Identifies [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and operating system performance counter bottlenecks by analyzing for thresholds</span></span>  

- <span data-ttu-id="d5a1f-111">可進行的任何效能計數器的分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-111">Is extensible to do analysis on any performance counters</span></span>  

- <span data-ttu-id="d5a1f-112">可用來協助撰寫您自己的計數器</span><span class="sxs-lookup"><span data-stu-id="d5a1f-112">Can be used to help write your own counter</span></span>  

  <span data-ttu-id="d5a1f-113">PAL 是可在免費下載[ http://go.microsoft.com/fwlink/?linkid=98098 ](http://go.microsoft.com/fwlink/?linkid=98098)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-113">PAL is available as a free download at [http://go.microsoft.com/fwlink/?linkid=98098](http://go.microsoft.com/fwlink/?linkid=98098).</span></span> <span data-ttu-id="d5a1f-114">它需要 Microsoft 記錄檔剖析器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-114">It requires Microsoft Log Parser.</span></span> <span data-ttu-id="d5a1f-115">記錄檔剖析器是功能強大、 用途廣泛的工具，提供以文字為基礎的資料，例如記錄檔、 XML 檔案、 CSV 檔案，以及索引鍵的資料來源的通用查詢存取 Windows 作業系統，例如事件記錄檔、 登錄、 檔案系統和 ActiveDirectory® 目錄服務。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-115">Log Parser is a powerful, versatile tool that provides universal query access to text-based data such as log files, XML files, and CSV files, as well as key data sources on the Windows operating system such as the event log, the registry, the file system, and Active Directory® directory service.</span></span> <span data-ttu-id="d5a1f-116">若要使用此工具來查詢大量的記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-116">You may want to use this tool to query a significant amount of logging information.</span></span> <span data-ttu-id="d5a1f-117">您可以下載 Log Parser 工具，在[ http://go.microsoft.com/fwlink/?linkid=85574 ](http://go.microsoft.com/fwlink/?linkid=85574)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-117">You can download the Log Parser tool at [http://go.microsoft.com/fwlink/?linkid=85574](http://go.microsoft.com/fwlink/?linkid=85574).</span></span>  

## <a name="using-pal-with-performance-counter-logs-in-different-languages"></a><span data-ttu-id="d5a1f-118">使用效能計數器的 PAL 登入不同的語言</span><span class="sxs-lookup"><span data-stu-id="d5a1f-118">Using PAL with Performance Counter Logs in Different Languages</span></span>  
 <span data-ttu-id="d5a1f-119">[PAL] 工具會分析效能計數器記錄檔，僅以英文的語言。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-119">The PAL tool analyzes performance counter logs only in English language.</span></span> <span data-ttu-id="d5a1f-120">若要使用其他語言中的效能計數器記錄檔中的 [PAL] 工具，您必須先將轉譯要英文語言的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-120">To use the PAL tool with performance counter logs in other languages, you must first translate the logs to English language.</span></span> <span data-ttu-id="d5a1f-121">您可以使用**Perfmon 記錄檔 Translator**工具可從[ http://go.microsoft.com/fwlink/?LinkId=158802 ](http://go.microsoft.com/fwlink/?LinkId=158802)翻譯成英文原始的效能計數器記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-121">You can use the **Perfmon Log Translator** tool available at [http://go.microsoft.com/fwlink/?LinkId=158802](http://go.microsoft.com/fwlink/?LinkId=158802) to translate the original performance counter log files to English.</span></span>  

## <a name="understanding-the-pal-tool-report-for-microsoft-biztalk-server-2010"></a><span data-ttu-id="d5a1f-122">了解 Microsoft BizTalk Server 2010 的 PAL 工具報告</span><span class="sxs-lookup"><span data-stu-id="d5a1f-122">Understanding the PAL Tool Report for Microsoft BizTalk Server 2010</span></span>  
 <span data-ttu-id="d5a1f-123">PAL tool 的 Windows 作業系統，Microsoft SQL Server，提供 Perfmon 記錄檔分析臨界值和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-123">The PAL tool provides Perfmon log analysis of thresholds for the Windows operating system, Microsoft SQL Server, and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="d5a1f-124">本節說明大部分的 BizTalk Server 閾值的報告 [PAL] 工具中分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-124">This section describes most of the analyses in the BizTalk Server threshold report in the PAL tool.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="d5a1f-125">本主題是很長，以便可在同一處以方便參考包含有關 PAL 工具的完整資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-125">This topic is long so that comprehensive information about the PAL tool can be contained in one place for easy reference.</span></span>  

 <span data-ttu-id="d5a1f-126">[PAL] 工具會報告下列分析和臨界值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-126">The following analysis and thresholds are reported by the PAL tool.</span></span>  


|                                <span data-ttu-id="d5a1f-127">分析的類型和名稱</span><span class="sxs-lookup"><span data-stu-id="d5a1f-127">Analysis Type and Name</span></span>                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="d5a1f-128">分析說明</span><span class="sxs-lookup"><span data-stu-id="d5a1f-128">Analysis Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                        <span data-ttu-id="d5a1f-129">核心傾印的磁碟： 磁碟可用空間</span><span class="sxs-lookup"><span data-stu-id="d5a1f-129">Disk: Disk Free Space for a Kernel Dump</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="d5a1f-130">這項分析會檢查以確定沒有足夠的磁碟空間，用於作業系統磁碟的所有記憶體傾都印。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-130">This analysis checks to make sure there is enough free disk space for the operating system to dump all memory to disk.</span></span> <span data-ttu-id="d5a1f-131">如果可用磁碟空間不足，作業系統將無法建立 memory.dmp 時，必須分析根本原因的核心傾印檔案。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-131">If insufficient disk space is available, then the operating system will fail to create a memory.dmp, file which is necessary to analyze the root cause of a kernel dump.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                    <span data-ttu-id="d5a1f-132">磁碟： 邏輯/實體磁碟介面分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-132">Disk: Logical/Physical Disk Interface Analysis</span></span>                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="d5a1f-133">這項分析會查看每個實體磁碟的閒置時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-133">This analysis looks at the idle time of each of the physical disks.</span></span> <span data-ttu-id="d5a1f-134">多閒置磁碟，使用磁碟越低。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-134">The more idle the disk is, the less the disk is being used.</span></span> <span data-ttu-id="d5a1f-135">此計數器適合在一個磁碟會在邏輯磁碟。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-135">This counter is best used when one disk is used in the logical disk.</span></span> <span data-ttu-id="d5a1f-136">"%閒置時間 」 報告的範例間隔期間磁碟閒置時間百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-136">“% Idle Time” reports the percentage of time during the sample interval that the disk was idle.</span></span><br /><br /> <span data-ttu-id="d5a1f-137">參考： 排除磁碟繫結的問題 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-137">Reference:  Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                <span data-ttu-id="d5a1f-138">磁碟： 邏輯/實體磁碟讀取/寫入延遲分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-138">Disk: Logical/Physical Disk Read/Write Latency Analysis</span></span>                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="d5a1f-139">Windows 偵測到的磁碟效能瓶頸，最可靠方式是藉由測量其回應時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-139">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="d5a1f-140">如果回應時間大於.025 （25 毫秒為單位），這是保守的臨界值，然後可能會發生明顯的速度變慢和會影響使用者的效能問題。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-140">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span> <span data-ttu-id="d5a1f-141">如需詳細資訊，請參閱邏輯/實體磁碟讀取/寫入延遲分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-141">For more information, refer to Logical/Physical Disk Read/Write Latency Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                           <span data-ttu-id="d5a1f-142">磁碟： Logical Disk Transfers/sec</span><span class="sxs-lookup"><span data-stu-id="d5a1f-142">Disk: Logical Disk Transfers/sec</span></span>                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="d5a1f-143">"Disk Transfers/sec"是讀取的速度和寫入磁碟上的作業。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-143">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="d5a1f-144">這項分析檢查以查看是否有任何邏輯磁碟的臨界值會顯示回應時間不佳 （大於 25 毫秒回應時間的 I/O 作業）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-144">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="d5a1f-145">如果為 true，則每秒磁碟轉移操作應該等於或高於 80。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-145">If this is true, then the disk transfers per second should be at or above 80.</span></span> <span data-ttu-id="d5a1f-146">如果沒有，則磁碟架構需要進行調查。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-146">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="d5a1f-147">不佳的磁碟 I/O 的最常見原因是多載 SAN 上的 LUN。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-147">The most common cause of poor disk I/O is LUN overloading on the SAN.</span></span> <span data-ttu-id="d5a1f-148">如需詳細資訊，請參閱 Logical Disk Transfers/sec 本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-148">For more information, refer to Logical Disk Transfers/sec in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                            <span data-ttu-id="d5a1f-149">磁碟： LogicalDisk %可用空間</span><span class="sxs-lookup"><span data-stu-id="d5a1f-149">Disk: LogicalDisk % Free Space</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="d5a1f-150">「 %可用空間 」 是已在所選邏輯磁碟機上可用的總可用空間的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-150">“% Free Space” is the percentage of total usable space that was free on the selected logical disk drive.</span></span> <span data-ttu-id="d5a1f-151">應該不會影響效能，直到有可用的磁碟機空間低於 30%。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-151">Performance should not be affected until the available disk drive space is less than 30 percent.</span></span> <span data-ttu-id="d5a1f-152">使用磁碟機的 70%時，剩餘的可用空間是位於更接近磁碟的磁針的磁碟機，這是在較低的效能層級運作。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-152">When 70 percent of the disk drive is used, the remaining free space is located closer to the disk's spindle at the center of the disk drive, which operates at a lower performance level.</span></span> <span data-ttu-id="d5a1f-153">可用磁碟空間不足，可能會造成嚴重的磁碟效能。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-153">Lack of free disk space can cause severe disk performance.</span></span><br /><br /> <span data-ttu-id="d5a1f-154">參考： NT 伺服器和磁碟子系統效能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-154">Reference:  NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   <span data-ttu-id="d5a1f-155">磁碟： 處理 IO Data Operations/sec 和處理 IO 其他作業數/秒分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-155">Disk: Process IO Data Operations/sec and Process IO Other Operations/sec Analysis</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="d5a1f-156">這些計數器會計算包含檔案、 網路與裝置 I/o 處理序所產生的所有 I/O 活動。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-156">These counters count all I/O activity generated by the process to include file, network and device I/Os.</span></span> <span data-ttu-id="d5a1f-157">處理序正在執行超過 1,000 個我 / O 的每秒，並將它標示為警告時，就會檢查這些分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-157">These analyses check when processes are doing more than 1,000 I/O’s per second and flag it as a warning.</span></span> <span data-ttu-id="d5a1f-158">這些分析最適合用於與其他分析，例如磁碟分析相互關聯來判斷哪些處理程序可能會牽涉到的 I/O 活動。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-158">These analyses are best used in correlation with other analyses such as disk analysis to determine which processes might be involved in the I/O activity.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                               <span data-ttu-id="d5a1f-159">可用的記憶體： 記憶體</span><span class="sxs-lookup"><span data-stu-id="d5a1f-159">Memory: Available Memory</span></span>                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="d5a1f-160">這項分析會檢查總可用記憶體是否不足 – 10%可用警告] 和 [可用的 5%的重大。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-160">This analysis checks whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="d5a1f-161">10 MB 的每小時遞減趨勢偵測到，這可能表示潛在的即將發行的記憶體條件時，也會收到警示警告。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-161">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, which can indicate a potential upcoming memory condition.</span></span> <span data-ttu-id="d5a1f-162">增加的特殊權限模式下 CPU 和系統的延遲，可能會導致實體記憶體不足。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-162">Low physical memory can cause increased privileged mode CPU and system delays.</span></span> <span data-ttu-id="d5a1f-163">如需詳細資訊，請參閱可用 MemoryAnalysis 本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-163">For more information, refer to Available MemoryAnalysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                        <span data-ttu-id="d5a1f-164">記憶體︰ 可用系統分頁表項目</span><span class="sxs-lookup"><span data-stu-id="d5a1f-164">Memory: Free System Page Table Entries</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="d5a1f-165">Free System Page Table Entries (PTE) 是由系統目前未使用的分頁表項目數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-165">Free System Page Table Entries (PTE’s) are the number of page table entries not currently used by the system.</span></span> <span data-ttu-id="d5a1f-166">這項分析會判斷系統是否已藉由檢查是否有少於 5000 免費 PTE 的警告有少於 10,000 免費 PTE 的執行 PTE 的不足。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-166">This analysis determines whether the system is running out of PTE’s by checking whether there are fewer than 5,000 free PTE’s with a Warning if there are fewer than 10,000 free PTE’s.</span></span> <span data-ttu-id="d5a1f-167">缺乏足夠 PTE 可能會導致整個系統停止回應。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-167">Lack of enough PTE’s can result in systemwide hangs.</span></span> <span data-ttu-id="d5a1f-168">也請注意，/3GB 切換將會大幅降低可用 PTE 數量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-168">Also note that the /3GB switch will lower the amount of free PTE’s significantly.</span></span> <span data-ttu-id="d5a1f-169">如需詳細資訊，請參閱可用系統分頁資料表項目分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-169">For more information, refer to Free System Page Table Entries Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                             <span data-ttu-id="d5a1f-170">記憶體︰ 記憶體流失偵測</span><span class="sxs-lookup"><span data-stu-id="d5a1f-170">Memory: Memory Leak Detection</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="d5a1f-171">這項分析會判斷是否有任何處理序正在耗用大量系統的記憶體和處理程序是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-171">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="d5a1f-172">耗用記憶體的很大一部分的程序是正常的只要處理程序傳回給系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-172">A process consuming large portions of memory is fine as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="d5a1f-173">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-173">Look for increasing trends in the chart.</span></span> <span data-ttu-id="d5a1f-174">這段很長一段時間增加的趨勢可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-174">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="d5a1f-175">「 私用位元組 」 是記憶體的目前的大小，以位元組為單位，此程序已配置，不能與其他處理序共用。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-175">“Private Bytes” is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="d5a1f-176">這項分析會檢查 10 MB 的每小時和 5 MB 的每小時增加的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-176">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="d5a1f-177">您可以使用這項分析中與 PAL 中的可用記憶體分析相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-177">Use this analysis in correlation with the Available Memory analysis in PAL.</span></span> <span data-ttu-id="d5a1f-178">如需詳細資訊，請參閱記憶體流失偵測分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-178">For more information, refer to Memory Leak Detection Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                              |
|                             <span data-ttu-id="d5a1f-179">記憶體： 控制代碼流失偵測</span><span class="sxs-lookup"><span data-stu-id="d5a1f-179">Memory: Handle Leak Detection</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="d5a1f-180">這項分析會檢查來判斷多少處理每個處理程序的所有已開啟，並以判斷是否有控制代碼流失懷疑。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-180">This analysis checks all of the processes to determine how many handles each has open and to determine whether a handle leak is suspected.</span></span> <span data-ttu-id="d5a1f-181">具有大量的控制代碼和/或積極趨勢向上的程序可能表示控制代碼流失，這通常會導致記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-181">A process with a large number of handles and/or an aggressive upward trend could indicate a handle leak, which typically results in a memory leak.</span></span> <span data-ttu-id="d5a1f-182">此程序目前開啟的控制代碼的總數會等於此程序中的每個執行緒目前開啟的控制碼總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-182">The total number of handles currently open by this process is equal to the sum of the handles currently open by each thread in this process.</span></span><br /><br /> <span data-ttu-id="d5a1f-183">參考： 偵錯在診斷工具 v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-183">Reference:  Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                            <span data-ttu-id="d5a1f-184">記憶體︰ 記憶體 Pages Input/sec</span><span class="sxs-lookup"><span data-stu-id="d5a1f-184">Memory: Memory Pages Input/sec</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="d5a1f-185">「 Pages Input/sec"是從為解決硬體分頁錯誤的磁碟讀取分頁的速率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-185">“Pages Input/sec” is the rate at which pages are read from disk to resolve hard page faults.</span></span> <span data-ttu-id="d5a1f-186">處理程序是指不在其工作集或其他位置中的實體記憶體，因而必須從磁碟擷取的虛擬記憶體分頁時，就會發生硬體分頁錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-186">Hard page faults occur when a process refers to a page in virtual memory that is not in its working set or elsewhere in physical memory, and must be retrieved from disk.</span></span> <span data-ttu-id="d5a1f-187">這項分析會檢查是否有每秒 10 個以上的頁面檔案讀取。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-187">This analysis checks whether there are more than 10 page file reads per second.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                               <span data-ttu-id="d5a1f-188">記憶體︰ 記憶體 Pages/sec</span><span class="sxs-lookup"><span data-stu-id="d5a1f-188">Memory: Memory Pages/sec</span></span>                                |                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="d5a1f-189">這項分析會檢查 「 頁/秒 」 是否很高 （超過 1,000 個）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-189">This analysis checks to see whether the “Pages/sec” is high (above 1,000).</span></span> <span data-ttu-id="d5a1f-190">是否很高，然後系統可能用盡記憶體嘗試分頁至磁碟的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-190">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="d5a1f-191">「 頁/秒 」 是在讀取或寫入磁碟以解決硬體分頁錯誤頁面的速率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-191">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="d5a1f-192">此計數器是導致整個系統延遲錯誤的種類的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-192">This counter is a primary indicator of the kinds of faults that cause systemwide delays.</span></span>  <span data-ttu-id="d5a1f-193">您可以使用這項分析中可用的記憶體分析與 PAL 中的記憶體流失偵測分析的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-193">Use this analysis in correlation with Available Memory analysis and Memory Leak Detection analysis in PAL.</span></span> <span data-ttu-id="d5a1f-194">如果所有這些分析會在此同時，擲回警示，則這可能表示系統已用盡記憶體，並牽涉到的可疑處理程序，並遵循 PAL 中的記憶體流失偵測分析中所述的分析步驟。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-194">If all of these analyses are throwing alerts at the same time, then this may indicate the system is running out of memory and the suspected processes involved and follow analysis steps mentioned in the Memory Leak Detection analysis in PAL.</span></span><br /><br /> <span data-ttu-id="d5a1f-195">如需詳細資訊，請參閱本主題中的記憶體頁面/秒分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-195">For more information, refer to Memory Pages/sec Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                 |
|                      <span data-ttu-id="d5a1f-196">記憶體︰ 記憶體系統快取常駐位元組</span><span class="sxs-lookup"><span data-stu-id="d5a1f-196">Memory: Memory System Cache Resident Bytes</span></span>                       |                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="d5a1f-197">「 系統快取常駐位元組 」 是大小，以位元組為單位的可分頁作業系統程式碼，在檔案系統快取中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-197">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="d5a1f-198">此值包含目前的實體頁面，而不包含任何非目前駐留的虛擬記憶體分頁。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-198">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="d5a1f-199">這個值是元件的 「 記憶體\\\System 程式碼常駐位元組 」 表示目前位於實體記憶體的所有可分頁作業系統程式碼。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-199">This value is a component of “Memory\\\System Code Resident Bytes” which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="d5a1f-200">此計數器會顯示最後觀察到的值它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-200">This counter displays the last observed value only; it is not an average.</span></span> <span data-ttu-id="d5a1f-201">這項分析會檢查每小時遞增趨勢 10 mb。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-201">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="d5a1f-202">在負載下，伺服器可能會使用系統快取，以便快取 I/O 活動，例如磁碟。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-202">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="d5a1f-203">用於相互關聯處理序 IO Data Operations/sec 與其他處理序 IO 作業數/秒 PAL 中的分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-203">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses in PAL.</span></span><br /><br /> <span data-ttu-id="d5a1f-204">參考資料︰ 檔案快取的效能和微調，位於 [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-204">Reference: File Cache Performance and Tuning at [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span></span>                                                                                                                                                                                                                                                                                                                                      |
|                             <span data-ttu-id="d5a1f-205">集區未分頁位元組的記憶體：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-205">Memory: Pool Non Paged Bytes</span></span>                              |                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="d5a1f-206">「 集區未分頁的位元組 」 是以位元組為單位的非分頁集區，無法寫入的物件系統記憶體區域的大小，磁碟、 但只要已配置，必須保留在實體記憶體中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-206">“Pool Nonpaged Bytes” is the size, in bytes, of the non-paged pool, an area of system memory for objects that cannot be written to disk, but must remain in physical memory as long as they are allocated.</span></span> <span data-ttu-id="d5a1f-207">這項分析會檢查以查看系統是否即將接近最大的集區未分頁記憶體大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-207">This analysis checks to see whether the system is coming close to the maximum pool non paged memory size.</span></span> <span data-ttu-id="d5a1f-208">其做法是估計納入考量的集區大小/3 GB、 實體記憶體大小，以及 32 位元/64 位元，然後判斷值是否大於 60%，估計集區大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-208">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="d5a1f-209">如果系統變成接近最大的大小，系統可能會導致系統寬的停止回應。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-209">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="d5a1f-210">Boot.ini 檔案中的 /3GB 參數選項會大幅降低此記憶體集區的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-210">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="d5a1f-211">如需詳細資訊，請參閱 Pool Non-Paged 位元組分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-211">For more information, refer to Pool Non-Paged Bytes Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                             |
|                               <span data-ttu-id="d5a1f-212">記憶體： 集區分頁位元組</span><span class="sxs-lookup"><span data-stu-id="d5a1f-212">Memory: Pool Paged Bytes</span></span>                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="d5a1f-213">這項分析會檢查以查看是否即將接近最大的集區的系統分頁記憶體大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-213">This analysis checks to see whether the system is coming close to the maximum pool paged memory size.</span></span> <span data-ttu-id="d5a1f-214">其做法是估計納入考量的集區大小/3 GB、 實體記憶體大小，以及 32 位元/64 位元，然後判斷值是否大於 60%，估計集區大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-214">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="d5a1f-215">如果系統變成接近最大的大小，系統可能會導致系統寬的停止回應。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-215">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="d5a1f-216">Boot.ini 檔案中的 /3GB 參數選項會大幅降低此記憶體集區的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-216">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="d5a1f-217">如需詳細資訊，請參閱集區的分頁位元組分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-217">For more information, refer to Pool Paged Bytes Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                             <span data-ttu-id="d5a1f-218">記憶體： 處理序執行緒計數</span><span class="sxs-lookup"><span data-stu-id="d5a1f-218">Memory: Process Thread Count</span></span>                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="d5a1f-219">這項分析會檢查所有的處理程序來判斷處理程序是否有 500 個以上的執行緒和執行緒的數目增加 50 的執行緒，每小時。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-219">This analysis checks all of the processes to determine whether a process has more than 500 threads and if the number of threads is increasing by 50 threads per hour.</span></span> <span data-ttu-id="d5a1f-220">處理程序，且含有大量執行緒及/或積極趨勢向上可能表示執行緒流失這通常會導致記憶體流失或是高內容切換。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-220">A process with a large number of threads and/or an aggressive upward trend could indicate a thread leak which typically results in either a memory leak or high context switching.</span></span> <span data-ttu-id="d5a1f-221">高內容切換，會導致高特殊權限模式 CPU。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-221">High context switching will result in high privileged mode CPU.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                              <span data-ttu-id="d5a1f-222">記憶體： 處理序工作集</span><span class="sxs-lookup"><span data-stu-id="d5a1f-222">Memory: Process Working Set</span></span>                              |                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="d5a1f-223">「 工作集 」 是目前的大小，以位元組為單位，此程序工作集。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-223">“Working Set” is the current size, in bytes, of the working set of this process.</span></span> <span data-ttu-id="d5a1f-224">工作集是最近處理程序中執行緒的記憶體分頁集。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-224">The working set is the set of memory pages touched recently by the threads in the process.</span></span> <span data-ttu-id="d5a1f-225">如果電腦中的可用記憶體高於臨界值，即使未使用頁面會保留處理程序工作集中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-225">If free memory in the computer is above a threshold, pages are left in the working set of a process even if they are not in use.</span></span> <span data-ttu-id="d5a1f-226">當可用記憶體低於臨界值時，頁面會刪減工作集。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-226">When free memory falls below a threshold, pages are trimmed from working sets.</span></span> <span data-ttu-id="d5a1f-227">當需要它們會被寫回工作集然後退出主記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-227">If they are needed they will then be soft-faulted back into the working set before leaving main memory.</span></span> <span data-ttu-id="d5a1f-228">這項分析會檢查遞增趨勢 10 mb 或每個處理程序中的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-228">This analysis checks for an increasing trend of 10 MB’s or more in each of the processes.</span></span> <span data-ttu-id="d5a1f-229">在相互關聯使用 PAL 中的可用記憶體分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-229">Use in correlation with Available Memory analysis in PAL.</span></span><br /><br /> <span data-ttu-id="d5a1f-230">參考： 偵測在記憶體瓶頸 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-230">Reference:  Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>                                                                                                                                                                                                                                                                                                                                                                                           |
|                     <span data-ttu-id="d5a1f-231">網路： 網路輸出佇列長度分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-231">Network: Network Output Queue Length Analysis</span></span>                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="d5a1f-232">這項分析會檢查幾個執行緒正在等待的網路介面卡。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-232">This analysis checks to see how many threads are waiting on the network adapter.</span></span> <span data-ttu-id="d5a1f-233">如果有很多執行緒正在等候網路介面卡，然後系統會可能讓網路飽和 I/O 由於網路延遲或網路頻寬。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-233">If a lot of threads are waiting on the network adapter, then the system is probably saturating the network I/O due to network latency or network bandwidth.</span></span> <span data-ttu-id="d5a1f-234">"Output Queue Length"是輸出封包佇列長度 （以封包）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-234">“Output Queue Length” is the length of the output packet queue (in packets).</span></span> <span data-ttu-id="d5a1f-235">延遲會指出如果這是大於 2，並且應該找到並盡快解決瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-235">Delays are indicated if this is longer than two, and the bottleneck should be found and eliminated, if possible.</span></span> <span data-ttu-id="d5a1f-236">網路輸出佇列的一般原因包括大量的小型網路要求與網路延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-236">Typical causes of network output queuing include high numbers of small network requests and network latency.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                         <span data-ttu-id="d5a1f-237">網路： 網路使用率分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-237">Network: Network Utilization Analysis</span></span>                         |                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="d5a1f-238">"Bytes Total/sec"是在傳送及接收每個網路介面卡，包括框架字元位元組的速率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-238">“Bytes Total/sec” is the rate at which bytes are sent and received over each network adapter, including framing characters.</span></span> <span data-ttu-id="d5a1f-239">「 Network Interface\Bytes Received/sec"是"Network Interface\Bytes Received/sec"和"Network Interface\Bytes Sent/sec"的總和。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-239">“Network Interface\Bytes Received/sec” is a sum of “Network Interface\Bytes Received/sec” and “Network Interface\Bytes Sent/sec”.</span></span> <span data-ttu-id="d5a1f-240">此計數器可協助您了解在您的網路介面卡的流量是否已飽和，以及您是否需要新增另一個網路介面卡。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-240">This counter helps you know whether the traffic at your network adapter is saturated and whether you need to add another network adapter.</span></span> <span data-ttu-id="d5a1f-241">您可以識別問題的速度取決於類型的網路有以及您是否共用頻寬與其他應用程式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-241">How quickly you can identify a problem depends on the type of network you have as well as whether you share bandwidth with other applications.</span></span> <span data-ttu-id="d5a1f-242">這項分析會將"Bytes Total/sec"轉換成位元，並比對目前頻寬的網路介面卡，來計算網路使用率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-242">This analysis converts “Bytes Total/sec” to bits and compares it to the current bandwidth of the network adapter to calculate network utilization.</span></span> <span data-ttu-id="d5a1f-243">接下來，它會檢查使用率超過 50%。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-243">Next, it checks for utilization above 50 percent.</span></span><br /><br /> <span data-ttu-id="d5a1f-244">參考： 測量在.NET 應用程式效能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-244">Reference:  Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>                                                                                                                                                                                                                                                                                                                                    |
|                   <span data-ttu-id="d5a1f-245">分頁檔： 分頁檔案使用量百分比和 %使用率正達尖峰</span><span class="sxs-lookup"><span data-stu-id="d5a1f-245">Paging File: Paging File % Usage and % Usage Peak</span></span>                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="d5a1f-246">以百分比表示的使用中的頁面檔案執行個體數量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-246">The amount of the page file instance in use in percent.</span></span> <span data-ttu-id="d5a1f-247">另請參閱 「 處理程序\\\Page File Bytes"。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-247">See also “Process\\\Page File Bytes”.</span></span> <span data-ttu-id="d5a1f-248">這項分析會檢查是否大於 70%的使用量百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-248">This analysis checks whether the percentage of usage is greater than 70 percent.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|  <span data-ttu-id="d5a1f-249">處理器： 處理器使用率分析和處理序過度佔用處理器使用</span><span class="sxs-lookup"><span data-stu-id="d5a1f-249">Processor: Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="d5a1f-250">此計數器是處理器活動的主要指標，並顯示在取樣間隔時間期間觀察到的忙碌時間平均百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-250">This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="d5a1f-251">其計算方式是監視該服務處於非使用中的時間，然後從 100%減去該值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-251">It is calculated by monitoring the time that the service is inactive and subtracting that value from 100 percent.</span></span> <span data-ttu-id="d5a1f-252">這項分析會檢查使用率大於 60%，每個處理器上。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-252">This analysis checks for utilization greater than 60 percent on each processor.</span></span> <span data-ttu-id="d5a1f-253">如果是的話，判斷它是否高使用者模式 CPU 或高特殊權限的模式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-253">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="d5a1f-254">如果懷疑高特殊權限的模式 CPU，則會看到在 PAL 中的特殊權限的模式 CPU 分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-254">If high privileged mode CPU is suspected, then see the Privileged Mode CPU analysis in PAL.</span></span> <span data-ttu-id="d5a1f-255">如果懷疑的使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用量的函式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-255">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                           <span data-ttu-id="d5a1f-256">處理器： 處理器佇列長度</span><span class="sxs-lookup"><span data-stu-id="d5a1f-256">Processor: Processor Queue Length</span></span>                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="d5a1f-257">這項分析會判斷平均處理器佇列長度是否超過處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-257">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="d5a1f-258">如果是的話，這可能表示發生處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-258">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="d5a1f-259">您可以使用這項分析中特殊權限的模式 CPU 分析與過多的處理器使用 PAL 中的程序分析的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-259">Use this analysis in correlation with Privileged Mode CPU analysis and Excessive Processor Use by Process analysis in PAL.</span></span> <span data-ttu-id="d5a1f-260">如需詳細資訊，請參閱處理器佇列長度分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-260">For detailed information, refer to Processor Queue Length Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                       <span data-ttu-id="d5a1f-261">處理器： 特殊權限的模式 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-261">Processor:  Privileged Mode CPU Analysis</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="d5a1f-262">此計數器表示執行緒在特權模式下所執行時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-262">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="d5a1f-263">當您的應用程式呼叫作業系統 （例如來執行檔案或網路 I/O，或配置記憶體） 的函式時，這些作業系統函式會執行特殊權限模式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-263">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span> <span data-ttu-id="d5a1f-264">這項分析會檢查以了解多達 30%的總 CPU 時，是否要使用特殊權限的模式 CPU。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-264">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="d5a1f-265">如果如此，則 CPU 耗用量是可能的處理器，例如網路、 記憶體或磁碟 I/O 以外的另一個瓶頸所造成。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-265">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="d5a1f-266">用於相互關聯使用處理器: %Interrupt Time 及處理器： 高內容切換 PAL 中的分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-266">Use in correlation with Processor:  % Interrupt Time and Processor:  High Context Switching analyses in PAL.</span></span> <span data-ttu-id="d5a1f-267">如需詳細資訊，請參閱特殊權限的模式 CPU 分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-267">For more information, refer to Privileged Mode CPU Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                               <span data-ttu-id="d5a1f-268">處理器： 插斷的時間</span><span class="sxs-lookup"><span data-stu-id="d5a1f-268">Processor: Interrupt Time</span></span>                               |                                                                                                                                                                                                                                                                        <span data-ttu-id="d5a1f-269">"%Interrupt Time 是處理器花費在接收與處理硬體插斷，取樣間隔期間的時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-269">“% Interrupt Time” is the time the processor spends receiving and servicing hardware interrupts during sample intervals.</span></span> <span data-ttu-id="d5a1f-270">這個值是產生插斷，例如系統時鐘、 滑鼠、 磁碟驅動程式、 資料通訊線路、 網路介面卡及其他週邊裝置的裝置活動的間接指示器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-270">This value is an indirect indicator of the activity of devices that generate interrupts, such as the system clock, the mouse, disk drivers, data communication lines, network interface cards and other peripheral devices.</span></span> <span data-ttu-id="d5a1f-271">這些裝置通常處理器發出插斷時完成的工作或有需要注意。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-271">These devices normally interrupt the processor when they have completed a task or require attention.</span></span> <span data-ttu-id="d5a1f-272">在插斷期間暫停執行一般執行緒。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-272">Normal thread execution is suspended during interrupts.</span></span> <span data-ttu-id="d5a1f-273">大多數的系統時鐘處理器發出插斷每隔 10 毫秒，建立中斷活動的背景。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-273">Most system clocks interrupt the processor every 10 milliseconds, creating a background of interrupt activity.</span></span> <span data-ttu-id="d5a1f-274">大幅提高此計數器指出可能硬體問題。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-274">A dramatic increase in this counter indicates potential hardware problems.</span></span> <span data-ttu-id="d5a1f-275">這項分析會檢查 「 插斷時間百分比 」 大於百分之 30。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-275">This analysis checks for “% Interrupt Time” greater than 30 percent.</span></span> <span data-ttu-id="d5a1f-276">如果發生這種情況，請考慮更新此警示的裝置硬體的驅動程式會將相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-276">If this occurs, then consider updating devices drivers for hardware that correlates to this alert.</span></span><br /><br /> <span data-ttu-id="d5a1f-277">參考： 測量在.NET 應用程式效能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-277">Reference: Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>                                                                                                                                                                                                                                                                        |
|                          <span data-ttu-id="d5a1f-278">處理器： 高內容切換</span><span class="sxs-lookup"><span data-stu-id="d5a1f-278">Processor:  High Context Switching</span></span>                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="d5a1f-279">當高優先順序的執行緒優先執行的較低優先順序的執行緒目前正在執行，或當高優先順序執行緒會封鎖，就會發生內容切換。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-279">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="d5a1f-280">當許多執行緒共用相同的優先權層級時，可能會發生高層級內容切換。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-280">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="d5a1f-281">這通常表示太多的執行緒會競爭處理器系統上。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-281">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="d5a1f-282">一般而言，內容 5,000 個以下，每個處理器每秒切換速率不值得擔心。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-282">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="d5a1f-283">如果內容切換率超過 15,000 每秒，每個處理器，則沒有條件約束。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-283">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span> <span data-ttu-id="d5a1f-284">如需詳細資訊，請參閱高內容切換 Analysis 本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-284">For more information, refer to High Context Switching Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|              <span data-ttu-id="d5a1f-285">Microsoft BizTalk Server: BizTalk 凍結協調流程</span><span class="sxs-lookup"><span data-stu-id="d5a1f-285">Microsof BizTalk Server: BizTalk Dehydrating Orchestrations</span></span>              |                                                                                                                                                                                        <span data-ttu-id="d5a1f-286">當許多長時間執行商務程序執行一次時，記憶體和效能的問題是可能的。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-286">When many long-running business processes are running at the same time, memory and performance issues are possible.</span></span> <span data-ttu-id="d5a1f-287">協調流程引擎透過「凍結」和「解除凍結」協調流程執行個體來解決這些問題。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-287">The orchestration engine addresses these issues by "dehydrating" and "rehydrating" orchestration instances.</span></span> <span data-ttu-id="d5a1f-288">凍結是將協調流程狀態序列化到 SQL Server 資料庫中的程序。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-288">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="d5a1f-289">解除凍結是此程序的反向： 還原序列化之資料庫的協調流程最後一個執行中狀態。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-289">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="d5a1f-290">凍結是藉由減少必須一次在記憶體中產生的協調流程數目，來將系統資源的使用降至最低。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-290">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="d5a1f-291">因此，dehyrations 儲存記憶體耗用量，但會相當耗費資源的作業來執行。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-291">Therefore, dehyrations save memory consumption, but are relatively expensive operations to perform.</span></span> <span data-ttu-id="d5a1f-292">這項分析會檢查 dehydrations 10 或更多。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-292">This analysis checks for dehydrations of 10 or more.</span></span> <span data-ttu-id="d5a1f-293">如果是這樣，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能記憶體不足 （虛擬或實體），請執行較高的協調流程數目是否在等待訊息，或凍結設定未正確設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-293">If so, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] may be running out of memory (either virtual or physical), a high number of orchestrations are waiting on messages, or the dehydration settings are not set properly.</span></span><br /><br /> <span data-ttu-id="d5a1f-294">參考： 協調流程凍結和解除凍結，在  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-294">Reference:  Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>                                                                                                                                                                                         |
|               <span data-ttu-id="d5a1f-295">Microsoft BizTalk Server: BizTalk 高資料庫工作階段</span><span class="sxs-lookup"><span data-stu-id="d5a1f-295">Microsoft BizTalk Server:  BizTalk High Database Sessions</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="d5a1f-296">此計數器有兩個可能的值︰ normal (0) 或超過閾值 (1)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-296">This counter has two possible values: normal (0) or exceeded (1).</span></span> <span data-ttu-id="d5a1f-297">這項分析會檢查值為 1。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-297">This analysis checks for a value of 1.</span></span> <span data-ttu-id="d5a1f-298">如果是的話，BizTalk 就已超過允許的資料庫工作階段數目的臨界值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-298">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="d5a1f-299">這個值是 「 每一 CPU 的資料庫連線 」 值中的 BizTalk 主控件節流設定所控制。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-299">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span> <span data-ttu-id="d5a1f-300">「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-300">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="d5a1f-301">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-301">You can monitor the number of active Database connections by using the Database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-302">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-302">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="d5a1f-303">如需詳細資訊，請參閱 BizTalk 高資料庫工作階段分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-303">For more information, refer to BizTalk High Database Sessions Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                               |
|                 <span data-ttu-id="d5a1f-304">Microsoft BizTalk Server: BizTalk 高資料庫大小</span><span class="sxs-lookup"><span data-stu-id="d5a1f-304">Microsoft BizTalk Server: BizTalk High Database Size</span></span>                  |                                                                                                                                                                                                         <span data-ttu-id="d5a1f-305">此計數器將集合設為 1 的值，如果任一個條件，列出資料庫閾值中的訊息計數，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-305">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="d5a1f-306">根據預設主機訊息資料庫節流閾值中的計數是設定為 50000，會觸發節流情況，在下列情況下的值：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-306">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span><br /><br /> <span data-ttu-id="d5a1f-307">訊息發佈的工作、 狀態和擱置的佇列訂閱的主控件的主控件執行個體-總數超過 50,000。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-307">-   The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span><br /><span data-ttu-id="d5a1f-308">-多工緩衝處理表格或追蹤資料表中的訊息數目超過 500,000 的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-308">-   The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span><br /><br /> <span data-ttu-id="d5a1f-309">如果發生這種情況，請考慮採取的動作，將會減少在資料庫中的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-309">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="d5a1f-310">例如，請確定 SQL Server 工作，在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]正在執行不會發生錯誤，而且使用中的 [群組中樞] 頁面[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台來判斷是否要將訊息增多造成的大量擱置的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-310">For example, ensure the SQL Server jobs in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are running without error and use the Group Hub page in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span> <span data-ttu-id="d5a1f-311">如需詳細資訊，請參閱 BizTalk 高資料庫大小分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-311">For more information, refer to BizTalk High Database Size Analysis in this topic.</span></span>                                                                                                                                                                                                         |
|           <span data-ttu-id="d5a1f-312">Microsoft BizTalk Server: BizTalk 高內含式訊息計數</span><span class="sxs-lookup"><span data-stu-id="d5a1f-312">Microsoft BizTalk Server:  BizTalk High In-Process Message Count</span></span>            |                                                                                                                                                                                                                                                                                                                                                                                                                                              <span data-ttu-id="d5a1f-313">這項分析會檢查高內含式訊息計數 」 計數器來判定是否發生這種節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-313">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="d5a1f-314">如果是的話，請考慮調整的 「 訊息每一 CPU 的內含式 」 的設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-314">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="d5a1f-315">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-315">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="d5a1f-316">若要停用節流設定的每一 CPU 的內含式訊息數目為基礎的 「 訊息每一 CPU 的內含式 」 設定中輸入值為 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-316">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="d5a1f-317">「 訊息每一 CPU 的內含式 」 設定的預設值為 1,000。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-317">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="d5a1f-318">請注意，修改這個值可以也會影響低延遲的訊息及/或 BizTalk 資源的效率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-318">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span> <span data-ttu-id="d5a1f-319">如需詳細資訊，請參閱 BizTalk 高內含式訊息計數分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-319">For more information, refer to BizTalk High In-Process Message Count Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|             <span data-ttu-id="d5a1f-320">Microsoft BizTalk Server: BizTalk 高訊息傳遞速率</span><span class="sxs-lookup"><span data-stu-id="d5a1f-320">Microsoft BizTalk Server:  BizTalk High Message Delivery Rate</span></span>             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="d5a1f-321">這項分析會檢查高訊息傳遞速率計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-321">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="d5a1f-322">高訊息傳遞速率可能因高處理複雜性、 慢速輸出配接器或暫時的系統資源不足。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-322">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span> <span data-ttu-id="d5a1f-323">如需詳細資訊，請參閱 BizTalk 高訊息傳遞速率分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-323">For more information, refer to BizTalk High Message Delivery Rate Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|            <span data-ttu-id="d5a1f-324">Microsoft BizTalk Server: BizTalk 高訊息發佈速率</span><span class="sxs-lookup"><span data-stu-id="d5a1f-324">Microsoft BizTalk Server:  BizTalk High Message Publishing Rate</span></span>            |                                                                                                                                                                                       <span data-ttu-id="d5a1f-325">輸入主控件節流，也稱為訊息發佈節流中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，套用至主控件執行個體，包含接收配接器或協調流程，將訊息發佈到 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-325">Inbound host throttling, also known as message publishing throttling in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], is applied to host instances that contain receive adapters or orchestrations that publish messages to the MessageBox database.</span></span> <span data-ttu-id="d5a1f-326">這項分析會檢查高訊息發佈速率計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-326">This analysis checks for a value of 1 in the High Message Publishing Rate counter.</span></span> <span data-ttu-id="d5a1f-327">如果發生這種情況，則資料庫無法跟上發佈速率的訊息到 BizTalk MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-327">If this occurs, then the database cannot keep up with the publishing rate of messages to the BizTalk MessageBox database.</span></span><br /><br /> <span data-ttu-id="d5a1f-328">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-328">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-329">-主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-329">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="d5a1f-330">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-330">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="d5a1f-331">訊息發佈節流設定 對話方塊中，在 [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-331">-   Message Publishing Throttling Settings Dialog Box at [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span></span><br /><span data-ttu-id="d5a1f-332">-什麼是主控件節流？在 [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-332">-   What is Host Throttling? at [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span></span>                                                                                                                                                                                        |
|                <span data-ttu-id="d5a1f-333">Microsoft BizTalk Server: BizTalk 高程序記憶體</span><span class="sxs-lookup"><span data-stu-id="d5a1f-333">Microsoft BizTalk Server:  BizTalk High Process Memory</span></span>                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="d5a1f-334">節流臨界值 設定的 BizTalk 程序記憶體使用量是記憶體的比較可用虛擬記憶體的處理序與工作集大小的總和，如果輸入從 1 到 100 的值使用百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-334">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="d5a1f-335">當指定某個百分比值時，則會以定期間隔重新計算程序記憶體閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-335">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="d5a1f-336">這項分析會檢查高的處理序記憶體計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-336">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="d5a1f-337">如需詳細資訊，請參閱 BizTalk 高的處理程序的記憶體分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-337">For more information, refer to BizTalk High Process Memory Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                 <span data-ttu-id="d5a1f-338">Microsoft BizTalk Server: BizTalk 高系統記憶體</span><span class="sxs-lookup"><span data-stu-id="d5a1f-338">Microsoft BizTalk Server:  BizTalk High System Memory</span></span>                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="d5a1f-339">BizTalk 的實體記憶體使用量節流臨界值設定為輸入則是相較於若其值的可用實體記憶體的總量，從 1 到 100 的記憶體耗用量的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-339">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="d5a1f-340">如果您輸入大於 100 的值，這項設定也可以是以 mb 為單位的可用實體記憶體的總量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-340">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="d5a1f-341">輸入值為 0 時可停用以實體記憶體使用量為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-341">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="d5a1f-342">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-342">The default value is 0.</span></span> <span data-ttu-id="d5a1f-343">如需詳細資訊，請參閱 BizTalk 高系統記憶體分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-343">For more information, refer to BizTalk High System Memory Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                 <span data-ttu-id="d5a1f-344">Microsoft BizTalk Server: BizTalk 高執行緒計數</span><span class="sxs-lookup"><span data-stu-id="d5a1f-344">Microsoft BizTalk Server:  BizTalk High Thread Count</span></span>                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="d5a1f-345">「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-345">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="d5a1f-346">如果超過此臨界值時，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會嘗試減少 EPM 執行緒集區和訊息代理程式 」 執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-346">If this threshold is exceeded, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="d5a1f-347">在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-347">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="d5a1f-348">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-348">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="d5a1f-349">依預設會停用執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-349">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="d5a1f-350">如需詳細資訊，請參閱 BizTalk 高執行緒計數分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-350">For more information, refer to BizTalk High Thread Count Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                 <span data-ttu-id="d5a1f-351">Microsoft BizTalk Server: BizTalk 主控件佇列長度</span><span class="sxs-lookup"><span data-stu-id="d5a1f-351">Microsoft BizTalk Server:  BizTalk Host Queue Length</span></span>                  |                                                                                                                                                                                                                                                                                            <span data-ttu-id="d5a1f-352">BizTalk 主控件佇列長度會追蹤特定主控件佇列中的訊息總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-352">The BizTalk Host Queue Length tracks the total number of messages in the particular host queue.</span></span> <span data-ttu-id="d5a1f-353">您可以使用長度大小 （亦即，' BizTalk:MessageBox:HostCounters:Host 佇列 – 長度 '） 提供給正在排在內部所顯示的佇列深度為個別主機的訊息數目的更詳細的檢視。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-353">You can use length size (i.e., ‘BizTalk:MessageBox:HostCounters:Host Queue – Length’) to give a more detailed view of the number of messages being queued up internally by showing the queue depth for an individual host.</span></span> <span data-ttu-id="d5a1f-354">此計數器可用於判斷是否特定主機的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-354">This counter can be useful in determining if a specific host is bottlenecked.</span></span> <span data-ttu-id="d5a1f-355">假設每個傳輸使用唯一的主機，這能幫助您判斷潛在的傳輸瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-355">Assuming unique hosts are used for each transport, this can be helpful in determining potential transport bottlenecks.</span></span> <span data-ttu-id="d5a1f-356">這項分析會檢查平均佇列長度大於 1。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-356">This analysis checks for average queue lengths greater than 1.</span></span> <span data-ttu-id="d5a1f-357">主控件佇列長度會是藉由彙總所有的佇列 (工作 Q，狀態 Q，暫止 Q) 的記錄計數的目標主機加權的佇列長度。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-357">The Host Queue Length is a weighted Queue length by aggregating the record count of all the Queues (Work Q, State Q, Suspended Q) of the target host.</span></span><br /><br /> <span data-ttu-id="d5a1f-358">參考： BizTalk Server 2006： 管理在成功的效能實驗室[ http://go.microsoft.com/fwlink/?linkid=104152 ](http://go.microsoft.com/fwlink/?linkid=104152) **附註：** 這份白皮書也是適用於 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-358">Reference: BizTalk Server 2006: Managing a Successful Performance Lab at [http://go.microsoft.com/fwlink/?linkid=104152](http://go.microsoft.com/fwlink/?linkid=104152) **Note:**  This white paper is also applicable to BizTalk Server.</span></span>                                                                                                                                                                                                                                                                                             |
|        <span data-ttu-id="d5a1f-359">Microsoft BizTalk Server: BizTalk 主控件擱置的訊息佇列長度</span><span class="sxs-lookup"><span data-stu-id="d5a1f-359">Microsoft BizTalk Server: BizTalk Host Suspended Messages Queue Length</span></span>         |                                                                                                                                                                                          <span data-ttu-id="d5a1f-360">此計數器會追蹤特定主控件擱置的訊息總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-360">This counter tracks the total number of suspended messages for the particular host.</span></span> <span data-ttu-id="d5a1f-361">擱置的訊息是訊息或協調流程的執行個體，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止處理因為發生錯誤的系統或訊息中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-361">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="d5a1f-362">一般來說，因系統錯誤而擱置的執行個體會在系統問題獲得解決後繼續。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-362">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="d5a1f-363">通常，因訊息有問題而擱置的執行個體是不可繼續處理，而且必須修正訊息本身，並提交至[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-363">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span><br /><br /> <span data-ttu-id="d5a1f-364">擱置的訊息佇列是包含的錯誤或失敗的處理過程中發現的工作項目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-364">The suspended message queue is a queue that contains work items for which an error or failure was encountered during processing.</span></span> <span data-ttu-id="d5a1f-365">訊息擱置佇列會儲存訊息直到修正和重新處理或是刪除後為止。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-365">A suspended queue stores the messages until they can be corrected and reprocessed, or deleted.</span></span> <span data-ttu-id="d5a1f-366">這項分析會檢查任何擱置的訊息出現。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-366">This analysis checks for any occurrence of suspended messages.</span></span> <span data-ttu-id="d5a1f-367">增加的趨勢可能表示嚴重的處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-367">An increasing trend could indicate severe processing errors.</span></span><br /><br /> <span data-ttu-id="d5a1f-368">參考： BizTalk Server 2004： 監視，並在進行疑難排解 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-368">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>                                                                                                                                                                                          |
|                     <span data-ttu-id="d5a1f-369">BizTalk Server: BizTalk 閒置協調流程</span><span class="sxs-lookup"><span data-stu-id="d5a1f-369">BizTalk Server:  BizTalk Idle Orchestrations</span></span>                      |                                                                                                                    <span data-ttu-id="d5a1f-370">目前由主控件執行個體裝載而閒置的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-370">Number of idle orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="d5a1f-371">此計數器是指不進行進度，但不是可凍結的協調流程。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-371">This counter refers to orchestrations that are not making progress but are not dehydratable.</span></span> <span data-ttu-id="d5a1f-372">協調流程會遭到封鎖時，可能會發生這種情況下等待接收，接聽或不可部分完成的交易的延遲時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-372">This situation can occur when the orchestration is blocked, waiting for a receive, listen, or delay in an atomic transaction.</span></span> <span data-ttu-id="d5a1f-373">如果大量的非可凍結的協調流程會累積，BizTalk 可能會用盡記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-373">If a large number of non-dehydratable orchestrations accumulate, then BizTalk may run out of memory.</span></span><br /><br /> <span data-ttu-id="d5a1f-374">凍結是將協調流程狀態序列化到 SQL Server 資料庫中的程序。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-374">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="d5a1f-375">解除凍結是此程序的反向： 還原序列化之資料庫的協調流程最後一個執行中狀態。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-375">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="d5a1f-376">凍結是藉由減少必須一次在記憶體中產生的協調流程數目，來將系統資源的使用降至最低。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-376">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="d5a1f-377">引擎會儲存狀態以凍結執行個體，並釋出執行個體所需的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-377">The engine dehydrates the instance by saving the state, and frees up the memory required by the instance.</span></span> <span data-ttu-id="d5a1f-378">透過凍結休眠的協調流程執行個體，引擎就可以讓大量的長時間執行之商務程序在相同電腦上同時執行。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-378">By dehydrating dormant orchestration instances, the engine makes it possible for a large number of long-running business processes to run concurrently on the same computer.</span></span> <span data-ttu-id="d5a1f-379">這項分析會檢查遞增趨勢的每小時一個閒置的協調流程。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-379">This analysis checks for an increasing trend of one idle orchestration per hour.</span></span><br /><br /> <span data-ttu-id="d5a1f-380">參考： 協調流程凍結和解除凍結，在  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-380">Reference: Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>                                                                                                                     |
|                       <span data-ttu-id="d5a1f-381">BizTalk Server: BizTalk 輸入延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-381">BizTalk Server:  BizTalk Inbound Latency</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="d5a1f-382">平均延遲 （毫秒），傳訊引擎收到文件從配接器之前發佈到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-382">Average latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the MessageBox.</span></span> <span data-ttu-id="d5a1f-383">減少延遲，請務必使用的 BizTalk 中，某些使用者因此追蹤時間的文件花費在輸入配接器是很重要。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-383">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span> <span data-ttu-id="d5a1f-384">如需詳細資訊，請參閱 BizTalk 輸入延遲分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-384">For more information, refer to BizTalk Inbound Latency Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                    <span data-ttu-id="d5a1f-385">BizTalk Server: BizTalk 訊息傳遞延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-385">BizTalk Server:  BizTalk Message Delivery Delay</span></span>                    |                                                                                                                                                                         <span data-ttu-id="d5a1f-386">這是目前的延遲毫秒 (ms) 每個訊息傳遞批次 （適用於訊息傳遞正在進行節流）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-386">This is the current delay in milliseconds (ms) imposed on each message delivery batch (applicable if the message delivery is being throttled).</span></span> <span data-ttu-id="d5a1f-387">節流的相關事宜，在發行或處理訊息，根據訊息是傳入或傳出時套用延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-387">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="d5a1f-388">延遲期間節流狀況的嚴重性成正比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-388">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="d5a1f-389">較高的嚴重性節流狀況將會起始與較低的嚴重性節流狀況的更長的節流期間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-389">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="d5a1f-390">透過狀況變更時的節流機制，這個延遲期間可在特定範圍內上下調整。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-390">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="d5a1f-391">目前的延遲期間會公開透過訊息傳遞延遲 （毫秒） 」 和 「 訊息發佈延遲 （毫秒） 效能計數器與 biztalk： 訊息代理程式的效能物件類別相關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-391">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-392">這項分析會檢查訊息傳遞延遲大於 5 秒。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-392">This analysis checks for a message delivery delay of greater than 5 seconds.</span></span> <span data-ttu-id="d5a1f-393">長訊息傳遞延遲，可能表示大量的節流，因為高負載。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-393">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="d5a1f-394">參考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-394">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>                                                                                                                                                                         |
|              <span data-ttu-id="d5a1f-395">BizTalk Server: BizTalk 訊息傳遞節流狀態</span><span class="sxs-lookup"><span data-stu-id="d5a1f-395">BizTalk Server:  BizTalk Message Delivery Throttling State</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="d5a1f-396">BizTalk 訊息傳遞節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-396">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="d5a1f-397">它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸出傳輸） 的訊息傳遞。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-397">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="d5a1f-398">節流情況是計數器的數值表示。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-398">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="d5a1f-399">如需詳細資訊，請參閱本主題中的 BizTalk 訊息傳遞節流狀態分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-399">For more information, see BizTalk Message Delivery Throttling State Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                   <span data-ttu-id="d5a1f-400">BizTalk Server: BizTalk 訊息發佈延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-400">BizTalk Server:  BizTalk Message Publishing Delay</span></span>                   |                                                                                                                                                                                                    <span data-ttu-id="d5a1f-401">插入每個合格批次因為調整訊息發佈延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-401">The delay injected in each qualifying batch for throttling the publishing of messages.</span></span> <span data-ttu-id="d5a1f-402">節流的相關事宜，在發行或處理訊息，根據訊息是傳入或傳出時套用延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-402">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="d5a1f-403">延遲期間節流狀況的嚴重性成正比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-403">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="d5a1f-404">較高的嚴重性節流狀況將會起始與較低的嚴重性節流狀況的更長的節流期間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-404">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="d5a1f-405">透過狀況變更時的節流機制，這個延遲期間可在特定範圍內上下調整。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-405">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="d5a1f-406">目前的延遲期間會公開透過訊息傳遞延遲 （毫秒） 」 和 「 訊息發佈延遲 （毫秒） 效能計數器與 biztalk： 訊息代理程式的效能物件類別相關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-406">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-407">這項分析會檢查訊息，發佈大於 5 秒的延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-407">This analysis checks for a message publishing delay of greater than 5 seconds.</span></span> <span data-ttu-id="d5a1f-408">長訊息傳遞延遲，可能表示大量的節流，因為高負載。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-408">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="d5a1f-409">參考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-409">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>                                                                                                                                                                                                    |
|           <span data-ttu-id="d5a1f-410">BizTalk Server: BizTalk MessageBox 資料庫連線失敗</span><span class="sxs-lookup"><span data-stu-id="d5a1f-410">BizTalk Server:  BizTalk MessageBox Database Connection Failures</span></span>            |                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="d5a1f-411">此效能計數器是資料庫連線嘗試失敗，因為啟動主控件執行個體的數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-411">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="d5a1f-412">如果因為任何原因，裝載 BizTalk 資料庫的 SQL Server 服務變成無法使用，資料庫叢集會將資源從主動電腦傳送到被動電腦中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-412">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="d5a1f-413">容錯移轉過程中，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]服務執行個體發生資料庫連線失敗，並自動重新啟動以重新連接到資料庫。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-413">During this failover process, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="d5a1f-414">正在運作的資料庫電腦 (先前為被動電腦) 會在容錯移轉期間獲得資源後，開始處理資料庫連接。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-414">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span> <span data-ttu-id="d5a1f-415">如需詳細資訊，請參閱 BizTalk MessageBox 資料庫連線失敗分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-415">For more information, refer to BizTalk MessageBox Database Connection Failures Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                      |
|         <span data-ttu-id="d5a1f-416">BizTalk Server: BizTalk 傳訊延遲： 要求回應延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-416">BizTalk Server:  BizTalk Messaging Latency:  Request Response Latency</span></span>         |                                                                                                                                                                                                                                                                                                                                                              <span data-ttu-id="d5a1f-417">傳訊引擎從配接器收到要求文件，到回應文件傳回該配接器之間的平均延遲 (毫秒)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-417">Average latency in milliseconds from when the Messaging Engine receives a request document from the adapter until the time a response document is given back to the adapter.</span></span> <span data-ttu-id="d5a1f-418">請參閱 BizTalk 輸入延遲分析中測量延遲是如何，本主題中所顯示的圖表。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-418">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="d5a1f-419">假設低延遲的環境，這項分析會檢查大於 5 秒的要求-回應延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-419">Assuming a low latency environment, this analysis checks for a Request-Response Latency greater than 5 seconds.</span></span> <span data-ttu-id="d5a1f-420">這可能表示輸入配接器和輸出配接器之間的處理延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-420">This may indicate a processing delay between the inbound adapter and the outbound adapter.</span></span><br /><br /> <span data-ttu-id="d5a1f-421">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-421">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-422">-要求/回應訊息在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-422">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="d5a1f-423">BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-423">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span>                                                                                                                                                                                                                                                                                                                                                              |
|            <span data-ttu-id="d5a1f-424">BizTalk Server: BizTalk 訊息發佈節流狀態</span><span class="sxs-lookup"><span data-stu-id="d5a1f-424">BizTalk Server:  BizTalk Messaging Publishing Throttling State</span></span>             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="d5a1f-425">BizTalk 訊息發佈節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-425">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="d5a1f-426">它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸入的傳輸） 的訊息發佈。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-426">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).</span></span> <span data-ttu-id="d5a1f-427">如需詳細資訊，請參閱 BizTalk 訊息發佈節流狀態分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-427">For more information, refer to BizTalk Messaging Publishing Throttling State Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                <span data-ttu-id="d5a1f-428">BizTalk Server: BizTalk 協調流程已暫止/秒</span><span class="sxs-lookup"><span data-stu-id="d5a1f-428">BizTalk Server:  BizTalk Orchestration Suspended/second</span></span>                |                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="d5a1f-429">擱置的訊息是訊息或協調流程的執行個體，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止處理因為發生錯誤的系統或訊息中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-429">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="d5a1f-430">一般來說，因系統錯誤而擱置的執行個體會在系統問題獲得解決後繼續。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-430">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="d5a1f-431">通常，因訊息有問題而擱置的執行個體是不可繼續處理，而且必須修正訊息本身，並提交至[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-431">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="d5a1f-432">這項分析會檢查任何擱置的訊息/協調流程。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-432">This analysis checks for any suspended messages/orchestrations.</span></span><br /><br /> <span data-ttu-id="d5a1f-433">參考： BizTalk Server 2004： 監視，並在進行疑難排解 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-433">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
|               <span data-ttu-id="d5a1f-434">BizTalk Server: BizTalk 協調流程已完成/秒</span><span class="sxs-lookup"><span data-stu-id="d5a1f-434">BizTalk Server:  BizTalk Orchestrations Completed/second</span></span>                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="d5a1f-435">這是已完成的 BizTalk 協調流程數 / 秒。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-435">This is the number of BizTalk orchestrations that have completed per second.</span></span> <span data-ttu-id="d5a1f-436">這是很好的指標，指出在處理 BizTalk 多少輸送量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-436">This is a good indicator as to how much throughput BizTalk is processing.</span></span> <span data-ttu-id="d5a1f-437">這項分析會提供僅限統計資料。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-437">This analysis provides statistics only.</span></span><br /><br /> <span data-ttu-id="d5a1f-438">參考： BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究</span><span class="sxs-lookup"><span data-stu-id="d5a1f-438">Reference:  BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006</span></span> <br />[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                   <span data-ttu-id="d5a1f-439">BizTalk Server: BizTalk 協調流程捨棄</span><span class="sxs-lookup"><span data-stu-id="d5a1f-439">BizTalk Server:  BizTalk Orchestrations Discarded</span></span>                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="d5a1f-440">自從主控件執行個體啟動之後，已從記憶體捨棄的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-440">Number of orchestration instances discarded from memory since the host instance started.</span></span> <span data-ttu-id="d5a1f-441">如果引擎無法保存協調流程的狀態，即可予以捨棄。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-441">An orchestration can be discarded if the engine fails to persist its state.</span></span> <span data-ttu-id="d5a1f-442">這項分析會檢查有任何已捨棄的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-442">This analysis checks for any discarded messages.</span></span><br /><br /> <span data-ttu-id="d5a1f-443">參考： BizTalk 核心引擎的部落格</span><span class="sxs-lookup"><span data-stu-id="d5a1f-443">Reference:  BizTalk Core Engine's WebLog</span></span><br />[http://go.microsoft.com/fwlink/?linkid=108775](http://go.microsoft.com/fwlink/?linkid=108775)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|              <span data-ttu-id="d5a1f-444">BizTalk Server: BizTalk 協調流程常駐在記憶體中</span><span class="sxs-lookup"><span data-stu-id="d5a1f-444">BizTalk Server:  BizTalk Orchestrations Resident in Memory</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="d5a1f-445">目前由主控件執行個體裝載的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-445">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="d5a1f-446">這項分析會檢查遞增趨勢中的記憶體，以及超過 50%的記憶體中駐留的協調流程不是可凍結的協調流程中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-446">This analysis checks for an increasing trend in orchestrations resident in memory and whether more than 50 percent of the orchestrations resident in memory are not dehydratable.</span></span> <span data-ttu-id="d5a1f-447">如需詳細資訊，請參閱 BizTalk 協調流程常駐在記憶體分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-447">For more information, refer to BizTalk Orchestrations Resident in Memory Analysis.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                   <span data-ttu-id="d5a1f-448">BizTalk Server: BizTalk 配接器輸出延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-448">BizTalk Server:  BizTalk Outbound Adapter Latency</span></span>                   |                                                                                                  <span data-ttu-id="d5a1f-449">這是配接器收到文件，傳訊引擎從配接器傳送的時間之前的秒數的平均延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-449">This is the average latency in seconds from when the adapter gets a document from the messaging engine until the time it is sent by the adapter.</span></span> <span data-ttu-id="d5a1f-450">請參閱 BizTalk 輸入延遲分析中測量延遲是如何，本主題中所顯示的圖表。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-450">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="d5a1f-451">假設低延遲的環境，這項分析會檢查在輸出配接器中的大於 5 秒的延遲平均。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-451">Assuming a low latency environment, this analysis checks for latency in the outbound adapter of greater than 5 seconds on average.</span></span> <span data-ttu-id="d5a1f-452">這可能表示之傳輸的訊息透過此主控件執行個體中的輸出配接器的處理延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-452">This may indicate a processing delay in the transport of messages through outbound adapters in this host instance.</span></span> <span data-ttu-id="d5a1f-453">如果多個輸出配接器存在於此主控件執行個體，請考慮將它們分割到他們自己的主機，以判斷哪一個輸出配接器具有高延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-453">If multiple outbound adapters exist in this host instance, then consider separating them into their own hosts to determine which outbound adapter has high latency.</span></span><br /><br /> <span data-ttu-id="d5a1f-454">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-454">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-455">-要求/回應訊息在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-455">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="d5a1f-456">BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-456">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span><br /><span data-ttu-id="d5a1f-457">識別 BizTalk 層中的瓶頸 [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-457">-   Identifying Bottlenecks in the BizTalk Tier at [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span></span><br /><span data-ttu-id="d5a1f-458">BizTalk Server 2004： 的低延遲的訊息以效能微調 [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-458">-   BizTalk Server 2004: Performance Tuning for Low Latency Messaging at [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span></span>                                                                                                   |
|                       <span data-ttu-id="d5a1f-459">暫止訊息的 BizTalk Server: BizTalk</span><span class="sxs-lookup"><span data-stu-id="d5a1f-459">BizTalk Server:  BizTalk Pending Messages</span></span>                       |                                                                                                                                                                                                        <span data-ttu-id="d5a1f-460">接收到 MessageBox 收到尚未認可的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-460">The number of received messages that have not been acknowledged as received to the MessageBox.</span></span> <span data-ttu-id="d5a1f-461">擱置的訊息會有已提取至記憶體，並傳遞至 XLANG 協調流程中，但是尚未已處理訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-461">Pending messages are messages that have been pulled into memory and delivered to the XLANG orchestration, but have not yet been processed.</span></span> <span data-ttu-id="d5a1f-462">這種情況下有不執行任何動作，而遺失資料。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-462">This circumstance has nothing to do with data loss.</span></span>  <span data-ttu-id="d5a1f-463">傳遞訊息至協調流程是多步驟程序，只是位在資料庫中的多工緩衝處理資料表中的訊息執行個體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-463">Delivering a message to an orchestration is a multi-step process and is simply an instance of the message residing in the spool table in the database.</span></span> <span data-ttu-id="d5a1f-464">這些暫止訊息計數為內含式訊息;因此，需要大量的記憶體中可能會導致記憶體節流設定在系統上。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-464">These pending messages count as in-process messages; therefore, having a large number of them in memory could cause memory throttling on the system.</span></span> <span data-ttu-id="d5a1f-465">調整 [內部訊息佇列大小] 設定將有助於與可控制的暫止訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-465">Adjusting the Internal Message Queue Size setting could help with controlling the number of pending messages.</span></span> <span data-ttu-id="d5a1f-466">每個 CPU 的內含式訊息設定會影響當節流會叫用大量的暫止訊息發生時。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-466">The In-Process Messages Per CPU setting has an impact on when throttling will invoke when a high number of pending messages occurs.</span></span> <span data-ttu-id="d5a1f-467">在 BizTalk 管理主控台中的主控件屬性中找到這些設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-467">These setting are found in the Host properties in the BizTalk Administration Console.</span></span> <span data-ttu-id="d5a1f-468">這項分析會檢查只為這個計數器會顯示統計資料。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-468">This analysis checks only shows statistics for this counter.</span></span><br /><br /> <span data-ttu-id="d5a1f-469">參考： 在協調流程引擎效能計數器 [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-469">Reference: Orchestration Engine Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span></span>                                                                                                                                                                                                         |
|                  <span data-ttu-id="d5a1f-470">BizTalk Server: BizTalk 持續點/秒</span><span class="sxs-lookup"><span data-stu-id="d5a1f-470">BizTalk Server:  BizTalk Persistence Points/second</span></span>                   |                                                                                         <span data-ttu-id="d5a1f-471">平均每秒保存的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-471">Average number of orchestration instances persisted per second.</span></span> <span data-ttu-id="d5a1f-472">協調流程引擎會在不同點儲存執行中協調流程執行個體的狀態。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-472">The orchestration engine saves the state of a running orchestration instance at various points.</span></span> <span data-ttu-id="d5a1f-473">如果需要解除凍結協調流程執行個體、 從受控制的關機，啟動或從復原意外關機，則它會從上次保存點執行協調流程執行個體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-473">If it needs to rehydrate the orchestration instance, start up from a controlled shutdown, or recover from an unexpected shutdown, it will run the orchestration instance from the last persistence point.</span></span> <span data-ttu-id="d5a1f-474">若要將保存協調流程執行個體，所有物件協調流程直接或間接參考的執行個體 （像是透過其他物件） 必須是可序列化。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-474">In order to persist an orchestration instance, all object instances that your orchestration refers to directly or indirectly (as through other objects) must be serializable.</span></span> <span data-ttu-id="d5a1f-475">為訊息保存頻率 （資料需要保存的時間的數字） 增加，整體效能會降低。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-475">As message-persistence frequency (the number of times that data needs to be persisted) increases, overall performance decreases.</span></span> <span data-ttu-id="d5a1f-476">實際上，每個持續點是資料庫往返，因此盡可能減少持續點的頻率避免或彙總的持續點。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-476">In effect, each persistence point is a round trip to the database, so whenever possible reduce the frequency of persistence points by avoiding or consolidating persistence points.</span></span> <span data-ttu-id="d5a1f-477">請參閱下列參考，如需持續點發生的時機詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-477">See the references below for more information regarding when persistence points occur.</span></span> <span data-ttu-id="d5a1f-478">這項分析會檢查超過 10 個持續點，每秒平均。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-478">This analysis checks for more than 10 persistence points per second on average.</span></span> <span data-ttu-id="d5a1f-479">這是一般的起始點。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-479">This is a general starting point.</span></span><br /><br /> <span data-ttu-id="d5a1f-480">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-480">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-481">-在協調流程中的持續性 [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-481">-   Persistence in Orchestrations at [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span></span><br /><span data-ttu-id="d5a1f-482">持續性及在協調流程引擎 [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-482">-   Persistence and the Orchestration Engine at [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span></span>                                                                                         |
|                        <span data-ttu-id="d5a1f-483">BizTalk Server: BizTalk 私用位元組</span><span class="sxs-lookup"><span data-stu-id="d5a1f-483">BizTalk Server:  BizTalk Private Bytes</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="d5a1f-484">這是主控件執行個體，與比較的私用記憶體配置的 mb"\Process (\*) \Private 位元組 」 效能計數器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-484">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(\*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="d5a1f-485">這項分析會判斷任何主控件執行個體是否使用大型系統的記憶體大小和主控件執行個體是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-485">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="d5a1f-486">本主題，如需詳細資訊，請參閱 BizTalk 私用位元組分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-486">Refer to BizTalk Private Bytes Analysis in this topic for more information.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                       <span data-ttu-id="d5a1f-487">BizTalk Server: BizTalk 多工緩衝處理表格大小</span><span class="sxs-lookup"><span data-stu-id="d5a1f-487">BizTalk Server:  BizTalk Spool Table Size</span></span>                       |                                                  <span data-ttu-id="d5a1f-488">MessageBox 多工緩衝處理表格包含系統中的每個訊息的記錄 (作用中或等候 「 回收 」)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-488">The MessageBox spool table contains a record for each message in the system (active or waiting to be "garbage collected").</span></span> <span data-ttu-id="d5a1f-489">監視此資料表中的資料列數目和增加系統負載提供簡單的方法來尋找最大持續輸送量時，每秒接收的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-489">Monitoring the number of rows in this table and the number of messages received per second while increasing system load provides an easy way to find the maximum sustainable throughput.</span></span> <span data-ttu-id="d5a1f-490">只要增加可能是 1) 的多工緩衝處理表格開始無限成長之前的輸入的負載或 2） 每個第二個富饒，視何者先，也就是您最大持續輸送量所接收的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-490">Simply increase the input load until either 1) the spool table starts to grow indefinitely or 2) the number of messages received per second plateaus, whichever comes first, and that is your maximum sustainable throughput.</span></span> <span data-ttu-id="d5a1f-491">總而言之，無論其他指標，此量值會讓您快速且輕鬆的方式，來評估您的系統過度不。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-491">In summary, regardless of other indicators, this measure will give you a quick and easy way to assess whether your system is being overdriven or not.</span></span> <span data-ttu-id="d5a1f-492">當 BizTalk 多工緩衝處理表格大小會增加的趨勢時，然後由於而進行節流不平衡的訊息傳遞速率 （輸入的速率超過輸出速率） 或可能是由於資料庫大小而進行節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-492">When the BizTalk spool tables size is on an increasing trend, then throttling due to imbalanced message delivery rate (input rate exceeds output rate) or throttling due to Database size may occur.</span></span> <span data-ttu-id="d5a1f-493">這項分析會檢查在 BizTalk 多工緩衝處理表格大小增加的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-493">This analysis checks for an increasing trend in the BizTalk Spool Table Size.</span></span><br /><br /> <span data-ttu-id="d5a1f-494">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-494">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-495">-了解 BizTalk Server 2004 SP1 輸送量和容量 [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-495">-   Understanding BizTalk Server 2004 SP1 Throughput and Capacity at [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span></span><br /><span data-ttu-id="d5a1f-496">-持續性負載測試 [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-496">-   Sustainable Load Test at [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span></span><br /><span data-ttu-id="d5a1f-497">-建議測試引擎效能時 [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-497">-   Recommendations When Testing Engine Performance at [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span></span>                                                   |
|                      <span data-ttu-id="d5a1f-498">BizTalk Server: BizTalk 追蹤資料大小</span><span class="sxs-lookup"><span data-stu-id="d5a1f-498">BizTalk Server:  BizTalk Tracking Data Size</span></span>                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="d5a1f-499">當 BizTalk Server 處理您的系統上的多資料時，BizTalk 追蹤資料庫 (BizTalkDTADb) 持續成長的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-499">As BizTalk Server processes more and more data on your system, the BizTalk Tracking database (BizTalkDTADb) continues to grow in size.</span></span> <span data-ttu-id="d5a1f-500">若未發現此成長現象將會降低系統效能，並且可能會在 Tracking Data Delivery Service (TDDS) 中產生錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-500">Unchecked growth decreases system performance and may generate errors in the Tracking Data Delivery Service (TDDS).</span></span> <span data-ttu-id="d5a1f-501">除了一般追蹤資料以外，追蹤的訊息也會累積在 MessageBox 資料庫，導致磁碟效能變差。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-501">In addition to general tracking data, tracked messages can also accumulate in the MessageBox database, causing poor disk performance.</span></span> <span data-ttu-id="d5a1f-502">這項分析會檢查超過 5 mb 的每小時追蹤以遞增趨勢的資料大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-502">This analysis checks for an increasing trend of more than 5 MB’s per hour in the tracking data size.</span></span><br /><br /> <span data-ttu-id="d5a1f-503">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-503">Reference:</span></span><br /><br /> <span data-ttu-id="d5a1f-504">封存和清除 BizTalk 追蹤資料庫  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-504">Archiving and Purging the BizTalk Tracking Database at  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                 <span data-ttu-id="d5a1f-505">BizTalk Server: BizTalk 交易式範圍中止</span><span class="sxs-lookup"><span data-stu-id="d5a1f-505">BizTalk Server:  BizTalk Transactional Scopes Aborted</span></span>                 |                                                                                                                                                                                                                                                                                       <span data-ttu-id="d5a1f-506">這是主控件執行個體啟動後已中止的長時間執行或不可部分完成的範圍數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-506">This is the number of long-running or atomic scopes that have been aborted since the host instance started.</span></span> <span data-ttu-id="d5a1f-507">交易式範圍中止為協調流程內的交易範圍內發生的失敗。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-507">A transactional scope abort is a failure that occurs in a transaction scope within an orchestration.</span></span> <span data-ttu-id="d5a1f-508">請務必了解的範圍已順利完成，但是然後才可以復原，因為周圍的範圍已決定中止 （因為在程序稍後可能會發生的失敗） 時，才可以叫用範圍的補償處理常式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-508">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="d5a1f-509">此外，「 自動 」 復原的狀態就會發生交易中止時。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-509">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="d5a1f-510">您可以達到這個結果，以程式設計方式透過例外狀況和補償處理常式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-510">You can achieve this outcome programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="d5a1f-511">交易式範圍中止應該不通常發生在生產環境中;因此，這項分析會檢查任何中止的交易式範圍的相符項目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-511">Transactional scope aborts should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="d5a1f-512">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-512">Reference:</span></span><br /><br /> <span data-ttu-id="d5a1f-513">交易，無論在 BizTalk Server 2004 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-513">Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>                                                                                                                                                                                                                                                                                       |
|               <span data-ttu-id="d5a1f-514">BizTalk Server: BizTalk 交易式範圍補償</span><span class="sxs-lookup"><span data-stu-id="d5a1f-514">BizTalk Server:  BizTalk Transactional Scopes Compensated</span></span>               |                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="d5a1f-515">補償可以視為邏輯復原已成功提交回應某個錯誤狀況的工作。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-515">Compensation can be thought of as a logical undo of the work that has been successfully committed in response to some error condition.</span></span> <span data-ttu-id="d5a1f-516">請務必了解的範圍已順利完成，但是然後才可以復原，因為周圍的範圍已決定中止 （因為在程序稍後可能會發生的失敗） 時，才可以叫用範圍的補償處理常式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-516">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="d5a1f-517">此外，「 自動 」 復原的狀態就會發生交易中止時。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-517">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="d5a1f-518">您可以透過例外狀況和補償處理常式，以程式設計方式來達成這點。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-518">You can achieve this programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="d5a1f-519">交易式範圍的補償不應該通常發生在實際執行環境;因此，這項分析會檢查任何中止的交易式範圍的相符項目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-519">Transactional scope compensations should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="d5a1f-520">參考： 交易，無論在 BizTalk Server 2004 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-520">Reference: Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>                                                                                                                                                                                                                                                                                                                                   |
|                        <span data-ttu-id="d5a1f-521">BizTalk 虛擬位元組時，BizTalk Server:</span><span class="sxs-lookup"><span data-stu-id="d5a1f-521">BizTalk Server:  BizTalk Virtual Bytes</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="d5a1f-522">這是保留給主控件執行個體的虛擬記憶體 （mb）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-522">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="d5a1f-523">這項分析會判斷是否任何主控件執行個體正在耗用大量系統的記憶體和主控件執行個體是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-523">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="d5a1f-524">如需詳細資訊，請參閱 BizTalk 虛擬位元組分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-524">For more information, refer to BizTalk Virtual Bytes Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|          <span data-ttu-id="d5a1f-525">BizTalk Server: BizTalk 訊息代理程式工作階段節流的資料庫</span><span class="sxs-lookup"><span data-stu-id="d5a1f-525">BizTalk Server:  BizTalk Message Agent Database Session Throttling</span></span>           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="d5a1f-526">這是相較於其節流設定的個別 BizTalk MessageBox 的開啟資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-526">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="d5a1f-527">「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-527">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="d5a1f-528">如需詳細資訊，請參閱 BizTalk 訊息代理程式資料庫工作階段節流分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-528">For more information, refer to BizTalk Message Agent Database Session Throttling Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|     <span data-ttu-id="d5a1f-529">BizTalk Server: BizTalk 訊息代理程式資料庫工作階段節流閾值</span><span class="sxs-lookup"><span data-stu-id="d5a1f-529">BizTalk Server:  BizTalk Message Agent Database Session Throttling Threshold</span></span>      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="d5a1f-530">這是到 MessageBox 的開啟資料庫連線數目的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-530">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="d5a1f-531">「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-531">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="d5a1f-532">如需詳細資訊，請參閱 BizTalk 訊息代理程式資料庫工作階段節流閾值分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-532">For more information, refer to BizTalk Message Agent Database Session Throttling Threshold Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|      <span data-ttu-id="d5a1f-533">BizTalk Server: BizTalk 訊息代理程式內含式訊息計數節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-533">BizTalk Server:  BizTalk Message Agent In-process Message Count Throttling</span></span>       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="d5a1f-534">這是服務類別正在處理的並行訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-534">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="d5a1f-535">「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-535">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="d5a1f-536">如需詳細資訊，請參閱本主題中 BizTalk 訊息代理程式內含式訊息計數節流分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-536">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="d5a1f-537">BizTalk Server: BizTalk 訊息代理程式內含式訊息計數節流閾值</span><span class="sxs-lookup"><span data-stu-id="d5a1f-537">BizTalk Server:  BizTalk Message Agent In-process Message Count Throttling Threshold</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="d5a1f-538">這是目前的服務類別正在處理的並行訊息數的閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-538">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="d5a1f-539">「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-539">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="d5a1f-540">如需詳細資訊，請參閱 BizTalk 訊息代理程式內含式訊息計數節流閾值分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-540">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Threshold Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|      <span data-ttu-id="d5a1f-541">BizTalk Server: BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-541">BizTalk Server:  BizTalk Message Agent Process Memory Usage (MB) Throttling</span></span>      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="d5a1f-542">這是目前的處理序 (MB) 的記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-542">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="d5a1f-543">如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-543">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="d5a1f-544">如需詳細資訊，請參閱本主題中的 BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-544">For more information, refer to BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="d5a1f-545">BizTalk Server: BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流閾值</span><span class="sxs-lookup"><span data-stu-id="d5a1f-545">BizTalk Server:  BizTalk Message Agent Process Memory Usage (MB) Throttling Threshold</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="d5a1f-546">這是目前的處理序 (MB) 的記憶體使用量的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-546">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="d5a1f-547">閾值可以根據實際數量的記憶體可供此程序和其記憶體耗用量模式動態調整。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-547">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="d5a1f-548">如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-548">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="d5a1f-549">如需詳細資訊，請參閱 BizTalk 訊息代理程式處理序記憶體使用量 (MB) 本主題中的節流臨界值分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-549">For more information, refer to BizTalk Message Agent Process memory usage (MB) Throttling Threshold Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|            <span data-ttu-id="d5a1f-550">節流的 BizTalk Server: BizTalk 訊息代理程式執行緒計數</span><span class="sxs-lookup"><span data-stu-id="d5a1f-550">BizTalk Server:  BizTalk Message Agent Thread Count Throttling</span></span>             | <span data-ttu-id="d5a1f-551">BizTalk 處理序中執行緒的總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-551">The total number of threads in the BizTalk process.</span></span> <span data-ttu-id="d5a1f-552">「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-552">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="d5a1f-553">若超過此閾值，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-553">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="d5a1f-554">在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-554">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="d5a1f-555">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-555">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="d5a1f-556">依預設會停用執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-556">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="d5a1f-557">這項分析會檢查 BizTalk 執行緒計數是否大於 80%的節流的臨界值，指出可能的節流狀況。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-557">This analysis checks whether the BizTalk Thread count is greater than 80 percent of the throttling threshold value indicating a throttling condition is likely.</span></span><br /><br /> <span data-ttu-id="d5a1f-558">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-558">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-559">-主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-559">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="d5a1f-560">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-560">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="d5a1f-561">-如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-561">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="d5a1f-562">會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-562">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="d5a1f-563">執行緒，資料庫中工作階段，並在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-563">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span> |
|       <span data-ttu-id="d5a1f-564">節流臨界值的 BizTalk Server: BizTalk 訊息代理程式執行緒計數</span><span class="sxs-lookup"><span data-stu-id="d5a1f-564">BizTalk Server:  BizTalk Message Agent Thread Count Throttling Threshold</span></span>        |                    <span data-ttu-id="d5a1f-565">這是目前的處理序中的執行緒總數閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-565">This is the current threshold for the total number of threads in the process.</span></span> <span data-ttu-id="d5a1f-566">「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-566">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="d5a1f-567">若超過此閾值，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-567">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="d5a1f-568">在其中高負載可能會導致建立大量執行緒的情況下應該啟用執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-568">Thread-based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="d5a1f-569">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-569">This parameter affects both inbound and outbound throttling.</span></span><br /><br /> <span data-ttu-id="d5a1f-570">這項分析會檢查此節流的設定是否設定為非預設值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-570">This analysis checks whether this throttling setting is set to a non-default value.</span></span> <span data-ttu-id="d5a1f-571">依預設會停用執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-571">Thread based throttling is disabled by default.</span></span><br /><br /> <span data-ttu-id="d5a1f-572">參考：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-572">References:</span></span><br /><br /> <span data-ttu-id="d5a1f-573">-主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-573">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="d5a1f-574">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-574">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="d5a1f-575">-如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-575">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="d5a1f-576">會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-576">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="d5a1f-577">執行緒，資料庫中工作階段，並在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-577">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>                    |

## <a name="logicalphysical-disk-readwrite-latency-analysis"></a><span data-ttu-id="d5a1f-578">邏輯/實體磁碟讀取/寫入延遲分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-578">Logical/Physical Disk Read/Write Latency Analysis</span></span>  
 <span data-ttu-id="d5a1f-579">Windows 偵測到的磁碟效能瓶頸，最可靠方式是藉由測量其回應時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-579">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="d5a1f-580">如果回應時間大於.025 （25 毫秒為單位），這是保守的臨界值，然後可能會發生明顯的速度變慢和會影響使用者的效能問題。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-580">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span>  

 <span data-ttu-id="d5a1f-581">不佳的磁碟延遲的常見原因是磁碟分散程度，效能快取、 使用量飽和的 SAN，並在磁碟上的負載過大。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-581">Common causes of poor disk latency are disk fragmentation, performance cache, an over saturated SAN, and too much load on the disk.</span></span> <span data-ttu-id="d5a1f-582">使用 SPA 工具來協助識別的前幾個檔案和使用磁碟的程序。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-582">Use the SPA tool to help identify the top files and processes using the disk.</span></span> <span data-ttu-id="d5a1f-583">也請檢查"處理序 IO Data Operations/sec"和"處理序 IO 其他 Operations/sec"，了解哪些處理程序會使用最多磁碟 I / O 的</span><span class="sxs-lookup"><span data-stu-id="d5a1f-583">Also check the “Process IO Data Operations/sec” and “Process IO Other Operations/sec” to see which processes are consuming the most disk I/O’s.</span></span> <span data-ttu-id="d5a1f-584">請記住，效能監視器計數器無法指定涉及哪些檔案。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-584">Keep in mind that performance monitor counters are unable to specify which files are involved.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-585">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-585">References</span></span>  

-   <span data-ttu-id="d5a1f-586">排除磁碟繫結的問題 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-586">Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>  

-   <span data-ttu-id="d5a1f-587">如何找出使用 Microsoft Server 效能 Advisor (SPA) 工具，在磁碟效能瓶頸 [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-587">How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span></span>  

-   <span data-ttu-id="d5a1f-588">在 Microsoft 服務 Performance Advisor (SPA) 下載詳細資料： [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-588">Download Details for Microsoft Service Performance Advisor (SPA) at: [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span></span>  

## <a name="logical-disk-transferssec"></a><span data-ttu-id="d5a1f-589">Logical Disk Transfers/sec</span><span class="sxs-lookup"><span data-stu-id="d5a1f-589">Logical Disk Transfers/sec</span></span>  
 <span data-ttu-id="d5a1f-590">"Disk Transfers/sec"是讀取的速度和寫入磁碟上的作業。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-590">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="d5a1f-591">雖然磁碟轉移操作不是直接的相互關聯至磁碟 I / O 的他們告訴我們發生多少磁碟作業。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-591">While disk transfers are not a direct correlation to disk I/O's, they do tell us how many disk operations are occurring.</span></span> <span data-ttu-id="d5a1f-592">如果您平均循序我 / O 的隨機 I / O 的則您會得到大約 80 I / O 的每個第二個一般的經驗法則。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-592">If you average out sequential I/O’s and random I/O's, then you end up with about 80 I/O's per second as a general rule of thumb.</span></span> <span data-ttu-id="d5a1f-593">因此，我們應該預期 SAN 磁碟機執行超過 80 I/O 的每個底下的第二個 when 載入。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-593">Therefore, we should expect a SAN drive to perform more than 80 I/O's per second when under load.</span></span> <span data-ttu-id="d5a1f-594">這項分析檢查以查看是否有任何邏輯磁碟的臨界值會顯示回應時間不佳 （大於 25 毫秒回應時間的 I/O 作業）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-594">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="d5a1f-595">如果為 true，我們應該預期每秒要等於或高於 80 磁碟轉移操作。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-595">If this is true, then we should expect the disk transfers per second to be at or above 80.</span></span> <span data-ttu-id="d5a1f-596">如果沒有，則磁碟架構需要進行調查。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-596">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="d5a1f-597">不佳的磁碟 I/O 的最常見原因是多載 san – 這表示多個 LUN 使用小型的實體磁碟陣列的位置條件的邏輯單元編號 (LUN)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-597">The most common cause of poor disk I/O is logical unit number (LUN) overloading on the SAN – meaning the condition where more than one LUN is using the small physical disk array.</span></span>  

### <a name="reference"></a><span data-ttu-id="d5a1f-598">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-598">Reference</span></span>  
 <span data-ttu-id="d5a1f-599">NT 伺服器和磁碟子系統效能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-599">NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>  

## <a name="available-memory-analysis"></a><span data-ttu-id="d5a1f-600">可用的記憶體分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-600">Available Memory Analysis</span></span>  
 <span data-ttu-id="d5a1f-601">"Available Mbytes 」 是以 mb 為單位的電腦上執行的處理序可用的實體記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-601">“Available Mbytes” is the amount of physical memory available to processes running on the computer, in megabytes.</span></span> <span data-ttu-id="d5a1f-602">虛擬記憶體管理員會持續調整用於在實體記憶體和磁碟上維護最小作業系統和處理序的可用位元組數目的空間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-602">The Virtual Memory Manager continually adjusts the space used in physical memory and on disk to maintain a minimum number of available bytes for the operating system and processes.</span></span> <span data-ttu-id="d5a1f-603">當可用的位元組是大量時，虛擬記憶體管理員可讓處理程序的工作集成長，或使其保持在穩定藉由移除舊的頁面，加入每一個新頁面。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-603">When available bytes are plentiful, the Virtual Memory Manager lets the working sets of processes grow, or keeps them stable by removing an old page for each new page added.</span></span> <span data-ttu-id="d5a1f-604">可用的位元組數時，虛擬記憶體管理員必須修剪流程，以便維持所需的最小工作集。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-604">When available bytes are few, the Virtual Memory Manager must trim the working sets of processes to maintain the minimum required.</span></span>  

 <span data-ttu-id="d5a1f-605">這項分析會檢查以查看總可用記憶體是否不足 – 10%可用警告] 和 [可用的 5%的重大。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-605">This analysis checks to see whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="d5a1f-606">警告也會收到警示，遞減趨勢 10 MB 的每小時會偵測到，指出潛在的即將發行的記憶體狀態。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-606">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, indicating a potential upcoming memory condition.</span></span> <span data-ttu-id="d5a1f-607">增加的特殊權限模式下 CPU 和系統的延遲，可能會導致實體記憶體不足。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-607">Low physical memory can cause increased privileged mode CPU and system delays.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-608">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-608">References</span></span>  

-   <span data-ttu-id="d5a1f-609">在偵測記憶體瓶頸 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-609">Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>  

-   <span data-ttu-id="d5a1f-610">排除記憶體繫結的問題 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-610">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  

## <a name="memory-leak-detection-analysis"></a><span data-ttu-id="d5a1f-611">記憶體流失偵測分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-611">Memory Leak Detection Analysis</span></span>  
 <span data-ttu-id="d5a1f-612">這項分析會判斷是否有任何處理序正在耗用大量系統的記憶體和處理程序是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-612">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="d5a1f-613">耗用記憶體的很大一部分的程序也沒關係，只要處理程序傳回給系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-613">A process consuming large portions of memory is okay as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="d5a1f-614">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-614">Look for increasing trends in the chart.</span></span> <span data-ttu-id="d5a1f-615">這段很長一段時間增加的趨勢可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-615">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="d5a1f-616">私用位元組是記憶體的目前的大小，以位元組為單位，此程序已配置，不能與其他處理序共用。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-616">Private Bytes is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="d5a1f-617">這項分析會檢查 10 MB 的每小時和 5 MB 的每小時增加的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-617">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="d5a1f-618">您可以使用這項分析中可用的記憶體分析與相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-618">Use this analysis in correlation with the Available Memory analysis.</span></span>  

 <span data-ttu-id="d5a1f-619">此外，請記住，新啟動處理程序一開始會顯示為記憶體流失時只是一般的啟動行為。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-619">Also, keep in mind that newly started processes will initially appear as a memory leak when it is simply normal startup behavior.</span></span> <span data-ttu-id="d5a1f-620">當處理程序會繼續耗用記憶體，並不會釋放記憶體一段長時間，就會發生記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-620">A memory leak occurs when a process continues to consume memory and does not release memory over a long period of time.</span></span>  

 <span data-ttu-id="d5a1f-621">如果您懷疑有記憶體流失情況，然後安裝並使用偵錯診斷工具。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-621">If you suspect a memory leak condition, then install and use the Debug Diag tool.</span></span> <span data-ttu-id="d5a1f-622">如需有關 「 偵錯診斷工具的詳細資訊，請參閱 [參考] 區段。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-622">For more information on the Debug Diag Tool, see the references section.</span></span>  

### <a name="reference"></a><span data-ttu-id="d5a1f-623">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-623">Reference</span></span>  
 <span data-ttu-id="d5a1f-624">偵錯在診斷工具 v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-624">Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>  

## <a name="memory-pagessec-analysis"></a><span data-ttu-id="d5a1f-625">記憶體每秒頁面分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-625">Memory Pages/sec Analysis</span></span>  
 <span data-ttu-id="d5a1f-626">這項分析會檢查 「 頁/秒 」 是否很高。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-626">This analysis checks to see whether the “Pages/sec” is high.</span></span> <span data-ttu-id="d5a1f-627">是否很高，然後系統可能用盡記憶體嘗試分頁至磁碟的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-627">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="d5a1f-628">「 頁/秒 」 是在讀取或寫入磁碟以解決硬體分頁錯誤頁面的速率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-628">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="d5a1f-629">此計數器是導致整個系統延遲錯誤的種類的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-629">This counter is a primary indicator of the kinds of faults that cause system-wide delays.</span></span>  <span data-ttu-id="d5a1f-630">它是 「 Memory\Pages Input/sec"和"Memory\Pages Output/sec"的總和。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-630">It is the sum of “Memory\Pages Input/sec” and “Memory\Pages Output/sec”.</span></span> <span data-ttu-id="d5a1f-631">它會計算分頁數，因此它可以與其他分頁數，例如"Memory\Page Faults/sec"。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-631">It is counted in numbers of pages, so it can be compared to other counts of pages, such as “Memory\Page Faults/sec”.</span></span>  

 <span data-ttu-id="d5a1f-632">此計數器，一律應低於 1,000。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-632">This counter should always be below 1,000.</span></span> <span data-ttu-id="d5a1f-633">這項分析會檢查超過 1,000 個的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-633">This analysis checks for values above 1,000.</span></span> <span data-ttu-id="d5a1f-634">您可以使用這項分析中可用的記憶體分析與記憶體流失偵測分析與相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-634">Use this analysis in correlation with Available Memory Analysis and Memory Leak Detection analysis.</span></span> <span data-ttu-id="d5a1f-635">如果所有分析會在此同時，擲都回警示，這可能表示系統已用盡記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-635">If all analyses are throwing alerts at the same time, then this may indicate the system is running out of memory.</span></span> <span data-ttu-id="d5a1f-636">請遵循本主題中的其他資訊有關記憶體流失偵測分析中所述的分析步驟。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-636">Follow analysis steps mentioned in Additional Information Regarding Memory Leak Detection analysis in this topic.</span></span>  

### <a name="reference"></a><span data-ttu-id="d5a1f-637">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-637">Reference</span></span>  
 <span data-ttu-id="d5a1f-638">排除記憶體繫結的問題 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-638">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  

## <a name="memory-system-cache-resident-bytes-analysis"></a><span data-ttu-id="d5a1f-639">記憶體系統快取常駐位元組分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-639">Memory System Cache Resident Bytes Analysis</span></span>  
 <span data-ttu-id="d5a1f-640">「 系統快取常駐位元組 」 是大小，以位元組為單位的可分頁作業系統程式碼，在檔案系統快取中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-640">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="d5a1f-641">此值包含目前的實體頁面，而不包含任何非目前駐留的虛擬記憶體分頁。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-641">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="d5a1f-642">它等於顯示在 工作管理員的系統快取值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-642">It does equal the System Cache value shown in Task Manager.</span></span> <span data-ttu-id="d5a1f-643">如此一來，此值可能小於實際的使用中的檔案系統快取的虛擬記憶體量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-643">As a result, this value may be smaller than the actual amount of virtual memory in use by the file system cache.</span></span> <span data-ttu-id="d5a1f-644">這個值是元件的 「 記憶體\\\System 常駐位元組的程式碼 」，表示目前位於實體記憶體的所有可分頁作業系統程式碼。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-644">This value is a component of “Memory\\\System Code Resident Bytes”, which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="d5a1f-645">此計數器會顯示最後觀察到的值它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-645">This counter displays the last observed value only; it is not an average.</span></span>  

 <span data-ttu-id="d5a1f-646">這項分析會檢查每小時遞增趨勢 10 mb。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-646">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="d5a1f-647">在負載下，伺服器可能會使用系統快取，以便快取 I/O 活動，例如磁碟。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-647">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="d5a1f-648">用於相互關聯處理序 IO Data Operations/sec 與其他處理序 IO 作業數/秒的分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-648">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses.</span></span>  

## <a name="processor-utilization-analysis-and-excessive-processor-use-by-processes"></a><span data-ttu-id="d5a1f-649">處理器使用率分析和處理序過度佔用處理器使用</span><span class="sxs-lookup"><span data-stu-id="d5a1f-649">Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>  
 <span data-ttu-id="d5a1f-650">「 處理器時間百分比 」 是處理器花費在執行非閒置執行緒所經過時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-650">“% Processor Time” is the percentage of elapsed time that the processor spends to execute a non-idle thread.</span></span> <span data-ttu-id="d5a1f-651">其計算方式是測量閒置執行緒處於使用中取樣間隔時間的持續時間，然後再從減去該時間間隔持續時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-651">It is calculated by measuring the duration the idle thread is active in the sample interval, and then subtracting that time from the interval duration.</span></span> <span data-ttu-id="d5a1f-652">（每顆處理器具有閒置執行緒可消耗的週期沒有其他執行緒已準備好執行時）。此計數器是處理器活動的主要指標，並顯示在取樣間隔時間期間觀察到的忙碌時間平均百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-652">(Each processor has an idle thread that consumes cycles when no other threads are ready to run.) This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="d5a1f-653">其計算方式是監視該服務處於非使用狀態的時間，然後從 100%減去該值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-653">It is calculated by monitoring the time that the service is inactive, and subtracting that value from 100 percent.</span></span>  

 <span data-ttu-id="d5a1f-654">這項分析會檢查使用率大於 60%，每個個別的處理器上。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-654">This analysis checks for utilization greater than 60 percent on each individual processor.</span></span> <span data-ttu-id="d5a1f-655">如果是的話，判斷它是否高使用者模式 CPU 或高特殊權限的模式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-655">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="d5a1f-656">如果懷疑高特殊權限的模式 CPU，則會看到 「 特殊權限模式 CPU 分析 」。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-656">If high privileged mode CPU is suspected, then see the “Privileged Mode CPU Analysis”.</span></span> <span data-ttu-id="d5a1f-657">如果懷疑的使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用量的函式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-657">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="d5a1f-658">請參閱 「 如何來： 識別造成高的使用者模式 CPU 瓶頸的伺服器應用程式在生產環境中的函式 「 如需詳細資訊的 [參考] 區段中的發行項。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-658">See “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  

## <a name="processor-queue-length-analysis"></a><span data-ttu-id="d5a1f-659">處理器佇列長度分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-659">Processor Queue Length Analysis</span></span>  
 <span data-ttu-id="d5a1f-660">「 處理器佇列長度 」 是處理器佇列中的執行緒數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-660">“Processor Queue Length” is the number of threads in the processor queue.</span></span> <span data-ttu-id="d5a1f-661">不同於磁碟計數器，此計數器會顯示準備就緒的執行緒，不會執行的執行緒。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-661">Unlike the disk counters, this counter shows ready threads only, not threads that are running.</span></span>  <span data-ttu-id="d5a1f-662">即使使用多個處理器的電腦上，有處理器時間僅有單一佇列。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-662">There is a single queue for processor time even on computers with multiple processors.</span></span> <span data-ttu-id="d5a1f-663">因此，如果電腦有多個處理器，您需要此值除以處理工作負載的處理器數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-663">Therefore, if a computer has multiple processors, you need to divide this value by the number of processors servicing the workload.</span></span> <span data-ttu-id="d5a1f-664">佇列持續少於 10 個執行緒，每個處理器是可以接受相依的工作負載。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-664">A sustained processor queue of less than 10 threads per processor is normally acceptable, dependent of the workload.</span></span>  

 <span data-ttu-id="d5a1f-665">這項分析會判斷平均處理器佇列長度是否超過處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-665">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="d5a1f-666">如果是的話，這可能表示發生處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-666">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="d5a1f-667">您可以使用這項分析中具有特殊權限的模式 CPU 分析和處理序過多的處理器使用的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-667">Use this analysis in correlation with Privileged Mode CPU Analysis and Excessive Processor Use by Process.</span></span> <span data-ttu-id="d5a1f-668">處理器佇列已準備好，但不能以處理器執行，因為目前正在執行另一個使用中執行緒的執行緒的集合。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-668">The processor queue is the collection of threads that are ready but not able to be executed by the processor because another active thread is currently executing.</span></span> <span data-ttu-id="d5a1f-669">持續性或週期性的多個執行緒的處理器數目超過佇列是處理器瓶頸的徵兆。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-669">A sustained or recurring queue of more threads than number of processors is a good indication of a processor bottleneck.</span></span>  

 <span data-ttu-id="d5a1f-670">您可以使用此計數器搭配 「 處理器\\%Processor Time"計數器，判定是否您的應用程式可受益於更多的 Cpu。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-670">You can use this counter in conjunction with the “Processor\\% Processor Time” counter to determine whether your application can benefit from more CPUs.</span></span> <span data-ttu-id="d5a1f-671">沒有單一佇列的處理器時間，即使在多處理器電腦上。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-671">There is a single queue for processor time, even on multiprocessor computers.</span></span> <span data-ttu-id="d5a1f-672">因此，在多處理器的電腦中，「 處理器佇列長度 」 (PQL) 值除以處理工作負載的處理器數目</span><span class="sxs-lookup"><span data-stu-id="d5a1f-672">Therefore, in a multiprocessor computer, divide the “Processor Queue Length” (PQL) value by the number of processors servicing the workload</span></span>  

 <span data-ttu-id="d5a1f-673">如果 CPU 是非常忙碌 （90%和更高的使用率） 和 PQL 平均一直高於處理器數目，則您可能無法受益於額外的 Cpu 處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-673">If the CPU is very busy (90 percent and higher utilization) and the PQL average is consistently higher than the number of processors, then you may have a processor bottleneck that could benefit from additional CPUs.</span></span> <span data-ttu-id="d5a1f-674">或者，您可以減少執行緒和應用程式層級的佇列數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-674">Or, you could reduce the number of threads and queue at the application level.</span></span> <span data-ttu-id="d5a1f-675">這會導致較少的內容切換，這是適合用來減少 CPU 負載。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-675">This will cause less context switching, which is good for reducing CPU load.</span></span> <span data-ttu-id="d5a1f-676">處理器時間的要求到達隨機，，和執行緒需求異常大量的處理器時間高 PQL 低 CPU 使用率的常見原因。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-676">The common reason for a high PQL with low CPU utilization is that requests for processor time arrive randomly, and threads demand irregular amounts of time from the processor.</span></span> <span data-ttu-id="d5a1f-677">這表示處理器不是瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-677">This means that the processor is not a bottleneck.</span></span> <span data-ttu-id="d5a1f-678">相反地，執行緒的邏輯，需要改善。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-678">Instead, your threading logic that needs to be improved.</span></span>  

 <span data-ttu-id="d5a1f-679">如果懷疑的使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用量的函式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-679">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="d5a1f-680">請參閱 「 如何來： 識別造成高的使用者模式 CPU 瓶頸的伺服器應用程式在生產環境中的函式 「 如需詳細資訊的 [參考] 區段中的發行項。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-680">See the “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  

## <a name="privileged-mode-cpu-analysis"></a><span data-ttu-id="d5a1f-681">特殊權限的模式 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-681">Privileged Mode CPU Analysis</span></span>  
 <span data-ttu-id="d5a1f-682">此計數器表示執行緒在特權模式下所執行時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-682">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="d5a1f-683">當您的應用程式呼叫作業系統 （例如來執行檔案或網路 I/O，或配置記憶體） 的函式時，這些作業系統函式會執行特殊權限模式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-683">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span>  

 <span data-ttu-id="d5a1f-684">高特殊權限的模式 CPU 指出電腦花太多時間在真實 （使用者模式） 與系統 I/O 的工作。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-684">High privileged mode CPU indicates that the computer is spending too much time in system I/O versus real (user mode) work.</span></span> <span data-ttu-id="d5a1f-685">"%授權的時間 」 是處理序執行緒花在特權模式下執行的程式碼的經過時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-685">“% Privileged Time” is the percentage of elapsed time that the process threads spent executing code in privileged mode.</span></span>  <span data-ttu-id="d5a1f-686">呼叫 Windows 系統服務時，服務通常會在取得存取權系統私用資料的特殊權限模式執行。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-686">When a Windows system service is called, the service will often run in privileged mode to gain access to system-private data.</span></span> <span data-ttu-id="d5a1f-687">這類資料會受到在使用者模式中執行的執行緒存取。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-687">Such data is protected from access by threads executing in user mode.</span></span> <span data-ttu-id="d5a1f-688">對系統的呼叫可以是明確或隱含方式，例如分頁錯誤或中斷。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-688">Calls to the system can be explicit or implicit, such as page faults or interrupts.</span></span> <span data-ttu-id="d5a1f-689">與某些早期作業系統不同 Windows 會使用處理序界限來保護子系統的傳統保護除了使用者和特殊權限的模式。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-689">Unlike some early operating systems, Windows uses process boundaries for subsystem protection in addition to the traditional protection of user and privileged modes.</span></span> <span data-ttu-id="d5a1f-690">由 Windows 代表應用程式某些工作可能會出現在其他子系統處理序，除了處理序中的特殊權限時間之外。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-690">Some work done by Windows on behalf of the application might appear in other subsystem processes in addition to the privileged time in the process.</span></span>  

 <span data-ttu-id="d5a1f-691">這項分析會檢查以了解多達 30%的總 CPU 時，是否要使用特殊權限的模式 CPU。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-691">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="d5a1f-692">如果如此，則 CPU 耗用量是可能的處理器，例如網路、 記憶體或磁碟 I/O 以外的另一個瓶頸所造成。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-692">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="d5a1f-693">用於相互關聯與 %Interrupt Time 過高內容切換的分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-693">Use in correlation with % Interrupt Time and High Context Switching analyses.</span></span>  

## <a name="high-context-switching-analysis"></a><span data-ttu-id="d5a1f-694">高內容切換分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-694">High Context Switching Analysis</span></span>  
 <span data-ttu-id="d5a1f-695">當高優先順序的執行緒優先執行的較低優先順序的執行緒目前正在執行，或當高優先順序執行緒會封鎖，就會發生內容切換。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-695">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="d5a1f-696">當許多執行緒共用相同的優先權層級時，可能會發生高層級內容切換。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-696">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="d5a1f-697">這通常表示太多的執行緒會競爭處理器系統上。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-697">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="d5a1f-698">如果您看不太多的處理器使用率，而且您查看非常低的層級內容切換，則可能表示執行緒會被封鎖。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-698">If you do not see much processor utilization and you see very low levels of context switching, it could indicate that threads are blocked.</span></span>  

 <span data-ttu-id="d5a1f-699">高內容切換只應該加以調查，高 CPU 和整體 CPU 的特殊權限的模式時。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-699">High context switching should only be investigated when privileged mode CPU and overall CPU is high.</span></span> <span data-ttu-id="d5a1f-700">一般而言，內容 5,000 個以下，每個處理器每秒切換速率不值得擔心。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-700">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="d5a1f-701">如果內容切換率超過 15,000 每秒，每個處理器，則沒有條件約束。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-701">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span>  

 <span data-ttu-id="d5a1f-702">這項分析會檢查高 CPU、 高特殊權限的模式 CPU 和高 （超過 5,000 每個處理器） 系統內容會切換每秒所有發生在相同的時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-702">This analysis checks for high CPU, high privileged mode CPU, and high (greater than 5,000 per processor) system context switches per second all occurring at the same time.</span></span> <span data-ttu-id="d5a1f-703">如果發生高內容切換，然後以減少執行緒和處理序在系統上執行的數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-703">If high context switching is occurring, then reduce the number of threads and processes running on the system.</span></span>  

## <a name="biztalk-high-database-sessions-analysis"></a><span data-ttu-id="d5a1f-704">BizTalk 高資料庫工作階段分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-704">BizTalk High Database Sessions Analysis</span></span>  
 <span data-ttu-id="d5a1f-705">此計數器會有兩個可能的值也就是正常 (0)，或超過 (1)。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-705">This counter has two possible values namely normal (0) or exceeded (1).</span></span> <span data-ttu-id="d5a1f-706">這項分析會檢查值為 1。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-706">This analysis checks for a value of 1.</span></span> <span data-ttu-id="d5a1f-707">如果是的話，BizTalk 就已超過允許的資料庫工作階段數目的臨界值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-707">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="d5a1f-708">這個值是 「 每一 CPU 的資料庫連線 」 值中的 BizTalk 主控件節流設定所控制。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-708">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span>  

 <span data-ttu-id="d5a1f-709">「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-709">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="d5a1f-710">一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-710">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="d5a1f-711">此選項會停用的預設值;一般而言，這項設定應該只啟用如果資料庫伺服器是瓶頸或低階的資料庫伺服器的 BizTalk Server 系統中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-711">This option is disabled by default; typically, this setting should only be enabled if the database server is a bottleneck or for low-end database servers in the BizTalk Server system.</span></span> <span data-ttu-id="d5a1f-712">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中的資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-712">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-713">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-713">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="d5a1f-714">輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-714">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="d5a1f-715">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-715">The default value is 0.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="d5a1f-716">「 MaxWorkerThreads"登錄機碼會影響 biztalk 可用的執行緒數目，並有助於如果大部分的 BizTalk 執行緒忙碌中，資料庫連接。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-716">The “MaxWorkerThreads” registry key influences the number threads available to BizTalk and may help if most of the BizTalk threads are busy with database connections.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-717">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-717">References</span></span>  

-   <span data-ttu-id="d5a1f-718">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-718">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-719">執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-719">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

-   <span data-ttu-id="d5a1f-720">會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-720">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

-   <span data-ttu-id="d5a1f-721">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-721">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalk-high-database-size-analysis"></a><span data-ttu-id="d5a1f-722">BizTalk 高資料庫大小分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-722">BizTalk High Database Size Analysis</span></span>  
 <span data-ttu-id="d5a1f-723">此計數器是指在此程序已發佈的資料庫佇列中的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-723">This counter refers to the number of messages in the database queues that this process has published.</span></span> <span data-ttu-id="d5a1f-724">這個值是由所有主控件的佇列表格中之項目數目以及多工緩衝處理與追蹤表格中的項目數目來測量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-724">This value is measured by the number of items in the queue tables for all hosts and the number of items in the spool and tracking tables.</span></span> <span data-ttu-id="d5a1f-725">佇列包含在工作佇列、 狀態佇列和擱置的佇列。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-725">Queue includes the work queue, the state queue and the suspended queue.</span></span> <span data-ttu-id="d5a1f-726">若程序正發佈到多個佇列，則此計數器會反映所有佇列的加權平均值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-726">If a process is publishing to multiple queues, this counter reflects the weighted average of all the queues.</span></span>  

 <span data-ttu-id="d5a1f-727">若重新啟動主控件，則會遺失保留在記憶體中的統計值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-727">If the host is restarted, statistics held in memory are lost.</span></span> <span data-ttu-id="d5a1f-728">因為涉及一些額外負荷時，BizTalk Server 將會繼續收集統計資料，只有當有至少 100 發佈，其中 5%的總會發佈在重新啟動主控件程序中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-728">Since some overhead is involved, BizTalk Server will resume gathering statistics only when there are at least 100 publishes, with 5 percent of the total publishes within the restarted host process.</span></span>  

 <span data-ttu-id="d5a1f-729">此計數器將集合設為 1 的值，如果任一個條件，列出資料庫閾值中的訊息計數，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-729">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="d5a1f-730">此閾值記錄主題中的 < 如何修改預設主控件節流設定下列參考。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-730">This threshold is documented in the topic How to Modify the Default Host Throttling Settings referenced below.</span></span> <span data-ttu-id="d5a1f-731">根據預設主機訊息資料庫節流閾值中的計數是設定為 50000，會觸發節流情況，在下列情況下的值：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-731">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span>  

- <span data-ttu-id="d5a1f-732">主控件執行個體發佈到訂閱之主控件的工作、狀態和擱置佇列的訊息總數超過 50,000。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-732">The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span>  

- <span data-ttu-id="d5a1f-733">多工緩衝處理表格或追蹤表格中的訊息數目超過 50,000 個訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-733">The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span>  

  <span data-ttu-id="d5a1f-734">即使 BizTalk server 發生低或完全無負載中 database 計算中的訊息計數包含擱置的訊息，因為是的訊息發佈節流設定會發生的。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-734">Since suspended messages are included in the message count in database calculation, throttling of message publishing can occur even if the BizTalk server is experiencing low or no load.</span></span>  

  <span data-ttu-id="d5a1f-735">這項分析會檢查值為 1。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-735">This analysis checks for a value of 1.</span></span> <span data-ttu-id="d5a1f-736">如果發生這種情況，請考慮採取的動作，將會減少在資料庫中的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-736">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="d5a1f-737">比方說，確定 BizTalk SQL Server 工作正在執行不會發生錯誤，並在 BizTalk 管理主控台中使用 群組中樞，以判斷是否要將訊息增多造成的大量擱置的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-737">For example, ensure the BizTalk SQL Server jobs are running without error and use the Group Hub in the BizTalk Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-738">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-738">References</span></span>  

-   <span data-ttu-id="d5a1f-739">在 資料庫節流閾值中訊息計數包含擱置的訊息 [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-739">Suspended Messages are Included in the Message Count in Database Throttling Threshold at [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span></span>  

-   <span data-ttu-id="d5a1f-740">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-740">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="d5a1f-741">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-741">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

## <a name="biztalk-high-in-process-message-count-analysis"></a><span data-ttu-id="d5a1f-742">BizTalk 高內含式訊息計數分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-742">BizTalk High In-Process Message Count Analysis</span></span>  
 <span data-ttu-id="d5a1f-743">「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-743">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="d5a1f-744">此數目不包含擷取自資料庫，但仍然等候中的記憶體中佇列傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-744">This number does not include the messages retrieved from database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="d5a1f-745">您可以使用 biztalk： 訊息代理程式的效能物件類別下的內含式訊息計數效能計數器來監視內含式訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-745">You can monitor the number of in-Process Messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-746">當您考慮節流狀況時，這個參數會提供提示給節流機制。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-746">This parameter provides a hint to the throttling mechanism when considering throttling conditions.</span></span> <span data-ttu-id="d5a1f-747">實際閾值會受自我調整影響而不同。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-747">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="d5a1f-748">您可以監視的內含式訊息計數效能計數器，以確認實際閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-748">You can verify the actual threshold by monitoring the in-process message count performance counter.</span></span>  

 <span data-ttu-id="d5a1f-749">這個參數可以將大型訊息實例，其中的平均訊息大小很高，或訊息的處理可能需要大量的訊息較小的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-749">This parameter can be set to a smaller value for large message scenarios, where either the average message size is high, or the processing of messages may require a large number of messages.</span></span> <span data-ttu-id="d5a1f-750">如果案例發生記憶體為根據的節流太頻繁，而且記憶體臨界值可讓您取得自動調整為相當低的值，這很明顯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-750">This would be evident if a scenario experiences memory-based throttling too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="d5a1f-751">此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-751">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="d5a1f-752">此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-752">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span>  

 <span data-ttu-id="d5a1f-753">這項分析會檢查高內含式訊息計數 」 計數器來判定是否發生這種節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-753">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="d5a1f-754">如果是的話，請考慮調整的 「 訊息每一 CPU 的內含式 」 的設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-754">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="d5a1f-755">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-755">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="d5a1f-756">若要停用節流設定的每一 CPU 的內含式訊息數目為基礎的 「 訊息每一 CPU 的內含式 」 設定中輸入值為 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-756">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="d5a1f-757">「 訊息每一 CPU 的內含式 」 設定的預設值為 1,000。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-757">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="d5a1f-758">請注意，修改這個值可以也會影響低延遲的訊息及/或 BizTalk 資源的效率。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-758">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-759">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-759">References</span></span>  

-   <span data-ttu-id="d5a1f-760">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-760">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="d5a1f-761">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-761">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

## <a name="biztalk-high-message-delivery-rate-analysis"></a><span data-ttu-id="d5a1f-762">BizTalk 高訊息傳遞速率分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-762">BizTalk High Message Delivery Rate Analysis</span></span>  
 <span data-ttu-id="d5a1f-763">對於輸出 （已傳遞） 訊息，BizTalk Server 會調整訊息的傳遞如果主控件執行個體的訊息傳遞內送速率超過訊息傳遞外寄速率 \* 指定的速率增加因數 （百分比） 值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-763">For outbound (delivered) messages, BizTalk Server throttles delivery of messages if the message delivery incoming rate for the host instance exceeds the message delivery outgoing rate \* the specified rate overdrive factor (percent) value.</span></span> <span data-ttu-id="d5a1f-764">在訊息處理節流設定 對話方塊中，速率增加因數 （百分比） 參數是可設定的。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-764">The rate overdrive factor (percent) parameter is configurable on the Message Processing Throttling Settings dialog box.</span></span> <span data-ttu-id="d5a1f-765">輸出訊息的速率型節流是主要是由從記憶體中佇列中移除訊息，並將訊息傳遞到結束點管理員 」 (EPM) 或協調流程引擎以進行處理之前，引發延遲來完成。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-765">Rate-based throttling for outbound messages is accomplished primarily by inducing a delay before removing the messages from the in-memory queue and delivering the messages to the End Point Manager (EPM) or orchestration engine for processing.</span></span> <span data-ttu-id="d5a1f-766">若要完成輸出訊息的速率型節流會不採取任何其他動作。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-766">No other action is taken to accomplish rate-based throttling for outbound messages.</span></span>  

 <span data-ttu-id="d5a1f-767">輸出節流會造成訊息延遲傳遞，而且訊息可能建立在記憶體中佇列內，並造成清除佇列執行緒遭到封鎖，直到移轉了節流狀況為止。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-767">Outbound throttling can cause delayed message delivery and messages may build up in the in-memory queue and cause de-queue threads to be blocked until the throttling condition is mitigated.</span></span> <span data-ttu-id="d5a1f-768">當清除佇列執行緒遭到封鎖，，沒有其他訊息從 MessageBox 提取至記憶體中的佇列進行輸出傳遞。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-768">When de-queue threads are blocked, no additional messages are pulled from the MessageBox into the in-memory queue for outbound delivery.</span></span>  

 <span data-ttu-id="d5a1f-769">這項分析會檢查高訊息傳遞速率計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-769">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="d5a1f-770">高訊息傳遞速率可能因高處理複雜性、 慢速輸出配接器或暫時的系統資源不足。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-770">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-771">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-771">References</span></span>  

-   <span data-ttu-id="d5a1f-772">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-772">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-773">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-773">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="d5a1f-774">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-774">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalk-high-process-memory-analysis"></a><span data-ttu-id="d5a1f-775">BizTalk 高程序記憶體分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-775">BizTalk High Process Memory Analysis</span></span>  
 <span data-ttu-id="d5a1f-776">節流臨界值 設定的 BizTalk 程序記憶體使用量是記憶體的比較可用虛擬記憶體的處理序與工作集大小的總和，如果輸入從 1 到 100 的值使用百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-776">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="d5a1f-777">根據預設，BizTalk 處理序記憶體使用量節流設定為 25。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-777">By default, the BizTalk Process Memory Usage throttling setting is 25.</span></span> <span data-ttu-id="d5a1f-778">當指定某個百分比值時，則會以定期間隔重新計算程序記憶體閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-778">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="d5a1f-779">如果使用者指定的百分比值，它將會以根據可用的記憶體為認可和目前的處理序記憶體使用量計算。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-779">If the user specifies a percentage value, it is computed based on the available memory to commit and the current Process Memory usage.</span></span>  

 <span data-ttu-id="d5a1f-780">這項分析會檢查高的處理序記憶體計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-780">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="d5a1f-781">如果發生這種情況，然後再次嘗試使用 Debug diag 塊來判斷記憶體增加的原因 （請參閱中的記憶體流失偵測分析的參考）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-781">If this occurs, then try to determine the cause of the memory increase by using Debug Diag (see references in Memory Leak Detection analysis).</span></span> <span data-ttu-id="d5a1f-782">請注意，是它正常的處理程序期間啟動，而這會耗用相當可觀的記憶體可能一開始會顯示為記憶體流失，但在處理序無法釋放不再需要藉此減少可用的我的記憶體時，就會發生真正的記憶體遺漏mory 經過一段時間。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-782">Note that is it normal for processes to consume a large portion of memory during startup and this may initially appear as a memory leak, but a true memory leak occurs when a process fails to release memory that it no longer needs, thereby reducing the amount of available memory over time.</span></span> <span data-ttu-id="d5a1f-783">如何以一般方式分析在 BizTalk 中的程序記憶體流失，請參閱下面的 「 如何以擷取記憶體傾印的處理程序，是流失記憶體 」 參考及/或 PAL 中的 「 記憶體流失偵測 」 分析，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-783">See the “How to Capture a Memory Dump of a Process that is Leaking Memory” reference below and/or the “Memory Leak Detection” analysis in PAL for more information on how to generically analyze process memory leaks in BizTalk.</span></span>  

 <span data-ttu-id="d5a1f-784">高程序記憶體節流發生的原因要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-784">High process memory throttling can occur if the batch to be published has steep memory requirements, or too many threads are processing messages.</span></span>  <span data-ttu-id="d5a1f-785">若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-785">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="d5a1f-786">如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，則請考慮減少內部訊息佇列大小的值，內含式訊息，每一 CPU 閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-786">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and In-process messages per CPU thresholds.</span></span> <span data-ttu-id="d5a1f-787">此策略特別會與大型訊息處理實例有關。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-787">This strategy is particularly relevant in large message processing scenarios.</span></span> <span data-ttu-id="d5a1f-788">此外，這個值應設為需要大量記憶體需求，每個訊息的案例較低的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-788">In addition, this value should be set to a low value for scenarios having large memory requirement per message.</span></span> <span data-ttu-id="d5a1f-789">設定較低的值，會及早節流開始作用，並防止在程序中的記憶體量暴增。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-789">Setting a low value will kick in throttling early on and prevent a memory explosion within the process.</span></span>  

 <span data-ttu-id="d5a1f-790">如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-790">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="d5a1f-791">在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2GB 的 32 位元。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-791">Each process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="d5a1f-792">一般情況下，強烈建議 64 位元 BizTalk 和 64 位元 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-792">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="d5a1f-793">請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-793">See the “BizTalk Server 64-bit Support” reference for more information.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-794">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-794">References</span></span>  

-   <span data-ttu-id="d5a1f-795">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-795">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="d5a1f-796">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-796">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="d5a1f-797">如何擷取發生記憶體溢位在的處理序的記憶體傾印 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-797">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  

-   <span data-ttu-id="d5a1f-798">在 BizTalk Server 64 位元支援 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-798">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  

## <a name="biztalk-high-system-memory-analysis"></a><span data-ttu-id="d5a1f-799">BizTalk 高系統記憶體分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-799">BizTalk High System Memory Analysis</span></span>  
 <span data-ttu-id="d5a1f-800">BizTalk 的實體記憶體使用量節流臨界值設定為輸入則是相較於若其值的可用實體記憶體的總量，從 1 到 100 的記憶體耗用量的百分比。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-800">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="d5a1f-801">如果您輸入大於 100 的值，這項設定也可以是以 mb 為單位的可用實體記憶體的總量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-801">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="d5a1f-802">輸入值為 0 時可停用以實體記憶體使用量為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-802">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="d5a1f-803">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-803">The default value is 0.</span></span>  

 <span data-ttu-id="d5a1f-804">這項分析會檢查系統的高記憶體計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-804">This analysis checks for a value of 1 in the High System Memory counter.</span></span> <span data-ttu-id="d5a1f-805">因為這會測量系統記憶體總量，若非 BizTalk Server 程序正耗用過量的系統記憶體，則可能觸發節流狀況。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-805">Since this measures total system memory, a throttling condition may be triggered if non-BizTalk Server processes are consuming an extensive amount of system memory.</span></span> <span data-ttu-id="d5a1f-806">因此如果發生這種情況，最好的方法是找出哪些處理程序正在耗用最多實體記憶體和/或將額外的實體記憶體新增至伺服器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-806">Therefore if this occurs, the best approach is to identify which processes are consuming the most physical memory and/or add additional physical memory to the server.</span></span> <span data-ttu-id="d5a1f-807">此外，請考慮減少負載，藉由減少 EPM 執行緒集區的預設大小和 （或） 配接器批次大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-807">Also, consider reducing load by reducing the default size of the EPM thread pool, and/or the size of adapter batches.</span></span> <span data-ttu-id="d5a1f-808">如需詳細資訊，請參閱 PAL 中的記憶體流失偵測分析。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-808">For more information, see the Memory Leak Detection analysis in PAL.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-809">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-809">References</span></span>  

-   <span data-ttu-id="d5a1f-810">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-810">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-811">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-811">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="d5a1f-812">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-812">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

## <a name="biztalk-high-thread-count-analysis"></a><span data-ttu-id="d5a1f-813">BizTalk 高執行緒計數分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-813">BizTalk High Thread Count Analysis</span></span>  
 <span data-ttu-id="d5a1f-814">「 每一 CPU 的執行緒 」 是包括配接器使用的執行緒主機處理序中的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-814">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="d5a1f-815">如果超過此臨界值時，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式 」 執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-815">If this threshold is exceeded, BizTalk Server will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="d5a1f-816">在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-816">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="d5a1f-817">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-817">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="d5a1f-818">依預設會停用執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-818">Thread based throttling is disabled by default.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="d5a1f-819">使用者指定的值做為指導方針，以及主應用程式可能會以動態方式自我調整此記憶體使用量模式和處理序執行緒需求為基礎的臨界值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-819">The user-specified value is used as a guideline, and the host may dynamically self-tune this threshold value based on the memory usage patterns and thread requirements of the process.</span></span>  

 <span data-ttu-id="d5a1f-820">這項分析會檢查高執行緒計數計數器中的 1 的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-820">This analysis checks for a value of 1 in the High Thread Count counter.</span></span> <span data-ttu-id="d5a1f-821">考慮調整不同的執行緒集區大小，以確定系統不會建立大量的執行緒。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-821">Consider adjusting the different thread pool sizes to ensure that the system does not create a large number of threads.</span></span> <span data-ttu-id="d5a1f-822">這項分析可以相互關聯與內容切換每個第二個的分析，以判斷是否作業系統已飽和，太多的執行緒，但在大部分情況下，高執行緒計數原因後端資料庫與 BizTalk server 上的多個競爭。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-822">This analysis can be correlated with Context Switches per Second analysis to determine whether the operating system is saturated with too many threads, but in most cases high thread counts cause more contention on the backend database than on the BizTalk server.</span></span> <span data-ttu-id="d5a1f-823">如需修改執行緒集區大小的詳細資訊請參閱 < 如何修改預設主控件節流設定在參考中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-823">For more information about modifying the thread pool sizes see How to Modify the Default Host Throttling Settings in references.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-824">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-824">References</span></span>  

- <span data-ttu-id="d5a1f-825">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-825">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

- <span data-ttu-id="d5a1f-826">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-826">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

- <span data-ttu-id="d5a1f-827">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-827">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

- <span data-ttu-id="d5a1f-828">會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-828">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

- <span data-ttu-id="d5a1f-829">執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-829">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

  <span data-ttu-id="d5a1f-830">BizTalk 輸入延遲 AnalysisAverage 延遲 （毫秒），傳訊引擎收到文件從配接器之前發佈至 messagebox。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-830">BizTalk Inbound Latency AnalysisAverage latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the message box.</span></span> <span data-ttu-id="d5a1f-831">減少延遲，請務必使用的 BizTalk 中，某些使用者因此追蹤時間的文件花費在輸入配接器是很重要。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-831">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span>  

  <span data-ttu-id="d5a1f-832">以下是顯示方式測量延遲的圖表。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-832">Here is a chart showing how latency is measured.</span></span>  

|<span data-ttu-id="d5a1f-833">1</span><span class="sxs-lookup"><span data-stu-id="d5a1f-833">1</span></span>|<span data-ttu-id="d5a1f-834">2</span><span class="sxs-lookup"><span data-stu-id="d5a1f-834">2</span></span>|<span data-ttu-id="d5a1f-835">3</span><span class="sxs-lookup"><span data-stu-id="d5a1f-835">3</span></span>|<span data-ttu-id="d5a1f-836">4</span><span class="sxs-lookup"><span data-stu-id="d5a1f-836">4</span></span>|<span data-ttu-id="d5a1f-837">5</span><span class="sxs-lookup"><span data-stu-id="d5a1f-837">5</span></span>|<span data-ttu-id="d5a1f-838">6</span><span class="sxs-lookup"><span data-stu-id="d5a1f-838">6</span></span>|  
|-------|-------|-------|-------|-------|-------|  
|<span data-ttu-id="d5a1f-839">配接器接收訊息並提交到引擎，訊息傳送給不引擎之前，配接器中完成的工作擷取這些效能計數器</span><span class="sxs-lookup"><span data-stu-id="d5a1f-839">Adapter receives message and submits it to the engine, work done in adapter before message is given to engine not captured in these perf counters</span></span>|<span data-ttu-id="d5a1f-840">引擎從配接器接收訊息、 執行接收管線、 對應、 訂用帳戶評估，持續在 DB 中的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-840">Engine receives message from adapter, executes receive pipeline, map, subscription evaluation, persist message in DB.</span></span>|<span data-ttu-id="d5a1f-841">協調流程或請求-回應連接埠執行，並產生回應訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-841">Orchestration or Solicit-Response port runs and generates a response message.</span></span>|<span data-ttu-id="d5a1f-842">傳訊引擎中的回應訊息已從佇列清除、 執行傳送管線、 對應。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-842">Response message is dequeued in messaging engine, execute the send pipeline, map.</span></span>|<span data-ttu-id="d5a1f-843">傳訊引擎可讓配接器的回應訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-843">Messaging engine gives response message to adapter.</span></span>|<span data-ttu-id="d5a1f-844">配接器會通知引擎郵件告一段落。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-844">Adapter informs engine message is all done.</span></span>|  
||<span data-ttu-id="d5a1f-845">I</span><span class="sxs-lookup"><span data-stu-id="d5a1f-845">I</span></span>|||||  
||<span data-ttu-id="d5a1f-846">RR</span><span class="sxs-lookup"><span data-stu-id="d5a1f-846">RR</span></span>|<span data-ttu-id="d5a1f-847">RR</span><span class="sxs-lookup"><span data-stu-id="d5a1f-847">RR</span></span>|<span data-ttu-id="d5a1f-848">RR</span><span class="sxs-lookup"><span data-stu-id="d5a1f-848">RR</span></span>|||  
||||<span data-ttu-id="d5a1f-849">O</span><span class="sxs-lookup"><span data-stu-id="d5a1f-849">O</span></span>|<span data-ttu-id="d5a1f-850">O</span><span class="sxs-lookup"><span data-stu-id="d5a1f-850">O</span></span>|<span data-ttu-id="d5a1f-851">O</span><span class="sxs-lookup"><span data-stu-id="d5a1f-851">O</span></span>|  
|||||<span data-ttu-id="d5a1f-852">OA</span><span class="sxs-lookup"><span data-stu-id="d5a1f-852">OA</span></span>|<span data-ttu-id="d5a1f-853">OA</span><span class="sxs-lookup"><span data-stu-id="d5a1f-853">OA</span></span>|  

 <span data-ttu-id="d5a1f-854">我 = 輸入的延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-854">I = Inbound Latency</span></span>  

 <span data-ttu-id="d5a1f-855">RR = 要求回應延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-855">RR = Request Response Latency</span></span>  

 <span data-ttu-id="d5a1f-856">O = 輸出延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-856">O = Outbound Latency</span></span>  

 <span data-ttu-id="d5a1f-857">OA = 配接器輸出延遲</span><span class="sxs-lookup"><span data-stu-id="d5a1f-857">OA = Outbound Adapter Latency</span></span>  

 <span data-ttu-id="d5a1f-858">假設低延遲的環境，這項分析會檢查是否在文件所花費的時間超過 5 秒的輸入配接器中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-858">Assuming a low latency environment, this analysis checks whether the document spent more than 5 seconds in the inbound adapter.</span></span> <span data-ttu-id="d5a1f-859">這可能表示在此主控件執行個體中的輸入配接器的訊息傳輸的處理延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-859">This may indicate a processing delay in the transport of messages through inbound adapters in this host instance.</span></span> <span data-ttu-id="d5a1f-860">如果多個的輸入配接器存在於此主控件執行個體，請考慮將它們分割到他們自己的主機，以判斷哪一個輸入配接器具有高延遲。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-860">If multiple inbound adapters exist in this host instance, then consider separating them into their own hosts to determine which inbound adapter has high latency.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-861">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-861">References</span></span>  

-   <span data-ttu-id="d5a1f-862">BizTalk Server 資料庫最佳化</span><span class="sxs-lookup"><span data-stu-id="d5a1f-862">BizTalk Server Database Optimization</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=104427](http://go.microsoft.com/fwlink/?linkid=104427)  

-   <span data-ttu-id="d5a1f-863">要求/回應傳訊</span><span class="sxs-lookup"><span data-stu-id="d5a1f-863">Request/Response Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155288](http://go.microsoft.com/fwlink/?LinkID=155288)  

-   <span data-ttu-id="d5a1f-864">識別 BizTalk 層中的瓶頸</span><span class="sxs-lookup"><span data-stu-id="d5a1f-864">Identifying Bottlenecks in the BizTalk Tier</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155289](http://go.microsoft.com/fwlink/?LinkID=155289)  

## <a name="biztalk-message-delivery-throttling-state-analysis"></a><span data-ttu-id="d5a1f-865">BizTalk 訊息傳遞節流狀態分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-865">BizTalk Message Delivery Throttling State Analysis</span></span>  
 <span data-ttu-id="d5a1f-866">BizTalk 訊息傳遞節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-866">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="d5a1f-867">它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸出傳輸） 的訊息傳遞。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-867">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="d5a1f-868">節流情況是計數器的數值表示。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-868">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="d5a1f-869">以下是一份值和其各自的意義：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-869">Here is a list of the values and their respective meaning:</span></span>  

|||  
|-|-|  
|<span data-ttu-id="d5a1f-870">0</span><span class="sxs-lookup"><span data-stu-id="d5a1f-870">0</span></span>|<span data-ttu-id="d5a1f-871">未進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-871">Not throttling</span></span>|  
|<span data-ttu-id="d5a1f-872">1</span><span class="sxs-lookup"><span data-stu-id="d5a1f-872">1</span></span>|<span data-ttu-id="d5a1f-873">由於不平衡的訊息傳遞速率 (輸入速率超過輸出速率) 而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-873">Throttling due to imbalanced message delivery rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="d5a1f-874">3</span><span class="sxs-lookup"><span data-stu-id="d5a1f-874">3</span></span>|<span data-ttu-id="d5a1f-875">由於高內含式訊息計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-875">Throttling due to high in-process message count</span></span>|  
|<span data-ttu-id="d5a1f-876">4</span><span class="sxs-lookup"><span data-stu-id="d5a1f-876">4</span></span>|<span data-ttu-id="d5a1f-877">由於處理程序記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-877">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="d5a1f-878">5</span><span class="sxs-lookup"><span data-stu-id="d5a1f-878">5</span></span>|<span data-ttu-id="d5a1f-879">由於系統記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-879">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="d5a1f-880">9</span><span class="sxs-lookup"><span data-stu-id="d5a1f-880">9</span></span>|<span data-ttu-id="d5a1f-881">由於高執行緒計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-881">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="d5a1f-882">10</span><span class="sxs-lookup"><span data-stu-id="d5a1f-882">10</span></span>|<span data-ttu-id="d5a1f-883">由於傳遞時使用者覆寫而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-883">Throttling due to user override on delivery</span></span>|  

 <span data-ttu-id="d5a1f-884">這項分析會檢查每個這些值，並為每個具有特定的警示。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-884">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-885">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-885">References</span></span>  

-   <span data-ttu-id="d5a1f-886">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-886">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-887">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-887">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

## <a name="biztalk-messagebox-database-connection-failures-analysis"></a><span data-ttu-id="d5a1f-888">BizTalk MessageBox 資料庫連線失敗分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-888">BizTalk MessageBox Database Connection Failures Analysis</span></span>  
 <span data-ttu-id="d5a1f-889">此效能計數器是資料庫連線嘗試失敗，因為啟動主控件執行個體的數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-889">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="d5a1f-890">如果因為任何原因，裝載 BizTalk 資料庫的 SQL Server 服務變成無法使用，資料庫叢集會將資源從主動電腦傳送到被動電腦中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-890">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="d5a1f-891">在此容錯移轉程序期間，BizTalk Server 服務執行個體發生資料庫連接失敗並自動重新啟動以重新連接到資料庫。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-891">During this failover process, the BizTalk Server service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="d5a1f-892">正在運作的資料庫電腦 (先前為被動電腦) 會在容錯移轉期間獲得資源後，開始處理資料庫連接。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-892">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span>  

 <span data-ttu-id="d5a1f-893">當 BizTalk Server 執行階段無法與 MessageBox 」 或 「 管理 」 資料庫通訊時，會發生 DBNetLib （資料庫網路程式庫） 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-893">DBNetLib (Database Network Library) errors occur when the BizTalk Server runtime is unable to communicate with either the MessageBox or management databases.</span></span> <span data-ttu-id="d5a1f-894">當發生這種情況時，攔截到例外狀況的 BizTalk Server 執行階段執行個體關閉，並接著每分鐘循環查看資料庫是否可用。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-894">When this occurs, the BizTalk Server runtime instance that catches the exception shuts down and then cycles every minute to check to see whether the database is available.</span></span> <span data-ttu-id="d5a1f-895">在本主題，請參閱 [參考] 區段，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-895">See the references section for more information on this topic.</span></span>  

 <span data-ttu-id="d5a1f-896">當用戶端起始 TCP/IP 通訊端連線聯繫伺服器時，用戶端通常會連接到伺服器上特定的連接埠，並要求伺服器透過短期有效的臨時 TCP 或 UDP 連接埠回應用戶端。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-896">When a client initiates a TCP/IP socket connection to a server, the client typically connects to a specific port on the server and requests that the server respond to the client over an ephemeral, or short lived, TCP or UDP port.</span></span> <span data-ttu-id="d5a1f-897">在 Windows Server 2003 和 Windows XP 上，用戶端應用程式所使用的暫時連接埠預設範圍是從 1025 到 5000。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-897">On Windows Server 2003 and Windows XP, the default range of ephemeral ports used by client applications is from 1025 through 5000.</span></span> <span data-ttu-id="d5a1f-898">在某些情況下很可能就會耗盡可用的連接埠中的預設範圍。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-898">Under certain conditions it is possible that the available ports in the default range will be exhausted.</span></span> <span data-ttu-id="d5a1f-899">在本主題，請參閱 [參考] 區段，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-899">See the references section for more information on this topic.</span></span>  

 <span data-ttu-id="d5a1f-900">這項分析會檢查資料庫連線失敗的任何項目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-900">This analysis checks for any occurrence of database connection failures.</span></span> <span data-ttu-id="d5a1f-901">資料庫連線失敗非常重要，因為 BizTalk 無法運作而不需要資料庫。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-901">Database connection failures are critical because BizTalk cannot function without the database.</span></span> <span data-ttu-id="d5a1f-902">如果資料庫連線失敗的原因不明時，則請考慮下面所列的參考和/或連絡 Microsoft 支援服務以判斷連線失敗的本質。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-902">If the cause of the database connection failure is unknown, then consider the references listed below and/or contact Microsoft Support to determine the nature of the connectivity failure.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-903">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-903">References</span></span>  

-   <span data-ttu-id="d5a1f-904">向外擴充的資料庫</span><span class="sxs-lookup"><span data-stu-id="d5a1f-904">Scaled-Out Databases</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155307](http://go.microsoft.com/fwlink/?LinkId=155307)  

-   <span data-ttu-id="d5a1f-905">避免 DBNETLIB 例外狀況</span><span class="sxs-lookup"><span data-stu-id="d5a1f-905">Avoiding DBNETLIB Exceptions</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155308](http://go.microsoft.com/fwlink/?LinkId=155308)  

-   <span data-ttu-id="d5a1f-906">避免 TCP/IP 連接埠耗盡</span><span class="sxs-lookup"><span data-stu-id="d5a1f-906">Avoiding TCP/IP Port Exhaustion</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155309](http://go.microsoft.com/fwlink/?LinkId=155309)  

## <a name="biztalk-messaging-publishing-throttling-state-analysis"></a><span data-ttu-id="d5a1f-907">BizTalk 訊息發佈節流狀態分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-907">BizTalk Messaging Publishing Throttling State Analysis</span></span>  
 <span data-ttu-id="d5a1f-908">BizTalk 訊息發佈節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-908">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="d5a1f-909">它是旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸入的傳輸） 的訊息發佈。節流情況是計數器的數值表示。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-909">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="d5a1f-910">以下是一份值和其各自的意義：</span><span class="sxs-lookup"><span data-stu-id="d5a1f-910">Here is a list of the values and their respective meaning:</span></span>  

|||  
|-|-|  
|<span data-ttu-id="d5a1f-911">0</span><span class="sxs-lookup"><span data-stu-id="d5a1f-911">0</span></span>|<span data-ttu-id="d5a1f-912">未進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-912">Not throttling</span></span>|  
|<span data-ttu-id="d5a1f-913">2</span><span class="sxs-lookup"><span data-stu-id="d5a1f-913">2</span></span>|<span data-ttu-id="d5a1f-914">由於不平衡的訊息發佈速率 (輸入速率超過輸出速率) 而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-914">Throttling due to imbalanced message publishing rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="d5a1f-915">4</span><span class="sxs-lookup"><span data-stu-id="d5a1f-915">4</span></span>|<span data-ttu-id="d5a1f-916">由於處理程序記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-916">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="d5a1f-917">5</span><span class="sxs-lookup"><span data-stu-id="d5a1f-917">5</span></span>|<span data-ttu-id="d5a1f-918">由於系統記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-918">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="d5a1f-919">6</span><span class="sxs-lookup"><span data-stu-id="d5a1f-919">6</span></span>|<span data-ttu-id="d5a1f-920">由於資料庫成長而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-920">Throttling due to database growth</span></span>|  
|<span data-ttu-id="d5a1f-921">8</span><span class="sxs-lookup"><span data-stu-id="d5a1f-921">8</span></span>|<span data-ttu-id="d5a1f-922">由於高工作階段計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-922">Throttling due to high session count</span></span>|  
|<span data-ttu-id="d5a1f-923">9</span><span class="sxs-lookup"><span data-stu-id="d5a1f-923">9</span></span>|<span data-ttu-id="d5a1f-924">由於高執行緒計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-924">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="d5a1f-925">11</span><span class="sxs-lookup"><span data-stu-id="d5a1f-925">11</span></span>|<span data-ttu-id="d5a1f-926">由於發佈時使用者覆寫而進行節流</span><span class="sxs-lookup"><span data-stu-id="d5a1f-926">Throttling due to user override on publishing</span></span>|  

 <span data-ttu-id="d5a1f-927">這項分析會檢查每個這些值，並為每個具有特定的警示。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-927">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-928">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-928">References</span></span>  

-   <span data-ttu-id="d5a1f-929">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-929">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-930">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-930">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

## <a name="biztalk-orchestrations-resident-in-memory"></a><span data-ttu-id="d5a1f-931">BizTalk 協調流程常駐在記憶體中</span><span class="sxs-lookup"><span data-stu-id="d5a1f-931">BizTalk Orchestrations Resident in Memory</span></span>  
 <span data-ttu-id="d5a1f-932">目前由主控件執行個體裝載的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-932">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="d5a1f-933">雖然尖峰 」 或 「 高載的記憶體中駐留的協調流程可能會被視為一般，增加的趨勢可能表示 「 不斷累積 」 的協調流程在記憶體中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-933">While spikes or bursts of orchestrations resident in memory may be considered normal, an increasing trend could indicate a “pile up” of orchestrations in memory.</span></span> <span data-ttu-id="d5a1f-934">當 BizTalk 無法凍結訊息/協調流程執行個體時，可能會發生一段時間遞增的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-934">An increasing trend over time may occur when BizTalk is unable to dehydrate messages/orchestration instances.</span></span> <span data-ttu-id="d5a1f-935">嘗試將此計數器與 「 XLANG/s Orchestrations(?) 相互關聯\Dehydratable 協調流程 」 其中問號 （？） 會是相同計數器執行個體，以做為這個計數器。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-935">Try to correlate this counter with “XLANG/s Orchestrations(?)\Dehydratable orchestrations” where the question mark (?) is the same counter instance as this counter.</span></span>  

 <span data-ttu-id="d5a1f-936">如果有大量的協調流程是常駐在記憶體中的，如果協調流程數過低會凍結，則協調流程可能會在記憶體中的閒置，而且可能造成記憶體流失的狀況。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-936">If a high number of orchestrations are resident in memory and if a low number of orchestrations are dehydratable, then your orchestrations are likely idle in memory and may cause a memory leak condition.</span></span> <span data-ttu-id="d5a1f-937">如果有的話，請使用這項分析中使用 「 \XLANG/s 協調流程 （\*） \Idle 協調流程 」 的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-937">Use this analysis in correlation with “\XLANG/s Orchestrations(\*)\Idle orchestrations” if present.</span></span> <span data-ttu-id="d5a1f-938">BizTalk 閒置的協調流程中遞增趨勢是更好的指標，因為無法凍結協調流程執行個體的記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-938">An increasing trend in BizTalk Idle Orchestrations is a better indicator of memory leaks due to the inability to dehydrate orchestration instances.</span></span>  

 <span data-ttu-id="d5a1f-939">這項分析會檢查遞增趨勢常駐在記憶體及超過 50%的記憶體中駐留的協調流程是否可凍結的協調流程中。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-939">This analysis checks for an increasing trend in orchestrations resident in memory and if more than 50% of the orchestrations resident in memory are not dehydratable.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-940">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-940">References</span></span>  

-   <span data-ttu-id="d5a1f-941">協調流程引擎效能計數器</span><span class="sxs-lookup"><span data-stu-id="d5a1f-941">Orchestration Engine Performance Counters</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155290](http://go.microsoft.com/fwlink/?LinkID=155290)  

-   <span data-ttu-id="d5a1f-942">協調流程凍結和解除凍結</span><span class="sxs-lookup"><span data-stu-id="d5a1f-942">Orchestration Dehydration and Rehydration</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155284](http://go.microsoft.com/fwlink/?LinkID=155284)  

## <a name="biztalk-private-bytes-analysis"></a><span data-ttu-id="d5a1f-943">BizTalk 私用位元組分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-943">BizTalk Private Bytes Analysis</span></span>  
 <span data-ttu-id="d5a1f-944">這是已配置的私用記憶體的主控件執行個體，與比較 「 \Process （\*） \Private 位元組 」 效能計數器的 mb。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-944">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(\*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="d5a1f-945">私用位元組是記憶體的目前的大小，以位元組為單位的處理序已配置，不能與其他處理序共用。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-945">Private Bytes is the current size, in bytes, of memory that a process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="d5a1f-946">這項分析會判斷任何主控件執行個體是否使用大型系統的記憶體大小和主控件執行個體是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-946">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="d5a1f-947">耗用記憶體的很大一部分的主控件執行個體是正常的只要它傳回至系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-947">A host instance consuming large portions of memory is fine as long as the it returns the memory to the system.</span></span> <span data-ttu-id="d5a1f-948">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-948">Look for increasing trends in the chart.</span></span> <span data-ttu-id="d5a1f-949">這段很長一段時間增加的趨勢可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-949">An increasing trend over a long period of time could indicate a memory leak.</span></span>  

 <span data-ttu-id="d5a1f-950">這項分析會檢查每個小時 10 MB-遞增的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-950">This analysis checks for a 10 MB-per-hour increasing trend.</span></span> <span data-ttu-id="d5a1f-951">您可以使用這項分析中的可用記憶體分析與記憶體流失分析的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-951">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="d5a1f-952">此外，請記住，新啟動主控件執行個體一開始會顯示為記憶體流失時只是一般啟動行為。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-952">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="d5a1f-953">記憶體流失時，處理程序會繼續耗用記憶體和沒有釋出一段長時間的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-953">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="d5a1f-954">如果您懷疑有記憶體流失的情況，請閱讀 「 記憶體成長中 BizTalk 傳訊 」 文章下面所參照。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-954">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article referenced below.</span></span> <span data-ttu-id="d5a1f-955">否則，安裝並使用偵錯診斷工具。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-955">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="d5a1f-956">如需有關 「 偵錯診斷工具的詳細資訊，請參閱 [參考] 區段。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-956">For more information on the Debug Diag Tool, see the references section.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-957">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-957">References</span></span>  

-   <span data-ttu-id="d5a1f-958">偵錯診斷工具 v1.1</span><span class="sxs-lookup"><span data-stu-id="d5a1f-958">Debug Diagnostic Tool v1.1</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

-   <span data-ttu-id="d5a1f-959">在 「 BizTalk 訊息的記憶體成長</span><span class="sxs-lookup"><span data-stu-id="d5a1f-959">Memory Growth in BizTalk Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  

## <a name="biztalk-virtual-bytes-analysis"></a><span data-ttu-id="d5a1f-960">BizTalk 虛擬位元組分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-960">BizTalk Virtual Bytes Analysis</span></span>  
 <span data-ttu-id="d5a1f-961">這是保留給主控件執行個體的虛擬記憶體 （mb）。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-961">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="d5a1f-962">這項分析會判斷是否任何主控件執行個體正在耗用大量系統的記憶體和主控件執行個體是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-962">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="d5a1f-963">耗用記憶體的很大一部分的主控件執行個體是正常的只要它傳回至系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-963">A host instance consuming large portions of memory is fine as long as it returns the memory to the system.</span></span> <span data-ttu-id="d5a1f-964">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-964">Look for increasing trends in the chart.</span></span> <span data-ttu-id="d5a1f-965">這段很長一段時間增加的趨勢可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-965">An increasing trend over a long period of time could indicate a memory leak.</span></span>  

 <span data-ttu-id="d5a1f-966">這項分析會檢查每個小時 10 MB-遞增的趨勢，以虛擬位元組為單位。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-966">This analysis checks for a 10 MB-per-hour increasing trend in virtual bytes.</span></span> <span data-ttu-id="d5a1f-967">您可以使用這項分析中的可用記憶體分析與記憶體流失分析的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-967">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="d5a1f-968">此外，請記住，新啟動主控件執行個體一開始會顯示為記憶體流失時只是一般啟動行為。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-968">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="d5a1f-969">記憶體流失時，處理程序會繼續耗用記憶體和沒有釋出一段長時間的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-969">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="d5a1f-970">如果您懷疑有記憶體流失情況，然後讀取下列 「 記憶體成長中 BizTalk 傳訊 」 文章。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-970">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article below.</span></span> <span data-ttu-id="d5a1f-971">否則，安裝並使用偵錯診斷工具。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-971">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="d5a1f-972">如需有關 「 偵錯診斷工具的詳細資訊，請參閱 [參考] 區段。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-972">For more information on the Debug Diag Tool, see the references section.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-973">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-973">References</span></span>  

-   <span data-ttu-id="d5a1f-974">偵錯診斷工具 v1.1</span><span class="sxs-lookup"><span data-stu-id="d5a1f-974">Debug Diagnostic Tool v1.1</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

-   <span data-ttu-id="d5a1f-975">在 「 BizTalk 訊息的記憶體成長</span><span class="sxs-lookup"><span data-stu-id="d5a1f-975">Memory Growth in BizTalk Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  

## <a name="biztalk-message-agent-database-session-throttling-analysis"></a><span data-ttu-id="d5a1f-976">BizTalk 訊息代理程式的資料庫工作階段節流分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-976">BizTalk Message Agent Database Session Throttling Analysis</span></span>  
 <span data-ttu-id="d5a1f-977">這是相較於其節流設定的個別 BizTalk MessageBox 的開啟資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-977">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="d5a1f-978">「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-978">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="d5a1f-979">一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-979">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="d5a1f-980">此選項預設為停用；通常只有在資料庫伺服器是 BizTalk Server 系統中的瓶頸時，才應啟用此設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-980">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="d5a1f-981">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中的資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-981">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-982">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-982">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="d5a1f-983">輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-983">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="d5a1f-984">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-984">The default value is 0.</span></span>  

 <span data-ttu-id="d5a1f-985">MaxWorkerThreads 登錄機碼會影響 biztalk 可用的執行緒數目，並有助於在其中的 BizTalk 的執行緒大部分都是忙碌中，資料庫連線的情況下。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-985">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="d5a1f-986">這項分析會檢查到 MessageBox 的開啟資料庫連線數目是否大於 80%的資料庫工作階段，節流設定，這表示可能的節流條件。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-986">This analysis checks whether the number of open database connections to the MessageBox are greater than 80 percent of the Database Session Throttling setting, indicating a throttling condition is likely.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-987">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-987">References</span></span>  

-   <span data-ttu-id="d5a1f-988">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-988">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-989">會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-989">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

-   <span data-ttu-id="d5a1f-990">執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-990">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

## <a name="biztalk-message-agent-database-session-throttling-threshold-analysis"></a><span data-ttu-id="d5a1f-991">節流臨界值分析的 BizTalk 訊息代理程式的資料庫工作階段</span><span class="sxs-lookup"><span data-stu-id="d5a1f-991">BizTalk Message Agent Database Session Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="d5a1f-992">這是到 MessageBox 的開啟資料庫連線數目的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-992">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="d5a1f-993">「 資料庫每一 CPU 的連線 」 是並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-993">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="d5a1f-994">一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-994">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="d5a1f-995">此選項預設為停用；通常只有在資料庫伺服器是 BizTalk Server 系統中的瓶頸時，才應啟用此設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-995">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="d5a1f-996">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中的資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-996">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-997">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-997">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="d5a1f-998">輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-998">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="d5a1f-999">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-999">The default value is 0.</span></span>  

 <span data-ttu-id="d5a1f-1000">MaxWorkerThreads 登錄機碼會影響 biztalk 可用的執行緒數目，並有助於在其中的 BizTalk 的執行緒大部分都是忙碌中，資料庫連線的情況下。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1000">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="d5a1f-1001">這項分析會檢查以查看是否從其預設值將它修改此值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1001">This analysis checks this value to see whether it has been modified from its default setting.</span></span> <span data-ttu-id="d5a1f-1002">根據預設，此設定會是 0，這表示節流的資料庫工作階段上已停用。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1002">By default, this setting is 0, which means throttling on database sessions is disabled.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-1003">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1003">References</span></span>  

-   <span data-ttu-id="d5a1f-1004">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1004">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-1005">會影響在配接器效能的組態參數 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1005">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

-   <span data-ttu-id="d5a1f-1006">執行緒、 資料庫中工作階段，以及在節流 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1006">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

## <a name="biztalk-message-agent-in-process-message-count-throttling-analysis"></a><span data-ttu-id="d5a1f-1007">BizTalk 訊息代理程式內含式訊息計數節流分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1007">BizTalk Message Agent In-process Message Count Throttling Analysis</span></span>  
 <span data-ttu-id="d5a1f-1008">這是服務類別正在處理的並行訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1008">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="d5a1f-1009">「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1009">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="d5a1f-1010">這不包括從資料庫擷取但仍在等候記憶體中的佇列中傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1010">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="d5a1f-1011">您可以使用 biztalk： 訊息代理程式的效能物件類別下的內含式訊息計數效能計數器來監視內含式訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1011">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-1012">此參數提供提示給節流機制，做為節流狀況的考量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1012">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="d5a1f-1013">實際閾值會受自我調整影響而不同。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1013">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="d5a1f-1014">您可以監視的內含式訊息計數效能計數器，以確認實際閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1014">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  

 <span data-ttu-id="d5a1f-1015">如需大型訊息案例 （其中平均訊息大小很高，或訊息的處理可能需要大量的訊息），這個參數可以設定為較小的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1015">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="d5a1f-1016">大型訊息實例被表示如果記憶體為根據的節流經常發生，且記憶體臨界值可讓您取得自動調整為相當低的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1016">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="d5a1f-1017">此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1017">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="d5a1f-1018">此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1018">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="d5a1f-1019">這項分析會檢查高內含式訊息計數計數器，來判斷其是否大於 80%的相同名稱下其節流設定值，表示節流狀況有可能。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1019">This analysis checks the High In-Process Message Count counter to determine whether it is greater than 80 percent of its throttling setting under the same name, which indicates a throttling condition is likely.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-1020">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1020">References</span></span>  

-   <span data-ttu-id="d5a1f-1021">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1021">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-1022">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1022">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalkmessage-agent-in-process-message-count-throttling-threshold-analysis"></a><span data-ttu-id="d5a1f-1023">Biztalk： 訊息代理程式內含式訊息計數節流閾值分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1023">BizTalk:Message Agent In-process Message Count Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="d5a1f-1024">這是目前的服務類別正在處理的並行訊息數的閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1024">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="d5a1f-1025">「 訊息每一 CPU 的內含式 」 中的設定主控件節流設定是訊息傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未經過處理的數目上限。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1025">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="d5a1f-1026">這不包括從資料庫擷取但仍在等候記憶體中的佇列中傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1026">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="d5a1f-1027">您可以使用 biztalk： 訊息代理程式的效能物件類別下的內含式訊息計數效能計數器來監視內含式訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1027">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="d5a1f-1028">此參數提供提示給節流機制，做為節流狀況的考量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1028">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="d5a1f-1029">實際閾值會受自我調整影響而不同。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1029">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="d5a1f-1030">您可以監視的內含式訊息計數效能計數器，以確認實際閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1030">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  

 <span data-ttu-id="d5a1f-1031">如需大型訊息案例 （其中平均訊息大小很高，或訊息的處理可能需要大量的訊息），這個參數可以設定為較小的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1031">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="d5a1f-1032">大型訊息實例被表示如果記憶體為根據的節流經常發生，且記憶體臨界值可讓您取得自動調整為相當低的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1032">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="d5a1f-1033">此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1033">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="d5a1f-1034">此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1034">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="d5a1f-1035">這項分析會檢查高內含式訊息計數節流臨界值的非預設值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1035">This analysis checks the High In-Process Message Count throttling threshold for a non-default value.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-1036">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1036">References</span></span>  

-   <span data-ttu-id="d5a1f-1037">主控件節流效能計數器，在 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1037">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="d5a1f-1038">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1038">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalk-message-agent-process-memory-usage-mb-throttling-analysis"></a><span data-ttu-id="d5a1f-1039">BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1039">BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis</span></span>  
 <span data-ttu-id="d5a1f-1040">這是目前的處理序 (MB) 的記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1040">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="d5a1f-1041">如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1041">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span>  <span data-ttu-id="d5a1f-1042">若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1042">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="d5a1f-1043">如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，則請考慮減少內部訊息佇列大小的值，內含式訊息，每一 CPU 閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1043">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="d5a1f-1044">此策略特別會與大型訊息處理實例有關。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1044">This strategy is particularly relevant in large message processing scenarios.</span></span>  

 <span data-ttu-id="d5a1f-1045">如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1045">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="d5a1f-1046">在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2GB 的 32 位元。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1046">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="d5a1f-1047">一般情況下，強烈建議 64 位元 BizTalk 和 64 位元 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1047">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="d5a1f-1048">請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1048">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="d5a1f-1049">這項分析會檢查程序記憶體使用量是否大於 80%的相同名稱的其各自的節流臨界值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1049">This analysis checks whether the process memory usage is greater than 80 percent of its respective throttling threshold of the same name.</span></span> <span data-ttu-id="d5a1f-1050">根據預設，BizTalk 處理序記憶體使用量節流設定是 25%之處理序可用的虛擬記憶體。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1050">By default, the BizTalk Process Memory Usage throttling setting is 25 percent of the virtual memory available to the process.</span></span> <span data-ttu-id="d5a1f-1051">/3GB 參數已不會影響此設定。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1051">The /3GB switch has no effect on this setting.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-1052">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1052">References</span></span>  

-   <span data-ttu-id="d5a1f-1053">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1053">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="d5a1f-1054">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1054">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="d5a1f-1055">如何擷取發生記憶體溢位在的處理序的記憶體傾印 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1055">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  

-   <span data-ttu-id="d5a1f-1056">在 BizTalk Server 64 位元支援 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1056">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  

## <a name="biztalkmessage-agent-process-memory-usage-mb-throttling-threshold-analysis"></a><span data-ttu-id="d5a1f-1057">Biztalk： 訊息代理程式處理序記憶體使用量 (MB) 節流閾值分析</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1057">BizTalk:Message Agent Process Memory Usage (MB) Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="d5a1f-1058">這是目前的處理序 (MB) 的記憶體使用量的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1058">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="d5a1f-1059">閾值可以根據實際數量的記憶體可供此程序和其記憶體耗用量模式動態調整。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1059">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="d5a1f-1060">如果要發行的批次擁有遽增的記憶體需求，或太多的執行緒正在處理訊息，則可能發生 BizTalk 程序記憶體節流。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1060">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="d5a1f-1061">若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1061">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="d5a1f-1062">如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，則請考慮減少內部訊息佇列大小的值，內含式訊息，每一 CPU 閾值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1062">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="d5a1f-1063">此策略特別會與大型訊息處理實例有關。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1063">This strategy is particularly relevant in large message processing scenarios.</span></span>  

 <span data-ttu-id="d5a1f-1064">如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1064">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="d5a1f-1065">在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2GB 的 32 位元。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1065">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="d5a1f-1066">一般情況下，強烈建議 64 位元 BizTalk 和 64 位元 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1066">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="d5a1f-1067">請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1067">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="d5a1f-1068">這項分析會檢查是否程序記憶體節流是否為非預設值。</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1068">This analysis checks whether the Process memory throttling is set to a non-default value.</span></span>  

### <a name="references"></a><span data-ttu-id="d5a1f-1069">參考</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1069">References</span></span>  

-   <span data-ttu-id="d5a1f-1070">BizTalk Server 如何實作主控件節流在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1070">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="d5a1f-1071">如何修改預設主控件節流設定 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1071">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="d5a1f-1072">如何擷取發生記憶體溢位在的處理序的記憶體傾印 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1072">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  

-   <span data-ttu-id="d5a1f-1073">在 BizTalk Server 64 位元支援 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="d5a1f-1073">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>