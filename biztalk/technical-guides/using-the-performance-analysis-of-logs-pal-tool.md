---
title: "使用的記錄檔 (PAL) 工具的效能分析 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d563aa7d-102d-4fe6-a892-66794feaf83b
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a1d2833fef3ee6e9083866f21f357a0d39b2f074
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="using-the-performance-analysis-of-logs-pal-tool"></a><span data-ttu-id="37abd-102">使用記錄檔 (PAL) 工具的效能的分析</span><span class="sxs-lookup"><span data-stu-id="37abd-102">Using the Performance Analysis of Logs (PAL) Tool</span></span>
<span data-ttu-id="37abd-103">PAL （效能分析的記錄檔） 工具讀入效能監視器計數器記錄檔 （任何已知的格式），並且會使用複雜，但已知臨界值 （提供） 加以分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-103">The PAL (Performance Analysis of Logs) tool reads in a performance monitor counter log (any known format) and analyzes it using complex, but known thresholds (provided).</span></span> <span data-ttu-id="37abd-104">此工具會產生 HTML 基礎報表，以圖形方式圖表重要的效能計數器，並擲回警示時已超過閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-104">The tool generates an HTML based report that graphically charts important performance counters and throws alerts when thresholds are exceeded.</span></span> <span data-ttu-id="37abd-105">臨界值最初根據 Microsoft 產品團隊，包括所定義的臨界值[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，而且屬於 Microsoft 支援。</span><span class="sxs-lookup"><span data-stu-id="37abd-105">The thresholds are originally based on thresholds defined by the Microsoft product teams, including [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and members of Microsoft support.</span></span> <span data-ttu-id="37abd-106">此工具不是傳統的效能分析的取代，但它會自動分析的效能計數器記錄足以協助節省時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-106">This tool is not a replacement of traditional performance analysis, but it automates the analysis of performance counter logs enough to help save you time.</span></span> <span data-ttu-id="37abd-107">PAL 工具：</span><span class="sxs-lookup"><span data-stu-id="37abd-107">The PAL tool:</span></span>  
  
-   <span data-ttu-id="37abd-108">分析臨界值的效能計數器記錄</span><span class="sxs-lookup"><span data-stu-id="37abd-108">Analyzes performance counter logs for thresholds</span></span>  
  
-   <span data-ttu-id="37abd-109">很大的效能記錄檔</span><span class="sxs-lookup"><span data-stu-id="37abd-109">Is helpful for large Perfmon logs</span></span>  
  
-   <span data-ttu-id="37abd-110">識別[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和作業系統效能計數器瓶頸，藉由分析臨界值</span><span class="sxs-lookup"><span data-stu-id="37abd-110">Identifies [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and operating system performance counter bottlenecks by analyzing for thresholds</span></span>  
  
-   <span data-ttu-id="37abd-111">擴充，以進行分析上的任何效能計數器</span><span class="sxs-lookup"><span data-stu-id="37abd-111">Is extensible to do analysis on any performance counters</span></span>  
  
-   <span data-ttu-id="37abd-112">可用來協助撰寫您自己的計數器</span><span class="sxs-lookup"><span data-stu-id="37abd-112">Can be used to help write your own counter</span></span>  
  
 <span data-ttu-id="37abd-113">PAL 是在免費下載[http://go.microsoft.com/fwlink/?linkid=98098](http://go.microsoft.com/fwlink/?linkid=98098)。</span><span class="sxs-lookup"><span data-stu-id="37abd-113">PAL is available as a free download at [http://go.microsoft.com/fwlink/?linkid=98098](http://go.microsoft.com/fwlink/?linkid=98098).</span></span> <span data-ttu-id="37abd-114">它需要 Microsoft 的記錄檔剖析器。</span><span class="sxs-lookup"><span data-stu-id="37abd-114">It requires Microsoft Log Parser.</span></span> <span data-ttu-id="37abd-115">記錄檔剖析器是功能強大、 靈活的工具，提供通用的查詢文字為基礎的資料，例如記錄檔、 XML 檔案和 CSV 檔案，以及索引鍵的資料來源來存取 Windows 作業系統，例如事件記錄檔、 登錄、 檔案系統和作用中Directory® 目錄服務。</span><span class="sxs-lookup"><span data-stu-id="37abd-115">Log Parser is a powerful, versatile tool that provides universal query access to text-based data such as log files, XML files, and CSV files, as well as key data sources on the Windows operating system such as the event log, the registry, the file system, and Active Directory® directory service.</span></span> <span data-ttu-id="37abd-116">若要使用此工具來查詢大量的記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-116">You may want to use this tool to query a significant amount of logging information.</span></span> <span data-ttu-id="37abd-117">您可以下載記錄檔剖析器工具在[http://go.microsoft.com/fwlink/?linkid=85574](http://go.microsoft.com/fwlink/?linkid=85574)。</span><span class="sxs-lookup"><span data-stu-id="37abd-117">You can download the Log Parser tool at [http://go.microsoft.com/fwlink/?linkid=85574](http://go.microsoft.com/fwlink/?linkid=85574).</span></span>  
  
## <a name="using-pal-with-performance-counter-logs-in-different-languages"></a><span data-ttu-id="37abd-118">在不同的語言使用 PAL 與效能計數器記錄</span><span class="sxs-lookup"><span data-stu-id="37abd-118">Using PAL with Performance Counter Logs in Different Languages</span></span>  
 <span data-ttu-id="37abd-119">PAL 工具會分析僅以英文語言的效能計數器記錄檔。</span><span class="sxs-lookup"><span data-stu-id="37abd-119">The PAL tool analyzes performance counter logs only in English language.</span></span> <span data-ttu-id="37abd-120">若要使用其他語言中的效能計數器記錄檔 [PAL] 工具，您必須先轉換記錄檔，以英文語言。</span><span class="sxs-lookup"><span data-stu-id="37abd-120">To use the PAL tool with performance counter logs in other languages, you must first translate the logs to English language.</span></span> <span data-ttu-id="37abd-121">您可以使用**Perfmon 記錄轉譯程式**工具位於[http://go.microsoft.com/fwlink/?LinkId=158802](http://go.microsoft.com/fwlink/?LinkId=158802)翻譯成英文原始的效能計數器記錄檔。</span><span class="sxs-lookup"><span data-stu-id="37abd-121">You can use the **Perfmon Log Translator** tool available at [http://go.microsoft.com/fwlink/?LinkId=158802](http://go.microsoft.com/fwlink/?LinkId=158802) to translate the original performance counter log files to English.</span></span>  
  
## <a name="understanding-the-pal-tool-report-for-microsoft-biztalk-server-2010"></a><span data-ttu-id="37abd-122">了解 Microsoft BizTalk Server 2010 的 PAL 工具報告</span><span class="sxs-lookup"><span data-stu-id="37abd-122">Understanding the PAL Tool Report for Microsoft BizTalk Server 2010</span></span>  
 <span data-ttu-id="37abd-123">PAL 工具提供 Windows 作業系統，Microsoft SQL Server，效能監視器記錄分析臨界值和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="37abd-123">The PAL tool provides Perfmon log analysis of thresholds for the Windows operating system, Microsoft SQL Server, and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="37abd-124">本章節描述在分析的大部分[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]臨界值 [PAL] 工具中的報表。</span><span class="sxs-lookup"><span data-stu-id="37abd-124">This section describes most of the analyses in the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] threshold report in the PAL tool.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="37abd-125">本主題很長，以便可以在一個地方，以方便參考包含有關 PAL 工具的完整資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-125">This topic is long so that comprehensive information about the PAL tool can be contained in one place for easy reference.</span></span>  
  
 <span data-ttu-id="37abd-126">PAL 工具會報告下列分析和臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-126">The following analysis and thresholds are reported by the PAL tool.</span></span>  
  
|<span data-ttu-id="37abd-127">分析的類型和名稱</span><span class="sxs-lookup"><span data-stu-id="37abd-127">Analysis Type and Name</span></span>|<span data-ttu-id="37abd-128">分析描述</span><span class="sxs-lookup"><span data-stu-id="37abd-128">Analysis Description</span></span>|  
|----------------------------|--------------------------|  
|<span data-ttu-id="37abd-129">： 磁碟的磁碟可用空間的核心傾印</span><span class="sxs-lookup"><span data-stu-id="37abd-129">Disk: Disk Free Space for a Kernel Dump</span></span>|<span data-ttu-id="37abd-130">這項分析會檢查以確定有足夠的磁碟空間，用於作業系統磁碟的所有記憶體傾都印。</span><span class="sxs-lookup"><span data-stu-id="37abd-130">This analysis checks to make sure there is enough free disk space for the operating system to dump all memory to disk.</span></span> <span data-ttu-id="37abd-131">如果可用磁碟空間不足，作業系統將無法建立 memory.dmp 時，這是要分析根本原因的核心傾印檔案。</span><span class="sxs-lookup"><span data-stu-id="37abd-131">If insufficient disk space is available, then the operating system will fail to create a memory.dmp, file which is necessary to analyze the root cause of a kernel dump.</span></span>|  
|<span data-ttu-id="37abd-132">磁碟： 邏輯/實體磁碟介面分析</span><span class="sxs-lookup"><span data-stu-id="37abd-132">Disk: Logical/Physical Disk Interface Analysis</span></span>|<span data-ttu-id="37abd-133">這項分析會查看每個實體磁碟的閒置時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-133">This analysis looks at the idle time of each of the physical disks.</span></span> <span data-ttu-id="37abd-134">多閒置磁碟，使用磁碟越低。</span><span class="sxs-lookup"><span data-stu-id="37abd-134">The more idle the disk is, the less the disk is being used.</span></span> <span data-ttu-id="37abd-135">此計數器適合在使用一個磁碟的邏輯磁碟中。</span><span class="sxs-lookup"><span data-stu-id="37abd-135">This counter is best used when one disk is used in the logical disk.</span></span> <span data-ttu-id="37abd-136">"%閒置時間 」 報告的範例間隔期間磁碟閒置時間百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-136">“% Idle Time” reports the percentage of time during the sample interval that the disk was idle.</span></span><br /><br /> <span data-ttu-id="37abd-137">參考： Ruling 出的磁碟繫結問題[http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="37abd-137">Reference:  Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>|  
|<span data-ttu-id="37abd-138">磁碟： 邏輯/實體磁碟讀取/寫入延遲分析</span><span class="sxs-lookup"><span data-stu-id="37abd-138">Disk: Logical/Physical Disk Read/Write Latency Analysis</span></span>|<span data-ttu-id="37abd-139">Windows 偵測到磁碟的效能瓶頸最可靠的方式是藉由測量其回應時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-139">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="37abd-140">如果回應時間大於.025 （25 毫秒為單位），也就是保守的臨界值，然後值得注意的速度並影響使用者的效能問題可能會發生。</span><span class="sxs-lookup"><span data-stu-id="37abd-140">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span> <span data-ttu-id="37abd-141">如需詳細資訊，請參閱邏輯/實體磁碟讀取/寫入延遲分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-141">For more information, refer to Logical/Physical Disk Read/Write Latency Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-142">磁碟： Logical Disk Transfers/sec</span><span class="sxs-lookup"><span data-stu-id="37abd-142">Disk: Logical Disk Transfers/sec</span></span>|<span data-ttu-id="37abd-143">「 磁碟 Transfers/sec"是讀取的速率和寫入磁碟上的作業。</span><span class="sxs-lookup"><span data-stu-id="37abd-143">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="37abd-144">這項分析檢查以查看是否有任何的邏輯磁碟的臨界值會顯示不佳的回應時間 （大於 25 毫秒 I/O 作業的回應時間）。</span><span class="sxs-lookup"><span data-stu-id="37abd-144">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="37abd-145">如果為 true，則每秒磁碟轉移操作應該等於或高於 80。</span><span class="sxs-lookup"><span data-stu-id="37abd-145">If this is true, then the disk transfers per second should be at or above 80.</span></span> <span data-ttu-id="37abd-146">如果沒有，則需要調查磁碟架構。</span><span class="sxs-lookup"><span data-stu-id="37abd-146">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="37abd-147">不佳的磁碟 I/O 的最常見原因是多載 SAN 上的 LUN。</span><span class="sxs-lookup"><span data-stu-id="37abd-147">The most common cause of poor disk I/O is LUN overloading on the SAN.</span></span> <span data-ttu-id="37abd-148">如需詳細資訊，請參閱 Logical Disk Transfers/sec 本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-148">For more information, refer to Logical Disk Transfers/sec in this topic.</span></span>|  
|<span data-ttu-id="37abd-149">磁碟： LogicalDisk %可用空間</span><span class="sxs-lookup"><span data-stu-id="37abd-149">Disk: LogicalDisk % Free Space</span></span>|<span data-ttu-id="37abd-150">「 %可用空間 」 是已在所選邏輯磁碟機上可用的總可用空間百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-150">“% Free Space” is the percentage of total usable space that was free on the selected logical disk drive.</span></span> <span data-ttu-id="37abd-151">少於 30%的可用磁碟空間之前，應該不會影響效能。</span><span class="sxs-lookup"><span data-stu-id="37abd-151">Performance should not be affected until the available disk drive space is less than 30 percent.</span></span> <span data-ttu-id="37abd-152">使用磁碟機的 70%時，剩餘的可用空間是磁碟的位於更接近中間，都是磁碟的在較低的效能層級運作的磁碟磁針。</span><span class="sxs-lookup"><span data-stu-id="37abd-152">When 70 percent of the disk drive is used, the remaining free space is located closer to the disk's spindle at the center of the disk drive, which operates at a lower performance level.</span></span> <span data-ttu-id="37abd-153">可用磁碟空間不足可能會造成嚴重的磁碟效能。</span><span class="sxs-lookup"><span data-stu-id="37abd-153">Lack of free disk space can cause severe disk performance.</span></span><br /><br /> <span data-ttu-id="37abd-154">參考： NT 伺服器和磁碟子系統效能[http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="37abd-154">Reference:  NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>|  
|<span data-ttu-id="37abd-155">磁碟： 處理 IO Data Operations/sec 和處理 IO 其他作業數/秒分析</span><span class="sxs-lookup"><span data-stu-id="37abd-155">Disk: Process IO Data Operations/sec and Process IO Other Operations/sec Analysis</span></span>|<span data-ttu-id="37abd-156">這些計數器計算所有的 I/O 活動，包括檔案、 網路及裝置 I/o 處理序所產生。</span><span class="sxs-lookup"><span data-stu-id="37abd-156">These counters count all I/O activity generated by the process to include file, network and device I/Os.</span></span> <span data-ttu-id="37abd-157">當處理序正在執行超過 1,000 個我 / O 的每秒，並且將它標示為警告，請檢查這些分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-157">These analyses check when processes are doing more than 1,000 I/O’s per second and flag it as a warning.</span></span> <span data-ttu-id="37abd-158">這些分析最適合用於與其他分析，例如磁碟分析相互關聯來判斷哪些處理程序可能會陷入 I/O 活動。</span><span class="sxs-lookup"><span data-stu-id="37abd-158">These analyses are best used in correlation with other analyses such as disk analysis to determine which processes might be involved in the I/O activity.</span></span>|  
|<span data-ttu-id="37abd-159">可用記憶體的記憶體：</span><span class="sxs-lookup"><span data-stu-id="37abd-159">Memory: Available Memory</span></span>|<span data-ttu-id="37abd-160">這項分析會檢查是否總可用記憶體偏低 – 可用的 10%的警告和重大在可用的 5%。</span><span class="sxs-lookup"><span data-stu-id="37abd-160">This analysis checks whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="37abd-161">警告也會收到警示，每小時 10 MB 的遞減趨勢偵測到時，可指出潛在的即將進行的記憶體不足。</span><span class="sxs-lookup"><span data-stu-id="37abd-161">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, which can indicate a potential upcoming memory condition.</span></span> <span data-ttu-id="37abd-162">實體記憶體不足可能會造成更高特殊權限的模式 CPU 和系統的延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-162">Low physical memory can cause increased privileged mode CPU and system delays.</span></span> <span data-ttu-id="37abd-163">如需詳細資訊，請參閱可用 MemoryAnalysis 本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-163">For more information, refer to Available MemoryAnalysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-164">記憶體： 可用系統分頁表項目</span><span class="sxs-lookup"><span data-stu-id="37abd-164">Memory: Free System Page Table Entries</span></span>|<span data-ttu-id="37abd-165">Free System Page Table Entries (PTE) 是由系統目前未使用的分頁表項目數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-165">Free System Page Table Entries (PTE’s) are the number of page table entries not currently used by the system.</span></span> <span data-ttu-id="37abd-166">這項分析會判斷系統是否已執行超出 PTE 的方式是檢查是否有少於 5000 可用 PTE 的警告是否少於 10,000 可用 PTE 的。</span><span class="sxs-lookup"><span data-stu-id="37abd-166">This analysis determines whether the system is running out of PTE’s by checking whether there are fewer than 5,000 free PTE’s with a Warning if there are fewer than 10,000 free PTE’s.</span></span> <span data-ttu-id="37abd-167">缺乏足夠 PTE 可能會導致整個系統停止回應。</span><span class="sxs-lookup"><span data-stu-id="37abd-167">Lack of enough PTE’s can result in systemwide hangs.</span></span> <span data-ttu-id="37abd-168">也請注意，/3GB 參數將會大幅降低可用 PTE 數量。</span><span class="sxs-lookup"><span data-stu-id="37abd-168">Also note that the /3GB switch will lower the amount of free PTE’s significantly.</span></span> <span data-ttu-id="37abd-169">如需詳細資訊，請參閱可用系統分頁資料表項目分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-169">For more information, refer to Free System Page Table Entries Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-170">記憶體： 記憶體流失偵測</span><span class="sxs-lookup"><span data-stu-id="37abd-170">Memory: Memory Leak Detection</span></span>|<span data-ttu-id="37abd-171">這項分析會判斷是否的任何程序正在耗用大量系統的記憶體和處理程序是否在經過一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="37abd-171">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="37abd-172">處理序耗用是記憶體的正常的只要在處理序傳回回系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-172">A process consuming large portions of memory is fine as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="37abd-173">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-173">Look for increasing trends in the chart.</span></span> <span data-ttu-id="37abd-174">遞增趨勢上很長一段時間可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="37abd-174">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="37abd-175">「 私用位元組 」 是目前的大小，以位元組為單位，此處理序已配置的記憶體不能與其他處理序共用。</span><span class="sxs-lookup"><span data-stu-id="37abd-175">“Private Bytes” is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="37abd-176">這項分析會檢查 10 MB 的每小時和 5 MB 的每小時增加的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-176">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="37abd-177">您可以使用這項分析中與 PAL 中的可用記憶體分析相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-177">Use this analysis in correlation with the Available Memory analysis in PAL.</span></span> <span data-ttu-id="37abd-178">如需詳細資訊，請參閱記憶體流失偵測分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-178">For more information, refer to Memory Leak Detection Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-179">記憶體： 控制代碼遺漏偵測</span><span class="sxs-lookup"><span data-stu-id="37abd-179">Memory: Handle Leak Detection</span></span>|<span data-ttu-id="37abd-180">這項分析會檢查所有來判斷多少處理每個處理序已開啟，並懷疑來判斷是否控制代碼遺漏。</span><span class="sxs-lookup"><span data-stu-id="37abd-180">This analysis checks all of the processes to determine how many handles each has open and to determine whether a handle leak is suspected.</span></span> <span data-ttu-id="37abd-181">包含大量的控制代碼和/或積極增加的趨勢的程序可能表示有控制代碼流失，通常會導致記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="37abd-181">A process with a large number of handles and/or an aggressive upward trend could indicate a handle leak, which typically results in a memory leak.</span></span> <span data-ttu-id="37abd-182">此程序目前開啟的控制代碼總數會等於這個處理序中的每個執行緒目前開啟的控制代碼總和。</span><span class="sxs-lookup"><span data-stu-id="37abd-182">The total number of handles currently open by this process is equal to the sum of the handles currently open by each thread in this process.</span></span><br /><br /> <span data-ttu-id="37abd-183">參考： 偵錯診斷工具 v1.1 在[http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="37abd-183">Reference:  Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>|  
|<span data-ttu-id="37abd-184">記憶體： 記憶體 Pages Input/sec</span><span class="sxs-lookup"><span data-stu-id="37abd-184">Memory: Memory Pages Input/sec</span></span>|<span data-ttu-id="37abd-185">「 Pages Input/sec"是從磁碟為解決硬體分頁錯誤而讀取分頁的速率。</span><span class="sxs-lookup"><span data-stu-id="37abd-185">“Pages Input/sec” is the rate at which pages are read from disk to resolve hard page faults.</span></span> <span data-ttu-id="37abd-186">處理程序是指不在其工作集或其他位置中的實體記憶體，因而必須從磁碟擷取的虛擬記憶體分頁時，就會發生硬體分頁錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-186">Hard page faults occur when a process refers to a page in virtual memory that is not in its working set or elsewhere in physical memory, and must be retrieved from disk.</span></span> <span data-ttu-id="37abd-187">這項分析會檢查是否有 10 個以上每秒的分頁檔案讀取。</span><span class="sxs-lookup"><span data-stu-id="37abd-187">This analysis checks whether there are more than 10 page file reads per second.</span></span>|  
|<span data-ttu-id="37abd-188">記憶體： 記憶體 Pages/sec</span><span class="sxs-lookup"><span data-stu-id="37abd-188">Memory: Memory Pages/sec</span></span>|<span data-ttu-id="37abd-189">這項分析會檢查是否"Pages/sec"很高 （超過 1,000 個）。</span><span class="sxs-lookup"><span data-stu-id="37abd-189">This analysis checks to see whether the “Pages/sec” is high (above 1,000).</span></span> <span data-ttu-id="37abd-190">如果高，然後系統可能記憶體不足嘗試將頁面上的記憶體到磁碟。</span><span class="sxs-lookup"><span data-stu-id="37abd-190">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="37abd-191">「 頁/sec"是在讀取或寫入為解決硬體分頁錯誤而對磁碟頁面的速率。</span><span class="sxs-lookup"><span data-stu-id="37abd-191">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="37abd-192">這個計數器是導致整個系統延遲的錯誤種類的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="37abd-192">This counter is a primary indicator of the kinds of faults that cause systemwide delays.</span></span>  <span data-ttu-id="37abd-193">您可以使用這項分析中可用的記憶體分析與 PAL 中的記憶體流失偵測分析相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-193">Use this analysis in correlation with Available Memory analysis and Memory Leak Detection analysis in PAL.</span></span> <span data-ttu-id="37abd-194">如果所有這些分析會擲回警示，在相同的時間，然後這可能表示系統用完記憶體，並根據推測的處理程序牽涉到 PAL 中的記憶體流失偵測分析中所述步驟分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-194">If all of these analyses are throwing alerts at the same time, then this may indicate the system is running out of memory and the suspected processes involved and follow analysis steps mentioned in the Memory Leak Detection analysis in PAL.</span></span><br /><br /> <span data-ttu-id="37abd-195">如需詳細資訊，請參閱本主題中的記憶體 Pages/sec 分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-195">For more information, refer to Memory Pages/sec Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-196">記憶體： 記憶體系統快取常駐位元組</span><span class="sxs-lookup"><span data-stu-id="37abd-196">Memory: Memory System Cache Resident Bytes</span></span>|<span data-ttu-id="37abd-197">「 系統快取常駐位元組 」 是大小，以位元組為單位的檔案系統快取中的可分頁作業系統程式碼。</span><span class="sxs-lookup"><span data-stu-id="37abd-197">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="37abd-198">此值只包含目前實體頁面，而且不包含任何非目前駐留的虛擬記憶體分頁。</span><span class="sxs-lookup"><span data-stu-id="37abd-198">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="37abd-199">這個值是元件的 「 記憶體\\\System 程式碼常駐位元組 」 代表所有目前正在實體記憶體的可分頁作業系統程式碼。</span><span class="sxs-lookup"><span data-stu-id="37abd-199">This value is a component of “Memory\\\System Code Resident Bytes” which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="37abd-200">這個計數器會顯示最後觀察到的值它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="37abd-200">This counter displays the last observed value only; it is not an average.</span></span> <span data-ttu-id="37abd-201">這項分析會檢查每小時 10 MB 的遞增趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-201">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="37abd-202">在負載下，伺服器可能會以快取的 I/O 活動，例如磁碟使用的系統快取。</span><span class="sxs-lookup"><span data-stu-id="37abd-202">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="37abd-203">用於相互關聯處理序 IO Data Operations/sec 與其他處理序 IO 作業數/秒 PAL 中的分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-203">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses in PAL.</span></span><br /><br /> <span data-ttu-id="37abd-204">參考： 檔案快取效能和調整在[http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span><span class="sxs-lookup"><span data-stu-id="37abd-204">Reference: File Cache Performance and Tuning at [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span></span>|  
|<span data-ttu-id="37abd-205">記憶體： 集區未分頁位元組</span><span class="sxs-lookup"><span data-stu-id="37abd-205">Memory: Pool Non Paged Bytes</span></span>|<span data-ttu-id="37abd-206">"Pool Nonpaged 的 Bytes 」 是以位元組為單位的非分頁集區，不能寫入的物件系統記憶體區域的大小，磁碟、 但只要已配置就必須保留在實體記憶體中。</span><span class="sxs-lookup"><span data-stu-id="37abd-206">“Pool Nonpaged Bytes” is the size, in bytes, of the non-paged pool, an area of system memory for objects that cannot be written to disk, but must remain in physical memory as long as they are allocated.</span></span> <span data-ttu-id="37abd-207">這項分析會檢查以查看系統即將推出，接近 最大的集區未分頁記憶體大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-207">This analysis checks to see whether the system is coming close to the maximum pool non paged memory size.</span></span> <span data-ttu-id="37abd-208">它會透過評估下列因素納入考量的集區大小/3 GB、 實體記憶體大小，以及 32 位元/64 位元，然後判斷值是否大於估計的集區大小的 60%。</span><span class="sxs-lookup"><span data-stu-id="37abd-208">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="37abd-209">如果系統變成接近最大大小，系統可能會導致系統寬的停止回應。</span><span class="sxs-lookup"><span data-stu-id="37abd-209">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="37abd-210">Boot.ini 檔案中的 3 GB 交換器選項會大幅降低此記憶體集區的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-210">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="37abd-211">如需詳細資訊，請參閱 Pool Non-Paged 位元組分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-211">For more information, refer to Pool Non-Paged Bytes Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-212">記憶體： 集區分頁位元組</span><span class="sxs-lookup"><span data-stu-id="37abd-212">Memory: Pool Paged Bytes</span></span>|<span data-ttu-id="37abd-213">這項分析會檢查以查看系統即將推出，接近 最大的集區的分頁記憶體大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-213">This analysis checks to see whether the system is coming close to the maximum pool paged memory size.</span></span> <span data-ttu-id="37abd-214">它會透過評估下列因素納入考量的集區大小/3 GB、 實體記憶體大小，以及 32 位元/64 位元，然後判斷值是否大於估計的集區大小的 60%。</span><span class="sxs-lookup"><span data-stu-id="37abd-214">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="37abd-215">如果系統變成接近最大大小，系統可能會導致系統寬的停止回應。</span><span class="sxs-lookup"><span data-stu-id="37abd-215">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="37abd-216">Boot.ini 檔案中的 3 GB 交換器選項會大幅降低此記憶體集區的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-216">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="37abd-217">如需詳細資訊，請參閱集區的分頁位元組分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-217">For more information, refer to Pool Paged Bytes Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-218">記憶體： 處理序執行緒計數</span><span class="sxs-lookup"><span data-stu-id="37abd-218">Memory: Process Thread Count</span></span>|<span data-ttu-id="37abd-219">這項分析會檢查所有的處理序，來決定處理程序是否有超過 500 個執行緒，以及如果 50 執行緒每小時增加的執行緒數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-219">This analysis checks all of the processes to determine whether a process has more than 500 threads and if the number of threads is increasing by 50 threads per hour.</span></span> <span data-ttu-id="37abd-220">大量執行緒和/或積極增加的趨勢的處理序可能表示執行緒遺漏通常會導致記憶體遺漏或高內容切換。</span><span class="sxs-lookup"><span data-stu-id="37abd-220">A process with a large number of threads and/or an aggressive upward trend could indicate a thread leak which typically results in either a memory leak or high context switching.</span></span> <span data-ttu-id="37abd-221">高內容切換，會導致高特殊權限模式 CPU。</span><span class="sxs-lookup"><span data-stu-id="37abd-221">High context switching will result in high privileged mode CPU.</span></span>|  
|<span data-ttu-id="37abd-222">記憶體： 處理程序工作組</span><span class="sxs-lookup"><span data-stu-id="37abd-222">Memory: Process Working Set</span></span>|<span data-ttu-id="37abd-223">「 工作集 」 是目前的大小，以位元組為單位的工作集，此程序。</span><span class="sxs-lookup"><span data-stu-id="37abd-223">“Working Set” is the current size, in bytes, of the working set of this process.</span></span> <span data-ttu-id="37abd-224">工作集是由程序中執行緒最近觸及的記憶體分頁的集合。</span><span class="sxs-lookup"><span data-stu-id="37abd-224">The working set is the set of memory pages touched recently by the threads in the process.</span></span> <span data-ttu-id="37abd-225">如果電腦中的可用記憶體超過閾值，頁面會留在程序的工作集，即使他們沒有使用中。</span><span class="sxs-lookup"><span data-stu-id="37abd-225">If free memory in the computer is above a threshold, pages are left in the working set of a process even if they are not in use.</span></span> <span data-ttu-id="37abd-226">當可用記憶體低於臨界值時，會從工作集修剪頁面。</span><span class="sxs-lookup"><span data-stu-id="37abd-226">When free memory falls below a threshold, pages are trimmed from working sets.</span></span> <span data-ttu-id="37abd-227">若您需要這些然後再將其寫回工作集退出主記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-227">If they are needed they will then be soft-faulted back into the working set before leaving main memory.</span></span> <span data-ttu-id="37abd-228">這項分析會檢查遞增趨勢的 10 MB 以上每個處理程序中。</span><span class="sxs-lookup"><span data-stu-id="37abd-228">This analysis checks for an increasing trend of 10 MB’s or more in each of the processes.</span></span> <span data-ttu-id="37abd-229">在相互關聯使用 PAL 中的可用記憶體分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-229">Use in correlation with Available Memory analysis in PAL.</span></span><br /><br /> <span data-ttu-id="37abd-230">參考： 偵測記憶體瓶頸在[http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="37abd-230">Reference:  Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>|  
|<span data-ttu-id="37abd-231">網路： 網路輸出佇列長度分析</span><span class="sxs-lookup"><span data-stu-id="37abd-231">Network: Network Output Queue Length Analysis</span></span>|<span data-ttu-id="37abd-232">這項分析會檢查網路介面卡上等候多少執行緒。</span><span class="sxs-lookup"><span data-stu-id="37abd-232">This analysis checks to see how many threads are waiting on the network adapter.</span></span> <span data-ttu-id="37abd-233">如果有很多執行緒正在等待網路介面卡，然後系統會可能讓網路飽和 I/O 由於網路延遲或網路頻寬。</span><span class="sxs-lookup"><span data-stu-id="37abd-233">If a lot of threads are waiting on the network adapter, then the system is probably saturating the network I/O due to network latency or network bandwidth.</span></span> <span data-ttu-id="37abd-234">「 輸出佇列長度 」 （以封包） 的輸出封包佇列長度。</span><span class="sxs-lookup"><span data-stu-id="37abd-234">“Output Queue Length” is the length of the output packet queue (in packets).</span></span> <span data-ttu-id="37abd-235">延遲會指出如果這是長度大於二，並且應該找到並盡快解決瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-235">Delays are indicated if this is longer than two, and the bottleneck should be found and eliminated, if possible.</span></span> <span data-ttu-id="37abd-236">網路輸出佇列的一般原因包括大量的小型網路要求和網路延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-236">Typical causes of network output queuing include high numbers of small network requests and network latency.</span></span>|  
|<span data-ttu-id="37abd-237">網路： 網路使用率分析</span><span class="sxs-lookup"><span data-stu-id="37abd-237">Network: Network Utilization Analysis</span></span>|<span data-ttu-id="37abd-238">「 Bytes Total/sec"是在傳送及接收每個網路介面卡，包括框架字元位元組的速率。</span><span class="sxs-lookup"><span data-stu-id="37abd-238">“Bytes Total/sec” is the rate at which bytes are sent and received over each network adapter, including framing characters.</span></span> <span data-ttu-id="37abd-239">"Network Interface\Bytes Received/sec"是"Network Interface\Bytes Received/sec"和"Network Interface\Bytes Sent/sec"的總和。</span><span class="sxs-lookup"><span data-stu-id="37abd-239">“Network Interface\Bytes Received/sec” is a sum of “Network Interface\Bytes Received/sec” and “Network Interface\Bytes Sent/sec”.</span></span> <span data-ttu-id="37abd-240">此計數器可協助您了解在您的網路介面卡的流量是否已飽和，以及您是否需要新增另一個網路介面卡。</span><span class="sxs-lookup"><span data-stu-id="37abd-240">This counter helps you know whether the traffic at your network adapter is saturated and whether you need to add another network adapter.</span></span> <span data-ttu-id="37abd-241">您可以識別問題的速度取決於類型有以及您是否與其他應用程式共用頻寬的網路。</span><span class="sxs-lookup"><span data-stu-id="37abd-241">How quickly you can identify a problem depends on the type of network you have as well as whether you share bandwidth with other applications.</span></span> <span data-ttu-id="37abd-242">這項分析會將"Bytes Total/sec"轉換成位元，並比較計算網路使用率的網路介面卡的目前頻寬。</span><span class="sxs-lookup"><span data-stu-id="37abd-242">This analysis converts “Bytes Total/sec” to bits and compares it to the current bandwidth of the network adapter to calculate network utilization.</span></span> <span data-ttu-id="37abd-243">接下來，它會檢查使用量超過 50%。</span><span class="sxs-lookup"><span data-stu-id="37abd-243">Next, it checks for utilization above 50 percent.</span></span><br /><br /> <span data-ttu-id="37abd-244">參考： 測量在.NET 應用程式效能[http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="37abd-244">Reference:  Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>|  
|<span data-ttu-id="37abd-245">分頁檔： 分頁檔案使用量百分比和 %使用率正達尖峰</span><span class="sxs-lookup"><span data-stu-id="37abd-245">Paging File: Paging File % Usage and % Usage Peak</span></span>|<span data-ttu-id="37abd-246">以百分比表示的使用中的頁面檔案執行個體數量。</span><span class="sxs-lookup"><span data-stu-id="37abd-246">The amount of the page file instance in use in percent.</span></span> <span data-ttu-id="37abd-247">另請參閱 「 處理程序\\\Page File Bytes"。</span><span class="sxs-lookup"><span data-stu-id="37abd-247">See also “Process\\\Page File Bytes”.</span></span> <span data-ttu-id="37abd-248">這項分析會檢查是否使用的百分比大於 70%。</span><span class="sxs-lookup"><span data-stu-id="37abd-248">This analysis checks whether the percentage of usage is greater than 70 percent.</span></span>|  
|<span data-ttu-id="37abd-249">處理器： 處理器使用率分析和處理序過度佔用處理器使用</span><span class="sxs-lookup"><span data-stu-id="37abd-249">Processor: Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>|<span data-ttu-id="37abd-250">此計數器是處理器活動的主要指示器，並顯示在取樣間隔期間觀察到的忙碌時間平均百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-250">This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="37abd-251">其計算方式是監視該服務處於非使用中的時間，並從 100%減去該值。</span><span class="sxs-lookup"><span data-stu-id="37abd-251">It is calculated by monitoring the time that the service is inactive and subtracting that value from 100 percent.</span></span> <span data-ttu-id="37abd-252">這項分析會檢查使用量大於每個處理器上的 60%。</span><span class="sxs-lookup"><span data-stu-id="37abd-252">This analysis checks for utilization greater than 60 percent on each processor.</span></span> <span data-ttu-id="37abd-253">如果是的話，判斷它是否高使用者模式 CPU 或高特殊權限的模式。</span><span class="sxs-lookup"><span data-stu-id="37abd-253">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="37abd-254">如果懷疑 CPU 高特殊權限的模式，則會看到在 PAL 中的特殊權限模式 CPU 分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-254">If high privileged mode CPU is suspected, then see the Privileged Mode CPU analysis in PAL.</span></span> <span data-ttu-id="37abd-255">如果懷疑有使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用率的函式。</span><span class="sxs-lookup"><span data-stu-id="37abd-255">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span>|  
|<span data-ttu-id="37abd-256">處理器： 處理器佇列長度</span><span class="sxs-lookup"><span data-stu-id="37abd-256">Processor: Processor Queue Length</span></span>|<span data-ttu-id="37abd-257">這項分析會判斷是否平均處理器佇列長度會超過處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-257">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="37abd-258">如果是的話，這可能表示發生處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-258">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="37abd-259">使用這項分析中使用特殊權限模式 CPU 分析和過多的處理器使用 PAL 中的程序分析的相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-259">Use this analysis in correlation with Privileged Mode CPU analysis and Excessive Processor Use by Process analysis in PAL.</span></span> <span data-ttu-id="37abd-260">如需詳細資訊，請參閱處理器佇列長度分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-260">For detailed information, refer to Processor Queue Length Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-261">處理器： 特殊權限的模式 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="37abd-261">Processor:  Privileged Mode CPU Analysis</span></span>|<span data-ttu-id="37abd-262">此計數器表示執行緒在特權模式下執行的時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-262">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="37abd-263">當您的應用程式呼叫作業系統函式 （例如來執行檔案或網路 I/O，或配置記憶體） 時，這些作業系統函式會執行特殊權限模式。</span><span class="sxs-lookup"><span data-stu-id="37abd-263">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span> <span data-ttu-id="37abd-264">這項分析會檢查是否有權限的模式 CPU 耗用超過 30%的總 CPU。</span><span class="sxs-lookup"><span data-stu-id="37abd-264">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="37abd-265">如果，則 CPU 耗用量可能是另一個以外的處理器，例如網路、 記憶體或磁碟 I/O 瓶頸所造成。</span><span class="sxs-lookup"><span data-stu-id="37abd-265">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="37abd-266">用於相互關聯的處理器: %Interrupt Time 及處理器： 高內容切換在 PAL 中的分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-266">Use in correlation with Processor:  % Interrupt Time and Processor:  High Context Switching analyses in PAL.</span></span> <span data-ttu-id="37abd-267">如需詳細資訊，請參閱特殊權限模式 CPU 分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-267">For more information, refer to Privileged Mode CPU Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-268">處理器： 中斷時間</span><span class="sxs-lookup"><span data-stu-id="37abd-268">Processor: Interrupt Time</span></span>|<span data-ttu-id="37abd-269">"%Interrupt Time 是處理器花費在接收與處理硬體插斷取樣間隔期間的時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-269">“% Interrupt Time” is the time the processor spends receiving and servicing hardware interrupts during sample intervals.</span></span> <span data-ttu-id="37abd-270">這個值是產生插斷，例如系統時鐘、 滑鼠、 磁碟驅動程式、 資料通訊線路、 網路介面卡及其他週邊裝置的裝置活動的間接指示器。</span><span class="sxs-lookup"><span data-stu-id="37abd-270">This value is an indirect indicator of the activity of devices that generate interrupts, such as the system clock, the mouse, disk drivers, data communication lines, network interface cards and other peripheral devices.</span></span> <span data-ttu-id="37abd-271">在已完成工作，或需要注意時，這些裝置通常插斷處理器。</span><span class="sxs-lookup"><span data-stu-id="37abd-271">These devices normally interrupt the processor when they have completed a task or require attention.</span></span> <span data-ttu-id="37abd-272">在插斷期間會暫停執行一般執行緒。</span><span class="sxs-lookup"><span data-stu-id="37abd-272">Normal thread execution is suspended during interrupts.</span></span> <span data-ttu-id="37abd-273">大多數的系統時鐘會插斷處理器每隔 10 毫秒，建立中斷活動的背景。</span><span class="sxs-lookup"><span data-stu-id="37abd-273">Most system clocks interrupt the processor every 10 milliseconds, creating a background of interrupt activity.</span></span> <span data-ttu-id="37abd-274">在此計數器指出可能硬體問題。</span><span class="sxs-lookup"><span data-stu-id="37abd-274">A dramatic increase in this counter indicates potential hardware problems.</span></span> <span data-ttu-id="37abd-275">這項分析會檢查 「 插斷時間百分比 」 大於百分之 30。</span><span class="sxs-lookup"><span data-stu-id="37abd-275">This analysis checks for “% Interrupt Time” greater than 30 percent.</span></span> <span data-ttu-id="37abd-276">如果發生這種情況，請考慮更新此警示的相互關聯的硬體的裝置驅動程式。</span><span class="sxs-lookup"><span data-stu-id="37abd-276">If this occurs, then consider updating devices drivers for hardware that correlates to this alert.</span></span><br /><br /> <span data-ttu-id="37abd-277">參考： 測量在.NET 應用程式效能[http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="37abd-277">Reference: Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>|  
|<span data-ttu-id="37abd-278">處理器： 高內容切換</span><span class="sxs-lookup"><span data-stu-id="37abd-278">Processor:  High Context Switching</span></span>|<span data-ttu-id="37abd-279">當高優先順序的執行緒優先執行較低優先順序的執行緒目前正在執行或高優先權執行緒會封鎖，就會發生內容切換。</span><span class="sxs-lookup"><span data-stu-id="37abd-279">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="37abd-280">多執行緒共用相同的優先權層級，就會發生內容切換的高層級。</span><span class="sxs-lookup"><span data-stu-id="37abd-280">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="37abd-281">這通常表示太多執行緒會在系統上處理器的競爭。</span><span class="sxs-lookup"><span data-stu-id="37abd-281">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="37abd-282">一般而言，內容切換率小於每個處理器每秒 5000 就不值得耽心。</span><span class="sxs-lookup"><span data-stu-id="37abd-282">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="37abd-283">如果內容切換率超過 15,000 每個處理器每秒，就將條件約束。</span><span class="sxs-lookup"><span data-stu-id="37abd-283">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span> <span data-ttu-id="37abd-284">如需詳細資訊，請參閱高內容切換分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-284">For more information, refer to High Context Switching Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-285">Microsof [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 凍結協調流程</span><span class="sxs-lookup"><span data-stu-id="37abd-285">Microsof [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk Dehydrating Orchestrations</span></span>|<span data-ttu-id="37abd-286">當許多長時間執行商務程序在相同的時間執行時，記憶體和效能問題可能會進行。</span><span class="sxs-lookup"><span data-stu-id="37abd-286">When many long-running business processes are running at the same time, memory and performance issues are possible.</span></span> <span data-ttu-id="37abd-287">協調流程引擎透過「凍結」和「解除凍結」協調流程執行個體來解決這些問題。</span><span class="sxs-lookup"><span data-stu-id="37abd-287">The orchestration engine addresses these issues by "dehydrating" and "rehydrating" orchestration instances.</span></span> <span data-ttu-id="37abd-288">凍結是將協調流程狀態序列化到 SQL Server 資料庫中的程序。</span><span class="sxs-lookup"><span data-stu-id="37abd-288">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="37abd-289">解除凍結是此程序的反向： 還原序列化資料庫從協調流程的最後一個執行中狀態。</span><span class="sxs-lookup"><span data-stu-id="37abd-289">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="37abd-290">凍結是藉由減少必須一次在記憶體中產生的協調流程數目，來將系統資源的使用降至最低。</span><span class="sxs-lookup"><span data-stu-id="37abd-290">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="37abd-291">因此，dehyrations 儲存記憶體耗用量，但可執行相當耗費資源的作業。</span><span class="sxs-lookup"><span data-stu-id="37abd-291">Therefore, dehyrations save memory consumption, but are relatively expensive operations to perform.</span></span> <span data-ttu-id="37abd-292">這項分析會檢查 dehydrations 10 倍或更多。</span><span class="sxs-lookup"><span data-stu-id="37abd-292">This analysis checks for dehydrations of 10 or more.</span></span> <span data-ttu-id="37abd-293">如果是這樣，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能記憶體不足 （虛擬或實體），請執行高效能的協調流程數等待在訊息上或凍結設定不正確。</span><span class="sxs-lookup"><span data-stu-id="37abd-293">If so, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] may be running out of memory (either virtual or physical), a high number of orchestrations are waiting on messages, or the dehydration settings are not set properly.</span></span><br /><br /> <span data-ttu-id="37abd-294">參考： 協調流程凍結和解除凍結在[http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="37abd-294">Reference:  Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>|  
|<span data-ttu-id="37abd-295">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高資料庫工作階段</span><span class="sxs-lookup"><span data-stu-id="37abd-295">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High Database Sessions</span></span>|<span data-ttu-id="37abd-296">此計數器有兩個可能的值： normal (0) 或超過閾值 (1)。</span><span class="sxs-lookup"><span data-stu-id="37abd-296">This counter has two possible values: normal (0) or exceeded (1).</span></span> <span data-ttu-id="37abd-297">這項分析會檢查值為 1。</span><span class="sxs-lookup"><span data-stu-id="37abd-297">This analysis checks for a value of 1.</span></span> <span data-ttu-id="37abd-298">如果是這樣，BizTalk 已超過允許的資料庫工作階段數目的臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-298">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="37abd-299">這個值是由 「 每一 CPU 的資料庫連線 」 中的值的 BizTalk 主控件節流設定所控制的。</span><span class="sxs-lookup"><span data-stu-id="37abd-299">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span> <span data-ttu-id="37abd-300">「 資料庫每一 CPU 的連線 」 為並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="37abd-300">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="37abd-301">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器來監視作用中資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-301">You can monitor the number of active Database connections by using the Database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-302">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-302">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="37abd-303">如需詳細資訊，請參閱 BizTalk 高資料庫工作階段分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-303">For more information, refer to BizTalk High Database Sessions Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-304">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高資料庫大小</span><span class="sxs-lookup"><span data-stu-id="37abd-304">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk High Database Size</span></span>|<span data-ttu-id="37abd-305">此計數器將設定為值 1，如果其中一個列出的資料庫臨界值中的訊息計數的條件發生。</span><span class="sxs-lookup"><span data-stu-id="37abd-305">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="37abd-306">根據預設主機訊息資料庫節流閾值中的計數是設定為 50000，將會觸發節流狀況，在下列情況下的值：</span><span class="sxs-lookup"><span data-stu-id="37abd-306">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span><br /><br /> <span data-ttu-id="37abd-307">訊息發佈的工作、 狀態和擱置的佇列訂閱的主控件的主控件執行個體-總數超過 50,000。</span><span class="sxs-lookup"><span data-stu-id="37abd-307">-   The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span><br /><span data-ttu-id="37abd-308">-多工緩衝處理表格或追蹤資料表中的訊息數目超過 500,000 訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-308">-   The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span><br /><br /> <span data-ttu-id="37abd-309">如果發生這種情況，請考慮採取的動作，將會減少在資料庫中的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-309">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="37abd-310">例如，請在 SQL Server 工作[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]正在執行不會發生錯誤，而且使用中的 [群組中樞] 頁面[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台來判斷訊息增多是否因大量擱置的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-310">For example, ensure the SQL Server jobs in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are running without error and use the Group Hub page in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span> <span data-ttu-id="37abd-311">如需詳細資訊，請參閱 BizTalk 高資料庫大小分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-311">For more information, refer to BizTalk High Database Size Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-312">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高內含式訊息計數</span><span class="sxs-lookup"><span data-stu-id="37abd-312">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High In-Process Message Count</span></span>|<span data-ttu-id="37abd-313">這項分析會檢查以判斷是否發生這種節流高內含式訊息計數計數器。</span><span class="sxs-lookup"><span data-stu-id="37abd-313">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="37abd-314">如果是的話，請考慮調整"訊息每一 CPU 的內含式 」 設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-314">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="37abd-315">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-315">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="37abd-316">在停用以每一 CPU 的內含式訊息數目為基礎的節流"訊息每一 CPU 的內含式 」 設定中輸入值為 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-316">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="37abd-317">「 內含式訊息每一 CPU 」 設定的預設值是 1000。</span><span class="sxs-lookup"><span data-stu-id="37abd-317">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="37abd-318">請注意，此值也可能會影響低度延遲的訊息和 （或） BizTalk 資源的效率。</span><span class="sxs-lookup"><span data-stu-id="37abd-318">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span> <span data-ttu-id="37abd-319">如需詳細資訊，請參閱 BizTalk 高內含式訊息計數分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-319">For more information, refer to BizTalk High In-Process Message Count Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-320">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高訊息傳遞速率</span><span class="sxs-lookup"><span data-stu-id="37abd-320">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High Message Delivery Rate</span></span>|<span data-ttu-id="37abd-321">這項分析會檢查 1 高訊息傳遞速率計數器中的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-321">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="37abd-322">高訊息傳遞速率可能因高處理複雜性、 慢速輸出配接器或瞬間的系統資源不足。</span><span class="sxs-lookup"><span data-stu-id="37abd-322">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span> <span data-ttu-id="37abd-323">如需詳細資訊，請參閱 BizTalk 高訊息傳遞速率分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-323">For more information, refer to BizTalk High Message Delivery Rate Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-324">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高訊息發佈速率</span><span class="sxs-lookup"><span data-stu-id="37abd-324">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High Message Publishing Rate</span></span>|<span data-ttu-id="37abd-325">輸入主控件節流，也稱為 「 訊息發佈節流中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，套用至主控件執行個體包含接收配接器或協調流程發佈訊息至 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="37abd-325">Inbound host throttling, also known as message publishing throttling in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], is applied to host instances that contain receive adapters or orchestrations that publish messages to the MessageBox database.</span></span> <span data-ttu-id="37abd-326">這項分析會檢查 1 高訊息發佈速率計數器中的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-326">This analysis checks for a value of 1 in the High Message Publishing Rate counter.</span></span> <span data-ttu-id="37abd-327">如果發生這種情況，然後資料庫無法跟上發佈速率的訊息到 BizTalk MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="37abd-327">If this occurs, then the database cannot keep up with the publishing rate of messages to the BizTalk MessageBox database.</span></span><br /><br /> <span data-ttu-id="37abd-328">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-328">References:</span></span><br /><br /> <span data-ttu-id="37abd-329">-主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-329">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="37abd-330">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在[http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-330">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="37abd-331">-訊息發佈節流設定 對話方塊在[http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span><span class="sxs-lookup"><span data-stu-id="37abd-331">-   Message Publishing Throttling Settings Dialog Box at [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span></span><br /><span data-ttu-id="37abd-332">-什麼是主控件節流？在[http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span><span class="sxs-lookup"><span data-stu-id="37abd-332">-   What is Host Throttling? at [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span></span>|  
|<span data-ttu-id="37abd-333">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高程序記憶體</span><span class="sxs-lookup"><span data-stu-id="37abd-333">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High Process Memory</span></span>|<span data-ttu-id="37abd-334">節流臨界值 設定的 BizTalk 處理序記憶體使用量會是記憶體的與工作集大小和處理序的總可用虛擬記憶體的總和，如果輸入從 1 到 100 的值使用百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-334">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="37abd-335">當指定某個百分比值時，則會以定期間隔重新計算程序記憶體閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-335">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="37abd-336">這項分析會檢查 1 高的處理序記憶體計數器的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-336">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="37abd-337">如需詳細資訊，請參閱 BizTalk 高的處理序記憶體分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-337">For more information, refer to BizTalk High Process Memory Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-338">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高系統記憶體</span><span class="sxs-lookup"><span data-stu-id="37abd-338">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High System Memory</span></span>|<span data-ttu-id="37abd-339">BizTalk 的實體記憶體使用量節流臨界值設定為輸入則是從 1 到 100 相較於可用的實體記憶體的值如果總數量的記憶體耗用量的百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-339">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="37abd-340">如果輸入大於 100 的值，此設定也可以是以 mb 為單位的可用實體記憶體總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-340">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="37abd-341">輸入值為 0 時可停用以實體記憶體使用量為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-341">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="37abd-342">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-342">The default value is 0.</span></span> <span data-ttu-id="37abd-343">如需詳細資訊，請參閱 BizTalk 高系統記憶體分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-343">For more information, refer to BizTalk High System Memory Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-344">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 高執行緒計數</span><span class="sxs-lookup"><span data-stu-id="37abd-344">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk High Thread Count</span></span>|<span data-ttu-id="37abd-345">[每一 CPU 的執行緒] 是在主機處理程序包括使用配接器之執行緒的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-345">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="37abd-346">如果超過此閾值，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會嘗試減少 EPM 執行緒集區和訊息代理程式 」 執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-346">If this threshold is exceeded, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="37abd-347">在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-347">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="37abd-348">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-348">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="37abd-349">執行緒為基礎的節流預設為停用。</span><span class="sxs-lookup"><span data-stu-id="37abd-349">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="37abd-350">如需詳細資訊，請參閱 BizTalk 高執行緒計數分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-350">For more information, refer to BizTalk High Thread Count Analysis in this topic.</span></span>|  
|<span data-ttu-id="37abd-351">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 主控件佇列長度</span><span class="sxs-lookup"><span data-stu-id="37abd-351">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]:  BizTalk Host Queue Length</span></span>|<span data-ttu-id="37abd-352">BizTalk 主控件佇列長度會追蹤特定主控件佇列中的訊息總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-352">The BizTalk Host Queue Length tracks the total number of messages in the particular host queue.</span></span> <span data-ttu-id="37abd-353">您可以使用長度的大小 （也就是 ' BizTalk:MessageBox:HostCounters:Host 佇列 – 長度 '） 來提供深度的正在排在內部，以顯示為個別主機的佇列深度的訊息數目的更詳細的檢視。</span><span class="sxs-lookup"><span data-stu-id="37abd-353">You can use length size (i.e., ‘BizTalk:MessageBox:HostCounters:Host Queue – Length’) to give a more detailed view of the number of messages being queued up internally by showing the queue depth for an individual host.</span></span> <span data-ttu-id="37abd-354">此計數器可以用來判斷特定主機的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-354">This counter can be useful in determining if a specific host is bottlenecked.</span></span> <span data-ttu-id="37abd-355">假設唯一主機使用的是每個傳輸，這可以是很有幫助判斷潛在傳輸瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-355">Assuming unique hosts are used for each transport, this can be helpful in determining potential transport bottlenecks.</span></span> <span data-ttu-id="37abd-356">這項分析會檢查平均佇列長度大於 1。</span><span class="sxs-lookup"><span data-stu-id="37abd-356">This analysis checks for average queue lengths greater than 1.</span></span> <span data-ttu-id="37abd-357">主控件佇列長度是在目標主機的彙總所有佇列的 (工作 Q，狀態 Q 暫停 Q) 的記錄計數加權的佇列長度。</span><span class="sxs-lookup"><span data-stu-id="37abd-357">The Host Queue Length is a weighted Queue length by aggregating the record count of all the Queues (Work Q, State Q, Suspended Q) of the target host.</span></span><br /><br /> <span data-ttu-id="37abd-358">參考： BizTalk Server 2006： 管理在成功的效能實驗室[http://go.microsoft.com/fwlink/?linkid=104152](http://go.microsoft.com/fwlink/?linkid=104152) **附註：**這份技術白皮書也會適用於[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="37abd-358">Reference: BizTalk Server 2006: Managing a Successful Performance Lab at [http://go.microsoft.com/fwlink/?linkid=104152](http://go.microsoft.com/fwlink/?linkid=104152) **Note:**  This white paper is also applicable to [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>|  
|<span data-ttu-id="37abd-359">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk 主控件擱置郵件佇列長度</span><span class="sxs-lookup"><span data-stu-id="37abd-359">Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]: BizTalk Host Suspended Messages Queue Length</span></span>|<span data-ttu-id="37abd-360">此計數器會追蹤特定主控件的擱置的訊息總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-360">This counter tracks the total number of suspended messages for the particular host.</span></span> <span data-ttu-id="37abd-361">擱置的訊息是訊息或協調流程的執行個體，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止處理因錯誤而在系統或訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-361">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="37abd-362">一般來說，因系統錯誤而擱置的執行個體會在系統問題獲得解決後繼續。</span><span class="sxs-lookup"><span data-stu-id="37abd-362">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="37abd-363">通常，因訊息有問題而擱置的執行個體不會繼續執行，而且必須修正訊息本身，並重新提交至[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。</span><span class="sxs-lookup"><span data-stu-id="37abd-363">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span><br /><br /> <span data-ttu-id="37abd-364">擱置的訊息佇列是包含的錯誤或失敗期間發生未處理的工作項目。</span><span class="sxs-lookup"><span data-stu-id="37abd-364">The suspended message queue is a queue that contains work items for which an error or failure was encountered during processing.</span></span> <span data-ttu-id="37abd-365">訊息擱置佇列會儲存訊息直到修正和重新處理或是刪除後為止。</span><span class="sxs-lookup"><span data-stu-id="37abd-365">A suspended queue stores the messages until they can be corrected and reprocessed, or deleted.</span></span> <span data-ttu-id="37abd-366">這項分析會檢查擱置的任何的訊息項目。</span><span class="sxs-lookup"><span data-stu-id="37abd-366">This analysis checks for any occurrence of suspended messages.</span></span> <span data-ttu-id="37abd-367">增加的趨勢可能表示嚴重處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-367">An increasing trend could indicate severe processing errors.</span></span><br /><br /> <span data-ttu-id="37abd-368">參考： BizTalk Server 2004： 監視和疑難排解在[http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="37abd-368">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-369">: BizTalk 閒置協調流程</span><span class="sxs-lookup"><span data-stu-id="37abd-369">:  BizTalk Idle Orchestrations</span></span>|<span data-ttu-id="37abd-370">目前由主控件執行個體裝載而閒置的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="37abd-370">Number of idle orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="37abd-371">此計數器是指不進行進度，但不是可凍結的協調流程。</span><span class="sxs-lookup"><span data-stu-id="37abd-371">This counter refers to orchestrations that are not making progress but are not dehydratable.</span></span> <span data-ttu-id="37abd-372">可能會發生這種情況下，協調流程遭到封鎖時，等待接收，接聽或不可部分完成的交易的延遲時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-372">This situation can occur when the orchestration is blocked, waiting for a receive, listen, or delay in an atomic transaction.</span></span> <span data-ttu-id="37abd-373">如果大量的非可凍結的協調流程會累積，BizTalk 可能用盡記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-373">If a large number of non-dehydratable orchestrations accumulate, then BizTalk may run out of memory.</span></span><br /><br /> <span data-ttu-id="37abd-374">凍結是將協調流程狀態序列化到 SQL Server 資料庫中的程序。</span><span class="sxs-lookup"><span data-stu-id="37abd-374">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="37abd-375">解除凍結是此程序的反向： 還原序列化資料庫從協調流程的最後一個執行中狀態。</span><span class="sxs-lookup"><span data-stu-id="37abd-375">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="37abd-376">凍結是藉由減少必須一次在記憶體中產生的協調流程數目，來將系統資源的使用降至最低。</span><span class="sxs-lookup"><span data-stu-id="37abd-376">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="37abd-377">引擎會儲存狀態以凍結執行個體，並釋出執行個體所需的記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-377">The engine dehydrates the instance by saving the state, and frees up the memory required by the instance.</span></span> <span data-ttu-id="37abd-378">透過凍結休眠的協調流程執行個體，引擎就可以讓大量的長時間執行之商務程序在相同電腦上同時執行。</span><span class="sxs-lookup"><span data-stu-id="37abd-378">By dehydrating dormant orchestration instances, the engine makes it possible for a large number of long-running business processes to run concurrently on the same computer.</span></span> <span data-ttu-id="37abd-379">這項分析會檢查遞增趨勢的一個每小時的閒置協調流程。</span><span class="sxs-lookup"><span data-stu-id="37abd-379">This analysis checks for an increasing trend of one idle orchestration per hour.</span></span><br /><br /> <span data-ttu-id="37abd-380">參考： 協調流程凍結和解除凍結在[http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="37abd-380">Reference: Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-381">： BizTalk 輸入延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-381">:  BizTalk Inbound Latency</span></span>|<span data-ttu-id="37abd-382">平均延遲 （毫秒），傳訊引擎收到文件從配接器之前發佈到 MessageBox 的時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-382">Average latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the MessageBox.</span></span> <span data-ttu-id="37abd-383">降低延遲很重要的 BizTalk 中，某些使用者因此追蹤時間文件花費輸入配接器中很重要。</span><span class="sxs-lookup"><span data-stu-id="37abd-383">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span> <span data-ttu-id="37abd-384">如需詳細資訊，請參閱 BizTalk 輸入延遲分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-384">For more information, refer to BizTalk Inbound Latency Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-385">： BizTalk 訊息傳遞延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-385">:  BizTalk Message Delivery Delay</span></span>|<span data-ttu-id="37abd-386">這是加諸於 （適用於訊息傳遞進行節流處理） 每個訊息傳遞批次的目前延遲 （毫秒） （毫秒）。</span><span class="sxs-lookup"><span data-stu-id="37abd-386">This is the current delay in milliseconds (ms) imposed on each message delivery batch (applicable if the message delivery is being throttled).</span></span> <span data-ttu-id="37abd-387">節流就而言，在發行或處理訊息，根據訊息是傳入或傳出時套用延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-387">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="37abd-388">延遲期間為節流狀況的嚴重性成正比。</span><span class="sxs-lookup"><span data-stu-id="37abd-388">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="37abd-389">較高的嚴重性節流狀況將會起始與較低的嚴重性節流狀況更長的節流期間。</span><span class="sxs-lookup"><span data-stu-id="37abd-389">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="37abd-390">透過狀況變更時的節流機制，這個延遲期間可在特定範圍內上下調整。</span><span class="sxs-lookup"><span data-stu-id="37abd-390">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="37abd-391">目前的延遲期間會公開透過訊息傳遞延遲 （毫秒） 」 和 「 訊息發佈延遲 （毫秒） 效能計數器與 biztalk： 訊息代理程式的效能物件類別相關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-391">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-392">這項分析會檢查訊息傳遞延遲大於 5 秒。</span><span class="sxs-lookup"><span data-stu-id="37abd-392">This analysis checks for a message delivery delay of greater than 5 seconds.</span></span> <span data-ttu-id="37abd-393">由於高負載過重節流，可能表示長訊息傳遞延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-393">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="37abd-394">參考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在[http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-394">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-395">： BizTalk 訊息傳遞節流狀態</span><span class="sxs-lookup"><span data-stu-id="37abd-395">:  BizTalk Message Delivery Throttling State</span></span>|<span data-ttu-id="37abd-396">BizTalk 訊息傳遞節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="37abd-396">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="37abd-397">它是旗標，指出系統是否正在進行節流訊息傳遞 （影響 XLANG 訊息處理及輸出傳輸）。</span><span class="sxs-lookup"><span data-stu-id="37abd-397">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="37abd-398">節流狀況會指示計數器的數值。</span><span class="sxs-lookup"><span data-stu-id="37abd-398">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="37abd-399">如需詳細資訊，請參閱本主題中的 BizTalk 訊息傳遞節流狀態分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-399">For more information, see BizTalk Message Delivery Throttling State Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-400">： BizTalk 訊息發佈延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-400">:  BizTalk Message Publishing Delay</span></span>|<span data-ttu-id="37abd-401">導致節流的訊息發佈的每個符合批次中的延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-401">The delay injected in each qualifying batch for throttling the publishing of messages.</span></span> <span data-ttu-id="37abd-402">節流就而言，在發行或處理訊息，根據訊息是傳入或傳出時套用延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-402">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="37abd-403">延遲期間為節流狀況的嚴重性成正比。</span><span class="sxs-lookup"><span data-stu-id="37abd-403">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="37abd-404">較高的嚴重性節流狀況將會起始與較低的嚴重性節流狀況更長的節流期間。</span><span class="sxs-lookup"><span data-stu-id="37abd-404">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="37abd-405">透過狀況變更時的節流機制，這個延遲期間可在特定範圍內上下調整。</span><span class="sxs-lookup"><span data-stu-id="37abd-405">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="37abd-406">目前的延遲期間會公開透過訊息傳遞延遲 （毫秒） 」 和 「 訊息發佈延遲 （毫秒） 效能計數器與 biztalk： 訊息代理程式的效能物件類別相關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-406">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-407">這項分析會檢查訊息發佈延遲大於 5 秒。</span><span class="sxs-lookup"><span data-stu-id="37abd-407">This analysis checks for a message publishing delay of greater than 5 seconds.</span></span> <span data-ttu-id="37abd-408">由於高負載過重節流，可能表示長訊息傳遞延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-408">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="37abd-409">參考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在[http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-409">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-410">: BizTalk MessageBox 資料庫連線失敗</span><span class="sxs-lookup"><span data-stu-id="37abd-410">:  BizTalk MessageBox Database Connection Failures</span></span>|<span data-ttu-id="37abd-411">此效能計數器是資料庫連線嘗試的主控件執行個體啟動後失敗的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-411">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="37abd-412">如果裝載 BizTalk 資料庫的 SQL Server 服務因故無法使用，資料庫叢集資源從作用中的電腦傳輸到被動電腦。</span><span class="sxs-lookup"><span data-stu-id="37abd-412">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="37abd-413">在容錯移轉過程中，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]服務執行個體發生資料庫連線失敗，並自動重新啟動以重新連接到資料庫。</span><span class="sxs-lookup"><span data-stu-id="37abd-413">During this failover process, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="37abd-414">正在運作的資料庫電腦 (先前為被動電腦) 會在容錯移轉期間獲得資源後，開始處理資料庫連接。</span><span class="sxs-lookup"><span data-stu-id="37abd-414">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span> <span data-ttu-id="37abd-415">如需詳細資訊，請參閱 BizTalk MessageBox 資料庫連線失敗分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-415">For more information, refer to BizTalk MessageBox Database Connection Failures Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-416">： BizTalk 傳訊延遲： 要求的回應延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-416">:  BizTalk Messaging Latency:  Request Response Latency</span></span>|<span data-ttu-id="37abd-417">傳訊引擎從配接器收到要求文件，到回應文件傳回該配接器之間的平均延遲 (毫秒)。</span><span class="sxs-lookup"><span data-stu-id="37abd-417">Average latency in milliseconds from when the Messaging Engine receives a request document from the adapter until the time a response document is given back to the adapter.</span></span> <span data-ttu-id="37abd-418">請參閱顯示 BizTalk 輸入延遲分析中測量延遲是方式，本主題中的圖表。</span><span class="sxs-lookup"><span data-stu-id="37abd-418">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="37abd-419">假設在低延遲的環境，這項分析會檢查要求-回應延遲大於 5 秒。</span><span class="sxs-lookup"><span data-stu-id="37abd-419">Assuming a low latency environment, this analysis checks for a Request-Response Latency greater than 5 seconds.</span></span> <span data-ttu-id="37abd-420">這可能表示輸入配接器和輸出配接器之間處理延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-420">This may indicate a processing delay between the inbound adapter and the outbound adapter.</span></span><br /><br /> <span data-ttu-id="37abd-421">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-421">References:</span></span><br /><br /> <span data-ttu-id="37abd-422">-要求/回應訊息在[http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="37abd-422">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="37abd-423">BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="37abd-423">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-424">： BizTalk 訊息發佈節流狀態</span><span class="sxs-lookup"><span data-stu-id="37abd-424">:  BizTalk Messaging Publishing Throttling State</span></span>|<span data-ttu-id="37abd-425">BizTalk 訊息發佈節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="37abd-425">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="37abd-426">旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸入的傳輸） 的訊息發佈它。</span><span class="sxs-lookup"><span data-stu-id="37abd-426">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).</span></span> <span data-ttu-id="37abd-427">如需詳細資訊，請參閱 BizTalk 訊息發佈節流狀態分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-427">For more information, refer to BizTalk Messaging Publishing Throttling State Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-428">: BizTalk 協調流程 Suspended/second</span><span class="sxs-lookup"><span data-stu-id="37abd-428">:  BizTalk Orchestration Suspended/second</span></span>|<span data-ttu-id="37abd-429">擱置的訊息是訊息或協調流程的執行個體，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止處理因錯誤而在系統或訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-429">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="37abd-430">一般來說，因系統錯誤而擱置的執行個體會在系統問題獲得解決後繼續。</span><span class="sxs-lookup"><span data-stu-id="37abd-430">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="37abd-431">通常，因訊息有問題而擱置的執行個體不會繼續執行，而且必須修正訊息本身，並重新提交至[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。</span><span class="sxs-lookup"><span data-stu-id="37abd-431">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="37abd-432">這項分析會檢查任何擱置的訊息/協調流程。</span><span class="sxs-lookup"><span data-stu-id="37abd-432">This analysis checks for any suspended messages/orchestrations.</span></span><br /><br /> <span data-ttu-id="37abd-433">參考： BizTalk Server 2004： 監視和疑難排解在[http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="37abd-433">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-434">: BizTalk 協調流程 Completed/second</span><span class="sxs-lookup"><span data-stu-id="37abd-434">:  BizTalk Orchestrations Completed/second</span></span>|<span data-ttu-id="37abd-435">這是已完成的 BizTalk 協調流程數秒。</span><span class="sxs-lookup"><span data-stu-id="37abd-435">This is the number of BizTalk orchestrations that have completed per second.</span></span> <span data-ttu-id="37abd-436">這是很好的指標，指出正在處理 BizTalk 多少輸送量。</span><span class="sxs-lookup"><span data-stu-id="37abd-436">This is a good indicator as to how much throughput BizTalk is processing.</span></span> <span data-ttu-id="37abd-437">這項分析會提供僅限統計資料。</span><span class="sxs-lookup"><span data-stu-id="37abd-437">This analysis provides statistics only.</span></span><br /><br /> <span data-ttu-id="37abd-438">參考： BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究</span><span class="sxs-lookup"><span data-stu-id="37abd-438">Reference:  BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006</span></span> <br />[<span data-ttu-id="37abd-439">http://go.microsoft.com/fwlink/?linkid=108774</span><span class="sxs-lookup"><span data-stu-id="37abd-439">http://go.microsoft.com/fwlink/?linkid=108774</span></span>](http://go.microsoft.com/fwlink/?linkid=108774)|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-440">： 捨棄 BizTalk 協調流程</span><span class="sxs-lookup"><span data-stu-id="37abd-440">:  BizTalk Orchestrations Discarded</span></span>|<span data-ttu-id="37abd-441">自從主控件執行個體啟動之後，已從記憶體捨棄的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="37abd-441">Number of orchestration instances discarded from memory since the host instance started.</span></span> <span data-ttu-id="37abd-442">如果引擎無法保存協調流程的狀態，即可予以捨棄。</span><span class="sxs-lookup"><span data-stu-id="37abd-442">An orchestration can be discarded if the engine fails to persist its state.</span></span> <span data-ttu-id="37abd-443">這項分析會檢查有任何已捨棄的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-443">This analysis checks for any discarded messages.</span></span><br /><br /> <span data-ttu-id="37abd-444">參考： BizTalk 核心引擎的部落格</span><span class="sxs-lookup"><span data-stu-id="37abd-444">Reference:  BizTalk Core Engine's WebLog</span></span><br />[<span data-ttu-id="37abd-445">http://go.microsoft.com/fwlink/?linkid=108775</span><span class="sxs-lookup"><span data-stu-id="37abd-445">http://go.microsoft.com/fwlink/?linkid=108775</span></span>](http://go.microsoft.com/fwlink/?linkid=108775)|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-446">: BizTalk 協調流程常駐在記憶體中</span><span class="sxs-lookup"><span data-stu-id="37abd-446">:  BizTalk Orchestrations Resident in Memory</span></span>|<span data-ttu-id="37abd-447">目前由主控件執行個體裝載的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="37abd-447">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="37abd-448">這項分析會檢查遞增趨勢常駐記憶體，且是否超過 50%的記憶體中駐留的協調流程不是可凍結的協調流程中。</span><span class="sxs-lookup"><span data-stu-id="37abd-448">This analysis checks for an increasing trend in orchestrations resident in memory and whether more than 50 percent of the orchestrations resident in memory are not dehydratable.</span></span> <span data-ttu-id="37abd-449">如需詳細資訊，請參閱 BizTalk 協調流程常駐在記憶體分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-449">For more information, refer to BizTalk Orchestrations Resident in Memory Analysis.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-450">: BizTalk 配接器輸出延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-450">:  BizTalk Outbound Adapter Latency</span></span>|<span data-ttu-id="37abd-451">這是平均延遲的秒數從當配接器取得傳訊引擎從配接器傳送的時間之前的文件。</span><span class="sxs-lookup"><span data-stu-id="37abd-451">This is the average latency in seconds from when the adapter gets a document from the messaging engine until the time it is sent by the adapter.</span></span> <span data-ttu-id="37abd-452">請參閱顯示 BizTalk 輸入延遲分析中測量延遲是方式，本主題中的圖表。</span><span class="sxs-lookup"><span data-stu-id="37abd-452">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="37abd-453">假設在低延遲的環境，這項分析會檢查延遲大於 5 秒的輸出配接器中的平均。</span><span class="sxs-lookup"><span data-stu-id="37abd-453">Assuming a low latency environment, this analysis checks for latency in the outbound adapter of greater than 5 seconds on average.</span></span> <span data-ttu-id="37abd-454">這可能表示之傳輸的輸出配接器在此主控件執行個體中的訊息處理延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-454">This may indicate a processing delay in the transport of messages through outbound adapters in this host instance.</span></span> <span data-ttu-id="37abd-455">如果多個輸出配接器存在於此主控件執行個體，請考慮將它們分割到他們自己的主機，來判斷哪些輸出配接器都有高延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-455">If multiple outbound adapters exist in this host instance, then consider separating them into their own hosts to determine which outbound adapter has high latency.</span></span><br /><br /> <span data-ttu-id="37abd-456">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-456">References:</span></span><br /><br /> <span data-ttu-id="37abd-457">-要求/回應訊息在[http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="37abd-457">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="37abd-458">BizTalk Server 2006： 使用 SOAP 配接器在 BizTalk Server 2006 中的擴充性案例研究[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="37abd-458">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span><br /><span data-ttu-id="37abd-459">識別在 BizTalk 層中的瓶頸[http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span><span class="sxs-lookup"><span data-stu-id="37abd-459">-   Identifying Bottlenecks in the BizTalk Tier at [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span></span><br /><span data-ttu-id="37abd-460">BizTalk Server 2004： 效能微調適用於低度延遲訊息在[http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span><span class="sxs-lookup"><span data-stu-id="37abd-460">-   BizTalk Server 2004: Performance Tuning for Low Latency Messaging at [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-461">: BizTalk 暫止訊息數目</span><span class="sxs-lookup"><span data-stu-id="37abd-461">:  BizTalk Pending Messages</span></span>|<span data-ttu-id="37abd-462">接收到 MessageBox 收到尚未認可的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-462">The number of received messages that have not been acknowledged as received to the MessageBox.</span></span> <span data-ttu-id="37abd-463">暫止訊息數目會有已提取到記憶體，並傳遞至 XLANG 協調流程中，但尚未已處理訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-463">Pending messages are messages that have been pulled into memory and delivered to the XLANG orchestration, but have not yet been processed.</span></span> <span data-ttu-id="37abd-464">這種情況下沒有遺失資料。</span><span class="sxs-lookup"><span data-stu-id="37abd-464">This circumstance has nothing to do with data loss.</span></span>  <span data-ttu-id="37abd-465">將訊息傳遞到協調流程是多步驟程序，只是位在資料庫中的多工緩衝處理資料表中的訊息執行個體。</span><span class="sxs-lookup"><span data-stu-id="37abd-465">Delivering a message to an orchestration is a multi-step process and is simply an instance of the message residing in the spool table in the database.</span></span> <span data-ttu-id="37abd-466">這些暫止訊息計數為內含式訊息。因此，需要大量的記憶體中可能會導致記憶體節流系統上。</span><span class="sxs-lookup"><span data-stu-id="37abd-466">These pending messages count as in-process messages; therefore, having a large number of them in memory could cause memory throttling on the system.</span></span> <span data-ttu-id="37abd-467">調整 [內部訊息佇列大小] 設定可以協助控制的暫止訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-467">Adjusting the Internal Message Queue Size setting could help with controlling the number of pending messages.</span></span> <span data-ttu-id="37abd-468">每個 CPU 的內含式訊息設定將會影響當節流會叫用時就會發生大量的暫止訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-468">The In-Process Messages Per CPU setting has an impact on when throttling will invoke when a high number of pending messages occurs.</span></span> <span data-ttu-id="37abd-469">在 BizTalk 管理主控台的主機內容中找到這些設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-469">These setting are found in the Host properties in the BizTalk Administration Console.</span></span> <span data-ttu-id="37abd-470">這項分析會檢查只有此計數器會顯示統計資料。</span><span class="sxs-lookup"><span data-stu-id="37abd-470">This analysis checks only shows statistics for this counter.</span></span><br /><br /> <span data-ttu-id="37abd-471">參考： 在協調流程引擎的效能計數器[http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span><span class="sxs-lookup"><span data-stu-id="37abd-471">Reference: Orchestration Engine Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-472">: BizTalk 持續點/秒</span><span class="sxs-lookup"><span data-stu-id="37abd-472">:  BizTalk Persistence Points/second</span></span>|<span data-ttu-id="37abd-473">平均每秒保存的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="37abd-473">Average number of orchestration instances persisted per second.</span></span> <span data-ttu-id="37abd-474">協調流程引擎會在不同點儲存執行中協調流程執行個體的狀態。</span><span class="sxs-lookup"><span data-stu-id="37abd-474">The orchestration engine saves the state of a running orchestration instance at various points.</span></span> <span data-ttu-id="37abd-475">如果需要解除凍結協調流程執行個體、 從控制的關閉、 啟動或從非預期的關機復原，它會從上次保存點執行協調流程執行個體。</span><span class="sxs-lookup"><span data-stu-id="37abd-475">If it needs to rehydrate the orchestration instance, start up from a controlled shutdown, or recover from an unexpected shutdown, it will run the orchestration instance from the last persistence point.</span></span> <span data-ttu-id="37abd-476">以保存協調流程執行個體，所有物件直接或間接參考至您的協調流程的執行個體 （像是透過其他物件） 必須是可序列化。</span><span class="sxs-lookup"><span data-stu-id="37abd-476">In order to persist an orchestration instance, all object instances that your orchestration refers to directly or indirectly (as through other objects) must be serializable.</span></span> <span data-ttu-id="37abd-477">為訊息保存頻率 （資料需要保存的時間的數字） 增加，整體效能會降低。</span><span class="sxs-lookup"><span data-stu-id="37abd-477">As message-persistence frequency (the number of times that data needs to be persisted) increases, overall performance decreases.</span></span> <span data-ttu-id="37abd-478">作用中，每個持續點是來回存取資料庫，因此盡可能減少持續點的頻率避免或合併持續點。</span><span class="sxs-lookup"><span data-stu-id="37abd-478">In effect, each persistence point is a round trip to the database, so whenever possible reduce the frequency of persistence points by avoiding or consolidating persistence points.</span></span> <span data-ttu-id="37abd-479">請參閱下方有關持續點發生時的參考。</span><span class="sxs-lookup"><span data-stu-id="37abd-479">See the references below for more information regarding when persistence points occur.</span></span> <span data-ttu-id="37abd-480">這項分析會檢查有 10 個以上的持續點，每秒平均。</span><span class="sxs-lookup"><span data-stu-id="37abd-480">This analysis checks for more than 10 persistence points per second on average.</span></span> <span data-ttu-id="37abd-481">這是一般的起始點。</span><span class="sxs-lookup"><span data-stu-id="37abd-481">This is a general starting point.</span></span><br /><br /> <span data-ttu-id="37abd-482">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-482">References:</span></span><br /><br /> <span data-ttu-id="37abd-483">-在協調流程中的持續性[http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span><span class="sxs-lookup"><span data-stu-id="37abd-483">-   Persistence in Orchestrations at [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span></span><br /><span data-ttu-id="37abd-484">持續性與協調流程引擎在[http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span><span class="sxs-lookup"><span data-stu-id="37abd-484">-   Persistence and the Orchestration Engine at [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-485">： BizTalk 私用位元組</span><span class="sxs-lookup"><span data-stu-id="37abd-485">:  BizTalk Private Bytes</span></span>|<span data-ttu-id="37abd-486">這是主控件執行個體，其相當於"\Process （*） \Private 位元組 」 效能計數器的配置私用記憶體 mb。</span><span class="sxs-lookup"><span data-stu-id="37abd-486">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="37abd-487">這項分析會判斷是否任何主控件執行個體正在耗用龐大的系統記憶體和主控件執行個體是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="37abd-487">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="37abd-488">本主題，如需詳細資訊，請參閱 BizTalk 私用位元組分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-488">Refer to BizTalk Private Bytes Analysis in this topic for more information.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-489">： BizTalk 多工緩衝處理表格大小</span><span class="sxs-lookup"><span data-stu-id="37abd-489">:  BizTalk Spool Table Size</span></span>|<span data-ttu-id="37abd-490">MessageBox 多工緩衝處理表格包含系統中的每個訊息的記錄 (作用中或等候 「 記憶體回收 」)。</span><span class="sxs-lookup"><span data-stu-id="37abd-490">The MessageBox spool table contains a record for each message in the system (active or waiting to be "garbage collected").</span></span> <span data-ttu-id="37abd-491">監視此資料表中的資料列數目和增加系統負載提供簡單的方法來尋找最大持續輸送量時，每秒接收的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-491">Monitoring the number of rows in this table and the number of messages received per second while increasing system load provides an easy way to find the maximum sustainable throughput.</span></span> <span data-ttu-id="37abd-492">只要增加輸入的負載可能是 1） 多工緩衝處理資料表會無止盡成長或 2） 的每個第二個富饒、 何者較早，和也就是您的最大持續輸送量收到的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-492">Simply increase the input load until either 1) the spool table starts to grow indefinitely or 2) the number of messages received per second plateaus, whichever comes first, and that is your maximum sustainable throughput.</span></span> <span data-ttu-id="37abd-493">總而言之，不論其他指標，此量值可讓您快速輕鬆的方式，來評估您的系統正在既是否。</span><span class="sxs-lookup"><span data-stu-id="37abd-493">In summary, regardless of other indicators, this measure will give you a quick and easy way to assess whether your system is being overdriven or not.</span></span> <span data-ttu-id="37abd-494">當 BizTalk 多工緩衝處理表格大小增加的趨勢時，然後節流因為不平衡的訊息傳遞速率 （輸入的速率超過輸出速率） 或可能是由於資料庫大小而進行節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-494">When the BizTalk spool tables size is on an increasing trend, then throttling due to imbalanced message delivery rate (input rate exceeds output rate) or throttling due to Database size may occur.</span></span> <span data-ttu-id="37abd-495">這項分析會檢查在 BizTalk 多工緩衝處理表格大小增加的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-495">This analysis checks for an increasing trend in the BizTalk Spool Table Size.</span></span><br /><br /> <span data-ttu-id="37abd-496">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-496">References:</span></span><br /><br /> <span data-ttu-id="37abd-497">-了解 BizTalk Server 2004 SP1 輸送量和容量在[http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span><span class="sxs-lookup"><span data-stu-id="37abd-497">-   Understanding BizTalk Server 2004 SP1 Throughput and Capacity at [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span></span><br /><span data-ttu-id="37abd-498">-持續性負載測試在[http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span><span class="sxs-lookup"><span data-stu-id="37abd-498">-   Sustainable Load Test at [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span></span><br /><span data-ttu-id="37abd-499">-時的建議測試引擎效能[http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span><span class="sxs-lookup"><span data-stu-id="37abd-499">-   Recommendations When Testing Engine Performance at [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-500">: BizTalk 追蹤資料大小</span><span class="sxs-lookup"><span data-stu-id="37abd-500">:  BizTalk Tracking Data Size</span></span>|<span data-ttu-id="37abd-501">當 BizTalk Server 處理您系統上的多資料時，BizTalk 追蹤資料庫 (BizTalkDTADb) 會繼續成長的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-501">As BizTalk Server processes more and more data on your system, the BizTalk Tracking database (BizTalkDTADb) continues to grow in size.</span></span> <span data-ttu-id="37abd-502">若未發現此成長現象將會降低系統效能，並且可能會在 Tracking Data Delivery Service (TDDS) 中產生錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-502">Unchecked growth decreases system performance and may generate errors in the Tracking Data Delivery Service (TDDS).</span></span> <span data-ttu-id="37abd-503">除了一般追蹤資料以外，追蹤的訊息也會累積在 MessageBox 資料庫，導致磁碟效能變差。</span><span class="sxs-lookup"><span data-stu-id="37abd-503">In addition to general tracking data, tracked messages can also accumulate in the MessageBox database, causing poor disk performance.</span></span> <span data-ttu-id="37abd-504">這項分析會檢查遞增趨勢的多個 5 MB 的每小時追蹤中的資料大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-504">This analysis checks for an increasing trend of more than 5 MB’s per hour in the tracking data size.</span></span><br /><br /> <span data-ttu-id="37abd-505">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-505">Reference:</span></span><br /><br /> <span data-ttu-id="37abd-506">封存和清除 BizTalk 追蹤資料庫在[http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span><span class="sxs-lookup"><span data-stu-id="37abd-506">Archiving and Purging the BizTalk Tracking Database at  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-507">: BizTalk 已中止的交易式範圍</span><span class="sxs-lookup"><span data-stu-id="37abd-507">:  BizTalk Transactional Scopes Aborted</span></span>|<span data-ttu-id="37abd-508">這是長時間執行或不可部分完成範圍自從主控件執行個體啟動之後已中止的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-508">This is the number of long-running or atomic scopes that have been aborted since the host instance started.</span></span> <span data-ttu-id="37abd-509">交易式範圍中止，則協調流程內的交易範圍內發生的失敗。</span><span class="sxs-lookup"><span data-stu-id="37abd-509">A transactional scope abort is a failure that occurs in a transaction scope within an orchestration.</span></span> <span data-ttu-id="37abd-510">請務必了解的範圍已順利完成，但是然後才可以復原，因為周圍的範圍決定 （因為在處理時稍後可能會發生的失敗） 而中止時，才叫用範圍的補償處理常式。</span><span class="sxs-lookup"><span data-stu-id="37abd-510">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="37abd-511">此外，「 自動 」 復原的狀態就會發生交易中止時。</span><span class="sxs-lookup"><span data-stu-id="37abd-511">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="37abd-512">您可以達到這個結果，以程式設計方式透過例外狀況和補償處理常式。</span><span class="sxs-lookup"><span data-stu-id="37abd-512">You can achieve this outcome programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="37abd-513">交易式範圍中止不應該通常發生在實際執行環境。因此，這項分析會檢查有任何已中止的交易式範圍的項目。</span><span class="sxs-lookup"><span data-stu-id="37abd-513">Transactional scope aborts should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="37abd-514">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-514">Reference:</span></span><br /><br /> <span data-ttu-id="37abd-515">在 BizTalk Server 2004 整個交易[http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="37abd-515">Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-516">： BizTalk 補償的交易式範圍</span><span class="sxs-lookup"><span data-stu-id="37abd-516">:  BizTalk Transactional Scopes Compensated</span></span>|<span data-ttu-id="37abd-517">補償可以視為邏輯工作，已成功提交回應某個錯誤狀況中復原。</span><span class="sxs-lookup"><span data-stu-id="37abd-517">Compensation can be thought of as a logical undo of the work that has been successfully committed in response to some error condition.</span></span> <span data-ttu-id="37abd-518">請務必了解的範圍已順利完成，但是然後才可以復原，因為周圍的範圍決定 （因為在處理時稍後可能會發生的失敗） 而中止時，才叫用範圍的補償處理常式。</span><span class="sxs-lookup"><span data-stu-id="37abd-518">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="37abd-519">此外，「 自動 」 復原的狀態就會發生交易中止時。</span><span class="sxs-lookup"><span data-stu-id="37abd-519">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="37abd-520">您可以透過例外狀況和補償處理常式，以程式設計方式來達成這點。</span><span class="sxs-lookup"><span data-stu-id="37abd-520">You can achieve this programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="37abd-521">交易式範圍的補償不應該通常發生在實際執行環境。因此，這項分析會檢查有任何已中止的交易式範圍的項目。</span><span class="sxs-lookup"><span data-stu-id="37abd-521">Transactional scope compensations should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="37abd-522">參考： 在 BizTalk Server 2004 整個交易[http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="37abd-522">Reference: Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-523">： BizTalk 虛擬位元組</span><span class="sxs-lookup"><span data-stu-id="37abd-523">:  BizTalk Virtual Bytes</span></span>|<span data-ttu-id="37abd-524">這是保留給主控件執行個體的虛擬記憶體 （mb）。</span><span class="sxs-lookup"><span data-stu-id="37abd-524">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="37abd-525">這項分析會決定是否任何主控件執行個體正在耗用大量系統的記憶體，以及是否在經過一段時間的記憶體耗用量增加主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="37abd-525">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="37abd-526">如需詳細資訊，請參閱 BizTalk 虛擬位元組分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-526">For more information, refer to BizTalk Virtual Bytes Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-527">： BizTalk 訊息代理程式資料庫工作階段節流</span><span class="sxs-lookup"><span data-stu-id="37abd-527">:  BizTalk Message Agent Database Session Throttling</span></span>|<span data-ttu-id="37abd-528">這是到 MessageBox，相較於其各自的 BizTalk 節流設定的開放式資料庫連接的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-528">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="37abd-529">「 資料庫每一 CPU 的連線 」 為並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="37abd-529">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="37abd-530">如需詳細資訊，請參閱 BizTalk 訊息代理程式資料庫工作階段節流分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-530">For more information, refer to BizTalk Message Agent Database Session Throttling Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-531">： BizTalk 訊息代理程式的資料庫工作階段節流處理臨界值</span><span class="sxs-lookup"><span data-stu-id="37abd-531">:  BizTalk Message Agent Database Session Throttling Threshold</span></span>|<span data-ttu-id="37abd-532">這是到 MessageBox 的開放式資料庫連接數目的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-532">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="37abd-533">「 資料庫每一 CPU 的連線 」 為並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="37abd-533">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="37abd-534">如需詳細資訊，請參閱 BizTalk 訊息代理程式資料庫工作階段節流閾值分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-534">For more information, refer to BizTalk Message Agent Database Session Throttling Threshold Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-535">： BizTalk 訊息代理程式內含式訊息計數節流</span><span class="sxs-lookup"><span data-stu-id="37abd-535">:  BizTalk Message Agent In-process Message Count Throttling</span></span>|<span data-ttu-id="37abd-536">這是並行服務類別正在處理的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-536">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="37abd-537">「 內含式訊息每一 CPU 」 中的設定主控件節流設定是傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未處理的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="37abd-537">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="37abd-538">如需詳細資訊，請參閱本主題中 BizTalk 訊息代理程式內含式訊息計數節流分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-538">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-539">： BizTalk 訊息代理程式內含式訊息計數節流處理臨界值</span><span class="sxs-lookup"><span data-stu-id="37abd-539">:  BizTalk Message Agent In-process Message Count Throttling Threshold</span></span>|<span data-ttu-id="37abd-540">這是目前的服務類別正在處理的並行訊息數目的閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-540">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="37abd-541">「 內含式訊息每一 CPU 」 中的設定主控件節流設定是傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未處理的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="37abd-541">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="37abd-542">如需詳細資訊，請參閱 BizTalk 訊息代理程式內含式訊息計數節流閾值分析本主題中。</span><span class="sxs-lookup"><span data-stu-id="37abd-542">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Threshold Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-543">： BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流設定</span><span class="sxs-lookup"><span data-stu-id="37abd-543">:  BizTalk Message Agent Process Memory Usage (MB) Throttling</span></span>|<span data-ttu-id="37abd-544">這是目前的處理序 (MB) 的記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="37abd-544">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="37abd-545">BizTalk 處理序記憶體節流設定可能要發行批次具有並不容易學習的記憶體需求，或是太多的執行緒正在處理訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-545">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="37abd-546">如需詳細資訊，請參閱本主題中的 BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-546">For more information, refer to BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-547">： BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流處理臨界值</span><span class="sxs-lookup"><span data-stu-id="37abd-547">:  BizTalk Message Agent Process Memory Usage (MB) Throttling Threshold</span></span>|<span data-ttu-id="37abd-548">這是目前的處理序 (MB) 的記憶體使用量的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-548">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="37abd-549">實際至這個處理序記憶體耗用量模式，其可用的記憶體數量而定，可能會以動態方式調整臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-549">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="37abd-550">BizTalk 處理序記憶體節流設定可能要發行批次具有並不容易學習的記憶體需求，或是太多的執行緒正在處理訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-550">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="37abd-551">如需詳細資訊，請參閱 BizTalk 訊息代理程式處理序記憶體使用量 (MB) 本主題中的節流閾值分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-551">For more information, refer to BizTalk Message Agent Process memory usage (MB) Throttling Threshold Analysis in this topic.</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-552">： BizTalk 訊息代理程式的執行緒計數節流</span><span class="sxs-lookup"><span data-stu-id="37abd-552">:  BizTalk Message Agent Thread Count Throttling</span></span>|<span data-ttu-id="37abd-553">BizTalk 處理序中執行緒的總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-553">The total number of threads in the BizTalk process.</span></span> <span data-ttu-id="37abd-554">[每一 CPU 的執行緒] 是在主機處理程序包括使用配接器之執行緒的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-554">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="37abd-555">若超過此閾值，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-555">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="37abd-556">在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-556">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="37abd-557">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-557">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="37abd-558">執行緒為基礎的節流預設為停用。</span><span class="sxs-lookup"><span data-stu-id="37abd-558">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="37abd-559">這項分析會檢查 BizTalk 執行緒計數是否大於 80%的指出節流狀況有可能節流臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-559">This analysis checks whether the BizTalk Thread count is greater than 80 percent of the throttling threshold value indicating a throttling condition is likely.</span></span><br /><br /> <span data-ttu-id="37abd-560">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-560">References:</span></span><br /><br /> <span data-ttu-id="37abd-561">-主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-561">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="37abd-562">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在[http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-562">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="37abd-563">-如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-563">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="37abd-564">-影響配接器的效能設定參數[http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="37abd-564">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="37abd-565">執行緒，資料庫工作階段，並在節流[http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="37abd-565">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>|  
|[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="37abd-566">： BizTalk 訊息代理程式的執行緒計數節流處理臨界值</span><span class="sxs-lookup"><span data-stu-id="37abd-566">:  BizTalk Message Agent Thread Count Throttling Threshold</span></span>|<span data-ttu-id="37abd-567">這是目前的處理序中的執行緒總數閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-567">This is the current threshold for the total number of threads in the process.</span></span> <span data-ttu-id="37abd-568">[每一 CPU 的執行緒] 是在主機處理程序包括使用配接器之執行緒的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-568">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="37abd-569">若超過此閾值，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-569">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="37abd-570">在高負載可能會導致建立大量執行緒的案例中應該啟用執行緒為基礎的節流設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-570">Thread-based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="37abd-571">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-571">This parameter affects both inbound and outbound throttling.</span></span><br /><br /> <span data-ttu-id="37abd-572">這項分析會檢查此節流的設定是否已設為非預設值。</span><span class="sxs-lookup"><span data-stu-id="37abd-572">This analysis checks whether this throttling setting is set to a non-default value.</span></span> <span data-ttu-id="37abd-573">執行緒為基礎的節流預設為停用。</span><span class="sxs-lookup"><span data-stu-id="37abd-573">Thread based throttling is disabled by default.</span></span><br /><br /> <span data-ttu-id="37abd-574">參考：</span><span class="sxs-lookup"><span data-stu-id="37abd-574">References:</span></span><br /><br /> <span data-ttu-id="37abd-575">-主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-575">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="37abd-576">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實作主控件節流在[http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-576">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="37abd-577">-如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-577">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="37abd-578">-影響配接器的效能設定參數[http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="37abd-578">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="37abd-579">執行緒，資料庫工作階段，並在節流[http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="37abd-579">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>|  
  
## <a name="logicalphysical-disk-readwrite-latency-analysis"></a><span data-ttu-id="37abd-580">邏輯/實體磁碟讀取/寫入延遲分析</span><span class="sxs-lookup"><span data-stu-id="37abd-580">Logical/Physical Disk Read/Write Latency Analysis</span></span>  
 <span data-ttu-id="37abd-581">Windows 偵測到磁碟的效能瓶頸最可靠的方式是藉由測量其回應時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-581">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="37abd-582">如果回應時間大於.025 （25 毫秒為單位），也就是保守的臨界值，然後值得注意的速度並影響使用者的效能問題可能會發生。</span><span class="sxs-lookup"><span data-stu-id="37abd-582">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span>  
  
 <span data-ttu-id="37abd-583">不佳的磁碟延遲的常見原因是磁碟分散程度，能快取、 使用量飽和 SAN，並在磁碟上的負載過大。</span><span class="sxs-lookup"><span data-stu-id="37abd-583">Common causes of poor disk latency are disk fragmentation, performance cache, an over saturated SAN, and too much load on the disk.</span></span> <span data-ttu-id="37abd-584">使用 SPA 工具，找出的最上層檔案和使用磁碟的程序。</span><span class="sxs-lookup"><span data-stu-id="37abd-584">Use the SPA tool to help identify the top files and processes using the disk.</span></span> <span data-ttu-id="37abd-585">同時檢查 」 程序 IO Data Operations/sec"和"處理序 IO 其他 Operations/sec"，了解哪些處理程序會使用最大磁碟我 / O 的</span><span class="sxs-lookup"><span data-stu-id="37abd-585">Also check the “Process IO Data Operations/sec” and “Process IO Other Operations/sec” to see which processes are consuming the most disk I/O’s.</span></span> <span data-ttu-id="37abd-586">請注意，效能監視器計數器無法指定哪些檔案相關。</span><span class="sxs-lookup"><span data-stu-id="37abd-586">Keep in mind that performance monitor counters are unable to specify which files are involved.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-587">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-587">References</span></span>  
  
-   <span data-ttu-id="37abd-588">繫結磁碟問題出 ruling [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="37abd-588">Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>  
  
-   <span data-ttu-id="37abd-589">如何識別使用 Microsoft 伺服器效能警告器 (SPA) 工具，在磁碟效能瓶頸[http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span><span class="sxs-lookup"><span data-stu-id="37abd-589">How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span></span>  
  
-   <span data-ttu-id="37abd-590">在 Microsoft 服務效能建議程式 (SPA) 下載詳細資料： [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span><span class="sxs-lookup"><span data-stu-id="37abd-590">Download Details for Microsoft Service Performance Advisor (SPA) at: [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span></span>  
  
## <a name="logical-disk-transferssec"></a><span data-ttu-id="37abd-591">Logical Disk Transfers/sec</span><span class="sxs-lookup"><span data-stu-id="37abd-591">Logical Disk Transfers/sec</span></span>  
 <span data-ttu-id="37abd-592">「 磁碟 Transfers/sec"是讀取的速率和寫入磁碟上的作業。</span><span class="sxs-lookup"><span data-stu-id="37abd-592">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="37abd-593">由於磁碟轉移操作並不直接的相互關聯的磁碟我 / O 的它們告訴我們多少磁碟作業正在進行。</span><span class="sxs-lookup"><span data-stu-id="37abd-593">While disk transfers are not a direct correlation to disk I/O's, they do tell us how many disk operations are occurring.</span></span> <span data-ttu-id="37abd-594">如果您平均循序我 / O 的隨機和我 / O 的則您最後產生約 80 我 / O 的每秒做為一般的經驗法則。</span><span class="sxs-lookup"><span data-stu-id="37abd-594">If you average out sequential I/O’s and random I/O's, then you end up with about 80 I/O's per second as a general rule of thumb.</span></span> <span data-ttu-id="37abd-595">因此，我們應該預期 SAN 磁碟機執行我超過 80/O 的每個底下的第二個 when 載入。</span><span class="sxs-lookup"><span data-stu-id="37abd-595">Therefore, we should expect a SAN drive to perform more than 80 I/O's per second when under load.</span></span> <span data-ttu-id="37abd-596">這項分析檢查以查看是否有任何的邏輯磁碟的臨界值會顯示不佳的回應時間 （大於 25 毫秒 I/O 作業的回應時間）。</span><span class="sxs-lookup"><span data-stu-id="37abd-596">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="37abd-597">如果為 true，我們應該預期會等於或高於 80 每秒磁碟轉移操作。</span><span class="sxs-lookup"><span data-stu-id="37abd-597">If this is true, then we should expect the disk transfers per second to be at or above 80.</span></span> <span data-ttu-id="37abd-598">如果沒有，則需要調查磁碟架構。</span><span class="sxs-lookup"><span data-stu-id="37abd-598">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="37abd-599">不佳的磁碟 I/O 的最常見原因是多載 SAN – 這表示的條件的多個 LUN 使用小型的實體磁碟陣列上的邏輯單元編號 (LUN)。</span><span class="sxs-lookup"><span data-stu-id="37abd-599">The most common cause of poor disk I/O is logical unit number (LUN) overloading on the SAN – meaning the condition where more than one LUN is using the small physical disk array.</span></span>  
  
### <a name="reference"></a><span data-ttu-id="37abd-600">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-600">Reference</span></span>  
 <span data-ttu-id="37abd-601">NT 伺服器和磁碟子系統效能[http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="37abd-601">NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>  
  
## <a name="available-memory-analysis"></a><span data-ttu-id="37abd-602">可用記憶體分析</span><span class="sxs-lookup"><span data-stu-id="37abd-602">Available Memory Analysis</span></span>  
 <span data-ttu-id="37abd-603">"Available Mbytes 」 是以 mb 為單位的電腦上執行的處理序可用的實體記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="37abd-603">“Available Mbytes” is the amount of physical memory available to processes running on the computer, in megabytes.</span></span> <span data-ttu-id="37abd-604">虛擬記憶體管理員持續調整用於維護最小作業系統和處理序的可用位元組數目的實體記憶體中和磁碟上的空間。</span><span class="sxs-lookup"><span data-stu-id="37abd-604">The Virtual Memory Manager continually adjusts the space used in physical memory and on disk to maintain a minimum number of available bytes for the operating system and processes.</span></span> <span data-ttu-id="37abd-605">當可用的位元組是充足，虛擬記憶體管理員可讓處理程序的工作集成長時，或將它們置於穩定藉由移除舊的頁面加入每一個新頁面。</span><span class="sxs-lookup"><span data-stu-id="37abd-605">When available bytes are plentiful, the Virtual Memory Manager lets the working sets of processes grow, or keeps them stable by removing an old page for each new page added.</span></span> <span data-ttu-id="37abd-606">可用的位元組數時，虛擬記憶體管理員必須修剪處理程序來維護所需的最小工作的集。</span><span class="sxs-lookup"><span data-stu-id="37abd-606">When available bytes are few, the Virtual Memory Manager must trim the working sets of processes to maintain the minimum required.</span></span>  
  
 <span data-ttu-id="37abd-607">這項分析會檢查，看看是否低 – 警告位於可用的 10%的總可用記憶體和 5%的可用的重大。</span><span class="sxs-lookup"><span data-stu-id="37abd-607">This analysis checks to see whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="37abd-608">遞減趨勢 10 MB 的每小時偵測到，指出潛在的即將進行的記憶體不足時，也會提出警示警告。</span><span class="sxs-lookup"><span data-stu-id="37abd-608">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, indicating a potential upcoming memory condition.</span></span> <span data-ttu-id="37abd-609">實體記憶體不足可能會造成更高特殊權限的模式 CPU 和系統的延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-609">Low physical memory can cause increased privileged mode CPU and system delays.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-610">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-610">References</span></span>  
  
-   <span data-ttu-id="37abd-611">偵測記憶體瓶頸在[http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="37abd-611">Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>  
  
-   <span data-ttu-id="37abd-612">記憶體繫結問題出 ruling [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="37abd-612">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  
  
## <a name="memory-leak-detection-analysis"></a><span data-ttu-id="37abd-613">記憶體流失偵測分析</span><span class="sxs-lookup"><span data-stu-id="37abd-613">Memory Leak Detection Analysis</span></span>  
 <span data-ttu-id="37abd-614">這項分析會判斷是否的任何程序正在耗用大量系統的記憶體和處理程序是否在經過一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="37abd-614">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="37abd-615">處理序耗用的記憶體也沒關係，只要在處理序傳回回系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-615">A process consuming large portions of memory is okay as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="37abd-616">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-616">Look for increasing trends in the chart.</span></span> <span data-ttu-id="37abd-617">遞增趨勢上很長一段時間可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="37abd-617">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="37abd-618">私用位元組是目前的大小，以位元組為單位，此處理序已配置的記憶體不能與其他處理序共用。</span><span class="sxs-lookup"><span data-stu-id="37abd-618">Private Bytes is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="37abd-619">這項分析會檢查 10 MB 的每小時和 5 MB 的每小時增加的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-619">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="37abd-620">您可以使用這項分析中可用的記憶體分析相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-620">Use this analysis in correlation with the Available Memory analysis.</span></span>  
  
 <span data-ttu-id="37abd-621">此外，請記住，啟動新的程序一開始會顯示為記憶體流失時，它只是正常的啟動行為。</span><span class="sxs-lookup"><span data-stu-id="37abd-621">Also, keep in mind that newly started processes will initially appear as a memory leak when it is simply normal startup behavior.</span></span> <span data-ttu-id="37abd-622">處理序耗用的記憶體會繼續與一段很長一段時間不釋放記憶體時發生記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="37abd-622">A memory leak occurs when a process continues to consume memory and does not release memory over a long period of time.</span></span>  
  
 <span data-ttu-id="37abd-623">如果您懷疑記憶體流失的狀況，再安裝，並使用偵錯診斷工具。</span><span class="sxs-lookup"><span data-stu-id="37abd-623">If you suspect a memory leak condition, then install and use the Debug Diag tool.</span></span> <span data-ttu-id="37abd-624">如需有關偵錯診斷工具的詳細資訊，請參閱 < 參考一節。</span><span class="sxs-lookup"><span data-stu-id="37abd-624">For more information on the Debug Diag Tool, see the references section.</span></span>  
  
### <a name="reference"></a><span data-ttu-id="37abd-625">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-625">Reference</span></span>  
 <span data-ttu-id="37abd-626">偵錯診斷工具 v1.1 在[http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="37abd-626">Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>  
  
## <a name="memory-pagessec-analysis"></a><span data-ttu-id="37abd-627">記憶體每秒頁面分析</span><span class="sxs-lookup"><span data-stu-id="37abd-627">Memory Pages/sec Analysis</span></span>  
 <span data-ttu-id="37abd-628">這項分析會檢查，看看是否高"Pages/sec"。</span><span class="sxs-lookup"><span data-stu-id="37abd-628">This analysis checks to see whether the “Pages/sec” is high.</span></span> <span data-ttu-id="37abd-629">如果高，然後系統可能記憶體不足嘗試將頁面上的記憶體到磁碟。</span><span class="sxs-lookup"><span data-stu-id="37abd-629">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="37abd-630">「 頁/sec"是在讀取或寫入為解決硬體分頁錯誤而對磁碟頁面的速率。</span><span class="sxs-lookup"><span data-stu-id="37abd-630">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="37abd-631">這個計數器是導致整個系統延遲的錯誤種類的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="37abd-631">This counter is a primary indicator of the kinds of faults that cause system-wide delays.</span></span>  <span data-ttu-id="37abd-632">它是 「 Memory\Pages Input/sec"和"Memory\Pages Output/sec"的總和。</span><span class="sxs-lookup"><span data-stu-id="37abd-632">It is the sum of “Memory\Pages Input/sec” and “Memory\Pages Output/sec”.</span></span> <span data-ttu-id="37abd-633">它被計算頁數，因此可以與其他分頁數，例如"Memory\Page Faults/sec"。</span><span class="sxs-lookup"><span data-stu-id="37abd-633">It is counted in numbers of pages, so it can be compared to other counts of pages, such as “Memory\Page Faults/sec”.</span></span>  
  
 <span data-ttu-id="37abd-634">此計數器一律應少於 1000。</span><span class="sxs-lookup"><span data-stu-id="37abd-634">This counter should always be below 1,000.</span></span> <span data-ttu-id="37abd-635">這項分析會檢查超過 1,000 個的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-635">This analysis checks for values above 1,000.</span></span> <span data-ttu-id="37abd-636">使用這項分析中可用的記憶體分析和記憶體流失偵測分析與相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-636">Use this analysis in correlation with Available Memory Analysis and Memory Leak Detection analysis.</span></span> <span data-ttu-id="37abd-637">如果所有的分析在同一時間中擲回警示，這可能表示系統用完記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-637">If all analyses are throwing alerts at the same time, then this may indicate the system is running out of memory.</span></span> <span data-ttu-id="37abd-638">請遵循本主題中的其他資訊有關記憶體流失偵測分析中所述的分析步驟。</span><span class="sxs-lookup"><span data-stu-id="37abd-638">Follow analysis steps mentioned in Additional Information Regarding Memory Leak Detection analysis in this topic.</span></span>  
  
### <a name="reference"></a><span data-ttu-id="37abd-639">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-639">Reference</span></span>  
 <span data-ttu-id="37abd-640">記憶體繫結問題出 ruling [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="37abd-640">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  
  
## <a name="memory-system-cache-resident-bytes-analysis"></a><span data-ttu-id="37abd-641">記憶體系統快取常駐位元組分析</span><span class="sxs-lookup"><span data-stu-id="37abd-641">Memory System Cache Resident Bytes Analysis</span></span>  
 <span data-ttu-id="37abd-642">「 系統快取常駐位元組 」 是大小，以位元組為單位的檔案系統快取中的可分頁作業系統程式碼。</span><span class="sxs-lookup"><span data-stu-id="37abd-642">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="37abd-643">此值只包含目前實體頁面，而且不包含任何非目前駐留的虛擬記憶體分頁。</span><span class="sxs-lookup"><span data-stu-id="37abd-643">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="37abd-644">它等於顯示 [工作管理員] 中的系統快取值。</span><span class="sxs-lookup"><span data-stu-id="37abd-644">It does equal the System Cache value shown in Task Manager.</span></span> <span data-ttu-id="37abd-645">如此一來，這個值可能小於的實際使用中的檔案系統快取的虛擬記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="37abd-645">As a result, this value may be smaller than the actual amount of virtual memory in use by the file system cache.</span></span> <span data-ttu-id="37abd-646">這個值是元件的 「 記憶體\\\System 常駐位元組的程式碼 」，代表所有目前正在實體記憶體的可分頁作業系統程式碼。</span><span class="sxs-lookup"><span data-stu-id="37abd-646">This value is a component of “Memory\\\System Code Resident Bytes”, which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="37abd-647">這個計數器會顯示最後觀察到的值它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="37abd-647">This counter displays the last observed value only; it is not an average.</span></span>  
  
 <span data-ttu-id="37abd-648">這項分析會檢查每小時 10 MB 的遞增趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-648">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="37abd-649">在負載下，伺服器可能會以快取的 I/O 活動，例如磁碟使用的系統快取。</span><span class="sxs-lookup"><span data-stu-id="37abd-649">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="37abd-650">用於相互關聯處理序 IO Data Operations/sec 與其他處理序 IO 作業數/秒的分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-650">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses.</span></span>  
  
## <a name="processor-utilization-analysis-and-excessive-processor-use-by-processes"></a><span data-ttu-id="37abd-651">處理器使用率分析和處理序過度佔用處理器使用</span><span class="sxs-lookup"><span data-stu-id="37abd-651">Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>  
 <span data-ttu-id="37abd-652">「 處理器時間百分比 」 是處理器花費在執行非閒置執行緒所經過時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-652">“% Processor Time” is the percentage of elapsed time that the processor spends to execute a non-idle thread.</span></span> <span data-ttu-id="37abd-653">其計算方式是測量閒置執行緒處於使用中的範例間隔的持續時間，然後再從減去該時間間隔的持續時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-653">It is calculated by measuring the duration the idle thread is active in the sample interval, and then subtracting that time from the interval duration.</span></span> <span data-ttu-id="37abd-654">（每顆處理器具有閒置執行緒會佔用循環當其他執行緒尚未準備好要執行的）。此計數器是處理器活動的主要指示器，並顯示在取樣間隔期間觀察到的忙碌時間平均百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-654">(Each processor has an idle thread that consumes cycles when no other threads are ready to run.) This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="37abd-655">其計算方式是監視該服務處於非使用中的時間，並從 100%減去該值。</span><span class="sxs-lookup"><span data-stu-id="37abd-655">It is calculated by monitoring the time that the service is inactive, and subtracting that value from 100 percent.</span></span>  
  
 <span data-ttu-id="37abd-656">這項分析會檢查使用量大於每個個別的處理器上的 60%。</span><span class="sxs-lookup"><span data-stu-id="37abd-656">This analysis checks for utilization greater than 60 percent on each individual processor.</span></span> <span data-ttu-id="37abd-657">如果是的話，判斷它是否高使用者模式 CPU 或高特殊權限的模式。</span><span class="sxs-lookup"><span data-stu-id="37abd-657">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="37abd-658">如果懷疑 CPU 高特殊權限的模式，則會看到 「 特殊權限模式 CPU 分析 」。</span><span class="sxs-lookup"><span data-stu-id="37abd-658">If high privileged mode CPU is suspected, then see the “Privileged Mode CPU Analysis”.</span></span> <span data-ttu-id="37abd-659">如果懷疑有使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用率的函式。</span><span class="sxs-lookup"><span data-stu-id="37abd-659">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="37abd-660">請參閱 「 如何以： 識別造成高的使用者模式 CPU 瓶頸的伺服器應用程式在生產環境中的函式 」 參考一節，如需詳細資訊的發行項。</span><span class="sxs-lookup"><span data-stu-id="37abd-660">See “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  
  
## <a name="processor-queue-length-analysis"></a><span data-ttu-id="37abd-661">處理器佇列長度分析</span><span class="sxs-lookup"><span data-stu-id="37abd-661">Processor Queue Length Analysis</span></span>  
 <span data-ttu-id="37abd-662">「 處理器佇列長度 」 是處理器佇列中的執行緒數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-662">“Processor Queue Length” is the number of threads in the processor queue.</span></span> <span data-ttu-id="37abd-663">不同於磁碟計數器，此計數器會顯示準備就緒的執行緒，無法執行的執行緒。</span><span class="sxs-lookup"><span data-stu-id="37abd-663">Unlike the disk counters, this counter shows ready threads only, not threads that are running.</span></span>  <span data-ttu-id="37abd-664">即使在有多個處理器的電腦上，有處理器時間是單一佇列。</span><span class="sxs-lookup"><span data-stu-id="37abd-664">There is a single queue for processor time even on computers with multiple processors.</span></span> <span data-ttu-id="37abd-665">因此，如果電腦有多個處理器，您需要此值除以工作負載的處理器數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-665">Therefore, if a computer has multiple processors, you need to divide this value by the number of processors servicing the workload.</span></span> <span data-ttu-id="37abd-666">處理器佇列持續少於 10 個執行緒，每個處理器的是可以接受的依存工作負載。</span><span class="sxs-lookup"><span data-stu-id="37abd-666">A sustained processor queue of less than 10 threads per processor is normally acceptable, dependent of the workload.</span></span>  
  
 <span data-ttu-id="37abd-667">這項分析會判斷是否平均處理器佇列長度會超過處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-667">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="37abd-668">如果是的話，這可能表示發生處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-668">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="37abd-669">使用這項分析中使用特殊權限模式 CPU 分析和處理程序過多處理器使用相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-669">Use this analysis in correlation with Privileged Mode CPU Analysis and Excessive Processor Use by Process.</span></span> <span data-ttu-id="37abd-670">處理器佇列已準備好，但您不能因為另一個使用中執行緒目前正在執行的處理器來執行執行緒的集合。</span><span class="sxs-lookup"><span data-stu-id="37abd-670">The processor queue is the collection of threads that are ready but not able to be executed by the processor because another active thread is currently executing.</span></span> <span data-ttu-id="37abd-671">持續性或重複執行的多個執行緒的處理器數目超過佇列可清楚指出是處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-671">A sustained or recurring queue of more threads than number of processors is a good indication of a processor bottleneck.</span></span>  
  
 <span data-ttu-id="37abd-672">您可以使用這個計數器配合"處理器\\%Processor Time"計數器以判斷您的應用程式是否可以發揮更多的 Cpu。</span><span class="sxs-lookup"><span data-stu-id="37abd-672">You can use this counter in conjunction with the “Processor\\% Processor Time” counter to determine whether your application can benefit from more CPUs.</span></span> <span data-ttu-id="37abd-673">沒有單一佇列的處理器時間，即使在多處理器電腦上。</span><span class="sxs-lookup"><span data-stu-id="37abd-673">There is a single queue for processor time, even on multiprocessor computers.</span></span> <span data-ttu-id="37abd-674">因此，在多處理器電腦上，「 處理器佇列長度 」 (PQL) 值除以工作負載的處理器數目</span><span class="sxs-lookup"><span data-stu-id="37abd-674">Therefore, in a multiprocessor computer, divide the “Processor Queue Length” (PQL) value by the number of processors servicing the workload</span></span>  
  
 <span data-ttu-id="37abd-675">如果 CPU 是非常忙碌 （90%和更高的使用率），而且 PQL 平均值高於一致處理器數目，則您可能無法受益於額外的 Cpu 處理器瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-675">If the CPU is very busy (90 percent and higher utilization) and the PQL average is consistently higher than the number of processors, then you may have a processor bottleneck that could benefit from additional CPUs.</span></span> <span data-ttu-id="37abd-676">或者，您無法減少的執行緒和應用程式層級的佇列。</span><span class="sxs-lookup"><span data-stu-id="37abd-676">Or, you could reduce the number of threads and queue at the application level.</span></span> <span data-ttu-id="37abd-677">這會導致較少的內容切換，這是適合用來降低 CPU 負載。</span><span class="sxs-lookup"><span data-stu-id="37abd-677">This will cause less context switching, which is good for reducing CPU load.</span></span> <span data-ttu-id="37abd-678">處理器時間的要求到達隨機，而執行緒要求異常大量的處理器時間高 PQL 低 CPU 使用率的常見原因。</span><span class="sxs-lookup"><span data-stu-id="37abd-678">The common reason for a high PQL with low CPU utilization is that requests for processor time arrive randomly, and threads demand irregular amounts of time from the processor.</span></span> <span data-ttu-id="37abd-679">這表示處理器不是瓶頸。</span><span class="sxs-lookup"><span data-stu-id="37abd-679">This means that the processor is not a bottleneck.</span></span> <span data-ttu-id="37abd-680">相反地，將執行緒的邏輯，需要改善。</span><span class="sxs-lookup"><span data-stu-id="37abd-680">Instead, your threading logic that needs to be improved.</span></span>  
  
 <span data-ttu-id="37abd-681">如果懷疑有使用者模式處理器瓶頸，請考慮使用處理程序的程式碼剖析工具分析造成高 CPU 耗用率的函式。</span><span class="sxs-lookup"><span data-stu-id="37abd-681">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="37abd-682">請參閱 「 如何以： 識別造成高的使用者模式 CPU 瓶頸的伺服器應用程式在生產環境中的函式 」 參考一節，如需詳細資訊的發行項。</span><span class="sxs-lookup"><span data-stu-id="37abd-682">See the “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  
  
## <a name="privileged-mode-cpu-analysis"></a><span data-ttu-id="37abd-683">特殊權限的模式 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="37abd-683">Privileged Mode CPU Analysis</span></span>  
 <span data-ttu-id="37abd-684">此計數器表示執行緒在特權模式下執行的時間的百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-684">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="37abd-685">當您的應用程式呼叫作業系統函式 （例如來執行檔案或網路 I/O，或配置記憶體） 時，這些作業系統函式會執行特殊權限模式。</span><span class="sxs-lookup"><span data-stu-id="37abd-685">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span>  
  
 <span data-ttu-id="37abd-686">高特殊權限的模式 CPU 指出電腦花太多時間在系統 I/O 與真實 （使用者模式） 的工作。</span><span class="sxs-lookup"><span data-stu-id="37abd-686">High privileged mode CPU indicates that the computer is spending too much time in system I/O versus real (user mode) work.</span></span> <span data-ttu-id="37abd-687">"%特殊權限時間 」 的處理序執行緒花在特權模式下執行的程式碼的時間百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-687">“% Privileged Time” is the percentage of elapsed time that the process threads spent executing code in privileged mode.</span></span>  <span data-ttu-id="37abd-688">呼叫 Windows 系統服務時，服務通常會在特殊權限模式來取得系統私用資料的存取權執行。</span><span class="sxs-lookup"><span data-stu-id="37abd-688">When a Windows system service is called, the service will often run in privileged mode to gain access to system-private data.</span></span> <span data-ttu-id="37abd-689">這類資料會受到在使用者模式中執行的執行緒存取。</span><span class="sxs-lookup"><span data-stu-id="37abd-689">Such data is protected from access by threads executing in user mode.</span></span> <span data-ttu-id="37abd-690">呼叫系統可以是明確或隱含方式，例如分頁錯誤或中斷。</span><span class="sxs-lookup"><span data-stu-id="37abd-690">Calls to the system can be explicit or implicit, such as page faults or interrupts.</span></span> <span data-ttu-id="37abd-691">與某些早期作業系統不同 Windows 會使用處理序界限來保護子系統的傳統保護除了使用者和特殊權限的模式。</span><span class="sxs-lookup"><span data-stu-id="37abd-691">Unlike some early operating systems, Windows uses process boundaries for subsystem protection in addition to the traditional protection of user and privileged modes.</span></span> <span data-ttu-id="37abd-692">代表應用程式由 Windows 完成某些工作可能會出現在其他子系統處理序，除了處理序中的特殊權限時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-692">Some work done by Windows on behalf of the application might appear in other subsystem processes in addition to the privileged time in the process.</span></span>  
  
 <span data-ttu-id="37abd-693">這項分析會檢查是否有權限的模式 CPU 耗用超過 30%的總 CPU。</span><span class="sxs-lookup"><span data-stu-id="37abd-693">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="37abd-694">如果，則 CPU 耗用量可能是另一個以外的處理器，例如網路、 記憶體或磁碟 I/O 瓶頸所造成。</span><span class="sxs-lookup"><span data-stu-id="37abd-694">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="37abd-695">用於相互關聯與 %Interrupt Time 及高內容切換的分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-695">Use in correlation with % Interrupt Time and High Context Switching analyses.</span></span>  
  
## <a name="high-context-switching-analysis"></a><span data-ttu-id="37abd-696">高內容切換分析</span><span class="sxs-lookup"><span data-stu-id="37abd-696">High Context Switching Analysis</span></span>  
 <span data-ttu-id="37abd-697">當高優先順序的執行緒優先執行較低優先順序的執行緒目前正在執行或高優先權執行緒會封鎖，就會發生內容切換。</span><span class="sxs-lookup"><span data-stu-id="37abd-697">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="37abd-698">多執行緒共用相同的優先權層級，就會發生內容切換的高層級。</span><span class="sxs-lookup"><span data-stu-id="37abd-698">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="37abd-699">這通常表示太多執行緒會在系統上處理器的競爭。</span><span class="sxs-lookup"><span data-stu-id="37abd-699">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="37abd-700">如果您看不太多的處理器使用率，而且您看到的內容切換的層級非常低，則可能表示執行緒會被封鎖。</span><span class="sxs-lookup"><span data-stu-id="37abd-700">If you do not see much processor utilization and you see very low levels of context switching, it could indicate that threads are blocked.</span></span>  
  
 <span data-ttu-id="37abd-701">高內容切換只應該加以調查，高 CPU 和整體 CPU 的特殊權限的模式時。</span><span class="sxs-lookup"><span data-stu-id="37abd-701">High context switching should only be investigated when privileged mode CPU and overall CPU is high.</span></span> <span data-ttu-id="37abd-702">一般而言，內容切換率小於每個處理器每秒 5000 就不值得耽心。</span><span class="sxs-lookup"><span data-stu-id="37abd-702">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="37abd-703">如果內容切換率超過 15,000 每個處理器每秒，就將條件約束。</span><span class="sxs-lookup"><span data-stu-id="37abd-703">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span>  
  
 <span data-ttu-id="37abd-704">這項分析會檢查是否有高的 CPU、 高特殊權限的模式 CPU 和高 （超過 5000，每個處理器） 系統秒內容切換次數所有發生在相同的時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-704">This analysis checks for high CPU, high privileged mode CPU, and high (greater than 5,000 per processor) system context switches per second all occurring at the same time.</span></span> <span data-ttu-id="37abd-705">如果發生高內容切換時，接著減少執行緒和處理序在系統上執行的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-705">If high context switching is occurring, then reduce the number of threads and processes running on the system.</span></span>  
  
## <a name="biztalk-high-database-sessions-analysis"></a><span data-ttu-id="37abd-706">BizTalk 高資料庫工作階段分析</span><span class="sxs-lookup"><span data-stu-id="37abd-706">BizTalk High Database Sessions Analysis</span></span>  
 <span data-ttu-id="37abd-707">此計數器會有兩個可能的值也就是正常 (0)，或超過 (1)。</span><span class="sxs-lookup"><span data-stu-id="37abd-707">This counter has two possible values namely normal (0) or exceeded (1).</span></span> <span data-ttu-id="37abd-708">這項分析會檢查值為 1。</span><span class="sxs-lookup"><span data-stu-id="37abd-708">This analysis checks for a value of 1.</span></span> <span data-ttu-id="37abd-709">如果是這樣，BizTalk 已超過允許的資料庫工作階段數目的臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-709">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="37abd-710">這個值是由 「 每一 CPU 的資料庫連線 」 中的值的 BizTalk 主控件節流設定所控制的。</span><span class="sxs-lookup"><span data-stu-id="37abd-710">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span>  
  
 <span data-ttu-id="37abd-711">「 資料庫每一 CPU 的連線 」 為並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="37abd-711">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="37abd-712">一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="37abd-712">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="37abd-713">此選項會停用的預設值;一般而言，這項設定，才應該啟用如果資料庫伺服器是瓶頸或低階的資料庫伺服器的 BizTalk Server 系統中。</span><span class="sxs-lookup"><span data-stu-id="37abd-713">This option is disabled by default; typically, this setting should only be enabled if the database server is a bottleneck or for low-end database servers in the BizTalk Server system.</span></span> <span data-ttu-id="37abd-714">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器監視使用中的資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-714">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-715">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-715">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="37abd-716">輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-716">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="37abd-717">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-717">The default value is 0.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="37abd-718">「 MaxWorkerThreads"登錄機碼會影響數字的執行緒可用來 BizTalk 和有助於如果大部分的 BizTalk 執行緒忙著處理資料庫連接。</span><span class="sxs-lookup"><span data-stu-id="37abd-718">The “MaxWorkerThreads” registry key influences the number threads available to BizTalk and may help if most of the BizTalk threads are busy with database connections.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-719">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-719">References</span></span>  
  
-   <span data-ttu-id="37abd-720">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-720">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-721">執行緒、 DB 工作階段，以及在節流[http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="37abd-721">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
-   <span data-ttu-id="37abd-722">影響配接器的效能設定參數[http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="37abd-722">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="37abd-723">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-723">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalk-high-database-size-analysis"></a><span data-ttu-id="37abd-724">BizTalk 高資料庫大小分析</span><span class="sxs-lookup"><span data-stu-id="37abd-724">BizTalk High Database Size Analysis</span></span>  
 <span data-ttu-id="37abd-725">此計數器是指在此程序已發佈的資料庫佇列中的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-725">This counter refers to the number of messages in the database queues that this process has published.</span></span> <span data-ttu-id="37abd-726">這個值是由所有主控件的佇列表格中之項目數目以及多工緩衝處理與追蹤表格中的項目數目來測量。</span><span class="sxs-lookup"><span data-stu-id="37abd-726">This value is measured by the number of items in the queue tables for all hosts and the number of items in the spool and tracking tables.</span></span> <span data-ttu-id="37abd-727">佇列包含在工作佇列、 狀態佇列和擱置的佇列。</span><span class="sxs-lookup"><span data-stu-id="37abd-727">Queue includes the work queue, the state queue and the suspended queue.</span></span> <span data-ttu-id="37abd-728">若程序正發佈到多個佇列，則此計數器會反映所有佇列的加權平均值。</span><span class="sxs-lookup"><span data-stu-id="37abd-728">If a process is publishing to multiple queues, this counter reflects the weighted average of all the queues.</span></span>  
  
 <span data-ttu-id="37abd-729">若重新啟動主控件，則會遺失保留在記憶體中的統計值。</span><span class="sxs-lookup"><span data-stu-id="37abd-729">If the host is restarted, statistics held in memory are lost.</span></span> <span data-ttu-id="37abd-730">涉及一些額外負荷，因為 BizTalk Server 將會繼續收集統計資料，只有當有至少 100 發行時，具有 5%的總計會發佈在重新啟動主控件程序中。</span><span class="sxs-lookup"><span data-stu-id="37abd-730">Since some overhead is involved, BizTalk Server will resume gathering statistics only when there are at least 100 publishes, with 5 percent of the total publishes within the restarted host process.</span></span>  
  
 <span data-ttu-id="37abd-731">此計數器將設定為值 1，如果其中一個列出的資料庫臨界值中的訊息計數的條件發生。</span><span class="sxs-lookup"><span data-stu-id="37abd-731">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="37abd-732">此閾值記錄主題中的 < 如何修改預設主控件節流設定下面所參照。</span><span class="sxs-lookup"><span data-stu-id="37abd-732">This threshold is documented in the topic How to Modify the Default Host Throttling Settings referenced below.</span></span> <span data-ttu-id="37abd-733">根據預設主機訊息資料庫節流閾值中的計數是設定為 50000，將會觸發節流狀況，在下列情況下的值：</span><span class="sxs-lookup"><span data-stu-id="37abd-733">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span>  
  
-   <span data-ttu-id="37abd-734">主控件執行個體發佈到訂閱之主控件的工作、狀態和擱置佇列的訊息總數超過 50,000。</span><span class="sxs-lookup"><span data-stu-id="37abd-734">The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span>  
  
-   <span data-ttu-id="37abd-735">多工緩衝處理表格或追蹤表格中的訊息數目超過 50,000 個訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-735">The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span>  
  
 <span data-ttu-id="37abd-736">即使低或完全無負載發生 BizTalk server 擱置的訊息包含在計算資料庫中的訊息計數，因為是的訊息發佈節流可能發生的。</span><span class="sxs-lookup"><span data-stu-id="37abd-736">Since suspended messages are included in the message count in database calculation, throttling of message publishing can occur even if the BizTalk server is experiencing low or no load.</span></span>  
  
 <span data-ttu-id="37abd-737">這項分析會檢查值為 1。</span><span class="sxs-lookup"><span data-stu-id="37abd-737">This analysis checks for a value of 1.</span></span> <span data-ttu-id="37abd-738">如果發生這種情況，請考慮採取的動作，將會減少在資料庫中的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-738">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="37abd-739">比方說，確保 BizTalk SQL Server 正在執行工作不會發生錯誤，並在 BizTalk 管理主控台中使用 群組中樞，以判斷是否要將訊息增多造成的大量擱置的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-739">For example, ensure the BizTalk SQL Server jobs are running without error and use the Group Hub in the BizTalk Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-740">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-740">References</span></span>  
  
-   <span data-ttu-id="37abd-741">擱置的訊息會包含在資料庫節流閾值中訊息計數[http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span><span class="sxs-lookup"><span data-stu-id="37abd-741">Suspended Messages are Included in the Message Count in Database Throttling Threshold at [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span></span>  
  
-   <span data-ttu-id="37abd-742">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-742">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-743">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-743">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
## <a name="biztalk-high-in-process-message-count-analysis"></a><span data-ttu-id="37abd-744">BizTalk 高內含式訊息計數分析</span><span class="sxs-lookup"><span data-stu-id="37abd-744">BizTalk High In-Process Message Count Analysis</span></span>  
 <span data-ttu-id="37abd-745">「 內含式訊息每一 CPU 」 中的設定主控件節流設定是傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未處理的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="37abd-745">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="37abd-746">這個數字不包含擷取自資料庫，但仍然等候中記憶體中的佇列傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-746">This number does not include the messages retrieved from database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="37abd-747">您可以使用 biztalk： 訊息代理程式的效能物件類別下的 內含式訊息計數 效能計數器來監視內含式訊息的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-747">You can monitor the number of in-Process Messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-748">當您考慮節流狀況時，這個參數會提供提示給節流機制。</span><span class="sxs-lookup"><span data-stu-id="37abd-748">This parameter provides a hint to the throttling mechanism when considering throttling conditions.</span></span> <span data-ttu-id="37abd-749">實際閾值會受自我調整影響而不同。</span><span class="sxs-lookup"><span data-stu-id="37abd-749">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="37abd-750">您可以監視內含式訊息計數 」 效能計數器，以確認實際閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-750">You can verify the actual threshold by monitoring the in-process message count performance counter.</span></span>  
  
 <span data-ttu-id="37abd-751">這個參數可以將大型訊息實例，其中平均訊息大小很高，或訊息的處理可能需要大量的訊息較小的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-751">This parameter can be set to a smaller value for large message scenarios, where either the average message size is high, or the processing of messages may require a large number of messages.</span></span> <span data-ttu-id="37abd-752">如果案例中遇到記憶體為根據的節流太過頻繁，與記憶體臨界值可讓您取得自動調整為相當低的值，這會是明顯。</span><span class="sxs-lookup"><span data-stu-id="37abd-752">This would be evident if a scenario experiences memory-based throttling too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="37abd-753">此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-753">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="37abd-754">此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-754">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span>  
  
 <span data-ttu-id="37abd-755">這項分析會檢查以判斷是否發生這種節流高內含式訊息計數計數器。</span><span class="sxs-lookup"><span data-stu-id="37abd-755">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="37abd-756">如果是的話，請考慮調整"訊息每一 CPU 的內含式 」 設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-756">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="37abd-757">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-757">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="37abd-758">在停用以每一 CPU 的內含式訊息數目為基礎的節流"訊息每一 CPU 的內含式 」 設定中輸入值為 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-758">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="37abd-759">「 內含式訊息每一 CPU 」 設定的預設值是 1000。</span><span class="sxs-lookup"><span data-stu-id="37abd-759">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="37abd-760">請注意，此值也可能會影響低度延遲的訊息和 （或） BizTalk 資源的效率。</span><span class="sxs-lookup"><span data-stu-id="37abd-760">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-761">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-761">References</span></span>  
  
-   <span data-ttu-id="37abd-762">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-762">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-763">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-763">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
## <a name="biztalk-high-message-delivery-rate-analysis"></a><span data-ttu-id="37abd-764">BizTalk 高訊息傳遞速率分析</span><span class="sxs-lookup"><span data-stu-id="37abd-764">BizTalk High Message Delivery Rate Analysis</span></span>  
 <span data-ttu-id="37abd-765">對於輸出 （已傳遞） 訊息，BizTalk Server 會調整訊息的傳遞如果主控件執行個體的訊息傳遞內送速率超過訊息傳遞外寄速率 * 指定的速率增加因數 （百分比） 值。</span><span class="sxs-lookup"><span data-stu-id="37abd-765">For outbound (delivered) messages, BizTalk Server throttles delivery of messages if the message delivery incoming rate for the host instance exceeds the message delivery outgoing rate * the specified rate overdrive factor (percent) value.</span></span> <span data-ttu-id="37abd-766">訊息處理節流設定 對話方塊上的速率增加因數 （百分比） 參數是可設定的。</span><span class="sxs-lookup"><span data-stu-id="37abd-766">The rate overdrive factor (percent) parameter is configurable on the Message Processing Throttling Settings dialog box.</span></span> <span data-ttu-id="37abd-767">主要是藉由引發從記憶體中佇列移除訊息，並將訊息傳遞到結束點管理員 」 (EPM) 或協調流程引擎以進行處理之前的延遲來完成輸出訊息之根據速率的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-767">Rate-based throttling for outbound messages is accomplished primarily by inducing a delay before removing the messages from the in-memory queue and delivering the messages to the End Point Manager (EPM) or orchestration engine for processing.</span></span> <span data-ttu-id="37abd-768">不採取其他任何動作的目的就能完成輸出訊息之根據速率的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-768">No other action is taken to accomplish rate-based throttling for outbound messages.</span></span>  
  
 <span data-ttu-id="37abd-769">輸出節流會造成訊息延遲傳遞，而且訊息可能建立在記憶體中佇列內，並造成清除佇列執行緒遭到封鎖，直到移轉了節流狀況為止。</span><span class="sxs-lookup"><span data-stu-id="37abd-769">Outbound throttling can cause delayed message delivery and messages may build up in the in-memory queue and cause de-queue threads to be blocked until the throttling condition is mitigated.</span></span> <span data-ttu-id="37abd-770">當清除佇列執行緒處於封鎖狀態、 任何其他的訊息會從 MessageBox 提取到記憶體中佇列中等待傳送外寄。</span><span class="sxs-lookup"><span data-stu-id="37abd-770">When de-queue threads are blocked, no additional messages are pulled from the MessageBox into the in-memory queue for outbound delivery.</span></span>  
  
 <span data-ttu-id="37abd-771">這項分析會檢查 1 高訊息傳遞速率計數器中的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-771">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="37abd-772">高訊息傳遞速率可能因高處理複雜性、 慢速輸出配接器或瞬間的系統資源不足。</span><span class="sxs-lookup"><span data-stu-id="37abd-772">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-773">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-773">References</span></span>  
  
-   <span data-ttu-id="37abd-774">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-774">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-775">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-775">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="37abd-776">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-776">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalk-high-process-memory-analysis"></a><span data-ttu-id="37abd-777">BizTalk 高程序記憶體分析</span><span class="sxs-lookup"><span data-stu-id="37abd-777">BizTalk High Process Memory Analysis</span></span>  
 <span data-ttu-id="37abd-778">節流臨界值 設定的 BizTalk 處理序記憶體使用量會是記憶體的與工作集大小和處理序的總可用虛擬記憶體的總和，如果輸入從 1 到 100 的值使用百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-778">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="37abd-779">根據預設，節流設定的 BizTalk 程序記憶體使用量會是 25。</span><span class="sxs-lookup"><span data-stu-id="37abd-779">By default, the BizTalk Process Memory Usage throttling setting is 25.</span></span> <span data-ttu-id="37abd-780">當指定某個百分比值時，則會以定期間隔重新計算程序記憶體閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-780">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="37abd-781">如果使用者指定的百分比值，它將會以根據可用的記憶體為認可和目前的處理序記憶體使用量計算。</span><span class="sxs-lookup"><span data-stu-id="37abd-781">If the user specifies a percentage value, it is computed based on the available memory to commit and the current Process Memory usage.</span></span>  
  
 <span data-ttu-id="37abd-782">這項分析會檢查 1 高的處理序記憶體計數器的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-782">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="37abd-783">如果發生這種情況，然後再次嘗試使用偵錯 Diag 判斷記憶體增加的原因 （請參閱記憶體流失偵測分析中的參考）。</span><span class="sxs-lookup"><span data-stu-id="37abd-783">If this occurs, then try to determine the cause of the memory increase by using Debug Diag (see references in Memory Leak Detection analysis).</span></span> <span data-ttu-id="37abd-784">請注意，為它的一般程序進行期間啟動，而這會耗用大量記憶體可能一開始會顯示為記憶體流失，但是當處理程序無法釋放不再需要藉此減少可用的我的記憶體時，就會發生真正的記憶體流失mory 經過一段時間。</span><span class="sxs-lookup"><span data-stu-id="37abd-784">Note that is it normal for processes to consume a large portion of memory during startup and this may initially appear as a memory leak, but a true memory leak occurs when a process fails to release memory that it no longer needs, thereby reducing the amount of available memory over time.</span></span> <span data-ttu-id="37abd-785">有關如何以一般方式分析程序記憶體遺漏，biztalk，請參閱下面的 「 如何要擷取記憶體傾印的處理程序，是流失記憶體 」 參考及/或 PAL 中的 「 記憶體流失偵測 」 分析，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-785">See the “How to Capture a Memory Dump of a Process that is Leaking Memory” reference below and/or the “Memory Leak Detection” analysis in PAL for more information on how to generically analyze process memory leaks in BizTalk.</span></span>  
  
 <span data-ttu-id="37abd-786">如果要發行批次有遽記憶體需求，高程序記憶體節流設定可能會發生或太多的執行緒正在處理訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-786">High process memory throttling can occur if the batch to be published has steep memory requirements, or too many threads are processing messages.</span></span>  <span data-ttu-id="37abd-787">若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-787">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="37abd-788">如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，請考慮縮減內部訊息佇列大小的值，內含式訊息，每個 CPU 臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-788">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and In-process messages per CPU thresholds.</span></span> <span data-ttu-id="37abd-789">此策略特別會與大型訊息處理實例有關。</span><span class="sxs-lookup"><span data-stu-id="37abd-789">This strategy is particularly relevant in large message processing scenarios.</span></span> <span data-ttu-id="37abd-790">此外，這個值應設為需要大量記憶體需求，每個訊息的案例較低的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-790">In addition, this value should be set to a low value for scenarios having large memory requirement per message.</span></span> <span data-ttu-id="37abd-791">設定較低的值會在初期節流開始作用，並導致程序中的記憶體擴張。</span><span class="sxs-lookup"><span data-stu-id="37abd-791">Setting a low value will kick in throttling early on and prevent a memory explosion within the process.</span></span>  
  
 <span data-ttu-id="37abd-792">如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。</span><span class="sxs-lookup"><span data-stu-id="37abd-792">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="37abd-793">在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2 GB 的 32 位元。</span><span class="sxs-lookup"><span data-stu-id="37abd-793">Each process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="37abd-794">一般情況下，強烈建議 BizTalk 64 位元和 64 位元 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="37abd-794">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="37abd-795">請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-795">See the “BizTalk Server 64-bit Support” reference for more information.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-796">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-796">References</span></span>  
  
-   <span data-ttu-id="37abd-797">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-797">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="37abd-798">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-798">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-799">如何擷取發生記憶體溢位在的處理程序的記憶體傾印[http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="37abd-799">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  
  
-   <span data-ttu-id="37abd-800">在 BizTalk Server 64 位元支援[http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="37abd-800">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  
  
## <a name="biztalk-high-system-memory-analysis"></a><span data-ttu-id="37abd-801">BizTalk 高系統記憶體分析</span><span class="sxs-lookup"><span data-stu-id="37abd-801">BizTalk High System Memory Analysis</span></span>  
 <span data-ttu-id="37abd-802">BizTalk 的實體記憶體使用量節流臨界值設定為輸入則是從 1 到 100 相較於可用的實體記憶體的值如果總數量的記憶體耗用量的百分比。</span><span class="sxs-lookup"><span data-stu-id="37abd-802">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="37abd-803">如果輸入大於 100 的值，此設定也可以是以 mb 為單位的可用實體記憶體總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-803">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="37abd-804">輸入值為 0 時可停用以實體記憶體使用量為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-804">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="37abd-805">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-805">The default value is 0.</span></span>  
  
 <span data-ttu-id="37abd-806">這項分析會檢查 1 高系統記憶體計數器的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-806">This analysis checks for a value of 1 in the High System Memory counter.</span></span> <span data-ttu-id="37abd-807">因為這會測量系統記憶體總量，若非 BizTalk Server 程序正耗用過量的系統記憶體，則可能觸發節流狀況。</span><span class="sxs-lookup"><span data-stu-id="37abd-807">Since this measures total system memory, a throttling condition may be triggered if non-BizTalk Server processes are consuming an extensive amount of system memory.</span></span> <span data-ttu-id="37abd-808">因此如果發生這種情況，最好的方法是找出哪些處理程序正在耗用的最實體記憶體及/或將額外的實體記憶體新增至伺服器。</span><span class="sxs-lookup"><span data-stu-id="37abd-808">Therefore if this occurs, the best approach is to identify which processes are consuming the most physical memory and/or add additional physical memory to the server.</span></span> <span data-ttu-id="37abd-809">此外，請考慮減少負載，藉由減少 EPM 執行緒集區的預設大小和 （或） 配接器批次的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-809">Also, consider reducing load by reducing the default size of the EPM thread pool, and/or the size of adapter batches.</span></span> <span data-ttu-id="37abd-810">如需詳細資訊，請參閱 < 在 PAL 中的記憶體流失偵測分析。</span><span class="sxs-lookup"><span data-stu-id="37abd-810">For more information, see the Memory Leak Detection analysis in PAL.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-811">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-811">References</span></span>  
  
-   <span data-ttu-id="37abd-812">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-812">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-813">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-813">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-814">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-814">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
## <a name="biztalk-high-thread-count-analysis"></a><span data-ttu-id="37abd-815">BizTalk 高執行緒計數分析</span><span class="sxs-lookup"><span data-stu-id="37abd-815">BizTalk High Thread Count Analysis</span></span>  
 <span data-ttu-id="37abd-816">[每一 CPU 的執行緒] 是在主機處理程序包括使用配接器之執行緒的執行緒總數。</span><span class="sxs-lookup"><span data-stu-id="37abd-816">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="37abd-817">如果超過此臨界值時，BizTalk Server 會嘗試減少 EPM 執行緒集區和訊息代理程式 」 執行緒集區的大小。</span><span class="sxs-lookup"><span data-stu-id="37abd-817">If this threshold is exceeded, BizTalk Server will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="37abd-818">在高負載可能導致建立大量執行緒的情況時，應啟用以執行緒為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-818">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="37abd-819">此參數會同時影響輸入和輸出節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-819">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="37abd-820">執行緒為基礎的節流預設為停用。</span><span class="sxs-lookup"><span data-stu-id="37abd-820">Thread based throttling is disabled by default.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="37abd-821">使用者指定的值做為指導方針，而且主應用程式可能會以動態方式自我調整為基礎的記憶體使用量模式和處理序執行緒需求此臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-821">The user-specified value is used as a guideline, and the host may dynamically self-tune this threshold value based on the memory usage patterns and thread requirements of the process.</span></span>  
  
 <span data-ttu-id="37abd-822">這項分析會檢查 1 高執行緒計數計數器中的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-822">This analysis checks for a value of 1 in the High Thread Count counter.</span></span> <span data-ttu-id="37abd-823">考慮調整不同的執行緒集區大小，以確定系統不會建立大量的執行緒。</span><span class="sxs-lookup"><span data-stu-id="37abd-823">Consider adjusting the different thread pool sizes to ensure that the system does not create a large number of threads.</span></span> <span data-ttu-id="37abd-824">這項分析可與內容切換相互關聯每個第二個分析，以判斷是否作業系統已飽和，太多執行緒，但在大部分情況下高執行緒計數原因後端資料庫比在 BizTalk server 上的多個競爭。</span><span class="sxs-lookup"><span data-stu-id="37abd-824">This analysis can be correlated with Context Switches per Second analysis to determine whether the operating system is saturated with too many threads, but in most cases high thread counts cause more contention on the backend database than on the BizTalk server.</span></span> <span data-ttu-id="37abd-825">如需修改執行緒集區大小的詳細資訊請參閱 < 如何修改預設主控件節流設定在參考中。</span><span class="sxs-lookup"><span data-stu-id="37abd-825">For more information about modifying the thread pool sizes see How to Modify the Default Host Throttling Settings in references.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-826">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-826">References</span></span>  
  
-   <span data-ttu-id="37abd-827">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-827">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-828">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-828">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="37abd-829">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-829">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-830">影響配接器的效能設定參數[http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="37abd-830">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="37abd-831">執行緒、 DB 工作階段，以及在節流[http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="37abd-831">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
 <span data-ttu-id="37abd-832">BizTalk 輸入延遲 AnalysisAverage 延遲 （毫秒），傳訊引擎收到文件從配接器發佈至 messagebox 之前。</span><span class="sxs-lookup"><span data-stu-id="37abd-832">BizTalk Inbound Latency AnalysisAverage latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the message box.</span></span> <span data-ttu-id="37abd-833">降低延遲很重要的 BizTalk 中，某些使用者因此追蹤時間文件花費輸入配接器中很重要。</span><span class="sxs-lookup"><span data-stu-id="37abd-833">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span>  
  
 <span data-ttu-id="37abd-834">以下是顯示的方式測量延遲圖表。</span><span class="sxs-lookup"><span data-stu-id="37abd-834">Here is a chart showing how latency is measured.</span></span>  
  
|<span data-ttu-id="37abd-835">1</span><span class="sxs-lookup"><span data-stu-id="37abd-835">1</span></span>|<span data-ttu-id="37abd-836">2</span><span class="sxs-lookup"><span data-stu-id="37abd-836">2</span></span>|<span data-ttu-id="37abd-837">3</span><span class="sxs-lookup"><span data-stu-id="37abd-837">3</span></span>|<span data-ttu-id="37abd-838">4</span><span class="sxs-lookup"><span data-stu-id="37abd-838">4</span></span>|<span data-ttu-id="37abd-839">5</span><span class="sxs-lookup"><span data-stu-id="37abd-839">5</span></span>|<span data-ttu-id="37abd-840">6</span><span class="sxs-lookup"><span data-stu-id="37abd-840">6</span></span>|  
|-------|-------|-------|-------|-------|-------|  
|<span data-ttu-id="37abd-841">配接器接收訊息並提交到引擎，才能將訊息提供給引擎不在配接器完成的工作擷取這些效能計數器</span><span class="sxs-lookup"><span data-stu-id="37abd-841">Adapter receives message and submits it to the engine, work done in adapter before message is given to engine not captured in these perf counters</span></span>|<span data-ttu-id="37abd-842">引擎從配接器接收訊息、 執行接收管線、 對應、 訂閱評估，保存在資料庫中的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-842">Engine receives message from adapter, executes receive pipeline, map, subscription evaluation, persist message in DB.</span></span>|<span data-ttu-id="37abd-843">協調流程或請求-回應連接埠執行，並產生回應訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-843">Orchestration or Solicit-Response port runs and generates a response message.</span></span>|<span data-ttu-id="37abd-844">回應訊息在傳訊引擎從佇列中清除、 執行傳送管線、 對應。</span><span class="sxs-lookup"><span data-stu-id="37abd-844">Response message is dequeued in messaging engine, execute the send pipeline, map.</span></span>|<span data-ttu-id="37abd-845">傳訊引擎會提供回應訊息給配接器。</span><span class="sxs-lookup"><span data-stu-id="37abd-845">Messaging engine gives response message to adapter.</span></span>|<span data-ttu-id="37abd-846">配接器會通知引擎訊息作業都是。</span><span class="sxs-lookup"><span data-stu-id="37abd-846">Adapter informs engine message is all done.</span></span>|  
||<span data-ttu-id="37abd-847">I</span><span class="sxs-lookup"><span data-stu-id="37abd-847">I</span></span>|||||  
||<span data-ttu-id="37abd-848">RR</span><span class="sxs-lookup"><span data-stu-id="37abd-848">RR</span></span>|<span data-ttu-id="37abd-849">RR</span><span class="sxs-lookup"><span data-stu-id="37abd-849">RR</span></span>|<span data-ttu-id="37abd-850">RR</span><span class="sxs-lookup"><span data-stu-id="37abd-850">RR</span></span>|||  
||||<span data-ttu-id="37abd-851">O</span><span class="sxs-lookup"><span data-stu-id="37abd-851">O</span></span>|<span data-ttu-id="37abd-852">O</span><span class="sxs-lookup"><span data-stu-id="37abd-852">O</span></span>|<span data-ttu-id="37abd-853">O</span><span class="sxs-lookup"><span data-stu-id="37abd-853">O</span></span>|  
|||||<span data-ttu-id="37abd-854">OA</span><span class="sxs-lookup"><span data-stu-id="37abd-854">OA</span></span>|<span data-ttu-id="37abd-855">OA</span><span class="sxs-lookup"><span data-stu-id="37abd-855">OA</span></span>|  
  
 <span data-ttu-id="37abd-856">I = 輸入的延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-856">I = Inbound Latency</span></span>  
  
 <span data-ttu-id="37abd-857">RR = 要求的回應延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-857">RR = Request Response Latency</span></span>  
  
 <span data-ttu-id="37abd-858">O = 輸出延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-858">O = Outbound Latency</span></span>  
  
 <span data-ttu-id="37abd-859">OA = 配接器輸出延遲</span><span class="sxs-lookup"><span data-stu-id="37abd-859">OA = Outbound Adapter Latency</span></span>  
  
 <span data-ttu-id="37abd-860">假設在低延遲的環境，這項分析會檢查是否在文件所花費的時間超過 5 秒的輸入配接器中。</span><span class="sxs-lookup"><span data-stu-id="37abd-860">Assuming a low latency environment, this analysis checks whether the document spent more than 5 seconds in the inbound adapter.</span></span> <span data-ttu-id="37abd-861">這可能表示之傳輸的訊息，透過此主控件執行個體的輸入配接器處理延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-861">This may indicate a processing delay in the transport of messages through inbound adapters in this host instance.</span></span> <span data-ttu-id="37abd-862">如果多個輸入配接器存在於此主控件執行個體，請考慮將它們分割到他們自己的主機，以判斷哪一個輸入的介面卡有高延遲。</span><span class="sxs-lookup"><span data-stu-id="37abd-862">If multiple inbound adapters exist in this host instance, then consider separating them into their own hosts to determine which inbound adapter has high latency.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-863">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-863">References</span></span>  
  
-   <span data-ttu-id="37abd-864">BizTalk Server 資料庫最佳化</span><span class="sxs-lookup"><span data-stu-id="37abd-864">BizTalk Server Database Optimization</span></span>  
    [<span data-ttu-id="37abd-865">http://go.microsoft.com/fwlink/?linkid=104427</span><span class="sxs-lookup"><span data-stu-id="37abd-865">http://go.microsoft.com/fwlink/?linkid=104427</span></span>](http://go.microsoft.com/fwlink/?linkid=104427)  
  
-   <span data-ttu-id="37abd-866">要求/回應傳訊</span><span class="sxs-lookup"><span data-stu-id="37abd-866">Request/Response Messaging</span></span>  
    [<span data-ttu-id="37abd-867">http://go.microsoft.com/fwlink/?LinkID=155288</span><span class="sxs-lookup"><span data-stu-id="37abd-867">http://go.microsoft.com/fwlink/?LinkID=155288</span></span>](http://go.microsoft.com/fwlink/?LinkID=155288)  
  
-   <span data-ttu-id="37abd-868">識別 BizTalk 層中的瓶頸</span><span class="sxs-lookup"><span data-stu-id="37abd-868">Identifying Bottlenecks in the BizTalk Tier</span></span>  
    [<span data-ttu-id="37abd-869">http://go.microsoft.com/fwlink/?LinkID=155289</span><span class="sxs-lookup"><span data-stu-id="37abd-869">http://go.microsoft.com/fwlink/?LinkID=155289</span></span>](http://go.microsoft.com/fwlink/?LinkID=155289)  
  
## <a name="biztalk-message-delivery-throttling-state-analysis"></a><span data-ttu-id="37abd-870">BizTalk 訊息傳遞節流狀態分析</span><span class="sxs-lookup"><span data-stu-id="37abd-870">BizTalk Message Delivery Throttling State Analysis</span></span>  
 <span data-ttu-id="37abd-871">BizTalk 訊息傳遞節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="37abd-871">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="37abd-872">它是旗標，指出系統是否正在進行節流訊息傳遞 （影響 XLANG 訊息處理及輸出傳輸）。</span><span class="sxs-lookup"><span data-stu-id="37abd-872">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="37abd-873">節流狀況會指示計數器的數值。</span><span class="sxs-lookup"><span data-stu-id="37abd-873">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="37abd-874">以下是一份值和其各自的意義：</span><span class="sxs-lookup"><span data-stu-id="37abd-874">Here is a list of the values and their respective meaning:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="37abd-875">0</span><span class="sxs-lookup"><span data-stu-id="37abd-875">0</span></span>|<span data-ttu-id="37abd-876">未進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-876">Not throttling</span></span>|  
|<span data-ttu-id="37abd-877">1</span><span class="sxs-lookup"><span data-stu-id="37abd-877">1</span></span>|<span data-ttu-id="37abd-878">由於不平衡的訊息傳遞速率 (輸入速率超過輸出速率) 而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-878">Throttling due to imbalanced message delivery rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="37abd-879">3</span><span class="sxs-lookup"><span data-stu-id="37abd-879">3</span></span>|<span data-ttu-id="37abd-880">由於高內含式訊息計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-880">Throttling due to high in-process message count</span></span>|  
|<span data-ttu-id="37abd-881">4</span><span class="sxs-lookup"><span data-stu-id="37abd-881">4</span></span>|<span data-ttu-id="37abd-882">由於處理程序記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-882">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="37abd-883">5</span><span class="sxs-lookup"><span data-stu-id="37abd-883">5</span></span>|<span data-ttu-id="37abd-884">由於系統記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-884">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="37abd-885">9</span><span class="sxs-lookup"><span data-stu-id="37abd-885">9</span></span>|<span data-ttu-id="37abd-886">由於高執行緒計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-886">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="37abd-887">10</span><span class="sxs-lookup"><span data-stu-id="37abd-887">10</span></span>|<span data-ttu-id="37abd-888">由於傳遞時使用者覆寫而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-888">Throttling due to user override on delivery</span></span>|  
  
 <span data-ttu-id="37abd-889">這項分析會檢查每個這些值，並為每個有特定的警示。</span><span class="sxs-lookup"><span data-stu-id="37abd-889">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-890">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-890">References</span></span>  
  
-   <span data-ttu-id="37abd-891">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-891">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-892">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-892">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
## <a name="biztalk-messagebox-database-connection-failures-analysis"></a><span data-ttu-id="37abd-893">BizTalk MessageBox 資料庫連線失敗分析</span><span class="sxs-lookup"><span data-stu-id="37abd-893">BizTalk MessageBox Database Connection Failures Analysis</span></span>  
 <span data-ttu-id="37abd-894">此效能計數器是資料庫連線嘗試的主控件執行個體啟動後失敗的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-894">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="37abd-895">如果裝載 BizTalk 資料庫的 SQL Server 服務因故無法使用，資料庫叢集資源從作用中的電腦傳輸到被動電腦。</span><span class="sxs-lookup"><span data-stu-id="37abd-895">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="37abd-896">在此容錯移轉程序期間，BizTalk Server 服務執行個體發生資料庫連接失敗並自動重新啟動以重新連接到資料庫。</span><span class="sxs-lookup"><span data-stu-id="37abd-896">During this failover process, the BizTalk Server service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="37abd-897">正在運作的資料庫電腦 (先前為被動電腦) 會在容錯移轉期間獲得資源後，開始處理資料庫連接。</span><span class="sxs-lookup"><span data-stu-id="37abd-897">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span>  
  
 <span data-ttu-id="37abd-898">當 BizTalk Server 執行階段無法與 MessageBox 或管理資料庫通訊時，會發生 DBNetLib （資料庫網路程式庫） 錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-898">DBNetLib (Database Network Library) errors occur when the BizTalk Server runtime is unable to communicate with either the MessageBox or management databases.</span></span> <span data-ttu-id="37abd-899">當發生這種情況時，攔截例外狀況的 BizTalk Server 執行階段執行個體就會關閉，並再每分鐘循環查看資料庫是否可用。</span><span class="sxs-lookup"><span data-stu-id="37abd-899">When this occurs, the BizTalk Server runtime instance that catches the exception shuts down and then cycles every minute to check to see whether the database is available.</span></span> <span data-ttu-id="37abd-900">這個主題，請參閱 [參考] 區段，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-900">See the references section for more information on this topic.</span></span>  
  
 <span data-ttu-id="37abd-901">當用戶端起始 TCP/IP 通訊端連線聯繫伺服器時，用戶端通常會連接到伺服器上特定的連接埠，並要求伺服器透過短期有效的臨時 TCP 或 UDP 連接埠回應用戶端。</span><span class="sxs-lookup"><span data-stu-id="37abd-901">When a client initiates a TCP/IP socket connection to a server, the client typically connects to a specific port on the server and requests that the server respond to the client over an ephemeral, or short lived, TCP or UDP port.</span></span> <span data-ttu-id="37abd-902">在 Windows Server 2003 和 Windows XP 中，用戶端應用程式所使用的臨時連接埠的預設範圍是從 1025 到 5000。</span><span class="sxs-lookup"><span data-stu-id="37abd-902">On Windows Server 2003 and Windows XP, the default range of ephemeral ports used by client applications is from 1025 through 5000.</span></span> <span data-ttu-id="37abd-903">在某些情況下很可能就會耗盡可用的連接埠中的預設範圍。</span><span class="sxs-lookup"><span data-stu-id="37abd-903">Under certain conditions it is possible that the available ports in the default range will be exhausted.</span></span> <span data-ttu-id="37abd-904">這個主題，請參閱 [參考] 區段，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-904">See the references section for more information on this topic.</span></span>  
  
 <span data-ttu-id="37abd-905">這項分析會檢查資料庫連線失敗的任何項目。</span><span class="sxs-lookup"><span data-stu-id="37abd-905">This analysis checks for any occurrence of database connection failures.</span></span> <span data-ttu-id="37abd-906">資料庫連線失敗非常重要的因為 BizTalk 資料庫沒有就無法作用。</span><span class="sxs-lookup"><span data-stu-id="37abd-906">Database connection failures are critical because BizTalk cannot function without the database.</span></span> <span data-ttu-id="37abd-907">如果資料庫連線失敗的原因不明，然後考慮下面所列的參考和/或連絡 Microsoft 支援服務以判斷連線失敗的性質。</span><span class="sxs-lookup"><span data-stu-id="37abd-907">If the cause of the database connection failure is unknown, then consider the references listed below and/or contact Microsoft Support to determine the nature of the connectivity failure.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-908">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-908">References</span></span>  
  
-   <span data-ttu-id="37abd-909">向外擴充的資料庫</span><span class="sxs-lookup"><span data-stu-id="37abd-909">Scaled-Out Databases</span></span>  
    [<span data-ttu-id="37abd-910">http://go.microsoft.com/fwlink/?LinkId=155307</span><span class="sxs-lookup"><span data-stu-id="37abd-910">http://go.microsoft.com/fwlink/?LinkId=155307</span></span>](http://go.microsoft.com/fwlink/?LinkId=155307)  
  
-   <span data-ttu-id="37abd-911">避免 DBNETLIB 例外狀況</span><span class="sxs-lookup"><span data-stu-id="37abd-911">Avoiding DBNETLIB Exceptions</span></span>  
    [<span data-ttu-id="37abd-912">http://go.microsoft.com/fwlink/?LinkId=155308</span><span class="sxs-lookup"><span data-stu-id="37abd-912">http://go.microsoft.com/fwlink/?LinkId=155308</span></span>](http://go.microsoft.com/fwlink/?LinkId=155308)  
  
-   <span data-ttu-id="37abd-913">避免 TCP/IP 連接埠耗盡</span><span class="sxs-lookup"><span data-stu-id="37abd-913">Avoiding TCP/IP Port Exhaustion</span></span>  
    [<span data-ttu-id="37abd-914">http://go.microsoft.com/fwlink/?LinkId=155309</span><span class="sxs-lookup"><span data-stu-id="37abd-914">http://go.microsoft.com/fwlink/?LinkId=155309</span></span>](http://go.microsoft.com/fwlink/?LinkId=155309)  
  
## <a name="biztalk-messaging-publishing-throttling-state-analysis"></a><span data-ttu-id="37abd-915">BizTalk 訊息發佈節流狀態分析</span><span class="sxs-lookup"><span data-stu-id="37abd-915">BizTalk Messaging Publishing Throttling State Analysis</span></span>  
 <span data-ttu-id="37abd-916">BizTalk 訊息發佈節流狀態是節流的主要指標。</span><span class="sxs-lookup"><span data-stu-id="37abd-916">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="37abd-917">旗標，指出系統是否正在進行節流 （影響 XLANG 訊息處理及輸入的傳輸） 的訊息發佈它。節流狀況會指示計數器的數值。</span><span class="sxs-lookup"><span data-stu-id="37abd-917">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="37abd-918">以下是一份值和其各自的意義：</span><span class="sxs-lookup"><span data-stu-id="37abd-918">Here is a list of the values and their respective meaning:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="37abd-919">0</span><span class="sxs-lookup"><span data-stu-id="37abd-919">0</span></span>|<span data-ttu-id="37abd-920">未進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-920">Not throttling</span></span>|  
|<span data-ttu-id="37abd-921">2</span><span class="sxs-lookup"><span data-stu-id="37abd-921">2</span></span>|<span data-ttu-id="37abd-922">由於不平衡的訊息發佈速率 (輸入速率超過輸出速率) 而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-922">Throttling due to imbalanced message publishing rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="37abd-923">4</span><span class="sxs-lookup"><span data-stu-id="37abd-923">4</span></span>|<span data-ttu-id="37abd-924">由於處理程序記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-924">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="37abd-925">5</span><span class="sxs-lookup"><span data-stu-id="37abd-925">5</span></span>|<span data-ttu-id="37abd-926">由於系統記憶體壓力而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-926">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="37abd-927">6</span><span class="sxs-lookup"><span data-stu-id="37abd-927">6</span></span>|<span data-ttu-id="37abd-928">由於資料庫成長而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-928">Throttling due to database growth</span></span>|  
|<span data-ttu-id="37abd-929">8</span><span class="sxs-lookup"><span data-stu-id="37abd-929">8</span></span>|<span data-ttu-id="37abd-930">由於高工作階段計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-930">Throttling due to high session count</span></span>|  
|<span data-ttu-id="37abd-931">9</span><span class="sxs-lookup"><span data-stu-id="37abd-931">9</span></span>|<span data-ttu-id="37abd-932">由於高執行緒計數而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-932">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="37abd-933">11</span><span class="sxs-lookup"><span data-stu-id="37abd-933">11</span></span>|<span data-ttu-id="37abd-934">由於發佈時使用者覆寫而進行節流</span><span class="sxs-lookup"><span data-stu-id="37abd-934">Throttling due to user override on publishing</span></span>|  
  
 <span data-ttu-id="37abd-935">這項分析會檢查每個這些值，並為每個有特定的警示。</span><span class="sxs-lookup"><span data-stu-id="37abd-935">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-936">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-936">References</span></span>  
  
-   <span data-ttu-id="37abd-937">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-937">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-938">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-938">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
## <a name="biztalk-orchestrations-resident-in-memory"></a><span data-ttu-id="37abd-939">在記憶體中的 BizTalk 協調流程內建</span><span class="sxs-lookup"><span data-stu-id="37abd-939">BizTalk Orchestrations Resident in Memory</span></span>  
 <span data-ttu-id="37abd-940">目前由主控件執行個體裝載的協調流程執行個體數。</span><span class="sxs-lookup"><span data-stu-id="37abd-940">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="37abd-941">如果看到爆增情形或暴增的記憶體中駐留的協調流程可能遭視為正常，而遞增趨勢可能表示"以免 」 的協調流程在記憶體中。</span><span class="sxs-lookup"><span data-stu-id="37abd-941">While spikes or bursts of orchestrations resident in memory may be considered normal, an increasing trend could indicate a “pile up” of orchestrations in memory.</span></span> <span data-ttu-id="37abd-942">當 BizTalk 無法凍結訊息/協調流程執行個體時，可能會發生一段時間遞增趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-942">An increasing trend over time may occur when BizTalk is unable to dehydrate messages/orchestration instances.</span></span> <span data-ttu-id="37abd-943">嘗試將此計數器與"XLANG/s Orchestrations(?) 相互關聯\Dehydratable 協調流程 」 其中問號 （？） 是相同計數器執行個體，以做為此計數器。</span><span class="sxs-lookup"><span data-stu-id="37abd-943">Try to correlate this counter with “XLANG/s Orchestrations(?)\Dehydratable orchestrations” where the question mark (?) is the same counter instance as this counter.</span></span>  
  
 <span data-ttu-id="37abd-944">如果大量的協調流程是常駐在記憶體中的，如果協調流程數目最少可凍結，則您的協調流程可能會在記憶體中的閒置，而且可能會造成記憶體流失的狀況。</span><span class="sxs-lookup"><span data-stu-id="37abd-944">If a high number of orchestrations are resident in memory and if a low number of orchestrations are dehydratable, then your orchestrations are likely idle in memory and may cause a memory leak condition.</span></span> <span data-ttu-id="37abd-945">如果有的話，請使用這項分析與 「 \XLANG/s 協調流程 （*） \Idle 協調流程 」 產生關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-945">Use this analysis in correlation with “\XLANG/s Orchestrations(*)\Idle orchestrations” if present.</span></span> <span data-ttu-id="37abd-946">遞增趨勢 BizTalk 閒置協調流程中的是更好的指標，記憶體流失，因為無法凍結協調流程執行個體。</span><span class="sxs-lookup"><span data-stu-id="37abd-946">An increasing trend in BizTalk Idle Orchestrations is a better indicator of memory leaks due to the inability to dehydrate orchestration instances.</span></span>  
  
 <span data-ttu-id="37abd-947">這項分析會檢查遞增趨勢常駐記憶體，且如果超過 50%的記憶體中駐留的協調流程未凍結的協調流程中。</span><span class="sxs-lookup"><span data-stu-id="37abd-947">This analysis checks for an increasing trend in orchestrations resident in memory and if more than 50% of the orchestrations resident in memory are not dehydratable.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-948">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-948">References</span></span>  
  
-   <span data-ttu-id="37abd-949">協調流程引擎效能計數器</span><span class="sxs-lookup"><span data-stu-id="37abd-949">Orchestration Engine Performance Counters</span></span>  
    [<span data-ttu-id="37abd-950">http://go.microsoft.com/fwlink/?LinkID=155290</span><span class="sxs-lookup"><span data-stu-id="37abd-950">http://go.microsoft.com/fwlink/?LinkID=155290</span></span>](http://go.microsoft.com/fwlink/?LinkID=155290)  
  
-   <span data-ttu-id="37abd-951">協調流程凍結和解除凍結</span><span class="sxs-lookup"><span data-stu-id="37abd-951">Orchestration Dehydration and Rehydration</span></span>  
    [<span data-ttu-id="37abd-952">http://go.microsoft.com/fwlink/?LinkID=155284</span><span class="sxs-lookup"><span data-stu-id="37abd-952">http://go.microsoft.com/fwlink/?LinkID=155284</span></span>](http://go.microsoft.com/fwlink/?LinkID=155284)  
  
## <a name="biztalk-private-bytes-analysis"></a><span data-ttu-id="37abd-953">BizTalk 私用位元組分析</span><span class="sxs-lookup"><span data-stu-id="37abd-953">BizTalk Private Bytes Analysis</span></span>  
 <span data-ttu-id="37abd-954">這是主控件執行個體，其相當於"\Process （*） \Private 位元組 」 效能計數器的配置私用記憶體 mb。</span><span class="sxs-lookup"><span data-stu-id="37abd-954">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="37abd-955">私用位元組是記憶體的目前的大小，以位元組為單位的處理序已配置，不能與其他處理序共用。</span><span class="sxs-lookup"><span data-stu-id="37abd-955">Private Bytes is the current size, in bytes, of memory that a process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="37abd-956">這項分析會判斷是否任何主控件執行個體正在耗用龐大的系統記憶體和主控件執行個體是否持續一段時間的記憶體耗用量增加。</span><span class="sxs-lookup"><span data-stu-id="37abd-956">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="37abd-957">耗用記憶體的主控件執行個體是正常的只要它傳回至系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-957">A host instance consuming large portions of memory is fine as long as the it returns the memory to the system.</span></span> <span data-ttu-id="37abd-958">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-958">Look for increasing trends in the chart.</span></span> <span data-ttu-id="37abd-959">遞增趨勢上很長一段時間可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="37abd-959">An increasing trend over a long period of time could indicate a memory leak.</span></span>  
  
 <span data-ttu-id="37abd-960">這項分析會檢查每小時 10 MB-遞增的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-960">This analysis checks for a 10 MB-per-hour increasing trend.</span></span> <span data-ttu-id="37abd-961">您可以使用這項分析中可用的記憶體分析與記憶體流失分析相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-961">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="37abd-962">此外，請記住，新啟動主控件執行個體一開始會顯示為記憶體流失時，它只是一般啟動行為。</span><span class="sxs-lookup"><span data-stu-id="37abd-962">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="37abd-963">記憶體遺漏時，處理程序會繼續耗用記憶體和沒有釋出一段很長一段時間的記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-963">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="37abd-964">如果您懷疑記憶體流失的情況，請閱讀以下參照"記憶體成長中 BizTalk 傳訊 」 文章。</span><span class="sxs-lookup"><span data-stu-id="37abd-964">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article referenced below.</span></span> <span data-ttu-id="37abd-965">否則，安裝並使用偵錯診斷工具。</span><span class="sxs-lookup"><span data-stu-id="37abd-965">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="37abd-966">如需有關偵錯診斷工具的詳細資訊，請參閱 < 參考一節。</span><span class="sxs-lookup"><span data-stu-id="37abd-966">For more information on the Debug Diag Tool, see the references section.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-967">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-967">References</span></span>  
  
-   <span data-ttu-id="37abd-968">偵錯診斷工具 v1.1</span><span class="sxs-lookup"><span data-stu-id="37abd-968">Debug Diagnostic Tool v1.1</span></span>  
    [<span data-ttu-id="37abd-969">http://go.microsoft.com/fwlink/?linkid=106784</span><span class="sxs-lookup"><span data-stu-id="37abd-969">http://go.microsoft.com/fwlink/?linkid=106784</span></span>](http://go.microsoft.com/fwlink/?linkid=106784)  
  
-   <span data-ttu-id="37abd-970">在 「 BizTalk 訊息的記憶體成長</span><span class="sxs-lookup"><span data-stu-id="37abd-970">Memory Growth in BizTalk Messaging</span></span>  
    [<span data-ttu-id="37abd-971">http://go.microsoft.com/fwlink/?linkid=108788</span><span class="sxs-lookup"><span data-stu-id="37abd-971">http://go.microsoft.com/fwlink/?linkid=108788</span></span>](http://go.microsoft.com/fwlink/?linkid=108788)  
  
## <a name="biztalk-virtual-bytes-analysis"></a><span data-ttu-id="37abd-972">BizTalk 虛擬位元組分析</span><span class="sxs-lookup"><span data-stu-id="37abd-972">BizTalk Virtual Bytes Analysis</span></span>  
 <span data-ttu-id="37abd-973">這是保留給主控件執行個體的虛擬記憶體 （mb）。</span><span class="sxs-lookup"><span data-stu-id="37abd-973">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="37abd-974">這項分析會決定是否任何主控件執行個體正在耗用大量系統的記憶體，以及是否在經過一段時間的記憶體耗用量增加主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="37abd-974">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="37abd-975">耗用記憶體的主控件執行個體是正常的只要它會傳回至系統記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-975">A host instance consuming large portions of memory is fine as long as it returns the memory to the system.</span></span> <span data-ttu-id="37abd-976">尋找增加圖表中的趨勢。</span><span class="sxs-lookup"><span data-stu-id="37abd-976">Look for increasing trends in the chart.</span></span> <span data-ttu-id="37abd-977">遞增趨勢上很長一段時間可能表示記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="37abd-977">An increasing trend over a long period of time could indicate a memory leak.</span></span>  
  
 <span data-ttu-id="37abd-978">這項分析會檢查每小時 10 MB-遞增的趨勢，以虛擬位元組為單位。</span><span class="sxs-lookup"><span data-stu-id="37abd-978">This analysis checks for a 10 MB-per-hour increasing trend in virtual bytes.</span></span> <span data-ttu-id="37abd-979">您可以使用這項分析中可用的記憶體分析與記憶體流失分析相互關聯。</span><span class="sxs-lookup"><span data-stu-id="37abd-979">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="37abd-980">此外，請記住，新啟動主控件執行個體一開始會顯示為記憶體流失時，它只是一般啟動行為。</span><span class="sxs-lookup"><span data-stu-id="37abd-980">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="37abd-981">記憶體遺漏時，處理程序會繼續耗用記憶體和沒有釋出一段很長一段時間的記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-981">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="37abd-982">如果您懷疑記憶體流失的狀況，然後讀取 「 記憶體成長中 BizTalk 傳訊 」 下列文件。</span><span class="sxs-lookup"><span data-stu-id="37abd-982">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article below.</span></span> <span data-ttu-id="37abd-983">否則，安裝並使用偵錯診斷工具。</span><span class="sxs-lookup"><span data-stu-id="37abd-983">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="37abd-984">如需有關偵錯診斷工具的詳細資訊，請參閱 < 參考一節。</span><span class="sxs-lookup"><span data-stu-id="37abd-984">For more information on the Debug Diag Tool, see the references section.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-985">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-985">References</span></span>  
  
-   <span data-ttu-id="37abd-986">偵錯診斷工具 v1.1</span><span class="sxs-lookup"><span data-stu-id="37abd-986">Debug Diagnostic Tool v1.1</span></span>  
    [<span data-ttu-id="37abd-987">http://go.microsoft.com/fwlink/?linkid=106784</span><span class="sxs-lookup"><span data-stu-id="37abd-987">http://go.microsoft.com/fwlink/?linkid=106784</span></span>](http://go.microsoft.com/fwlink/?linkid=106784)  
  
-   <span data-ttu-id="37abd-988">在 「 BizTalk 訊息的記憶體成長</span><span class="sxs-lookup"><span data-stu-id="37abd-988">Memory Growth in BizTalk Messaging</span></span>  
    [<span data-ttu-id="37abd-989">http://go.microsoft.com/fwlink/?linkid=108788</span><span class="sxs-lookup"><span data-stu-id="37abd-989">http://go.microsoft.com/fwlink/?linkid=108788</span></span>](http://go.microsoft.com/fwlink/?linkid=108788)  
  
## <a name="biztalk-message-agent-database-session-throttling-analysis"></a><span data-ttu-id="37abd-990">BizTalk 訊息代理程式的資料庫工作階段節流分析</span><span class="sxs-lookup"><span data-stu-id="37abd-990">BizTalk Message Agent Database Session Throttling Analysis</span></span>  
 <span data-ttu-id="37abd-991">這是到 MessageBox，相較於其各自的 BizTalk 節流設定的開放式資料庫連接的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-991">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="37abd-992">「 資料庫每一 CPU 的連線 」 為並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="37abd-992">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="37abd-993">一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="37abd-993">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="37abd-994">此選項預設為停用；通常只有在資料庫伺服器是 BizTalk Server 系統中的瓶頸時，才應啟用此設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-994">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="37abd-995">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器監視使用中的資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-995">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-996">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-996">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="37abd-997">輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-997">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="37abd-998">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-998">The default value is 0.</span></span>  
  
 <span data-ttu-id="37abd-999">MaxWorkerThreads 登錄機碼具有數字的執行緒可用來 BizTalk 的影響力，並有助於在其中大部分的 BizTalk 的執行緒都是使用資料庫連接忙碌的情況下。</span><span class="sxs-lookup"><span data-stu-id="37abd-999">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="37abd-1000">這項分析會檢查到 MessageBox 的開放式資料庫連接的數目是否大於 80%的資料庫工作階段，節流設定，表示可能節流狀況。</span><span class="sxs-lookup"><span data-stu-id="37abd-1000">This analysis checks whether the number of open database connections to the MessageBox are greater than 80 percent of the Database Session Throttling setting, indicating a throttling condition is likely.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-1001">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-1001">References</span></span>  
  
-   <span data-ttu-id="37abd-1002">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-1002">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-1003">影響配接器的效能設定參數[http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="37abd-1003">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="37abd-1004">執行緒、 DB 工作階段，以及在節流[http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="37abd-1004">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
## <a name="biztalk-message-agent-database-session-throttling-threshold-analysis"></a><span data-ttu-id="37abd-1005">BizTalk 訊息代理程式的資料庫工作階段節流閾值分析</span><span class="sxs-lookup"><span data-stu-id="37abd-1005">BizTalk Message Agent Database Session Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="37abd-1006">這是到 MessageBox 的開放式資料庫連接數目的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1006">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="37abd-1007">「 資料庫每一 CPU 的連線 」 為並行資料庫工作階段數目上限 （每一 CPU) 節流開始前允許。</span><span class="sxs-lookup"><span data-stu-id="37abd-1007">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="37abd-1008">一般個別主控件工作階段集區中的閒置資料庫工作階段不會加到此計數，而是對主控件執行個體實際正在使用的工作階段數目嚴格執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="37abd-1008">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="37abd-1009">此選項預設為停用；通常只有在資料庫伺服器是 BizTalk Server 系統中的瓶頸時，才應啟用此設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-1009">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="37abd-1010">您可以使用 biztalk： 訊息代理程式的效能物件類別下的資料庫工作階段效能計數器監視使用中的資料庫連線數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-1010">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-1011">此參數只會影響輸出訊息節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-1011">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="37abd-1012">輸入值為 0 時可停用以資料庫工作階段數目為基礎的節流。</span><span class="sxs-lookup"><span data-stu-id="37abd-1012">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="37abd-1013">預設值是 0。</span><span class="sxs-lookup"><span data-stu-id="37abd-1013">The default value is 0.</span></span>  
  
 <span data-ttu-id="37abd-1014">MaxWorkerThreads 登錄機碼具有數字的執行緒可用來 BizTalk 的影響力，並有助於在其中大部分的 BizTalk 的執行緒都是使用資料庫連接忙碌的情況下。</span><span class="sxs-lookup"><span data-stu-id="37abd-1014">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="37abd-1015">這項分析會檢查此值來查看是否有已修改的預設設定。</span><span class="sxs-lookup"><span data-stu-id="37abd-1015">This analysis checks this value to see whether it has been modified from its default setting.</span></span> <span data-ttu-id="37abd-1016">根據預設，此設定會是 0，表示節流的資料庫工作階段上已停用。</span><span class="sxs-lookup"><span data-stu-id="37abd-1016">By default, this setting is 0, which means throttling on database sessions is disabled.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-1017">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-1017">References</span></span>  
  
-   <span data-ttu-id="37abd-1018">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-1018">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-1019">影響配接器的效能設定參數[http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="37abd-1019">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="37abd-1020">執行緒、 DB 工作階段，以及在節流[http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="37abd-1020">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
## <a name="biztalk-message-agent-in-process-message-count-throttling-analysis"></a><span data-ttu-id="37abd-1021">BizTalk 訊息代理程式內含式訊息計數節流分析</span><span class="sxs-lookup"><span data-stu-id="37abd-1021">BizTalk Message Agent In-process Message Count Throttling Analysis</span></span>  
 <span data-ttu-id="37abd-1022">這是並行服務類別正在處理的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-1022">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="37abd-1023">「 內含式訊息每一 CPU 」 中的設定主控件節流設定是傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未處理的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="37abd-1023">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="37abd-1024">這不包括從資料庫擷取但仍在等候記憶體中的佇列中傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-1024">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="37abd-1025">您可以使用 biztalk： 訊息代理程式的效能物件類別下的 內含式訊息計數 效能計數器來監視內含式訊息的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-1025">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-1026">此參數提供提示給節流機制，做為節流狀況的考量。</span><span class="sxs-lookup"><span data-stu-id="37abd-1026">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="37abd-1027">實際閾值會受自我調整影響而不同。</span><span class="sxs-lookup"><span data-stu-id="37abd-1027">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="37abd-1028">您可以監視內含式訊息計數效能計數器，以確認實際閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1028">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  
  
 <span data-ttu-id="37abd-1029">對於大型訊息實例 （其中平均訊息大小很高，或訊息的處理可能需要大量的訊息），這個參數可以設定為較小的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1029">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="37abd-1030">大型訊息實例被表示如果記憶體為根據的節流太過頻繁發生且臨界值時，取得自動調整為相當低的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1030">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="37abd-1031">此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-1031">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="37abd-1032">此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1032">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="37abd-1033">這項分析會檢查高內含式訊息計數計數器來判斷其是否超過其節流設定相同的名稱下的 80%，表示節流狀況有可能。</span><span class="sxs-lookup"><span data-stu-id="37abd-1033">This analysis checks the High In-Process Message Count counter to determine whether it is greater than 80 percent of its throttling setting under the same name, which indicates a throttling condition is likely.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-1034">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-1034">References</span></span>  
  
-   <span data-ttu-id="37abd-1035">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-1035">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-1036">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-1036">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalkmessage-agent-in-process-message-count-throttling-threshold-analysis"></a><span data-ttu-id="37abd-1037">Biztalk： 訊息代理程式內含式訊息計數節流閾值分析</span><span class="sxs-lookup"><span data-stu-id="37abd-1037">BizTalk:Message Agent In-process Message Count Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="37abd-1038">這是目前的服務類別正在處理的並行訊息數目的閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1038">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="37abd-1039">「 內含式訊息每一 CPU 」 中的設定主控件節流設定是傳遞至 「 結束點管理員 」 (EPM) 或 XLANG 尚未處理的訊息的數目上限。</span><span class="sxs-lookup"><span data-stu-id="37abd-1039">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="37abd-1040">這不包括從資料庫擷取但仍在等候記憶體中的佇列中傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-1040">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="37abd-1041">您可以使用 biztalk： 訊息代理程式的效能物件類別下的 內含式訊息計數 效能計數器來監視內含式訊息的數目。</span><span class="sxs-lookup"><span data-stu-id="37abd-1041">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="37abd-1042">此參數提供提示給節流機制，做為節流狀況的考量。</span><span class="sxs-lookup"><span data-stu-id="37abd-1042">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="37abd-1043">實際閾值會受自我調整影響而不同。</span><span class="sxs-lookup"><span data-stu-id="37abd-1043">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="37abd-1044">您可以監視內含式訊息計數效能計數器，以確認實際閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1044">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  
  
 <span data-ttu-id="37abd-1045">對於大型訊息實例 （其中平均訊息大小很高，或訊息的處理可能需要大量的訊息），這個參數可以設定為較小的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1045">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="37abd-1046">大型訊息實例被表示如果記憶體為根據的節流太過頻繁發生且臨界值時，取得自動調整為相當低的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1046">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="37abd-1047">此類行為發生時表示輸出傳輸應減少同時處理的訊息數，以避免過度使用記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-1047">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="37abd-1048">此外，對於一次處理少量訊息可讓配接器較有效率的實例 (例如，傳送至限制並行連線的伺服器時)，此參數可調整為低於預設的值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1048">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="37abd-1049">這項分析會檢查節流處理臨界值的非預設值高內含式訊息計數。</span><span class="sxs-lookup"><span data-stu-id="37abd-1049">This analysis checks the High In-Process Message Count throttling threshold for a non-default value.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-1050">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-1050">References</span></span>  
  
-   <span data-ttu-id="37abd-1051">主控件節流效能計數器在[http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="37abd-1051">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="37abd-1052">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-1052">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalk-message-agent-process-memory-usage-mb-throttling-analysis"></a><span data-ttu-id="37abd-1053">BizTalk 訊息代理程式處理序記憶體使用量 (MB) 節流分析</span><span class="sxs-lookup"><span data-stu-id="37abd-1053">BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis</span></span>  
 <span data-ttu-id="37abd-1054">這是目前的處理序 (MB) 的記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="37abd-1054">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="37abd-1055">BizTalk 處理序記憶體節流設定可能要發行批次具有並不容易學習的記憶體需求，或是太多的執行緒正在處理訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-1055">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span>  <span data-ttu-id="37abd-1056">若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-1056">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="37abd-1057">如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，請考慮縮減內部訊息佇列大小的值，內含式訊息，每個 CPU 臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1057">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="37abd-1058">此策略特別會與大型訊息處理實例有關。</span><span class="sxs-lookup"><span data-stu-id="37abd-1058">This strategy is particularly relevant in large message processing scenarios.</span></span>  
  
 <span data-ttu-id="37abd-1059">如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。</span><span class="sxs-lookup"><span data-stu-id="37abd-1059">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="37abd-1060">在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2 GB 的 32 位元。</span><span class="sxs-lookup"><span data-stu-id="37abd-1060">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="37abd-1061">一般情況下，強烈建議 BizTalk 64 位元和 64 位元 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="37abd-1061">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="37abd-1062">請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-1062">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="37abd-1063">這項分析會檢查是否大於 80%的其各自的節流臨界值具有相同名稱的程序記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="37abd-1063">This analysis checks whether the process memory usage is greater than 80 percent of its respective throttling threshold of the same name.</span></span> <span data-ttu-id="37abd-1064">根據預設，節流設定的 BizTalk 程序記憶體使用量會是 25%之處理序可用的虛擬記憶體。</span><span class="sxs-lookup"><span data-stu-id="37abd-1064">By default, the BizTalk Process Memory Usage throttling setting is 25 percent of the virtual memory available to the process.</span></span> <span data-ttu-id="37abd-1065">/3GB 參數這項設定沒有作用。</span><span class="sxs-lookup"><span data-stu-id="37abd-1065">The /3GB switch has no effect on this setting.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-1066">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-1066">References</span></span>  
  
-   <span data-ttu-id="37abd-1067">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-1067">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="37abd-1068">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-1068">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-1069">如何擷取發生記憶體溢位在的處理程序的記憶體傾印[http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="37abd-1069">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  
  
-   <span data-ttu-id="37abd-1070">在 BizTalk Server 64 位元支援[http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="37abd-1070">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  
  
## <a name="biztalkmessage-agent-process-memory-usage-mb-throttling-threshold-analysis"></a><span data-ttu-id="37abd-1071">Biztalk： 訊息代理程式處理序記憶體使用量 (MB) 節流閾值分析</span><span class="sxs-lookup"><span data-stu-id="37abd-1071">BizTalk:Message Agent Process Memory Usage (MB) Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="37abd-1072">這是目前的處理序 (MB) 的記憶體使用量的目前閾值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1072">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="37abd-1073">實際至這個處理序記憶體耗用量模式，其可用的記憶體數量而定，可能會以動態方式調整臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1073">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="37abd-1074">BizTalk 處理序記憶體節流設定可能要發行批次具有並不容易學習的記憶體需求，或是太多的執行緒正在處理訊息。</span><span class="sxs-lookup"><span data-stu-id="37abd-1074">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="37abd-1075">若系統出現過度節流，請考慮增加主控件相關聯處理序記憶體使用量閾值的值，並確認主控件執行個體不會產生 「 記憶體不足 」 錯誤。</span><span class="sxs-lookup"><span data-stu-id="37abd-1075">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="37abd-1076">如果藉由增加程序記憶體使用量閾值，會引發 「 記憶體不足 」 錯誤，請考慮縮減內部訊息佇列大小的值，內含式訊息，每個 CPU 臨界值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1076">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="37abd-1077">此策略特別會與大型訊息處理實例有關。</span><span class="sxs-lookup"><span data-stu-id="37abd-1077">This strategy is particularly relevant in large message processing scenarios.</span></span>  
  
 <span data-ttu-id="37abd-1078">如果您的 BizTalk server 定期執行虛擬記憶體不足，請考慮 BizTalk Server 64 位元。</span><span class="sxs-lookup"><span data-stu-id="37abd-1078">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="37abd-1079">在 64 位元伺服器上的每個處理序可以處理最多 4 TB 的虛擬記憶體與 2 GB 的 32 位元。</span><span class="sxs-lookup"><span data-stu-id="37abd-1079">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="37abd-1080">一般情況下，強烈建議 BizTalk 64 位元和 64 位元 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="37abd-1080">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="37abd-1081">請參閱 < BizTalk Server 64 位元支援 > 參考，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="37abd-1081">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="37abd-1082">這項分析會檢查是否程序記憶體節流設定為非預設值。</span><span class="sxs-lookup"><span data-stu-id="37abd-1082">This analysis checks whether the Process memory throttling is set to a non-default value.</span></span>  
  
### <a name="references"></a><span data-ttu-id="37abd-1083">參考</span><span class="sxs-lookup"><span data-stu-id="37abd-1083">References</span></span>  
  
-   <span data-ttu-id="37abd-1084">BizTalk Server 如何實作主控件節流在[http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="37abd-1084">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="37abd-1085">如何修改預設主控件節流設定在[http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="37abd-1085">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="37abd-1086">如何擷取發生記憶體溢位在的處理程序的記憶體傾印[http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="37abd-1086">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  
  
-   <span data-ttu-id="37abd-1087">在 BizTalk Server 64 位元支援[http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="37abd-1087">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>