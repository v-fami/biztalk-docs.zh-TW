---
title: "檢查清單： 更新協調流程中使用的並存版本控制 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 97f66987-0269-4dfe-a648-7b68412e86fe
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 110eb0df6373d8679fed0431c91d10a6633e0610
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="checklist-updating-an-orchestration-using-side-by-side-versioning"></a><span data-ttu-id="2b111-102">檢查清單： 更新協調流程中使用的並存版本控制</span><span class="sxs-lookup"><span data-stu-id="2b111-102">Checklist: Updating an Orchestration Using Side-by-Side Versioning</span></span>
<span data-ttu-id="2b111-103">變更協調流程可以更為複雜，比其他成品，例如對應變更。</span><span class="sxs-lookup"><span data-stu-id="2b111-103">Changes to orchestrations can be more involved than changes to other artifacts, such as maps.</span></span> <span data-ttu-id="2b111-104">如果您有存留較短的協調流程，簡單的更新可能不足。</span><span class="sxs-lookup"><span data-stu-id="2b111-104">If you have short-lived orchestrations, then a simple update may be sufficient.</span></span> <span data-ttu-id="2b111-105">但是，如果您有長時間執行的協調流程，或無法終止現有的執行個體，則-並存版本控制會是唯一的選擇。</span><span class="sxs-lookup"><span data-stu-id="2b111-105">But if you have long-running orchestrations or cannot terminate existing instances, then side-by-side versioning will be your only option.</span></span>  
  
 <span data-ttu-id="2b111-106">當協調流程處理長時間執行的交易時，您無法立即變更為更新版本的協調流程。</span><span class="sxs-lookup"><span data-stu-id="2b111-106">When an orchestration handles long-running transactions, you cannot change to the updated version of the orchestration immediately.</span></span> <span data-ttu-id="2b111-107">您必須允許原始的版本，以完成處理訊息，因此不會遺失。</span><span class="sxs-lookup"><span data-stu-id="2b111-107">You must allow the original version to finish processing its messages so that they are not lost.</span></span> <span data-ttu-id="2b111-108">若要完成這項作業，您要將更新的協調流程部署到與原始版本相同的應用程式中。</span><span class="sxs-lookup"><span data-stu-id="2b111-108">To accomplish this, you deploy the updated orchestration into the same application as the original one.</span></span> <span data-ttu-id="2b111-109">然後再停止原始的版本，並啟動更新版本使它可以接收所有新的訊息，而舊版本則持續處理任何已傳遞的訊息。</span><span class="sxs-lookup"><span data-stu-id="2b111-109">You then stop the original version and start the updated version so that it receives all new messages while the previous version continues to process any in-flight messages.</span></span> <span data-ttu-id="2b111-110">在原始的協調流程完成所有其訊息的處理之後，請將它從部署所在的 BizTalk 應用程式中解除部署。</span><span class="sxs-lookup"><span data-stu-id="2b111-110">After the original orchestration has finished processing all of its messages, you undeploy it from the BizTalk application in which it was deployed.</span></span>  
  
|<span data-ttu-id="2b111-111">步驟</span><span class="sxs-lookup"><span data-stu-id="2b111-111">Steps</span></span>|<span data-ttu-id="2b111-112">參考</span><span class="sxs-lookup"><span data-stu-id="2b111-112">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2b111-113">必要的變更協調流程後，遞增組件版本號碼。</span><span class="sxs-lookup"><span data-stu-id="2b111-113">After making the necessary changes to the orchestration, increment the assembly version number.</span></span>|[<span data-ttu-id="2b111-114">如何更新組件</span><span class="sxs-lookup"><span data-stu-id="2b111-114">How to Update an Assembly</span></span>](../technical-guides/how-to-update-an-assembly.md)|  
|<span data-ttu-id="2b111-115">部署到 BizTalk 應用程式，從 Visual Studio 組件，然後測試組件。</span><span class="sxs-lookup"><span data-stu-id="2b111-115">Deploy the assembly from Visual Studio into a BizTalk application, and then test the assembly.</span></span> <span data-ttu-id="2b111-116">**注意：**請確定您選取要在 GAC 中安裝組件的部署選項。</span><span class="sxs-lookup"><span data-stu-id="2b111-116">**Note:**  Make sure you select the deployment option to install the assembly in the GAC.</span></span>|<span data-ttu-id="2b111-117">[部署 BizTalk 組件從 Visual Studio 到 BizTalk 應用程式](http://go.microsoft.com/fwlink/?LinkID=154719)(http://go.microsoft.com/fwlink/?LinkID=154719)。</span><span class="sxs-lookup"><span data-stu-id="2b111-117">[Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application](http://go.microsoft.com/fwlink/?LinkID=154719) (http://go.microsoft.com/fwlink/?LinkID=154719).</span></span>|  
|<span data-ttu-id="2b111-118">將組件匯出至.msi 檔案將測試環境中的應用程式。</span><span class="sxs-lookup"><span data-stu-id="2b111-118">Export the assembly from the application in your test environment into an .msi file.</span></span>|[<span data-ttu-id="2b111-119">如何匯出至.msi 檔案的應用程式</span><span class="sxs-lookup"><span data-stu-id="2b111-119">How to Export an Application to an .msi File</span></span>](../technical-guides/how-to-export-an-application-to-an-msi-file.md)|  
|<span data-ttu-id="2b111-120">將.msi 檔案匯入實際執行環境，其中包含您想要更新的協調流程的 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2b111-120">Import the .msi file into the BizTalk application in your production environment that contains the orchestration that you want to update.</span></span> <span data-ttu-id="2b111-121">**注意：**您可以使用下列步驟的測試組件並將其部署到實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="2b111-121">**Note:**  You can use the following steps for testing the assembly as well as deploying it into your production environment.</span></span>|[<span data-ttu-id="2b111-122">如何從.msi 檔案匯入應用程式</span><span class="sxs-lookup"><span data-stu-id="2b111-122">How to Import an Application from an .msi File</span></span>](../technical-guides/how-to-import-an-application-from-an-msi-file.md)|  
|<span data-ttu-id="2b111-123">繫結更新與原始協調流程使用相同的繫結的協調流程。</span><span class="sxs-lookup"><span data-stu-id="2b111-123">Bind the updated orchestration using the same bindings as the original orchestration.</span></span>|<span data-ttu-id="2b111-124">[如何設定協調流程的繫結](http://go.microsoft.com/fwlink/?LinkId=154850)(http://go.microsoft.com/fwlink/?LinkId=154850)。</span><span class="sxs-lookup"><span data-stu-id="2b111-124">[How to Configure Bindings for an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154850) (http://go.microsoft.com/fwlink/?LinkId=154850).</span></span>|  
|<span data-ttu-id="2b111-125">取消登錄原始的協調流程，然後啟動更新的協調流程。</span><span class="sxs-lookup"><span data-stu-id="2b111-125">Unenlist the original orchestration, and then start the updated orchestration.</span></span> <span data-ttu-id="2b111-126">**注意：**避免任何訊息遺失，您應該執行下列作業以程式設計的方式。</span><span class="sxs-lookup"><span data-stu-id="2b111-126">**Note:**  To avoid any dropped messages, you should do this programmatically.</span></span>|<span data-ttu-id="2b111-127">如需有關以程式設計方式部署協調流程的詳細資訊，請參閱[部署和啟動新版本的協調流程以程式設計方式](http://go.microsoft.com/fwlink/?LinkId=154851)(http://go.microsoft.com/fwlink/?LinkId=154851)。</span><span class="sxs-lookup"><span data-stu-id="2b111-127">For more information about deploying the orchestration programmatically, see [Deploying and Starting a New Version of an Orchestration Programmatically](http://go.microsoft.com/fwlink/?LinkId=154851) (http://go.microsoft.com/fwlink/?LinkId=154851).</span></span><br /><br /> <span data-ttu-id="2b111-128">如需有關如何手動部署協調流程的詳細資訊，請參閱中的下列[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]協助：</span><span class="sxs-lookup"><span data-stu-id="2b111-128">For more information about deploying the orchestration manually, see the following in [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] Help:</span></span><br /><br /> <span data-ttu-id="2b111-129">-   [如何取消登錄協調流程](http://go.microsoft.com/fwlink/?LinkId=154852)(http://go.microsoft.com/fwlink/?LinkId=154852)。</span><span class="sxs-lookup"><span data-stu-id="2b111-129">-   [How to Unenlist an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154852) (http://go.microsoft.com/fwlink/?LinkId=154852).</span></span><br /><span data-ttu-id="2b111-130">-   [如何登錄協調流程](http://go.microsoft.com/fwlink/?LinkId=154853)(http://go.microsoft.com/fwlink/?LinkId=154853)。</span><span class="sxs-lookup"><span data-stu-id="2b111-130">-   [How to Enlist an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154853) (http://go.microsoft.com/fwlink/?LinkId=154853).</span></span><br /><span data-ttu-id="2b111-131">-   [如何啟動協調流程](http://go.microsoft.com/fwlink/?LinkId=154854)(http://go.microsoft.com/fwlink/?LinkId=154854)。</span><span class="sxs-lookup"><span data-stu-id="2b111-131">-   [How to Start an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154854) (http://go.microsoft.com/fwlink/?LinkId=154854).</span></span>|  
|<span data-ttu-id="2b111-132">監視系統執行個體的原始的協調流程版本使用 群組中樞頁面上的查詢檢視。</span><span class="sxs-lookup"><span data-stu-id="2b111-132">Monitor the system for instances of the original orchestration version using the Group Hub page query view.</span></span>|<span data-ttu-id="2b111-133">[如何檢視協調流程的執行個體資訊](http://go.microsoft.com/fwlink/?LinkId=154855)(http://go.microsoft.com/fwlink/?LinkId=154855)。</span><span class="sxs-lookup"><span data-stu-id="2b111-133">[How to View Instance Information for an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154855) (http://go.microsoft.com/fwlink/?LinkId=154855).</span></span>|  
|<span data-ttu-id="2b111-134">所有其作用中、 凍結和擱置的執行個體完成時，解除部署應用程式從原始的協調流程。</span><span class="sxs-lookup"><span data-stu-id="2b111-134">When all of its active, dehydrated, and suspended instances are complete, undeploy the original orchestration from the application.</span></span>|<span data-ttu-id="2b111-135">[如何從應用程式移除協調流程](http://go.microsoft.com/fwlink/?LinkId=154856)(http://go.microsoft.com/fwlink/?LinkId=154856)。</span><span class="sxs-lookup"><span data-stu-id="2b111-135">[How to Remove an Orchestration from an Application](http://go.microsoft.com/fwlink/?LinkId=154856) (http://go.microsoft.com/fwlink/?LinkId=154856).</span></span>|  
|<span data-ttu-id="2b111-136">從每部執行應用程式的電腦上的 GAC，選擇性地解除安裝的原始組件版本。</span><span class="sxs-lookup"><span data-stu-id="2b111-136">Optionally uninstall the original assembly version from the GAC on each computer running the application.</span></span>|<span data-ttu-id="2b111-137">[如何從 GAC 解除安裝組件](http://go.microsoft.com/fwlink/?LinkId=154857)(http://go.microsoft.com/fwlink/?LinkId=154857)。</span><span class="sxs-lookup"><span data-stu-id="2b111-137">[How to Uninstall an Assembly from the GAC](http://go.microsoft.com/fwlink/?LinkId=154857) (http://go.microsoft.com/fwlink/?LinkId=154857).</span></span>|  
  
## <a name="binding-to-receive-ports-and-locations"></a><span data-ttu-id="2b111-138">繫結至接收埠和位置</span><span class="sxs-lookup"><span data-stu-id="2b111-138">Binding to Receive Ports and Locations</span></span>  
 <span data-ttu-id="2b111-139">如果您想要建立新接收埠和協調流程的新版本的位置，只要繫結至新的連接埠並登記/啟動新的成品將通常足以。</span><span class="sxs-lookup"><span data-stu-id="2b111-139">If you want to create new receive ports and locations for the new version of the orchestration, simply binding to the new ports and enlisting/starting the new artifacts will typically be sufficient.</span></span> <span data-ttu-id="2b111-140">建立新的接收位置和連接埠通常是慣用的方法，特別是當您的案例使用長時間執行的協調流程的數字的情況下相互關聯接收仍需要進行處理。</span><span class="sxs-lookup"><span data-stu-id="2b111-140">Creating new receive locations and ports is usually the preferred approach, especially if your scenario uses long-running orchestrations where a number of correlating receives still need to be processed.</span></span> <span data-ttu-id="2b111-141">在此情況下，您可能無法重複使用現有的接收埠，或執行 unenlistment。</span><span class="sxs-lookup"><span data-stu-id="2b111-141">In this case, you may not be able to reuse existing receive ports or perform unenlistment.</span></span> <span data-ttu-id="2b111-142">如果您建立新的連接埠，請務必也可處理這項變更讓後端和協力廠商系統。</span><span class="sxs-lookup"><span data-stu-id="2b111-142">If you create new ports, be sure that it is possible for your backend and partner systems to handle this change.</span></span> <span data-ttu-id="2b111-143">如果沒有，您必須等候所有長時間執行的執行個體，以做為目標，然後再升級。</span><span class="sxs-lookup"><span data-stu-id="2b111-143">If not, you will have to wait for all long-running instances to culminate before upgrading.</span></span>  
  
 <span data-ttu-id="2b111-144">如果您想要使用現有的連接埠，請執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="2b111-144">If you want to use existing ports, do the following:</span></span>  
  
1.  <span data-ttu-id="2b111-145">將新版本的協調流程繫結至現有的連接埠。</span><span class="sxs-lookup"><span data-stu-id="2b111-145">Bind the new version of the orchestration to existing ports.</span></span>  
  
2.  <span data-ttu-id="2b111-146">取消登錄 （但不是會停止） 舊的協調流程版本。</span><span class="sxs-lookup"><span data-stu-id="2b111-146">Unenlist (but do not stop) the old orchestration version.</span></span>  
  
3.  <span data-ttu-id="2b111-147">登錄並啟動新的協調流程版本。</span><span class="sxs-lookup"><span data-stu-id="2b111-147">Enlist and start the new orchestration version.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2b111-148">您可以使用指令碼執行步驟 2 和 3 中一個交易，使訊息不會遺失之間手動按一下訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="2b111-148">You can use a script to do steps 2 and 3 in one transaction, so that messages will not be missing subscriptions between manual clicking.</span></span>