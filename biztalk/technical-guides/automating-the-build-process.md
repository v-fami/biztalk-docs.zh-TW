---
title: 自動化建置程序 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 995dac20-82a1-46ed-b8a3-0aa6182cb821
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 22752c413446c0964b8af11b76a2e262fdc40a2d
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36997727"
---
# <a name="automating-the-build-process"></a>自動化建置程序
自動化的建置程序會編譯、 部署和則會針對最新的原始碼專案的組建驗證測試 (Bvt) 執行規則、 預先決定的間隔。 然後 「 組建報告，」 成功或失敗的建置程序，便會詳細說明，被散播給專案關係人。 建置報告，就會分析來判斷專案的區域需要注意，如果專案應該會回復的較早的版本/組建。  
  
 自動化的建置程序的威力在於它可以排定執行期間 「 關閉小時"。 如此一來，它可以協助確保專案的穩定性，無須直接從開發階段的循環。   
 本主題提供建置程序的概觀，說明如何組建驗證測試放入建置流程、 組建驗證測試期間使用的功能測試的各個面向說明並提供資訊的重要性自動化建置程序。  
  
## <a name="overview-of-the-build-process"></a>建置程序的概觀  
 之前想要測試的詳細資訊，請務必考慮測試如何融入整體的建置程序的內容。 所有 Microsoft 產品小組從哲學操作建置程序是任何軟體專案的活動訊號。 這個方法也會使用許多全球諮詢公司，建置任務關鍵性的解決方案，Microsoft 軟體堆疊頂端的頂端。 如果沒有穩定的活動訊號和定期檢查它，就無法知道專案的健康狀態。 若要確保產品群組有連續的深入解析到專案的整體健全狀況，建置程序會每日，通常在午夜執行。 下列步驟摘要說明典型的自動化的建置程序：  
  
1.  從原始程式碼存放庫取得原始碼的最新組建。  
  
2.  編譯的原始程式碼。  
  
3.  組件的部署 – 通常會使用指令碼或 Microsoft Windows Installer 檔案的二進位檔。  
  
4.  將專案部署至測試伺服器。  
  
5.  自動執行一組完整組建驗證測試 (Bvt)。  
  
6.  詳細的組建報表發行到專案小組的成員。  
  
> [!NOTE]  
>  Bvt 是功能性測試，以演練要測試其品質解決方案的主要功能。  您需要確保您 Bvt 完整到量測計配置的每日組建時間內執行組建的品質，還得夠小 ！  
  
> [!NOTE]  
>  您也應該將任何的部署、 解除部署、 設定和安裝指令碼或處理程序，視為供測試用途的軟體專案的一部分。 應該經過測試的專案，以及部署和設定，這兩項作業。  
  
 此程序通常是清晨大約早上 6 點，可讓小組的第一個成員上建置新一天的啟動工作來完成的。 如果一或多個從先前的夜間 Bvt 失敗，它是小組的責任，儘速修正此問題。  
  
 每日的建置程序之後有專案的許多優點。 首先，它會提供定期活動訊號 （組成的每日組建，再加上自動化的 Bvt）。 第二，使用 Bvt 強制與系統整合，這是相當棘手的工作，並執行此動作早期本身可以降低專案風險。 若要完成所需的時間，因為壓力與效能測試通常會執行每日組建程序之外。 壓力與效能測試通常被排定在專案中的里程碑組建上執行。  
  
 每日組建程序，且已用，非常有效的 BizTalk 解決方案。 不過，您需要確保從一開始反覆地完成工作，通常會保留在專案結尾。 比方說，在 BizTalk Server 中的部署是絕對重要的。 請務必事先開發自動化的部署指令碼。 如果不這麼做，您會以手動方式部署和解除部署結束許多時間在整個專案中，成本更多的時間，最後的解決方案。 有一些工具可用來驅動每日的建置程序;Visual Studio Team System 與 Team Foundation Server 是許多人的主要選擇。 MSBuild 指令碼可用來建置程序中的磁碟機的步驟使用。 另一個替代方式是開放原始碼[CruiseControl.NET 工具](http://go.microsoft.com/fwlink/?LinkId=116093)(http://go.microsoft.com/fwlink/?LinkId=116093)。  
  
> [!NOTE]  
>  Microsoft 不支援使用這個工具，Microsoft 不保證此程式的適用性。 請自行承擔使用這個程式的一切風險。  
  
 如需有關如何將自動化測試使用 Microsoft Test manager 的詳細資訊，請參閱主題[執行自動化測試](http://go.microsoft.com/fwlink/?LinkID=208368)(http://go.microsoft.com/fwlink/?LinkID=208368)在 Visual Studio 2010 的線上文件  
  
 如需有關如何使用 Visual Studio 2010 建置程序自動化的詳細資訊，請參閱 <<c0> [ 建置應用程式](http://go.microsoft.com/fwlink/?LinkID=208369)(HYPERLINK"<http://go.microsoft.com/fwlink/?LinkID=208369>" <http://go.microsoft.com/fwlink/?LinkID=208369>) Visual Studio 2010 文件中。  
  
## <a name="build-verification-testing"></a>組建驗證測試  
 組建驗證測試時，通常會包含下列項目：  
  
- **單元測試**-因為單元測試通常是第一次的測試，以進行開發，在理想情況下它們應該先建立實際上已寫入程式碼，如果您真正想要使用測試導向開發方法。 藉由將它們新增到 Bvt 在專案早期階段，您提供一些程式碼涵蓋範圍執行下列立即。 功能測試的數字，因此測試涵蓋範圍增加時，您也可以選擇移除 Bvt 的單元測試。  
  
- **煙霧測試**-測試您的解決方案的基本功能的端對端功能測試。 如果這些失敗，是嚴重的錯誤。 這些通常執行起來相對較快。  
  
- **功能測試**-也指定的目標端對端案例中，但在此情況下它們在專案中，會在測試的所有案例時。 針對大型專案可能合理分類您功能的測試，以進一步 (比方說，若要啟用快速、 可靠且隔離要測試的特定元件)。 您有已核准您的解決方案在功能上正確之後，應會鎖定這些功能的測試。  
  
- **迴歸驗證測試**-每次找到並修正，迴歸測試案例應該將確認 bug 已修正，而且，它會重新引入稍後在專案生命週期中的驗證解決方案 bug。  這些測試通常是功能測試案例中未涵蓋的案例。 您應該預期迴歸驗證測試會增加數目，即使解決方案已啟動，如果找到並修正新的 bug。  
  
  在非常大型的專案，您可能需要讓您 Bvt （因為它們執行所需的時間長度） 的完整功能的測試套件的子集。 對於較小的專案，Bvt 會構成整個集合。 很明顯地，如果您要整合 Bvt 每日組建的一部分，整個程序必須自動化。 在本主題的其餘部分，我們將著重在如何使用 BizUnit 和其他工具來完成這項作業。  
  
## <a name="functional-testing"></a>功能測試  
 在內容中的 BizTalk 應用程式功能測試，測試特定的端對端案例。 在執行這種類型的測試，最好想像為黑色方塊的功能測試從外部的觀點來看的 BizTalk Server。 例如，測試可能涉及饋送 （與已知的值） 的輸入的訊息到接收位置的結束點 (範例中，URL 中，FTP 位置，無論您選擇的傳輸是)。 測試會監視正確的傳送端會在產生的正確輸出的訊息數目。 這聽起來可能相當簡單。 不過，當您考慮某些情況下需要以特定順序，並在一段時間的輸入，您將此複合其他方案需求 (例如，記錄在 BAM 中的追蹤資料時)，就不難，工具和架構可以用來協調這種情況。  
  
 很重要的功能測試設計來涵蓋所有可能的路徑，透過您的解決方案。 這應該包含不只是這些情況下您預期在實際執行環境，但也失敗路徑和例外狀況處理路徑，您已實作，但不是希望使用 – 一個詞彙，通常用來描述這個進行測試，如 < 壞日子案例 >。 您應該確定所有的協調流程、 所有允許的訊息類型，和所有的程式碼分支會運用的功能測試套件。 下列各節會說明開發正數和負數功能測試案例來涵蓋所有程式碼路徑。  
  
 如需功能測試的詳細資訊和其他測試類別應實作之前先將 BizTalk Server 解決方案放入生產環境中，請參閱主題[檢查清單： 測試作業整備](http://go.microsoft.com/fwlink/?LinkId=160138)中在 BizTalk Server 2010 作業指南[ http://go.microsoft.com/fwlink/?LinkId=160138 ](http://go.microsoft.com/fwlink/?LinkId=160138)。  
  
### <a name="positive-tests"></a>正向測試  
  
-   執行正向測試以確保所有的訊息、 管線、 協調流程、 組合時很重要，且端點已傳送的解決方案，這樣會執行所有的訊息流程。 若要確定您會測試所有的程式碼路徑可能會需要您處理不同的訊息，以不同的內容。  
  
-   測試時，使用 將生產環境中使用的傳輸類型。 不幸的是，太多，功能測試是只能執行某些其他傳輸將會使用在生產環境中時，請使用 file 配接器。 採用這個方法設定寄件者和整體專案進行失敗之後。  
  
-   驗證從系統傳送的所有訊息的承載。 如果訊息是 XML，您應該驗證其結構描述和訊息使用 XPath 運算式中的索引鍵欄位。  
  
-   驗證儲存在 BAM （使用） 時，任何追蹤資料需要克服會留在外部資料存放庫的任何其他資料。  
  
-   如果您的方案使用 BRE，請測試所有的商務規則引擎 (BRE) 原則和規則的執行。  
  
### <a name="negative-tests"></a>負向測試  
  
-   請確定您透過您的系統測試的 無效的訊息處理。 您應該確認您所選擇的策略 （拒絕它們，再放到 BizTalk Server 中，或是擱置那些） 已正確運作。  
  
-   在測試的 無效的訊息處理時，請確定您測試任何接收端的錯誤處理協調流程，已實作來處理擱置的訊息。  
  
-   請確定您失敗的案例，說明在您的協調流程中的所有例外狀況區塊。  若要充分測試此失敗是常見的問題。  
  
-   如果您使用長時間執行的交易與補償行為，請非常仔細測試這些案例。 這是其中不適當的測試將會產生嚴重的後果，在生產環境中的另一個區域。  
  
-   請確定失敗會記錄正確適當的錯誤記錄檔。  
  
## <a name="automation-is-key"></a>自動化是索引鍵  
 若要有效率且有效地完成上述動作，將心力灌注事先將自動化測試的時間。 手動測試是耗時、 容易出錯且昂貴 （以時間和成本）。 每次您執行手動測試時，您會新增另一個批次已由專案資源 （在小組中的人員） 的工作。 藉由將此自動化最前面位置，就可以取得開發測試，每次執行時，才在初始投資報酬率。 良好的功能測試應快速且有效率地執行，且應可重複;每項測試也應該自發 （它應該以獨立於任何其他的方式是，採用這個方法可讓您為測試套件以循序方式執行多個測試）。功能測試應該一律產生相同的結果。 撰寫不夠周全的功能測試或撰寫不夠周全的程式碼會導致不同的測試結果之間測試回合，導致混淆和減少浪費的時間調查失敗的根本原因。  
  
 請務必盡可能減少所需寫入每個功能測試的開發作業。 它是要產生項目 （依據開發時間）、 較少的測試案例可能會得到通常更昂貴。 這表示您必須透過您的程式碼的測試涵蓋範圍較低層級。 藉由使用的測試架構，您可以開發更快速且輕鬆的測試案例，因此，讓您更輕鬆地取得完整的程式碼涵蓋範圍。 大部分的很好的測試架構會使用宣告式的方法，用來定義測試。 （也就是測試組態會儲存在組態檔，通常是 XML 檔案中）。使用很好的測試架構可讓您開發完整功能測試套件以敏捷式軟體開發且可靠的方式，以及就不需要 「 重新發明車輪 」，就是所謂。  
  
## <a name="msbuild-support-for-biztalk-server-projects"></a>BizTalk Server 專案的 MSBUILD 支援  
 BizTalk Server 提供的 Microsoft 組建引擎 (MSBUILD) 平台，可容納在未安裝 Visual Studio 的組建實驗室環境中的 managed 專案的建置支援。 MSBUILD 可容納從命令列] 和 [進階的功能，包括記錄和批次處理的 MSBUILD 建置專案。 如需 MSBUILD 的詳細資訊，請參閱[MSBuild 概觀](http://go.microsoft.com/fwlink/?LinkId=131739)(http://go.microsoft.com/fwlink/?LinkId=131739)。  
  
## <a name="see-also"></a>另請參閱  
 [實作自動化的測試](../technical-guides/implementing-automated-testing.md)