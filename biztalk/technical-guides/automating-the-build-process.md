---
title: 自動化建置流程 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 995dac20-82a1-46ed-b8a3-0aa6182cb821
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d62380146f0bfba188843ed0e022340d88fcaceb
ms.sourcegitcommit: 36350889f318e1f7e0ac9506dc8df794d475bda6
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/20/2018
ms.locfileid: "26010263"
---
# <a name="automating-the-build-process"></a>自動化建置程序
自動化的建置程序會編譯、 部署和則會針對最新的原始碼專案的組建驗證測試 (Bvt) 執行一般的預先決定的間隔。 然後 「 組建報告，」 成功或失敗的建置程序會詳細說明，為該專案的專案關係人。 分析組建報告來判斷哪些區域的專案需要注意，如果專案應該會回復的較早的版本/組建。  
  
 自動化的建置程序的功能是它可以排程要執行時段 」 關閉。 」 如此一來，它可以協助確保專案的穩定性而不顧循環直接離開的開發時間。   
 本主題提供的建置流程概觀，描述如何組建驗證測試放入建置流程、 說明層面在組建驗證測試期間使用的功能測試以及提供資訊的重要性自動化建置程序。  
  
## <a name="overview-of-the-build-process"></a>建置程序概觀  
 之前想要測試的詳細資訊，請務必考慮如何測試配合整體的建置程序的內容。 所有 Microsoft 的產品群組從原理運作建置程序是任何軟體專案的活動訊號。 這個方法也會使用許多世界上諮詢建置 Microsoft 軟體堆疊的頂端的關鍵任務解決方案的公司。 如果沒有穩定的活動訊號和定期檢查它，就無法知道專案的健康狀態。 若要確保產品群組專案的整體健全狀況連續深入了解，在建置程序是每天執行，通常在午夜。 下列步驟概述典型的自動化的建置程序：  
  
1.  從原始程式碼儲存機制取得原始程式碼的最新組建。  
  
2.  編譯原始程式碼。  
  
3.  組件的部署 – 通常會使用指令碼或 Microsoft Windows Installer 檔案的二進位檔。  
  
4.  將專案部署到測試伺服器。  
  
5.  自動執行一組完整組建驗證測試 (Bvt)。  
  
6.  詳細的組建將報表發行至專案小組的成員。  
  
> [!NOTE]  
>  Bvt 會運用以測試其品質解決方案的主要功能的功能測試。  您需要確保您 Bvt 完整到量測計配置的每日建置時間內執行組建的品質，但夠小 ！  
  
> [!NOTE]  
>  您也應該將任何的部署、 解除部署、 設定和安裝指令碼或程序視為基於測試目的軟體專案的一部分。 應該經過測試的專案，以及部署和設定，這兩項作業。  
  
 此程序通常是清晨大約早上 6 點，可讓小組工作的新一天的組建開始的第一個成員來完成。 如果一或多個從前一晚 Bvt 失敗，它會儘速加以修正的小組的責任。  
  
 每日的建置程序有許多優點，專案。 首先，它會提供規則的活動訊號 （組成每日組建加上自動化的 Bvt）。 第二，使用 Bvt 強制困難的工作，與系統的整合，並執行此動作早期本身可以降低專案風險。 完成所需的時間，因為壓力和效能測試通常會執行每日建置程序之外。 壓力和效能測試通常排程為在專案中的里程碑組建上執行。  
  
 每日建置程序，並已經用於，有效地 BizTalk 解決方案。 不過，您需要確保從一開始反覆完成工作，通常會保留在專案結尾。 例如，BizTalk Server 中的部署是當然非一般。 請務必事先開發自動化的部署指令碼。 如果不這麼做，您最後手動部署和解除部署整個專案中，花費更多的時間，最後幾次方案。 有一些工具可用來驅動每日的建置程序。Visual Studio Team System 與 Team Foundation Server 是許多人的主要選擇。 MSBuild 指令碼可能會用來建置程序中的磁碟機的步驟。 另一個替代方式是開放原始碼[CruiseControl.NET 工具](http://go.microsoft.com/fwlink/?LinkId=116093)(http://go.microsoft.com/fwlink/?LinkId=116093)。  
  
> [!NOTE]  
>  使用此工具不支援的 Microsoft，Microsoft 並不保證此程式的適用性。 請自行承擔使用這個程式的一切風險。  
  
 如需有關如何自動化測試使用 Microsoft Test manager 的詳細資訊，請參閱[執行自動化測試](http://go.microsoft.com/fwlink/?LinkID=208368)(http://go.microsoft.com/fwlink/?LinkID=208368) Visual Studio 2010 的線上文件中  
  
 如需有關如何自動化使用 Visual Studio 2010 建置程序的詳細資訊，請參閱[建置應用程式](http://go.microsoft.com/fwlink/?LinkID=208369)(超連結"http://go.microsoft.com/fwlink/?LinkID=208369" http://go.microsoft.com/fwlink/?LinkID=208369) Visual Studio 2010 文件中。  
  
## <a name="build-verification-testing"></a>組建驗證測試  
 組建驗證測試時，通常會包含下列項目：  
  
-   **單元測試**-單元測試通常是要開發的第一個測試，因為在理想情況下它們應該先建立實際撰寫程式碼，如果您真正想要使用以測試為導向的開發方法。 將它們新增到 Bvt 專案的早期階段，您提供至少部分的程式碼涵蓋範圍立即。 功能測試的數目和因此測試涵蓋範圍的成長時，您也可以選擇移除 Bvt 單元測試。  
  
-   **煙霧測試**-端對端功能測試，測試您的解決方案的基本功能。 如果這些失敗的項目很嚴重的錯誤。 這些通常是相當快速執行。  
  
-   **功能測試**-也指定的目標端對端案例中，但它們在此情況下測試的所有案例，在專案中。 用於大型專案中，將可能有意義分類程式功能的測試，以進一步 (比方說，若要啟用快速、 可靠地和隔離要測試的特定元件)。 在您簽署在您的方案為作用正確之後，應該要鎖定這些功能的測試。  
  
-   **迴歸驗證測試**-每次方案 bug 已找到並修正問題，應將測試案例加入確認 bug 已修正而且，它會重新引入稍後在專案生命週期中的迴歸驗證。  這些測試通常會是未涵蓋的功能的測試案例中的案例。 您應該預期迴歸驗證測試會增加數目，即使方案已啟動，如果找到並修正新的 bug。  
  
 在大型專案中，您可能需要讓您 Bvt （因為它們需要執行的時間長度） 的完整功能測試套件的子集。 對於較小的專案，Bvt 會構成整個集合。 很明顯地，如果您要整合 Bvt 程式每日組建的一部分，整個程序需要自動化。 在本主題的其餘部分，我們將著重在如何使用 BizUnit 和其他工具來完成這項作業。  
  
## <a name="functional-testing"></a>功能測試  
 在內容中的 BizTalk 應用程式功能測試，測試特定的端對端案例。 當執行這種類型的測試，會很有用來為您從外部的觀點來看測試功能上的黑色方塊假設 BizTalk Server。 例如，測試可能涉及饋送 （具有已知的值） 的輸入的訊息到接收位置的結束點 (範例中，URL、 FTP 位置，無論您選擇的傳輸是)。 測試便會監視正確的傳送端會產生正確輸出的訊息數目。 這似乎相當簡單。 不過，當您考慮某些情況下需要返回以特定順序，而是在一段時間的輸入，及您複合這與其他方案的需求 (例如，記錄在 BAM 中追蹤資料時)，它會變得清楚的工具及架構可以用來協調這種情況。  
  
 很重要的功能測試設計來涵蓋所有可能的路徑，透過您的方案。 這應該包含不只的情況下您預期在生產環境中，但是也失敗路徑和例外狀況處理路徑，您已實作但永遠不會希望使用 – 一個詞彙，通常用來描述這個測試中的 < 錯誤天狀況 >。 您應該確定所有的協調流程、 所有允許的訊息類型，以及所有程式碼分支所運用的功能測試套件。 下列章節說明開發正數和負數功能測試案例涵蓋所有程式碼路徑。  
  
 如功能測試的詳細資訊和其他測試類別應實作放入實際執行環境，BizTalk Server 解決方案之前，請參閱本主題[檢查清單： 測試操作整備](http://go.microsoft.com/fwlink/?LinkId=160138)中BizTalk Server 2010 操作指南 》，網址[ http://go.microsoft.com/fwlink/?LinkId=160138 ](http://go.microsoft.com/fwlink/?LinkId=160138)。  
  
### <a name="positive-tests"></a>正向測試  
  
-   執行以確保所有的訊息、 管線、 協調流程，組合的正向測試時很重要，而端點都會通過方案，這樣會執行所有的訊息流程。 若要確定您會測試所有的程式碼路徑可能會需要您處理使用不同的內容不同的訊息。  
  
-   測試時，請使用將在生產環境中使用的傳輸類型。 不幸的是，太多，功能測試執行時將使用一些其他傳輸，在生產環境中使用 file 配接器。 採用這個方法設定您和整體專案進行失敗之後。  
  
-   驗證從系統傳送的所有訊息的裝載。 如果訊息是 XML，您應該驗證其結構描述和訊息使用 XPath 運算式中的索引鍵欄位。  
  
-   驗證所有的追蹤資料儲存在 BAM 中 （如果使用）;需要克服留在外部資料儲存機制中的任何其他資料。  
  
-   如果您的方案使用 BRE，請測試所有商務規則引擎 (BRE) 原則和規則的執行。  
  
### <a name="negative-tests"></a>負向測試  
  
-   確定您會透過您的系統測試無效訊息的處理。 您應該確認您所選擇的策略 （之前在 BizTalk Server 拒絕它們或是擱置那些） 已正確運作。  
  
-   當測試無效訊息的處理，請確定您測試任何接收端的錯誤處理協調流程的已實作來處理擱置的訊息。  
  
-   請確定您的失敗案例涵蓋協調流程中的所有例外狀況區塊。  若要充分測試這不是常見的問題。  
  
-   如果您使用長時間執行的交易與補償行為，請非常仔細地測試這些案例。 這是在不適當的測試將會產生嚴重的後果，生產環境中的另一個區域。  
  
-   請確定失敗會記錄正確在適當的錯誤記錄檔。  
  
## <a name="automation-is-key"></a>自動化是索引鍵  
 若要有效率且有效地完成上述動作，投資的最前面位置將自動化測試的時間。 手動測試相當耗時，容易出錯，而且耗用 （大量時間和成本）。 每次您執行手動測試時，您會加入另一個批次已由專案資源 （在小組中的人） 來處理的工作。 這最前面位置自動化，您便能夠取得，才能開發測試每次執行在初始投資報酬率。 良好的功能測試應該迅速、 有效地執行，而且可以重複;每項測試也應該是自發 （它應該獨立於任何其他; 採用這個方法可讓您為測試套件以循序方式執行多個測試）。功能測試應該一律產生相同的結果。 撰寫不夠周全的功能測試 」 或 「 撰寫不夠周全的程式碼將會導致測試回合，導致混淆和調查失敗的根本原因的浪費的時間之間的不同的測試結果。  
  
 請務必將撰寫每項功能的測試所需的開發工作降至最低。 它是以產生 （依據開發時間） 的項目較少的測試案例，可能會得到通常會較為昂貴。 這表示您必須透過您的程式碼的測試涵蓋範圍較低層級。 藉由使用的測試架構，您可以開發更快速且輕鬆測試案例，因此，更輕鬆地取得完整的程式碼涵蓋範圍。 大部分的很好的測試架構會使用宣告式方法定義的測試。 （也就是測試組態會儲存在組態檔中，通常是 XML 檔案）。使用很好的測試架構可讓您開發完整功能測試套件以敏捷式軟體開發且可靠的方式，以及可避免 「 造"一再重複，所以必須。  
  
## <a name="msbuild-support-for-biztalk-server-projects"></a>BizTalk Server 專案的 MSBUILD 支援  
 BizTalk Server 提供的 Microsoft Build Engine (MSBUILD) 平台，可容納在未安裝 Visual Studio 的組建實驗室環境中的 managed 專案的建置支援。 MSBUILD 可容納從命令列] 和 [進階的功能，包括記錄和批次處理的 MSBUILD 建置專案。 如需 MSBUILD 的詳細資訊，請參閱[MSBuild 概觀](http://go.microsoft.com/fwlink/?LinkId=131739)(http://go.microsoft.com/fwlink/?LinkId=131739)。  
  
## <a name="see-also"></a>另請參閱  
 [實作自動化的測試](../technical-guides/implementing-automated-testing.md)