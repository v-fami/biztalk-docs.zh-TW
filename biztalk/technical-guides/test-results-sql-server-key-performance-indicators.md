---
title: 測試結果： SQL Server 關鍵效能指標 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2459ee6d-7a75-4338-ba5c-f42ab673ab87
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ed7f1348a23e6c4b145748ccfc0832c97648bdff
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37007511"
---
# <a name="test-results-sql-server-key-performance-indicators"></a><span data-ttu-id="b9f6c-102">測試結果： SQL Server 關鍵效能指標</span><span class="sxs-lookup"><span data-stu-id="b9f6c-102">Test Results: SQL Server Key Performance Indicators</span></span>
<span data-ttu-id="b9f6c-103">本主題摘要說明 SQL Server 關鍵效能指標 (KPI) 內所觀測到的測試案例。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-103">This topic summarizes SQL Server Key Performance Indicators (KPI) observed during the test scenarios.</span></span> <span data-ttu-id="b9f6c-104">這些測試會評估下列的 SQL Server KPI:</span><span class="sxs-lookup"><span data-stu-id="b9f6c-104">These tests evaluated the following SQL Server KPI:</span></span>  
  
-   <span data-ttu-id="b9f6c-105">所測量的 SQL 的處理器使用率**\SQL\Processor(_Total)\\%Processor Time**效能監視器計數器。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-105">SQL Processor Utilization as measured by the **\SQL\Processor(_Total)\\% Processor Time** performance monitor counter.</span></span>  
  
-   <span data-ttu-id="b9f6c-106">每秒所測量的 TRANSACT-SQL 命令批次數目接收**\SQL Server:SQL Statistics\Batch Requests/sec**效能監視器計數器。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-106">The number of Transact-SQL command batches received per second as measured by the **\SQL Server:SQL Statistics\Batch Requests/sec** performance monitor counter.</span></span>  
  
## <a name="summary-of-sql-server-key-performance-indicators"></a><span data-ttu-id="b9f6c-107">SQL Server 關鍵效能指標的摘要</span><span class="sxs-lookup"><span data-stu-id="b9f6c-107">Summary of SQL Server Key Performance Indicators</span></span>  
 <span data-ttu-id="b9f6c-108">每個案例，讓邏輯處理器和虛擬處理器的數目已對等，已限制實體機器。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-108">For each scenario the physical machines were restricted so that number of logical processors and virtual processors was equivalent.</span></span> <span data-ttu-id="b9f6c-109">這是使用 /maxmem 和 /numproc 的 boot.ini 參數。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-109">This was done using the /maxmem and /numproc boot.ini switches.</span></span> <span data-ttu-id="b9f6c-110">使用這些參數的詳細資訊，請參閱 < 開機 INI 選項參考 >，網址[ http://go.microsoft.com/fwlink/?LinkId=122139 ](http://go.microsoft.com/fwlink/?LinkId=122139)。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-110">For more information about using these switches, see “Boot INI Options Reference” at [http://go.microsoft.com/fwlink/?LinkId=122139](http://go.microsoft.com/fwlink/?LinkId=122139).</span></span>  
  
 <span data-ttu-id="b9f6c-111">**比較 SQL Server 關鍵效能指標 –** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]所測量的處理器使用率**\SQL\Processor(_Total)\\%Processor Time**計數器是大約相同的所有測試環境中，範圍從 88%的低到高的 90.1%。  </span><span class="sxs-lookup"><span data-stu-id="b9f6c-111">**Comparison of SQL Server Key Performance Indicators –**  [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] processor utilization as measured by **\SQL\Processor(_Total)\\% Processor Time** counter was approximately the same on all test environments, ranging from a low of 88% to a high of 90.1%.</span></span> <span data-ttu-id="b9f6c-112">不過沒有明顯差異**\SQL Server:SQL Statistics\Batch Requests/sec**以整合的環境 (4520) 和**\SQL Server:SQL Statistics\Batch Requests/sec**測量實體環境 (6350)。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-112">There is however a significant difference between the **\SQL Server:SQL Statistics\Batch Requests/sec** measured on the consolidated environment (4520) and the **\SQL Server:SQL Statistics\Batch Requests/sec** measured on the physical environment (6350).</span></span> <span data-ttu-id="b9f6c-113">**\SQL Server:SQL Statistics\Batch Requests/sec**效能監視器計數器提供多少工作正在執行的 SQL Server 的良好指標。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-113">The **\SQL Server:SQL Statistics\Batch Requests/sec** performance monitor counter provides a good indicator of how much work is being performed by SQL Server.</span></span> <span data-ttu-id="b9f6c-114">Batch Requests/sec 在 HYPER-V 環境中執行 SQL Server 時縮小可歸咎於 HYPER-V 所需的 CPU 額外負荷。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-114">The reduction in Batch Requests/sec when SQL Server is running in a Hyper-V environment can be attributed to the CPU overhead required by Hyper-V.</span></span>  
  
 <span data-ttu-id="b9f6c-115">差別，不過，重要**\SQL Server:SQL Statistics\Batch Requests/sec**在整合環境 (4520) 上測量而**\SQL Server:SQL Statistics\Batch Requests/sec**測量實體環境 (6350)。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-115">There is, however, a significant difference between the **\SQL Server:SQL Statistics\Batch Requests/sec** measured on the consolidated environment (4520) and the **\SQL Server:SQL Statistics\Batch Requests/sec** measured on the physical environment (6350).</span></span> <span data-ttu-id="b9f6c-116">**\SQL Server:SQL Statistics\Batch Requests/sec**效能監視器計數器提供多少工作正在執行的 SQL Server 的良好指標。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-116">The **\SQL Server:SQL Statistics\Batch Requests/sec** performance monitor counter provides a good indicator of how much work is being performed by SQL Server.</span></span> <span data-ttu-id="b9f6c-117">Batch Requests/sec 在 HYPER-V 環境中執行 SQL Server 時縮小可歸咎於 HYPER-V 所需的 CPU 額外負荷。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-117">The reduction in Batch Requests/sec when SQL Server is running in a Hyper-V environment can be attributed to the CPU overhead required by Hyper-V.</span></span>  
  
 <span data-ttu-id="b9f6c-118">請遵循下列步驟，以增加所測量的 HYPER-V 虛擬機器上執行的 SQL Server 效能**\SQL Server:SQL Statistics\Batch Requests/sec**效能監視器計數器：</span><span class="sxs-lookup"><span data-stu-id="b9f6c-118">Follow these steps to increase performance of SQL Server running on a Hyper-V virtual machine as measured by the **\SQL Server:SQL Statistics\Batch Requests/sec** performance monitor counter:</span></span>  
  
1. <span data-ttu-id="b9f6c-119">**配置額外的固定的 VHD 磁碟，使用專用的虛擬控制站和通道 –** 其他固定的 VHD 磁碟使用的配置專用的虛擬控制器，通道會增加與使用單一的 VHD 磁碟的磁碟輸送量。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-119">**Allocate additional fixed VHD disks with dedicated virtual controllers and channels –** Allocation of additional fixed VHD disks using dedicated virtual controllers and channels will increase disk throughput versus using a single VHD disk.</span></span>  
  
2. <span data-ttu-id="b9f6c-120">**最佳化網路效能 –** 依照 < 最佳化網路效能 > 一節中所述的步驟[檢查清單： 在 HYPER-V 上的 最佳化效能](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md)。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-120">**Optimize Network Performance –** Follow steps outlined in the “Optimize Network Performance” section of [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span> <span data-ttu-id="b9f6c-121">在相同的 HYPER-V 主機上執行多部 HYPER-V 虛擬機器時，特別重要，遵循 「 設定相同的 HYPER-V 上執行的 HYPER-V 虛擬機器主機的電腦以使用私人虛擬網路 」 一節中的建議[網路最佳化](../technical-guides/network-optimizations.md)。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-121">When running multiple Hyper-V virtual machines on the same Hyper-V host it is of particular importance to follow recommendations in the “Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network” section of [Network Optimizations](../technical-guides/network-optimizations.md).</span></span>  
  
   <span data-ttu-id="b9f6c-122">因為無狀態性質[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]其他[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]虛擬機器可以輕鬆地新增到環境為必要項目來提供向外延展，並增加系統的整體效能。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-122">Because of the stateless nature of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], additional [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] virtual machines can be easily added to the environment as required to provide scale out and increase the overall performance of the system.</span></span>  
  
   <span data-ttu-id="b9f6c-123">下圖說明各種測試平台上的 SQL Server 效能：</span><span class="sxs-lookup"><span data-stu-id="b9f6c-123">The graphic below illustrates the performance of SQL Server on the various test platforms:</span></span>  
  
   <span data-ttu-id="b9f6c-124">![SQL 關鍵效能指標](../technical-guides/media/sqlkpi.gif "SQLKPI")</span><span class="sxs-lookup"><span data-stu-id="b9f6c-124">![SQL Key Performance Indicators](../technical-guides/media/sqlkpi.gif "SQLKPI")</span></span>  
   <span data-ttu-id="b9f6c-125">SQL 關鍵效能指標</span><span class="sxs-lookup"><span data-stu-id="b9f6c-125">SQL Key Performance Indicators</span></span>  
  
   <span data-ttu-id="b9f6c-126">下表說明收集 KPI 的每個組態的相對效能。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-126">The table below illustrates the relative performance of the collected KPI’s for each configuration.</span></span> <span data-ttu-id="b9f6c-127">每個結果集的計算方式為基準設定 KPI 的百分比</span><span class="sxs-lookup"><span data-stu-id="b9f6c-127">Each result set is calculated as a percentage of the Baseline configuration KPI</span></span>  
  
|<span data-ttu-id="b9f6c-128">KPI</span><span class="sxs-lookup"><span data-stu-id="b9f6c-128">KPI</span></span>|<span data-ttu-id="b9f6c-129">虛擬 BizTalk/實體 SQL</span><span class="sxs-lookup"><span data-stu-id="b9f6c-129">Virtual BizTalk/Physical SQL</span></span>|<span data-ttu-id="b9f6c-130">在個別主機上的虛擬 BizTalk/虛擬 SQL</span><span class="sxs-lookup"><span data-stu-id="b9f6c-130">Virtual BizTalk/Virtual SQL on separate Hosts</span></span>|<span data-ttu-id="b9f6c-131">在 合併環境上的虛擬 BizTalk/虛擬 SQL</span><span class="sxs-lookup"><span data-stu-id="b9f6c-131">Virtual BizTalk/Virtual SQL on Consolidated environment</span></span>|  
|---------|-----------------------------------|----------------------------------------------------|--------------------------------------------------------------|  
|<span data-ttu-id="b9f6c-132">\SQL\Processor(_Total)\\%處理器時間</span><span class="sxs-lookup"><span data-stu-id="b9f6c-132">\SQL\Processor(_Total)\\% Processor Time</span></span>|<span data-ttu-id="b9f6c-133">97.7%</span><span class="sxs-lookup"><span data-stu-id="b9f6c-133">97.7%</span></span>|<span data-ttu-id="b9f6c-134">98.4%</span><span class="sxs-lookup"><span data-stu-id="b9f6c-134">98.4%</span></span>|<span data-ttu-id="b9f6c-135">99.9%</span><span class="sxs-lookup"><span data-stu-id="b9f6c-135">99.9%</span></span>|  
|<span data-ttu-id="b9f6c-136">\SQL server: SQL Statistics\Batch Requests/sec</span><span class="sxs-lookup"><span data-stu-id="b9f6c-136">\SQL Server:SQL Statistics\Batch Requests/sec</span></span>|<span data-ttu-id="b9f6c-137">97.1%</span><span class="sxs-lookup"><span data-stu-id="b9f6c-137">97.1%</span></span>|<span data-ttu-id="b9f6c-138">83.3%</span><span class="sxs-lookup"><span data-stu-id="b9f6c-138">83.3%</span></span>|<span data-ttu-id="b9f6c-139">71.2%</span><span class="sxs-lookup"><span data-stu-id="b9f6c-139">71.2%</span></span>|  
  
 <span data-ttu-id="b9f6c-140">如需如何評估磁碟 I/O 效能的詳細資訊，請參閱**測量磁碟 I/O 效能**主題中的一節[檢查清單： 測量 HYPER-V 上的效能](../technical-guides/checklist-measuring-performance-on-hyper-v.md)。</span><span class="sxs-lookup"><span data-stu-id="b9f6c-140">For more information about how to evaluate Disk I/O performance, see the **Measuring Disk I/O Performance** section of the topic [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span></span>  
  
 <span data-ttu-id="b9f6c-141">如需在 HYPER-V 環境中執行 SQL Server 2008 的最佳作法的詳細資訊，請參閱白皮書 < 執行 SQL Server 2008 in a HYPER-V 環境 – 最佳做法和效能建議 > 下載[ http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span><span class="sxs-lookup"><span data-stu-id="b9f6c-141">For more information about Best Practices when running SQL Server 2008 in a Hyper-V environment, see the whitepaper “Running SQL Server 2008 in a Hyper-V Environment – Best Practices and Performance Recommendations” available for download at [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span></span>