---
title: 步驟 4： 設定 BizTalk Server 環境的負載測試 |Microsoft Docs
ms.custom: ''
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 5f336c5f-5a18-493d-8fc0-a8a475ab47b3
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: cf3ab4c913a55be391d1e92522c257c4cd82d272
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36990351"
---
# <a name="step-4-configure-biztalk-server-environment-for-load-testing"></a><span data-ttu-id="a221e-102">步驟 4： 設定 BizTalk Server 環境的負載測試</span><span class="sxs-lookup"><span data-stu-id="a221e-102">Step 4: Configure BizTalk Server Environment for Load Testing</span></span>
<span data-ttu-id="a221e-103">本主題提供資訊，以建立 BizTalk Server 接收位置，接收埠和傳送埠，才能執行主題所述的程式碼範例[步驟 1： 建立單元測試，提交至 BizTalk Server 的文件](~/technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md)並[步驟 3： 建立負載測試，以便同時執行多個單元測試](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md)。</span><span class="sxs-lookup"><span data-stu-id="a221e-103">This topic provides information for creating the BizTalk Server Receive Locations, Receive Ports, and Send Ports required to run the sample code described in the topics [Step 1: Create a Unit Test to Submit Documents to BizTalk Server](~/technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md) and [Step 3: Create a Load Test to Perform Multiple Unit Tests Simultaneously](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md).</span></span>  

## <a name="configure-biztalk-server-environment-for-load-tests"></a><span data-ttu-id="a221e-104">設定 BizTalk Server 環境的負載測試</span><span class="sxs-lookup"><span data-stu-id="a221e-104">Configure BizTalk Server Environment for Load Tests</span></span>  
 <span data-ttu-id="a221e-105">本主題中所述[步驟 3： 建立負載測試來執行多個單元測試同時](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md)，在負載測試**BTS_Messaging_Step**設定為執行單元測試**BTSMessaging**並**BTSMessaging2**。</span><span class="sxs-lookup"><span data-stu-id="a221e-105">As described in the topic [Step 3: Create a Load Test to Perform Multiple Unit Tests Simultaneously](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md), the load test **BTS_Messaging_Step** is configured to execute the unit tests **BTSMessaging** and **BTSMessaging2**.</span></span> <span data-ttu-id="a221e-106">這些單元測試的載入一份訊息 C:\Projects\LoadTest\BTSLoad\TestMessages\TestXmlDocument.xml 依次，並將它傳送至的端點**BTSMessagingEP**並**BTSMessagingEP2**中所定義專案的應用程式組態檔 (app.config) 的下一節：</span><span class="sxs-lookup"><span data-stu-id="a221e-106">In turn, these unit tests load a copy of the message C:\Projects\LoadTest\BTSLoad\TestMessages\TestXmlDocument.xml and send it to the endpoints **BTSMessagingEP** and **BTSMessagingEP2** as defined in the following section of the project’s application configuration (app.config) file:</span></span>  

 <span data-ttu-id="a221e-107">\<\!-BTSMessagingEP-\>\<端點 address="net.tcp://*BizTalk Server 電腦*: 8123/btsloadtest 」 繫結 ="netTcpBinding"bindingConfiguration ="netTcpBinding"合約 ="System.ServiceModel.Channels.IRequestChannel 「 名稱 ="BTSMessagingEP"/\>\<端點 address="net.tcp://*BizTalk Server 電腦*: 8123/btsloadtest 」 繫結 ="netTcpBinding"bindingConfiguration ="netTcpBinding"contract="System.ServiceModel.Channels.IRequestChannel 「 名稱 ="BTSMessagingEP2"/                  \></span><span class="sxs-lookup"><span data-stu-id="a221e-107">\<\!-- BTSMessagingEP --\>         \<endpoint address="net.tcp://*BizTalk Server Computer*:8123/btsloadtest" binding="netTcpBinding" bindingConfiguration="netTcpBinding" contract="System.ServiceModel.Channels.IRequestChannel" name="BTSMessagingEP" /\>         \<endpoint address="net.tcp://*BizTalk Server Computer*:8123/btsloadtest" binding="netTcpBinding" bindingConfiguration="netTcpBinding" contract="System.ServiceModel.Channels.IRequestChannel" name="BTSMessagingEP2" /\></span></span>  

> [!NOTE]
>  <span data-ttu-id="a221e-108">如前文所述， *BizTalk Server 電腦*是實際的 BizTalk Server 電腦名稱，或在案例中，BizTalk Server 電腦設定為的網路負載平衡 (NLB) 叢集; 成員的預留位置*BizTalk Server 電腦*是預留位置的名稱或對應的 NLB 虛擬伺服器的位址。</span><span class="sxs-lookup"><span data-stu-id="a221e-108">As noted earlier, *BizTalk Server Computer* is a placeholder for the actual BizTalk Server computer names or, in the case that the BizTalk Server Computers are configured as members of a Network Load Balancing (NLB) cluster; *BizTalk Server Computer* is a placeholder for the name or address of the corresponding NLB virtual server.</span></span>  

 <span data-ttu-id="a221e-109">基於此範例的詳細資訊，使用兩部 BizTalk Server 電腦，並已在遠端 SQL Server 電腦上的 BizTalk Server Messagebox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="a221e-109">For purposes of this example, two BizTalk Server computers were used and the BizTalk Server Message Box database was on a remote SQL Server computer.</span></span>  

### <a name="create-biztalk-server-send-and-receive-hosts"></a><span data-ttu-id="a221e-110">建立 BizTalk Server 傳送和接收主控件</span><span class="sxs-lookup"><span data-stu-id="a221e-110">Create BizTalk Server Send and Receive Hosts</span></span>  
 <span data-ttu-id="a221e-111">請依照下列 BizTalk Server 文件主題中的步驟[如何建立新的主控](http://go.microsoft.com/fwlink/?LinkId=208595)(http://go.microsoft.com/fwlink/?LinkId=208595)建立 BizTalk Server 「 傳送 」 主控件的傳送埠和傳送配接器處理常式。</span><span class="sxs-lookup"><span data-stu-id="a221e-111">Follow the steps in the BizTalk Server Documentation topic [How to Create a New Host](http://go.microsoft.com/fwlink/?LinkId=208595) (http://go.microsoft.com/fwlink/?LinkId=208595) to create a BizTalk Server “Send” host for Send Ports and Send adapter handlers.</span></span> <span data-ttu-id="a221e-112">設定主應用程式具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="a221e-112">Configure the host with the following properties:</span></span>  

|<span data-ttu-id="a221e-113">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-113">Property</span></span>|<span data-ttu-id="a221e-114">值</span><span class="sxs-lookup"><span data-stu-id="a221e-114">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-115">名稱</span><span class="sxs-lookup"><span data-stu-id="a221e-115">Name</span></span>|<span data-ttu-id="a221e-116">TxHost</span><span class="sxs-lookup"><span data-stu-id="a221e-116">TxHost</span></span>|  
|<span data-ttu-id="a221e-117">類型</span><span class="sxs-lookup"><span data-stu-id="a221e-117">Type</span></span>|<span data-ttu-id="a221e-118">內含式</span><span class="sxs-lookup"><span data-stu-id="a221e-118">In-Process</span></span>|  
|<span data-ttu-id="a221e-119">允許主控件追蹤</span><span class="sxs-lookup"><span data-stu-id="a221e-119">Allow Host Tracking</span></span>|<span data-ttu-id="a221e-120">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-120">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-121">信任的驗證</span><span class="sxs-lookup"><span data-stu-id="a221e-121">Authentication Trusted</span></span>|<span data-ttu-id="a221e-122">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-122">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-123">僅限 32 位元</span><span class="sxs-lookup"><span data-stu-id="a221e-123">32-bit only</span></span>|<span data-ttu-id="a221e-124">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-124">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-125">將此預設主機群組中</span><span class="sxs-lookup"><span data-stu-id="a221e-125">Make this the default host in the group</span></span>|<span data-ttu-id="a221e-126">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-126">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-127">Windows 群組</span><span class="sxs-lookup"><span data-stu-id="a221e-127">Windows group</span></span>|<span data-ttu-id="a221e-128">用來控制對此主控件和相關聯的主控件執行個體的 Windows 群組。</span><span class="sxs-lookup"><span data-stu-id="a221e-128">The Windows group used to control access to this host and associated host instances.</span></span> <span data-ttu-id="a221e-129">建立的預設內含式主控件名稱為 視窗群組*\<電腦名稱\>* \BizTalk 應用程式使用者 （適用於單一伺服器安裝 BizTalk Server） 或 *\<網域名稱\>* \BizTalk 應用程式使用者 （適用於多部伺服器需要使用網域群組的 BizTalk Server 安裝）。</span><span class="sxs-lookup"><span data-stu-id="a221e-129">The Window group created for the default in-process host is named either *\<Computer Name\>* \BizTalk Application Users (for a single server BizTalk Server installation) or *\<Domain Name\>* \BizTalk Application Users (for a multiple server BizTalk Server installation, which requires the use of domain groups).</span></span> <span data-ttu-id="a221e-130">**注意︰***\<電腦名稱\>* 並*\<網域名稱\>* 都是實際的電腦名稱或使用的網域名稱的預留位置當已建立的群組。  </span><span class="sxs-lookup"><span data-stu-id="a221e-130">**Note:**  *\<Computer Name\>* and *\<Domain Name\>* are placeholders for the actual computer name or domain name used when the group was created.</span></span> <br /><br /> <span data-ttu-id="a221e-131">如果此主機會建立一個新的群組，則它必須具有主題所述的權限[主機群組](http://go.microsoft.com/fwlink/?LinkId=208803)(http://go.microsoft.com/fwlink/?LinkId=208803) BizTalk Server 文件。</span><span class="sxs-lookup"><span data-stu-id="a221e-131">If a new group is created for this host then it must have the privileges described in the topic [Host Groups](http://go.microsoft.com/fwlink/?LinkId=208803) (http://go.microsoft.com/fwlink/?LinkId=208803) in the BizTalk Server documentation.</span></span>|  

 <span data-ttu-id="a221e-132">重複執行建立 「 傳送 」 主控件，來建立 「 接收 」 主控件時遵循的步驟。</span><span class="sxs-lookup"><span data-stu-id="a221e-132">Repeat the steps that you followed when creating the “Send” host to create a “Receive” host.</span></span> <span data-ttu-id="a221e-133">使用下列屬性值來設定 「 接收 」 主控件：</span><span class="sxs-lookup"><span data-stu-id="a221e-133">Configure the “Receive” host with the following property values:</span></span>  

|<span data-ttu-id="a221e-134">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-134">Property</span></span>|<span data-ttu-id="a221e-135">值</span><span class="sxs-lookup"><span data-stu-id="a221e-135">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-136">名稱</span><span class="sxs-lookup"><span data-stu-id="a221e-136">Name</span></span>|<span data-ttu-id="a221e-137">RxHost</span><span class="sxs-lookup"><span data-stu-id="a221e-137">RxHost</span></span>|  
|<span data-ttu-id="a221e-138">類型</span><span class="sxs-lookup"><span data-stu-id="a221e-138">Type</span></span>|<span data-ttu-id="a221e-139">內含式</span><span class="sxs-lookup"><span data-stu-id="a221e-139">In-Process</span></span>|  
|<span data-ttu-id="a221e-140">允許主控件追蹤</span><span class="sxs-lookup"><span data-stu-id="a221e-140">Allow Host Tracking</span></span>|<span data-ttu-id="a221e-141">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-141">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-142">信任的驗證</span><span class="sxs-lookup"><span data-stu-id="a221e-142">Authentication Trusted</span></span>|<span data-ttu-id="a221e-143">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-143">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-144">僅限 32 位元</span><span class="sxs-lookup"><span data-stu-id="a221e-144">32-bit only</span></span>|<span data-ttu-id="a221e-145">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-145">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-146">將此預設主機群組中</span><span class="sxs-lookup"><span data-stu-id="a221e-146">Make this the default host in the group</span></span>|<span data-ttu-id="a221e-147">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-147">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-148">Windows 群組</span><span class="sxs-lookup"><span data-stu-id="a221e-148">Windows group</span></span>|<span data-ttu-id="a221e-149">用來控制對此主控件和相關聯的主控件執行個體的 Windows 群組。</span><span class="sxs-lookup"><span data-stu-id="a221e-149">The Windows group used to control access to this host and associated host instances.</span></span> <span data-ttu-id="a221e-150">建立的預設內含式主控件名稱為 視窗群組*\<電腦名稱\>* \BizTalk 應用程式使用者 （適用於單一伺服器安裝 BizTalk Server） 或 *\<網域名稱\>* \BizTalk 應用程式使用者 （適用於多部伺服器需要使用網域群組的 BizTalk Server 安裝）。</span><span class="sxs-lookup"><span data-stu-id="a221e-150">The Window group created for the default in-process host is named either *\<Computer Name\>* \BizTalk Application Users (for a single server BizTalk Server installation) or *\<Domain Name\>* \BizTalk Application Users (for a multiple server BizTalk Server installation, which requires the use of domain groups).</span></span> <span data-ttu-id="a221e-151">**注意︰***\<電腦名稱\>* 並*\<網域名稱\>* 都是實際的電腦名稱或使用的網域名稱的預留位置當已建立的群組。  </span><span class="sxs-lookup"><span data-stu-id="a221e-151">**Note:**  *\<Computer Name\>* and *\<Domain Name\>* are placeholders for the actual computer name or domain name used when the group was created.</span></span> <br /><br /> <span data-ttu-id="a221e-152">如果此主機會建立一個新的群組，則它必須具有主題所述的權限[主機群組](http://go.microsoft.com/fwlink/?LinkId=208803)(http://go.microsoft.com/fwlink/?LinkId=208803) BizTalk Server 文件。</span><span class="sxs-lookup"><span data-stu-id="a221e-152">If a new group is created for this host then it must have the privileges described in the topic [Host Groups](http://go.microsoft.com/fwlink/?LinkId=208803) (http://go.microsoft.com/fwlink/?LinkId=208803) in the BizTalk Server documentation.</span></span>|  

### <a name="create-instances-of-the-biztalk-server-send-and-receive-hosts"></a><span data-ttu-id="a221e-153">建立執行個體的 BizTalk Server 傳送和接收主控件</span><span class="sxs-lookup"><span data-stu-id="a221e-153">Create Instances of the BizTalk Server Send and Receive Hosts</span></span>  
 <span data-ttu-id="a221e-154">請依照下列 BizTalk Server 文件主題中的步驟[如何新增主控件執行個體](http://go.microsoft.com/fwlink/?LinkId=208596)(http://go.microsoft.com/fwlink/?LinkId=208596)建立和啟動 BizTalk Server 「 傳送 」 主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="a221e-154">Follow the steps in the BizTalk Server Documentation topic [How to Add a Host Instance](http://go.microsoft.com/fwlink/?LinkId=208596) (http://go.microsoft.com/fwlink/?LinkId=208596) to create and start instances of the BizTalk Server “Send” host.</span></span> <span data-ttu-id="a221e-155">設定 BizTalk Server 群組中每個 BizTalk Server 上執行，並使用下列屬性值來設定每個主控件執行個體的 「 傳送 」 主控件執行個體：</span><span class="sxs-lookup"><span data-stu-id="a221e-155">Configure an instance of the “Send” host to run on each BizTalk Server in the BizTalk Server group and configure each host instance with the following property values:</span></span>  

|<span data-ttu-id="a221e-156">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-156">Property</span></span>|<span data-ttu-id="a221e-157">值</span><span class="sxs-lookup"><span data-stu-id="a221e-157">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-158">**主機名稱**</span><span class="sxs-lookup"><span data-stu-id="a221e-158">**Host name**</span></span>|<span data-ttu-id="a221e-159">選取  **TxHost**下拉式清單中下一步**主機名稱**。</span><span class="sxs-lookup"><span data-stu-id="a221e-159">Select **TxHost** from the drop-down list next to **Host name**.</span></span>|  
|<span data-ttu-id="a221e-160">**Server**</span><span class="sxs-lookup"><span data-stu-id="a221e-160">**Server**</span></span>|<span data-ttu-id="a221e-161">選取 BizTalk Server 會執行此主控件執行個體的下拉式清單旁**Server**。</span><span class="sxs-lookup"><span data-stu-id="a221e-161">Select the BizTalk Server that will run this host instance from the drop-down list next to **Server**.</span></span>|  
|<span data-ttu-id="a221e-162">**登入**</span><span class="sxs-lookup"><span data-stu-id="a221e-162">**Logon**</span></span>|<span data-ttu-id="a221e-163">1.按一下 **設定** 按鈕以顯示**登入認證** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-163">1.  Click the **Configure** button to display the **Logon Credentials** dialog box.</span></span><br /><span data-ttu-id="a221e-164">2.在 [**登入認證**] 對話方塊中指定屬性中輸入下列值：</span><span class="sxs-lookup"><span data-stu-id="a221e-164">2.  In the **Logon Credentials** dialog box enter the following values for the specified properties:</span></span><br />     <span data-ttu-id="a221e-165">**屬性**</span><span class="sxs-lookup"><span data-stu-id="a221e-165">**Property**</span></span><br />     <span data-ttu-id="a221e-166">**登入**： 此 BizTalk Server 主控件相關聯的 Windows 群組成員的使用者帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="a221e-166">**Logon**: Name of user account that is a member of the Windows group associated with this BizTalk Server host.</span></span><br />     <span data-ttu-id="a221e-167">**密碼**： 在指定的使用者帳戶的密碼**登入**文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="a221e-167">**Password**: Password for the user account specified in the **Logon** textbox.</span></span><br /><span data-ttu-id="a221e-168">3.按一下 [ **[確定]** 以關閉**登入認證**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-168">3.  Click **OK** to close the **Logon Credentials** dialog box.</span></span>|  
|<span data-ttu-id="a221e-169">**停用主控件執行個體無法啟動。**</span><span class="sxs-lookup"><span data-stu-id="a221e-169">**Disable host instance from starting.**</span></span>|<span data-ttu-id="a221e-170">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-170">Ensure that this box is un-checked.</span></span>|  

 <span data-ttu-id="a221e-171">後建立主控件執行個體，以滑鼠右鍵按一下主控件執行個體，然後選取**啟動**從內容功能表。</span><span class="sxs-lookup"><span data-stu-id="a221e-171">After creating the host instance, right-click on the host instance and select **Start** from the context menu.</span></span>  

 <span data-ttu-id="a221e-172">重複執行建立 「 傳送 」 主控件執行個體，來建立 「 接收 」 主控件執行個體時遵循的步驟。</span><span class="sxs-lookup"><span data-stu-id="a221e-172">Repeat the steps that you followed when creating the “Send” host instances to create “Receive” host instances.</span></span> <span data-ttu-id="a221e-173">設定 BizTalk Server 群組中每個 BizTalk Server 上執行，並使用下列屬性值來設定每個主控件執行個體的 「 接收 」 主控件執行個體：</span><span class="sxs-lookup"><span data-stu-id="a221e-173">Configure an instance of the “Receive” host to run on each BizTalk Server in the BizTalk Server group and configure each host instance with the following property values:</span></span>  

|<span data-ttu-id="a221e-174">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-174">Property</span></span>|<span data-ttu-id="a221e-175">值</span><span class="sxs-lookup"><span data-stu-id="a221e-175">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-176">主機名稱</span><span class="sxs-lookup"><span data-stu-id="a221e-176">Host name</span></span>|<span data-ttu-id="a221e-177">選取  **RxHost**下拉式清單中下一步**主機名稱**。</span><span class="sxs-lookup"><span data-stu-id="a221e-177">Select **RxHost** from the drop-down list next to **Host name**.</span></span>|  
|<span data-ttu-id="a221e-178">[伺服器]</span><span class="sxs-lookup"><span data-stu-id="a221e-178">Server</span></span>|<span data-ttu-id="a221e-179">選取 BizTalk Server 會執行此主控件執行個體的下拉式清單旁**Server**。</span><span class="sxs-lookup"><span data-stu-id="a221e-179">Select the BizTalk Server that will run this host instance from the drop-down list next to **Server**.</span></span>|  
|<span data-ttu-id="a221e-180">登入</span><span class="sxs-lookup"><span data-stu-id="a221e-180">Logon</span></span>|<span data-ttu-id="a221e-181">1.按一下 **設定** 按鈕以顯示**登入認證** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-181">1.  Click the **Configure** button to display the **Logon Credentials** dialog box.</span></span><br /><span data-ttu-id="a221e-182">2.在 [**登入認證**] 對話方塊中指定屬性中輸入下列值：</span><span class="sxs-lookup"><span data-stu-id="a221e-182">2.  In the **Logon Credentials** dialog box enter the following values for the specified properties:</span></span><br />     <span data-ttu-id="a221e-183">**屬性**</span><span class="sxs-lookup"><span data-stu-id="a221e-183">**Property**</span></span><br />     <span data-ttu-id="a221e-184">**登入**： 此 BizTalk Server 主控件相關聯的 Windows 群組成員的使用者帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="a221e-184">**Logon**: Name of user account that is a member of the Windows group associated with this BizTalk Server host.</span></span><br />     <span data-ttu-id="a221e-185">**密碼**： 在指定的使用者帳戶的密碼**登入**文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="a221e-185">**Password**: Password for the user account specified in the **Logon** textbox.</span></span><br /><span data-ttu-id="a221e-186">3.按一下 **確定**以關閉 登入認證 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-186">3.  Click **OK** to close the Logon Credentials dialog box.</span></span>|  
|<span data-ttu-id="a221e-187">停止啟動主控件執行個體</span><span class="sxs-lookup"><span data-stu-id="a221e-187">Disable host instance from starting</span></span>|<span data-ttu-id="a221e-188">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-188">Ensure that this box is un-checked.</span></span>|  

 <span data-ttu-id="a221e-189">後建立主控件執行個體，以滑鼠右鍵按一下主控件執行個體，然後選取**啟動**從內容功能表。</span><span class="sxs-lookup"><span data-stu-id="a221e-189">After creating the host instance, right-click on the host instance and select **Start** from the context menu.</span></span>  

### <a name="create-a-biztalk-server-receive-port"></a><span data-ttu-id="a221e-190">建立 BizTalk Server 接收埠</span><span class="sxs-lookup"><span data-stu-id="a221e-190">Create a BizTalk Server Receive Port</span></span>  
 <span data-ttu-id="a221e-191">請依照下列主題中的步驟[如何建立接收埠](http://go.microsoft.com/fwlink/?LinkID=154843)(http://go.microsoft.com/fwlink/?LinkID=154843)建立單向接收埠的 BizTalk Server 文件中。</span><span class="sxs-lookup"><span data-stu-id="a221e-191">Follow the steps in the topic [How to Create a Receive Port](http://go.microsoft.com/fwlink/?LinkID=154843) (http://go.microsoft.com/fwlink/?LinkID=154843) in the BizTalk Server documentation to create a One-Way Receive Port.</span></span> <span data-ttu-id="a221e-192">建立接收埠時，保留所有屬性的預設值，除非下表所述：</span><span class="sxs-lookup"><span data-stu-id="a221e-192">When creating the Receive port, leave all properties at default values except as noted in the table below:</span></span>  

|<span data-ttu-id="a221e-193">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-193">Property</span></span>|<span data-ttu-id="a221e-194">值</span><span class="sxs-lookup"><span data-stu-id="a221e-194">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-195">General\Name</span><span class="sxs-lookup"><span data-stu-id="a221e-195">General\Name</span></span>|<span data-ttu-id="a221e-196">BTSLoadTestMessaging.OneWay.ReceivePort</span><span class="sxs-lookup"><span data-stu-id="a221e-196">BTSLoadTestMessaging.OneWay.ReceivePort</span></span>|  
|<span data-ttu-id="a221e-197">General\Port 類型</span><span class="sxs-lookup"><span data-stu-id="a221e-197">General\Port Type</span></span>|<span data-ttu-id="a221e-198">單向</span><span class="sxs-lookup"><span data-stu-id="a221e-198">One-Way</span></span>|  
|<span data-ttu-id="a221e-199">General\Authentication</span><span class="sxs-lookup"><span data-stu-id="a221e-199">General\Authentication</span></span>|<span data-ttu-id="a221e-200">無驗證</span><span class="sxs-lookup"><span data-stu-id="a221e-200">No authentication</span></span>|  
|<span data-ttu-id="a221e-201">General\Enable 路由失敗訊息</span><span class="sxs-lookup"><span data-stu-id="a221e-201">General\Enable routing for failed messages</span></span>|<span data-ttu-id="a221e-202">確定不會核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-202">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="a221e-203">General\Description</span><span class="sxs-lookup"><span data-stu-id="a221e-203">General\Description</span></span>|<span data-ttu-id="a221e-204">保留空白</span><span class="sxs-lookup"><span data-stu-id="a221e-204">Leave blank</span></span>|  
|<span data-ttu-id="a221e-205">輸入對應</span><span class="sxs-lookup"><span data-stu-id="a221e-205">Inbound Maps</span></span>|<span data-ttu-id="a221e-206">無</span><span class="sxs-lookup"><span data-stu-id="a221e-206">None</span></span>|  
|<span data-ttu-id="a221e-207">追蹤</span><span class="sxs-lookup"><span data-stu-id="a221e-207">Tracking</span></span>|<span data-ttu-id="a221e-208">確定不會核取所有方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-208">Ensure that all boxes are un-checked.</span></span>|  
|<span data-ttu-id="a221e-209">接收位置</span><span class="sxs-lookup"><span data-stu-id="a221e-209">Receive Locations</span></span>|<span data-ttu-id="a221e-210">按一下 **的新**，這會顯示**接收位置屬性**對話方塊應該在下一節所述設定**建立 BizTalk Server 接收位置**.</span><span class="sxs-lookup"><span data-stu-id="a221e-210">Click **New**, this will display the **Receive Location Properties** dialog box which should be configured as described in the following section, **Create a BizTalk Server Receive Location**.</span></span>|  

### <a name="create-a-biztalk-server-receive-location"></a><span data-ttu-id="a221e-211">建立 BizTalk Server 接收位置</span><span class="sxs-lookup"><span data-stu-id="a221e-211">Create a BizTalk Server Receive Location</span></span>  
 <span data-ttu-id="a221e-212">在 **接收位置屬性**對話方塊顯示在建立 BizTalk Server 接收連接埠時，套用指定的屬性值：</span><span class="sxs-lookup"><span data-stu-id="a221e-212">In the **Receive Location Properties** dialog box displayed while creating the BizTalk Server Receive port, apply the specified property values:</span></span>  

|<span data-ttu-id="a221e-213">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-213">Property</span></span>|<span data-ttu-id="a221e-214">值</span><span class="sxs-lookup"><span data-stu-id="a221e-214">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-215">名稱：</span><span class="sxs-lookup"><span data-stu-id="a221e-215">Name:</span></span>|<span data-ttu-id="a221e-216">BTSLoadTest.Messaging.OneWay.WCF Customer.ReceiveLocation</span><span class="sxs-lookup"><span data-stu-id="a221e-216">BTSLoadTest.Messaging.OneWay.WCF-Customer.ReceiveLocation</span></span>|  
|<span data-ttu-id="a221e-217">接收處理常式：</span><span class="sxs-lookup"><span data-stu-id="a221e-217">Receive handler:</span></span>|<span data-ttu-id="a221e-218">RxHost</span><span class="sxs-lookup"><span data-stu-id="a221e-218">RxHost</span></span>|  
|<span data-ttu-id="a221e-219">接收管線︰</span><span class="sxs-lookup"><span data-stu-id="a221e-219">Receive pipeline:</span></span>|<span data-ttu-id="a221e-220">PassThruReceive</span><span class="sxs-lookup"><span data-stu-id="a221e-220">PassThruReceive</span></span>|  
|<span data-ttu-id="a221e-221">描述：</span><span class="sxs-lookup"><span data-stu-id="a221e-221">Description:</span></span>|<span data-ttu-id="a221e-222">將此保留空白</span><span class="sxs-lookup"><span data-stu-id="a221e-222">Leave this blank</span></span>|  
|<span data-ttu-id="a221e-223">類型：</span><span class="sxs-lookup"><span data-stu-id="a221e-223">Type:</span></span>|<span data-ttu-id="a221e-224">選取 [ **Wcf-custom**從下拉式清單，然後按一下**設定**] 按鈕，這會顯示**Wcf-custom 傳輸屬性**對話方塊中，這應該是下一節所述設定**來設定 Wcf-custom 接收傳輸**。</span><span class="sxs-lookup"><span data-stu-id="a221e-224">Select **WCF-Custom** from the drop-down list and then click the **Configure** button, this will display the **WCF-Custom Transport Properties** dialog box which should be configured as described in the following section, **Configure the WCF-Custom Receive Transport**.</span></span>|  

### <a name="configure-the-wcf-custom-receive-transport"></a><span data-ttu-id="a221e-225">設定 WCF 自訂接收傳輸</span><span class="sxs-lookup"><span data-stu-id="a221e-225">Configure the WCF-Custom Receive Transport</span></span>  
 <span data-ttu-id="a221e-226">在  **Wcf-custom 傳輸屬性**對話方塊顯示在建立 BizTalk Server 接收位置時，所有屬性都保留預設值以外下, 表所述：</span><span class="sxs-lookup"><span data-stu-id="a221e-226">In the **WCF-Custom Transport Properties** dialog box displayed while creating the BizTalk Server Receive location, leave all properties at default values except as noted in the table below:</span></span>  

|<span data-ttu-id="a221e-227">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-227">Property</span></span>|<span data-ttu-id="a221e-228">值</span><span class="sxs-lookup"><span data-stu-id="a221e-228">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-229">General\Address (URI)</span><span class="sxs-lookup"><span data-stu-id="a221e-229">General\Address (URI)</span></span>|<span data-ttu-id="a221e-230">net.tcp: //localhost: 8123/btsloadtest</span><span class="sxs-lookup"><span data-stu-id="a221e-230">net.tcp://localhost:8123/btsloadtest</span></span>|  
|<span data-ttu-id="a221e-231">Binding\Binding 類型</span><span class="sxs-lookup"><span data-stu-id="a221e-231">Binding\Binding Type</span></span>|<span data-ttu-id="a221e-232">netTcpbinding</span><span class="sxs-lookup"><span data-stu-id="a221e-232">netTcpbinding</span></span>|  
|<span data-ttu-id="a221e-233">Binding\NetTcpBindingElement\listenBacklog</span><span class="sxs-lookup"><span data-stu-id="a221e-233">Binding\NetTcpBindingElement\listenBacklog</span></span>|<span data-ttu-id="a221e-234">400</span><span class="sxs-lookup"><span data-stu-id="a221e-234">400</span></span>|  
|<span data-ttu-id="a221e-235">Binding\NetTcpBindingElement\maxConnections</span><span class="sxs-lookup"><span data-stu-id="a221e-235">Binding\NetTcpBindingElement\maxConnections</span></span>|<span data-ttu-id="a221e-236">400</span><span class="sxs-lookup"><span data-stu-id="a221e-236">400</span></span>|  
|<span data-ttu-id="a221e-237">Binding\Security\NetTcpSecurityElement\mode</span><span class="sxs-lookup"><span data-stu-id="a221e-237">Binding\Security\NetTcpSecurityElement\mode</span></span>|<span data-ttu-id="a221e-238">無</span><span class="sxs-lookup"><span data-stu-id="a221e-238">None</span></span>|  
|<span data-ttu-id="a221e-239">Behavior\ServiceBehavior\serviceThrottling\ServiceThrottlingElement**附註：** 將 serviceThrottling 行為新增至行為，以滑鼠右鍵按一下 ServiceBehavior 的清單中，按一下**加入擴充**，選取**serviceThrottling**從清單中的行為延伸模組，然後按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="a221e-239">Behavior\ServiceBehavior\serviceThrottling\ServiceThrottlingElement **Note:**  To add the serviceThrottling behavior to the list of behaviors, right-click ServiceBehavior, click **Add Extension**, select **serviceThrottling** from the list of behavior extensions and then click **OK**.</span></span>|<span data-ttu-id="a221e-240">設定**ServiceThrottlingElement**屬性為下列值：</span><span class="sxs-lookup"><span data-stu-id="a221e-240">Set the **ServiceThrottlingElement** properties to the following values:</span></span><br /><br /> <span data-ttu-id="a221e-241">-   **maxConcurrentCalls** 400</span><span class="sxs-lookup"><span data-stu-id="a221e-241">-   **maxConcurrentCalls** 400</span></span><br /><span data-ttu-id="a221e-242">-   **maxConcurrentInstances** 400</span><span class="sxs-lookup"><span data-stu-id="a221e-242">-   **maxConcurrentInstances** 400</span></span><br /><span data-ttu-id="a221e-243">-   **maxConcurrentSessions** 400</span><span class="sxs-lookup"><span data-stu-id="a221e-243">-   **maxConcurrentSessions** 400</span></span>|  
|<span data-ttu-id="a221e-244">Behavior\ServiceBehavior\serviceDebug\ServiceDebugElement**附註：** 將 serviceDebug 行為新增至行為，以滑鼠右鍵按一下 ServiceBehavior 的清單中，按一下**加入延伸模組**，選取**serviceDebug**從清單中的行為延伸模組，然後再按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="a221e-244">Behavior\ServiceBehavior\serviceDebug\ServiceDebugElement **Note:**  To add the serviceDebug behavior to the list of behaviors, right-click ServiceBehavior, click **Add Extension**, select **serviceDebug** from the list of behavior extensions, and then click **OK**.</span></span>|<span data-ttu-id="a221e-245">保留的清單**ServiceDebugElement**屬性的預設值 （空白） 除了下列的屬性，來變更為 True 的值：</span><span class="sxs-lookup"><span data-stu-id="a221e-245">Leave the list of **ServiceDebugElement** properties at their default values (empty) except for the following properties, which should be changed to a value of True:</span></span><br /><br /> <span data-ttu-id="a221e-246">-   **httpHelpPageEnabled** ，則為 True</span><span class="sxs-lookup"><span data-stu-id="a221e-246">-   **httpHelpPageEnabled** True</span></span><br /><span data-ttu-id="a221e-247">-   **httpsHelpPageEnabled** ，則為 True</span><span class="sxs-lookup"><span data-stu-id="a221e-247">-   **httpsHelpPageEnabled** True</span></span><br /><span data-ttu-id="a221e-248">-   **includeExceptionDetailInFaults** ，則為 True</span><span class="sxs-lookup"><span data-stu-id="a221e-248">-   **includeExceptionDetailInFaults** True</span></span>|  

 <span data-ttu-id="a221e-249">按一下 [ **[確定]** 以關閉 [Wcf-custom 傳輸屬性] 對話方塊中，然後按一下**確定**] 以關閉 [接收位置屬性] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-249">Click **OK** to close the WCF-Custom Transport Properties dialog box and then click **OK** again to close the Receive Location Properties dialog box.</span></span>  

### <a name="create-a-biztalk-server-send-port"></a><span data-ttu-id="a221e-250">建立 BizTalk Server 傳送埠</span><span class="sxs-lookup"><span data-stu-id="a221e-250">Create a BizTalk Server Send Port</span></span>  
 <span data-ttu-id="a221e-251">請依照下列主題中的步驟[如何建立傳送埠](http://go.microsoft.com/fwlink/?LinkID=154845)(http://go.microsoft.com/fwlink/?LinkID=154845) BizTalk Server 文件，來建立**靜態單向**傳送埠。</span><span class="sxs-lookup"><span data-stu-id="a221e-251">Follow the steps in the topic [How to Create a Send Port](http://go.microsoft.com/fwlink/?LinkID=154845) (http://go.microsoft.com/fwlink/?LinkID=154845) in the BizTalk Server documentation to create a **Static One-Way** Send Port.</span></span> <span data-ttu-id="a221e-252">建立傳送埠時，保留所有屬性的預設值，除非下表所述：</span><span class="sxs-lookup"><span data-stu-id="a221e-252">When creating the Send port, leave all properties at default values except as noted in the table below:</span></span>  

|<span data-ttu-id="a221e-253">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-253">Property</span></span>|<span data-ttu-id="a221e-254">值</span><span class="sxs-lookup"><span data-stu-id="a221e-254">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-255">General\Name</span><span class="sxs-lookup"><span data-stu-id="a221e-255">General\Name</span></span>|<span data-ttu-id="a221e-256">BTSLoadTest.Messaging.Send.WCF 自訂</span><span class="sxs-lookup"><span data-stu-id="a221e-256">BTSLoadTest.Messaging.Send.WCF-Custom</span></span>|  
|<span data-ttu-id="a221e-257">General\Send 處理常式</span><span class="sxs-lookup"><span data-stu-id="a221e-257">General\Send handler</span></span>|<span data-ttu-id="a221e-258">TxHost</span><span class="sxs-lookup"><span data-stu-id="a221e-258">TxHost</span></span>|  
|<span data-ttu-id="a221e-259">General\Send 管線</span><span class="sxs-lookup"><span data-stu-id="a221e-259">General\Send pipeline</span></span>|<span data-ttu-id="a221e-260">PassThruTransmit</span><span class="sxs-lookup"><span data-stu-id="a221e-260">PassThruTransmit</span></span>|  
|<span data-ttu-id="a221e-261">Filters\Name</span><span class="sxs-lookup"><span data-stu-id="a221e-261">Filters\Name</span></span>|<span data-ttu-id="a221e-262">BTS.ReceivePortName</span><span class="sxs-lookup"><span data-stu-id="a221e-262">BTS.ReceivePortName</span></span>|  
|<span data-ttu-id="a221e-263">Filters\Operator</span><span class="sxs-lookup"><span data-stu-id="a221e-263">Filters\Operator</span></span>|==|  
|<span data-ttu-id="a221e-264">Filters\Value</span><span class="sxs-lookup"><span data-stu-id="a221e-264">Filters\Value</span></span>|<span data-ttu-id="a221e-265">BTSLoadTest.Messaging.OneWay.ReceivePort</span><span class="sxs-lookup"><span data-stu-id="a221e-265">BTSLoadTest.Messaging.OneWay.ReceivePort</span></span>|  
|<span data-ttu-id="a221e-266">藉由 Filters\Group</span><span class="sxs-lookup"><span data-stu-id="a221e-266">Filters\Group by</span></span>|<span data-ttu-id="a221e-267">並**附註：** 篩選以正確的值設定這些屬性，如果應該顯示為`BTS.ReceivePortName == BTSLoadTest.Messaging.OneWay.ReceivePort`b 中的 [傳送埠屬性] 對話方塊的 [篩選] 頁面的底部所示ox。</span><span class="sxs-lookup"><span data-stu-id="a221e-267">And **Note:**  If these properties are configured with the correct values, the filter should be displayed as                                              `BTS.ReceivePortName == BTSLoadTest.Messaging.OneWay.ReceivePort` as seen toward the bottom of the Filters page of the Send Port Properties dialog box.</span></span> <span data-ttu-id="a221e-268">因為套用此篩選之後，此傳送埠訂閱透過名為 BTSLoadTest.Messaging.OneWay.ReceivePort 接收埠的 BizTalk Server 收到任何訊息。</span><span class="sxs-lookup"><span data-stu-id="a221e-268">As a result of applying this filter, this Send port subscribes to any messages received by BizTalk Server via the Receive Port named BTSLoadTest.Messaging.OneWay.ReceivePort.</span></span>|  
|<span data-ttu-id="a221e-269">追蹤</span><span class="sxs-lookup"><span data-stu-id="a221e-269">Tracking</span></span>|<span data-ttu-id="a221e-270">確定不會核取所有方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-270">Ensure that all boxes are un-checked.</span></span>|  
|<span data-ttu-id="a221e-271">General\Type</span><span class="sxs-lookup"><span data-stu-id="a221e-271">General\Type</span></span>|<span data-ttu-id="a221e-272">選取 [ **Wcf-custom**從下拉式清單，然後按一下**設定**] 按鈕，這會顯示**Wcf-custom 傳輸屬性**對話方塊中，這應該是下一節所述設定**來設定 Wcf-custom 傳送傳輸**。</span><span class="sxs-lookup"><span data-stu-id="a221e-272">Select **WCF-Custom** from the drop-down list and then click the **Configure** button, this will display the **WCF-Custom Transport Properties** dialog box which should be configured as described in the following section, **Configure the WCF-Custom Send Transport**.</span></span>|  

### <a name="configure-the-wcf-custom-send-transport"></a><span data-ttu-id="a221e-273">設定 Wcf-custom 傳送傳輸</span><span class="sxs-lookup"><span data-stu-id="a221e-273">Configure the WCF-Custom Send Transport</span></span>  
 <span data-ttu-id="a221e-274">在  **Wcf-custom 傳輸屬性**對話方塊顯示在建立 BizTalk Server 傳送埠時，所有屬性都保留預設值以外下, 表所述：</span><span class="sxs-lookup"><span data-stu-id="a221e-274">In the **WCF-Custom Transport Properties** dialog box displayed while creating the BizTalk Server Send Port, leave all properties at default values except as noted in the table below:</span></span>  

|<span data-ttu-id="a221e-275">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-275">Property</span></span>|<span data-ttu-id="a221e-276">值</span><span class="sxs-lookup"><span data-stu-id="a221e-276">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="a221e-277">General\Address (URI)</span><span class="sxs-lookup"><span data-stu-id="a221e-277">General\Address (URI)</span></span>|<span data-ttu-id="a221e-278">net.tcp://*\<電腦名稱\>*: 2001年/TCP1**重要事項：***\<電腦名稱\>* 是預留位置用來裝載 IndigoService.exe 實際電腦名稱，可使用透過 WCF 傳送的訊息。  </span><span class="sxs-lookup"><span data-stu-id="a221e-278">net.tcp://*\<Computer Name\>*:2001/TCP1 **Important:**  *\<Computer Name\>* is a placeholder for the actual computer name used to host IndigoService.exe, which is designed to consume messages sent via WCF.</span></span> <span data-ttu-id="a221e-279">因為 IndigoService.exe 需要極少的資源，通常是使用 BizTalk Server 群組資料庫的 SQL Server 電腦上執行 IndigoService.exe 完全可以接受。</span><span class="sxs-lookup"><span data-stu-id="a221e-279">Because IndigoService.exe requires very little resources, it is often perfectly acceptable to run IndigoService.exe on the SQL Server computer used for the BizTalk Server group databases.</span></span> <span data-ttu-id="a221e-280">IndigoService.exe 屬於 BizTalk 基準測試精靈，將會位於[BizTalk 基準精靈](http://go.microsoft.com/fwlink/?LinkID=186347)(http://go.microsoft.com/fwlink/?LinkID=186347)。</span><span class="sxs-lookup"><span data-stu-id="a221e-280">IndigoService.exe is part of the BizTalk Benchmark Wizard, which is available at [BizTalk Benchmark Wizard](http://go.microsoft.com/fwlink/?LinkID=186347) (http://go.microsoft.com/fwlink/?LinkID=186347).</span></span>|  
|<span data-ttu-id="a221e-281">Binding\Binding 類型</span><span class="sxs-lookup"><span data-stu-id="a221e-281">Binding\Binding Type</span></span>|<span data-ttu-id="a221e-282">**customBinding**</span><span class="sxs-lookup"><span data-stu-id="a221e-282">**customBinding**</span></span>|  

 <span data-ttu-id="a221e-283">如同 WCF 自訂繫結類型大多**customBinding**繫結型別會公開數個屬性，它應該設定為下列值：</span><span class="sxs-lookup"><span data-stu-id="a221e-283">As with most of the WCF-Custom Binding Types, the **customBinding** Binding type exposes several properties, which should be set to the following values:</span></span>  

1.  <span data-ttu-id="a221e-284">底下**繫結**沒有 區段**CustomBindingElement**以及相關聯的屬性**組態**一節。</span><span class="sxs-lookup"><span data-stu-id="a221e-284">Under the **Binding** section there is a **CustomBindingElement** property with an associated **Configuration** section.</span></span> <span data-ttu-id="a221e-285">保留的所有值中的組態區段**CustomBindingElement**屬性的預設值。</span><span class="sxs-lookup"><span data-stu-id="a221e-285">Leave all of the values in the Configuration section for the **CustomBindingElement** property at their default values.</span></span>  

2.  <span data-ttu-id="a221e-286">然後在**CustomBindingElement**上按一下滑鼠右鍵**textMessageEncoding** ，然後選取**移除延伸模組 (Del)**。</span><span class="sxs-lookup"><span data-stu-id="a221e-286">Then under **CustomBindingElement** right-click **textMessageEncoding** and select **Remove extension (Del)**.</span></span> <span data-ttu-id="a221e-287">同樣地，以滑鼠右鍵按一下**httpTransport** ，然後選取**移除延伸模組 (Del)**。</span><span class="sxs-lookup"><span data-stu-id="a221e-287">Likewise, right-click **httpTransport** and select **Remove extension (Del)**.</span></span>  

3.  <span data-ttu-id="a221e-288">現在以滑鼠右鍵按一下**CustomBindingElement** ，然後選取**新增擴充功能集**以顯示**選取繫結元素延伸模組** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-288">Now right-click **CustomBindingElement** and select **Add extension Ins** to display the **Select Binding Element Extension** dialog box.</span></span>  

4.  <span data-ttu-id="a221e-289">選取  **binaryMessageEncoding**然後按一下**確定**加入**binaryMessageEncoding**項目延伸。</span><span class="sxs-lookup"><span data-stu-id="a221e-289">Select **binaryMessageEncoding** and click **OK** to add the **binaryMessageEncoding** element extension.</span></span> <span data-ttu-id="a221e-290">重複步驟，以顯示**選取繫結元素延伸模組**對話方塊並捲軸下可用的項目延伸的清單直到您看到**tcpTransport**元素延伸模組，選取**tcpTransport**然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="a221e-290">Repeat the steps to display the **Select Binding Element Extension** dialog box and scroll down the list of available element extensions until you see the **tcpTransport** element extension, select **tcpTransport** and click **OK**.</span></span>  

5.  <span data-ttu-id="a221e-291">底下**CustomBindingElement**選取**tcpTransport**項目和中的組態區段**tcpTransport**，保留所有屬性的預設值以外，做為下表所述：</span><span class="sxs-lookup"><span data-stu-id="a221e-291">Under **CustomBindingElement** select the **tcpTransport** element and in the Configuration section for **tcpTransport**, leave all properties at default values except as noted in the following table:</span></span>  

    |<span data-ttu-id="a221e-292">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-292">Property</span></span>|<span data-ttu-id="a221e-293">值</span><span class="sxs-lookup"><span data-stu-id="a221e-293">Value</span></span>|  
    |--------------|-----------|  
    |<span data-ttu-id="a221e-294">connectionBufferSize</span><span class="sxs-lookup"><span data-stu-id="a221e-294">connectionBufferSize</span></span>|<span data-ttu-id="a221e-295">2097152</span><span class="sxs-lookup"><span data-stu-id="a221e-295">2097152</span></span>|  
    |<span data-ttu-id="a221e-296">maxBufferSize</span><span class="sxs-lookup"><span data-stu-id="a221e-296">maxBufferSize</span></span>|<span data-ttu-id="a221e-297">2097152</span><span class="sxs-lookup"><span data-stu-id="a221e-297">2097152</span></span>|  
    |<span data-ttu-id="a221e-298">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="a221e-298">maxPendingAccepts</span></span>|<span data-ttu-id="a221e-299">400</span><span class="sxs-lookup"><span data-stu-id="a221e-299">400</span></span>|  
    |<span data-ttu-id="a221e-300">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="a221e-300">maxPendingConnections</span></span>|<span data-ttu-id="a221e-301">400</span><span class="sxs-lookup"><span data-stu-id="a221e-301">400</span></span>|  
    |<span data-ttu-id="a221e-302">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="a221e-302">listenBacklog</span></span>|<span data-ttu-id="a221e-303">400</span><span class="sxs-lookup"><span data-stu-id="a221e-303">400</span></span>|  
    |<span data-ttu-id="a221e-304">maxBufferPoolSize</span><span class="sxs-lookup"><span data-stu-id="a221e-304">maxBufferPoolSize</span></span>|<span data-ttu-id="a221e-305">2097152</span><span class="sxs-lookup"><span data-stu-id="a221e-305">2097152</span></span>|  
    |<span data-ttu-id="a221e-306">maxReceivedMessageSize</span><span class="sxs-lookup"><span data-stu-id="a221e-306">maxReceivedMessageSize</span></span>|<span data-ttu-id="a221e-307">2097152</span><span class="sxs-lookup"><span data-stu-id="a221e-307">2097152</span></span>|  

6.  <span data-ttu-id="a221e-308">底下**tcpTransport**項目選取**Namedpipetransport**項目，並保留預設值的所有屬性都值除了**maxOutboundConnectionsPerEndpoint**應設為 400 的值變更的屬性。</span><span class="sxs-lookup"><span data-stu-id="a221e-308">Under the **tcpTransport** element select the **ConnectionPoolSettings** element and leave all properties at default values except for the **maxOutboundConnectionsPerEndpoint** property, which should be changed to a value of 400.</span></span>  

7.  <span data-ttu-id="a221e-309">按一下 [ **[確定]** 若要關閉 [Wcf-custom 傳輸屬性] 對話方塊中，然後按一下**確定**] 以關閉 [BTSLoadTest.Messaging.Send.WCF-自訂-傳送埠屬性] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-309">Click **OK** to close the WCF-Custom Transport Properties dialog box, then click **OK** again to close the BTSLoadTest.Messaging.Send.WCF-Custom – Send Port Properties dialog box.</span></span>  

### <a name="configure-a-computer-to-consume-messages-sent-by-the-biztalk-server-send-port"></a><span data-ttu-id="a221e-310">將電腦設定為使用 BizTalk Server 傳送埠所傳送的訊息</span><span class="sxs-lookup"><span data-stu-id="a221e-310">Configure a Computer to Consume Messages Sent by the BizTalk Server Send Port</span></span>  
 <span data-ttu-id="a221e-311">如先前所述，IndigoService.exe 被設計來使用透過 WCF 傳送的訊息。</span><span class="sxs-lookup"><span data-stu-id="a221e-311">As described earlier, the IndigoService.exe is designed to consume messages sent via WCF.</span></span> <span data-ttu-id="a221e-312">IndigoService.exe 屬於 BizTalk 基準測試精靈，將會位於[BizTalk 基準精靈](http://go.microsoft.com/fwlink/?LinkID=186347)(http://go.microsoft.com/fwlink/?LinkID=186347)。</span><span class="sxs-lookup"><span data-stu-id="a221e-312">IndigoService.exe is part of the BizTalk Benchmark Wizard, which is available at [BizTalk Benchmark Wizard](http://go.microsoft.com/fwlink/?LinkID=186347) (http://go.microsoft.com/fwlink/?LinkID=186347).</span></span> <span data-ttu-id="a221e-313">若要設定及執行 IndigoService.exe 基於此範例的最簡單的方式是直接下載 BizTalk 基準測試精靈 的 zip 檔案，從[BizTalk 基準測試精靈 下載頁面](http://go.microsoft.com/fwlink/?LinkID=209100)(http://go.microsoft.com/fwlink/?LinkID=209100)並擷取下列 4 個您想要執行 IndigoService.exe 電腦上的檔案：</span><span class="sxs-lookup"><span data-stu-id="a221e-313">The easiest way to set up and run IndigoService.exe for purposes of this example is to simply download the BizTalk Benchmark Wizard zip file from the [BizTalk BenchMark Wizard download page](http://go.microsoft.com/fwlink/?LinkID=209100) (http://go.microsoft.com/fwlink/?LinkID=209100) and extract the following 4 files onto the computer that you would like to run IndigoService.exe:</span></span>  

1. <span data-ttu-id="a221e-314">\IndigoService\bin\Release\IndigoService.exe</span><span class="sxs-lookup"><span data-stu-id="a221e-314">\IndigoService\bin\Release\IndigoService.exe</span></span>  

2. <span data-ttu-id="a221e-315">\IndigoService\bin\Release\IndigoService.exe.config</span><span class="sxs-lookup"><span data-stu-id="a221e-315">\IndigoService\bin\Release\IndigoService.exe.config</span></span>  

3. <span data-ttu-id="a221e-316">\IndigoService\bin\Release\Response.xml</span><span class="sxs-lookup"><span data-stu-id="a221e-316">\IndigoService\bin\Release\Response.xml</span></span>  

4. <span data-ttu-id="a221e-317">\IndigoService\bin\Release\StartIndigoService.bat</span><span class="sxs-lookup"><span data-stu-id="a221e-317">\IndigoService\bin\Release\StartIndigoService.bat</span></span>  

   <span data-ttu-id="a221e-318">然後啟動 IndigoService.exe StartIndigoService.bat 上按兩下。</span><span class="sxs-lookup"><span data-stu-id="a221e-318">Then, start IndigoService.exe by double-clicking on StartIndigoService.bat.</span></span> <span data-ttu-id="a221e-319">IndigoService.exe 會取用訊息傳送至 IndigoService.exe.config 檔案中指定的端點：</span><span class="sxs-lookup"><span data-stu-id="a221e-319">IndigoService.exe consumes messages sent to the endpoint specified in the IndigoService.exe.config file:</span></span>  

   <span data-ttu-id="a221e-320">\<端點位址 ="net.tcp: //localhost: 2001年/TCP1 」 繫結 ="netTcpBinding"bindingConfiguration ="Binding1"name ="endpoint1"contract="IndigoService.IServiceTwoWaysVoidNonTransactional"/\></span><span class="sxs-lookup"><span data-stu-id="a221e-320">\<endpoint address="net.tcp://localhost:2001/TCP1"             binding="netTcpBinding"             bindingConfiguration="Binding1"             name="endpoint1"             contract="IndigoService.IServiceTwoWaysVoidNonTransactional" /\></span></span>  

   <span data-ttu-id="a221e-321">這就是為什麼傳送連接埠位址已與位址 (URI) 的 net.tcp://*\<電腦名稱\>*: 2001年/TCP1</span><span class="sxs-lookup"><span data-stu-id="a221e-321">This is why the Send Port Address is configured with an Address (URI) of net.tcp://*\<Computer Name\>*:2001/TCP1</span></span>  

   <span data-ttu-id="a221e-322">因為 IndigoService.exe 需要極少的資源，通常是使用 BizTalk Server 資料庫的 SQL Server 電腦上執行 IndigoService.exe 完全可以接受。</span><span class="sxs-lookup"><span data-stu-id="a221e-322">Because IndigoService.exe requires very little resources, it is often perfectly acceptable to run IndigoService.exe on the SQL Server computer used for the BizTalk Server databases.</span></span>  

### <a name="disable-tracking-and-throttling-for-the-biztalk-server-group"></a><span data-ttu-id="a221e-323">停用追蹤和節流 BizTalk Server 群組</span><span class="sxs-lookup"><span data-stu-id="a221e-323">Disable Tracking and Throttling for the BizTalk Server Group</span></span>  
 <span data-ttu-id="a221e-324">若要判斷系統，這兩個訊息的絕對最大持續輸送量追蹤和節流應該停用開始負載測試之前。</span><span class="sxs-lookup"><span data-stu-id="a221e-324">In order to determine the absolute maximum sustainable throughput of the system, both message Tracking and Throttling should be disabled before beginning load testing.</span></span> <span data-ttu-id="a221e-325">這可以使用 BizTalk Server 管理主控台，依照下列步驟：</span><span class="sxs-lookup"><span data-stu-id="a221e-325">This can be done using the BizTalk Server Administration console by following these steps:</span></span>  

1. <span data-ttu-id="a221e-326">啟動 BizTalk Server 管理主控台。</span><span class="sxs-lookup"><span data-stu-id="a221e-326">Launch the BizTalk Server Administration console.</span></span> <span data-ttu-id="a221e-327">按一下 **開始**，指向**所有程式**，指向**BizTalk Server 2010**然後按一下**BizTalk Server 管理**。</span><span class="sxs-lookup"><span data-stu-id="a221e-327">Click **Start**, point to **All Programs**, point to **BizTalk Server 2010** and then click **BizTalk Server Administration**.</span></span>  

2. <span data-ttu-id="a221e-328">底下**BizTalk Server 管理**、 選取您的 BizTalk 群組，如果有列出，或如果未列出，以滑鼠右鍵按一下**BizTalk Server 管理**，選取**連接至現有的群組**，輸入裝載 BizTalk 群組的 BizTalk Server 管理資料庫旁邊的 SQL Server 名稱**SQL Server 名稱：**，輸入 BizTalk 群組的管理資料庫名稱旁邊**資料庫名稱：** ，然後按一下  **確定**。</span><span class="sxs-lookup"><span data-stu-id="a221e-328">Under **BizTalk Server Administration**, select your BizTalk Group if it is listed or if it is not listed, right-click **BizTalk Server Administration**, select **Connect to Existing Group**, enter the SQL Server name that houses the BizTalk Group’s BizTalk Server Management database next to **SQL Server name:**, enter the name of the BizTalk Group’s management database name next to **Database name:** and then click **OK**.</span></span>  

3. <span data-ttu-id="a221e-329">以滑鼠右鍵按一下 [BizTalk 群組] 節點，然後選取**設定**顯示**BizTalk 設定儀表板**。</span><span class="sxs-lookup"><span data-stu-id="a221e-329">Right-click the BizTalk Group node and select **Settings** to display the **BizTalk Settings Dashboard**.</span></span>  

4. <span data-ttu-id="a221e-330">按一下以選取**主機**BizTalk 設定儀表板的左側窗格中。</span><span class="sxs-lookup"><span data-stu-id="a221e-330">Click to select **Hosts** in the left hand pane of the BizTalk Settings Dashboard.</span></span>  

5. <span data-ttu-id="a221e-331">按一下下拉式清單旁**主機**選取其中一個會在效能測試期間使用的主機。</span><span class="sxs-lookup"><span data-stu-id="a221e-331">Click the dropdown list next to **Host** to select one of the hosts that will be used during performance testing.</span></span>  

6. <span data-ttu-id="a221e-332">將內容保留在其預設值以外下, 表所述：</span><span class="sxs-lookup"><span data-stu-id="a221e-332">Leave properties at their default values except as noted in the following table:</span></span>  


   |                          <span data-ttu-id="a221e-333">屬性</span><span class="sxs-lookup"><span data-stu-id="a221e-333">Property</span></span>                          |               <span data-ttu-id="a221e-334">值</span><span class="sxs-lookup"><span data-stu-id="a221e-334">Value</span></span>                |
   |------------------------------------------------------------|------------------------------------|
   |          <span data-ttu-id="a221e-335">**General\Move 至 DTA 資料庫中追蹤資料**</span><span class="sxs-lookup"><span data-stu-id="a221e-335">**General\Move tracking data to DTA DB**</span></span>          | <span data-ttu-id="a221e-336">如果有勾選，取消核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-336">Uncheck this box if it is checked.</span></span> |
   |                  <span data-ttu-id="a221e-337">**僅限 General\32 位元**</span><span class="sxs-lookup"><span data-stu-id="a221e-337">**General\32-bit only**</span></span>                   | <span data-ttu-id="a221e-338">如果有勾選，取消核取此方塊。</span><span class="sxs-lookup"><span data-stu-id="a221e-338">Uncheck this box if it is checked.</span></span> |
   |          <span data-ttu-id="a221e-339">**General\Polling Intervals\Messaging**</span><span class="sxs-lookup"><span data-stu-id="a221e-339">**General\Polling Intervals\Messaging**</span></span>           |     <span data-ttu-id="a221e-340">設為 20000000 值</span><span class="sxs-lookup"><span data-stu-id="a221e-340">Set to a value of 20000000</span></span>     |
   |        <span data-ttu-id="a221e-341">**General\Polling Intervals\Orchestrations**</span><span class="sxs-lookup"><span data-stu-id="a221e-341">**General\Polling Intervals\Orchestrations**</span></span>        |     <span data-ttu-id="a221e-342">設為 20000000 值</span><span class="sxs-lookup"><span data-stu-id="a221e-342">Set to a value of 20000000</span></span>     |
   |     <span data-ttu-id="a221e-343">**資源型 Throttling\In 同處理序訊息**</span><span class="sxs-lookup"><span data-stu-id="a221e-343">**Resource-Based Throttling\In-process messages**</span></span>      |      <span data-ttu-id="a221e-344">設定為值為 10000</span><span class="sxs-lookup"><span data-stu-id="a221e-344">Set to a value of 10000</span></span>       |
   | <span data-ttu-id="a221e-345">**資源型 Throttling\Internal 訊息佇列大小**</span><span class="sxs-lookup"><span data-stu-id="a221e-345">**Resource-Based Throttling\Internal message queue size**</span></span>  |      <span data-ttu-id="a221e-346">設定為值為 10000</span><span class="sxs-lookup"><span data-stu-id="a221e-346">Set to a value of 10000</span></span>       |
   |     <span data-ttu-id="a221e-347">**在 DB 中的資源為基礎 Throttling\Message 計數**</span><span class="sxs-lookup"><span data-stu-id="a221e-347">**Resource-Based Throttling\Message count in DB**</span></span>      |        <span data-ttu-id="a221e-348">設為 0 的值</span><span class="sxs-lookup"><span data-stu-id="a221e-348">Set to a value of 0</span></span>         |
   | <span data-ttu-id="a221e-349">**虛擬的 資源為基礎 Throttling\Memory Usage\Process**</span><span class="sxs-lookup"><span data-stu-id="a221e-349">**Resource-Based Throttling\Memory Usage\Process virtual**</span></span> |        <span data-ttu-id="a221e-350">設為 0 的值</span><span class="sxs-lookup"><span data-stu-id="a221e-350">Set to a value of 0</span></span>         |
   |  <span data-ttu-id="a221e-351">**根據速率的 Throttling\Publishing\Throttling 覆寫**</span><span class="sxs-lookup"><span data-stu-id="a221e-351">**Rate-Based Throttling\Publishing\Throttling override**</span></span>  |       <span data-ttu-id="a221e-352">設定為不要節流</span><span class="sxs-lookup"><span data-stu-id="a221e-352">Set to Do Not Throttle</span></span>       |
   |   <span data-ttu-id="a221e-353">**根據速率的 Throttling\Delivery\Throttling 覆寫**</span><span class="sxs-lookup"><span data-stu-id="a221e-353">**Rate-Based Throttling\Delivery\Throttling override**</span></span>   |       <span data-ttu-id="a221e-354">設定為不要節流</span><span class="sxs-lookup"><span data-stu-id="a221e-354">Set to Do Not Throttle</span></span>       |


7. <span data-ttu-id="a221e-355">重複步驟 6 中所述，每個主控件的效能測試期間，會使用此程序。</span><span class="sxs-lookup"><span data-stu-id="a221e-355">Repeat the process outlined in step 6 for every host that will be used during the course of performance testing.</span></span>  

8. <span data-ttu-id="a221e-356">按一下以選取**主控件執行個體**BizTalk 設定儀表板的左側窗格中。</span><span class="sxs-lookup"><span data-stu-id="a221e-356">Click to select **Host Instances** in the left hand pane of the BizTalk Settings Dashboard.</span></span>  

9. <span data-ttu-id="a221e-357">按一下下拉式清單旁**主控件執行個體：** 選取其中一個主控件執行個體將用於進行效能測試。</span><span class="sxs-lookup"><span data-stu-id="a221e-357">Click the dropdown list next to **Host Instance:** to select one of the host instances that will be used for performance testing.</span></span>  

10. <span data-ttu-id="a221e-358">屬性值保留其預設設定，變更除了 **.NET CLR 最大工作者執行緒**的值**100**並變更 **.NET CLR 最少的背景工作執行緒**到值**25**。</span><span class="sxs-lookup"><span data-stu-id="a221e-358">Leave property values at their default setting except change the **.NET CLR Maximum worker threads** to a value of **100** and change the **.NET CLR Minimum worker threads** to a value of **25**.</span></span>  

11. <span data-ttu-id="a221e-359">重複步驟 10 中的效能測試期間，會使用每個主控件執行個體中所述的程序。</span><span class="sxs-lookup"><span data-stu-id="a221e-359">Repeat the process outlined in step 10 for every host instance that will be used during the course of performance testing.</span></span>  

    <span data-ttu-id="a221e-360">即使停用追蹤和節流並不以任何方式代表應該要如何處理在生產案例中，因為這些作業會從效能觀點來看，停用它們來了解，則為 true 最大持續性合理，因此耗費資源BizTalk Server 環境的輸送量 (MST)。</span><span class="sxs-lookup"><span data-stu-id="a221e-360">Even though disabling Tracking and Throttling does not in any way represent what should be done in a production scenario, because these operations are so expensive from a performance perspective it makes sense to disable them to find out the true Maximum Sustainable Throughput (MST) of a BizTalk Server Environment.</span></span> <span data-ttu-id="a221e-361">這可讓測試人員，清楚看到的調整，任何效能影響已套用至環境。</span><span class="sxs-lookup"><span data-stu-id="a221e-361">This allows testers to clearly see the impact of any performance tweaking that has been applied to the environment.</span></span> <span data-ttu-id="a221e-362">肯定應該不會停用追蹤，而且如果您一開始就知道您的 BizTalk Server 應用程式，需要追蹤然後您應該啟用追蹤，無法進行引數。</span><span class="sxs-lookup"><span data-stu-id="a221e-362">Certainly an argument could be made that tracking should not be disabled and if you know from the outset that your BizTalk Server application will require tracking then you should enable tracking.</span></span> <span data-ttu-id="a221e-363">也就是說，**全力應停用節流的效能測試的目的**。</span><span class="sxs-lookup"><span data-stu-id="a221e-363">With that said, **every effort should be made to disable throttling for purposes of performance testing**.</span></span> <span data-ttu-id="a221e-364">節流是非常適合防止 」 將 「 由於在生產環境中的負載過度而 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="a221e-364">Throttling is very useful for preventing a BizTalk Server from “falling over” due to excessive load in a production environment.</span></span> <span data-ttu-id="a221e-365">不過，您不想在效能測試，因為它很昂貴，從效能觀點來看，而且如果節流會在負載測試期間則您必須判斷何種效能層級很難時間期間已啟用節流您BizTalk Server 應用程式可以實際達成的。</span><span class="sxs-lookup"><span data-stu-id="a221e-365">However, you don’t want throttling enabled during performance testing because it is expensive from a performance standpoint and because if throttling kicks in during a load test then you will have a very difficult time determining what level of performance your BizTalk Server application can actually achieve.</span></span> <span data-ttu-id="a221e-366">下一步 的主題描述如何執行推播超過 MST BizTalk Server 環境，並再調整回使用常數負載測試的實際 MST 的步驟負載測試。</span><span class="sxs-lookup"><span data-stu-id="a221e-366">The next topics describe how to perform step load testing to push your BizTalk Server environment beyond MST and then scale back to actual MST with constant load testing.</span></span> <span data-ttu-id="a221e-367">如果已啟用節流設定，然後它會變成幾乎不可能將超過 MST BizTalk 環境，讓您接著可以探索 MST 是什麼真正。</span><span class="sxs-lookup"><span data-stu-id="a221e-367">If throttling is enabled then it will become nearly impossible to push your BizTalk environment beyond MST so that you could in turn discover what the true MST is.</span></span>