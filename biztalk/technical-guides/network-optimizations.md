---
title: "網路最佳化 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9ff0392f-37ae-4ca6-8cc6-d53065de64c5
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bbf4b0e8df9d8baa81a91576dc37fd89413714f9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="network-optimizations"></a><span data-ttu-id="244f6-102">網路最佳化</span><span class="sxs-lookup"><span data-stu-id="244f6-102">Network Optimizations</span></span>
<span data-ttu-id="244f6-103">在 BizTalk Server 環境中的 BizTalk Server 電腦所在的 SQL Server 電腦不同，BizTalk Server 處理的每個訊息不需要透過網路通訊。</span><span class="sxs-lookup"><span data-stu-id="244f6-103">In a BizTalk Server environment where the BizTalk Server computer(s) are separate from the SQL Server computer(s), each and every message processed by BizTalk Server requires communication over the network.</span></span> <span data-ttu-id="244f6-104">此通訊包括相當大的 BizTalk Server 電腦和 BizTalk Messagebox 資料庫、 BizTalk 管理資料庫、 BAM 資料庫中，與其他資料庫之間的流量。</span><span class="sxs-lookup"><span data-stu-id="244f6-104">This communication includes considerable traffic between the BizTalk Server computers and the BizTalk Message Box database(s), the BizTalk Management database(s), the BAM databases, and other databases.</span></span> <span data-ttu-id="244f6-105">在高負載情況下，這類通訊會造成相當大的網路流量而成為瓶頸，特別是當未最佳化的網路設定、 安裝沒有足夠的網路介面卡，或沒有足夠的網路頻寬可以使用。</span><span class="sxs-lookup"><span data-stu-id="244f6-105">In high-load scenarios, this communication can result in considerable network traffic and can become a bottleneck, especially when network settings have not been optimized, not enough network interface cards are installed, or insufficient network bandwidth is available.</span></span>  
  
 <span data-ttu-id="244f6-106">本主題提供改善網路效能，在相同的 HYPER-V 主機電腦上執行的 HYPER-V 虛擬機器之間的步驟，並提供改善網路效能的一般建議。</span><span class="sxs-lookup"><span data-stu-id="244f6-106">This topic provides steps for improving networking performance between Hyper-V virtual machines running on the same Hyper-V host computer and provides some general recommendations for improving network performance.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="244f6-107">最常見網路 IO 是瓶頸的指標是計數器 「 SQL Server： 等候 Statistics\Network IO 等候 」。</span><span class="sxs-lookup"><span data-stu-id="244f6-107">The most common indicator that Network IO is a bottleneck is the counter “SQL Server:Wait Statistics\Network IO waits.”</span></span> <span data-ttu-id="244f6-108">當值**平均等候時間**在此計數器是大於零的一或多個 SQL Server 電腦，則網路 IO 是瓶頸。</span><span class="sxs-lookup"><span data-stu-id="244f6-108">When the value for **Avg Wait Time** in this counter is greater than zero on one or more of your SQL Server computers, then Network IO is a bottleneck.</span></span>  
  
## <a name="improving-network-performance-of-biztalk-server-on-hyper-v"></a><span data-ttu-id="244f6-109">HYPER-V 上的 BizTalk Server 改善網路效能</span><span class="sxs-lookup"><span data-stu-id="244f6-109">Improving Network Performance of BizTalk Server on Hyper-V</span></span>  
  
### <a name="configure-hyper-v-virtual-machines-that-are-running-on-the-same-hyper-v-host-computer-to-use-a-private-virtual-network"></a><span data-ttu-id="244f6-110">設定要使用私人虛擬網路相同的 HYPER-V 主機電腦執行的 HYPER-V 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="244f6-110">Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network</span></span>  
 <span data-ttu-id="244f6-111">若要改善網路效能執行的 HYPER-V 虛擬機器之間相同的 HYPER-V 主機電腦，會建立私人虛擬網路和路由網路流量透過私人虛擬網路的虛擬機器之間。</span><span class="sxs-lookup"><span data-stu-id="244f6-111">To improve networking performance between Hyper-V virtual machines that are running on the same Hyper-V host computer, create a private virtual network and route network traffic between virtual machines through the private virtual network.</span></span>  
  
##### <a name="create-a-private-virtual-network"></a><span data-ttu-id="244f6-112">建立私人虛擬網路</span><span class="sxs-lookup"><span data-stu-id="244f6-112">Create a Private Virtual Network</span></span>  
  
1.  <span data-ttu-id="244f6-113">按一下**啟動**，按一下 **所有程式**。</span><span class="sxs-lookup"><span data-stu-id="244f6-113">Click **Start**, click **All Programs**.</span></span> <span data-ttu-id="244f6-114">按一下**系統管理工具**，然後按一下  **HYPER-V 管理員**。</span><span class="sxs-lookup"><span data-stu-id="244f6-114">Click **Administrative Tools**, and then click **Hyper-V Manager**.</span></span>  
  
2.  <span data-ttu-id="244f6-115">在 HYPER-V 管理員的左窗格中，以滑鼠右鍵按一下**HYPER-V 管理員**，然後按一下 **連接到伺服器**。</span><span class="sxs-lookup"><span data-stu-id="244f6-115">In the left-hand pane of the Hyper-V Manager, right-click **Hyper-V Manager**, and then click **Connect to Server**.</span></span>  
  
3.  <span data-ttu-id="244f6-116">在**選取電腦**對話方塊中，輸入 HYPER-V 主機電腦的名稱，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="244f6-116">In the **Select Computer** dialog box, enter the name of the Hyper-V host computer, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="244f6-117">在 HYPER-V 管理員的左窗格中，以滑鼠右鍵按一下 HYPER-V 主機，然後按一下**虛擬網路管理員**。</span><span class="sxs-lookup"><span data-stu-id="244f6-117">In the left-hand pane of the Hyper-V Manager, right-click the Hyper-V host, and then click **Virtual Network Manager**.</span></span>  
  
5.  <span data-ttu-id="244f6-118">在虛擬網路管理員中下,**您要建立哪種虛擬網路？**，按一下**私用**，然後按一下 **新增**。</span><span class="sxs-lookup"><span data-stu-id="244f6-118">In the Virtual Network Manager, under **What type of virtual network do you want to create?**, click **Private**, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="244f6-119">輸入新的虛擬網路的名稱，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="244f6-119">Enter a name for the new virtual network, and then click **OK**.</span></span> <span data-ttu-id="244f6-120">現在執行這個 HYPER-V 主機每個 HYPER-V 虛擬機器可以使用虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="244f6-120">The virtual network is now available to each Hyper-V virtual machine that is run on this Hyper-V host.</span></span>  
  
##### <a name="add-the-private-virtual-network-to-hyper-v-virtual-machines-running-on-the-hyper-v-host"></a><span data-ttu-id="244f6-121">新增至 HYPER-V 虛擬機器在 HYPER-V 主機上執行的私人虛擬網路</span><span class="sxs-lookup"><span data-stu-id="244f6-121">Add the Private Virtual Network to Hyper-V Virtual Machines running on the Hyper-V Host</span></span>  
  
1.  <span data-ttu-id="244f6-122">按一下**啟動**，按一下 **所有程式**。</span><span class="sxs-lookup"><span data-stu-id="244f6-122">Click **Start**, click **All Programs**.</span></span> <span data-ttu-id="244f6-123">按一下**系統管理工具**，然後按一下  **HYPER-V 管理員**。</span><span class="sxs-lookup"><span data-stu-id="244f6-123">Click **Administrative Tools**, and then click **Hyper-V Manager**.</span></span>  
  
2.  <span data-ttu-id="244f6-124">在 HYPER-V 管理員的左窗格中，以滑鼠右鍵按一下**HYPER-V 管理員**，然後按一下 **連接到伺服器**。</span><span class="sxs-lookup"><span data-stu-id="244f6-124">In the left-hand pane of the Hyper-V Manager, right-click **Hyper-V Manager**, and then click **Connect to Server**.</span></span>  
  
3.  <span data-ttu-id="244f6-125">在**選取電腦**對話方塊中，輸入 HYPER-V 主機電腦的名稱，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="244f6-125">In the **Select Computer** dialog box, enter the name of the Hyper-V host computer, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="244f6-126">關閉任何正在執行的虛擬機器，您要新增私人虛擬網路，請在虛擬機器上按一下滑鼠右鍵，然後按一下**關閉**。</span><span class="sxs-lookup"><span data-stu-id="244f6-126">Shut down any running virtual machines for which you would like to add the private virtual network by right-clicking on the virtual machine, and then clicking **Shut down**.</span></span>  
  
5.  <span data-ttu-id="244f6-127">之後關閉虛擬機器，以滑鼠右鍵按一下虛擬機器，然後**設定**變更虛擬機器的設定。</span><span class="sxs-lookup"><span data-stu-id="244f6-127">After shutting down the virtual machines, right-click a virtual machine, and then click **Settings** to change the settings for a virtual machine.</span></span>  
  
6.  <span data-ttu-id="244f6-128">在**< machine_name > 設定**對話方塊的 **新增硬體**，按一下以選取**網路介面卡**，然後按一下 **新增**.</span><span class="sxs-lookup"><span data-stu-id="244f6-128">In the **Settings for <machine_name>** dialog box, under **Add Hardware**, click to select **Network Adapter**, and then click **Add**.</span></span>  
  
7.  <span data-ttu-id="244f6-129">在**網路介面卡**組態頁面上，在**網路：**，選取您稍早建立的私人虛擬網路，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="244f6-129">On the **Network Adapter** configuration page, under **Network:**, select the private virtual network that you created earlier, and then click **OK**.</span></span> <span data-ttu-id="244f6-130">您現在已經私人虛擬網路可供仍可在下一次啟動虛擬機器的 HYPER-V 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="244f6-130">You have now made the private virtual network available to the Hyper-V virtual machine which will be accessible the next time that the virtual machine is started.</span></span>  
  
8.  <span data-ttu-id="244f6-131">重複上述步驟，每個虛擬機器，您想要透過私人虛擬網路的網路流量路由。</span><span class="sxs-lookup"><span data-stu-id="244f6-131">Repeat the steps above for each virtual machine for which you want to route network traffic through the private virtual network.</span></span>  
  
9. <span data-ttu-id="244f6-132">啟動新增私人虛擬網路的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="244f6-132">Start the virtual machines that you have added the private virtual network to.</span></span> <span data-ttu-id="244f6-133">以滑鼠右鍵按一下每個虛擬機器，按一下 **啟動**。</span><span class="sxs-lookup"><span data-stu-id="244f6-133">Right click each virtual machine and click **Start**.</span></span>  
  
##### <a name="configure-each-virtual-machine-to-use-the-private-virtual-network"></a><span data-ttu-id="244f6-134">若要使用私人虛擬網路的每個虛擬機器設定</span><span class="sxs-lookup"><span data-stu-id="244f6-134">Configure each Virtual Machine to use the Private Virtual Network</span></span>  
  
1.  <span data-ttu-id="244f6-135">一旦啟動每部虛擬機器後，私人虛擬網路為網路連線是可從虛擬機器存取。</span><span class="sxs-lookup"><span data-stu-id="244f6-135">Once each virtual machine has been started, the private virtual network is accessible to the virtual machine as a network connection.</span></span> <span data-ttu-id="244f6-136">若要使用 TCP/IPv4，每部虛擬機器上設定網路連線，並指定設定的 TCP/IPv4 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="244f6-136">Configure the network connection on each virtual machine to use TCP/IPv4, and specify settings for the TCP/IPv4 protocol.</span></span>  
  
    1.  <span data-ttu-id="244f6-137">存取網路連接屬性頁面，請選取**網際網路通訊協定版本 4(TCP/IPv4)**，然後按一下 **屬性**。</span><span class="sxs-lookup"><span data-stu-id="244f6-137">Access the network connection properties page, select **Internet Protocol Version 4(TCP/IPv4)**, and then click **Properties**.</span></span>  
  
    2.  <span data-ttu-id="244f6-138">按一下此選項按鈕旁的 **使用下列的 IP 位址**。</span><span class="sxs-lookup"><span data-stu-id="244f6-138">Click the radio button next to **Use the following IP address**.</span></span>  
  
2.  <span data-ttu-id="244f6-139">輸入一個值**IP 位址**欄位從範圍的私人 IP 位址中識別"RFC 1918 的私人 IP 位址的位址配置 」 在[http://go.microsoft.com/fwlink/?LinkID=31904](http://go.microsoft.com/fwlink/?LinkID=31904)。</span><span class="sxs-lookup"><span data-stu-id="244f6-139">Enter a value for the **IP address** field from the range of private IP addresses identified in “RFC 1918, Address Allocation for Private IP Addresses” at [http://go.microsoft.com/fwlink/?LinkID=31904](http://go.microsoft.com/fwlink/?LinkID=31904).</span></span>  
  
3.  <span data-ttu-id="244f6-140">請記下您所指定; 的 IP 位址您必須將此值與主機檔案項目稍後於此電腦的 NetBIOS 名稱產生關聯。</span><span class="sxs-lookup"><span data-stu-id="244f6-140">Make a note of the IP address that you specified; you will need to associate this value with the NetBIOS name of this computer in a HOSTS file entry later.</span></span>  
  
4.  <span data-ttu-id="244f6-141">輸入適當的值，如**子網路遮罩**欄位。</span><span class="sxs-lookup"><span data-stu-id="244f6-141">Enter an appropriate value for the **Subnet mask** field.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="244f6-142">應填入 Windows**子網路遮罩**具有適當的值欄位會根據您輸入的值**IP 位址**欄位。</span><span class="sxs-lookup"><span data-stu-id="244f6-142">Windows should populate the **Subnet mask** field with an appropriate value based upon the value that you entered into the **IP address** field.</span></span>  
  
5.  <span data-ttu-id="244f6-143">保留**預設閘道**欄位空白，按一下**確定**，然後按一下 **關閉**。</span><span class="sxs-lookup"><span data-stu-id="244f6-143">Leave the **Default gateway** field blank, click **OK**, and then click **Close**.</span></span>  
  
6.  <span data-ttu-id="244f6-144">以唯一的私人 IP 位址設定每個虛擬機器之後, 每個虛擬機器上的主機檔案的 IP 位址和更新其他 HYPER-V 主機電腦上執行的虛擬機器的 NetBIOS 名稱。</span><span class="sxs-lookup"><span data-stu-id="244f6-144">After configuring each virtual machine with a unique private IP address, update the HOSTS file on each virtual machine with the IP address and NetBIOS name of the other virtual machines running on the Hyper-V host computer.</span></span> <span data-ttu-id="244f6-145">每個虛擬機器上更新的主機檔案應該儲存 %systemroot%\drivers\etc\ 資料夾。</span><span class="sxs-lookup"><span data-stu-id="244f6-145">The updated HOSTS file should be saved to the %systemroot%\drivers\etc\ folder on each virtual machine.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="244f6-146">根據預設 Windows 會檢查本機主機檔案第一次將 NetBIOS 名稱解析，藉由更新每部虛擬機器上的主機檔案與唯一的私人 IP 位址的其他虛擬機器，因為將現在透過路由這些電腦之間的網路流量私人虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="244f6-146">Because by default Windows checks the local HOSTS file first to resolve NetBIOS names, by updating the HOSTS file on each virtual machine with the unique private IP addresses of the other virtual machines, network traffic between these machine will now be routed over the private virtual network.</span></span>  
  
### <a name="disable-tcp-offloading-for-the-virtual-machine-network-cards"></a><span data-ttu-id="244f6-147">停用 TCP 卸載，以將虛擬機器網路卡</span><span class="sxs-lookup"><span data-stu-id="244f6-147">Disable TCP Offloading for the Virtual Machine Network Cards</span></span>  
 <span data-ttu-id="244f6-148">在編輯登錄的 MSDN 主題 < 使用登錄值來啟用和停用工作 Offloading (NDIS 5.1) > 中所述[http://go.microsoft.com/fwlink/?LinkId=147619](http://go.microsoft.com/fwlink/?LinkId=147619)停用 TCP 卸載，以將每個虛擬機器上的網路卡。</span><span class="sxs-lookup"><span data-stu-id="244f6-148">Edit the registry as described in the MSDN topic “Using Registry Values to Enable and Disable Task Offloading (NDIS 5.1)” at [http://go.microsoft.com/fwlink/?LinkId=147619](http://go.microsoft.com/fwlink/?LinkId=147619) to disable TCP offloading for the network cards on each virtual machine.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="244f6-149">不正確使用登錄編輯程式可能會造成問題，需要重新安裝作業系統。</span><span class="sxs-lookup"><span data-stu-id="244f6-149">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="244f6-150">您必須自行負擔使用「登錄編輯程式」的風險。</span><span class="sxs-lookup"><span data-stu-id="244f6-150">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="244f6-151">有關如何備份、 還原和修改登錄的詳細資訊，請參閱 Microsoft 知識庫文件 < Microsoft Windows 登錄說明 >，網址[http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729)。</span><span class="sxs-lookup"><span data-stu-id="244f6-151">For more information about how to back up, restore, and modify the registry, see the Microsoft Knowledge Base article "Description of the Microsoft Windows registry" at [http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
## <a name="general-guidelines-for-improving-network-performance"></a><span data-ttu-id="244f6-152">改善網路效能的一般指導方針</span><span class="sxs-lookup"><span data-stu-id="244f6-152">General guidelines for improving network performance</span></span>  
 <span data-ttu-id="244f6-153">下列建議可提高網路效能：</span><span class="sxs-lookup"><span data-stu-id="244f6-153">The following recommendations can be used to increase network performance:</span></span>  
  
### <a name="add-additional-network-cards-to-computers-in-the-biztalk-server-environment"></a><span data-ttu-id="244f6-154">將其他網路介面卡新增至 BizTalk Server 環境中的電腦</span><span class="sxs-lookup"><span data-stu-id="244f6-154">Add additional network cards to computers in the BizTalk Server environment</span></span>  
 <span data-ttu-id="244f6-155">只要新增其他的硬碟可以改善磁碟效能、 新增其他網路介面卡可以改善網路效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-155">Just as adding additional hard drives can improve disk performance, adding additional network cards can improve network performance.</span></span> <span data-ttu-id="244f6-156">如果飽和 BizTalk Server 環境中的電腦上的網路卡和智慧卡是瓶頸，請考慮增加一或多個額外的網路介面卡來改善效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-156">If the network cards on the computers in your BizTalk Server environment are saturated and the card is a bottleneck, consider adding one or more additional network cards to improve performance.</span></span>  
  
### <a name="implement-network-segmentation"></a><span data-ttu-id="244f6-157">實作網路分割</span><span class="sxs-lookup"><span data-stu-id="244f6-157">Implement network segmentation</span></span>  
 <span data-ttu-id="244f6-158">請遵循建議**子網路**區段在 「 BizTalk Server 資料庫最佳化 」 白皮書[http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578)。</span><span class="sxs-lookup"><span data-stu-id="244f6-158">Follow the recommendations in the **Subnets** section of the "BizTalk Server Database Optimization" whitepaper at [http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578).</span></span>  
  
### <a name="where-possible-replace-hubs-with-switches"></a><span data-ttu-id="244f6-159">可能的話，則將中樞取代參數</span><span class="sxs-lookup"><span data-stu-id="244f6-159">Where possible, replace hubs with switches</span></span>  
 <span data-ttu-id="244f6-160">參數包含邏輯來直接之間路由傳送流量的來源和目的地而集線器使用廣播的模型路由傳送流量。</span><span class="sxs-lookup"><span data-stu-id="244f6-160">Switches contain logic to directly route traffic between the source and destination whereas hubs use a broadcast model to route traffic.</span></span> <span data-ttu-id="244f6-161">因此參數更有效率，而且提供改進的效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-161">Therefore switches are more efficient and offer improved performance.</span></span>  
  
### <a name="remove-unnecessary-network-protocols"></a><span data-ttu-id="244f6-162">移除不必要的網路通訊協定</span><span class="sxs-lookup"><span data-stu-id="244f6-162">Remove unnecessary network protocols</span></span>  
 <span data-ttu-id="244f6-163">Windows Server 電腦有時會有多個網路服務和安裝比實際需要的通訊協定。</span><span class="sxs-lookup"><span data-stu-id="244f6-163">Windows Server computers sometimes have more network services and protocols installed than are actually required.</span></span> <span data-ttu-id="244f6-164">每個額外的網路用戶端、 服務或通訊協定放置於其他負擔系統資源。</span><span class="sxs-lookup"><span data-stu-id="244f6-164">Each additional network client, service or protocol places additional overhead on system resources.</span></span>  
  
 <span data-ttu-id="244f6-165">此外，每個已安裝的通訊協定會產生網路流量。</span><span class="sxs-lookup"><span data-stu-id="244f6-165">In addition, each installed protocol generates network traffic.</span></span> <span data-ttu-id="244f6-166">藉由移除不必要的網路用戶端、 服務與通訊協定，系統資源的其他程序，可以避免過多的網路流量和可必須交涉的網路繫結數目會減少到最低。</span><span class="sxs-lookup"><span data-stu-id="244f6-166">By removing unnecessary network clients, services and protocols, system resources are made available for other processes, excess network traffic is avoided and the number of network bindings that must be negotiated is reduced to a minimum.</span></span>  
  
 <span data-ttu-id="244f6-167">若要查看目前已安裝的網路用戶端，通訊協定和服務，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="244f6-167">To see the currently installed network clients, protocols and services, follow these steps:</span></span>  
  
1.  <span data-ttu-id="244f6-168">按一下**啟動**，指向 **設定**，然後按一下 **控制台**。</span><span class="sxs-lookup"><span data-stu-id="244f6-168">Click **Start**, point to **Settings**, and then click **Control Panel**.</span></span>  
  
2.  <span data-ttu-id="244f6-169">按兩下**網路連線**顯示電腦上的網路連線。</span><span class="sxs-lookup"><span data-stu-id="244f6-169">Double-click **Network Connections** to display the network connections on the computer.</span></span>  
  
3.  <span data-ttu-id="244f6-170">以滑鼠右鍵按一下**區域連線**（或您的網路連線的項目），然後按一下 **屬性**顯示網路連線 內容 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="244f6-170">Right-click **Local Area Connection** (or the entry for your network connection), and then click **Properties** to display the properties dialog box for the network connection.</span></span>  
  
4.  <span data-ttu-id="244f6-171">若要移除不必要的項目，請選取它，然後按一下**解除安裝**。</span><span class="sxs-lookup"><span data-stu-id="244f6-171">To remove an unnecessary item, select it and click **Uninstall**.</span></span> <span data-ttu-id="244f6-172">若要停用項目，只清除項目相關聯的核取方塊。</span><span class="sxs-lookup"><span data-stu-id="244f6-172">To disable an item, simply clear the checkbox associated with the item.</span></span>  
  
 <span data-ttu-id="244f6-173">如果您不確定解除安裝的項目連接的效果，則停用項目，而不是解除安裝它。</span><span class="sxs-lookup"><span data-stu-id="244f6-173">If you are unsure about the effects of uninstalling an item for the connection, then disable the item rather than uninstalling it.</span></span> <span data-ttu-id="244f6-174">停用項目，可讓您判斷哪些服務、 通訊協定和用戶端實際所需的系統上。</span><span class="sxs-lookup"><span data-stu-id="244f6-174">Disabling items allows you to determine which services, protocols and clients are actually required on a system.</span></span> <span data-ttu-id="244f6-175">當已決定，停用項目在伺服器上有任何不良影響時，項目可以再解除安裝。</span><span class="sxs-lookup"><span data-stu-id="244f6-175">When it has been determined that disabling an item has no adverse affect on the server, the item can then be uninstalled.</span></span>  
  
 <span data-ttu-id="244f6-176">在許多情況下，只有下列三個元件是標準 TCP/IP 型網路上的作業需要：</span><span class="sxs-lookup"><span data-stu-id="244f6-176">In many cases, only the following three components are required for operation on a standard TCP/IP based network:</span></span>  
  
-   <span data-ttu-id="244f6-177">Client for Microsoft Networks</span><span class="sxs-lookup"><span data-stu-id="244f6-177">Client for Microsoft Networks</span></span>  
  
-   <span data-ttu-id="244f6-178">檔案和 Printer Sharing for Microsoft Networks</span><span class="sxs-lookup"><span data-stu-id="244f6-178">File and Printer Sharing for Microsoft Networks</span></span>  
  
-   <span data-ttu-id="244f6-179">網際網路通訊協定 (TCP/IP)</span><span class="sxs-lookup"><span data-stu-id="244f6-179">Internet Protocol (TCP/IP)</span></span>  
  
### <a name="network-adapter-drivers-on-all-computers-in-the-biztalk-server-environment-should-be-tuned-for-performance"></a><span data-ttu-id="244f6-180">在 BizTalk Server 環境中的所有電腦上的網路介面卡驅動程式應微調的效能</span><span class="sxs-lookup"><span data-stu-id="244f6-180">Network adapter drivers on all computers in the BizTalk Server environment should be tuned for performance</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="244f6-181">在套用之前調整網路介面卡驅動程式，一律安裝在環境中的網路卡的最新網路介面卡裝置驅動程式。</span><span class="sxs-lookup"><span data-stu-id="244f6-181">Before applying tuning to network adapter drivers, always install the latest network adapter device drivers for the network cards in the environment.</span></span>  
  
 <span data-ttu-id="244f6-182">調整網路介面卡裝置驅動程式，以最大化的封包緩衝區、 可用的記憶體數量，傳入和傳出。</span><span class="sxs-lookup"><span data-stu-id="244f6-182">Adjust the network adapter device drivers to maximize the amount of memory available for packet buffering, both incoming and outgoing.</span></span> <span data-ttu-id="244f6-183">也最大化緩衝區計數，尤其是傳輸緩衝區和聯合緩衝區。</span><span class="sxs-lookup"><span data-stu-id="244f6-183">Also maximize buffer counts, especially transmit buffers and coalesce buffers.</span></span> <span data-ttu-id="244f6-184">預設值為這些參數，，及是否即使提供，而有所不同製造商與驅動程式版本。</span><span class="sxs-lookup"><span data-stu-id="244f6-184">The default values for these parameters, and whether they are even provided, vary between manufacturers and driver versions.</span></span> <span data-ttu-id="244f6-185">目標是以最大化網路介面卡硬體，所完成的工作，並允許以降低網路流量爆發和相關聯的壅塞的網路作業的最大可能的緩衝區空間。</span><span class="sxs-lookup"><span data-stu-id="244f6-185">The goal is to maximize the work done by the network adapter hardware, and to allow the greatest possible buffer space for network operations to mitigate network traffic bursts and associated congestion.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="244f6-186">來微調網路介面卡驅動程式的步驟會因製造商而異。</span><span class="sxs-lookup"><span data-stu-id="244f6-186">Steps to tune network adapter drivers vary by manufacturer.</span></span>  
  
 <span data-ttu-id="244f6-187">請遵循下列步驟來存取在網路介面卡設定[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="244f6-187">Follow these steps to access settings for network adapters in[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]:</span></span>  
  
1.  <span data-ttu-id="244f6-188">按一下**啟動**、，然後按一下 **控制台**。</span><span class="sxs-lookup"><span data-stu-id="244f6-188">Click **Start**, , and then click **Control Panel**.</span></span>  
  
2.  <span data-ttu-id="244f6-189">按一下**網路和網際網路**，然後按一下 **網路和共用中心**。</span><span class="sxs-lookup"><span data-stu-id="244f6-189">Click **Network and Internet**, and then click **Network and Sharing Center**.</span></span>  
  
3.  <span data-ttu-id="244f6-190">按一下**變更介面卡設定**，以滑鼠右鍵按一下**區域連線**（或您的網路連線名稱），然後按一下 **屬性**。</span><span class="sxs-lookup"><span data-stu-id="244f6-190">Click **Change adapter settings**, Right-click **Local Area Connection** (or the name of your network connection), and then click **Properties**.</span></span>  
  
4.  <span data-ttu-id="244f6-191">在**一般**索引標籤上，按一下 **設定**。</span><span class="sxs-lookup"><span data-stu-id="244f6-191">On the **General** tab, click **Configure**.</span></span>  
  
5.  <span data-ttu-id="244f6-192">按一下**進階**存取屬性可設定的網路介面卡 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="244f6-192">Click the **Advanced** tab to access properties that can be configured for the network adapter.</span></span>  
  
 <span data-ttu-id="244f6-193">BizTalk Server 環境中的每個網路介面卡應設定下列屬性：</span><span class="sxs-lookup"><span data-stu-id="244f6-193">The following properties should be configured for each network adapter in the BizTalk Server environment:</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="244f6-194">您套用這些設定包括個別網路介面卡設定為彙總、 負載平衡或容錯功能的網路介面卡組合集內每個實體網路介面卡。</span><span class="sxs-lookup"><span data-stu-id="244f6-194">You apply these settings for each physical network adapter, including the individual network adapters within a teamed set of network adapters that are configured for aggregation, load balancing, or fault tolerance.</span></span> <span data-ttu-id="244f6-195">某些小組軟體，您可能需要將這些設定也套用至小組。</span><span class="sxs-lookup"><span data-stu-id="244f6-195">With some teaming software, you might need to apply these settings to the team also.</span></span> <span data-ttu-id="244f6-196">請注意，某些網路介面卡會自我調整，而且可能不會提供手動設定參數的選項。</span><span class="sxs-lookup"><span data-stu-id="244f6-196">Note that some network adapters are self-tuning and may not offer the option to configure parameters manually.</span></span>  
  
-   <span data-ttu-id="244f6-197">**電源選項**– 設定網路介面卡驅動程式，以防止關閉網路介面卡以節省電源的電源管理功能。</span><span class="sxs-lookup"><span data-stu-id="244f6-197">**Power Option** – Configure the network adapter driver to prevent power management functionality from turning off the network adapter to save power.</span></span> <span data-ttu-id="244f6-198">這項功能可能適用於用戶端電腦，但是應該很少，如果曾，BizTalk Server 或 SQL Server 的電腦上使用。</span><span class="sxs-lookup"><span data-stu-id="244f6-198">This functionality may be useful for client computers but should seldom, if ever, be used on a BizTalk Server or SQL Server computer.</span></span>  
  
-   <span data-ttu-id="244f6-199">**固定速度/雙工 （不要使用 AUTO）** -它是非常重要的網路速度、 雙工和流程控制參數會設定為對應到交換器上設定它們所連接。</span><span class="sxs-lookup"><span data-stu-id="244f6-199">**Fixed Speed/Duplex (do not use AUTO)** - It is very important that the network speed, duplex, and flow control parameters are set to correspond to the settings on the switch to which they are connected.</span></span> <span data-ttu-id="244f6-200">這會降低定期"自動同步處理 」 會可能暫時離線的連線次數。</span><span class="sxs-lookup"><span data-stu-id="244f6-200">This will mitigate the occurrence of periodic “auto-synchronization” which may temporarily take connections off-line.</span></span>  
  
-   <span data-ttu-id="244f6-201">**最大聯合緩衝區**-對應暫存器是用來將實體位址轉換為支援匯流排主控的網路介面卡的虛擬位址系統資源。</span><span class="sxs-lookup"><span data-stu-id="244f6-201">**Max Coalesce Buffers** - Map registers are system resources used to convert physical addresses to virtual addresses for network adapters that support bus mastering.</span></span> <span data-ttu-id="244f6-202">聯合緩衝區可使用網路驅動程式，如果驅動程式用盡對應暫存器。</span><span class="sxs-lookup"><span data-stu-id="244f6-202">Coalesce buffers are available to the network driver if the driver runs out of map registers.</span></span> <span data-ttu-id="244f6-203">設定此值最高可達到最大效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-203">Set this value as high as possible for maximum performance.</span></span> <span data-ttu-id="244f6-204">在伺服器上具有有限的實體記憶體，這可能會有負聯合緩衝區的影響會耗用系統記憶體。</span><span class="sxs-lookup"><span data-stu-id="244f6-204">On servers with limited physical memory, this may have a negative impact as coalesce buffers consume system memory.</span></span> <span data-ttu-id="244f6-205">在大多數系統上不過，最大值的設定可以套用而不會大幅降低可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="244f6-205">On most systems however, the maximum setting can be applied without significantly reducing available memory.</span></span>  
  
-   <span data-ttu-id="244f6-206">**最大傳輸/傳送描述元，以及傳送緩衝區**-此設定會指定多少個傳輸控制驅動程式會以網路介面供配置的緩衝區。</span><span class="sxs-lookup"><span data-stu-id="244f6-206">**Max Transmit/Send Descriptors and Send Buffers** - This setting specifies how many transmit control buffers the driver allocates for use by the network interface.</span></span> <span data-ttu-id="244f6-207">這會直接反映驅動程式可以有其 「 傳送 」 佇列中未處理的封包數目。</span><span class="sxs-lookup"><span data-stu-id="244f6-207">This directly reflects the number of outstanding packets the driver can have in its “send” queue.</span></span> <span data-ttu-id="244f6-208">設定此值最高可達到最大效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-208">Set this value as high as possible for maximum performance.</span></span> <span data-ttu-id="244f6-209">在伺服器上具有有限的實體記憶體，這可能會有負面影響為傳送緩衝區耗用系統記憶體。</span><span class="sxs-lookup"><span data-stu-id="244f6-209">On servers with limited physical memory, this may have a negative impact as send buffers consume system memory.</span></span> <span data-ttu-id="244f6-210">在大多數系統上不過，最大值的設定可以套用而不會大幅降低可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="244f6-210">On most systems however, the maximum setting can be applied without significantly reducing available memory.</span></span>  
  
-   <span data-ttu-id="244f6-211">**最大接收緩衝區**-此設定指定的通訊協定的記憶體中複製資料時，網路介面驅動程式所使用的記憶體緩衝區數量。</span><span class="sxs-lookup"><span data-stu-id="244f6-211">**Max Receive Buffers** - This setting specifies the amount of memory buffer used by the network interface driver when copying data to the protocol memory.</span></span> <span data-ttu-id="244f6-212">它通常是相對較小的值預設設定。</span><span class="sxs-lookup"><span data-stu-id="244f6-212">It is normally set by default to a relatively low value.</span></span> <span data-ttu-id="244f6-213">設定此值最高可達到最大效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-213">Set this value as high as possible for maximum performance.</span></span> <span data-ttu-id="244f6-214">在伺服器上具有有限的實體記憶體，這可能會有負接收緩衝區的影響會耗用系統記憶體。</span><span class="sxs-lookup"><span data-stu-id="244f6-214">On servers with limited physical memory, this may have a negative impact as receive buffers consume system memory.</span></span> <span data-ttu-id="244f6-215">在大多數系統上不過，最大值的設定可以套用而不會大幅降低可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="244f6-215">On most systems however, the maximum setting can be applied without significantly reducing available memory.</span></span>  
  
-   <span data-ttu-id="244f6-216">**所有在卸載選項**-幾乎在所有情況下啟用網路介面卸載功能時，改善效能。</span><span class="sxs-lookup"><span data-stu-id="244f6-216">**All offload options ON** - In almost all cases performance is improved when enabling network interface offload features.</span></span> <span data-ttu-id="244f6-217">某些網路介面卡提供不同的參數，以啟用或停用卸載，以將傳送並接收流量。</span><span class="sxs-lookup"><span data-stu-id="244f6-217">Some network adapters provide separate parameters to enable or disable offloading for send and receive traffic.</span></span> <span data-ttu-id="244f6-218">將工作從 CPU 的網路介面卡卸載，可協助伺服器以提升整體系統效能較低 CPU 使用率。</span><span class="sxs-lookup"><span data-stu-id="244f6-218">Offloading tasks from the CPU to the network adapter can help lower CPU usage on the server which will improve overall system performance.</span></span> <span data-ttu-id="244f6-219">Microsoft TCP/IP 傳輸可以卸載一或多個要具有適當的功能的網路介面卡的下列工作：</span><span class="sxs-lookup"><span data-stu-id="244f6-219">The Microsoft TCP/IP transport can offload one or more of the following tasks to a network adapter that has the appropriate capabilities:</span></span>  
  
    -   <span data-ttu-id="244f6-220">**總和檢查碼工作**-TCP/IP 傳輸可以卸載計算，並為 IP 和 TCP 總和檢查碼驗證傳送和接收的網路介面卡，啟用此選項，如果網路介面卡驅動程式提供這項功能。</span><span class="sxs-lookup"><span data-stu-id="244f6-220">**Checksum tasks** - The TCP/IP transport can offload the calculation and validation of IP and TCP checksums for sends and receives to the network adapter, enable this option if the network adapter driver provides this capability.</span></span>  
  
    -   <span data-ttu-id="244f6-221">**IP 安全性工作**-計算和驗證的加密的總和檢查碼驗證標頭 (AH) 」 和 「 封裝安全承載 (ESP) 的網路介面卡，可以將卸載 TCP/IP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="244f6-221">**IP security tasks** - The TCP/IP transport can offload the calculation and validation of encrypted checksums for authentication headers (AH) and encapsulating security payloads (ESP) to the network adapter.</span></span> <span data-ttu-id="244f6-222">加密和解密的 ESP 裝載網路介面卡，也可以卸載 TCP/IP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="244f6-222">The TCP/IP transport can also offload the encryption and decryption of ESP payloads to the network adapter.</span></span> <span data-ttu-id="244f6-223">如果網路介面卡驅動程式提供這項功能，請啟用這些選項。</span><span class="sxs-lookup"><span data-stu-id="244f6-223">Enable these options if the network adapter driver provides this capability.</span></span>  
  
    -   <span data-ttu-id="244f6-224">**分割大型 TCP 封包的**-TCP/IP 傳輸支援大型傳送卸載 (LSO)。</span><span class="sxs-lookup"><span data-stu-id="244f6-224">**Segmentation of large TCP packets** - The TCP/IP transport supports large send offload (LSO).</span></span> <span data-ttu-id="244f6-225">LSO，使用 TCP/IP 傳輸可以卸載大型 TCP 封包的分割。</span><span class="sxs-lookup"><span data-stu-id="244f6-225">With LSO, the TCP/IP transport can offload the segmentation of large TCP packets.</span></span>  
  
    -   <span data-ttu-id="244f6-226">**堆疊卸載**– 具有適當的功能的網路介面卡可卸載的整個網路堆疊。</span><span class="sxs-lookup"><span data-stu-id="244f6-226">**Stack Offload** – The entire network stack can be offloaded to a network adapter that has the appropriate capabilities.</span></span> <span data-ttu-id="244f6-227">如果網路介面卡驅動程式提供這項功能，請啟用此選項。</span><span class="sxs-lookup"><span data-stu-id="244f6-227">Enable this option if the network adapter driver provides this capability.</span></span>  
  
-   <span data-ttu-id="244f6-228">**線上醒機停用 （除非使用）** – 設定網路介面卡驅動程式停用喚醒上區域網路功能。</span><span class="sxs-lookup"><span data-stu-id="244f6-228">**Wake On LAN disabled (unless being used)** – Configure the network adapter driver to disable wake-on lan functionality.</span></span> <span data-ttu-id="244f6-229">這項功能可用於用戶端電腦，但應該很少如果曾經使用 BizTalk Server 或 SQL Server 的電腦上。</span><span class="sxs-lookup"><span data-stu-id="244f6-229">This functionality may be useful for client computers but should seldom if ever be used on a BizTalk Server or SQL Server computer.</span></span>  
  
 <span data-ttu-id="244f6-230">如需調整效能的網路介面卡的詳細資訊，請參閱**網路裝置設定**區段在 「 BizTalk Server 資料庫最佳化 」 白皮書[http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578)。</span><span class="sxs-lookup"><span data-stu-id="244f6-230">For more information about tuning network adapters for performance, see the **Network Device Settings** section of the "BizTalk Server Database Optimization" whitepaper at [http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578).</span></span>