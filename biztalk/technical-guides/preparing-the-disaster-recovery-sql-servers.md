---
title: 正在準備嚴重損壞修復的 SQL Server |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 44b77fe8-393d-4781-b0b0-5b7f6e50a67b
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 47bd787fe5fa33a30f01bc37fd4988ab26db99d1
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/01/2017
ms.locfileid: "26008071"
---
# <a name="preparing-the-disaster-recovery-sql-servers"></a><span data-ttu-id="0aae3-102">正在準備嚴重損壞修復的 SQL Server</span><span class="sxs-lookup"><span data-stu-id="0aae3-102">Preparing the Disaster Recovery SQL Servers</span></span>
<span data-ttu-id="0aae3-103">建立一組[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫在災害復原站台的執行個體。</span><span class="sxs-lookup"><span data-stu-id="0aae3-103">Createa set of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances in the disaster recovery site.</span></span> <span data-ttu-id="0aae3-104">若要確認嚴重損壞修復[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫執行個體可以提供相同等級的生產環境的效能[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫執行個體、 嚴重損壞修復[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫執行個體應該使用 「 類似設定硬體和執行的實體電腦數目[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="0aae3-104">To ensure that the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances can provide the same level of performance as the production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances, the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances should be configured with similar hardware and number of physical computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="0aae3-105">在此案例中，記錄傳送將會針對每個實際執行的 BizTalk Server[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]要套用至相對應的資料庫執行個體[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]在災害復原站台資料庫執行個體。</span><span class="sxs-lookup"><span data-stu-id="0aae3-105">In this scenario, BizTalk Server log shipping will be configured for each production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance to apply to a corresponding [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance at the disaster recovery site.</span></span>  
  
 <span data-ttu-id="0aae3-106">BizTalk Server 記錄傳送要求的索引鍵是磁碟機代號儲存資料庫檔案將生產站台上的磁碟區符合磁碟機代號在災害復原站台還原 」 資料庫檔案的磁碟區。</span><span class="sxs-lookup"><span data-stu-id="0aae3-106">A key BizTalk Server log shipping requirement is that the drive letter(s) on the production site where the database files are stored match the drive letter(s) at the disaster recovery site where the database files are restored.</span></span> <span data-ttu-id="0aae3-107">因此，如果[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫檔案群組位於 G:\data 在生產環境中，在目的地 (DR) 伺服器上，必須有 G:\data 目錄或還原將會失敗。</span><span class="sxs-lookup"><span data-stu-id="0aae3-107">So if the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database file group is located on G:\data in production, there must be a G:\data directory on the destination (DR) server, or the restore will fail.</span></span>  
  
 <span data-ttu-id="0aae3-108">BizTalk Server 記錄傳送不支援**RESTORE WITH MOVE** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]命令。</span><span class="sxs-lookup"><span data-stu-id="0aae3-108">BizTalk Server log shipping does not support the **RESTORE WITH MOVE** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] command.</span></span> <span data-ttu-id="0aae3-109">因此，我們建議在災害復原站台資料庫執行個體名稱是否符合在生產環境中的資料庫執行個體名稱 （根據預設，執行個體名稱是檔案路徑的一部分）。</span><span class="sxs-lookup"><span data-stu-id="0aae3-109">Because of this, we recommend that database instance names at the disaster recovery site match the database instance names in production (by default, the instance name is part of the file path).</span></span> <span data-ttu-id="0aae3-110">另一個選項是直接在對應的磁碟機代號，執行災害復原電腦上建立目錄[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]以便**還原**作業可以建立檔案相同的目錄結構中使用中生產環境。</span><span class="sxs-lookup"><span data-stu-id="0aae3-110">Another option is to simply create a directory on the corresponding drive letter in the disaster recovery computer running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] so that the **RESTORE** operation can create the file in the same directory structure as is used in production.</span></span>  
  
 <span data-ttu-id="0aae3-111">建立[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]對應至生產網站，如此，需要容錯移轉至災害復原站台，則所有必要的安全性登入的災害復原站台的安全性登入都存在於目的系統。</span><span class="sxs-lookup"><span data-stu-id="0aae3-111">Create [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] security logins for the disaster recovery site that correspond to the production site so that in the event that a failover to the disaster recovery site is required, all required security logins are present on the destination system.</span></span>  
  
 <span data-ttu-id="0aae3-112">一次的嚴重損壞修復的安裝[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]完成時執行個體，執行 master 和 msdb 資料庫的完整備份，如此可切換至災害復原站台失敗時，就可以還原乾淨系統。</span><span class="sxs-lookup"><span data-stu-id="0aae3-112">Once installation of the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances is completed, perform a full backup of master and msdb databases so that a clean system can be restored in the event that a switch to the disaster recovery site fails.</span></span>