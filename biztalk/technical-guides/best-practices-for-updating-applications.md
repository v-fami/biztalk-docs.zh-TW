---
title: 更新應用程式的最佳做法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 072eaf25-a1ee-4af3-b034-525a04260ef4
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 75dbde61369cdc8658dd9b39fa75fe2655225222
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37001727"
---
# <a name="best-practices-for-updating-applications"></a><span data-ttu-id="eaec8-102">更新應用程式的最佳作法</span><span class="sxs-lookup"><span data-stu-id="eaec8-102">Best Practices for Updating Applications</span></span>
<span data-ttu-id="eaec8-103">本主題說明您應該考慮使用更新 BizTalk 應用程式和成品時的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="eaec8-103">This topic describes best practices that you should consider using when updating BizTalk applications and artifacts.</span></span>  
  
## <a name="versioning"></a><span data-ttu-id="eaec8-104">版本控制</span><span class="sxs-lookup"><span data-stu-id="eaec8-104">Versioning</span></span>  
 <span data-ttu-id="eaec8-105">**實作版本控制策略**</span><span class="sxs-lookup"><span data-stu-id="eaec8-105">**Implement a versioning strategy**</span></span>  
  
- <span data-ttu-id="eaec8-106">良好的版本控制策略是不可或缺長時間執行交易使用或無法卸下 BizTalk 應用程式進行升級或 bug 修正。</span><span class="sxs-lookup"><span data-stu-id="eaec8-106">A good versioning strategy is essential if long-running transactions are used or the BizTalk application cannot be taken down to do upgrades or bug fixes.</span></span> <span data-ttu-id="eaec8-107">您應該計劃的所有的 BizTalk 成品的版本控制策略： 結構描述、 對應、 自訂配接器、 管線、 管線元件、 協調流程、 商務規則、 BAM 和自訂類別中的協調流程和對應的呼叫。</span><span class="sxs-lookup"><span data-stu-id="eaec8-107">You should plan the versioning strategy of all BizTalk artifacts: schemas, maps, custom adapters, pipelines, pipeline components, orchestrations, business rules, BAM, and custom classes called in orchestrations and maps.</span></span>  
  
  <span data-ttu-id="eaec8-108">**符合 BizTalk 管理資料庫和全域組件快取 (GAC) 中的組件**</span><span class="sxs-lookup"><span data-stu-id="eaec8-108">**Match the assemblies in the BizTalk Management database and the global assembly cache (GAC)**</span></span>  
  
- <span data-ttu-id="eaec8-109">請確定相同版本的組件位於 GAC 中，BizTalk 管理資料庫，讓您的應用程式已正確運作。</span><span class="sxs-lookup"><span data-stu-id="eaec8-109">Ensure that the same versions of assemblies are in the BizTalk Management database as in the GAC, so that your application functions properly.</span></span> <span data-ttu-id="eaec8-110">如果您沒有總是在部署組件時將其安裝到 GAC 中，就可能會在 GAC 和 BizTalk 管理資料庫中擁有不同的版本，這樣將會造成執行階段期間的處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="eaec8-110">If you do not always install an assembly in the GAC when you deploy it, you might have different versions in the GAC and the BizTalk Management database, which will cause processing errors during run time.</span></span>  
  
  <span data-ttu-id="eaec8-111">**使用 BizTalk 組件檢查 和 遠端 GAC 工具來確認 版本控制**</span><span class="sxs-lookup"><span data-stu-id="eaec8-111">**Use the BizTalk Assembly Checker and Remote GAC tool to verify versioning**</span></span>  
  
- <span data-ttu-id="eaec8-112">**BizTalk 組件檢查] 和 [遠端 GAC 工具**(BTSAssemblyChecker.exe) 會檢查組件部署到 BizTalk 管理資料庫的版本，並確認他們正確登錄所有的 BizTalk 的 GAC 中伺服器的電腦。</span><span class="sxs-lookup"><span data-stu-id="eaec8-112">The **BizTalk Assembly Checker and Remote GAC tool** (BTSAssemblyChecker.exe) checks the versions of assemblies deployed to the BizTalk Management database and verifies that they are correctly registered in the GAC on all BizTalk Server computers.</span></span> <span data-ttu-id="eaec8-113">若要確認所有包含的某些 BizTalk 應用程式成品的組件會安裝 BizTalk 的所有節點上，您可以使用這項工具。</span><span class="sxs-lookup"><span data-stu-id="eaec8-113">You can use this tool to verify that all the assemblies containing the artifacts of a certain BizTalk application are installed on all BizTalk nodes.</span></span> <span data-ttu-id="eaec8-114">此工具是搭配 solid 的版本控制策略，以確認特別並排顯示部署方法使用時，為每個 BizTalk 在電腦上，安裝正確版本的組件的一組特別有用。</span><span class="sxs-lookup"><span data-stu-id="eaec8-114">The tool is particularly useful in conjunction with a solid versioning strategy to verify that the correct version of a set of assemblies is installed on each BizTalk machine, especially when side-by-side deployment approach is used.</span></span>  
  
- <span data-ttu-id="eaec8-115">此工具是適用於 Support\Tools\x86\BTSAssemblyChecker.exe BizTalk Server 安裝媒體。</span><span class="sxs-lookup"><span data-stu-id="eaec8-115">The tool is available with the BizTalk Server installation media at Support\Tools\x86\BTSAssemblyChecker.exe.</span></span>  
  
  <span data-ttu-id="eaec8-116">**使用版本控制產品**</span><span class="sxs-lookup"><span data-stu-id="eaec8-116">**Use a Versioning Product**</span></span>  
  
- <span data-ttu-id="eaec8-117">您應該使用版本控制產品，例如 Microsoft Visual Studio® Team Foundation Server 2010，追蹤和版本設定的 BizTalk 成品。</span><span class="sxs-lookup"><span data-stu-id="eaec8-117">You should use a versioning product, such as Microsoft Visual Studio® Team Foundation Server 2010, for tracking and versioning BizTalk artifacts.</span></span> <span data-ttu-id="eaec8-118">如需 Microsoft Visual Studio® Team Foundation Server 2010 的詳細資訊，請參閱[Microsoft Visual Studio® Team Foundation Server 2010](http://go.microsoft.com/fwlink/?LinkId=210637) (http://go.microsoft.com/fwlink/?LinkId=210637)</span><span class="sxs-lookup"><span data-stu-id="eaec8-118">For more information about Microsoft Visual Studio® Team Foundation Server 2010 see [Microsoft Visual Studio® Team Foundation Server 2010](http://go.microsoft.com/fwlink/?LinkId=210637) (http://go.microsoft.com/fwlink/?LinkId=210637)</span></span>  
  
  <span data-ttu-id="eaec8-119">**因素成品至多個 BizTalk 應用程式**</span><span class="sxs-lookup"><span data-stu-id="eaec8-119">**Factor artifacts into multiple BizTalk applications**</span></span>  
  
- <span data-ttu-id="eaec8-120">若要執行的 BizTalk 成品的組件版本控制，您的 BizTalk 方案組件需要考量 （封裝），以允許 BizTalk Server 版本控制的方式。</span><span class="sxs-lookup"><span data-stu-id="eaec8-120">In order to perform assembly versioning of BizTalk artifacts, your BizTalk solution assemblies need to be factored (packaged) in such a way to allow for BizTalk Server versioning.</span></span> <span data-ttu-id="eaec8-121">如需隔離的詳細資訊，請參閱[新增至應用程式的成品](../technical-guides/adding-artifacts-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="eaec8-121">For more information about factoring, see [Adding Artifacts to an Application](../technical-guides/adding-artifacts-to-an-application.md).</span></span>  
  
## <a name="updating-an-application"></a><span data-ttu-id="eaec8-122">更新應用程式</span><span class="sxs-lookup"><span data-stu-id="eaec8-122">Updating an Application</span></span>  
 <span data-ttu-id="eaec8-123">**使用更新的應用程式的.msi 檔案**</span><span class="sxs-lookup"><span data-stu-id="eaec8-123">**Use an .msi file to update an application**</span></span>  
  
-   <span data-ttu-id="eaec8-124">升級應用程式通常是在生產環境中的審慎且精確的作業。</span><span class="sxs-lookup"><span data-stu-id="eaec8-124">Upgrading applications is typically a deliberate and precise operation in production.</span></span> <span data-ttu-id="eaec8-125">當您升級應用程式時，您通常應該使用手動檢查清單。</span><span class="sxs-lookup"><span data-stu-id="eaec8-125">When you upgrade an application, you should normally use a manual checklist.</span></span> <span data-ttu-id="eaec8-126">不過，您可以使用.msi 檔來簡化特定步驟。</span><span class="sxs-lookup"><span data-stu-id="eaec8-126">However, you may be able to streamline certain steps by using an .msi file.</span></span> <span data-ttu-id="eaec8-127">當您使用.msi 檔案時，您可以總結您的應用程式成品，到可轉散發套件。</span><span class="sxs-lookup"><span data-stu-id="eaec8-127">When you use an .msi file, you can wrap up your application artifacts into a distributable package.</span></span> <span data-ttu-id="eaec8-128">當您向多個執行階段方塊推出更新的 Dll，或執行群組層級部署的.msi 檔案會特別有用的。</span><span class="sxs-lookup"><span data-stu-id="eaec8-128">An .msi file is particularly useful when you roll out updated DLLs to multiple runtime boxes or perform a group-level deployment.</span></span> <span data-ttu-id="eaec8-129">當您建立的.msi 檔案時，您應從封裝來排除所有其他不變的資源和繫結。</span><span class="sxs-lookup"><span data-stu-id="eaec8-129">When you create an .msi file, you should exclude all other unchanged resources and bindings from the package.</span></span>  
  
-   <span data-ttu-id="eaec8-130">如果您更新 BizTalk 組件時，您應該停止、 取消登錄、 重新登記，然後再啟動 BizTalk 成品手動之前和之後您匯入並安裝.msi 檔案。</span><span class="sxs-lookup"><span data-stu-id="eaec8-130">If you update a BizTalk assembly, you should stop, unenlist, re-enlist, and then start BizTalk artifacts manually before and after you import and install the .msi file.</span></span> <span data-ttu-id="eaec8-131">如需有關如何更新 BizTalk 組件的詳細資訊，請參閱[檢查清單： 更新組件](../technical-guides/checklist-updating-an-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="eaec8-131">For more information about updating a BizTalk assembly, see [Checklist: Updating an Assembly](../technical-guides/checklist-updating-an-assembly.md).</span></span>  
  
-   <span data-ttu-id="eaec8-132">如果您升級使用並排顯示版本設定的 BizTalk Server 組件時，您必須執行手動步驟之前和之後使用.msi 檔案。</span><span class="sxs-lookup"><span data-stu-id="eaec8-132">If you upgrade a BizTalk Server assembly using side-by-side versioning, you will have to perform manual steps before and after using the .msi file.</span></span> <span data-ttu-id="eaec8-133">如需有關執行所需的手動步驟的詳細資訊，請參閱[檢查清單： 更新應用程式使用的並存版本控制](../technical-guides/checklist-updating-an-application-using-side-by-side-versioning.md)。</span><span class="sxs-lookup"><span data-stu-id="eaec8-133">For more information about the manual steps that are required, see [Checklist: Updating an Application Using Side-by-Side Versioning](../technical-guides/checklist-updating-an-application-using-side-by-side-versioning.md).</span></span>  
  
## <a name="updating-an-assembly"></a><span data-ttu-id="eaec8-134">更新組件</span><span class="sxs-lookup"><span data-stu-id="eaec8-134">Updating an Assembly</span></span>  
 <span data-ttu-id="eaec8-135">**在生產環境中的組件版本遞增**</span><span class="sxs-lookup"><span data-stu-id="eaec8-135">**Increment the version of an assembly in a production environment**</span></span>  
  
- <span data-ttu-id="eaec8-136">如果您正在更新執行於實際執行環境的組件，您應該隨時遞增組件版本號碼。</span><span class="sxs-lookup"><span data-stu-id="eaec8-136">If you are updating an assembly that is running in a production environment, you should always increment the assembly version number.</span></span>  
  
  <span data-ttu-id="eaec8-137">**更新已更新的組件與 GAC**</span><span class="sxs-lookup"><span data-stu-id="eaec8-137">**Update the GAC with an updated assembly**</span></span>  
  
- <span data-ttu-id="eaec8-138">當您更新組件包含協調流程、 結構描述或對應時，您必須更新以包含新版本的組件的 GAC。</span><span class="sxs-lookup"><span data-stu-id="eaec8-138">When you update an assembly containing an orchestration, schema, or map, you must update the GAC with the assembly containing the new version.</span></span> <span data-ttu-id="eaec8-139">否則，BizTalk Server 會使用過期的版本。</span><span class="sxs-lookup"><span data-stu-id="eaec8-139">Otherwise, BizTalk Server will use the outdated version.</span></span> <span data-ttu-id="eaec8-140">若要這樣做，每一部執行的應用程式繫結從 GAC，解除安裝舊版包含更新的成品的組件，請確定已安裝新版本的主機執行個體。</span><span class="sxs-lookup"><span data-stu-id="eaec8-140">To do this, on each computer that is running an instance of the host to which an application is bound, uninstall from the GAC the outdated version of the assembly containing the updated artifact and make sure that the new version is installed.</span></span>  
  
  <span data-ttu-id="eaec8-141">**重新啟動之後更新組件的主控件執行個體**</span><span class="sxs-lookup"><span data-stu-id="eaec8-141">**Restart a host instance after updating an assembly**</span></span>  
  
- <span data-ttu-id="eaec8-142">如果更新現有的應用程式中的 BizTalk 組件時，您可能需要重新啟動主控件執行個體，變更才會生效。</span><span class="sxs-lookup"><span data-stu-id="eaec8-142">If a BizTalk assembly in an existing application is updated, you may need to restart host instances for the changes to take effect.</span></span> <span data-ttu-id="eaec8-143">重新啟動主控件執行個體，就會停止所有其他主控件執行個體執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="eaec8-143">Restarting a host instance stops all other applications that are running on the host instance.</span></span>  
  
## <a name="updating-an-artifact"></a><span data-ttu-id="eaec8-144">更新成品</span><span class="sxs-lookup"><span data-stu-id="eaec8-144">Updating an Artifact</span></span>  
 <span data-ttu-id="eaec8-145">**解除部署相依的成品的成品，這取決於之前**</span><span class="sxs-lookup"><span data-stu-id="eaec8-145">**Undeploy a dependent artifact before the artifact that it depends on**</span></span>  
  
- <span data-ttu-id="eaec8-146">如果您要解除部署其他成品所相依的成品，您必須先解除部署相依的成品。</span><span class="sxs-lookup"><span data-stu-id="eaec8-146">If you are undeploying an artifact on which another artifact depends, you must undeploy the dependent artifact first.</span></span>  
  
  > [!NOTE]  
  >  <span data-ttu-id="eaec8-147">如果您執行第一次不解除部署相依的成品，BizTalk Server 管理主控台會顯示警告，並避免您不正確的順序解除部署成品。</span><span class="sxs-lookup"><span data-stu-id="eaec8-147">If you do not undeploy the dependent artifact first, the BizTalk Server Administration console will display a warning and prevent you from undeploying artifacts in the incorrect order.</span></span>  
  
  <span data-ttu-id="eaec8-148">**無法停止另一個應用程式所依賴的成品**</span><span class="sxs-lookup"><span data-stu-id="eaec8-148">**Do not stop an artifact that another application depends on**</span></span>  
  
- <span data-ttu-id="eaec8-149">如果您停止一個應用程式中另一個應用程式所相依的成品 (這可能是停止整個應用程式所產生的結果)，則相依的應用程式將無法正確運作。</span><span class="sxs-lookup"><span data-stu-id="eaec8-149">If you stop an artifact in one application (which may result from stopping the entire application) that another application depends on, the dependent application will not function correctly.</span></span> <span data-ttu-id="eaec8-150">如需有關如何停止應用程式的詳細資訊，請參閱 <<c0> [ 如何啟動和停止 BizTalk 應用程式](http://go.microsoft.com/fwlink/?LinkID=154729)(http://go.microsoft.com/fwlink/?LinkID=154729)。</span><span class="sxs-lookup"><span data-stu-id="eaec8-150">For more information about stopping an application, see [How to Start and Stop a BizTalk Application](http://go.microsoft.com/fwlink/?LinkID=154729) (http://go.microsoft.com/fwlink/?LinkID=154729).</span></span>  
  
  <span data-ttu-id="eaec8-151">**加入之前先移動成品的組件的參考**</span><span class="sxs-lookup"><span data-stu-id="eaec8-151">**Add a reference to an assembly before moving an artifact**</span></span>  
  
- <span data-ttu-id="eaec8-152">當您將成品移到新的應用程式時，除非新的應用程式有參考移動之成品所相依之成品的所在應用程式，否則也會移動該成品所相依的其他任何成品。</span><span class="sxs-lookup"><span data-stu-id="eaec8-152">When you move an artifact to a new application, any other artifacts on which it has dependencies are also moved unless the new application has a reference to the application(s) containing the artifacts on which the moved artifact depends.</span></span> <span data-ttu-id="eaec8-153">此外，相依於移動之成品的任何成品也會移動，除非包含這些成品的應用程式有參考新的應用程式。</span><span class="sxs-lookup"><span data-stu-id="eaec8-153">Also, any artifacts that have dependencies on the moved artifact are moved unless the application(s) containing them have a reference to the new application.</span></span> <span data-ttu-id="eaec8-154">當您移動成品時，系統會為您顯示也將一併移動之其他成品的清單。</span><span class="sxs-lookup"><span data-stu-id="eaec8-154">When moving an artifact, you are shown the list of other artifacts that will also be moved.</span></span>  
  
## <a name="updating-bindings"></a><span data-ttu-id="eaec8-155">更新繫結</span><span class="sxs-lookup"><span data-stu-id="eaec8-155">Updating Bindings</span></span>  
 <span data-ttu-id="eaec8-156">**自動重新設定的繫結**</span><span class="sxs-lookup"><span data-stu-id="eaec8-156">**Automate the reconfiguration of bindings**</span></span>  
  
-   <span data-ttu-id="eaec8-157">當您在應用程式中更新組件時，其繫結通常都會遭到覆寫，或是組件可能根本不會繫結，進而使您必須手動重新設定繫結。</span><span class="sxs-lookup"><span data-stu-id="eaec8-157">When you update an assembly in an application, its bindings are often overwritten or else the assembly may not be bound at all, forcing you to manually reconfigure bindings.</span></span> <span data-ttu-id="eaec8-158">您可以使用繫結檔案來自動化此程序。</span><span class="sxs-lookup"><span data-stu-id="eaec8-158">You can automate this process by using a binding file.</span></span> <span data-ttu-id="eaec8-159">如果您要更新的組件相同的版本，可以先將繫結檔案匯出的組件，然後更新組件，則組件匯入應用程式，然後重新套用先前的繫結，透過匯入繫結檔案。</span><span class="sxs-lookup"><span data-stu-id="eaec8-159">If you are updating the same version of an assembly, you can first export a binding file for the assembly, then update the assembly, then import the assembly into the application, and then reapply the previous bindings by importing the binding file.</span></span> <span data-ttu-id="eaec8-160">如果您要更新組件的較新版本，您可以將繫結檔案匯出、 編輯檔案以反映新的組件版本、 新的組件匯入應用程式，並匯入繫結檔案，以套用新的繫結。</span><span class="sxs-lookup"><span data-stu-id="eaec8-160">If you are updating an assembly with a newer version, you can export a binding file, edit the file to reflect the new assembly version, import the new assembly into the application, and then apply the new bindings by importing the binding file.</span></span> <span data-ttu-id="eaec8-161">如需有關繫結檔案的詳細資訊，請參閱 <<c0> [ 如何繫結檔案匯出的繫結](../technical-guides/how-to-export-bindings-to-a-binding-file.md)。</span><span class="sxs-lookup"><span data-stu-id="eaec8-161">For more information about binding files, see [How to Export Bindings to a Binding File](../technical-guides/how-to-export-bindings-to-a-binding-file.md).</span></span> <span data-ttu-id="eaec8-162">如需有關編輯繫結檔案的詳細資訊，請參閱 <<c0> [ 自訂繫結檔案](http://go.microsoft.com/fwlink/?LinkID=155000)(http://go.microsoft.com/fwlink/?LinkID=155000)。</span><span class="sxs-lookup"><span data-stu-id="eaec8-162">For more information about editing a binding file, see [Customizing Binding Files](http://go.microsoft.com/fwlink/?LinkID=155000) (http://go.microsoft.com/fwlink/?LinkID=155000).</span></span>  
  
## <a name="starting-or-stopping-an-application"></a><span data-ttu-id="eaec8-163">啟動或停止應用程式</span><span class="sxs-lookup"><span data-stu-id="eaec8-163">Starting or Stopping an Application</span></span>  
 <span data-ttu-id="eaec8-164">**停止應用程式更新成品**</span><span class="sxs-lookup"><span data-stu-id="eaec8-164">**Stop an application to update artifacts**</span></span>  
  
-   <span data-ttu-id="eaec8-165">如果您不要停止應用程式來更新應用程式中的成品，您需要暫時停止到 MessageBox 資料庫的發行集，藉由停用端點，並停止和取消登錄任何執行中執行個體。</span><span class="sxs-lookup"><span data-stu-id="eaec8-165">If you do not stop an application to update artifacts in the application, you need to temporarily halt publication to the MessageBox database by disabling endpoints, and stop and unenlist any running instances.</span></span> <span data-ttu-id="eaec8-166">若要停止並取消登錄正在執行的執行個體，所有已凍結或已暫停的執行個體必須以手動方式繼續和完成，或終止。</span><span class="sxs-lookup"><span data-stu-id="eaec8-166">To stop and unenlist running instances, all dehydrated or suspended instances must be either manually resumed and completed, or terminated.</span></span>  
  
-   <span data-ttu-id="eaec8-167">雖然不必為了更新成品或安裝應用程式而停止應用程式，我們還是建議您一律在更新成品時停止應用程式。</span><span class="sxs-lookup"><span data-stu-id="eaec8-167">Although it is not required to stop an application in order to update an artifact or install the application, we recommend that you always stop an application when you update an artifact.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eaec8-168">另請參閱</span><span class="sxs-lookup"><span data-stu-id="eaec8-168">See Also</span></span>  
 [<span data-ttu-id="eaec8-169">如何將繫結匯出至繫結檔案</span><span class="sxs-lookup"><span data-stu-id="eaec8-169">How to Export Bindings to a Binding File</span></span>](../technical-guides/how-to-export-bindings-to-a-binding-file.md)