---
title: "更新應用程式的最佳作法 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 072eaf25-a1ee-4af3-b034-525a04260ef4
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d01cf54454866eadbd70de7ef30439a0e7068cb1
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/01/2017
---
# <a name="best-practices-for-updating-applications"></a><span data-ttu-id="1e882-102">更新應用程式的最佳作法</span><span class="sxs-lookup"><span data-stu-id="1e882-102">Best Practices for Updating Applications</span></span>
<span data-ttu-id="1e882-103">本主題說明您應該考慮更新 BizTalk 應用程式和成品時所使用的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="1e882-103">This topic describes best practices that you should consider using when updating BizTalk applications and artifacts.</span></span>  
  
## <a name="versioning"></a><span data-ttu-id="1e882-104">版本控制</span><span class="sxs-lookup"><span data-stu-id="1e882-104">Versioning</span></span>  
 <span data-ttu-id="1e882-105">**實作版本控制策略**</span><span class="sxs-lookup"><span data-stu-id="1e882-105">**Implement a versioning strategy**</span></span>  
  
-   <span data-ttu-id="1e882-106">良好的版本控制策略是不可或缺長時間執行交易的使用，或無法停機的 BizTalk 應用程式進行升級或 bug 修正。</span><span class="sxs-lookup"><span data-stu-id="1e882-106">A good versioning strategy is essential if long-running transactions are used or the BizTalk application cannot be taken down to do upgrades or bug fixes.</span></span> <span data-ttu-id="1e882-107">您應該規劃所有的 BizTalk 成品的版本控制策略： 中協調流程和對應的結構描述、 對應、 自訂配接器、 管線、 管線元件、 協調流程、 商務規則、 BAM，以及自訂類別呼叫。</span><span class="sxs-lookup"><span data-stu-id="1e882-107">You should plan the versioning strategy of all BizTalk artifacts: schemas, maps, custom adapters, pipelines, pipeline components, orchestrations, business rules, BAM, and custom classes called in orchestrations and maps.</span></span>  
  
 <span data-ttu-id="1e882-108">**符合 BizTalk 管理資料庫和全域組件快取 (GAC) 中的組件**</span><span class="sxs-lookup"><span data-stu-id="1e882-108">**Match the assemblies in the BizTalk Management database and the global assembly cache (GAC)**</span></span>  
  
-   <span data-ttu-id="1e882-109">確定相同版本的組件在 gac 中，BizTalk 管理資料庫中，讓您的應用程式已正確運作。</span><span class="sxs-lookup"><span data-stu-id="1e882-109">Ensure that the same versions of assemblies are in the BizTalk Management database as in the GAC, so that your application functions properly.</span></span> <span data-ttu-id="1e882-110">如果您沒有總是在部署組件時將其安裝到 GAC 中，就可能會在 GAC 和 BizTalk 管理資料庫中擁有不同的版本，這樣將會造成執行階段期間的處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="1e882-110">If you do not always install an assembly in the GAC when you deploy it, you might have different versions in the GAC and the BizTalk Management database, which will cause processing errors during run time.</span></span>  
  
 <span data-ttu-id="1e882-111">**使用 BizTalk 組件檢查] 和 [遠端 GAC 工具來確認版本控制**</span><span class="sxs-lookup"><span data-stu-id="1e882-111">**Use the BizTalk Assembly Checker and Remote GAC tool to verify versioning**</span></span>  
  
-   <span data-ttu-id="1e882-112">**BizTalk 組件檢查] 和 [遠端 GAC 工具**(BTSAssemblyChecker.exe) 會檢查組件部署到 BizTalk 管理資料庫的版本，並確認它們正確登錄所有的 BizTalk 上的 GAC 中伺服器的電腦。</span><span class="sxs-lookup"><span data-stu-id="1e882-112">The **BizTalk Assembly Checker and Remote GAC tool** (BTSAssemblyChecker.exe) checks the versions of assemblies deployed to the BizTalk Management database and verifies that they are correctly registered in the GAC on all BizTalk Server computers.</span></span> <span data-ttu-id="1e882-113">若要確認 BizTalk 的所有節點上已安裝的所有組件包含特定的 BizTalk 應用程式的成品，您可以使用此工具。</span><span class="sxs-lookup"><span data-stu-id="1e882-113">You can use this tool to verify that all the assemblies containing the artifacts of a certain BizTalk application are installed on all BizTalk nodes.</span></span> <span data-ttu-id="1e882-114">此工具是搭配實心版本控制策略，以確認組件集合的正確版本已安裝每個 BizTalk 在電腦上，特別使用並存的部署方法時特別有用。</span><span class="sxs-lookup"><span data-stu-id="1e882-114">The tool is particularly useful in conjunction with a solid versioning strategy to verify that the correct version of a set of assemblies is installed on each BizTalk machine, especially when side-by-side deployment approach is used.</span></span>  
  
-   <span data-ttu-id="1e882-115">此工具會隨 Support\Tools\x86\BTSAssemblyChecker.exe 在 BizTalk Server 安裝媒體。</span><span class="sxs-lookup"><span data-stu-id="1e882-115">The tool is available with the BizTalk Server installation media at Support\Tools\x86\BTSAssemblyChecker.exe.</span></span>  
  
 <span data-ttu-id="1e882-116">**使用版本控制產品**</span><span class="sxs-lookup"><span data-stu-id="1e882-116">**Use a Versioning Product**</span></span>  
  
-   <span data-ttu-id="1e882-117">您應該使用版本控制產品，例如 Microsoft Visual Studio （) Team Foundation Server 2010，追蹤和版本設定的 BizTalk 成品。</span><span class="sxs-lookup"><span data-stu-id="1e882-117">You should use a versioning product, such as Microsoft Visual Studio® Team Foundation Server 2010, for tracking and versioning BizTalk artifacts.</span></span> <span data-ttu-id="1e882-118">如需 Microsoft Visual Studio （) Team Foundation Server 2010 的詳細資訊，請參閱[Microsoft Visual Studio （) Team Foundation Server 2010](http://go.microsoft.com/fwlink/?LinkId=210637) (http://go.microsoft.com/fwlink/?LinkId=210637)</span><span class="sxs-lookup"><span data-stu-id="1e882-118">For more information about Microsoft Visual Studio® Team Foundation Server 2010 see [Microsoft Visual Studio® Team Foundation Server 2010](http://go.microsoft.com/fwlink/?LinkId=210637) (http://go.microsoft.com/fwlink/?LinkId=210637)</span></span>  
  
 <span data-ttu-id="1e882-119">**因素成品至多個 BizTalk 應用程式**</span><span class="sxs-lookup"><span data-stu-id="1e882-119">**Factor artifacts into multiple BizTalk applications**</span></span>  
  
-   <span data-ttu-id="1e882-120">若要執行的 BizTalk 成品的組件版本控制，您的 BizTalk 方案組件需要中分解出來 （封裝），以供 BizTalk Server 版本控制的方式。</span><span class="sxs-lookup"><span data-stu-id="1e882-120">In order to perform assembly versioning of BizTalk artifacts, your BizTalk solution assemblies need to be factored (packaged) in such a way to allow for BizTalk Server versioning.</span></span> <span data-ttu-id="1e882-121">如需建構的詳細資訊，請參閱[新增成品至應用程式](../technical-guides/adding-artifacts-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="1e882-121">For more information about factoring, see [Adding Artifacts to an Application](../technical-guides/adding-artifacts-to-an-application.md).</span></span>  
  
## <a name="updating-an-application"></a><span data-ttu-id="1e882-122">更新應用程式</span><span class="sxs-lookup"><span data-stu-id="1e882-122">Updating an Application</span></span>  
 <span data-ttu-id="1e882-123">**使用.msi 檔案來更新應用程式**</span><span class="sxs-lookup"><span data-stu-id="1e882-123">**Use an .msi file to update an application**</span></span>  
  
-   <span data-ttu-id="1e882-124">升級應用程式通常是在生產環境中的審慎且精確地作業。</span><span class="sxs-lookup"><span data-stu-id="1e882-124">Upgrading applications is typically a deliberate and precise operation in production.</span></span> <span data-ttu-id="1e882-125">當您升級應用程式時，您通常應該使用手動檢查清單。</span><span class="sxs-lookup"><span data-stu-id="1e882-125">When you upgrade an application, you should normally use a manual checklist.</span></span> <span data-ttu-id="1e882-126">不過，您可以簡化使用.msi 檔案的特定步驟。</span><span class="sxs-lookup"><span data-stu-id="1e882-126">However, you may be able to streamline certain steps by using an .msi file.</span></span> <span data-ttu-id="1e882-127">當您使用的.msi 檔案時，您可以包裝您的應用程式成品至可轉散發套件。</span><span class="sxs-lookup"><span data-stu-id="1e882-127">When you use an .msi file, you can wrap up your application artifacts into a distributable package.</span></span> <span data-ttu-id="1e882-128">當您首度更新 Dll 發行至執行階段的多個方塊，或執行群組層級部署時，將.msi 檔案會特別有用。</span><span class="sxs-lookup"><span data-stu-id="1e882-128">An .msi file is particularly useful when you roll out updated DLLs to multiple runtime boxes or perform a group-level deployment.</span></span> <span data-ttu-id="1e882-129">當您建立的.msi 檔案時，您應該從封裝來排除所有其他不變的資源和繫結。</span><span class="sxs-lookup"><span data-stu-id="1e882-129">When you create an .msi file, you should exclude all other unchanged resources and bindings from the package.</span></span>  
  
-   <span data-ttu-id="1e882-130">如果您更新 BizTalk 組件，您應該停止、 取消登錄、 重新登錄，然後再啟動 BizTalk 成品手動之前和之後您匯入並安裝.msi 檔案。</span><span class="sxs-lookup"><span data-stu-id="1e882-130">If you update a BizTalk assembly, you should stop, unenlist, re-enlist, and then start BizTalk artifacts manually before and after you import and install the .msi file.</span></span> <span data-ttu-id="1e882-131">如需更新 BizTalk 組件的詳細資訊，請參閱[檢查清單： 更新組件](../technical-guides/checklist-updating-an-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="1e882-131">For more information about updating a BizTalk assembly, see [Checklist: Updating an Assembly](../technical-guides/checklist-updating-an-assembly.md).</span></span>  
  
-   <span data-ttu-id="1e882-132">如果您升級 BizTalk Server 組件使用-並存版本控制，您必須執行手動步驟之前和之後使用.msi 檔案。</span><span class="sxs-lookup"><span data-stu-id="1e882-132">If you upgrade a BizTalk Server assembly using side-by-side versioning, you will have to perform manual steps before and after using the .msi file.</span></span> <span data-ttu-id="1e882-133">如需需要手動操作步驟的詳細資訊，請參閱[檢查清單： 更新應用程式使用的並存版本控制](../technical-guides/checklist-updating-an-application-using-side-by-side-versioning.md)。</span><span class="sxs-lookup"><span data-stu-id="1e882-133">For more information about the manual steps that are required, see [Checklist: Updating an Application Using Side-by-Side Versioning](../technical-guides/checklist-updating-an-application-using-side-by-side-versioning.md).</span></span>  
  
## <a name="updating-an-assembly"></a><span data-ttu-id="1e882-134">更新組件</span><span class="sxs-lookup"><span data-stu-id="1e882-134">Updating an Assembly</span></span>  
 <span data-ttu-id="1e882-135">**遞增實際執行環境中的組件的版本**</span><span class="sxs-lookup"><span data-stu-id="1e882-135">**Increment the version of an assembly in a production environment**</span></span>  
  
-   <span data-ttu-id="1e882-136">如果您正在更新執行於實際執行環境的組件，您應該隨時遞增組件版本號碼。</span><span class="sxs-lookup"><span data-stu-id="1e882-136">If you are updating an assembly that is running in a production environment, you should always increment the assembly version number.</span></span>  
  
 <span data-ttu-id="1e882-137">**使用更新的組件更新 GAC**</span><span class="sxs-lookup"><span data-stu-id="1e882-137">**Update the GAC with an updated assembly**</span></span>  
  
-   <span data-ttu-id="1e882-138">當您更新包含協調流程、 結構描述或對應的組件時，您必須更新包含新版本的組件在 GAC。</span><span class="sxs-lookup"><span data-stu-id="1e882-138">When you update an assembly containing an orchestration, schema, or map, you must update the GAC with the assembly containing the new version.</span></span> <span data-ttu-id="1e882-139">否則，BizTalk Server 將使用過期的版本。</span><span class="sxs-lookup"><span data-stu-id="1e882-139">Otherwise, BizTalk Server will use the outdated version.</span></span> <span data-ttu-id="1e882-140">若要這樣做時，每一部執行的應用程式繫結從 GAC，解除安裝組件包含更新的成品的過期的版本，請確定已安裝新版本的主機執行個體。</span><span class="sxs-lookup"><span data-stu-id="1e882-140">To do this, on each computer that is running an instance of the host to which an application is bound, uninstall from the GAC the outdated version of the assembly containing the updated artifact and make sure that the new version is installed.</span></span>  
  
 <span data-ttu-id="1e882-141">**在更新組件之後，重新啟動主控件執行個體**</span><span class="sxs-lookup"><span data-stu-id="1e882-141">**Restart a host instance after updating an assembly**</span></span>  
  
-   <span data-ttu-id="1e882-142">如果更新現有的應用程式中的 BizTalk 組件時，您可能需要重新啟動主控件執行個體，變更才會生效。</span><span class="sxs-lookup"><span data-stu-id="1e882-142">If a BizTalk assembly in an existing application is updated, you may need to restart host instances for the changes to take effect.</span></span> <span data-ttu-id="1e882-143">重新啟動主控件執行個體，就會停止所有其他主控件執行個體執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="1e882-143">Restarting a host instance stops all other applications that are running on the host instance.</span></span>  
  
## <a name="updating-an-artifact"></a><span data-ttu-id="1e882-144">更新成品</span><span class="sxs-lookup"><span data-stu-id="1e882-144">Updating an Artifact</span></span>  
 <span data-ttu-id="1e882-145">**解除部署相依的成品的成品，相依於之前**</span><span class="sxs-lookup"><span data-stu-id="1e882-145">**Undeploy a dependent artifact before the artifact that it depends on**</span></span>  
  
-   <span data-ttu-id="1e882-146">如果您要解除部署其他成品所相依的成品，您必須先解除部署相依的成品。</span><span class="sxs-lookup"><span data-stu-id="1e882-146">If you are undeploying an artifact on which another artifact depends, you must undeploy the dependent artifact first.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1e882-147">如果您執行第一次不解除部署相依的成品，BizTalk Server 管理主控台會顯示警告，並導致您無法解除部署成品不正確的順序。</span><span class="sxs-lookup"><span data-stu-id="1e882-147">If you do not undeploy the dependent artifact first, the BizTalk Server Administration console will display a warning and prevent you from undeploying artifacts in the incorrect order.</span></span>  
  
 <span data-ttu-id="1e882-148">**無法停止另一個應用程式所依賴的成品**</span><span class="sxs-lookup"><span data-stu-id="1e882-148">**Do not stop an artifact that another application depends on**</span></span>  
  
-   <span data-ttu-id="1e882-149">如果您停止一個應用程式中另一個應用程式所相依的成品 (這可能是停止整個應用程式所產生的結果)，則相依的應用程式將無法正確運作。</span><span class="sxs-lookup"><span data-stu-id="1e882-149">If you stop an artifact in one application (which may result from stopping the entire application) that another application depends on, the dependent application will not function correctly.</span></span> <span data-ttu-id="1e882-150">如需停止應用程式的詳細資訊，請參閱[如何啟動和停止 BizTalk 應用程式](http://go.microsoft.com/fwlink/?LinkID=154729)(http://go.microsoft.com/fwlink/?LinkID=154729)。</span><span class="sxs-lookup"><span data-stu-id="1e882-150">For more information about stopping an application, see [How to Start and Stop a BizTalk Application](http://go.microsoft.com/fwlink/?LinkID=154729) (http://go.microsoft.com/fwlink/?LinkID=154729).</span></span>  
  
 <span data-ttu-id="1e882-151">**加入組件之前移動成品的參考**</span><span class="sxs-lookup"><span data-stu-id="1e882-151">**Add a reference to an assembly before moving an artifact**</span></span>  
  
-   <span data-ttu-id="1e882-152">當您將成品移到新的應用程式時，除非新的應用程式有參考移動之成品所相依之成品的所在應用程式，否則也會移動該成品所相依的其他任何成品。</span><span class="sxs-lookup"><span data-stu-id="1e882-152">When you move an artifact to a new application, any other artifacts on which it has dependencies are also moved unless the new application has a reference to the application(s) containing the artifacts on which the moved artifact depends.</span></span> <span data-ttu-id="1e882-153">此外，相依於移動之成品的任何成品也會移動，除非包含這些成品的應用程式有參考新的應用程式。</span><span class="sxs-lookup"><span data-stu-id="1e882-153">Also, any artifacts that have dependencies on the moved artifact are moved unless the application(s) containing them have a reference to the new application.</span></span> <span data-ttu-id="1e882-154">當您移動成品時，系統會為您顯示也將一併移動之其他成品的清單。</span><span class="sxs-lookup"><span data-stu-id="1e882-154">When moving an artifact, you are shown the list of other artifacts that will also be moved.</span></span>  
  
## <a name="updating-bindings"></a><span data-ttu-id="1e882-155">更新繫結</span><span class="sxs-lookup"><span data-stu-id="1e882-155">Updating Bindings</span></span>  
 <span data-ttu-id="1e882-156">**自動重新設定繫結**</span><span class="sxs-lookup"><span data-stu-id="1e882-156">**Automate the reconfiguration of bindings**</span></span>  
  
-   <span data-ttu-id="1e882-157">當您在應用程式中更新組件時，其繫結通常都會遭到覆寫，或是組件可能根本不會繫結，進而使您必須手動重新設定繫結。</span><span class="sxs-lookup"><span data-stu-id="1e882-157">When you update an assembly in an application, its bindings are often overwritten or else the assembly may not be bound at all, forcing you to manually reconfigure bindings.</span></span> <span data-ttu-id="1e882-158">您可以使用繫結檔案來自動化此程序。</span><span class="sxs-lookup"><span data-stu-id="1e882-158">You can automate this process by using a binding file.</span></span> <span data-ttu-id="1e882-159">如果您要更新的組件相同的版本，您先將繫結檔案匯出的組件，然後更新組件，組件匯入應用程式，然後匯入繫結檔案重新套用先前的繫結。</span><span class="sxs-lookup"><span data-stu-id="1e882-159">If you are updating the same version of an assembly, you can first export a binding file for the assembly, then update the assembly, then import the assembly into the application, and then reapply the previous bindings by importing the binding file.</span></span> <span data-ttu-id="1e882-160">如果您要更新組件的較新版本，您可以將繫結檔案匯出、 編輯檔案，以反映新的組件版本、 新的組件匯入應用程式，並匯入繫結檔案，以套用新的繫結。</span><span class="sxs-lookup"><span data-stu-id="1e882-160">If you are updating an assembly with a newer version, you can export a binding file, edit the file to reflect the new assembly version, import the new assembly into the application, and then apply the new bindings by importing the binding file.</span></span> <span data-ttu-id="1e882-161">如需繫結檔案的詳細資訊，請參閱[如何繫結檔案匯出的繫結](../technical-guides/how-to-export-bindings-to-a-binding-file.md)。</span><span class="sxs-lookup"><span data-stu-id="1e882-161">For more information about binding files, see [How to Export Bindings to a Binding File](../technical-guides/how-to-export-bindings-to-a-binding-file.md).</span></span> <span data-ttu-id="1e882-162">如需有關編輯繫結檔案的詳細資訊，請參閱[自訂繫結檔案](http://go.microsoft.com/fwlink/?LinkID=155000)(http://go.microsoft.com/fwlink/?LinkID=155000)。</span><span class="sxs-lookup"><span data-stu-id="1e882-162">For more information about editing a binding file, see [Customizing Binding Files](http://go.microsoft.com/fwlink/?LinkID=155000) (http://go.microsoft.com/fwlink/?LinkID=155000).</span></span>  
  
## <a name="starting-or-stopping-an-application"></a><span data-ttu-id="1e882-163">啟動或停止應用程式</span><span class="sxs-lookup"><span data-stu-id="1e882-163">Starting or Stopping an Application</span></span>  
 <span data-ttu-id="1e882-164">**停止應用程式更新成品**</span><span class="sxs-lookup"><span data-stu-id="1e882-164">**Stop an application to update artifacts**</span></span>  
  
-   <span data-ttu-id="1e882-165">如果您沒有停止應用程式來更新應用程式中的成品，您需要暫時停用端點，halt 至 MessageBox 資料庫的發行集和停止和取消登錄任何正在執行個體。</span><span class="sxs-lookup"><span data-stu-id="1e882-165">If you do not stop an application to update artifacts in the application, you need to temporarily halt publication to the MessageBox database by disabling endpoints, and stop and unenlist any running instances.</span></span> <span data-ttu-id="1e882-166">若要停止並取消登錄正在執行的執行個體，所有已凍結或已暫停的執行個體必須以手動方式繼續和完成，或終止。</span><span class="sxs-lookup"><span data-stu-id="1e882-166">To stop and unenlist running instances, all dehydrated or suspended instances must be either manually resumed and completed, or terminated.</span></span>  
  
-   <span data-ttu-id="1e882-167">雖然不必為了更新成品或安裝應用程式而停止應用程式，我們還是建議您一律在更新成品時停止應用程式。</span><span class="sxs-lookup"><span data-stu-id="1e882-167">Although it is not required to stop an application in order to update an artifact or install the application, we recommend that you always stop an application when you update an artifact.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1e882-168">請參閱</span><span class="sxs-lookup"><span data-stu-id="1e882-168">See Also</span></span>  
 [<span data-ttu-id="1e882-169">如何將繫結匯出至繫結檔案</span><span class="sxs-lookup"><span data-stu-id="1e882-169">How to Export Bindings to a Binding File</span></span>](../technical-guides/how-to-export-bindings-to-a-binding-file.md)