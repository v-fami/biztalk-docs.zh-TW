---
title: 調查瓶頸 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2ab8e485-ffe5-4f71-9ce2-f72c0c939e5d
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e34d01bbfafd1a05f87fff5cda2b21764d43f42b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22298838"
---
# <a name="investigating-bottlenecks"></a><span data-ttu-id="d0e77-102">調查瓶頸</span><span class="sxs-lookup"><span data-stu-id="d0e77-102">Investigating Bottlenecks</span></span>
<span data-ttu-id="d0e77-103">本主題說明建議的程序來調查瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d0e77-103">This topic describes a recommended process for investigating bottlenecks.</span></span>  
  
## <a name="what-is-the-source-of-the-problem"></a><span data-ttu-id="d0e77-104">什麼是問題的來源？</span><span class="sxs-lookup"><span data-stu-id="d0e77-104">What is the source of the problem?</span></span>  
 <span data-ttu-id="d0e77-105">瓶頸的來源可能是硬體或軟體相關。</span><span class="sxs-lookup"><span data-stu-id="d0e77-105">The source of the bottleneck could be hardware or software related.</span></span> <span data-ttu-id="d0e77-106">當資源都未充分使用時，通常是造成瓶頸的指示。</span><span class="sxs-lookup"><span data-stu-id="d0e77-106">When resources are underused, it is usually an indication of a bottleneck.</span></span> <span data-ttu-id="d0e77-107">透過硬體限制、 效率不佳的軟體設定，或是兩者，可能被造成瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d0e77-107">Bottlenecks can be caused by hardware limitations, by inefficient software configurations, or by both.</span></span>  
  
 <span data-ttu-id="d0e77-108">識別瓶頸是一項遞增程序，解決一個瓶頸，可能導致下一個瓶頸被發現。</span><span class="sxs-lookup"><span data-stu-id="d0e77-108">Identifying bottlenecks is an incremental process whereby alleviating one bottleneck can lead to the discovery of the next one.</span></span> <span data-ttu-id="d0e77-109">識別和解決瓶頸的技術是本主題的目標。</span><span class="sxs-lookup"><span data-stu-id="d0e77-109">The science of identifying and alleviating these bottlenecks is the objective of this topic.</span></span> <span data-ttu-id="d0e77-110">系統在短時間內處於尖峰執行狀態，這種情形有可能發生。</span><span class="sxs-lookup"><span data-stu-id="d0e77-110">It is possible for a system to perform at peaks for short periods of time.</span></span> <span data-ttu-id="d0e77-111">不過，對持續性輸送量來說，系統最快只能用其最慢執行元件的速度處理。</span><span class="sxs-lookup"><span data-stu-id="d0e77-111">However, for sustainable throughput a system can only process as fast as its slowest performing component.</span></span>  
  
## <a name="using-an-iterative-approach-to-testing"></a><span data-ttu-id="d0e77-112">使用測試反覆處理方法</span><span class="sxs-lookup"><span data-stu-id="d0e77-112">Using an iterative approach to testing</span></span>  
 <span data-ttu-id="d0e77-113">在端點 （進入/離開） 或中介 （協調流程/資料庫） 中的系統上可能是瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d0e77-113">Bottlenecks can occur at the endpoints (entry/exit) of the system or in the middle (orchestration/database).</span></span> <span data-ttu-id="d0e77-114">瓶頸之後，使用結構化的方式來識別的來源。</span><span class="sxs-lookup"><span data-stu-id="d0e77-114">After the bottleneck has been isolated, use a structured approach to identify the source.</span></span> <span data-ttu-id="d0e77-115">會降低瓶頸之後，請務必再次測量效能，請確認新瓶頸未傳入其他地方系統中。</span><span class="sxs-lookup"><span data-stu-id="d0e77-115">After the bottleneck is eased, it is important to measure performance again to ensure that a new bottleneck has not been introduced elsewhere in the system.</span></span>  
  
 <span data-ttu-id="d0e77-116">識別和解決瓶頸的程序應該是以反覆的方式。</span><span class="sxs-lookup"><span data-stu-id="d0e77-116">The process of identifying and fixing bottlenecks should be done in an iterative manner.</span></span> <span data-ttu-id="d0e77-117">改變一次只有一個參數，重複在每個測試回合，期間完全相同的步驟，然後測量效能，以確認單一修改的影響。</span><span class="sxs-lookup"><span data-stu-id="d0e77-117">Vary only one parameter at a time, repeat exactly the same steps during each test run, and then measure performance to verify the impact of the single modification.</span></span> <span data-ttu-id="d0e77-118">同時變動多個參數可能會掩蓋此變更的作用。</span><span class="sxs-lookup"><span data-stu-id="d0e77-118">Varying more than one parameter at a time could conceal the effect of the change.</span></span>  
  
 <span data-ttu-id="d0e77-119">例如，變更參數 1，可以改善效能。</span><span class="sxs-lookup"><span data-stu-id="d0e77-119">For example, changing parameter 1 could improve performance.</span></span> <span data-ttu-id="d0e77-120">不過，變更參數 1 和變更參數 2 一起使用，可以造成不利的影響，否定變更參數 1 的優點。</span><span class="sxs-lookup"><span data-stu-id="d0e77-120">However, changing parameter 2 in conjunction with changing parameter 1 could have a detrimental effect and negate the benefits of changing parameter 1.</span></span> <span data-ttu-id="d0e77-121">這會導致淨效果為零，並會導致變更參數 1 的影響 (false negative) 和誤判的不同參數 2 的效果。</span><span class="sxs-lookup"><span data-stu-id="d0e77-121">This leads to a net zero effect and results in a false negative on the effect of varying parameter 1 and a false positive on the effect of varying parameter 2.</span></span>  
  
## <a name="testing-consistency"></a><span data-ttu-id="d0e77-122">測試一致性</span><span class="sxs-lookup"><span data-stu-id="d0e77-122">Testing consistency</span></span>  
 <span data-ttu-id="d0e77-123">測量效能特性，變更設定之後應該要驗證變更的效果。</span><span class="sxs-lookup"><span data-stu-id="d0e77-123">Measuring performance characteristics after changing settings should be done to validate the effect of the change.</span></span>  
  
-   <span data-ttu-id="d0e77-124">**硬體-** 使用一致的硬體，因為變更硬體會造成不一致的行為，並且會產生誤導的結果。</span><span class="sxs-lookup"><span data-stu-id="d0e77-124">**Hardware -** Use consistent hardware because varying the hardware can cause inconsistent behavior and produce misleading results.</span></span> <span data-ttu-id="d0e77-125">例如，您會使用膝上型電腦測試 BizTalk 解決方案的效能。</span><span class="sxs-lookup"><span data-stu-id="d0e77-125">For example, you would not use a laptop to test performance of a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="d0e77-126">**測試回合持續時間-** 測量固定的最小週期，以確保結果會持續的效能。</span><span class="sxs-lookup"><span data-stu-id="d0e77-126">**Test Run Duration -** Measure performance for a fixed minimum period to ensure that the results are sustainable.</span></span> <span data-ttu-id="d0e77-127">執行較長時間測試也可確保系統經歷初始暖機/逐漸增加的所有快取會填入、 資料庫資料表已達到預期的計數，而節流有足夠的時間，可管制輸送量，一次指定預先定義的期間臨界值會叫用。</span><span class="sxs-lookup"><span data-stu-id="d0e77-127">Running tests for longer periods also ensures the system has gone through the initial warm/ramp up period where all caches are populated, database tables have reached expected counts, and throttling is given sufficient time to regulate throughput once predefined thresholds are hit.</span></span> <span data-ttu-id="d0e77-128">這種方法有助於探索最佳、持續性輸送量。</span><span class="sxs-lookup"><span data-stu-id="d0e77-128">This approach will help discover optimal sustainable throughput.</span></span>  
  
-   <span data-ttu-id="d0e77-129">**測試參數 –** 不會改變從測試執行的測試參數。</span><span class="sxs-lookup"><span data-stu-id="d0e77-129">**Test Parameters –** Do not vary test parameters from test run to test run.</span></span> <span data-ttu-id="d0e77-130">例如，變更對應的複雜性和 (或) 文件大小，可能會產生不同的輸送量和延遲結果。</span><span class="sxs-lookup"><span data-stu-id="d0e77-130">For example, varying map complexity and/or document sizes can produce different throughput and latency results.</span></span>  
  
-   <span data-ttu-id="d0e77-131">**清除狀態-** 完成測試之後，請確定測試環境的狀態是初始狀態，再執行下一個測試。</span><span class="sxs-lookup"><span data-stu-id="d0e77-131">**Clean State -** After a test is complete, ensure that the state of the test environment is clean before running the next test.</span></span> <span data-ttu-id="d0e77-132">例如，歷程記錄資料可以建置執行階段輸送量會影響資料庫中。</span><span class="sxs-lookup"><span data-stu-id="d0e77-132">For example, historical data can build up in the database affecting run-time throughput.</span></span> <span data-ttu-id="d0e77-133">回收服務執行個體有助於釋快取的資源，例如記憶體、 資料庫連接和執行緒。</span><span class="sxs-lookup"><span data-stu-id="d0e77-133">Recycling the service instances helps to release cached resources like memory, database connections, and threads.</span></span> <span data-ttu-id="d0e77-134">在測試環境中，您可能想要建立和執行 bts_CleanupMsgbox 預存程序中所述[如何從測試環境中的 MessageBox 資料庫手動清除資料](http://go.microsoft.com/fwlink/?LinkId=158064)(http://go.microsoft.com/fwlink/?LinkId=158064)。</span><span class="sxs-lookup"><span data-stu-id="d0e77-134">In your test environment, you may want to create and execute the bts_CleanupMsgbox stored procedure as described in [How to Manually Purge Data from the MessageBox Database in a Test Environment](http://go.microsoft.com/fwlink/?LinkId=158064) (http://go.microsoft.com/fwlink/?LinkId=158064).</span></span> <span data-ttu-id="d0e77-135">此指令碼是回到您 BizTalk Server 的測試環境與訊息方塊的全新狀態之間執行。</span><span class="sxs-lookup"><span data-stu-id="d0e77-135">This script is intended to return your BizTalk Server test environment to a fresh state with regards to the Message Box between runs.</span></span> <span data-ttu-id="d0e77-136">指令碼刪除所有的執行個體，包括狀態、 訊息和訂用帳戶，這些執行個體的所有資訊，但會保留所有啟用訂用帳戶，因此您不需要重新登錄您的協調流程或傳送埠。</span><span class="sxs-lookup"><span data-stu-id="d0e77-136">The script deletes all running instances and all information about those instances including state, messages, and subscriptions, but leaves all activation subscriptions so you do not have to re-enlist your orchestrations or send ports.</span></span> <span data-ttu-id="d0e77-137">請注意，此工具不支援在生產系統上。</span><span class="sxs-lookup"><span data-stu-id="d0e77-137">Note that this tool is not supported on production systems.</span></span>  
  
-   <span data-ttu-id="d0e77-138">**效能測試和調整-** 這個測試類別的目標是將您的應用程式的效能和輸送量最大化，並尋找最大持續輸送量 (MST) 的系統。</span><span class="sxs-lookup"><span data-stu-id="d0e77-138">**Performance Testing and Tuning -** The goal of this test category is to maximize performance and throughput of your application and find the Maximum Sustainable Throughput (MST) of your system.</span></span>  <span data-ttu-id="d0e77-139">如需規劃和測量最大持續性效能的詳細資訊請參閱[規劃維持效能](http://go.microsoft.com/fwlink/?LinkId=158065)(http://go.microsoft.com/fwlink/?LinkId=158065) 和[何謂持續性效能？](http://go.microsoft.com/fwlink/?LinkId=132304)</span><span class="sxs-lookup"><span data-stu-id="d0e77-139">For more information about planning and measuring Maximum Sustainable Performance see [Planning for Sustained Performance](http://go.microsoft.com/fwlink/?LinkId=158065) (http://go.microsoft.com/fwlink/?LinkId=158065) and [What Is Sustainable Performance?](http://go.microsoft.com/fwlink/?LinkId=132304)</span></span> <span data-ttu-id="d0e77-140">(http://go.microsoft.com/fwlink/?LinkId=132304)。</span><span class="sxs-lookup"><span data-stu-id="d0e77-140">(http://go.microsoft.com/fwlink/?LinkId=132304).</span></span>  
  
     <span data-ttu-id="d0e77-141">MST 是在生產環境中的系統可無限處理的訊息流量的最高負載。</span><span class="sxs-lookup"><span data-stu-id="d0e77-141">The MST is the highest load of message traffic that a system can handle indefinitely in a production environment.</span></span> <span data-ttu-id="d0e77-142">所有的 BizTalk 應用程式應該實際執行前先測試效能和輸送量。</span><span class="sxs-lookup"><span data-stu-id="d0e77-142">All BizTalk applications should be tested for performance and throughput before going into production.</span></span> <span data-ttu-id="d0e77-143">最少，您應該執行一組代表性代表最常見的使用方式案例的測試案例。</span><span class="sxs-lookup"><span data-stu-id="d0e77-143">At a minimum, you should run a representative set of test cases that represent the most common usage scenarios.</span></span> <span data-ttu-id="d0e77-144">我們建議您對預期負載進行測試，並在個別的環境符合實際執行環境的特性的尖峰負載。</span><span class="sxs-lookup"><span data-stu-id="d0e77-144">We recommend that you test against expected loads and peak loads in a separate environment that matches characteristics of the production environment.</span></span> <span data-ttu-id="d0e77-145">此環境中應該有所有的公司標準服務安裝和執行，例如監視的代理程式和防毒軟體。</span><span class="sxs-lookup"><span data-stu-id="d0e77-145">This environment should have all of the corporate standard services installed and running, such as monitoring agents, and antivirus software.</span></span>  
  
-   <span data-ttu-id="d0e77-146">我們也建議您在一起執行的其他 BizTalk 應用程式的生產環境中測試新的 BizTalk 應用程式的相同硬體上。</span><span class="sxs-lookup"><span data-stu-id="d0e77-146">We also recommend that you test new BizTalk applications on the same hardware in production alongside the other BizTalk applications that are running.</span></span> <span data-ttu-id="d0e77-147">這些其他的 BizTalk 應用程式會放入 BizTalk Server、 SQL Server、 I/O、 網路和磁碟 I/O 的額外負載。</span><span class="sxs-lookup"><span data-stu-id="d0e77-147">These other BizTalk applications put additional load on the BizTalk Server, SQL Server, network I/O, and disk I/O.</span></span> <span data-ttu-id="d0e77-148">此外，一個 BizTalk 應用程式，可能會導致另一個則是節流 （多工緩衝處理深度變得很大，例如） 時。</span><span class="sxs-lookup"><span data-stu-id="d0e77-148">In addition, one BizTalk application could cause another to throttle (when the spool depth gets too large, for example).</span></span> <span data-ttu-id="d0e77-149">所有的 BizTalk 應用程式應該是效能 / 壓力測試，才能移到實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="d0e77-149">All BizTalk applications should be performance / stress tested before going into production.</span></span> <span data-ttu-id="d0e77-150">此外，您應該決定從尖峰負載復原系統所需的時間。</span><span class="sxs-lookup"><span data-stu-id="d0e77-150">In addition, you should determine how long it takes the system to recover from peak loads.</span></span> <span data-ttu-id="d0e77-151">系統會完全復原尖峰負載下一步的尖峰負載發生之前，如果您已經有問題。</span><span class="sxs-lookup"><span data-stu-id="d0e77-151">If the system does not fully recover from a peak load before the next peak load occurs, then you've got a problem.</span></span> <span data-ttu-id="d0e77-152">系統會進一步和進一步的背後，將永遠無法完全復原。</span><span class="sxs-lookup"><span data-stu-id="d0e77-152">The system will get further and further behind and will never be able to fully recover.</span></span>  
  
## <a name="expectations-throughput-vs-latency"></a><span data-ttu-id="d0e77-153">期望： 輸送量和延遲</span><span class="sxs-lookup"><span data-stu-id="d0e77-153">Expectations: throughput vs. latency</span></span>  
 <span data-ttu-id="d0e77-154">您可以預期特定數量的輸送量和/或從已部署系統的延遲。</span><span class="sxs-lookup"><span data-stu-id="d0e77-154">You can expect a certain amount of throughput and/or latency from the deployed system.</span></span> <span data-ttu-id="d0e77-155">嘗試同時達到高輸送量和低度延遲置於系統逼近對方的要求。</span><span class="sxs-lookup"><span data-stu-id="d0e77-155">Attempting to achieve high throughput and low latency simultaneously places opposing demands on the system.</span></span> <span data-ttu-id="d0e77-156">您可以預期最佳輸送量和合理延遲。</span><span class="sxs-lookup"><span data-stu-id="d0e77-156">You can expect optimal throughput with reasonable latency.</span></span> <span data-ttu-id="d0e77-157">當輸送量提高，壓力 （例如，較高的 CPU 耗用率較高的磁碟 i/o 競爭，記憶體不足的壓力和高鎖定爭） 在此系統會增加。</span><span class="sxs-lookup"><span data-stu-id="d0e77-157">As throughput improves, stress (such as, higher CPU consumption, higher disk-I/O contention, memory pressure, and greater lock contention) on the system increases.</span></span> <span data-ttu-id="d0e77-158">這種情況下可以對延遲造成負面影響。</span><span class="sxs-lookup"><span data-stu-id="d0e77-158">This situation can have a negative impact on latency.</span></span> <span data-ttu-id="d0e77-159">若要探索系統的最佳容量，我們建議您找出並找出任何瓶頸降到最低。</span><span class="sxs-lookup"><span data-stu-id="d0e77-159">To discover optimal capacity of a system, we recommend that you identify and minimize any bottlenecks.</span></span>  
  
 <span data-ttu-id="d0e77-160">資料庫中已完成的執行個體可能會造成瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d0e77-160">Completed instances residing in the database can cause bottlenecks.</span></span> <span data-ttu-id="d0e77-161">發生瓶頸時，可能會降低效能。</span><span class="sxs-lookup"><span data-stu-id="d0e77-161">When bottlenecks occur, performance can degrade.</span></span> <span data-ttu-id="d0e77-162">讓系統有足夠的時間來清空，可協助修正問題。</span><span class="sxs-lookup"><span data-stu-id="d0e77-162">Giving the system sufficient time to drain can help fix the problem.</span></span> <span data-ttu-id="d0e77-163">探索積存增加的原因，並協助修正問題很重要。</span><span class="sxs-lookup"><span data-stu-id="d0e77-163">Discovering the cause of the backlog buildup and helping fix the issue is important.</span></span>  
  
 <span data-ttu-id="d0e77-164">若要探索積存的原因，您可以分析歷程記錄資料和監視效能計數器 （以探索使用模式並診斷積存的來源）。</span><span class="sxs-lookup"><span data-stu-id="d0e77-164">To discover the cause of the backlog, you can analyze historical data and monitor performance counters (to discover usage patterns, and diagnose the source of the backlog).</span></span> <span data-ttu-id="d0e77-165">常見的是，晚批次方式處理大量資料時，可以發生待處理項目。</span><span class="sxs-lookup"><span data-stu-id="d0e77-165">Commonly, backlogs can occur when large volumes of data are processed in a batched manner on a nightly basis.</span></span> <span data-ttu-id="d0e77-166">您可能會發現以探索系統，它能夠從積存復原的容量。</span><span class="sxs-lookup"><span data-stu-id="d0e77-166">You may find it useful to discover the capacity of the system and its ability to recover from a backlog.</span></span> <span data-ttu-id="d0e77-167">此資訊可協助您估計來處理過度負載的狀況和的緩衝區數量以配合處理輸送量中的非預期的尖峰系統內的硬體需求。</span><span class="sxs-lookup"><span data-stu-id="d0e77-167">This information can help you to estimate hardware requirements for handling overdrive scenarios and the amount of buffer room to accommodate within a system to handle unforeseen spikes in throughput.</span></span>  
  
 <span data-ttu-id="d0e77-168">監視效能計數器，可協助表示在執行階段就會發生的潛在瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d0e77-168">Monitoring performance counters can help individuate potential bottlenecks that could arise at runtime.</span></span> <span data-ttu-id="d0e77-169">不過，當我們懷疑 CPU 或記憶體瓶頸問題可能是其中一個自訂此解決方案的組成元件，我們強烈建議您程式碼剖析工具這類的 Visual Studio 分析工具或螞蟻效能分析工具在使用效能測試若要縮小範圍，以及表示確實會產生問題的類別。</span><span class="sxs-lookup"><span data-stu-id="d0e77-169">However, when we suspect that the culprit of CPU or memory bottleneck may be one of the custom components that compose the solution, we strongly recommend that you use profiling tools such Visual Studio Profiler or ANTS Performance Profiler during a performance test to narrow and individuate with certainty the class that generates the problem.</span></span> <span data-ttu-id="d0e77-170">很明顯地，應用程式程式碼剖析會妨礙效能。</span><span class="sxs-lookup"><span data-stu-id="d0e77-170">Obviously, profiling an application interferes with performance.</span></span> <span data-ttu-id="d0e77-171">因此，這些測試應該專注於 individuating 會導致記憶體耗用量、 CPU 使用率或延遲的元件，而且應該捨棄在這些測試期間收集的圖表。</span><span class="sxs-lookup"><span data-stu-id="d0e77-171">Therefore, these tests should be focused on individuating those components that cause memory consumption, CPU utilization or latency and figures collected during these tests should be discarded.</span></span>  
  
 <span data-ttu-id="d0e77-172">微調系統以最佳的持續性輸送量，便需要深入了解部署的應用程式、 的優點和缺點系統和使用模式的特定案例。</span><span class="sxs-lookup"><span data-stu-id="d0e77-172">Tuning the system for optimal sustainable throughput requires an in depth understanding of the deployed application, the strengths and weaknesses of the system, and usage patterns of the specific scenario.</span></span> <span data-ttu-id="d0e77-173">探索瓶頸並可靠預測最佳、具持續性輸送量的唯一方法，是透過在最符合實際執行的拓撲上進行完整測試。</span><span class="sxs-lookup"><span data-stu-id="d0e77-173">The only way to discover bottlenecks and predict optimal sustainable throughput with certainty is through thorough testing on a topology that closely matches what will be used in production.</span></span> <span data-ttu-id="d0e77-174">當針對特定使用案例中，執行負載和壓力測試，是縮小很重要的隔離到個別的主控件執行個體 （接收位置、 傳送埠、 協調流程） 的單一成品，並設定在 [效能監視器] 工具的右計數器造成瓶頸的原因。</span><span class="sxs-lookup"><span data-stu-id="d0e77-174">When running load and stress tests against a certain use case, isolating single artifacts (receive locations, send ports, orchestrations) into separate host instances and setting the right counters inside the performance monitor tool is crucial to narrow down the cause of a bottleneck.</span></span>  
  
 <span data-ttu-id="d0e77-175">本節中的其他主題會引導您完成定義該拓撲的程序，並提供有關如何降低，並避免瓶頸的指導方針。</span><span class="sxs-lookup"><span data-stu-id="d0e77-175">Other topics in this section guide you through the process of defining that topology, and provide guidance on how to lessen and avoid bottlenecks.</span></span>  
  
## <a name="scaling"></a><span data-ttu-id="d0e77-176">擴充</span><span class="sxs-lookup"><span data-stu-id="d0e77-176">Scaling</span></span>  
 <span data-ttu-id="d0e77-177">瓶頸可能會發生在已部署的拓撲的各個階段。</span><span class="sxs-lookup"><span data-stu-id="d0e77-177">Bottlenecks can occur at various stages of a deployed topology.</span></span> <span data-ttu-id="d0e77-178">有些瓶頸可藉由向上擴充或向外延展環境。</span><span class="sxs-lookup"><span data-stu-id="d0e77-178">Some bottlenecks can be addressed by either scaling up or scaling out the environment.</span></span> <span data-ttu-id="d0e77-179">向上擴充是升級現有的電腦的程序。</span><span class="sxs-lookup"><span data-stu-id="d0e77-179">Scaling up is the process of upgrading the existing computer.</span></span> <span data-ttu-id="d0e77-180">例如，您可以從四個處理器的電腦升級 BizTalk Server 電腦八個處理器的電腦，以及以取代現有的 Cpu 及新增更多的 RAM。</span><span class="sxs-lookup"><span data-stu-id="d0e77-180">For example, you can upgrade a BizTalk Server computer from a four-processor computer to an eight-processor computer, as well as substituting the existing CPUs and adding more RAM.</span></span> <span data-ttu-id="d0e77-181">如此一來，您可以加速需要大量資源的工作，例如文件剖析和對應。</span><span class="sxs-lookup"><span data-stu-id="d0e77-181">In this way, you can accelerate resource-intensive tasks such as document parsing and mapping.</span></span> <span data-ttu-id="d0e77-182">向外延展是將伺服器新增至您的部署程序。</span><span class="sxs-lookup"><span data-stu-id="d0e77-182">Scaling out is the process of adding servers to your deployment.</span></span> <span data-ttu-id="d0e77-183">延展增加或放大決策取決於瓶頸和所設定的應用程式的類型。</span><span class="sxs-lookup"><span data-stu-id="d0e77-183">The decision to scale up or out depends on the type of bottleneck and the application being configured.</span></span> <span data-ttu-id="d0e77-184">應用程式需要從頭設定建立成能夠利用相應增加或放大。下列指示說明如何變更硬體部署拓撲根據遇到的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="d0e77-184">An application needs to be built from the ground up to be capable of taking advantage of scaling up or out. The following guidance explains how to change hardware deployment topologies based on bottlenecks encountered.</span></span>  
  
 <span data-ttu-id="d0e77-185">**向上擴充**上執行的 BizTalk 方案的方式升級硬體 （如範例中，新增 CPU 和記憶體）。</span><span class="sxs-lookup"><span data-stu-id="d0e77-185">**Scaling up** means running a BizTalk solution on upgraded hardware (for example, adding CPU’s and memory).</span></span> <span data-ttu-id="d0e77-186">您應該查看 1） 向外延展是過於昂貴或 2） 向外延展將協助您解決瓶頸時，向上擴充。</span><span class="sxs-lookup"><span data-stu-id="d0e77-186">You should look at scaling up when 1) scaling out is too expensive or 2) scaling out will not help solve a bottleneck.</span></span> <span data-ttu-id="d0e77-187">例如，您可以大幅減少所花費的時間轉換和處理大型訊息，如果您更快的電腦上執行工作。</span><span class="sxs-lookup"><span data-stu-id="d0e77-187">For example, you can significantly reduce the time spent transforming and processing a large message if you run the task on a faster machine.</span></span>  
  
 <span data-ttu-id="d0e77-188">**向外延展**將 BizTalk 節點加入至 BizTalk Server 群組，並使用它們來執行解決方案的一個或多個部分組成的應用程式平台。</span><span class="sxs-lookup"><span data-stu-id="d0e77-188">**Scaling out** the application platform consists of adding BizTalk nodes to the BizTalk Server Group and using them to run one or more parts of the solution.</span></span> <span data-ttu-id="d0e77-189">您應該查看向外延展，1） 您需要隔離傳送、 接收、 處理、 追蹤主控件或 2） 當記憶體、 I/O 或網路 I/O 資源超量單一伺服器。</span><span class="sxs-lookup"><span data-stu-id="d0e77-189">You should look at scaling out when 1) you need to isolate send, receive, processing, tracking hosts or 2) when memory, I/O or Network I/O resources are maxed out for a single server.</span></span> <span data-ttu-id="d0e77-190">將負載分散到多部伺服器。不過，將新節點加入至 BizTalk Server 群組，可以增加 MessageBox 資料庫上的鎖定爭用。</span><span class="sxs-lookup"><span data-stu-id="d0e77-190">The load can be spread across multiple servers; however, adding new nodes to the BizTalk Server Group can increase the lock contention on the MessageBox database.</span></span>  
  
 <span data-ttu-id="d0e77-191">因此您應該向上延展還是向外延展？</span><span class="sxs-lookup"><span data-stu-id="d0e77-191">So should you scale up or scale out?</span></span> <span data-ttu-id="d0e77-192">向上延展您的平台可減少 BizTalk 解決方案的延遲，因為它會使單一工作 （例如，訊息對應） 的執行速度。</span><span class="sxs-lookup"><span data-stu-id="d0e77-192">Scaling up your platform can reduce the latency of a BizTalk solution because it makes single tasks (for example, message mapping) run faster.</span></span> <span data-ttu-id="d0e77-193">向外延展可以改善最大持續輸送量和 BizTalk 解決方案的延展性因為它可讓您的工作負載分散到多部電腦。</span><span class="sxs-lookup"><span data-stu-id="d0e77-193">Scaling out can improve the maximum sustainable throughtput and the scalability of your BizTalk solution because it allows you to spread the workload across multiple machines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d0e77-194">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d0e77-194">See Also</span></span>  
 [<span data-ttu-id="d0e77-195">尋找並排除瓶頸</span><span class="sxs-lookup"><span data-stu-id="d0e77-195">Finding and Eliminating Bottlenecks</span></span>](../technical-guides/finding-and-eliminating-bottlenecks.md)