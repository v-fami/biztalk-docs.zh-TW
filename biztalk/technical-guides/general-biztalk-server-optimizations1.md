---
title: 一般 BizTalk Server Optimizations1 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e8032553-bae3-440d-9197-b926160b0bdf
caps.latest.revision: 28
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2605a7acd9610b0b5417e8c5d7c875f67f22f30c
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37006711"
---
# <a name="general-biztalk-server-optimizations"></a><span data-ttu-id="c1ae9-102">一般 BizTalk Server 最佳化</span><span class="sxs-lookup"><span data-stu-id="c1ae9-102">General BizTalk Server Optimizations</span></span>
<span data-ttu-id="c1ae9-103">下列建議可用來增加 BizTalk Server 效能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-103">The following recommendations can be used to increase BizTalk Server performance.</span></span> <span data-ttu-id="c1ae9-104">安裝和設定 BizTalk Server 之後，會套用此主題中所列的最佳化。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-104">The optimizations listed in this topic are applied after BizTalk Server has been installed and configured.</span></span>  
  
## <a name="configure-msdtc"></a><span data-ttu-id="c1ae9-105">設定 MSDTC</span><span class="sxs-lookup"><span data-stu-id="c1ae9-105">Configure MSDTC</span></span>  
 <span data-ttu-id="c1ae9-106">若要加速 SQL Server 與 BizTalk Server 之間的交易，您必須啟用 Microsoft Distributed Transaction Coordinator (MS DTC)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-106">To facilitate transactions between SQL Server and BizTalk Server, you must enable Microsoft Distributed Transaction Coordinator (MS DTC).</span></span> <span data-ttu-id="c1ae9-107">若要在 BizTalk Server 上設定 MSDTC，請參閱主題[改善作業系統效能的一般指導方針](../technical-guides/general-guidelines-for-improving-operating-system-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-107">To configure MSDTC on BizTalk Server, see the topic [General Guidelines for Improving Operating System Performance](../technical-guides/general-guidelines-for-improving-operating-system-performance.md).</span></span>  
  
## <a name="recommendations-for-configuring-biztalk-server-hosts"></a><span data-ttu-id="c1ae9-108">設定 BizTalk Server 主控件的建議</span><span class="sxs-lookup"><span data-stu-id="c1ae9-108">Recommendations for configuring BizTalk Server hosts</span></span>  
 <span data-ttu-id="c1ae9-109">本節提供設定 BizTalk Server 主控件的建議。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-109">This section provides recommendations for configuring BizTalk Server hosts.</span></span>  
  
### <a name="create-multiple-biztalk-server-hosts-and-separate-host-instances-by-functionality"></a><span data-ttu-id="c1ae9-110">依功能建立多個 BizTalk Server 主控件和個別的主控件執行個體</span><span class="sxs-lookup"><span data-stu-id="c1ae9-110">Create multiple BizTalk Server hosts and separate host instances by functionality</span></span>  
 <span data-ttu-id="c1ae9-111">請遵循下列指導方針來建立多個 BizTalk Server 主控件，並跨這些主機配置的工作負載：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-111">Follow these guidelines to create multiple BizTalk Server hosts and allocate workload across those hosts:</span></span>  
  
-   <span data-ttu-id="c1ae9-112">建立個別的主控件來傳送、 接收、 處理及追蹤功能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-112">Create separate hosts for sending, receiving, processing, and tracking functionality.</span></span> <span data-ttu-id="c1ae9-113">建立多個 BizTalk 主控件提供的彈性設定 BizTalk 群組中的工作負載時，將處理分散到 BizTalk 群組中執行 BizTalk Server 之電腦的主要方法。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-113">Creating multiple BizTalk hosts provides flexibility when configuring the workload in your BizTalk group and is the primary means of distributing processing across the computers running BizTalk Server in a BizTalk group.</span></span> <span data-ttu-id="c1ae9-114">使用多部主機，可讓您停止一部主機，而不會影響其他主機。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-114">Using multiple hosts allows you to stop one host without affecting other hosts.</span></span> <span data-ttu-id="c1ae9-115">比方說，您可能要停止傳送訊息，讓他們佇列 MessageBox 資料庫中同時仍允許接收配接器不同的主控件執行個體中執行以接收輸入的訊息。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-115">For example, you may want to stop sending messages to let them queue up in the MessageBox database while still allowing a receive adapter running in a different host instance to receive inbound messages.</span></span> <span data-ttu-id="c1ae9-116">主控件執行個體分隔功能時，也會提供下列優點：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-116">Separating host instances by functionality also provides the following benefits:</span></span>  
  
    -   <span data-ttu-id="c1ae9-117">執行多個 BizTalk 主控件可減少 MessageBox 資料庫主應用程式佇列資料表上的競爭，因為每一部主機指派其本身在 MessageBox 資料庫中的工作佇列資料表。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-117">Running multiple BizTalk hosts reduces contention on the MessageBox database host queue tables because each host is assigned its own work queue tables in the MessageBox database.</span></span>  
  
    -   <span data-ttu-id="c1ae9-118">節流是在 BizTalk Server 中實作主機層級。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-118">Throttling is implemented in BizTalk Server at the host-level.</span></span> <span data-ttu-id="c1ae9-119">這可讓您設定每個主控件節流特性不同。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-119">This allows you to set different throttling characteristics for each host.</span></span>  
  
    -   <span data-ttu-id="c1ae9-120">安全性被實作在主機層級;每個主控件是離散的 Windows 身分識別下執行。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-120">Security is implemented at the host-level; each host runs under a discrete Windows identity.</span></span> <span data-ttu-id="c1ae9-121">這可讓您，比方說，為 Host_A 存取 FileShare_B，同時不允許任何其他主機存取檔案共用。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-121">This allows you to, for example, give Host_A access to FileShare_B, while not allowing any of the other hosts to access the file share.</span></span>  
  
-   <span data-ttu-id="c1ae9-122">每個主控件執行個體有自己的資源，例如記憶體、 控制代碼，以及執行緒集.NET 執行緒集區中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-122">Each host instance has its own set of resources such as memory, handles, and threads in the .NET thread pool.</span></span> <span data-ttu-id="c1ae9-123">配置到主機的工作負載時請考慮將資源一起調整，放在相同的主控件。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-123">When allocating workload across hosts consider placing resources that scale together in the same host.</span></span>  
  
-   <span data-ttu-id="c1ae9-124">個別的配接器和協調流程中不同的主控件具有不同優先順序的資源。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-124">Separate adapters and orchestrations that have different priorities for resources in different hosts.</span></span> <span data-ttu-id="c1ae9-125">這項技術可容納在專用的 BizTalk Server 電腦上執行高優先順序應用程式主機的放置。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-125">This technique accommodates the placement of hosts running high-priority applications on dedicated BizTalk Server computers.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-126">權益，以建立其他主控件執行個體時，也有缺點如果建立太多的主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-126">While there are benefits to creating additional host instances, there are also potential drawbacks if too many host instances are created.</span></span> <span data-ttu-id="c1ae9-127">每個主控件執行個體是 Windows 服務 (BTSNTSvc.exe)，這會產生額外的負載，對 MessageBox 資料庫，並使用電腦資源 （例如 CPU、 記憶體、 執行緒）。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-127">Each host instance is a Windows service (BTSNTSvc.exe), which generates additional load against the MessageBox database and consumes computer resources (such as CPU, memory, threads).</span></span>  
  
 <span data-ttu-id="c1ae9-128">如需有關修改 BizTalk Server 主機的內容，請參閱 <<c0> [ 如何修改主機內容](http://go.microsoft.com/fwlink/?LinkID=154359)(http://go.microsoft.com/fwlink/?LinkID=154359) BizTalk Server 2010 說明中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-128">For more information about modifying BizTalk Server host properties, see [How to Modify Host Properties](http://go.microsoft.com/fwlink/?LinkID=154359) (http://go.microsoft.com/fwlink/?LinkID=154359) in the BizTalk Server 2010 Help.</span></span>  
  
### <a name="configure-a-dedicated-tracking-host"></a><span data-ttu-id="c1ae9-129">設定專用的追蹤主控件</span><span class="sxs-lookup"><span data-stu-id="c1ae9-129">Configure a dedicated tracking host</span></span>  
 <span data-ttu-id="c1ae9-130">BizTalk Server 已針對輸送量最佳化的因此主要的協調流程和傳訊引擎執行不實際訊息直接移至 BizTalk 追蹤 」 或 「 BAM 資料庫，因為這會將轉向這些引擎從執行商務程序的主要工作。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-130">BizTalk Server is optimized for throughput, so the main orchestration and messaging engines do not actually move messages directly to the BizTalk Tracking or BAM databases, as this would divert these engines from their primary job of executing business processes.</span></span> <span data-ttu-id="c1ae9-131">相反地，BizTalk Server 會將訊息保留在 MessageBox 資料庫，並將其標示為需要移至 「 BizTalk 追蹤資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-131">Instead, BizTalk Server leaves the messages in the MessageBox database and marks them as requiring a move to the BizTalk Tracking database.</span></span> <span data-ttu-id="c1ae9-132">背景處理序 （追蹤主控件），然後移動訊息至 「 BizTalk 追蹤 」 及 「 BAM 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-132">A background process (the tracking host) then moves the messages to the BizTalk Tracking and BAM databases.</span></span> <span data-ttu-id="c1ae9-133">追蹤是需要大量資源的作業，因為個別的主控件應建立專門用來追蹤，所以可以盡可能降低追蹤對專用的主機，與訊息處理的影響。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-133">Because tracking is a resource-intensive operation, a separate host should be created that is dedicated to tracking, thereby minimizing the impact that tracking has on hosts dedicated to message processing.</span></span> <span data-ttu-id="c1ae9-134">為了達到最佳效能，應該有至少一個追蹤主控件執行個體，每個 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-134">For optimal performance, there should be least one tracking host instance per MessageBox database.</span></span> <span data-ttu-id="c1ae9-135">追蹤主控件執行個體的實際數目應該是 N + 1，其中 N = MessageBox 資料庫數目。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-135">The actual number of tracking host instances should be N + 1, where N = the number of MessageBox databases.</span></span> <span data-ttu-id="c1ae9-136">"+ 1"為備援，萬一其中一部電腦裝載追蹤失敗。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-136">The "+ 1" is for redundancy, in case one of the computers hosting tracking fails.</span></span>  
  
 <span data-ttu-id="c1ae9-137">使用專用的追蹤主控件也可讓您停止其他 BizTalk 主控件，而不會干擾 BizTalk Server 追蹤。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-137">Using a dedicated tracking host also allows you to stop other BizTalk hosts without interfering with BizTalk Server tracking.</span></span> <span data-ttu-id="c1ae9-138">追蹤從 MessageBox 資料庫的資料移動是狀況良好的 BizTalk Server 系統的關鍵。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-138">The movement of tracking data out of the MessageBox database is critical for a healthy BizTalk Server system.</span></span> <span data-ttu-id="c1ae9-139">如果停止 BizTalk 主控件，負責移動 BizTalk 群組中的追蹤資料，將不會執行追蹤資料解碼服務。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-139">If the BizTalk Host responsible for moving tracking data in the BizTalk group is stopped, the Tracking Data Decode service will not run.</span></span> <span data-ttu-id="c1ae9-140">影響如下所示：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-140">The impact of this is as follows:</span></span>  
  
- <span data-ttu-id="c1ae9-141">HAT 追蹤資料會從 MessageBox 資料庫移動到 BizTalk 追蹤資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-141">HAT tracking data will not be moved from the MessageBox database to the BizTalk Tracking database.</span></span>  
  
- <span data-ttu-id="c1ae9-142">BAM 追蹤資料會從 MessageBox 資料庫移動至 BAM 主要匯入資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-142">BAM tracking data will not be moved from the MessageBox database to the BAM Primary Import database.</span></span>  
  
- <span data-ttu-id="c1ae9-143">資料不會移動，因為它無法從 MessageBox 資料庫刪除。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-143">Because data is not moved, it cannot be deleted from the MessageBox database.</span></span>  
  
- <span data-ttu-id="c1ae9-144">追蹤資料解碼服務停止時，追蹤攔截器將仍會引發，並追蹤資料寫入 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-144">When the Tracking Data Decode service is stopped, tracking interceptors will still fire and write tracking data to the MessageBox database.</span></span> <span data-ttu-id="c1ae9-145">如果不移動資料，這會導致 MessageBox 資料庫變得過大，這樣會影響一段時間的效能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-145">If the data is not moved, this will cause the MessageBox database to become bloated, which will impact performance over time.</span></span> <span data-ttu-id="c1ae9-146">即使自訂屬性不會受到追蹤，或是未設定 BAM 設定檔，預設情況下一些會追蹤資料 （例如管線接收 / 傳送事件和協調流程事件）。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-146">Even if custom properties are not tracked or BAM profiles are not set up, by default some data is tracked (such as pipeline receive / send events and orchestration events).</span></span> <span data-ttu-id="c1ae9-147">如果您不要執行追蹤資料解碼服務，請關閉所有的追蹤，以便任何攔截器會將資料儲存至資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-147">If you do not want to run the Tracking Data Decode service, turn off all tracking so that no interceptors save data to the database.</span></span> <span data-ttu-id="c1ae9-148">若要停用全域追蹤，請參閱[如何關閉全域追蹤](http://go.microsoft.com/fwlink/?LinkID=154193)(http://go.microsoft.com/fwlink/?LinkID=154193) BizTalk Server 2010 說明中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-148">To disable global tracking, see [How to Turn Off Global Tracking](http://go.microsoft.com/fwlink/?LinkID=154193) (http://go.microsoft.com/fwlink/?LinkID=154193) in BizTalk Server 2010 Help.</span></span> <span data-ttu-id="c1ae9-149">您可以使用 BizTalk Server 管理主控台來選擇性地停用追蹤事件。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-149">Use the BizTalk Server Administration console to selectively disable tracking events.</span></span>  
  
  <span data-ttu-id="c1ae9-150">追蹤主控件應至少兩個 （適用於在其中一個失敗的情況下的備援） 執行 BizTalk Server 的電腦上執行。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-150">The tracking host should be run on at least two computers running BizTalk Server (for redundancy in case one fails).</span></span> <span data-ttu-id="c1ae9-151">為了達到最佳效能，您應該有至少一個追蹤主控件執行個體，每個 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-151">For optimal performance, you should have at least one tracking host instance per MessageBox database.</span></span> <span data-ttu-id="c1ae9-152">追蹤主控件執行個體的實際數目應為 （N + 1），其中 N = MessageBox 資料庫數目。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-152">The actual number of tracking host instances should be (N + 1), where N = the number of MessageBox databases.</span></span> <span data-ttu-id="c1ae9-153">"+ 1"為備援，萬一其中一部電腦裝載追蹤失敗。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-153">The "+ 1" is for redundancy, in case one of the computers hosting tracking fails.</span></span>  
  
  <span data-ttu-id="c1ae9-154">追蹤主控件執行個體移動特定的 MessageBox 資料庫的追蹤資料，但是會永遠不會有一個以上的追蹤主控件執行個體特定的 MessageBox 資料庫移動資料。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-154">A tracking host instance moves tracking data for specific MessageBox databases, but there will never be more than one tracking host instance moving data for a specific MessageBox database.</span></span> <span data-ttu-id="c1ae9-155">例如，如果您有三個 MessageBox 資料庫，以及追蹤主控件執行個體的唯一兩個，然後其中一個主控件執行個體必須為兩個 MessageBox 資料庫移動資料。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-155">For example, if you have three MessageBox databases, and only two tracking host instances, then one of the host instances needs to move data for two of the MessageBox databases.</span></span> <span data-ttu-id="c1ae9-156">新增第三個追蹤主控件執行個體分散追蹤裝載執行 BizTalk Server 的另一部電腦的工作。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-156">Adding a third tracking host instance distributes the tracking host work to another computer running BizTalk Server.</span></span> <span data-ttu-id="c1ae9-157">在此案例中，加入第四個追蹤主控件執行個體不會發佈任何詳細的追蹤主控件運作，但會提供額外的追蹤主控件執行個體的容錯功能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-157">In this scenario, adding a fourth tracking host instance would not distribute any more tracking host work, but would provide an extra tracking host instance for fault tolerance.</span></span>  
  
  <span data-ttu-id="c1ae9-158">如需有關 BAM 事件匯流排服務的詳細資訊，請參閱 BizTalk Server 2010 說明中的下列主題：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-158">For more information about the BAM Event Bus service, see the following topics in BizTalk Server 2010 Help:</span></span>  
  
- <span data-ttu-id="c1ae9-159">[管理 BAM 事件匯流排服務](http://go.microsoft.com/fwlink/?LinkID=154194)(http://go.microsoft.com/fwlink/?LinkID=154194)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-159">[Managing the BAM Event Bus Service](http://go.microsoft.com/fwlink/?LinkID=154194) (http://go.microsoft.com/fwlink/?LinkID=154194).</span></span>  
  
- <span data-ttu-id="c1ae9-160">[建立 BAM 事件匯流排服務的執行個體](http://go.microsoft.com/fwlink/?LinkID=154195)(http://go.microsoft.com/fwlink/?LinkID=154195)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-160">[Creating Instances of the BAM Event Bus Service](http://go.microsoft.com/fwlink/?LinkID=154195) (http://go.microsoft.com/fwlink/?LinkID=154195).</span></span>  
  
### <a name="do-not-cluster-biztalk-hosts-unless-absolutely-necessary"></a><span data-ttu-id="c1ae9-161">除非未叢集化 BizTalk 主控件絕對必要</span><span class="sxs-lookup"><span data-stu-id="c1ae9-161">Do not cluster BizTalk hosts unless absolutely necessary</span></span>  
 <span data-ttu-id="c1ae9-162">BizTalk Server 2010 可讓您將 BizTalk 主控件設定為叢集資源，您應該只考慮這麼做，如果您要提供高可用性，無法裝載在多部 BizTalk 電腦資源。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-162">While BizTalk Server 2010 allows you to configure a BizTalk host as a cluster resource, you should only consider doing this if you need to provide high availability to a resource that cannot be hosted across multiple BizTalk computers.</span></span> <span data-ttu-id="c1ae9-163">例如，使用 FTP 配接器的連接埠應該僅位於一個主控件執行個體，，因為 FTP 通訊協定不提供檔案鎖定。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-163">As an example, ports using the FTP adapter should only reside on one host instance, as the FTP protocol does not provide file locking.</span></span> <span data-ttu-id="c1ae9-164">不過，這會引進單一失敗點，會受益於叢集。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-164">However, this introduces a single point of failure, which would benefit from clustering.</span></span> <span data-ttu-id="c1ae9-165">包含配接器，例如檔案、 SQL、 HTTP 或處理僅主機的主機可以在內部負載平衡的電腦，並不會受益於叢集。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-165">Hosts that contain adapters, such as file, SQL, HTTP or processing only hosts, can be internally load balanced across computers, and do not benefit from clustering.</span></span>  
  
## <a name="increase-the-number-of--http-concurrent-connections-allowed-by-changing-the-value-for-the-maxconnection-parameter"></a><span data-ttu-id="c1ae9-166">增加 HTTP 變更 maxconnection 參數的值允許的並行連線的數目</span><span class="sxs-lookup"><span data-stu-id="c1ae9-166">Increase the number of  HTTP concurrent connections allowed by changing the value for the maxconnection parameter</span></span>  
 <span data-ttu-id="c1ae9-167">根據預設，HTTP 配接器 （包括以 WCF 為基礎的 HTTP 配接器） 會開啟只有兩個的並行 HTTP 連線至任何特定的目的地伺服器執行 BizTalk Server 的每一部電腦。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-167">By default, the  HTTP adapters (including WCF-based HTTP adapters) open only two concurrent HTTP connections from each computer running BizTalk Server to any specific destination server.</span></span>  
  
 <span data-ttu-id="c1ae9-168">此設定符合 HTTP 1.1 規格，IETF RFC，雖然很適合使用者的案例，但它不適合用於高輸送量。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-168">This setting conforms to the IETF RFC for the HTTP 1.1 specification, and although it is suitable for user scenarios, it is not optimized for high throughput.</span></span> <span data-ttu-id="c1ae9-169">設定有效節流，每一部伺服器的輸出 HTTP 呼叫以兩個並行傳送從每部執行 BizTalk Server 的電腦。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-169">The setting effectively throttles outbound  HTTP calls to each server to two concurrent sends from each computer running BizTalk Server.</span></span>  
  
 <span data-ttu-id="c1ae9-170">若要增加並行連線數目，您可以修改 BizTalk Server 組態檔，BTSNTSvc.exe.config （或 BTSNTSvc64.exe.config 64 位元主機），每個 BizTalk Server 中的 maxconnection 參數的值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-170">To increase the number of concurrent connections, you can modify the value for the maxconnection parameter in the BizTalk Server configuration file, BTSNTSvc.exe.config (or BTSNTSvc64.exe.config for 64-bit hosts), on each BizTalk Server.</span></span> <span data-ttu-id="c1ae9-171">您可以增加此呼叫的特定伺服器。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-171">You can increase this for the specific servers being called.</span></span> <span data-ttu-id="c1ae9-172">根據經驗法則，maxconnection 參數的值應該設定為 12 \* 的 Cpu 或裝載的 web 應用程式的電腦上的核心數目。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-172">As a rule of thumb, the value for the maxconnection parameter should be set to 12 \* the number of CPUs or cores on the computer hosting the web application.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-173">請勿增加這類較大的值，所呼叫的 Web 伺服器已無法應付 HTTP 連線的 maxconnection 參數的值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-173">Do not increase the value for the maxconnection parameter to such a large value that the Web server being called is overwhelmed with HTTP connections.</span></span> <span data-ttu-id="c1ae9-174">在之後變更 maxconnection 參數的值，來執行壓力測試將要求傳送到每個目的地 Web 伺服器，以判斷會提供良好的效能和 HTTP 的 maxconnection 值傳送，而不勝任負荷目標網站伺服器。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-174">After changing the value for the maxconnection parameter, perform stress testing by sending requests to each destination Web server to determine a value for maxconnection that will provide good performance  and HTTP sends without overwhelming the target Web servers.</span></span>  
  
 <span data-ttu-id="c1ae9-175">下列是連線上限屬性的組態範例。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-175">The following is an example of the configuration for the maximum connections property:</span></span>  
  
```  
<configuration>  
  <system.net>  
    <connectionManagement>  
      <add address="http://www.contoso.com" maxconnection="24" />  
      <add address="*" maxconnection="48" />  
    </connectionManagement>  
  </system.net>  
</configuration>  
```  
  
 <span data-ttu-id="c1ae9-176">設定 maxconnection 屬性時，可以指定 HTTP、 HTTPS、 網站 IP 位址和連接埠號碼。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-176">When setting the maxconnection property, HTTP, HTTPS, the web site IP address, and the port number can be specified.</span></span> <span data-ttu-id="c1ae9-177">其他範例包括：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-177">Other examples include:</span></span>  
  
 <span data-ttu-id="c1ae9-178">**\<新增地址 ="<https://www.contoso.com>"maxconnection ="24"/\>** </span><span class="sxs-lookup"><span data-stu-id="c1ae9-178">**\<add address="<https://www.contoso.com>" maxconnection="24" /\>** </span></span>  
<span data-ttu-id="c1ae9-179">**\<新增地址 ="<http://www.contoso.com:8080>"maxconnection ="24"/\>** </span><span class="sxs-lookup"><span data-stu-id="c1ae9-179">**\<add address="<http://www.contoso.com:8080>" maxconnection="24" /\>** </span></span>  
<span data-ttu-id="c1ae9-180">**\<新增地址 ="http://*IPAddress*"maxconnection = 「 24 」 /\>** 如需調整 IIS 和 ASP.NET Web 服務設定的詳細資訊，請參閱可能會影響 HTTP 配接器 ASP.NET 設定效能 > 一節[組態參數，會影響配接器效能](http://go.microsoft.com/fwlink/?LinkID=154200)(<http://go.microsoft.com/fwlink/?LinkID=154200>) BizTalk Server 2010 說明中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-180">**\<add address="http://*IPAddress*" maxconnection="24" /\>**  For more information about tuning IIS and ASP.NET settings for Web services, see the "ASP.NET settings that can impact HTTP  Adapter performance" section of [Configuration Parameters that Affect Adapter Performance](http://go.microsoft.com/fwlink/?LinkID=154200) (<http://go.microsoft.com/fwlink/?LinkID=154200>) in BizTalk Server 2010 Help.</span></span>  
  
## <a name="manage-aspnet-thread-usage-or-concurrently-executing-requests-for-web-applications-that-can-host--isolated-received-locations-back-end-web-services-and-wcf-services"></a><span data-ttu-id="c1ae9-181">管理 ASP.NET 執行緒用法，或同時執行可裝載的 Web 應用程式要求外掛式接收的位置、 後端 Web 服務和 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="c1ae9-181">Manage ASP.NET thread usage or concurrently executing requests for Web applications that can host  isolated received locations, back-end Web services and WCF services</span></span>  
 <span data-ttu-id="c1ae9-182">背景工作和 I/O 執行緒 （IIS 7.5 和傳統模式中的 IIS 7.0） 或同時執行的要求 （IIS 7.5 和 7.0 整合的模式） 的 ASP.NET Web 應用程式主機外掛式接收的位置、 後端 Web 服務和 WCF 服務的數字的數目應該在下列情況下修改：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-182">The number of worker and I/O threads (IIS 7.5 and IIS 7.0 in classic mode) or the number of concurrently executing requests (IIS 7.5 and 7.0 integrated mode) for an ASP.NET Web application that hosts isolated received locations, back-end Web services and WCF services should be modified under the following conditions:</span></span>  
  
-   <span data-ttu-id="c1ae9-183">CPU 使用率不是在裝載的 Web 伺服器上的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-183">CPU utilization is not a bottleneck on the hosting Web server.</span></span>  
  
-   <span data-ttu-id="c1ae9-184">值：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-184">The value of:</span></span>  
  
    -   <span data-ttu-id="c1ae9-185">**ASP.NET 應用程式 v4.0.30319 \Request Wait Time**或是**ASP.NET 應用程式執行時間的 v4.0.30319 \Request**效能計數器是超乎尋常地高。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-185">**ASP.NET Apps v4.0.30319 \Request Wait Time** or **ASP.NET Apps v4.0.30319 \Request Execution Time** performance counters is unusually high.</span></span>  
  
    -   <span data-ttu-id="c1ae9-186">**ASP.NET 應用程式 v2.0.50727\Request Wait Time**或是**ASP.NET 應用程式 v2.0.50727\Request 執行時間**效能計數器是超乎尋常地高。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-186">**ASP.NET Apps v2.0.50727\Request Wait Time** or **ASP.NET Apps v2.0.50727\Request Execution Time** performance counters is unusually high.</span></span>  
  
-   <span data-ttu-id="c1ae9-187">裝載的 Web 應用程式之電腦的應用程式記錄檔中，會產生類似下面的錯誤。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-187">An error similar to the following is generated in the Application log of the computer that hosts the Web application.</span></span>  
  
    ```  
    Event Type: Warning  
    Event Source: W3SVC Event Category: None  
    Event ID: 1013  
    Date: 11/4/2010  
    Time: 1:03:47 PM  
    User: N/A  
    Computer: <ComputerName>  
    Description: A process serving application pool 'DefaultAppPool' exceeded time limits during shut down. The process id was '<xxxx>'  
    ```  
  
### <a name="manage-aspnet-thread-usage-for-web-applications-that-can-host-isolated-received-locations-back-end-web-services-and-wcf-services-on-iis-75-and-iis-70-running-in-classic-mode"></a><span data-ttu-id="c1ae9-188">管理 ASP.NET 執行緒用法的外掛式接收的位置、 後端 Web 服務和 IIS 7.5 和 IIS 7.0 以傳統模式執行的 WCF 服務可以裝載的 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="c1ae9-188">Manage ASP.NET thread usage for Web applications that can host isolated received locations, back-end Web services and WCF services on IIS 7.5 and IIS 7.0 running in Classic mode</span></span>  
 <span data-ttu-id="c1ae9-189">當**autoConfig**在傳統模式中執行 IIS 7.5 和 IIS 7.0 伺服器的 machine.config 檔案中的值設定為 **，則為 true**，ASP.NET 2.0 和 ASP.NET 4 管理背景工作執行緒和 I/O 執行緒的數目會配置到任何相關聯的 IIS 工作者處理序。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-189">When the **autoConfig** value in the machine.config file of an IIS 7.5 and IIS 7.0 server running in Classic mode is set to **true**, ASP.NET 2.0  and ASP.NET 4 manages the number of worker threads and I/O threads that are allocated to any associated IIS worker processes.</span></span>  
  
```  
<processModel autoConfig="true" />  
```  
  
 <span data-ttu-id="c1ae9-190">若要以手動方式修改的背景工作角色和 ASP.NET 2.0 和 ASP.Net 4 Web 應用程式的 I/O 執行緒數目，開啟相關聯的 machine.config 檔案，然後輸入新的值**maxWorkerThreads**和**maxIoThreads**參數。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-190">To manually modify the number of worker and I/O threads for an ASP.NET 2.0 and ASP.Net 4 Web application, open the associated machine.config file, and then enter new values for the **maxWorkerThreads** and **maxIoThreads** parameters.</span></span>  
  
```  
<!-- <processModel autoConfig="true" /> -->  
    <processModel maxWorkerThreads="200" maxIoThreads="200" />  
```  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-191">這些值是指導方針請確定您測試變更這些參數。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-191">These values are for guidance only; ensure you test changes to these parameters.</span></span>  
  
 <span data-ttu-id="c1ae9-192">如需有關調整的 ASP.NET 2.0 Web 應用程式的 machine.config 檔案中參數的詳細資訊，請參閱 Microsoft 知識庫文章 821268[爭用、 效能不佳和死結，當您從 ASP Web 服務要求。NET 應用程式](http://go.microsoft.com/fwlink/?LinkID=144169)(http://go.microsoft.com/fwlink/?LinkID=144169)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-192">For more information about tuning parameters in the machine.config file for an ASP.NET 2.0 Web application, see the Microsoft Knowledge Base article 821268 [Contention, poor performance, and deadlocks when you make Web service requests from ASP.NET applications](http://go.microsoft.com/fwlink/?LinkID=144169) (http://go.microsoft.com/fwlink/?LinkID=144169).</span></span>  
  
### <a name="manage-the-number-of-concurrently-executing-requests-for-aspnet-20-web-applications-that-can-host-isolated-received-locations-back-end-web-services-and-wcf-services-on-iis-75-and-iis-70-running-in-integrated-mode"></a><span data-ttu-id="c1ae9-193">管理同時執行的外掛式接收的位置、 後端 Web 服務和 IIS 7.5 和 IIS 7.0 整合模式中執行的 WCF 服務可以裝載的 ASP.NET 2.0 Web 應用程式的要求的數目</span><span class="sxs-lookup"><span data-stu-id="c1ae9-193">Manage the number of concurrently executing requests for ASP.NET 2.0 Web applications that can host isolated received locations, back-end Web services and WCF services on IIS 7.5 and IIS 7.0 running in Integrated mode</span></span>  
 <span data-ttu-id="c1ae9-194">當 IIS 7.5 和 IIS 7.0 上裝載 ASP.NET 2.0 整合模式中時，使用的執行緒的處理方式與在 IIS 7.5 和 IIS 7.0 上以傳統模式。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-194">When ASP.NET 2.0 is hosted on IIS 7.5 and IIS 7.0 in integrated mode, the use of threads is handled differently than on  IIS 7.5 and IIS 7.0 in classic mode.</span></span> <span data-ttu-id="c1ae9-195">當 IIS 7.5 和 IIS 7.0 上裝載 ASP.NET 2.0 整合模式中時，ASP.NET 2.0 會限制同時執行的數字**要求**而不是數目**執行緒**並行執行要求。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-195">When ASP.NET 2.0 is hosted on IIS 7.5 and IIS 7.0 in integrated mode, ASP.NET 2.0 restricts the number of concurrently executing **requests** rather than the number of **threads** concurrently executing requests.</span></span> <span data-ttu-id="c1ae9-196">同步的情況下這會間接限制的執行緒數目，但針對非同步案例要求和執行緒的數目可能會非常不同。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-196">For synchronous scenarios this will indirectly limit the number of threads but for asynchronous scenarios the number of requests and threads will likely be very different.</span></span> <span data-ttu-id="c1ae9-197">IIS 7.5 和 IIS 7.0 上執行 ASP.NET 2.0，在整合式模式中，當**maxWorkerThreads**並**maxIoThreads** machine.config 檔案中的參數不會用來管理執行中執行緒的數目。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-197">When running ASP.NET 2.0 on IIS 7.5 and IIS 7.0 in integrated mode, the **maxWorkerThreads** and **maxIoThreads** parameters in the machine.config file are not used to govern the number of running threads.</span></span> <span data-ttu-id="c1ae9-198">藉由修改指定的值，相反地，可以從 12 每一 CPU 的預設值已變更並行執行要求的數目**maxConcurrentRequestsPerCPU**。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-198">Instead, the number of concurrently executing requests can be changed from the default value of 12 per CPU by modifying the value specified for **maxConcurrentRequestsPerCPU**.</span></span> <span data-ttu-id="c1ae9-199">**MaxConcurrentRequestsPerCPU** reqistry 或 aspnet.config 檔案的組態區段中，可以指定值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-199">The **maxConcurrentRequestsPerCPU** value can be specified either in the reqistry or in the config section of an aspnet.config file.</span></span> <span data-ttu-id="c1ae9-200">請遵循下列步驟變更的預設值**maxConcurrentRequestsPerCPU**控管的並行執行的要求數目：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-200">Follow these steps to change the default value for **maxConcurrentRequestsPerCPU** to govern the number of concurrently executing requests:</span></span>  
  
 <span data-ttu-id="c1ae9-201">**若要在登錄中設定 maxConcurrentRequestsPerCPU 值**</span><span class="sxs-lookup"><span data-stu-id="c1ae9-201">**To set the maxConcurrentRequestsPerCPU value in the registry**</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="c1ae9-202">不當使用登錄編輯，可能會造成問題，需要重新安裝作業系統。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-202">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="c1ae9-203">您必須自行負擔使用「登錄編輯程式」的風險。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-203">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="c1ae9-204">如需如何備份、 還原和修改登錄的詳細資訊，請參閱 Microsoft 知識庫文章 256986[進階使用者的 Windows 登錄資訊](http://go.microsoft.com/fwlink/?LinkId=62729)(http://go.microsoft.com/fwlink/?LinkId=62729)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-204">For more information about how to back up, restore, and modify the registry, see Microsoft Knowledge Base article 256986 [Windows registry information for advanced users](http://go.microsoft.com/fwlink/?LinkId=62729) (http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-205">這項設定是全域的而且無法變更為個別的應用程式集區或應用程式。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-205">This setting is global and cannot be changed for individual application pools or applications.</span></span>  
  
1. <span data-ttu-id="c1ae9-206">按一下 **[開始]**、按一下 **[執行]**、輸入 **regedit.exe**，然後按一下 **[確定]** 以啟動「登錄編輯程式」。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-206">Click **Start**, click **Run**, type **regedit.exe**, and then click **OK** to start Registry Editor.</span></span>  
  
2. <span data-ttu-id="c1ae9-207">瀏覽至**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0**</span><span class="sxs-lookup"><span data-stu-id="c1ae9-207">Navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0**</span></span>  
  
3. <span data-ttu-id="c1ae9-208">依照下列步驟中建立機碼：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-208">Create the key by following these steps:</span></span>  
  
   1.  <span data-ttu-id="c1ae9-209">在上**編輯**功能表上，按一下**新增**，然後按一下 **金鑰**。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-209">On the **Edit** menu, click **New**, and then click **Key**.</span></span>  
  
   2.  <span data-ttu-id="c1ae9-210">型別**maxConcurrentRequestsPerCPU**，然後按**ENTER**。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-210">Type **maxConcurrentRequestsPerCPU**, and then press **ENTER**.</span></span>  
  
   3.  <span data-ttu-id="c1ae9-211">底下**maxConcurrentRequestsPerCPU**機碼，請建立 DWORD 項目與 maxConcurrentRequestsPerCPU 的新值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-211">Under the **maxConcurrentRequestsPerCPU** key, create a DWORD entry with the new value for maxConcurrentRequestsPerCPU.</span></span>  
  
   4.  <span data-ttu-id="c1ae9-212">關閉 [登錄編輯程式]。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-212">Close Registry Editor.</span></span>  
  
   <span data-ttu-id="c1ae9-213">**若要設定的 aspnet.config 檔案的組態區段中的應用程式集區 maxConcurrentRequestsPerCPU 值**</span><span class="sxs-lookup"><span data-stu-id="c1ae9-213">**To set the maxConcurrentRequestsPerCPU value for an application pool in the config section of an aspnet.config file**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-214">必須安裝 Microsoft.NET Framework 3.5 Service Pack 1，以容納透過組態檔設定下列值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-214">Microsoft .NET Framework 3.5 Service Pack 1 must be installed to accommodate setting the values below via configuration file.</span></span> <span data-ttu-id="c1ae9-215">您可以下載 Microsoft.NET Framework 3.5 Service Pack 1 從[Microsoft.NET Framework 3.5 Service Pack 1](http://go.microsoft.com/fwlink/?LinkID=136345) (http://go.microsoft.com/fwlink/?LinkID=136345)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-215">You can download Microsoft .NET Framework 3.5 Service Pack 1 from [Microsoft .NET Framework 3.5 Service Pack 1](http://go.microsoft.com/fwlink/?LinkID=136345) (http://go.microsoft.com/fwlink/?LinkID=136345).</span></span>  
  
 <span data-ttu-id="c1ae9-216">開啟應用程式集區的 aspnet.config 檔案，然後輸入新的值**maxConcurrentRequestsPerCPU**並**requestQueueLimit**參數。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-216">Open the aspnet.config file for the application pool, and then enter new values for the **maxConcurrentRequestsPerCPU** and **requestQueueLimit** parameters.</span></span>  
  
```  
<system.web>  
    <applicationPool maxConcurrentRequestsPerCPU="12" requestQueueLimit="5000"/>  
</system.web>  
```  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-217">這個值會覆寫指定的值**maxConcurrentRequestsPerCPU**在登錄中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-217">This value overrides the value specified for **maxConcurrentRequestsPerCPU** in the registry.</span></span> <span data-ttu-id="c1ae9-218">RequestQueueLimit 設定等同於 processModel/requestQueueLimit，不同之處在於 aspnet.config 檔中的設定會覆寫 machine.config 檔案中的設定。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-218">The requestQueueLimit setting is the same as processModel/requestQueueLimit, except that the setting in the aspnet.config file will override the setting in the machine.config file.</span></span>  
  
 <span data-ttu-id="c1ae9-219">如需有關如何在 IIS 7.0 上設定 ASP.NET 執行緒用法的詳細資訊，請參閱[Thomas Marquardt 部落格上的 IIS 7.0 上的 ASP.NET 執行緒用法](http://go.microsoft.com/fwlink/?LinkId=157518)(http://go.microsoft.com/fwlink/?LinkId=157518)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-219">For more information about configuring ASP.NET Thread Usage on IIS 7.0, see [Thomas Marquardt's Blog on ASP.NET Thread Usage on IIS 7.0](http://go.microsoft.com/fwlink/?LinkId=157518) (http://go.microsoft.com/fwlink/?LinkId=157518).</span></span>  
  
### <a name="manage-the-number-of-concurrently-executing-requests-for-aspnet-4web-applications-that-can-host-isolated-received-locations-back-end-web-services-and-wcf-services-on-iis-75-and-70-running-in-integrated-mode"></a><span data-ttu-id="c1ae9-220">管理同時執行的外掛式接收的位置、 後端 Web 服務和 IIS 7.5 和 7.0 整合模式中執行的 WCF 服務可以裝載 ASP.NET 4Web 應用程式的要求的數目</span><span class="sxs-lookup"><span data-stu-id="c1ae9-220">Manage the number of concurrently executing requests for ASP.NET 4Web applications that can host isolated received locations, back-end Web services and WCF services on IIS 7.5 and 7.0 running in Integrated mode</span></span>  
 <span data-ttu-id="c1ae9-221">使用.NET Framework 4，maxConcurrentRequestsPerCPU 的預設值為 5000，這是一個非常大的數字，因此將允許足夠的同時執行的非同步要求。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-221">With .NET Framework 4, the default setting for maxConcurrentRequestsPerCPU is 5000, which is a very large number and therefore will allow plenty of asynchronous requests to execute concurrently.</span></span> <span data-ttu-id="c1ae9-222">如需詳細資訊，請參閱 < [ \<applicationPool\>項目 （Web 設定）](http://go.microsoft.com/fwlink/?LinkID=205339) (http://go.microsoft.com/fwlink/?LinkID=205339)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-222">For more information, see [\<applicationPool\> Element (Web Settings)](http://go.microsoft.com/fwlink/?LinkID=205339) (http://go.microsoft.com/fwlink/?LinkID=205339).</span></span>  
  
 <span data-ttu-id="c1ae9-223">IIS 7.5 和 IIS 7.0 整合模式中，名為 MaxConcurrentRequestsPerCPU 內 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0 DWORD 會判斷每一 CPU 的並行要求數目。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-223">For IIS 7.5 and IIS 7.0 Integrated mode, a DWORD named MaxConcurrentRequestsPerCPU within HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0 determines the number of concurrent requests per CPU.</span></span> <span data-ttu-id="c1ae9-224">根據預設值，登錄機碼不存在，因此每一 CPU 的要求數目限制為 5000。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-224">By default, the registry key does not exist and the number of requests per CPU is limited to 5000.</span></span>  
  
 <span data-ttu-id="c1ae9-225">**若要在登錄中設定 maxConcurrentRequestsPerCPU 值**</span><span class="sxs-lookup"><span data-stu-id="c1ae9-225">**To set the maxConcurrentRequestsPerCPU value in the registry**</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="c1ae9-226">不當使用登錄編輯，可能會造成問題，需要重新安裝作業系統。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-226">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="c1ae9-227">您必須自行負擔使用「登錄編輯程式」的風險。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-227">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="c1ae9-228">如需如何備份、 還原和修改登錄的詳細資訊，請參閱 Microsoft 知識庫文章 256986[進階使用者的 Windows 登錄資訊](http://go.microsoft.com/fwlink/?LinkId=62729)(http://go.microsoft.com/fwlink/?LinkId=62729)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-228">For more information about how to back up, restore, and modify the registry, see Microsoft Knowledge Base article 256986 [Windows registry information for advanced users](http://go.microsoft.com/fwlink/?LinkId=62729) (http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-229">這項設定是全域的而且無法變更為個別的應用程式集區或應用程式。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-229">This setting is global and cannot be changed for individual application pools or applications.</span></span>  
  
1. <span data-ttu-id="c1ae9-230">按一下 **[開始]**、按一下 **[執行]**、輸入 **regedit.exe**，然後按一下 **[確定]** 以啟動「登錄編輯程式」。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-230">Click **Start**, click **Run**, type **regedit.exe**, and then click **OK** to start Registry Editor.</span></span>  
  
2. <span data-ttu-id="c1ae9-231">瀏覽至**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0**。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-231">Navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0**.</span></span>  
  
3. <span data-ttu-id="c1ae9-232">依照下列步驟中建立機碼：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-232">Create the key by following these steps:</span></span>  
  
   1.  <span data-ttu-id="c1ae9-233">在上**編輯**功能表上，按一下**新增**，然後按一下 **金鑰**。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-233">On the **Edit** menu, click **New**, and then click **Key**.</span></span>  
  
   2.  <span data-ttu-id="c1ae9-234">型別**maxConcurrentRequestsPerCPU**，然後按**ENTER**。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-234">Type **maxConcurrentRequestsPerCPU**, and then press **ENTER**.</span></span>  
  
   3.  <span data-ttu-id="c1ae9-235">底下**maxConcurrentRequestsPerCPU**機碼，請建立 DWORD 項目與 maxConcurrentRequestsPerCPU 的新值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-235">Under the **maxConcurrentRequestsPerCPU** key, create a DWORD entry with the new value for maxConcurrentRequestsPerCPU.</span></span>  
  
   4.  <span data-ttu-id="c1ae9-236">關閉 [登錄編輯程式]。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-236">Close Registry Editor.</span></span>  
  
   <span data-ttu-id="c1ae9-237">**若要設定的 aspnet.config 檔案的組態區段中的應用程式集區 maxConcurrentRequestsPerCPU 值**</span><span class="sxs-lookup"><span data-stu-id="c1ae9-237">**To set the maxConcurrentRequestsPerCPU value for an application pool in the config section of an aspnet.config file**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-238">必須安裝 Microsoft.NET Framework 4，以容納透過組態檔設定下列值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-238">Microsoft .NET Framework 4 must be installed to accommodate setting the values below via configuration file.</span></span> <span data-ttu-id="c1ae9-239">您可以下載 Microsoft.NET Framework 4 [Microsoft.NET Framework 4 （Web 安裝程式）](http://go.microsoft.com/fwlink/?LinkID=189318) (http://go.microsoft.com/fwlink/?LinkID=189318)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-239">You can download Microsoft .NET Framework 4 from [Microsoft .NET Framework 4 (Web Installer)](http://go.microsoft.com/fwlink/?LinkID=189318) (http://go.microsoft.com/fwlink/?LinkID=189318).</span></span>  
  
-   <span data-ttu-id="c1ae9-240">開啟應用程式集區的 aspnet.config 檔案，然後輸入新的值**maxConcurrentRequestsPerCPU**並**requestQueueLimit**參數。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-240">Open the aspnet.config file for the application pool, and then enter new values for the **maxConcurrentRequestsPerCPU** and **requestQueueLimit** parameters.</span></span>  
  
     <span data-ttu-id="c1ae9-241">下列範例中的值是預設值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-241">The values in the following example are the default values.</span></span>  
  
    ```  
    <system.web>  
        <applicationPool maxConcurrentRequestsPerCPU="5000" requestQueueLimit="5000"/>  
    </system.web>  
    ```  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-242">這個值會覆寫指定的值**maxConcurrentRequestsPerCPU**在登錄中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-242">This value overrides the value specified for **maxConcurrentRequestsPerCPU** in the registry.</span></span> <span data-ttu-id="c1ae9-243">**RequestQueueLimit**設定為 processModel/requestQueueLimit，相同，不同之處在於 aspnet.config 檔中的設定會覆寫 machine.config 檔案中的設定。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-243">The **requestQueueLimit** setting is the same as processModel/requestQueueLimit, except that the setting in the aspnet.config file will override the setting in the machine.config file.</span></span>  
  
## <a name="define-clr-hosting-thread-values-for-biztalk-host-instances"></a><span data-ttu-id="c1ae9-244">定義的 CLR 裝載執行緒值，BizTalk 主控件執行個體</span><span class="sxs-lookup"><span data-stu-id="c1ae9-244">Define CLR hosting thread values for BizTalk host instances</span></span>  
 <span data-ttu-id="c1ae9-245">由於 Windows 執行緒是 Windows 程序可使用的最基本可執行單位，所以為與 BizTalk 主控件執行個體關聯的 .NET 執行緒集區配置足夠的執行緒，以避免執行緒不足，是很重要的。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-245">Because a Windows thread is the most basic executable unit available to a Windows process, it is important to allocate enough threads to the .NET thread pool associated with an instance of a BizTalk host to prevent thread starvation.</span></span> <span data-ttu-id="c1ae9-246">若發生執行緒不足，沒有足夠的執行緒可用來執行要求之工作的效能受到負面影響。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-246">When thread starvation occurs, there are not enough threads available to perform the requested work that negatively impacts performance.</span></span> <span data-ttu-id="c1ae9-247">同時，您也必須小心避免配置超出需要的執行緒給與主控件關聯的 .NET 執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-247">At the same time, care should be taken to prevent allocating more threads to the.NET thread pool associated with a host than is necessary.</span></span> <span data-ttu-id="c1ae9-248">與主機相關聯的.NET 執行緒集區過多執行緒配置可能會增加內容切換。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-248">The allocation of too many threads to the .NET thread pool associated with a host may increase context switching.</span></span> <span data-ttu-id="c1ae9-249">Windows 核心切換到不同的執行緒，會產生效能成本執行一個執行緒時，就會發生內容切換。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-249">Context switching occurs when the Windows kernel switches from running one thread to a different thread, which incurs a performance cost.</span></span> <span data-ttu-id="c1ae9-250">過多的執行緒配置可能會導致內容切換過多，這會造成負面影響整體效能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-250">Excessive thread allocation can cause excessive context switching, which will negatively impact overall performance.</span></span> <span data-ttu-id="c1ae9-251">預設的 BizTalk 主控件執行個體的.NET 執行緒集區配置的執行緒數目取決於已安裝的.NET framework 版本。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-251">The default number of threads allocated to a BizTalk host instance’s .NET thread pool depends on which version of the .NET Framework is installed.</span></span> <span data-ttu-id="c1ae9-252">.NET Framework 4 和.NET Framework 3.5 SP1 大幅增加預設值，而在 BizTalk Server 電腦和 MessageBox 資料庫上的過多的鎖定爭用造成過度的執行緒配置。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-252">The .NET Framework 4 and the .NET Framework 3.5 SP1 greatly increased the defaults, which can cause excessive thread allocation on the BizTalk Server computers and excessive lock contention on the MessageBox database.</span></span>  
  
 <span data-ttu-id="c1ae9-253">使用**BizTalk 設定儀表板**，針對在.NET 中的可用 Windows 執行緒數目的執行緒與 BizTalk 主控件執行個體相關聯的集區，您可以修改預設值。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-253">Using the **BizTalk Settings Dashboard**, you can modify the default value for the number of Windows threads available in the .NET thread pool associated with an instance of a BizTalk host.</span></span> <span data-ttu-id="c1ae9-254">如需如何修改.NET CLR 設定的詳細資訊，請參閱[如何修改.NET CLR 設定](http://go.microsoft.com/fwlink/?LinkID=205344)(http://go.microsoft.com/fwlink/?LinkID=205344)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-254">For more information about how to modify .NET CLR settings, see [How to Modify .NET CLR Settings](http://go.microsoft.com/fwlink/?LinkID=205344) (http://go.microsoft.com/fwlink/?LinkID=205344).</span></span> <span data-ttu-id="c1ae9-255">.NET CLR 設定是每一核心的 CPU。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-255">.NET CLR Settings are per-core CPU.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-256">**背景工作執行緒**用來處理已排入佇列的工作項目和**I/O 執行緒**會處理已完成的非同步 I/O 要求 I/O 完成連接埠相關聯的專用的回呼執行緒。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-256">**Worker threads** are used to handle queued work items and **I/O threads** are dedicated callback threads associated with an I/O completion port to handle a completed asynchronous I/O request.</span></span>  
  
|<span data-ttu-id="c1ae9-257">執行緒設定</span><span class="sxs-lookup"><span data-stu-id="c1ae9-257">Threading settings</span></span>|<span data-ttu-id="c1ae9-258">預設值</span><span class="sxs-lookup"><span data-stu-id="c1ae9-258">Default value</span></span>|<span data-ttu-id="c1ae9-259">建議值</span><span class="sxs-lookup"><span data-stu-id="c1ae9-259">Recommended value</span></span>|  
|------------------------|-------------------|-----------------------|  
|<span data-ttu-id="c1ae9-260">最大的 IO 執行緒</span><span class="sxs-lookup"><span data-stu-id="c1ae9-260">Maximum IO Threads</span></span>|<span data-ttu-id="c1ae9-261">250</span><span class="sxs-lookup"><span data-stu-id="c1ae9-261">250</span></span>|<span data-ttu-id="c1ae9-262">250</span><span class="sxs-lookup"><span data-stu-id="c1ae9-262">250</span></span>|  
|<span data-ttu-id="c1ae9-263">最大工作者執行緒</span><span class="sxs-lookup"><span data-stu-id="c1ae9-263">Maximum Worker Threads</span></span>|<span data-ttu-id="c1ae9-264">25</span><span class="sxs-lookup"><span data-stu-id="c1ae9-264">25</span></span>|<span data-ttu-id="c1ae9-265">100**重要事項：** 增加此值超過 100 可以裝載 BizTalk Server MessageBox 資料庫的 SQL Server 電腦的效能造成不良的影響。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-265">100 **Important:**  Increasing this value beyond 100 can have an adverse effect on the performance of the SQL Server computer hosting the BizTalk Server MessageBox database.</span></span> <span data-ttu-id="c1ae9-266">發生此問題時，SQL Server 可能會發生鎖死的情況。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-266">When this problem occurs, SQL Server may encounter a deadlock condition.</span></span> <span data-ttu-id="c1ae9-267">我們建議不超過 100 的值，這個參數。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-267">We recommend not increasing this parameter beyond a value of 100.</span></span>|  
|<span data-ttu-id="c1ae9-268">最小的 IO 執行緒</span><span class="sxs-lookup"><span data-stu-id="c1ae9-268">Minimum IO Threads</span></span>|<span data-ttu-id="c1ae9-269">25</span><span class="sxs-lookup"><span data-stu-id="c1ae9-269">25</span></span>|<span data-ttu-id="c1ae9-270">25</span><span class="sxs-lookup"><span data-stu-id="c1ae9-270">25</span></span>|  
|<span data-ttu-id="c1ae9-271">最小的背景工作執行緒</span><span class="sxs-lookup"><span data-stu-id="c1ae9-271">Minimum Worker Threads</span></span>|<span data-ttu-id="c1ae9-272">5</span><span class="sxs-lookup"><span data-stu-id="c1ae9-272">5</span></span>|<span data-ttu-id="c1ae9-273">25</span><span class="sxs-lookup"><span data-stu-id="c1ae9-273">25</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-274">建議的值不是絕對的而且可能需要根據 BizTalk 應用程式來調整。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-274">The recommended values are not absolutes and may need to be adjusted depending on the BizTalk application.</span></span> <span data-ttu-id="c1ae9-275">變更一次的一個參數，然後進行進一步變更之前，測量的效能和穩定性的 BizTalk 平台上的影響。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-275">Change one parameter at a time, and then measure the impact on the performance and stability of the BizTalk platform before making additional changes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c1ae9-276">這些值會以隱含方式乘以伺服器上的處理器數目。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-276">These values are implicitly multiplied by the number of processors on the server.</span></span> <span data-ttu-id="c1ae9-277">例如，設定**MaxWorkerThreads**到 100 的值的項目會有效地 4 CPU 伺服器上設定值為 400。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-277">For example, setting the **MaxWorkerThreads** entry to a value of 100 would effectively set a value of 400 on a 4 CPU server.</span></span>  
  
## <a name="disable-biztalk-server-group-level-tracking"></a><span data-ttu-id="c1ae9-278">停用 BizTalk Server 群組層級追蹤</span><span class="sxs-lookup"><span data-stu-id="c1ae9-278">Disable BizTalk Server Group-level tracking</span></span>  
 <span data-ttu-id="c1ae9-279">追蹤時產生的資料已寫入 MessageBox 資料庫，並以非同步方式移動到 BizTalk 追蹤資料庫的 BizTalk Server 中的額外負荷的效能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-279">Tracking incurs performance overhead within BizTalk Server as data has to be written to the MessageBox database and then asynchronously moved to the BizTalk Tracking database.</span></span> <span data-ttu-id="c1ae9-280">在生產環境 BizTalk Server 環境中設定追蹤時，就會適用下列考量：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-280">The following considerations apply when configuring tracking in a production BizTalk Server environment:</span></span>  
  
- <span data-ttu-id="c1ae9-281">根據經驗法則，如果追蹤不是一項業務需求，則停用群組層級追蹤，以減少額外負荷並提高效能。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-281">As a rule of thumb, if tracking is not a business requirement, then disable group-level tracking to reduce overhead and increase performance.</span></span>  
  
   <span data-ttu-id="c1ae9-282">若要停用 BizTalk Server 群組層級追蹤，請執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-282">To disable BizTalk Server group-level tracking, perform the following steps:</span></span>  
  
  1.  <span data-ttu-id="c1ae9-283">在  **BizTalk Server 管理主控台**，展開**BizTalk Server 管理**，以滑鼠右鍵按一下**BizTalk 群組**，然後按一下 **設定**.</span><span class="sxs-lookup"><span data-stu-id="c1ae9-283">In the **BizTalk Server Administration Console**, expand **BizTalk Server Administration**, right-click **BizTalk Group**, and then click **Settings**.</span></span>  
  
  2.  <span data-ttu-id="c1ae9-284">在 BizTalk 設定儀表板 對話方塊的 在群組頁面上，清除**啟用群組層級追蹤**核取方塊。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-284">In the BizTalk Settings Dashboard dialog box, on the Group page, clear the **Enable group-level tracking** check box.</span></span>  
  
  3.  <span data-ttu-id="c1ae9-285">按一下 **確定**以套用所做的修改並結束 設定儀表板。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-285">Click **OK** to apply the modifications and exit the Settings Dashboard.</span></span>  
  
- <span data-ttu-id="c1ae9-286">只能使用訊息內文追蹤，如有必要。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-286">Only use message body tracking if necessary.</span></span> <span data-ttu-id="c1ae9-287">訊息大小和訊息輸送量，訊息內文追蹤可能會造成相當大的負擔。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-287">Depending on message throughput and message size, message body tracking can cause significant overhead.</span></span> <span data-ttu-id="c1ae9-288">追蹤的 BizTalk 活動有明顯的好處，以便進行偵錯和稽核，它也有相當大的效能和延展性的影響。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-288">While BizTalk activity tracking has obvious benefits for debugging and auditing, it also has considerable performance and scalability implications.</span></span> <span data-ttu-id="c1ae9-289">因此，您應該追蹤資料，並基於偵錯和安全性理由，是絕對必要，並避免追蹤多餘的資訊。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-289">Therefore, you should track only data that is strictly necessary for debugging and security reasons, and avoids tracking redundant information.</span></span>  
  
- <span data-ttu-id="c1ae9-290">根據預設，下列追蹤選項會啟用協調流程：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-290">By default, the following tracking options are enabled for orchestrations:</span></span>  
  
  - <span data-ttu-id="c1ae9-291">協調流程開始和結束</span><span class="sxs-lookup"><span data-stu-id="c1ae9-291">Orchestration start and end</span></span>  
  
  - <span data-ttu-id="c1ae9-292">訊息傳送與接收</span><span class="sxs-lookup"><span data-stu-id="c1ae9-292">Message send and receive</span></span>  
  
  - <span data-ttu-id="c1ae9-293">流程化開始與結束</span><span class="sxs-lookup"><span data-stu-id="c1ae9-293">Shape start and end</span></span>  
  
    <span data-ttu-id="c1ae9-294">追蹤選項 」 流程化開始與結束 「 協調流程會產生重大的額外負荷，並不應該在生產環境中，高輸送量功能需要啟用。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-294">The orchestration tracking option “Shape start and end” incurs significant overhead and should not be enabled in a production environment where high throughput is necessary.</span></span> <span data-ttu-id="c1ae9-295">協調流程追蹤選項會在上的 BizTalk 管理主控台中存取**追蹤**協調流程屬性 對話方塊的頁面。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-295">Orchestration tracking options are accessible in the BizTalk Administration console on the **Tracking** page of the Orchestration Properties dialog box.</span></span>  
  
  <span data-ttu-id="c1ae9-296">如需有關如何設定追蹤的詳細資訊，請參閱 <<c0> [ 設定追蹤使用 BizTalk Server 管理主控台](http://go.microsoft.com/fwlink/?LinkId=158021)(http://go.microsoft.com/fwlink/?LinkId=158021)。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-296">For more information about configuring tracking, see [Configuring Tracking Using the BizTalk Server Administration Console](http://go.microsoft.com/fwlink/?LinkId=158021) (http://go.microsoft.com/fwlink/?LinkId=158021).</span></span>  
  
## <a name="decrease-the-purging-period-for-the-dta-purge-and-archive-job-from-7-days-to-2-days-in-high-throughput-scenarios"></a><span data-ttu-id="c1ae9-297">DTA 清除與封存工作從 7 天 2 天在高輸送量情況下減少清除的期間</span><span class="sxs-lookup"><span data-stu-id="c1ae9-297">Decrease the purging period for the DTA Purge and Archive job from 7 days to 2 days in high throughput scenarios</span></span>  
 <span data-ttu-id="c1ae9-298">根據預設，在 BizTalk Server 中追蹤資料的清除間隔設為 7 天。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-298">By default, the purging interval for tracking data in BizTalk Server is set to 7 days.</span></span> <span data-ttu-id="c1ae9-299">在高輸送量情況下，這可能會造成在追蹤資料庫中，最終會影響 MessageBox 和依次造成負面影響訊息處理輸送量的效能資料過多組建設定中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-299">In a high throughput scenario, this can result in an excessive build up of data in the Tracking database, which will eventually impact the performance of the MessageBox and in turn negatively impact message processing throughput.</span></span>  
  
 <span data-ttu-id="c1ae9-300">在高輸送量情況下，減少硬性和軟性清除從預設的 7 天的間隔為 2 天。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-300">In high throughput scenarios, reduce the hard and soft purging interval from the default of 7 days to 2 days.</span></span> <span data-ttu-id="c1ae9-301">如需有關設定清除間隔的詳細資訊，請參閱[如何設定 DTA 清除與封存工作](http://go.microsoft.com/fwlink/?LinkID=153814)(http://go.microsoft.com/fwlink/?LinkID=153814) BizTalk Server 2010 說明中。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-301">For more information about configuring the purging interval, see [How to Configure the DTA Purge and Archive Job](http://go.microsoft.com/fwlink/?LinkID=153814) (http://go.microsoft.com/fwlink/?LinkID=153814) in the BizTalk Server 2010 Help.</span></span>  
  
## <a name="configure-the-temp-path-for-the-biztalk-service-account-to-point-to-a-separate-disk-or-lun"></a><span data-ttu-id="c1ae9-302">設定 BizTalk 服務帳戶，以指向不同的磁碟或 LUN 的 %temp%路徑</span><span class="sxs-lookup"><span data-stu-id="c1ae9-302">Configure the %temp% path for the BizTalk Service account to point to a separate disk or LUN</span></span>  
 <span data-ttu-id="c1ae9-303">因為 BizTalk 使用資料流檔案的暫存位置，對磁碟執行複雜對應作業時，這應該會完成。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-303">This should be done because BizTalk uses the temp location to stream files to disk when performing complex mapping operations.</span></span>  
  
## <a name="install-the-latest-service-packs"></a><span data-ttu-id="c1ae9-304">安裝最新的 service pack</span><span class="sxs-lookup"><span data-stu-id="c1ae9-304">Install the latest service packs</span></span>  
 <span data-ttu-id="c1ae9-305">應該安裝最新的 service pack，BizTalk Server 和.NET Framework，因為其中包含可以修正您可能會遇到效能問題的修正程式。</span><span class="sxs-lookup"><span data-stu-id="c1ae9-305">The latest service packs for both BizTalk Server and the .NET Framework should be installed, as these contain fixes that can correct performance issues you may encounter.</span></span>  
  
## <a name="performance-optimizations-in-the-biztalk-server-documentation"></a><span data-ttu-id="c1ae9-306">在 BizTalk Server 文件中的效能最佳化</span><span class="sxs-lookup"><span data-stu-id="c1ae9-306">Performance optimizations in the BizTalk Server documentation</span></span>  
 <span data-ttu-id="c1ae9-307">適用於從 BizTalk Server 文件，視下列建議：</span><span class="sxs-lookup"><span data-stu-id="c1ae9-307">Apply the following recommendations from the BizTalk Server documentation as appropriate:</span></span>  
  
-   <span data-ttu-id="c1ae9-308">[MessageBox 延遲問題進行疑難排解](http://go.microsoft.com/fwlink/?LinkId=158019)(http://go.microsoft.com/fwlink/?LinkId=158019)</span><span class="sxs-lookup"><span data-stu-id="c1ae9-308">[Troubleshooting MessageBox Latency Issues](http://go.microsoft.com/fwlink/?LinkId=158019) (http://go.microsoft.com/fwlink/?LinkId=158019)</span></span>  
  
-   <span data-ttu-id="c1ae9-309">[找出效能瓶頸](http://go.microsoft.com/fwlink/?LinkID=154238)(http://go.microsoft.com/fwlink/?LinkID=154238)</span><span class="sxs-lookup"><span data-stu-id="c1ae9-309">[Identifying Performance Bottlenecks](http://go.microsoft.com/fwlink/?LinkID=154238) (http://go.microsoft.com/fwlink/?LinkID=154238)</span></span>  
  
-   <span data-ttu-id="c1ae9-310">[避免 DBNETLIB 例外狀況](http://go.microsoft.com/fwlink/?LinkID=155308)(http://go.microsoft.com/fwlink/?LinkID=155308)</span><span class="sxs-lookup"><span data-stu-id="c1ae9-310">[Avoiding DBNETLIB Exceptions](http://go.microsoft.com/fwlink/?LinkID=155308) (http://go.microsoft.com/fwlink/?LinkID=155308)</span></span>  
  
-   <span data-ttu-id="c1ae9-311">[避免 TCP/IP 連接埠耗盡](http://go.microsoft.com/fwlink/?LinkID=153240)(http://go.microsoft.com/fwlink/?LinkID=153240)</span><span class="sxs-lookup"><span data-stu-id="c1ae9-311">[Avoiding TCP/IP Port Exhaustion](http://go.microsoft.com/fwlink/?LinkID=153240) (http://go.microsoft.com/fwlink/?LinkID=153240)</span></span>  
  
-   <span data-ttu-id="c1ae9-312">[設定 EPM 執行緒集區大小](http://go.microsoft.com/fwlink/?LinkId=158020)(http://go.microsoft.com/fwlink/?LinkId=158020)</span><span class="sxs-lookup"><span data-stu-id="c1ae9-312">[Setting the EPM Threadpool Size](http://go.microsoft.com/fwlink/?LinkId=158020) (http://go.microsoft.com/fwlink/?LinkId=158020)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c1ae9-313">另請參閱</span><span class="sxs-lookup"><span data-stu-id="c1ae9-313">See Also</span></span>  
 [<span data-ttu-id="c1ae9-314">最佳化 BizTalk Server 效能</span><span class="sxs-lookup"><span data-stu-id="c1ae9-314">Optimizing BizTalk Server Performance</span></span>](../technical-guides/optimizing-biztalk-server-performance.md)