---
title: "檢查清單： 設定 SQL Server |Microsoft 文件"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: edd20f24-8a72-40b7-abee-81fbd3ceefda
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ce0eff1dab6afe81c55f4cffa08c4839762e82ea
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="checklist-configuring-sql-server"></a><span data-ttu-id="4ca84-102">檢查清單： 設定 SQL Server</span><span class="sxs-lookup"><span data-stu-id="4ca84-102">Checklist: Configuring SQL Server</span></span>
<span data-ttu-id="4ca84-103">本主題列出當您準備，您應該遵循的步驟[!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)]或[!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)]用於[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="4ca84-103">This topic lists steps that you should follow when preparing [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] or [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)] for use in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environment.</span></span>  
  
-   [<span data-ttu-id="4ca84-104">檢查清單： 設定 SQL Server</span><span class="sxs-lookup"><span data-stu-id="4ca84-104">Checklist: Configuring SQL Server</span></span>](../technical-guides/checklist-configuring-sql-server.md)  
  
-   [<span data-ttu-id="4ca84-105">執行 SQL Server 維護程序</span><span class="sxs-lookup"><span data-stu-id="4ca84-105">Performing SQL Server Maintenance Procedures</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Maintain)  
  
-   [<span data-ttu-id="4ca84-106">備份 BizTalk Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="4ca84-106">Backing Up the BizTalk Server Databases</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Backup)  
  
-   [<span data-ttu-id="4ca84-107">使用 SQL Server 記錄傳送災害復原</span><span class="sxs-lookup"><span data-stu-id="4ca84-107">Using SQL Server Log Shipping For Disaster Recovery</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Disaster)  
  
-   [<span data-ttu-id="4ca84-108">監控 BizTalk Server SQL Agent 工作</span><span class="sxs-lookup"><span data-stu-id="4ca84-108">Monitoring BizTalk Server SQL Agent Jobs</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Jobs)  
  
-   [<span data-ttu-id="4ca84-109">清除和封存追蹤資料</span><span class="sxs-lookup"><span data-stu-id="4ca84-109">Purging and Archiving Tracking Data</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Purge)  
  
<a name="BKMK_Config"></a>   
## <a name="configuring-sql-server"></a><span data-ttu-id="4ca84-110">設定 SQL Server</span><span class="sxs-lookup"><span data-stu-id="4ca84-110">Configuring SQL Server</span></span>  
  
|<span data-ttu-id="4ca84-111">步驟</span><span class="sxs-lookup"><span data-stu-id="4ca84-111">Steps</span></span>|<span data-ttu-id="4ca84-112">參考</span><span class="sxs-lookup"><span data-stu-id="4ca84-112">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="4ca84-113">監視及降低[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫檔案磁碟 I/O 競爭。</span><span class="sxs-lookup"><span data-stu-id="4ca84-113">Monitor and reduce [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database files disk I/O contention.</span></span>|<span data-ttu-id="4ca84-114">-我們建議您主動監視存放的資料和交易記錄檔磁碟的磁碟 I/O 使用量。</span><span class="sxs-lookup"><span data-stu-id="4ca84-114">-   We recommend that you proactively monitor the disk I/O usage for the disks that house the data and transaction log files.</span></span><br /><span data-ttu-id="4ca84-115">-我們建議最好讓資料檔和交易記錄檔的每一種放在專用的磁碟機，以降低磁碟 I/O 競爭變得有問題的可能性。</span><span class="sxs-lookup"><span data-stu-id="4ca84-115">-   We recommend that the data files and transaction log files for each of these be placed on dedicated drives to reduce the likelihood of disk I/O contention becoming a problem.</span></span><br /><span data-ttu-id="4ca84-116">-您可以降低磁碟 I/O 競爭，藉由分隔 MessageBox 和追蹤 (DTA) 資料庫，而且分隔的資料庫檔案和交易記錄檔不同實體磁碟上。</span><span class="sxs-lookup"><span data-stu-id="4ca84-116">-   You can reduce disk I/O contention by separating the MessageBox and Tracking (DTA) databases, and by separating the database files and transaction log files on different physical disks.</span></span><br /><br /> <span data-ttu-id="4ca84-117">如需詳細資訊，請參閱[監視及降低資料庫 IO 爭用](~/technical-guides/monitoring-and-reducing-database-i-o-contention.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-117">For more information, see [Monitoring and Reducing Database IO Contention](~/technical-guides/monitoring-and-reducing-database-i-o-contention.md)</span></span>|  
|<span data-ttu-id="4ca84-118">請確定[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]上正確對齊的磁碟分割設定</span><span class="sxs-lookup"><span data-stu-id="4ca84-118">Ensure [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] is configured on properly-aligned disk partitions</span></span>|<span data-ttu-id="4ca84-119">正確對齊的磁碟分割可能會導致明顯降低延遲，藉此改善[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]效能，進而增強[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]效能。</span><span class="sxs-lookup"><span data-stu-id="4ca84-119">Properly aligned disk partitions could result in significant decrease in latency thereby improving the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] performance, which in turn enhances [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span> <span data-ttu-id="4ca84-120">相反地，非對齊的磁碟分割效能造成負面影響 I/O，因而降低[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]效能。</span><span class="sxs-lookup"><span data-stu-id="4ca84-120">On the contrary, nonaligned disk partitions can negatively affect I/O performance, thereby degrading the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span><br /><br /> <span data-ttu-id="4ca84-121">如需有關如何正確對齊的磁碟分割正面可能會影響效能，請參閱 < [「 磁碟分割區對齊最佳作法 for SQL Server"](http://go.microsoft.com/fwlink/?LinkId=154073) (http://go.microsoft.com/fwlink/?LinkId=154073)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-121">For more information about how properly aligned disk partitions can positively affect performance, see ["Disk Partition Alignment Best Practices for SQL Server”](http://go.microsoft.com/fwlink/?LinkId=154073) (http://go.microsoft.com/fwlink/?LinkId=154073).</span></span>|  
|<span data-ttu-id="4ca84-122">讓您使用 SQL Server Profiler 監視的事件</span><span class="sxs-lookup"><span data-stu-id="4ca84-122">Keep the events you monitor with the SQL Server Profiler</span></span>|<span data-ttu-id="4ca84-123">使用 SQL Server Profiler 來監視只有您感興趣的事件。</span><span class="sxs-lookup"><span data-stu-id="4ca84-123">Use SQL Server Profiler to monitor only the events in which you are interested.</span></span> <span data-ttu-id="4ca84-124">如果追蹤變得太大，您可以篩選，收集事件資料的子集，根據您想要的資訊。</span><span class="sxs-lookup"><span data-stu-id="4ca84-124">If traces become too large, you can filter them based on the information you want, so that only a subset of the event data is collected.</span></span> <span data-ttu-id="4ca84-125">監視太多事件會增加伺服器與監視處理序的負擔，且會使得追蹤檔案或追蹤資料表增長過大，尤其是需要花費長時間的監視處理序更是如此。</span><span class="sxs-lookup"><span data-stu-id="4ca84-125">Monitoring too many events adds overhead to the server and the monitoring process, and can cause the trace file or trace table to grow very large, especially when the monitoring process takes place over a long period of time.</span></span>|  
|<span data-ttu-id="4ca84-126">監視及降低 DTC 記錄檔磁碟 I/O 競爭。</span><span class="sxs-lookup"><span data-stu-id="4ca84-126">Monitor and reduce DTC log file disk I/O contention.</span></span>|[<span data-ttu-id="4ca84-127">監視與降低 DTC 記錄檔的磁碟 IO 競爭</span><span class="sxs-lookup"><span data-stu-id="4ca84-127">Monitoring and Reducing DTC Log File Disk IO Contention</span></span>](~/technical-guides/monitoring-and-reducing-dtc-log-file-disk-i-o-contention.md)|  
|<span data-ttu-id="4ca84-128">提供的高可用性[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫。</span><span class="sxs-lookup"><span data-stu-id="4ca84-128">Provide high availability for the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases.</span></span>|[<span data-ttu-id="4ca84-129">資料庫可用性規劃</span><span class="sxs-lookup"><span data-stu-id="4ca84-129">Planning for Database Availability</span></span>](~/technical-guides/planning-for-database-availability.md)|  
|<span data-ttu-id="4ca84-130">檢閱主動/主動容錯移轉案例的 SQL Server 叢集組態。</span><span class="sxs-lookup"><span data-stu-id="4ca84-130">Review active/active SQL Server cluster configuration for failover scenarios.</span></span>|[<span data-ttu-id="4ca84-131">檢閱及測試 SQL Server 叢集組態的容錯移轉案例</span><span class="sxs-lookup"><span data-stu-id="4ca84-131">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](~/technical-guides/reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)|  
|<span data-ttu-id="4ca84-132">使用預設組態設定：</span><span class="sxs-lookup"><span data-stu-id="4ca84-132">Use default configuration settings for:</span></span><br /><br /> <span data-ttu-id="4ca84-133">Max Degree of Parallelism (MDOP)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-133">-   Max Degree of Parallelism (MDOP).</span></span><br /><span data-ttu-id="4ca84-134">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]上的統計資料[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="4ca84-134">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] statistics on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database.</span></span><br /><span data-ttu-id="4ca84-135">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]資料庫索引會重建和重組。</span><span class="sxs-lookup"><span data-stu-id="4ca84-135">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database index rebuilds and defragmentation.</span></span>|[<span data-ttu-id="4ca84-136">不應該變更的 SQL Server 設定</span><span class="sxs-lookup"><span data-stu-id="4ca84-136">SQL Server Settings That Should Not Be Changed</span></span>](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)|  
|<span data-ttu-id="4ca84-137">啟用追蹤旗標 1118 (TF1118) 作為啟動參數的所有執行個體[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ca84-137">Enable trace flag 1118 (TF1118) as a startup parameter for all instances of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>|<span data-ttu-id="4ca84-138">實作 TF1118 有助於減少爭用跨[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]藉由移除幾乎所有的單一頁面配置的執行個體。</span><span class="sxs-lookup"><span data-stu-id="4ca84-138">Implementing TF1118 helps reduce contention across the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances by removing almost all single page allocations.</span></span> <span data-ttu-id="4ca84-139">如需詳細資訊，請參閱 Microsoft 知識庫文件 328551， ["Tempdb 資料庫的並行存取增強功能"](http://go.microsoft.com/fwlink/?LinkId=153694) (http://go.microsoft.com/fwlink/?LinkId=153694)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-139">For more information see Microsoft Knowledge Base article 328551, ["Concurrency enhancements for the tempdb database"](http://go.microsoft.com/fwlink/?LinkId=153694) (http://go.microsoft.com/fwlink/?LinkId=153694).</span></span> <span data-ttu-id="4ca84-140">**注意：**的詳細資訊，請參閱 TF1118 ["多疑周圍 TF1118"](http://go.microsoft.com/fwlink/?LinkId=158271) (http://go.microsoft.com/fwlink/?LinkId=158271)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-140">**Note:**  For more information about TF1118 see [“Misconceptions around TF1118”](http://go.microsoft.com/fwlink/?LinkId=158271) (http://go.microsoft.com/fwlink/?LinkId=158271).</span></span> <span data-ttu-id="4ca84-141">請注意，在以下連結的內容不 Microsoft 所擁有，Microsoft 不保證內容的正確性。</span><span class="sxs-lookup"><span data-stu-id="4ca84-141">Note that the content at this link is not owned by Microsoft and Microsoft does not guarantee the accuracy of the content.</span></span>|  
|<span data-ttu-id="4ca84-142">將 tempdb 資料庫分割成多個資料檔相同大小的每個[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]所使用的執行個體[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ca84-142">Split the tempdb database into multiple data files of equal size on each [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance used by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>|<span data-ttu-id="4ca84-143">確認用於 tempdb 資料檔案都屬於相同大小。</span><span class="sxs-lookup"><span data-stu-id="4ca84-143">Ensure that the data files used for the tempdb are of equal size.</span></span> <span data-ttu-id="4ca84-144">這很重要，因為比例填滿演算法使用[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]根據資料檔案的大小。</span><span class="sxs-lookup"><span data-stu-id="4ca84-144">This is critical because the proportional fill algorithm used by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] is based on the size of the data files.</span></span> <span data-ttu-id="4ca84-145">建立資料檔的大小不相等，如果比例填滿演算法會使用全域配置對應 (GAM) 配置，而不是分配之間的所有檔案，藉以定義的目的建立多個配置更多的最大檔案資料檔案。</span><span class="sxs-lookup"><span data-stu-id="4ca84-145">If data files are created with unequal sizes, the proportional fill algorithm will use the largest file more for Global Allocation Map (GAM) allocations rather than spreading the allocations between all the files, thereby defeating the purpose of creating multiple data files.</span></span> <span data-ttu-id="4ca84-146">一般來說，每個 CPU 的伺服器上建立一個資料檔，然後調整的數目視檔案向上或向下。</span><span class="sxs-lookup"><span data-stu-id="4ca84-146">As a general guideline, create one data file for each CPU on the server and then adjust the number of files up or down as necessary.</span></span> <span data-ttu-id="4ca84-147">請注意，雙核心 CPU 被視為兩個 CPU。</span><span class="sxs-lookup"><span data-stu-id="4ca84-147">Note that a dual-core CPU is considered to be two CPUs.</span></span> <span data-ttu-id="4ca84-148">在任何情況下，資料檔案的數目不能大於 8，無論電腦上可用的多少額外的核心。</span><span class="sxs-lookup"><span data-stu-id="4ca84-148">In any event, the number of data files must not be greater than 8 no matter how many additional cores are available on the computer.</span></span> <span data-ttu-id="4ca84-149">如需 tempdb 檔案的詳細資訊，請參閱[最佳化 tempdb 效能](http://go.microsoft.com/fwlink/?LinkId=158272)(http://go.microsoft.com/fwlink/?LinkId=158272) 中[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]文件。</span><span class="sxs-lookup"><span data-stu-id="4ca84-149">For more information about tempdb files, see [Optimizing tempdb Performance](http://go.microsoft.com/fwlink/?LinkId=158272) (http://go.microsoft.com/fwlink/?LinkId=158272) in the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] documentation.</span></span>|  
|<span data-ttu-id="4ca84-150">如果您正在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]與裝載您的資料庫執行的電腦上[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]具有足夠的實體記憶體，來設定的執行個體[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]使用 Address Windowing Extensions (AWE) 記憶體。</span><span class="sxs-lookup"><span data-stu-id="4ca84-150">If you are running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and hosting your databases on computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] with sufficient physical memory, configure the instances of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] to use Address Windowing Extensions (AWE) memory.</span></span>|<span data-ttu-id="4ca84-151">在 x86 電腦，[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]應該設定為使用 2 GB 以上的實體記憶體。</span><span class="sxs-lookup"><span data-stu-id="4ca84-151">On an x86 computer, [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] should be configured to use more than 2 GB of physical memory.</span></span> [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]<span data-ttu-id="4ca84-152">包含支援使用的 Microsoft Windows Address Windowing Extensions (AWE) 來解決 32 GB 的記憶體。</span><span class="sxs-lookup"><span data-stu-id="4ca84-152"> includes support for the use of Microsoft Windows Address Windowing Extensions (AWE) to address up to 32 GB of memory.</span></span> <span data-ttu-id="4ca84-153">使用 AWE，[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]可以保留未使用的其他應用程式和作業系統的記憶體。</span><span class="sxs-lookup"><span data-stu-id="4ca84-153">With AWE, [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] can reserve memory that is not in use for other applications and the operating system.</span></span> <span data-ttu-id="4ca84-154">不過，使用此記憶體中，每個執行個體必須以靜態方式配置記憶體。</span><span class="sxs-lookup"><span data-stu-id="4ca84-154">Each instance that uses this memory, however, must statically allocate the memory it needs.</span></span> [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]<span data-ttu-id="4ca84-155">只能使用此 AWE 配置記憶體的資料快取而非可執行檔、 驅動程式、 Dll 以及其他等等。</span><span class="sxs-lookup"><span data-stu-id="4ca84-155"> can only use this AWE allocated memory for the data cache and not for executables, drivers, DLLs, and so forth.</span></span> <span data-ttu-id="4ca84-156">如需詳細資訊，請參閱：</span><span class="sxs-lookup"><span data-stu-id="4ca84-156">For more information, see:</span></span><br /><br /> <span data-ttu-id="4ca84-157">Microsoft 知識庫文章 274750， [< 如何設定 SQL Server 使用超過 2 GB 的實體記憶體 >](http://go.microsoft.com/fwlink/?LinkId=153718) (http://go.microsoft.com/fwlink/?LinkId=153718)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-157">-   Microsoft Knowledge Base article 274750, ["How to configure SQL Server to use more than 2 GB of physical memory"](http://go.microsoft.com/fwlink/?LinkId=153718) (http://go.microsoft.com/fwlink/?LinkId=153718).</span></span><br /><span data-ttu-id="4ca84-158">-   [使用 AWE](http://go.microsoft.com/fwlink/?LinkId=153720) (http://go.microsoft.com/fwlink/?LinkId=153720) 中[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]文件。</span><span class="sxs-lookup"><span data-stu-id="4ca84-158">-   [Using AWE](http://go.microsoft.com/fwlink/?LinkId=153720) (http://go.microsoft.com/fwlink/?LinkId=153720) in the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] documentation.</span></span><br /><span data-ttu-id="4ca84-159">-   [適用於 SQL Server 啟用 AWE 記憶體](http://go.microsoft.com/fwlink/?LinkId=158273)(http://go.microsoft.com/fwlink/?LinkId=158273) 中[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]文件。</span><span class="sxs-lookup"><span data-stu-id="4ca84-159">-   [Enabling AWE Memory for SQL Server](http://go.microsoft.com/fwlink/?LinkId=158273) (http://go.microsoft.com/fwlink/?LinkId=158273) in the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] documentation.</span></span>|  
|<span data-ttu-id="4ca84-160">上設定相同的值的最小值和最大伺服器記憶體[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]instance(s) 裝載[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫。</span><span class="sxs-lookup"><span data-stu-id="4ca84-160">Set the Minimum and Maximum Server memory to the same values on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>|<span data-ttu-id="4ca84-161">執行的電腦[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]裝載[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫只能專用於執行[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ca84-161">The computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases should be dedicated to running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="4ca84-162">當執行的電腦[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]裝載[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫**是**專門用來執行[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]，我們建議的最小伺服器記憶體' 和 '最大伺服器記憶體選項，在每個[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]設定執行個體，以指定要配置給記憶體固定的量[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ca84-162">When the computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases **are** dedicated to running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)], we recommend that the 'min server memory' and 'max server memory' options on each [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance be set to specify the fixed amount of memory to allocate to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="4ca84-163">在此情況下，您應該設定的 「 最小伺服器記憶體 」 和 「 最大伺服器記憶體 」 為相同的值 （等於 SQL Server 將使用的實體記憶體的最大數量）。</span><span class="sxs-lookup"><span data-stu-id="4ca84-163">In this case, you should set the 'min server memory' and 'max server memory' to the same value (equal to the maximum amount of physical memory that SQL Server will use).</span></span> <span data-ttu-id="4ca84-164">這會降低額外負荷，否則會使用由[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]以動態方式管理這些值。</span><span class="sxs-lookup"><span data-stu-id="4ca84-164">This will reduce overhead that would otherwise be used by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] dynamically managing these values.</span></span> <span data-ttu-id="4ca84-165">在執行每一部電腦上執行下列 T-SQL 命令[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]來指定要配置給記憶體固定的量[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="4ca84-165">Execute the following T-SQL commands on each computer running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] to specify the fixed amount of memory to allocate to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]:</span></span><br /><br /> <span data-ttu-id="4ca84-166">sp_configure 'Max Server memory (MB)'，（以 mb 為單位的最大大小） sp_configure' Min Server memory (MB)' （以 mb 為單位的最小大小）</span><span class="sxs-lookup"><span data-stu-id="4ca84-166">sp_configure ‘Max Server memory (MB)’,(max size in MB)sp_configure ‘Min Server memory (MB)’,(min size in MB)</span></span><br /><br /> <span data-ttu-id="4ca84-167">在您設定的記憶體數量之前[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]，減去總實體記憶體的 Windows Server 所需的記憶體來判斷適當的記憶體設定。</span><span class="sxs-lookup"><span data-stu-id="4ca84-167">Before you set the amount of memory for [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)], determine the appropriate memory setting by subtracting the memory required for Windows Server from the total physical memory.</span></span> <span data-ttu-id="4ca84-168">這是您可以指派給記憶體的最大數量[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ca84-168">This is the maximum amount of memory you can assign to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="4ca84-169">**注意：**如果電腦執行[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]裝載[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫也裝載企業單一登入主要密碼，本主題中所述[叢集主要密碼伺服器](~/technical-guides/clustering-the-master-secret-server.md)然後您可能需要調整此值，以確保有足夠的記憶體可用來執行 「 企業單一登入服務。</span><span class="sxs-lookup"><span data-stu-id="4ca84-169">**Note:**  If the computer(s) running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases also host the Enterprise Single Sign-On master secret as described in the topic [Clustering the Master Secret Server](~/technical-guides/clustering-the-master-secret-server.md) then you may need to adjust this value to ensure that there is sufficient memory available to run the Enterprise Single Sign-On Service.</span></span>|  
|<span data-ttu-id="4ca84-170">BizTalk 追蹤資料庫大小</span><span class="sxs-lookup"><span data-stu-id="4ca84-170">Account for the size of BizTalk Tracking database</span></span>|<span data-ttu-id="4ca84-171">-在決定 BizTalk 追蹤 (DTA) 資料庫中的訊息大小，如果加上訊息內容的平均大小的訊息大小重大訊息大小相較之下。</span><span class="sxs-lookup"><span data-stu-id="4ca84-171">-   When determining the size of messages in the BizTalk Tracking (DTA) database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span><br /><span data-ttu-id="4ca84-172">-若要限制 BizTalk 追蹤資料庫中的訊息大小，請限制您將升級的屬性數目。</span><span class="sxs-lookup"><span data-stu-id="4ca84-172">-   To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span><br /><span data-ttu-id="4ca84-173">-如果啟用協調流程偵錯工具選項時，考慮到協調流程中每個圖形的狀態儲存在 「 BizTalk 追蹤資料庫中。</span><span class="sxs-lookup"><span data-stu-id="4ca84-173">-   If the orchestration debugger option is enabled, take into account that the status of each shape in the orchestration is saved in the BizTalk Tracking database.</span></span>|  
  
<a name="BKMK_Maintain"></a>   
## <a name="performing-sql-server-maintenance-procedures"></a><span data-ttu-id="4ca84-174">執行 SQL Server 維護程序</span><span class="sxs-lookup"><span data-stu-id="4ca84-174">Performing SQL Server Maintenance Procedures</span></span>  
  
|<span data-ttu-id="4ca84-175">步驟</span><span class="sxs-lookup"><span data-stu-id="4ca84-175">Steps</span></span>|<span data-ttu-id="4ca84-176">參考</span><span class="sxs-lookup"><span data-stu-id="4ca84-176">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="4ca84-177">定義自動成長設定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫。</span><span class="sxs-lookup"><span data-stu-id="4ca84-177">Define auto-growth settings for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>|<span data-ttu-id="4ca84-178">自動成長的資料庫應該設數量 （mb），而不是百分比，特別是針對 MessageBox 和追蹤資料庫。</span><span class="sxs-lookup"><span data-stu-id="4ca84-178">-   Database auto-growth should be set to a fixed number of megabytes instead of a percentage, especially for the MessageBox and Tracking databases.</span></span> <span data-ttu-id="4ca84-179">根據您的 BizTalk Server 應用程式和輸送量，MessageBox 與追蹤資料庫可以變得很大。</span><span class="sxs-lookup"><span data-stu-id="4ca84-179">Depending on your BizTalk Server application and throughput, the MessageBox and Tracking databases can get quite large.</span></span> <span data-ttu-id="4ca84-180">如果自動成長設為百分比，則自動成長也很嚴重。</span><span class="sxs-lookup"><span data-stu-id="4ca84-180">If auto-growth is set to a percentage, then the auto-growth can be substantial as well.</span></span><br /><span data-ttu-id="4ca84-181">-立即檔案初始化可大幅減少檔案成長作業的效能影響。</span><span class="sxs-lookup"><span data-stu-id="4ca84-181">-   Instant file initialization can greatly reduce the performance impact of a file growth operation.</span></span><br /><span data-ttu-id="4ca84-182">-在理想情況下，支援的檔案群組的檔案大小應該預先配置，並可能的話，請設定為靜態的大小。</span><span class="sxs-lookup"><span data-stu-id="4ca84-182">-   Ideally, the size of files supporting the file groups should be pre-allocated, and if possible, set to a static size.</span></span><br /><br /> <span data-ttu-id="4ca84-183">如需詳細資訊，請參閱[定義資料庫的自動成長設定](~/technical-guides/defining-auto-growth-settings-for-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-183">For more information, see [Defining Auto-Growth Settings for Databases](~/technical-guides/defining-auto-growth-settings-for-databases.md).</span></span>|  
|<span data-ttu-id="4ca84-184">備份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫</span><span class="sxs-lookup"><span data-stu-id="4ca84-184">Back up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases</span></span>|<span data-ttu-id="4ca84-185">-我們建議您執行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]備份工作，以避免[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫交易記錄變得無限制的方式。</span><span class="sxs-lookup"><span data-stu-id="4ca84-185">-   We recommend running the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] backup job to prevent the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database transaction logs from growing in an unbounded fashion.</span></span><br /><span data-ttu-id="4ca84-186">-您必須還原整個[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]環境上定期執行，而且您應該仔細文件程序。</span><span class="sxs-lookup"><span data-stu-id="4ca84-186">-   You should restore the entire [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment on a regular basis, and you should carefully document the process.</span></span><br /><span data-ttu-id="4ca84-187">-我們建議您封存舊的備份檔案。</span><span class="sxs-lookup"><span data-stu-id="4ca84-187">-   We recommend that you archive old backup files.</span></span><br /><br /> <span data-ttu-id="4ca84-188">如需詳細資訊，請參閱[備份資料庫](~/technical-guides/backing-up-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-188">For more information, see [Backing Up Databases](~/technical-guides/backing-up-databases.md).</span></span>|  
|<span data-ttu-id="4ca84-189">監視[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL Agent 作業。</span><span class="sxs-lookup"><span data-stu-id="4ca84-189">Monitor the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent jobs.</span></span>|<span data-ttu-id="4ca84-190">監視的健全狀況，這些作業，並確保它們執行無誤。</span><span class="sxs-lookup"><span data-stu-id="4ca84-190">Monitor the health of these jobs, and ensure that they are running without errors.</span></span> <span data-ttu-id="4ca84-191">如需詳細資訊，請參閱[監視 SQL Server Agent 作業](~/technical-guides/monitoring-sql-server-agent-jobs.md)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-191">For more information, see [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md).</span></span>|  
|<span data-ttu-id="4ca84-192">啟用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]追蹤和封存</span><span class="sxs-lookup"><span data-stu-id="4ca84-192">Enable [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tracking and archiving</span></span>|<span data-ttu-id="4ca84-193">「 DTA 清除與封存 」 SQL Agent 作業封存和清除 BizTalk 追蹤資料庫，因而使其不會成長到無法控制的舊資料。</span><span class="sxs-lookup"><span data-stu-id="4ca84-193">The “DTA Purge and Archive” SQL Agent job archives and purges old data from the BizTalk Tracking database, thus keeping it from growing out of control.</span></span> <span data-ttu-id="4ca84-194">這是不可或缺的狀況良好[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統。</span><span class="sxs-lookup"><span data-stu-id="4ca84-194">This is essential for a healthy [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="4ca84-195">如需詳細資訊，請參閱[清除和封存追蹤資料](~/technical-guides/purging-and-archiving-tracking-data.md)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-195">For more information, see [Purging and Archiving Tracking Data](~/technical-guides/purging-and-archiving-tracking-data.md).</span></span>|  
  
<a name="BKMK_Backup"></a>   
## <a name="backing-up-the-biztalk-server-databases"></a><span data-ttu-id="4ca84-196">備份 BizTalk Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="4ca84-196">Backing Up the BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="4ca84-197">步驟</span><span class="sxs-lookup"><span data-stu-id="4ca84-197">Steps</span></span>|<span data-ttu-id="4ca84-198">參考</span><span class="sxs-lookup"><span data-stu-id="4ca84-198">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="4ca84-199">確認備份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]設定 SQL 代理程式作業。</span><span class="sxs-lookup"><span data-stu-id="4ca84-199">Verify that the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent job is configured.</span></span>|<span data-ttu-id="4ca84-200">-了解[< 如何設定 「 備份 BizTalk Server 」 工作 >](http://go.microsoft.com/fwlink/?LinkId=153813) (http://go.microsoft.com/fwlink/?LinkId=153813)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-200">-   See ["How to Configure the Backup BizTalk Server Job"](http://go.microsoft.com/fwlink/?LinkId=153813) (http://go.microsoft.com/fwlink/?LinkId=153813).</span></span><br /><span data-ttu-id="4ca84-201">-了解[資料庫分別備份](~/technical-guides/backing-up-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-201">-   See [Backing Up Databases](~/technical-guides/backing-up-databases.md).</span></span>|  
|<span data-ttu-id="4ca84-202">設定備份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL Agent 作業以刪除比指定天數還舊的備份檔案@DaysToKeep變數。</span><span class="sxs-lookup"><span data-stu-id="4ca84-202">Configure the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent job to delete backup files that are older than the number of days specified by the @DaysToKeep variable.</span></span> <span data-ttu-id="4ca84-203">如果不會刪除備份檔案可以成長 unbounded 經過一段時間，這可能會填滿磁碟上包含備份檔案，並會造成問題，與磁碟空間有限。</span><span class="sxs-lookup"><span data-stu-id="4ca84-203">If the backup files are not deleted they can grow unbounded over time which can fill up the disk(s) that contain the backup files and cause problems that relate to limited disk space.</span></span>|<span data-ttu-id="4ca84-204">請參閱 Microsoft 知識庫文章 982546， [「 備份 BizTalk Server 」 作業失敗時，當備份檔案會累積一段時間，在 Microsoft BizTalk Server 中 Dababase](http://go.microsoft.com/fwlink/?LinkId=202858) (http://go.microsoft.com/fwlink/?LinkId=202858)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-204">See Microsoft Knowledge Base Article 982546, [The "Backup BizTalk Server" job fails when backup files accumulate over time in Microsoft BizTalk Dababase Server](http://go.microsoft.com/fwlink/?LinkId=202858) (http://go.microsoft.com/fwlink/?LinkId=202858).</span></span>|  
|<span data-ttu-id="4ca84-205">確認備份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL Agent 作業已啟用且正在執行。</span><span class="sxs-lookup"><span data-stu-id="4ca84-205">Verify that the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent job is enabled and running.</span></span>|[<span data-ttu-id="4ca84-206">監視 SQL Server Agent 作業</span><span class="sxs-lookup"><span data-stu-id="4ca84-206">Monitoring SQL Server Agent Jobs</span></span>](~/technical-guides/monitoring-sql-server-agent-jobs.md)|  
  
<a name="BKMK_Disaster"></a>   
## <a name="using-sql-server-log-shipping-for-disaster-recovery"></a><span data-ttu-id="4ca84-207">使用 SQL Server 記錄傳送災害復原</span><span class="sxs-lookup"><span data-stu-id="4ca84-207">Using SQL Server Log Shipping For Disaster Recovery</span></span>  
  
|<span data-ttu-id="4ca84-208">步驟</span><span class="sxs-lookup"><span data-stu-id="4ca84-208">Steps</span></span>|<span data-ttu-id="4ca84-209">參考</span><span class="sxs-lookup"><span data-stu-id="4ca84-209">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="4ca84-210">請確認嚴重損壞修復伺服器有能力處理生產負載。</span><span class="sxs-lookup"><span data-stu-id="4ca84-210">Verify that the disaster recovery servers have the capacity to handle production load.</span></span>|<span data-ttu-id="4ca84-211">請參閱[使用 BizTalk Server 記錄傳送災害復原](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-211">See [Using BizTalk Server Log Shipping for Disaster Recovery](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="4ca84-212">請確定您的災害復原常式的細節會完善記載。</span><span class="sxs-lookup"><span data-stu-id="4ca84-212">Ensure that the specifics of your disaster recovery routine are well documented.</span></span>|<span data-ttu-id="4ca84-213">請參閱[使用 BizTalk Server 記錄傳送災害復原](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-213">See [Using BizTalk Server Log Shipping for Disaster Recovery](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="4ca84-214">一般測試的作法是容錯移轉至災害復原站台的一部分，尤其是以新的 BizTalk 應用程式會放在生產環境中。</span><span class="sxs-lookup"><span data-stu-id="4ca84-214">As part of regular testing, practice failover to the disaster recovery site, especially as new BizTalk applications are put in production.</span></span>|<span data-ttu-id="4ca84-215">請參閱[使用 BizTalk Server 記錄傳送災害復原](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-215">See [Using BizTalk Server Log Shipping for Disaster Recovery](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
  
<a name="BKMK_Jobs"></a>   
## <a name="monitoring-biztalk-server-sql-agent-jobs"></a><span data-ttu-id="4ca84-216">監控 BizTalk Server SQL Agent 工作</span><span class="sxs-lookup"><span data-stu-id="4ca84-216">Monitoring BizTalk Server SQL Agent Jobs</span></span>  
  
|<span data-ttu-id="4ca84-217">步驟</span><span class="sxs-lookup"><span data-stu-id="4ca84-217">Steps</span></span>|<span data-ttu-id="4ca84-218">參考</span><span class="sxs-lookup"><span data-stu-id="4ca84-218">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="4ca84-219">確認 SQL Server Agent 服務正在執行。</span><span class="sxs-lookup"><span data-stu-id="4ca84-219">Verify that the SQL Server Agent service is running.</span></span>|<span data-ttu-id="4ca84-220">請參閱[監視 SQL Server Agent 作業](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-220">See [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="4ca84-221">確認 SQL Server Agent 作業安裝[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]啟用，且成功執行。</span><span class="sxs-lookup"><span data-stu-id="4ca84-221">Verify that the SQL Server Agent jobs installed by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are enabled and running successfully.</span></span>|<span data-ttu-id="4ca84-222">請參閱[監視 SQL Server Agent 作業](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-222">See [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="4ca84-223">確認[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL 代理程式作業及時完成。</span><span class="sxs-lookup"><span data-stu-id="4ca84-223">Verify that the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent jobs are completing in a timely manner.</span></span>|<span data-ttu-id="4ca84-224">請參閱[監視 SQL Server Agent 作業](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="4ca84-224">See [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span></span>|  
  
<a name="BKMK_Purge"></a>   
## <a name="purging-and-archiving-tracking-data"></a><span data-ttu-id="4ca84-225">清除和封存追蹤資料</span><span class="sxs-lookup"><span data-stu-id="4ca84-225">Purging and Archiving Tracking Data</span></span>  
  
|<span data-ttu-id="4ca84-226">步驟</span><span class="sxs-lookup"><span data-stu-id="4ca84-226">Steps</span></span>|<span data-ttu-id="4ca84-227">參考</span><span class="sxs-lookup"><span data-stu-id="4ca84-227">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="4ca84-228">請確認已正確設定、 啟用以及已成功完成的 SQL Agent 作業 「 DTA 清除與封存 」。</span><span class="sxs-lookup"><span data-stu-id="4ca84-228">Ensure that the SQL Agent job "DTA Purge and Archive" is properly configured, enabled, and successfully completing.</span></span>|<span data-ttu-id="4ca84-229">請參閱[< 如何設定 DTA 的清除與封存工作 >](http://go.microsoft.com/fwlink/?LinkId=153814) (http://go.microsoft.com/fwlink/?LinkId=153814)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-229">See ["How to Configure the DTA Purge and Archive Job"](http://go.microsoft.com/fwlink/?LinkId=153814) (http://go.microsoft.com/fwlink/?LinkId=153814).</span></span>|  
|<span data-ttu-id="4ca84-230">請確保工作能夠以最快速度的內送的追蹤資料會產生清除追蹤資料。</span><span class="sxs-lookup"><span data-stu-id="4ca84-230">Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.</span></span>|<span data-ttu-id="4ca84-231">請參閱["測量最大持續性追蹤輸送量"](http://go.microsoft.com/fwlink/?LinkId=153815) (http://go.microsoft.com/fwlink/?LinkId=153815)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-231">See ["Measuring Maximum Sustainable Tracking Throughput"](http://go.microsoft.com/fwlink/?LinkId=153815) (http://go.microsoft.com/fwlink/?LinkId=153815).</span></span>|  
|<span data-ttu-id="4ca84-232">檢閱軟清除和硬清除參數，以確保您保持最佳的時間長度的資料。</span><span class="sxs-lookup"><span data-stu-id="4ca84-232">Review the soft purge and hard purge parameters to ensure you are keeping data for the optimal length of time.</span></span>|<span data-ttu-id="4ca84-233">請參閱[「 封存和清除 BizTalk 追蹤資料庫 」](http://go.microsoft.com/fwlink/?LinkId=153816) (http://go.microsoft.com/fwlink/?LinkId=153816)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-233">See ["Archiving and Purging the BizTalk Tracking Database"](http://go.microsoft.com/fwlink/?LinkId=153816) (http://go.microsoft.com/fwlink/?LinkId=153816).</span></span>|  
|<span data-ttu-id="4ca84-234">如果您只需要清除舊資料，而不需要封存第一次，變更的 SQL 代理程式作業來呼叫預存程序 」 dtasp_PurgeTrackingDatabase。 」</span><span class="sxs-lookup"><span data-stu-id="4ca84-234">If you only need to purge the old data and do not need to archive it first, change the SQL Agent job to call the stored procedure "dtasp_PurgeTrackingDatabase."</span></span>|<span data-ttu-id="4ca84-235">請參閱[< 如何從 BizTalk 追蹤資料庫清除資料 >](http://go.microsoft.com/fwlink/?LinkId=153817) (http://go.microsoft.com/fwlink/?LinkId=153817)。</span><span class="sxs-lookup"><span data-stu-id="4ca84-235">See ["How to Purge Data from the BizTalk Tracking Database"](http://go.microsoft.com/fwlink/?LinkId=153817) (http://go.microsoft.com/fwlink/?LinkId=153817).</span></span>|  
  
## <a name="in-this-section"></a><span data-ttu-id="4ca84-236">本節內容</span><span class="sxs-lookup"><span data-stu-id="4ca84-236">In This Section</span></span>  
  
-   [<span data-ttu-id="4ca84-237">不應該變更的 SQL Server 設定</span><span class="sxs-lookup"><span data-stu-id="4ca84-237">SQL Server Settings That Should Not Be Changed</span></span>](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)  
  
-   [<span data-ttu-id="4ca84-238">監視與降低資料庫的 IO 競爭</span><span class="sxs-lookup"><span data-stu-id="4ca84-238">Monitoring and Reducing Database IO Contention</span></span>](~/technical-guides/monitoring-and-reducing-database-i-o-contention.md)  
  
-   [<span data-ttu-id="4ca84-239">檢閱及測試 SQL Server 叢集組態的容錯移轉案例</span><span class="sxs-lookup"><span data-stu-id="4ca84-239">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](~/technical-guides/reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)  
  
-   [<span data-ttu-id="4ca84-240">定義資料庫的自動成長設定</span><span class="sxs-lookup"><span data-stu-id="4ca84-240">Defining Auto-Growth Settings for Databases</span></span>](~/technical-guides/defining-auto-growth-settings-for-databases.md)  
  
-   [<span data-ttu-id="4ca84-241">備份資料庫</span><span class="sxs-lookup"><span data-stu-id="4ca84-241">Backing Up Databases</span></span>](~/technical-guides/backing-up-databases.md)  
  
-   [<span data-ttu-id="4ca84-242">使用 BizTalk Server 記錄傳送災害復原</span><span class="sxs-lookup"><span data-stu-id="4ca84-242">Using BizTalk Server Log Shipping for Disaster Recovery</span></span>](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)  
  
-   [<span data-ttu-id="4ca84-243">監視 SQL Server Agent 作業</span><span class="sxs-lookup"><span data-stu-id="4ca84-243">Monitoring SQL Server Agent Jobs</span></span>](~/technical-guides/monitoring-sql-server-agent-jobs.md)  
  
-   [<span data-ttu-id="4ca84-244">清除和封存追蹤資料</span><span class="sxs-lookup"><span data-stu-id="4ca84-244">Purging and Archiving Tracking Data</span></span>](~/technical-guides/purging-and-archiving-tracking-data.md)