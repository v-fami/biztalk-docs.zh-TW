---
title: 檢查清單： 設定 SQL Server |Microsoft 文件
ms.custom: ''
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: edd20f24-8a72-40b7-abee-81fbd3ceefda
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f6c67fcdee26afd6ec9bb1016e86a98b1cf26e8
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/01/2017
ms.locfileid: "26010287"
---
# <a name="checklist-configuring-sql-server"></a><span data-ttu-id="0e7c0-102">檢查清單： 設定 SQL Server</span><span class="sxs-lookup"><span data-stu-id="0e7c0-102">Checklist: Configuring SQL Server</span></span>
<span data-ttu-id="0e7c0-103">若要準備的 SQL Server 時，請依照下列步驟使用 BizTalk Server 實際執行環境中。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-103">Steps to follow when preparing SQL Server for use in a BizTalk Server production environment.</span></span>    
 
<a name="BKMK_Config"></a>   
## <a name="configuring-sql-server"></a><span data-ttu-id="0e7c0-104">設定 SQL Server</span><span class="sxs-lookup"><span data-stu-id="0e7c0-104">Configuring SQL Server</span></span>  
  
|<span data-ttu-id="0e7c0-105">步驟</span><span class="sxs-lookup"><span data-stu-id="0e7c0-105">Steps</span></span>|<span data-ttu-id="0e7c0-106">參考</span><span class="sxs-lookup"><span data-stu-id="0e7c0-106">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="0e7c0-107">監視並減少 BizTalk Server 資料庫檔案磁碟 I/O 競爭問題。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-107">Monitor and reduce BizTalk Server database files disk I/O contention.</span></span>|<span data-ttu-id="0e7c0-108">-我們建議您主動監視存放的資料和交易記錄檔磁碟的磁碟 I/O 使用量。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-108">-   We recommend that you proactively monitor the disk I/O usage for the disks that house the data and transaction log files.</span></span><br /><span data-ttu-id="0e7c0-109">-我們建議最好讓資料檔和交易記錄檔的每一種放在專用的磁碟機，以降低磁碟 I/O 競爭變得有問題的可能性。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-109">-   We recommend that the data files and transaction log files for each of these be placed on dedicated drives to reduce the likelihood of disk I/O contention becoming a problem.</span></span><br /><span data-ttu-id="0e7c0-110">-您可以降低磁碟 I/O 競爭，藉由分隔 MessageBox 和追蹤 (DTA) 資料庫，而且分隔的資料庫檔案和交易記錄檔不同實體磁碟上。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-110">-   You can reduce disk I/O contention by separating the MessageBox and Tracking (DTA) databases, and by separating the database files and transaction log files on different physical disks.</span></span><br /><br /> <span data-ttu-id="0e7c0-111">如需詳細資訊，請參閱[監視及降低資料庫 IO 爭用](monitoring-and-reducing-database-i-o-contention.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-111">For more information, see [Monitoring and Reducing Database IO Contention](monitoring-and-reducing-database-i-o-contention.md)</span></span>|  
|<span data-ttu-id="0e7c0-112">請確定 SQL Server 已正確對齊的磁碟分割</span><span class="sxs-lookup"><span data-stu-id="0e7c0-112">Ensure SQL Server is configured on properly-aligned disk partitions</span></span>|<span data-ttu-id="0e7c0-113">適當地對齊資料分割可能會導致明顯的延遲，進而改善 SQL Server 效能，進而增強了 BizTalk Server 效能降低的磁碟。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-113">Properly aligned disk partitions could result in significant decrease in latency thereby improving the SQL Server performance, which in turn enhances BizTalk Server performance.</span></span> <span data-ttu-id="0e7c0-114">相反地，非對齊的磁碟分割效能造成負面影響 I/O，因而導致效能變差的 SQL Server 和 BizTalk Server 效能。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-114">On the contrary, nonaligned disk partitions can negatively affect I/O performance, thereby degrading the SQL Server and BizTalk Server performance.</span></span><br /><br /> <span data-ttu-id="0e7c0-115">如需有關如何正確對齊的磁碟分割正面可能會影響效能，請參閱 < [for SQL Server 的磁碟分割區對齊最佳作法](http://go.microsoft.com/fwlink/?LinkId=154073)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-115">For more information about how properly aligned disk partitions can positively affect performance, see [Disk Partition Alignment Best Practices for SQL Server](http://go.microsoft.com/fwlink/?LinkId=154073).</span></span>|  
|<span data-ttu-id="0e7c0-116">讓您使用 SQL Server Profiler 監視的事件</span><span class="sxs-lookup"><span data-stu-id="0e7c0-116">Keep the events you monitor with the SQL Server Profiler</span></span>|<span data-ttu-id="0e7c0-117">使用 SQL Server Profiler 來監視只有您感興趣的事件。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-117">Use SQL Server Profiler to monitor only the events in which you are interested.</span></span> <span data-ttu-id="0e7c0-118">如果追蹤變得太大，您可以篩選，收集事件資料的子集，根據您想要的資訊。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-118">If traces become too large, you can filter them based on the information you want, so that only a subset of the event data is collected.</span></span> <span data-ttu-id="0e7c0-119">監視太多事件會增加伺服器與監視處理序的負擔，且會使得追蹤檔案或追蹤資料表增長過大，尤其是需要花費長時間的監視處理序更是如此。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-119">Monitoring too many events adds overhead to the server and the monitoring process, and can cause the trace file or trace table to grow very large, especially when the monitoring process takes place over a long period of time.</span></span>|  
|<span data-ttu-id="0e7c0-120">監視及降低 DTC 記錄檔磁碟 I/O 競爭。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-120">Monitor and reduce DTC log file disk I/O contention.</span></span>|[<span data-ttu-id="0e7c0-121">監視與降低 DTC 記錄檔的磁碟 IO 競爭</span><span class="sxs-lookup"><span data-stu-id="0e7c0-121">Monitoring and Reducing DTC Log File Disk IO Contention</span></span>](monitoring-and-reducing-dtc-log-file-disk-i-o-contention.md)|  
|<span data-ttu-id="0e7c0-122">SQL Server 資料庫提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-122">Provide high availability for the SQL Server databases.</span></span>|[<span data-ttu-id="0e7c0-123">規劃資料庫可用性</span><span class="sxs-lookup"><span data-stu-id="0e7c0-123">Planning for Database Availability</span></span>](planning-for-database-availability.md)|  
|<span data-ttu-id="0e7c0-124">檢閱主動/主動容錯移轉案例的 SQL Server 叢集組態。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-124">Review active/active SQL Server cluster configuration for failover scenarios.</span></span>|[<span data-ttu-id="0e7c0-125">檢閱及測試容錯移轉案例的 SQL Server 叢集設定</span><span class="sxs-lookup"><span data-stu-id="0e7c0-125">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)|  
|<span data-ttu-id="0e7c0-126">使用預設組態設定：</span><span class="sxs-lookup"><span data-stu-id="0e7c0-126">Use default configuration settings for:</span></span><br /><br /> <span data-ttu-id="0e7c0-127">Max Degree of Parallelism (MDOP)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-127">-   Max Degree of Parallelism (MDOP).</span></span><br /><span data-ttu-id="0e7c0-128">BizTalk Server MessageBox 資料庫上的 SQL Server 統計資料。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-128">-   SQL Server statistics on the BizTalk Server MessageBox database.</span></span><br /><span data-ttu-id="0e7c0-129">SQL Server 資料庫索引會重建和重組。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-129">-   SQL Server database index rebuilds and defragmentation.</span></span>|[<span data-ttu-id="0e7c0-130">不應該變更的 SQL Server 設定</span><span class="sxs-lookup"><span data-stu-id="0e7c0-130">SQL Server Settings That Should Not Be Changed</span></span>](sql-server-settings-that-should-not-be-changed.md)|  
|<span data-ttu-id="0e7c0-131">所有 SQL Server 執行個體中都啟用追蹤旗標 1118 (TF1118) 作為啟動參數。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-131">Enable trace flag 1118 (TF1118) as a startup parameter for all instances of SQL Server.</span></span>|<span data-ttu-id="0e7c0-132">實作 TF1118 有助於減少 SQL Server 執行個體之間的競爭，藉由移除幾乎所有的單一頁面配置。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-132">Implementing TF1118 helps reduce contention across the SQL Server instances by removing almost all single page allocations.</span></span> <span data-ttu-id="0e7c0-133">如需詳細資訊，請參閱 Microsoft 知識庫文章[tempdb 資料庫的並行存取增強功能](https://support.microsoft.com/en-us/help/328551/concurrency-enhancements-for-the-tempdb-database)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-133">For more information see Microsoft Knowledge Base article [Concurrency enhancements for the tempdb database](https://support.microsoft.com/en-us/help/328551/concurrency-enhancements-for-the-tempdb-database).</span></span> <br/><br/><span data-ttu-id="0e7c0-134">**注意：** 的詳細資訊，請參閱 TF1118[周圍 TF1118 多疑](https://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-134">**Note:**  For more information about TF1118 see [Misconceptions around TF1118](https://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/).</span></span> <span data-ttu-id="0e7c0-135">請注意，在以下連結的內容不 Microsoft 所擁有，Microsoft 不保證內容的正確性。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-135">Note that the content at this link is not owned by Microsoft and Microsoft does not guarantee the accuracy of the content.</span></span>|  
|<span data-ttu-id="0e7c0-136">分割成多個資料檔相同大小的 BizTalk Server 使用的每個 SQL Server 執行個體上的 tempdb 資料庫。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-136">Split the tempdb database into multiple data files of equal size on each SQL Server instance used by BizTalk Server.</span></span>|<span data-ttu-id="0e7c0-137">確認用於 tempdb 資料檔案都屬於相同大小。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-137">Ensure that the data files used for the tempdb are of equal size.</span></span> <span data-ttu-id="0e7c0-138">這是重要的因為 SQL Server 所使用的比例式填滿演算法為基礎的資料檔案的大小。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-138">This is critical because the proportional fill algorithm used by SQL Server is based on the size of the data files.</span></span> <span data-ttu-id="0e7c0-139">建立資料檔的大小不相等，如果比例填滿演算法會使用全域配置對應 (GAM) 配置，而不是分配之間的所有檔案，藉以定義的目的建立多個配置更多的最大檔案資料檔案。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-139">If data files are created with unequal sizes, the proportional fill algorithm will use the largest file more for Global Allocation Map (GAM) allocations rather than spreading the allocations between all the files, thereby defeating the purpose of creating multiple data files.</span></span> <span data-ttu-id="0e7c0-140">一般來說，每個 CPU 的伺服器上建立一個資料檔，然後調整的數目視檔案向上或向下。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-140">As a general guideline, create one data file for each CPU on the server and then adjust the number of files up or down as necessary.</span></span> <span data-ttu-id="0e7c0-141">請注意，雙核心 CPU 被視為兩個 CPU。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-141">Note that a dual-core CPU is considered to be two CPUs.</span></span> <span data-ttu-id="0e7c0-142">在任何情況下，資料檔案的數目不能大於 8，無論電腦上可用的多少額外的核心。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-142">In any event, the number of data files must not be greater than 8 no matter how many additional cores are available on the computer.</span></span> <span data-ttu-id="0e7c0-143">如需 tempdb 檔案的詳細資訊，請參閱[最佳化 tempdb 效能](https://docs.microsoft.com/sql/relational-databases/databases/tempdb-database)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-143">For more information about tempdb files, see [Optimizing tempdb Performance](https://docs.microsoft.com/sql/relational-databases/databases/tempdb-database).</span></span>|  
|<span data-ttu-id="0e7c0-144">將最小值和相同的值，SQL Server 上的最大伺服器記憶體 instance(s) 裝載 BizTalk Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-144">Set the Minimum and Maximum Server memory to the same values on the SQL Server instance(s) that host the BizTalk Server databases.</span></span>|<span data-ttu-id="0e7c0-145">SQL Server 電腦裝載 BizTalk Server 資料庫應該專用於執行 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-145">The computers running SQL Server that host the BizTalk Server databases should be dedicated to running SQL Server.</span></span> <span data-ttu-id="0e7c0-146">當 SQL Server 電腦裝載 BizTalk Server 資料庫**是**專門用來執行 SQL Server，我們建議的最小伺服器記憶體 」 和 「 最大伺服器記憶體 」 設定，以指定每個 SQL Server 執行個體上的選項固定配置給 SQL Server 的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-146">When the computers running SQL Server that host the BizTalk Server databases **are** dedicated to running SQL Server, we recommend that the 'min server memory' and 'max server memory' options on each SQL Server instance be set to specify the fixed amount of memory to allocate to SQL Server.</span></span> <span data-ttu-id="0e7c0-147">在此情況下，您應該設定的 「 最小伺服器記憶體 」 和 「 最大伺服器記憶體 」 為相同的值 （等於 SQL Server 將使用的實體記憶體的最大數量）。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-147">In this case, you should set the 'min server memory' and 'max server memory' to the same value (equal to the maximum amount of physical memory that SQL Server will use).</span></span> <span data-ttu-id="0e7c0-148">這會降低額外負荷，否則會以動態方式管理這些值的 SQL Server 所使用。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-148">This will reduce overhead that would otherwise be used by SQL Server dynamically managing these values.</span></span> <span data-ttu-id="0e7c0-149">每個執行 SQL Server，來指定要配置給 SQL Server 記憶體的固定的數量的電腦上執行下列 T-SQL 命令：</span><span class="sxs-lookup"><span data-stu-id="0e7c0-149">Execute the following T-SQL commands on each computer running SQL Server to specify the fixed amount of memory to allocate to SQL Server:</span></span><br /><br /> <span data-ttu-id="0e7c0-150">sp_configure 'Max Server memory (MB)'，（以 mb 為單位的最大大小） sp_configure' Min Server memory (MB)' （以 mb 為單位的最小大小）</span><span class="sxs-lookup"><span data-stu-id="0e7c0-150">sp_configure ‘Max Server memory (MB)’,(max size in MB)sp_configure ‘Min Server memory (MB)’,(min size in MB)</span></span><br /><br /> <span data-ttu-id="0e7c0-151">您為 SQL Server 的記憶體數量之前，判斷適當的記憶體設定減去總實體記憶體的 Windows Server 所需的記憶體。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-151">Before you set the amount of memory for SQL Server, determine the appropriate memory setting by subtracting the memory required for Windows Server from the total physical memory.</span></span> <span data-ttu-id="0e7c0-152">這是您可以指派給 SQL Server 記憶體的最大數量。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-152">This is the maximum amount of memory you can assign to SQL Server.</span></span> <span data-ttu-id="0e7c0-153">**注意：** 如果的裝載 BizTalk Server 資料庫也執行 SQL Server 的電腦裝載的企業單一登入主要密碼，本主題中所述[叢集主要密碼伺服器](clustering-the-master-secret-server.md)則可能需要若要調整此值，以確保有足夠的記憶體可用來執行 「 企業單一登入服務。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-153">**Note:**  If the computer(s) running SQL Server that host the BizTalk Server databases also host the Enterprise Single Sign-On master secret as described in the topic [Clustering the Master Secret Server](clustering-the-master-secret-server.md) then you may need to adjust this value to ensure that there is sufficient memory available to run the Enterprise Single Sign-On Service.</span></span>|  
|<span data-ttu-id="0e7c0-154">BizTalk 追蹤資料庫大小</span><span class="sxs-lookup"><span data-stu-id="0e7c0-154">Account for the size of BizTalk Tracking database</span></span>|<span data-ttu-id="0e7c0-155">-在決定 BizTalk 追蹤 (DTA) 資料庫中的訊息大小，如果加上訊息內容的平均大小的訊息大小重大訊息大小相較之下。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-155">-   When determining the size of messages in the BizTalk Tracking (DTA) database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span><br /><span data-ttu-id="0e7c0-156">-若要限制 BizTalk 追蹤資料庫中的訊息大小，請限制您將升級的屬性數目。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-156">-   To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span><br /><span data-ttu-id="0e7c0-157">-如果啟用協調流程偵錯工具選項時，考慮到協調流程中每個圖形的狀態儲存在 「 BizTalk 追蹤資料庫中。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-157">-   If the orchestration debugger option is enabled, take into account that the status of each shape in the orchestration is saved in the BizTalk Tracking database.</span></span>|  
  
<a name="BKMK_Maintain"></a>   
## <a name="performing-sql-server-maintenance-procedures"></a><span data-ttu-id="0e7c0-158">執行 SQL Server 維護程序</span><span class="sxs-lookup"><span data-stu-id="0e7c0-158">Performing SQL Server Maintenance Procedures</span></span>  
  
|<span data-ttu-id="0e7c0-159">步驟</span><span class="sxs-lookup"><span data-stu-id="0e7c0-159">Steps</span></span>|<span data-ttu-id="0e7c0-160">參考</span><span class="sxs-lookup"><span data-stu-id="0e7c0-160">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="0e7c0-161">定義 BizTalk Server 資料庫的自動成長設定。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-161">Define auto-growth settings for the BizTalk Server databases.</span></span>|<span data-ttu-id="0e7c0-162">自動成長的資料庫應該設數量 （mb），而不是百分比，特別是針對 MessageBox 和追蹤資料庫。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-162">-   Database auto-growth should be set to a fixed number of megabytes instead of a percentage, especially for the MessageBox and Tracking databases.</span></span> <span data-ttu-id="0e7c0-163">根據您的 BizTalk Server 應用程式和輸送量，MessageBox 與追蹤資料庫可以變得很大。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-163">Depending on your BizTalk Server application and throughput, the MessageBox and Tracking databases can get quite large.</span></span> <span data-ttu-id="0e7c0-164">如果自動成長設為百分比，則自動成長也很嚴重。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-164">If auto-growth is set to a percentage, then the auto-growth can be substantial as well.</span></span><br /><span data-ttu-id="0e7c0-165">-立即檔案初始化可大幅減少檔案成長作業的效能影響。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-165">-   Instant file initialization can greatly reduce the performance impact of a file growth operation.</span></span><br /><span data-ttu-id="0e7c0-166">-在理想情況下，支援的檔案群組的檔案大小應該預先配置，並可能的話，請設定為靜態的大小。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-166">-   Ideally, the size of files supporting the file groups should be pre-allocated, and if possible, set to a static size.</span></span><br /><br /> <span data-ttu-id="0e7c0-167">如需詳細資訊，請參閱[定義資料庫的自動成長設定](defining-auto-growth-settings-for-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-167">For more information, see [Defining Auto-Growth Settings for Databases](defining-auto-growth-settings-for-databases.md).</span></span>|  
|<span data-ttu-id="0e7c0-168">備份 BizTalk Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="0e7c0-168">Back up the BizTalk Server databases</span></span>|<span data-ttu-id="0e7c0-169">-我們建議您執行 備份 BizTalk Server 」 工作可避免 BizTalk Server 資料庫的交易記錄變得無限制的方式。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-169">-   We recommend running the BizTalk Server backup job to prevent the BizTalk Server database transaction logs from growing in an unbounded fashion.</span></span><br /><span data-ttu-id="0e7c0-170">-您必須還原整個 BizTalk Server 環境上定期執行，以及您應該仔細記錄處理程序。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-170">-   You should restore the entire BizTalk Server environment on a regular basis, and you should carefully document the process.</span></span><br /><span data-ttu-id="0e7c0-171">-我們建議您封存舊的備份檔案。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-171">-   We recommend that you archive old backup files.</span></span><br /><br /> <span data-ttu-id="0e7c0-172">如需詳細資訊，請參閱[備份資料庫](backing-up-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-172">For more information, see [Backing Up Databases](backing-up-databases.md).</span></span>|  
|<span data-ttu-id="0e7c0-173">監控 BizTalk Server SQL 代理程式作業。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-173">Monitor the BizTalk Server SQL Agent jobs.</span></span>|<span data-ttu-id="0e7c0-174">監視的健全狀況，這些作業，並確保它們執行無誤。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-174">Monitor the health of these jobs, and ensure that they are running without errors.</span></span> <span data-ttu-id="0e7c0-175">如需詳細資訊，請參閱[監視 SQL Server Agent 作業](monitoring-sql-server-agent-jobs.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-175">For more information, see [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md).</span></span>|  
|<span data-ttu-id="0e7c0-176">啟用 BizTalk Server 追蹤和封存</span><span class="sxs-lookup"><span data-stu-id="0e7c0-176">Enable BizTalk Server tracking and archiving</span></span>|<span data-ttu-id="0e7c0-177">「 DTA 清除與封存 」 SQL Agent 作業封存和清除 BizTalk 追蹤資料庫，因而使其不會成長到無法控制的舊資料。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-177">The “DTA Purge and Archive” SQL Agent job archives and purges old data from the BizTalk Tracking database, thus keeping it from growing out of control.</span></span> <span data-ttu-id="0e7c0-178">這是不可或缺的狀況良好的 BizTalk Server 系統。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-178">This is essential for a healthy BizTalk Server system.</span></span> <span data-ttu-id="0e7c0-179">如需詳細資訊，請參閱[清除和封存追蹤資料](purging-and-archiving-tracking-data.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-179">For more information, see [Purging and Archiving Tracking Data](purging-and-archiving-tracking-data.md).</span></span>|  
  
<a name="BKMK_Backup"></a>   
## <a name="backing-up-the-biztalk-server-databases"></a><span data-ttu-id="0e7c0-180">備份 BizTalk Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="0e7c0-180">Backing Up the BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="0e7c0-181">步驟</span><span class="sxs-lookup"><span data-stu-id="0e7c0-181">Steps</span></span>|<span data-ttu-id="0e7c0-182">參考</span><span class="sxs-lookup"><span data-stu-id="0e7c0-182">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="0e7c0-183">確認已設定備份 BizTalk Server SQL 代理程式作業。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-183">Verify that the Backup BizTalk Server SQL Agent job is configured.</span></span>|<span data-ttu-id="0e7c0-184">請參閱[設定 「 備份 BizTalk Server 」 工作](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-184">See [Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>|  
|<span data-ttu-id="0e7c0-185">設定備份 BizTalk Server SQL Agent 工作以刪除比指定天數還舊的備份檔案@DaysToKeep變數。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-185">Configure the Backup BizTalk Server SQL Agent job to delete backup files that are older than the number of days specified by the @DaysToKeep variable.</span></span> <span data-ttu-id="0e7c0-186">如果不會刪除備份檔案可以成長 unbounded 經過一段時間，這可能會填滿磁碟上包含備份檔案，並會造成問題，與磁碟空間有限。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-186">If the backup files are not deleted they can grow unbounded over time which can fill up the disk(s) that contain the backup files and cause problems that relate to limited disk space.</span></span>|<span data-ttu-id="0e7c0-187">請參閱[設定 「 備份 BizTalk Server 」 工作](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-187">See [Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>|  
|<span data-ttu-id="0e7c0-188">請確認備份 BizTalk Server SQL 代理程式作業已啟用且正在執行。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-188">Verify that the Backup BizTalk Server SQL Agent job is enabled and running.</span></span>|[<span data-ttu-id="0e7c0-189">監視 SQL Server Agent 作業</span><span class="sxs-lookup"><span data-stu-id="0e7c0-189">Monitoring SQL Server Agent Jobs</span></span>](monitoring-sql-server-agent-jobs.md)|  
  
<a name="BKMK_Disaster"></a>   
## <a name="using-sql-server-log-shipping-for-disaster-recovery"></a><span data-ttu-id="0e7c0-190">使用 SQL Server 記錄傳送災害復原</span><span class="sxs-lookup"><span data-stu-id="0e7c0-190">Using SQL Server Log Shipping For Disaster Recovery</span></span>  
  
|<span data-ttu-id="0e7c0-191">步驟</span><span class="sxs-lookup"><span data-stu-id="0e7c0-191">Steps</span></span>|<span data-ttu-id="0e7c0-192">參考</span><span class="sxs-lookup"><span data-stu-id="0e7c0-192">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="0e7c0-193">請確認嚴重損壞修復伺服器有能力處理生產負載。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-193">Verify that the disaster recovery servers have the capacity to handle production load.</span></span>|<span data-ttu-id="0e7c0-194">請參閱[使用 BizTalk Server 記錄傳送災害復原](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-194">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="0e7c0-195">請確定您的災害復原常式的細節會完善記載。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-195">Ensure that the specifics of your disaster recovery routine are well documented.</span></span>|<span data-ttu-id="0e7c0-196">請參閱[使用 BizTalk Server 記錄傳送災害復原](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-196">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="0e7c0-197">一般測試的作法是容錯移轉至災害復原站台的一部分，尤其是以新的 BizTalk 應用程式會放在生產環境中。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-197">As part of regular testing, practice failover to the disaster recovery site, especially as new BizTalk applications are put in production.</span></span>|<span data-ttu-id="0e7c0-198">請參閱[使用 BizTalk Server 記錄傳送災害復原](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-198">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
  
<a name="BKMK_Jobs"></a>   
## <a name="monitoring-biztalk-server-sql-agent-jobs"></a><span data-ttu-id="0e7c0-199">監控 BizTalk Server SQL Agent 工作</span><span class="sxs-lookup"><span data-stu-id="0e7c0-199">Monitoring BizTalk Server SQL Agent Jobs</span></span>  
  
|<span data-ttu-id="0e7c0-200">步驟</span><span class="sxs-lookup"><span data-stu-id="0e7c0-200">Steps</span></span>|<span data-ttu-id="0e7c0-201">參考</span><span class="sxs-lookup"><span data-stu-id="0e7c0-201">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="0e7c0-202">確認 SQL Server Agent 服務正在執行。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-202">Verify that the SQL Server Agent service is running.</span></span>|<span data-ttu-id="0e7c0-203">請參閱[監視 SQL Server Agent 作業](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-203">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="0e7c0-204">請確認 BizTalk Server 所安裝的 SQL Server Agent 作業已啟用且正在執行成功。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-204">Verify that the SQL Server Agent jobs installed by BizTalk Server are enabled and running successfully.</span></span>|<span data-ttu-id="0e7c0-205">請參閱[監視 SQL Server Agent 作業](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-205">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="0e7c0-206">請確認 BizTalk Server SQL 代理程式作業所及時完成。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-206">Verify that the BizTalk Server SQL Agent jobs are completing in a timely manner.</span></span>|<span data-ttu-id="0e7c0-207">請參閱[監視 SQL Server Agent 作業](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-207">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
  
<a name="BKMK_Purge"></a>   
## <a name="purging-and-archiving-tracking-data"></a><span data-ttu-id="0e7c0-208">清除和封存追蹤資料</span><span class="sxs-lookup"><span data-stu-id="0e7c0-208">Purging and Archiving Tracking Data</span></span>  
  
|<span data-ttu-id="0e7c0-209">步驟</span><span class="sxs-lookup"><span data-stu-id="0e7c0-209">Steps</span></span>|<span data-ttu-id="0e7c0-210">參考</span><span class="sxs-lookup"><span data-stu-id="0e7c0-210">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="0e7c0-211">請確認已正確設定、 啟用以及已成功完成的 SQL Agent 作業 「 DTA 清除與封存 」。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-211">Ensure that the SQL Agent job "DTA Purge and Archive" is properly configured, enabled, and successfully completing.</span></span>|<span data-ttu-id="0e7c0-212">請參閱[設定 DTA 的清除與封存工作](../core/how-to-configure-the-dta-purge-and-archive-job.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-212">See [Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span></span>|  
|<span data-ttu-id="0e7c0-213">請確保工作能夠以最快速度的內送的追蹤資料會產生清除追蹤資料。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-213">Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.</span></span>|<span data-ttu-id="0e7c0-214">請參閱[測量最大持續性追蹤輸送量](../core/measuring-maximum-sustainable-tracking-throughput.md)</span><span class="sxs-lookup"><span data-stu-id="0e7c0-214">See [Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md)</span></span>|  
|<span data-ttu-id="0e7c0-215">檢閱軟清除和硬清除參數，以確保您保持最佳的時間長度的資料。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-215">Review the soft purge and hard purge parameters to ensure you are keeping data for the optimal length of time.</span></span>|<span data-ttu-id="0e7c0-216">請參閱[封存和清除 BizTalk 追蹤資料庫](../core/archiving-and-purging-the-biztalk-tracking-database.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-216">See [Archiving and Purging the BizTalk Tracking Database](../core/archiving-and-purging-the-biztalk-tracking-database.md).</span></span>|  
|<span data-ttu-id="0e7c0-217">如果您只需要清除舊資料，而不需要封存第一次，變更的 SQL 代理程式作業來呼叫預存程序 」 dtasp_PurgeTrackingDatabase。 」</span><span class="sxs-lookup"><span data-stu-id="0e7c0-217">If you only need to purge the old data and do not need to archive it first, change the SQL Agent job to call the stored procedure "dtasp_PurgeTrackingDatabase."</span></span>|<span data-ttu-id="0e7c0-218">請參閱[從 BizTalk 追蹤資料庫清除資料](../core/how-to-purge-data-from-the-biztalk-tracking-database.md)。</span><span class="sxs-lookup"><span data-stu-id="0e7c0-218">See [Purge Data from the BizTalk Tracking Database](../core/how-to-purge-data-from-the-biztalk-tracking-database.md).</span></span>|  
  
## <a name="next"></a><span data-ttu-id="0e7c0-219">下一個</span><span class="sxs-lookup"><span data-stu-id="0e7c0-219">Next</span></span>
  
-   [<span data-ttu-id="0e7c0-220">不應該變更的 SQL Server 設定</span><span class="sxs-lookup"><span data-stu-id="0e7c0-220">SQL Server Settings That Should Not Be Changed</span></span>](sql-server-settings-that-should-not-be-changed.md)  
  
-   [<span data-ttu-id="0e7c0-221">監視與降低資料庫的 IO 競爭</span><span class="sxs-lookup"><span data-stu-id="0e7c0-221">Monitoring and Reducing Database IO Contention</span></span>](monitoring-and-reducing-database-i-o-contention.md)  
  
-   [<span data-ttu-id="0e7c0-222">檢閱及測試容錯移轉案例的 SQL Server 叢集設定</span><span class="sxs-lookup"><span data-stu-id="0e7c0-222">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)  
  
-   [<span data-ttu-id="0e7c0-223">定義資料庫的自動成長設定</span><span class="sxs-lookup"><span data-stu-id="0e7c0-223">Defining Auto-Growth Settings for Databases</span></span>](defining-auto-growth-settings-for-databases.md)  
  
-   [<span data-ttu-id="0e7c0-224">備份資料庫</span><span class="sxs-lookup"><span data-stu-id="0e7c0-224">Backing Up Databases</span></span>](backing-up-databases.md)  
  
-   [<span data-ttu-id="0e7c0-225">使用 BizTalk Server 記錄傳送進行災害復原</span><span class="sxs-lookup"><span data-stu-id="0e7c0-225">Using BizTalk Server Log Shipping for Disaster Recovery</span></span>](using-biztalk-server-log-shipping-for-disaster-recovery.md)  
  
-   [<span data-ttu-id="0e7c0-226">監視 SQL Server Agent 作業</span><span class="sxs-lookup"><span data-stu-id="0e7c0-226">Monitoring SQL Server Agent Jobs</span></span>](monitoring-sql-server-agent-jobs.md)  
  
-   [<span data-ttu-id="0e7c0-227">清除和封存追蹤資料</span><span class="sxs-lookup"><span data-stu-id="0e7c0-227">Purging and Archiving Tracking Data</span></span>](purging-and-archiving-tracking-data.md)