---
title: 檢查清單： 安裝和設定 HYPER-V 上的最佳做法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 5b5ddbb5-3752-4294-ae6a-c14363b3ddc9
caps.latest.revision: 18
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ca617e5bdec917f788fb9a611cad54a418761138
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36985751"
---
# <a name="checklist-best-practices-for-installing-and-configuring-biztalk-server-on-hyper-v"></a>檢查清單： 安裝和設定 BizTalk Server HYPER-V 上的最佳作法
下列各節所安裝的摘要和設定需求中所述[部署在 HYPER-V 上的 BizTalk Server](../technical-guides/deploying-biztalk-server-on-hyper-v.md)一節。 這些應該用於安裝、 設定和部署時，快速參考[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]在 HYPER-V 環境中。 如需詳細資訊，會提供相關章節的連結。  

## <a name="before-installing-hyper-v"></a>然後再安裝 Hyper V...  

|步驟|參考|  
|----------|---------------|  
|HYPER-V 是適用於 64 位元版本的 Windows Server 的伺服器角色。|請參閱[檢查清單： 安裝和設定 BizTalk Server HYPER-V 上的最佳作法](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md)|  
|請確定您的處理器支援硬體輔助虛擬化和資料執行防止 (DEP)，而且已啟用這些功能。 這需要與 Intel Virtualization Technology (Intel VT) 或 AMD 虛擬化 (AMD-V) 相容的處理器。|請參閱[安裝 HYPER-V 角色](https://docs.microsoft.com/windows-server/virtualization/hyper-v/get-started/install-the-hyper-v-role-on-windows-server)。|  
|使用 Windows Server Core Edition 為根分割。 這會將伺服器的額外負荷降到最低，並改善 HYPER-V 效能。|請參閱[安裝 Server Core](https://docs.microsoft.com/windows-server/get-started/getting-started-with-server-core)。|  
|在根磁碟分割上執行只有 HYPER-V 伺服器角色。|請參閱[效能微調之 HYPER-V 伺服器](https://docs.microsoft.com/windows-server/administration/performance-tuning/role/hyper-v-server/):<br />**專用的伺服器角色**<br />在根資料分割只能專用於虛擬化伺服器角色。 其他伺服器角色可能會影響虛擬化伺服器，的效能，特別是當它們耗用大量的 CPU、 記憶體或 I/O 頻寬。 最小化在根磁碟分割中的伺服器角色中還有其他好處，例如減少受攻擊面和更新的頻率。 系統管理員應該仔細考慮哪些軟體已安裝在根磁碟分割，因為某些軟體可能會影響虛擬化伺服器的整體效能。<br/><br/> 請參閱[HYPER-V 設定](https://docs.microsoft.com/windows-server/administration/performance-tuning/role/hyper-v-server/configuration)指導方針。|  

## <a name="when-creating-hyper-v-virtual-machines"></a>建立 HYPER-V 虛擬機器時...  

|步驟|參考|  
|----------|---------------|  
|使用固定的大小虛擬硬碟 (VHD)，提供更佳的效能相較於動態調整大小的 Vhd，作業系統磁碟機。|請參閱[HYPER-V 存放裝置 I/O 效能](https://docs.microsoft.com/windows-server/administration/performance-tuning/role/hyper-v-server/storage-io-performance)指導方針： <br />**固定大小的 VHD**<br />VHD 檔案建立時，會先配置空間的 VHD。 這種類型的 VHD 是較不容易片段，以減少 I/O 輸送量，當單一 I/O 分裂成數個 I/o。 因為讀取和寫入不需要查閱區塊的對應，它就會有三種 VHD 類型的最低的 CPU 額外負荷。|  
|使用較高的磁碟 I/O 活動的固定大小的虛擬硬碟 (VHD) 磁碟，並設定為使用 SCSI 控制站的資料磁碟區的磁碟。 對於跨越多個資料磁碟機的極大量的儲存體 I/O 工作負載，每個 VHD 應該附加至個別的綜合 SCSI 控制器以提升整體效能。 此外，每個 VHD 應該儲存在個別的實體磁碟上。|請參閱[HYPER-V 存放裝置 I/O 效能](https://docs.microsoft.com/windows-server/administration/performance-tuning/role/hyper-v-server/storage-io-performance)指導方針：<br />**綜合 SCSI 控制器**<br />綜合的儲存體控制器提供明顯較佳的效能降低的 CPU 額外負荷比模擬的 IDE 裝置使用的儲存體 I/o 上。 VM 整合服務包括此儲存體裝置的已啟用驅動程式，以及所需的客體作業系統，才能偵測到它。 作業系統磁碟必須裝載在 IDE 裝置上為正常，開機的作業系統，但 VM 整合服務載入 device-mapper 到綜合存放裝置的 IDE 裝置 I/o 的篩選器驅動程式。<br />我們強烈建議您掛接資料磁碟機直接至綜合 SCSI 控制器，因為該組態可降低 CPU 額外負荷。 如果其預期的 I/O 速率很高，您應該也裝載記錄檔和作業系統分頁檔直接綜合 SCSI 控制器。<br />對於跨越多個資料磁碟機的極大量的儲存體 I/O 工作負載，每個 VHD 應該附加至個別的綜合 SCSI 控制器以提升整體效能。 此外，每個 VHD 應該儲存在個別的實體磁碟上。|  
|將 VHD 磁碟高的 I/O 活動，例如，針對 SQL Server 資料和記錄檔中使用的 SCSI 控制器。 **注意：** 不要附加到 SCSI 控制器的系統磁碟。 包含作業系統的虛擬硬碟必須連接到 IDE 控制器。|即使 HYPER-V IDE 控制器與 SCSI 控制器提供相當的效能，如果已安裝 HYPER-V 整合服務僅會安裝的 SCSI 控制器。 因此，將連接傳遞磁碟的 SCSI 控制器使用會確定 HYPER-V 整合服務已安裝的接著將確保最佳的磁碟 I/O 效能。|  
|設定虛擬機器的網路時，請使用而不是傳統網路介面卡的網路介面卡。 傳統網路介面卡專為作業系統不支援整合元件。|**綜合網路介面卡**<br />綜合網路介面卡，所專用的 Vm 以達到大幅降低 CPU 額外負荷的 HYPER-V 功能比較模擬的網路介面卡，以模擬現有的硬體時，網路 I/O。 綜合網路介面卡通訊子系和根資料分割之間 over VMBus 更有效率的資料傳輸使用共用的記憶體。 模擬的網路介面卡應該透過 VM 的 [設定] 對話方塊來移除並取代的綜合網路介面卡。 客體會需要安裝 VM 整合服務。|  
|確定 integration services 安裝在任何已啟用的客體作業系統，並確認已安裝最新版的 integration services。 若要檢查最新版的 integration services，請執行**Windows Update**。|請參閱[HYPER-V 處理器效能](https://docs.microsoft.com/windows-server/administration/performance-tuning/role/hyper-v-server/processor-performance)指導方針：<br />**已啟用的來賓**<br />系統可能會建議您將 Windows Server，做為客體作業系統。 Enlightenment 減少 VM 中執行 Windows 的 CPU 額外負荷。 整合服務會提供其他 enlightenment i/o。 根據伺服器負載，它可以是適用於裝載伺服器應用程式，以提升效能的 Windows Server 客體程式碼。|  
|可能的話，設定虛擬處理器與可用的邏輯處理器的 1 對 1 配置。|如需設定虛擬處理器與可用的邏輯處理器的 1 對 1 配置的詳細資訊，請參閱中的 < 最佳化處理器效能 > 一節[檢查清單： 在 HYPER-V 上的 最佳化效能](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md)。|  
|轉換或移轉虛擬機器的 Microsoft Virtual PC、 Microsoft Virtual Server 或 HYPER-V 上執行的 VMWare ESX Server 上執行。|使用 System Center Virtual Machine Manager，來轉換或移轉虛擬機器在 HYPER-V 上執行。 <br />-如有需要，可以手動執行轉換 Microsoft Virtual PC 或 Microsoft Virtual Server 上執行的虛擬機器的程序。 如需詳細資訊，請參閱 <<c0> [ 虛擬機器移轉指南： 如何以從虛擬伺服器移轉到 HYPER-V](http://go.microsoft.com/fwlink/?LinkID=137258)。<br />-範例工具**VMC2Hyper V**也可用來移轉至 HYPER-V 執行 Microsoft Virtual PC 或 Microsoft Virtual Server 上的虛擬機器。 如需 VMC2Hyper V 範例工具的詳細資訊，請參閱[VMC to HYPER-V 匯入工具可以使用](http://go.microsoft.com/fwlink/?LinkID=135683)。 |  

## <a name="when-installing-and-configuring-biztalk-server"></a>安裝和設定 BizTalk Server 時...  
 安裝 BizTalk Server 在虛擬環境中，相同的作法應該採用實體環境中。 安裝時，並在設定 BizTalk Server 時，應該利用下列資源：  


|                                                                                                                                                                                                                                                                                                                                                   步驟                                                                                                                                                                                                                                                                                                                                                   |                                                                          參考                                                                           |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                                                                                                                                                     如需有關如何在客體作業系統上安裝 BizTalk Server 的指示，請參閱[BizTalk Server 安裝指南](../install-and-config-guides/biztalk-server-what-s-new-installation-configuration-and-upgrade.md)。                                                                                                                                                                                                                                     |                                                                                                                                                              |
|                                                                                                                                                                                                                                                               執行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]上完成安裝的 BizTalk Server 的 Best Practices Analyzer (BPA) 工具。                                                                                                                                                                                                                                                                |                                         下載[BPA](https://www.microsoft.com/download/details.aspx?id=43382)                                         |
|                                                                                                                                                                                     [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫裝載在 SQL Server 上。 SQL Server 執行個體上執行 Sql Server Best Practices Analyzer (BPA) 工具，然後再設定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫。                                                                                                                                                                                      |                                   下載[SQL Server BPA](https://www.microsoft.com/download/details.aspx?id=29302)                                    |
| Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作指南提供操作的整備檢查清單可用來確定已安裝所有必要的先決條件軟體。 提供的檢查清單[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]特定的組態資訊可供做為一部分所需的所有元件[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]包括作業系統、 IIS 和 SQL Server 的堆疊。 此外，有關如何設定 BizTalk Server 高可用性來提供指引。 |                               讀取 (.../technical-guides/BizTalk 作業 Guide](biztalk-server-2010-operations-guide.md)                               |
|                                                                                                                                                                                                                                                                                                                      將您的 BizTalk Server 安裝的效能最佳化。                                                                                                                                                                                                                                                                                                                       |         請參閱[BizTalk Server 效能最佳化指南](../technical-guides/biztalk-server-2010-performance-optimization-guide.md)指導方針          |
|                                                                                                                                                                                                                                                                                     安裝並執行 Bhm 狀況監控，來分析及驗證設定的 BizTalk Server MessageBox 資料庫。                                                                                                                                                                                                                                                                                      |                                           下載[BHM](https://www.microsoft.com/download/details.aspx?id=43716)                                           |
|                                                                                                                                                                                                                                                                                                        請確認 CPU 要適當地配置給在 HYPER-V 中執行的客體作業系統。                                                                                                                                                                                                                                                                                                        | 請參閱**測量處理器效能**在[檢查清單： 測量 HYPER-V 上的效能](../technical-guides/checklist-measuring-performance-on-hyper-v.md)。 |

