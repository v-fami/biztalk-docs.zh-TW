---
title: "一般指導方針來改善作業系統效能 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: bc9ca38e-1feb-4f34-a64b-d04566e85db9
caps.latest.revision: "11"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e2024217812544152e7c8a51b9db4a018046a3ca
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="general-guidelines-for-improving-operating-system-performance"></a><span data-ttu-id="28b93-102">一般指導方針來改善作業系統效能</span><span class="sxs-lookup"><span data-stu-id="28b93-102">General Guidelines for Improving Operating System Performance</span></span>
<span data-ttu-id="28b93-103">若要改善作業系統效能，應遵循下列指導方針：</span><span class="sxs-lookup"><span data-stu-id="28b93-103">The following general guidelines should be followed to improve operating system performance:</span></span>  
  
## <a name="install-the-latest-bios-storage-area-network-san-drivers-network-adapter-firmware-and-network-adapter-drivers"></a><span data-ttu-id="28b93-104">安裝最新的 BIOS、 存放區域網路 (SAN) 驅動程式、 網路介面卡的韌體和網路介面卡驅動程式</span><span class="sxs-lookup"><span data-stu-id="28b93-104">Install the latest BIOS, storage area network (SAN) drivers, network adapter firmware and network adapter drivers</span></span>  
 <span data-ttu-id="28b93-105">硬體製造商會定期發行 BIOS、 韌體與驅動程式可以改善效能和可用性的相關聯的硬體的更新。</span><span class="sxs-lookup"><span data-stu-id="28b93-105">Hardware manufacturers regularly release BIOS, firmware, and driver updates that can improve performance and availability for the associated hardware.</span></span> <span data-ttu-id="28b93-106">請造訪硬體製造商的網站下載並套用每一部 BizTalk Server 環境中的下列硬體元件的更新：</span><span class="sxs-lookup"><span data-stu-id="28b93-106">Visit the hardware manufacturer’s Web site to download and apply updates for the following hardware components on each computer in the BizTalk Server environment:</span></span>  
  
1.  <span data-ttu-id="28b93-107">BIOS 更新</span><span class="sxs-lookup"><span data-stu-id="28b93-107">BIOS updates</span></span>  
  
2.  <span data-ttu-id="28b93-108">SAN 驅動程式 （如果使用 SAN）</span><span class="sxs-lookup"><span data-stu-id="28b93-108">SAN drivers (if using a SAN)</span></span>  
  
3.  <span data-ttu-id="28b93-109">NIC 韌體</span><span class="sxs-lookup"><span data-stu-id="28b93-109">NIC firmware</span></span>  
  
4.  <span data-ttu-id="28b93-110">NIC 驅動程式</span><span class="sxs-lookup"><span data-stu-id="28b93-110">NIC drivers</span></span>  
  
## <a name="enable-the-high-performance-power-plan-on-all-biztalk-server-and-sql-server-computers"></a><span data-ttu-id="28b93-111">啟用 「 高效能 」 電源計劃在所有 BizTalk Server 和 SQL Server 的電腦上。</span><span class="sxs-lookup"><span data-stu-id="28b93-111">Enable the “High performance” Power Plan on all BizTalk Server and SQL Server computers.</span></span>  
 <span data-ttu-id="28b93-112">根據預設，Windows Server 2008/2008 R2 設定 「 平衡 」 （建議選項） 電源計劃，可讓在節省能源，但會造成增加的延遲時間 （慢回應時間對於某些工作），並且會導致效能問題與 CPU 運算密集應用程式。</span><span class="sxs-lookup"><span data-stu-id="28b93-112">By default, Windows Server 2008/2008 R2 sets the Balanced (recommended) power plan, which enables energy conservation, but can cause increased latency (slower response time for some tasks) and cause performance issues with CPU-intensive applications.</span></span>  
  
 <span data-ttu-id="28b93-113">為了減少延遲，您必須確認執行 BizTalk Server 的所有伺服器和 SQL Server 有 Windows**電源計劃**設**高效能**。</span><span class="sxs-lookup"><span data-stu-id="28b93-113">In order to reduce latency, you must ensure that all the servers that are running BizTalk Server and SQL Server have the Windows **Power plan** set to **High performance**.</span></span> <span data-ttu-id="28b93-114">如需有關如何切換至**高效能**電源計劃，請參閱知識庫文章： 2207548 [Windows Server 2008 R2 上的整體效能降低](http://go.microsoft.com/fwlink/?LinkID=219677)(http://go.microsoft.com/fwlink/?LinkID=219677)。</span><span class="sxs-lookup"><span data-stu-id="28b93-114">For more information about how to switch to the **High Performance**  power plan, see KB article: 2207548 [Degraded overall performance on Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=219677) (http://go.microsoft.com/fwlink/?LinkID=219677).</span></span>  
  
## <a name="evaluate-the-usage-of-intel-hyper-threading-on-biztalk-server-and-sql-server-computers"></a><span data-ttu-id="28b93-115">評估使用 Intel 超執行緒，BizTalk Server 和 SQL Server 的電腦上</span><span class="sxs-lookup"><span data-stu-id="28b93-115">Evaluate the usage of Intel Hyper-Threading on BizTalk Server and SQL Server computers</span></span>  
  
-   <span data-ttu-id="28b93-116">**Pre Nehalem 超執行緒**:</span><span class="sxs-lookup"><span data-stu-id="28b93-116">**Pre-Nehalem Hyper-Threading**:</span></span>  
  
    -   <span data-ttu-id="28b93-117">超執行緒對它應該關閉 BizTalk 伺服器的電腦。</span><span class="sxs-lookup"><span data-stu-id="28b93-117">Hyper-threading should be turned off on BizTalk Server computers.</span></span> <span data-ttu-id="28b93-118">這是電腦的 BIOS 設定，通常位於 BIOS 設定的處理器設定。</span><span class="sxs-lookup"><span data-stu-id="28b93-118">This is a BIOS setting, typically found in the Processor settings of the BIOS setup.</span></span> <span data-ttu-id="28b93-119">超執行緒會讓伺服器可能沒有更多的處理器/處理器核心比實際;不過，超執行緒處理器通常提供介於 20-30%的實體處理器/處理器核心的效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-119">Hyper-threading makes the server appear to have more processors/processor cores than it actually does; however, hyper-threaded processors typically provide between 20-30% of the performance of a physical processor/processor core.</span></span> <span data-ttu-id="28b93-120">當 BizTalk Server 會計算要調整其自我調整演算法的處理器數目時，超執行緒處理器，會導致這些調整會扭曲，這可能會導致負面的整體效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-120">When BizTalk Server counts the number of processors to adjust its self-tuning algorithms, the hyper-threaded processors cause these adjustments to be skewed, which can result in negative overall performance.</span></span>  
  
    -   <span data-ttu-id="28b93-121">超執行緒對它應該關閉 SQL Server 電腦因為可能會造成競爭的情況 （例如 BizTalk Server) 的高等級的應用程式可能在 SQL Server 電腦上的超執行緒環境中造成效能降低。</span><span class="sxs-lookup"><span data-stu-id="28b93-121">Hyper-threading should be turned off on SQL Server computers because applications that can cause high levels of contention (such as BizTalk Server) may cause decreased performance in a hyper-threaded environment on a SQL Server computer.</span></span>  
  
-   <span data-ttu-id="28b93-122">**Nehalem 超執行緒**： 不同於在較舊的架構，啟用超執行緒在 Intel 微架構 」 Nehalem"處理器可以提供最幾乎線性容量增加。</span><span class="sxs-lookup"><span data-stu-id="28b93-122">**Nehalem Hyper-Threading**: Unlike in older architectures, enabling hyper-threading in Intel microarchitecture “Nehalem” processors can provide up to an almost linear capacity increase.</span></span> <span data-ttu-id="28b93-123">為獲得最佳的效能結果，當您部署 「 Nehalem"處理器時，我們會建議您設定電腦的 BIOS，藉由啟用 Intel 超執行緒 (H T) 標示增加輸送量的技術。</span><span class="sxs-lookup"><span data-stu-id="28b93-123">For the best performance results, when you deploy “Nehalem” processors, we recommend that you configure the computer’s BIOS by enabling Intel Hyper-Threading (H-T) Technology for a marked increase in throughput.</span></span>  
  
-   <span data-ttu-id="28b93-124">**硬體虛擬化**： 當使用硬體虛擬化時，虛擬機器使用的虛擬處理器。</span><span class="sxs-lookup"><span data-stu-id="28b93-124">**Hardware Virtualization**: When using hardware virtualization, the virtual machine is using virtual processors.</span></span> <span data-ttu-id="28b93-125">可用的 Cpu 數目取決於設定虛擬機器時選擇的設定。</span><span class="sxs-lookup"><span data-stu-id="28b93-125">The number of CPUs available is based on the settings chosen when configuring the virtual machine.</span></span> <span data-ttu-id="28b93-126">如果硬體是超執行緒，虛擬機器可能不知道它是超執行緒。</span><span class="sxs-lookup"><span data-stu-id="28b93-126">If the hardware is hyper-threaded, the virtual machine wouldn't know it is hyper-threaded.</span></span>  
  
## <a name="assign-the-msdtc-log-file-directory-to-a-separate-dedicated-drive"></a><span data-ttu-id="28b93-127">將 MSDTC 記錄檔目錄指派給另一個專用的磁碟機</span><span class="sxs-lookup"><span data-stu-id="28b93-127">Assign the MSDTC log file directory to a separate dedicated drive</span></span>  
 <span data-ttu-id="28b93-128">在 BizTalk Server 環境中具有不同的 SQL Server 電腦上的多個 MessageBox 資料庫，造成相關聯的 Microsoft Distributed Transaction Coordinator (MSDTC) 的額外負擔。</span><span class="sxs-lookup"><span data-stu-id="28b93-128">In a BizTalk Server environment with multiple MessageBox databases on separate SQL Server computers, additional overhead associated with Microsoft Distributed Transaction Coordinator (MSDTC) is incurred.</span></span> <span data-ttu-id="28b93-129">根據預設，MSDTC 記錄檔位於 %systemdrive%\windows\system32\msdtc 目錄執行 DTC 服務的電腦。</span><span class="sxs-lookup"><span data-stu-id="28b93-129">By default the MSDTC log files are located in the %systemdrive%\windows\system32\msdtc directory of the computers running the DTC service.</span></span> <span data-ttu-id="28b93-130">若要減輕 DTC 記錄可能會成為效能瓶頸的可能性，請考慮將 MSDTC 記錄檔目錄移至快速的磁碟機。</span><span class="sxs-lookup"><span data-stu-id="28b93-130">To mitigate the possibility that DTC logging could become a performance bottleneck, consider moving the MSDTC log file directory to a fast disk drive.</span></span>  
  
 <span data-ttu-id="28b93-131">若要變更 MSDTC 記錄檔目錄，請參閱[設定 DTC 記錄](http://go.microsoft.com/fwlink/?LinkID=204107)(http://go.microsoft.com/fwlink/?LinkID=204107)。</span><span class="sxs-lookup"><span data-stu-id="28b93-131">To change the MSDTC log file directory, see [Configure DTC Logging](http://go.microsoft.com/fwlink/?LinkID=204107) (http://go.microsoft.com/fwlink/?LinkID=204107).</span></span>  
  
## <a name="configure-antivirus-software-to-avoid-real-time-scanning-of-biztalk-server-executables-and-file-drops"></a><span data-ttu-id="28b93-132">若要避免的 BizTalk Server 可執行檔的即時掃描的防毒軟體設定和檔案會卸除</span><span class="sxs-lookup"><span data-stu-id="28b93-132">Configure antivirus software to avoid real-time scanning of BizTalk Server executables and file drops</span></span>  
 <span data-ttu-id="28b93-133">防毒軟體的即時掃描的 BizTalk Server 可執行檔和任何資料夾或檔案共用受 BizTalk Server 接收位置 BizTalk Server 效能造成負面影響。</span><span class="sxs-lookup"><span data-stu-id="28b93-133">Antivirus software real-time scanning of BizTalk Server executable files and any folders or file shares monitored by BizTalk Server receive locations can negatively affect BizTalk Server performance.</span></span> <span data-ttu-id="28b93-134">如果 BizTalk Server 電腦上已安裝防毒軟體，停用即時掃描任何 BizTalk Server 所參考的非可執行檔的檔案類型的接收位置 （通常是。XML，但也可能是.csv 或.txt 等。)和防毒軟體設定為排除掃描的 BizTalk Server 可執行檔</span><span class="sxs-lookup"><span data-stu-id="28b93-134">If antivirus software is installed on the BizTalk Server computer, disable real-time scanning of non-executable file types referenced by any BizTalk Server receive locations (usually .XML, but can also be .csv, .txt, etc.) and configure antivirus software to exclude scanning of BizTalk Server executable files</span></span>  
  
## <a name="disable-intrusion-detection-network-scanning-between-computers-in-the-biztalk-server-environment"></a><span data-ttu-id="28b93-135">停用 BizTalk Server 環境中的電腦之間正在掃描的入侵偵測網路</span><span class="sxs-lookup"><span data-stu-id="28b93-135">Disable intrusion detection network scanning between computers in the BizTalk Server environment</span></span>  
 <span data-ttu-id="28b93-136">入侵偵測軟體可以變慢或甚至阻止在網路上的有效通訊。</span><span class="sxs-lookup"><span data-stu-id="28b93-136">Intrusion detection software can slow down or even prevent valid communications over the network.</span></span> <span data-ttu-id="28b93-137">如果安裝入侵偵測軟體時，停用 BizTalk Server 電腦與外部資料儲存機制 (SQL Server) 電腦之間的掃描或傳訊服務 （例如訊息佇列與 WebSphere MQSeries） 電腦的網路。</span><span class="sxs-lookup"><span data-stu-id="28b93-137">If intrusion detection software is installed, disable network scanning between BizTalk Server computers and external data repositories (SQL Server) computers or messaging services (such as Message Queuing and WebSphere MQSeries) computers.</span></span>  
  
## <a name="defragment-all-disks-in-the-biztalk-server-environment-on-a-regular-basis"></a><span data-ttu-id="28b93-138">重組以規則為基礎的 BizTalk Server 環境中的所有磁碟</span><span class="sxs-lookup"><span data-stu-id="28b93-138">Defragment all disks in the BizTalk Server environment on a regular basis</span></span>  
 <span data-ttu-id="28b93-139">BizTalk Server 環境中的過多的磁碟分散程度會產生負面影響效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-139">Excessive disk fragmentation in the BizTalk Server environment will negatively affect performance.</span></span> <span data-ttu-id="28b93-140">遵循下列步驟來重組 BizTalk Server 環境中的磁碟：</span><span class="sxs-lookup"><span data-stu-id="28b93-140">Follow these steps to defragment disks in the BizTalk Server environment:</span></span>  
  
1.  <span data-ttu-id="28b93-141">重組所有磁碟 (本機和 SAN/NAS) 上定期排程離峰時間磁碟重組。</span><span class="sxs-lookup"><span data-stu-id="28b93-141">Defragment all disks (local and SAN/NAS) on a regular basis by scheduling off-hours disk defragmentation.</span></span>  
  
2.  <span data-ttu-id="28b93-142">重組 Windows 分頁檔，並預先配置 BizTalk Server 環境中的每個磁碟的主檔案表格，以提高整體系統效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-142">Defragment the Windows PageFile and pre-allocate the Master File Tables of each disk in the BizTalk Server environment to boost overall system performance.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="28b93-143">若要預先配置主檔案表格，請參閱知識庫文章 961095， [「 主檔案表格的相關區域保留在 Windows Vista 和 Windows Server 2008"](http://go.microsoft.com/fwlink/?LinkID=204563) (http://go.microsoft.com/fwlink/?LinkID=204563)。</span><span class="sxs-lookup"><span data-stu-id="28b93-143">To pre-allocate the Master File Tables, see Knowledge Base article 961095, [“About the Master File Table zone reservation in Windows Vista and Windows Server 2008”](http://go.microsoft.com/fwlink/?LinkID=204563) (http://go.microsoft.com/fwlink/?LinkID=204563).</span></span>  
  
## <a name="if-antivirus-software-is-installed-on-the-sql-server-computer-disable-real-time-scanning-of-data-and-transaction-files"></a><span data-ttu-id="28b93-144">如果 SQL Server 電腦上已安裝防毒軟體，停用的資料和交易檔的即時掃描</span><span class="sxs-lookup"><span data-stu-id="28b93-144">If antivirus software is installed on the SQL Server computer, disable real-time scanning of data and transaction files</span></span>  
 <span data-ttu-id="28b93-145">SQL Server 資料和交易檔案 （.mdf、.ndf、.ldf 和.mdb） 的即時掃描，可以增加磁碟 I/O 競爭，並減少 SQL Server 效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-145">Real-time scanning of the SQL Server data and transaction files (.mdf, .ndf, .ldf, .mdb) can increase disk I/O contention and reduce SQL Server performance.</span></span> <span data-ttu-id="28b93-146">請注意，SQL Server 資料和交易檔的名稱可能會不同，BizTalk Server 環境之間。</span><span class="sxs-lookup"><span data-stu-id="28b93-146">Note that the names of the SQL Server data and transaction files may vary between BizTalk Server environments.</span></span> <span data-ttu-id="28b93-147">如需建立預設的 BizTalk Server 組態資料和交易檔的詳細資訊，請參閱[Databases2 最佳化檔案群組](../technical-guides/optimizing-filegroups-for-the-databases2.md)。</span><span class="sxs-lookup"><span data-stu-id="28b93-147">For more information about the data and transaction files created with a default BizTalk Server configuration, see [Optimizing Filegroups for the Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md).</span></span>  
  
## <a name="configure-msdtc-for-biztalk-server-and-sql-server"></a><span data-ttu-id="28b93-148">BizTalk Server 與 SQL Server 設定 MSDTC</span><span class="sxs-lookup"><span data-stu-id="28b93-148">Configure MSDTC for BizTalk Server and SQL Server</span></span>  
 <span data-ttu-id="28b93-149">若要簡化 SQL Server 與 BizTalk Server 之間的交易，您必須啟用 Microsoft Distributed Transaction Coordinator (MSDTC)。</span><span class="sxs-lookup"><span data-stu-id="28b93-149">To facilitate transactions between SQL Server and BizTalk Server, you must enable Microsoft Distributed Transaction Coordinator (MSDTC).</span></span>  
  
#### <a name="to-configure-distributed-transaction-coordinator-dtc"></a><span data-ttu-id="28b93-150">若要設定 Distributed Transaction Coordinator (DTC)</span><span class="sxs-lookup"><span data-stu-id="28b93-150">To configure Distributed Transaction Coordinator (DTC)</span></span>  
  
1.  <span data-ttu-id="28b93-151">按一下**啟動**，按一下**執行**，型別**dcomcnfg**，然後按一下**確定**開啟**元件服務**.</span><span class="sxs-lookup"><span data-stu-id="28b93-151">Click **Start**, click **Run**, type **dcomcnfg**, and then click **OK** to open **Component Services**.</span></span>  
  
2.  <span data-ttu-id="28b93-152">在主控台樹狀目錄中，依序展開 [元件服務]、[電腦]、[我的電腦]和 [分散式交易協調器]，然後按一下 [本機 DTC]。</span><span class="sxs-lookup"><span data-stu-id="28b93-152">In the console tree, expand **Component Services**, expand **Computers**, expand **My Computer**, expand **Distributed Transaction Coordinator**, and then click **Local DTC**.</span></span>  
  
3.  <span data-ttu-id="28b93-153">以滑鼠右鍵按一下**本機 DTC**，然後按一下 [**屬性**顯示**本機 DTC 內容**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="28b93-153">Right-click **Local DTC**, and then click **Properties** to display the **Local DTC Properties** dialog box.</span></span>  
  
4.  <span data-ttu-id="28b93-154">在**追蹤**索引標籤，下方**輸出選項**區段中，清除**追蹤輸出**方塊。</span><span class="sxs-lookup"><span data-stu-id="28b93-154">On the **Tracing** tab, under **Output Options** section, clear the **Trace Output** box.</span></span>  
  
5.  <span data-ttu-id="28b93-155">按一下**安全性** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="28b93-155">Click the **Security** tab.</span></span>  
  
6.  <span data-ttu-id="28b93-156">請確定下列四個選項中的每個已選取，並會清除所有其他：</span><span class="sxs-lookup"><span data-stu-id="28b93-156">Ensure that each of the following four options is selected, and all others are cleared:</span></span>  
  
    -   <span data-ttu-id="28b93-157">**網路 DTC 存取**</span><span class="sxs-lookup"><span data-stu-id="28b93-157">**Network DTC Access**</span></span>  
  
    -   <span data-ttu-id="28b93-158">**允許輸入**</span><span class="sxs-lookup"><span data-stu-id="28b93-158">**Allow Inbound**</span></span>  
  
    -   <span data-ttu-id="28b93-159">**允許輸出**</span><span class="sxs-lookup"><span data-stu-id="28b93-159">**Allow Outbound**</span></span>  
  
    -   <span data-ttu-id="28b93-160">**不需要驗證**</span><span class="sxs-lookup"><span data-stu-id="28b93-160">**No Authentication Required**</span></span>  
  
7.  <span data-ttu-id="28b93-161">按一下**確定**關閉**本機 DTC 內容** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="28b93-161">Click **OK** to close the **Local DTC Properties** dialog box.</span></span> <span data-ttu-id="28b93-162">如果提示您重新啟動 MSDTC 服務，請按一下**是**。</span><span class="sxs-lookup"><span data-stu-id="28b93-162">If prompted to restart the MSDTC service, click **Yes**.</span></span>  
  
8.  <span data-ttu-id="28b93-163">關閉 [元件服務]。</span><span class="sxs-lookup"><span data-stu-id="28b93-163">Close **Component Services**.</span></span>  
  
9. <span data-ttu-id="28b93-164">按一下**啟動**，指向 **系統管理工具**，然後按一下 **具有進階安全性的 Windows 防火牆**。</span><span class="sxs-lookup"><span data-stu-id="28b93-164">Click **Start**, point to **Administrative Tools**, and then click **Windows Firewall with Advanced Security**.</span></span>  
  
10. <span data-ttu-id="28b93-165">在 具有進階安全性的 Windows 防火牆，按一下 **輸入規則**。</span><span class="sxs-lookup"><span data-stu-id="28b93-165">In Windows Firewall with Advanced Security, click **Inbound Rules**.</span></span>  
  
11. <span data-ttu-id="28b93-166">在**輸入規則**] 窗格中，以滑鼠右鍵按一下**分散式交易協調器*** （適合的話），然後按一下 [**啟用規則**。</span><span class="sxs-lookup"><span data-stu-id="28b93-166">In the **Inbound Rules** pane, right-click **Distributed Transaction Coordinator*** (as appropriate), and then click **Enable Rule**.</span></span>  
  
12. <span data-ttu-id="28b93-167">在 具有進階安全性的 Windows 防火牆，按一下 **輸出規則**。</span><span class="sxs-lookup"><span data-stu-id="28b93-167">In Windows Firewall with Advanced Security, click **Outbound Rules**.</span></span>  
  
13. <span data-ttu-id="28b93-168">在**輸出規則**] 窗格中，以滑鼠右鍵按一下**分散式交易協調器*** （適合的話），然後按一下 [**啟用規則**。</span><span class="sxs-lookup"><span data-stu-id="28b93-168">In the **Outbound Rules** pane, right-click **Distributed Transaction Coordinator*** (as appropriate), and then click **Enable Rule**.</span></span>  
  
14. <span data-ttu-id="28b93-169">在**控制台**，連按兩下**系統管理工具**。</span><span class="sxs-lookup"><span data-stu-id="28b93-169">On the **Control Panel**, double-click **Administrative Tools**.</span></span>  
  
15. <span data-ttu-id="28b93-170">在右窗格中，按兩下**服務**。</span><span class="sxs-lookup"><span data-stu-id="28b93-170">In the right-hand pane, double-click **Services**.</span></span>  
  
16. <span data-ttu-id="28b93-171">在右窗格中**服務 （本機）**，以滑鼠右鍵按一下**COM + 系統應用程式**，按一下 **重新啟動**，並等待服務重新啟動。</span><span class="sxs-lookup"><span data-stu-id="28b93-171">In the right-hand pane of **Services (Local)**, right-click **COM+ System Application**, click **Restart**, and wait for the service to restart.</span></span>  
  
17. <span data-ttu-id="28b93-172">以滑鼠右鍵按一下**分散式交易協調器**服務，再重新啟動。</span><span class="sxs-lookup"><span data-stu-id="28b93-172">Right-click and restart the **Distributed Transaction Coordinator** service.</span></span>  
  
18. <span data-ttu-id="28b93-173">以滑鼠右鍵按一下 **SQL Server (MSSQLSERVER)** 服務，再重新啟動。</span><span class="sxs-lookup"><span data-stu-id="28b93-173">Right-click and restart the **SQL Server (MSSQLSERVER)** service.</span></span>  
  
19. <span data-ttu-id="28b93-174">關閉 [服務 (本機)]，然後關閉 [系統管理工具]。</span><span class="sxs-lookup"><span data-stu-id="28b93-174">Close **Services (Local)**, and then close **Administrative Tools**.</span></span>  
  
## <a name="configure-firewalls-for-biztalk-server"></a><span data-ttu-id="28b93-175">設定 BizTalk Server 的連線</span><span class="sxs-lookup"><span data-stu-id="28b93-175">Configure firewall(s) for BizTalk Server</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="28b93-176">這是步驟，只需要一個或多個防火牆是否在 BizTalk Server 環境中的位置。</span><span class="sxs-lookup"><span data-stu-id="28b93-176">This step is only required if one or more firewalls are in place in your BizTalk Server environment.</span></span>  
  
 <span data-ttu-id="28b93-177">檢閱下列資訊來設定 BizTalk Server 的連線：</span><span class="sxs-lookup"><span data-stu-id="28b93-177">Review the following information to configure firewall(s) for BizTalk Server:</span></span>  
  
-   <span data-ttu-id="28b93-178">[BizTalk Server 所需的連接埠](http://go.microsoft.com/fwlink/?LinkID=153238)(http://go.microsoft.com/fwlink/?LinkID=153238)。</span><span class="sxs-lookup"><span data-stu-id="28b93-178">[Required Ports for BizTalk Server](http://go.microsoft.com/fwlink/?LinkID=153238) (http://go.microsoft.com/fwlink/?LinkID=153238).</span></span>  
  
-   <span data-ttu-id="28b93-179">若要設定 RPC 動態連接埠配置以使用防火牆，請參閱知識庫文章 929851， [「 TCP/IP 的預設動態通訊埠範圍已變更在 Windows Vista 和 Windows Server 2008 」](http://go.microsoft.com/fwlink/?LinkID=204568) （超連結"http://go.microsoft.com/fwlink/ 嗎？LinkID = 204568"http://go.microsoft.com/fwlink/?LinkID = 204568)。</span><span class="sxs-lookup"><span data-stu-id="28b93-179">To configure RPC dynamic port allocation to work with firewalls, see Knowledge Base article 929851, ["The default dynamic port range for TCP/IP has changed in Windows Vista and in Windows Server 2008"](http://go.microsoft.com/fwlink/?LinkID=204568) ( HYPERLINK "http://go.microsoft.com/fwlink/?LinkID=204568" http://go.microsoft.com/fwlink/?LinkID=204568).</span></span> <span data-ttu-id="28b93-180">如需如何設定 Windows 防火牆來容納必要的連接埠資訊，請參閱[Windows 防火牆與 IPsec 原則部署逐步指南](http://go.microsoft.com/fwlink/?LinkID=204569)(http://go.microsoft.com/fwlink/?LinkID=204569)。</span><span class="sxs-lookup"><span data-stu-id="28b93-180">For information about how to configure Windows Firewall to accommodate the necessary ports, see [Windows Firewall and IPsec Policy Deployment Step-by-Step Guide](http://go.microsoft.com/fwlink/?LinkID=204569) (http://go.microsoft.com/fwlink/?LinkID=204569).</span></span>  
  
## <a name="install-appropriate-com-and-msdtc-hotfix-rollup-packages"></a><span data-ttu-id="28b93-181">安裝適當的 COM + 與 MSDTC hotfix 彙總套件</span><span class="sxs-lookup"><span data-stu-id="28b93-181">Install appropriate COM+ and MSDTC hotfix rollup packages</span></span>  
 <span data-ttu-id="28b93-182">檢閱要安裝適當的 COM + 與 MS DTC hotfix 彙總套件封裝的下列資訊：</span><span class="sxs-lookup"><span data-stu-id="28b93-182">Review the following information to install the appropriate COM+ and MS DTC hotfix rollup packages:</span></span>  
  
-   <span data-ttu-id="28b93-183">MS DTC hotfix，請參閱 Microsoft Knowledge Base article978476 [「 Windows Server 2008 R2 MS DTC Hotfix 彙總套件 1 中修正 MS DTC 問題 」](http://go.microsoft.com/fwlink/?LinkID=204109) (http://go.microsoft.com/fwlink/?LinkID=204109)。</span><span class="sxs-lookup"><span data-stu-id="28b93-183">The MS DTC hotfix can be found in Microsoft Knowledge Base article978476 ["The MS DTC issue that is fixed in Windows Server 2008 R2 MS DTC Hotfix Rollup Package 1"](http://go.microsoft.com/fwlink/?LinkID=204109) (http://go.microsoft.com/fwlink/?LinkID=204109).</span></span>  
  
-   <span data-ttu-id="28b93-184">可以藉由搜尋找到最新的 DTC hotfix 彙總套件知識庫文章[http://support.microsoft.com](http://go.microsoft.com/fwlink/?LinkID=96185) (http://go.microsoft.com/fwlink/?LinkID=96185) 一詞 （包括引號）：</span><span class="sxs-lookup"><span data-stu-id="28b93-184">The latest DTC hotfix rollup package KB article can be found by searching [http://support.microsoft.com](http://go.microsoft.com/fwlink/?LinkID=96185) (http://go.microsoft.com/fwlink/?LinkID=96185) for the phrase (including the quotes):</span></span>  
  
    ```  
    "MS DTC Hotfix Rollup Package"  
    ```  
  
     <span data-ttu-id="28b93-185">下列查詢會為您此搜尋。</span><span class="sxs-lookup"><span data-stu-id="28b93-185">The following query does this search for you.</span></span> <span data-ttu-id="28b93-186">選擇最新的密碼：</span><span class="sxs-lookup"><span data-stu-id="28b93-186">Choose the latest one:</span></span>   
    <span data-ttu-id="28b93-187">[http://support.microsoft.com/search/default.aspx?query= [MS + DTC + Hotfix + 彙總套件 + 封裝]](http://support.microsoft.com/search/default.aspx?query="MS+DTC+Hotfix+Rollup+Package")</span><span class="sxs-lookup"><span data-stu-id="28b93-187">[http://support.microsoft.com/search/default.aspx?query="MS+DTC+Hotfix+Rollup+Package"](http://support.microsoft.com/search/default.aspx?query="MS+DTC+Hotfix+Rollup+Package")</span></span>  
  
## <a name="use-the-interrupt-affinity-policy-tool-to-bind-network-adapter-interrupts-to-specific-processors-on-multiprocessor-computers"></a><span data-ttu-id="28b93-188">使用繫結至多處理器電腦上的特定處理器的網路介面卡插斷的中斷親合性原則工具</span><span class="sxs-lookup"><span data-stu-id="28b93-188">Use the Interrupt-Affinity Policy Tool to bind network adapter interrupts to specific processors on multiprocessor computers</span></span>  
 <span data-ttu-id="28b93-189">中斷親合性原則 (IntPolicy) 是一種工具，可讓您 [繫結]，或變更給定的裝置 （例如網路介面卡） 的 CPU 相似性的插斷的特定處理器或多處理器電腦上的處理器。</span><span class="sxs-lookup"><span data-stu-id="28b93-189">The Interrupt-Affinity Policy (IntPolicy) is a tool that allows you to “bind” or change the CPU affinity of the interrupts for a given device (such as a network adapter) to a specific processor or processors on a multiprocessor computer.</span></span> <span data-ttu-id="28b93-190">這個繫結也稱為資料分割。</span><span class="sxs-lookup"><span data-stu-id="28b93-190">This binding is also referred to as partitioning.</span></span> <span data-ttu-id="28b93-191">從特定網路介面卡插斷，以在多處理器電腦上的特定處理器的繫結會強制執行延遲程序呼叫 (Dpc) 和網路介面卡上指定之處理器的中斷服務常式 (Isr)。</span><span class="sxs-lookup"><span data-stu-id="28b93-191">The binding of interrupts from a specific network adapter to specific processors on a multiprocessor computer enforces running deferred procedure calls (DPCs) and interrupt service routines (ISRs) for the network adapter on the designated processors.</span></span> <span data-ttu-id="28b93-192">請注意，無法在單一處理器電腦上設定中斷親和性。</span><span class="sxs-lookup"><span data-stu-id="28b93-192">Note that interrupt affinity cannot be configured on single processor computers.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="28b93-193">DPC 被定義為佇列通常會在稍後執行的核心模式函式呼叫。</span><span class="sxs-lookup"><span data-stu-id="28b93-193">A DPC is defined as a queued call to a kernel-mode function that will usually be executed at a later time.</span></span> <span data-ttu-id="28b93-194">ISR 定義為常式，其目的是為了服務時就會產生插斷的裝置。</span><span class="sxs-lookup"><span data-stu-id="28b93-194">An ISR is defined as a routine whose purpose is to service a device when it generates an interrupt.</span></span> <span data-ttu-id="28b93-195">如需有關延遲程序呼叫和中斷服務常式的詳細資訊，請參閱[Windows Driver Kit 文件](http://go.microsoft.com/fwlink/?LinkId=84418)(http://go.microsoft.com/fwlink/?LinkId=84418)。</span><span class="sxs-lookup"><span data-stu-id="28b93-195">For more information about deferred procedure calls and interrupt service routines, see the [Windows Driver Kit documentation](http://go.microsoft.com/fwlink/?LinkId=84418) (http://go.microsoft.com/fwlink/?LinkId=84418).</span></span>  
  
 <span data-ttu-id="28b93-196">![插斷 &#45;親和性原則工具](../technical-guides/media/interrupt-affinitypolicytool.gif "插斷 AffinityPolicyTool")</span><span class="sxs-lookup"><span data-stu-id="28b93-196">![Interrupt&#45;Affinity Policy Tool](../technical-guides/media/interrupt-affinitypolicytool.gif "Interrupt-AffinityPolicyTool")</span></span>  
<span data-ttu-id="28b93-197">中斷親合性原則工具</span><span class="sxs-lookup"><span data-stu-id="28b93-197">Interrupt-Affinity Policy Tool</span></span>  
  
 <span data-ttu-id="28b93-198">在 Windows Server 2008 基礎多處理器電腦，是將裝置插斷指派給任何可用的處理器插斷控制器的預設行為。</span><span class="sxs-lookup"><span data-stu-id="28b93-198">On Windows Server 2008 based multiprocessor computers, the default behavior of the interrupt controller is to assign device interrupts to any available processor.</span></span> <span data-ttu-id="28b93-199">當網路連線和指定的網路介面卡的檔案伺服器工作階段會繫結/分割成一組特定的處理器上執行，而任何可用的處理器、 效能和延展性的相關聯的網路處理已獲得改善。</span><span class="sxs-lookup"><span data-stu-id="28b93-199">When network connections and file server sessions for a given network adapter are bound/partitioned to run on a specific set of processors, rather than any available processor, the performance and scalability of the associated network processing is improved.</span></span> <span data-ttu-id="28b93-200">大型 BizTalk Server 方案通常採用多處理器的 SQL Server 電腦有多個網路介面卡的插斷繫結可能會特別有幫助。</span><span class="sxs-lookup"><span data-stu-id="28b93-200">Large BizTalk Server solutions often employ the use of multi-processor SQL Server computers with multiple network adapters for which interrupt-binding may be particularly beneficial.</span></span>   
<span data-ttu-id="28b93-201">插斷繫結使用 IntPolicy 應該一律之前加以評估在測試環境中採用在生產環境中。</span><span class="sxs-lookup"><span data-stu-id="28b93-201">Interrupt-binding using IntPolicy should always be evaluated in a test environment before employing in a production environment.</span></span> <span data-ttu-id="28b93-202">硬體、 作業系統和應用程式組態的測試環境應該接近實際執行環境十分接近。</span><span class="sxs-lookup"><span data-stu-id="28b93-202">The hardware, operating system and application configuration of the test environment should approximate the production environment as closely as possible.</span></span> <span data-ttu-id="28b93-203">這可讓您測試各種排列的插斷繫結，並決定範圍的插斷繫結就是增加效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-203">This will allow you to test various permutations of interrupt-binding and determine the extent that interrupt-binding will increase performance.</span></span>  
 <span data-ttu-id="28b93-204">我們建議您停用超執行緒支援超執行緒與 Cpu 的電腦上設定 IntPolicy 之前。</span><span class="sxs-lookup"><span data-stu-id="28b93-204">We recommend that you disable hyper-threading before configuring IntPolicy on a computer with CPUs that supports hyper-threading.</span></span> <span data-ttu-id="28b93-205">這可確保插斷，會指派給實體處理器，而不是邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="28b93-205">This will ensure that interrupts are assigned to physical processors rather than logical processors.</span></span> <span data-ttu-id="28b93-206">指派的中斷親和性參考相同的實體處理器的邏輯處理器不會提高效能，甚至可能會降低系統效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-206">Assigning interrupt affinity to logical processors that refer to the same physical processor will not increase performance and could even degrade system performance.</span></span>    <span data-ttu-id="28b93-207">超連結"The"[中斷親合性原則工具](http://go.microsoft.com/fwlink/?LinkID=204111)(http://go.microsoft.com/fwlink/?LinkID=204111) 是可從 WHDC 網站下載。</span><span class="sxs-lookup"><span data-stu-id="28b93-207">HYPERLINK "The" The [Interrupt-Affinity Policy Tool](http://go.microsoft.com/fwlink/?LinkID=204111) (http://go.microsoft.com/fwlink/?LinkID=204111) is available for download from the WHDC website.</span></span>  
  
## <a name="use-the-ntfs-file-system-on-all-volumes"></a><span data-ttu-id="28b93-208">使用 NTFS 檔案系統上所有磁碟區</span><span class="sxs-lookup"><span data-stu-id="28b93-208">Use the NTFS file system on all volumes</span></span>  
 <span data-ttu-id="28b93-209">Windows Server 用來格式化磁碟機，包括 NTFS、 FAT 以及 FAT32 提供多個檔案系統類型。</span><span class="sxs-lookup"><span data-stu-id="28b93-209">Windows Server offers multiple file system types for formatting drives, including NTFS, FAT, and FAT32.</span></span> <span data-ttu-id="28b93-210">NTFS 應該永遠選擇伺服器的檔案系統。</span><span class="sxs-lookup"><span data-stu-id="28b93-210">NTFS should always be the file system of choice for servers.</span></span>  
<span data-ttu-id="28b93-211">NTFS FAT 及 FAT32 檔案系統上提供相當大的效能優點，應該只在 Windows 伺服器上使用。</span><span class="sxs-lookup"><span data-stu-id="28b93-211">NTFS offers considerable performance benefits over the FAT and FAT32 file systems and should be used exclusively on Windows servers.</span></span> <span data-ttu-id="28b93-212">此外，NTFS 會提供許多安全性、 延展性、 穩定性和可復原性的優點比 FAT 及 FAT32。</span><span class="sxs-lookup"><span data-stu-id="28b93-212">In addition, NTFS offers many security, scalability, stability and recoverability benefits over FAT and FAT32.</span></span>  
<span data-ttu-id="28b93-213">在舊版 Windows 中，FAT 及 FAT32 通常實作的較小的磁碟區 (假設\<500 MB)，所以通常較快，這種情況下。</span><span class="sxs-lookup"><span data-stu-id="28b93-213">Under previous versions of Windows, FAT and FAT32 were often implemented for smaller volumes (say \<500 MB) because they were often faster in such situations.</span></span> <span data-ttu-id="28b93-214">磁碟儲存體價格比較便宜今天和作業系統和應用程式推入至最多的磁碟機容量，也不太可能，這類小的磁碟區將使用中。</span><span class="sxs-lookup"><span data-stu-id="28b93-214">With disk storage relatively inexpensive today and operating systems and applications pushing drive capacity to a maximum, it is unlikely that such small volumes will be in use.</span></span> <span data-ttu-id="28b93-215">FAT32 規模較大的磁碟區上會比 FAT 更好，但仍不適當的檔案系統的 Windows 伺服器。</span><span class="sxs-lookup"><span data-stu-id="28b93-215">FAT32 scales better than FAT on larger volumes but is still not an appropriate file system for Windows servers.</span></span>  
<span data-ttu-id="28b93-216">FAT 及 FAT32 通常已實作在過去因為被視為更輕鬆地復原，可以使用磁碟區有問題發生時的原生 DOS 工具管理。</span><span class="sxs-lookup"><span data-stu-id="28b93-216">FAT and FAT32 have often been implemented in the past as they were seen as more easily recoverable and manageable with native DOS tools in the event of a problem with a volume.</span></span> <span data-ttu-id="28b93-217">現在，使用各種 NTFS 恢復能力工具整合到作業系統的原生，並且可做為可用的協力廠商公用程式，有不應再受到有效的引數，如未使用 NTFS 檔案系統。</span><span class="sxs-lookup"><span data-stu-id="28b93-217">Today, with the various NTFS recoverability tools built both natively into the operating system and available as third-party utilities available, there should no longer be a valid argument for not using NTFS for file systems.</span></span>  
  
## <a name="do-not-use-ntfs-file-compression"></a><span data-ttu-id="28b93-218">請勿使用 NTFS 檔案壓縮</span><span class="sxs-lookup"><span data-stu-id="28b93-218">Do not use NTFS file compression</span></span>  
 <span data-ttu-id="28b93-219">雖然使用 NTFS 檔案系統壓縮是簡單的方法，以減少在磁碟區上的空間，它不適用於企業的檔案伺服器。</span><span class="sxs-lookup"><span data-stu-id="28b93-219">Though using NTFS file system compression is an easy way to reduce space on volumes, it is not appropriate for enterprise file servers.</span></span> <span data-ttu-id="28b93-220">實作壓縮時，將不必要的額外負荷放置於磁碟的所有作業的 CPU，而且最好避免。</span><span class="sxs-lookup"><span data-stu-id="28b93-220">Implementing compression places an unnecessary overhead on the CPU for all disk operations and is best avoided.</span></span> <span data-ttu-id="28b93-221">思考如何新增其他磁碟的選項，接近行的儲存體或考慮認真考慮檔案系統壓縮之前，先保存資料。</span><span class="sxs-lookup"><span data-stu-id="28b93-221">Think about options for adding additional disks, near-line storage or consider archiving data before seriously considering file system compression.</span></span>  
  
## <a name="review-disk-controller-stripe-size-and-volume-allocation-units"></a><span data-ttu-id="28b93-222">檢閱磁碟控制器等量磁碟區大小和磁碟區的配置單位</span><span class="sxs-lookup"><span data-stu-id="28b93-222">Review disk controller stripe size and volume allocation units</span></span>  
 <span data-ttu-id="28b93-223">當設定磁碟機陣列和硬體磁碟機控制器內的邏輯磁碟機，並確認您符合控制器等量磁碟區大小與磁碟區將會格式化使用的配置單位大小。</span><span class="sxs-lookup"><span data-stu-id="28b93-223">When configuring drive arrays and logical drives within your hardware drive controller, ensure you match the controller stripe size with the allocation unit size that the volumes will be formatted with.</span></span> <span data-ttu-id="28b93-224">這將確保磁碟讀取和寫入是最佳的效能並提供較佳的整體伺服器效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-224">This will ensure disk read and write performance is optimal and offer better overall server performance.</span></span>  
<span data-ttu-id="28b93-225">設定較大的配置單位 （或叢集或區塊） 大小會導致效率越低，使用的磁碟空間，但也會提供更高磁碟 I/O 效能磁頭在每個讀取活動期間，可讀取更多資料。</span><span class="sxs-lookup"><span data-stu-id="28b93-225">Configuring larger allocation unit (or cluster or block) sizes will cause disk space to be used less efficiently, but will also provide higher disk I/O performance as the disk head can read in more data during each read activity.</span></span>  
<span data-ttu-id="28b93-226">若要判斷最佳的設定來設定控制器，並使用磁碟格式化，您應該判斷磁碟子系統的類似檔案系統特性的伺服器上的平均磁碟傳輸大小。</span><span class="sxs-lookup"><span data-stu-id="28b93-226">To determine the optimal setting to configure the controller and format the disks with, you should determine the average disk transfer size on the disk subsystem of a server with similar file system characteristics.</span></span> <span data-ttu-id="28b93-227">使用 [Windows 效能監視器] 工具來監視邏輯磁碟物件計數器的 avg.Disk Bytes/Read 和 avg.磁碟 Bytes/Write 經過一段正常的活動，以協助您判斷要使用的最佳值。</span><span class="sxs-lookup"><span data-stu-id="28b93-227">Use the Windows Performance Monitor tool to monitor the Logical Disk object counters of Avg. Disk Bytes/Read and Avg. Disk Bytes/Write over a period of normal activity to help determine the best value to use.</span></span>  
<span data-ttu-id="28b93-228">雖然較小的配置單位大小如果系統將用來存取許多小檔案或記錄可以保證，64 KB 配置單位大小可提供音效效能和在大部分情況下的 I/O 輸送量。</span><span class="sxs-lookup"><span data-stu-id="28b93-228">Although smaller allocation unit sizes may be warranted if the system will be accessing many small files or records, an allocation unit size of 64 KB delivers sound performance and I/O throughput under most circumstances.</span></span> <span data-ttu-id="28b93-229">當磁碟負載增加時改善效能與調整的配置單位大小可以特別註明。</span><span class="sxs-lookup"><span data-stu-id="28b93-229">Improvements in performance with tuned allocation unit sizes can be particularly noted when disk load increases.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="28b93-230">格式命令列工具或 [磁碟管理] 工具，才能格式化磁碟區時，指定配置單位大小大於 4096 個位元組 (4 KB)。</span><span class="sxs-lookup"><span data-stu-id="28b93-230">Either the FORMAT command line tool or the Disk Management tool is required to specify an allocation unit size larger than 4096 bytes (4 KB) when formatting volumes.</span></span> <span data-ttu-id="28b93-231">Windows 檔案總管 只能將會格式化到此臨界值。</span><span class="sxs-lookup"><span data-stu-id="28b93-231">Windows Explorer will only format up to this threshold.</span></span> <span data-ttu-id="28b93-232">CHKDSK 命令可以用來確認目前的配置單位大小的磁碟區，不過它必須掃描整個磁碟區之前所需的資訊會顯示 （每個配置單位中方式顯示做為位元組）。</span><span class="sxs-lookup"><span data-stu-id="28b93-232">The CHKDSK command can be used to confirm the current allocation unit size of a volume however it needs to scan the entire volume before the desired information is displayed (shown as Bytes in each allocation unit).</span></span>  
  
## <a name="monitor-drive-space-utilization"></a><span data-ttu-id="28b93-233">監視磁碟機空間使用量</span><span class="sxs-lookup"><span data-stu-id="28b93-233">Monitor drive space utilization</span></span>  
 <span data-ttu-id="28b93-234">較少的資料磁碟上有，它的運作速度。</span><span class="sxs-lookup"><span data-stu-id="28b93-234">The less data a disk has on it, the faster it will operate.</span></span> <span data-ttu-id="28b93-235">這是因為資料寫入磁碟緣接近也重組磁碟機可能的話，因為這是這個磁碟的速度最快微調，並且得到最佳效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-235">This is because on a well defragmented drive, data is written as close to the outer edge of the disk as possible, as this is where the disk spins the fastest and yields the best performance.</span></span>  
<span data-ttu-id="28b93-236">磁碟搜尋時間是通常很長的時間比讀取或寫入活動。</span><span class="sxs-lookup"><span data-stu-id="28b93-236">Disk seek time is normally considerably longer than read or write activities.</span></span> <span data-ttu-id="28b93-237">如先前所述，資料一開始會寫入磁碟的邊緣。</span><span class="sxs-lookup"><span data-stu-id="28b93-237">As noted above, data is initially written to the outside edge of a disk.</span></span> <span data-ttu-id="28b93-238">磁碟儲存體增加和可用空間的需求會降低，因為資料會更接近寫入至磁碟的中心。</span><span class="sxs-lookup"><span data-stu-id="28b93-238">As demand for disk storage increases and free space reduces, data is written closer to the center of the disk.</span></span> <span data-ttu-id="28b93-239">磁碟搜尋時間增加的前端移開邊緣，以尋找資料，並找到時，花較長的時間閱讀，阻礙磁碟 I/O 效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-239">Disk seek time is increased in locating the data as the head moves away from the edge, and when found, it takes longer to read, hindering disk I/O performance.</span></span>  
<span data-ttu-id="28b93-240">這表示監視磁碟空間使用量會是重要不只是容量的原因，但效能也。</span><span class="sxs-lookup"><span data-stu-id="28b93-240">This means that monitoring disk space utilization is important not just for capacity reasons but for performance also.</span></span>  
<span data-ttu-id="28b93-241">根據經驗法則，為工作朝保持磁碟可用空間介於 20%到 25%的總磁碟空間的目標。</span><span class="sxs-lookup"><span data-stu-id="28b93-241">As a rule of thumb, work towards a goal of keeping disk free space between 20% to 25% of total disk space.</span></span> <span data-ttu-id="28b93-242">如果可用磁碟空間低於這個臨界值，則磁碟 I/O 效能將受到負面的影響。</span><span class="sxs-lookup"><span data-stu-id="28b93-242">If free disk space drops below this threshold, then disk I/O performance will be negatively impacted.</span></span>  
  
## <a name="implement-a-strategy-to-avoid-disk-fragmentation"></a><span data-ttu-id="28b93-243">若要避免磁碟分散程度的策略實作</span><span class="sxs-lookup"><span data-stu-id="28b93-243">Implement a strategy to avoid disk fragmentation</span></span>  
 <span data-ttu-id="28b93-244">您在磁碟上，包括根磁碟機，以避免效能降低，定期執行重組工具 公用程式。</span><span class="sxs-lookup"><span data-stu-id="28b93-244">Run a defragmenter utility regularly on your disks, including the root drive, to prevent performance degradation.</span></span> <span data-ttu-id="28b93-245">執行這個忙碌的磁碟上的每週。</span><span class="sxs-lookup"><span data-stu-id="28b93-245">Do this weekly on busy disks.</span></span> <span data-ttu-id="28b93-246">磁碟重組工具會隨 Windows 一起安裝，並可以執行從排定的工作，以指定的間隔。</span><span class="sxs-lookup"><span data-stu-id="28b93-246">A disk defragmenter is installed with Windows and can be run from a Scheduled Task at specified intervals.</span></span>  
  
## <a name="optimize-windows-server-performance-for-background-services"></a><span data-ttu-id="28b93-247">將背景服務的 Windows Server 效能最佳化</span><span class="sxs-lookup"><span data-stu-id="28b93-247">Optimize Windows Server performance for background services</span></span>  
 <span data-ttu-id="28b93-248">BizTalk Server 處理序 (BTSNTSVC.exe) 會執行為背景服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-248">The BizTalk Server process (BTSNTSVC.exe) runs as a background service.</span></span>   
<span data-ttu-id="28b93-249">Windows Server 2008 會使用先佔式多工來排列優先順序就來參加 cpu 的處理序執行緒。</span><span class="sxs-lookup"><span data-stu-id="28b93-249">Windows Server 2008 uses preemptive multi-tasking to prioritize process threads that will be attended to by the CPU.</span></span> <span data-ttu-id="28b93-250">先佔式多工作是一種方法，會停止處理程序執行，並啟動另一個處理序時，作業系統會斟酌。</span><span class="sxs-lookup"><span data-stu-id="28b93-250">Preemptive multi-tasking is a methodology whereby the execution of a process is halted and another process is started, at the discretion of the operating system.</span></span> <span data-ttu-id="28b93-251">此配置會防止單一執行緒支配 CPU。</span><span class="sxs-lookup"><span data-stu-id="28b93-251">This scheme prevents a single thread from dominating the CPU.</span></span>  
<span data-ttu-id="28b93-252">切換執行到下一個處理序 CPU 稱為內容切換。</span><span class="sxs-lookup"><span data-stu-id="28b93-252">Switching the CPU from executing one process to the next is known as context-switching.</span></span> <span data-ttu-id="28b93-253">Windows 作業系統包含的設定，決定在 CPU 上執行，才能發生內容切換，並提供服務的下一個執行緒允許的個別執行緒的時間長度。</span><span class="sxs-lookup"><span data-stu-id="28b93-253">The Windows operating system includes a setting that determines how long individual threads are allowed to run on the CPU before a context-switch occurs and the next thread is serviced.</span></span> <span data-ttu-id="28b93-254">這段時間被指配量。</span><span class="sxs-lookup"><span data-stu-id="28b93-254">This amount of time is referred to as a quantum.</span></span> <span data-ttu-id="28b93-255">此設定可讓您選擇處理器配量的前景程式 」 與 「 背景服務之間共用的方式。</span><span class="sxs-lookup"><span data-stu-id="28b93-255">This setting lets you choose how processor quanta are shared between foreground programs and background services.</span></span> <span data-ttu-id="28b93-256">通常是伺服器不希望允許前景程式有更多的 CPU 時間比背景服務配置給它。</span><span class="sxs-lookup"><span data-stu-id="28b93-256">Typically for a server it is not desirable to allow a foreground program to have more CPU time allocated to it than background services.</span></span> <span data-ttu-id="28b93-257">也就是說，所有應用程式，以及他們在伺服器上執行的程序，應考量相等的 CPU 時間。</span><span class="sxs-lookup"><span data-stu-id="28b93-257">That is, all applications and their processes running on the server should be given equal consideration for CPU time.</span></span>  
 <span data-ttu-id="28b93-258">若要增加等 BizTalk 主控件執行個體的背景服務的效能，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="28b93-258">To increase performance for background service like BizTalk host instances, follow these steps:</span></span>  
  
1.  <span data-ttu-id="28b93-259">按一下**啟動**，按一下 **控制台**，然後按一下 **系統**。</span><span class="sxs-lookup"><span data-stu-id="28b93-259">Click **Start**, click **Control Panel**, and then click **System**.</span></span>  
  
2.  <span data-ttu-id="28b93-260">按一下**進階**索引標籤，然後再按一下**設定**下**效能**。</span><span class="sxs-lookup"><span data-stu-id="28b93-260">Click the **Advanced** tab, and then click **Settings** under **Performance**.</span></span>  
  
3.  <span data-ttu-id="28b93-261">按一下**進階**索引標籤上，按一下 **背景服務**，然後按一下 **確定**兩次。</span><span class="sxs-lookup"><span data-stu-id="28b93-261">Click the **Advanced** tab, click **Background services**, and then click **OK** twice.</span></span>  
  
## <a name="disable-non-essential-services"></a><span data-ttu-id="28b93-262">停用不必要的服務</span><span class="sxs-lookup"><span data-stu-id="28b93-262">Disable non-essential services</span></span>  
 <span data-ttu-id="28b93-263">Windows Server 2008 的預設安裝可讓數個 BizTalk Server 環境中可能不需要的服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-263">A default installation of Windows Server 2008 enables several services that may not be required in a BizTalk Server environment.</span></span> <span data-ttu-id="28b93-264">每個執行中的服務會耗用系統資源，因此不需要的服務應停用來改善整體效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-264">Each running service consumes system resources and so unnecessary services should be disabled to improve overall performance.</span></span>  
<span data-ttu-id="28b93-265">停用服務時請務必小心。</span><span class="sxs-lookup"><span data-stu-id="28b93-265">Care should be taken when disabling services.</span></span> <span data-ttu-id="28b93-266">仔細研究服務的目的之前停用服務，因為 Windows Server 需要的特定服務正在執行。</span><span class="sxs-lookup"><span data-stu-id="28b93-266">Thoroughly research the purpose of a service before disabling the service as Windows Server requires certain services are running.</span></span> <span data-ttu-id="28b93-267">如果已停用 Windows Server 2008 所需的服務，作業系統而變得無法運作甚至無法開機。</span><span class="sxs-lookup"><span data-stu-id="28b93-267">If services required by Windows Server 2008 are disabled, the operating system may become inoperable and possibly even unable to boot.</span></span>  
<span data-ttu-id="28b93-268">若要停用不需要專用的 BizTalk Server 的 Windows Server 2008 服務，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="28b93-268">To disable Windows Server 2008 services that are not required for a dedicated BizTalk Server, follow these steps:</span></span>  
  
1.  <span data-ttu-id="28b93-269">按一下**啟動**，指向 **系統管理工具**，然後按一下 **電腦管理**。</span><span class="sxs-lookup"><span data-stu-id="28b93-269">Click **Start**, point to **Administrative Tools**, and then click **Computer Management**.</span></span>  
  
2.  <span data-ttu-id="28b93-270">在下**電腦管理 （本機）**，依序展開**服務和應用程式**，然後按一下 **服務**。</span><span class="sxs-lookup"><span data-stu-id="28b93-270">Under **Computer Management (Local)**, expand **Services and Applications**, and then click **Services**.</span></span>  
    <span data-ttu-id="28b93-271">在**狀態**資料行中，執行每個服務會標示為 「 已啟動 」。</span><span class="sxs-lookup"><span data-stu-id="28b93-271">In the **Status** column, each service that is running is labeled "Started."</span></span> <span data-ttu-id="28b93-272">停止並停用任何不必要地，啟動的服務，例如下列服務不需要專用的 BizTalk 伺服器上：</span><span class="sxs-lookup"><span data-stu-id="28b93-272">Stop and disable any service that is started unnecessarily, for example, the following services are not required on a dedicated BizTalk Server:</span></span>  
  
    -   <span data-ttu-id="28b93-273">警訊器</span><span class="sxs-lookup"><span data-stu-id="28b93-273">Alerter</span></span>  
  
    -   <span data-ttu-id="28b93-274">剪貼簿</span><span class="sxs-lookup"><span data-stu-id="28b93-274">ClipBook</span></span>  
  
    -   <span data-ttu-id="28b93-275">DHCP 伺服器</span><span class="sxs-lookup"><span data-stu-id="28b93-275">DHCP Server</span></span>  
  
    -   <span data-ttu-id="28b93-276">傳真服務</span><span class="sxs-lookup"><span data-stu-id="28b93-276">Fax Service</span></span>  
  
    -   <span data-ttu-id="28b93-277">檔案複寫</span><span class="sxs-lookup"><span data-stu-id="28b93-277">File Replication</span></span>  
  
    -   <span data-ttu-id="28b93-278">紅外線監視器</span><span class="sxs-lookup"><span data-stu-id="28b93-278">Infrared Monitor</span></span>  
  
    -   <span data-ttu-id="28b93-279">網際網路連線共用</span><span class="sxs-lookup"><span data-stu-id="28b93-279">Internet Connection Sharing</span></span>  
  
    -   <span data-ttu-id="28b93-280">Messenger</span><span class="sxs-lookup"><span data-stu-id="28b93-280">Messenger</span></span>  
  
    -   <span data-ttu-id="28b93-281">NetMeeting 遠端桌面共用</span><span class="sxs-lookup"><span data-stu-id="28b93-281">NetMeeting Remote Desktop Sharing</span></span>  
  
    -   <span data-ttu-id="28b93-282">網路 DDE</span><span class="sxs-lookup"><span data-stu-id="28b93-282">Network DDE</span></span>  
  
    -   <span data-ttu-id="28b93-283">網路 DDE dsdm 」</span><span class="sxs-lookup"><span data-stu-id="28b93-283">Network DDE DSDM</span></span>  
  
    -   <span data-ttu-id="28b93-284">NWLink NetBIOS</span><span class="sxs-lookup"><span data-stu-id="28b93-284">NWLink NetBIOS</span></span>  
  
    -   <span data-ttu-id="28b93-285">NWLink IPX/預存程序</span><span class="sxs-lookup"><span data-stu-id="28b93-285">NWLink IPX/SP</span></span>  
  
    -   <span data-ttu-id="28b93-286">列印多工緩衝處理器</span><span class="sxs-lookup"><span data-stu-id="28b93-286">Print Spooler</span></span>  
  
    -   <span data-ttu-id="28b93-287">Telephony</span><span class="sxs-lookup"><span data-stu-id="28b93-287">Telephony</span></span>  
  
    -   <span data-ttu-id="28b93-288">Telnet</span><span class="sxs-lookup"><span data-stu-id="28b93-288">Telnet</span></span>  
  
    -   <span data-ttu-id="28b93-289">不斷電供應系統</span><span class="sxs-lookup"><span data-stu-id="28b93-289">Uninterruptible Power Supply</span></span>  
  
3.  <span data-ttu-id="28b93-290">請注意取決於您想要停用每個服務的服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-290">Note the services that depend on each service that you want to disable.</span></span> <span data-ttu-id="28b93-291">若要這樣做，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="28b93-291">To do this, follow these steps:</span></span>  
  
    1.  <span data-ttu-id="28b93-292">按兩下您想要停用的服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-292">Double-click the service you want to disable.</span></span>  
  
    2.  <span data-ttu-id="28b93-293">按一下**相依性** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="28b93-293">Click the **Dependencies** tab.</span></span>  
  
    3.  <span data-ttu-id="28b93-294">在**此服務相依於下列的系統元件**清單中，注意此服務依存於服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-294">In the **This service depends on the following system components** list, note the services this service depends on.</span></span>  
  
    4.  <span data-ttu-id="28b93-295">在**依存於此服務的下列系統元件**清單中，請注意，無法啟動不需要這項服務，然後按一下 服務**確定**。</span><span class="sxs-lookup"><span data-stu-id="28b93-295">In the **The following system components depend on this service** list, note the services that cannot start without this service, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="28b93-296">一次，停用您所選取每個服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-296">One at a time, disable each service you have selected.</span></span> <span data-ttu-id="28b93-297">若要這樣做，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="28b93-297">To do this, follow these steps:</span></span>  
  
    1.  <span data-ttu-id="28b93-298">以滑鼠右鍵按一下您想要停用，然後按一下 的服務**屬性**。</span><span class="sxs-lookup"><span data-stu-id="28b93-298">Right-click the service you want to disable, and then click **Properties**.</span></span>  
  
    2.  <span data-ttu-id="28b93-299">在**啟動類型**清單中，按一下**已停用**。</span><span class="sxs-lookup"><span data-stu-id="28b93-299">In the **Startup type** list, click **Disabled**.</span></span>  
  
    3.  <span data-ttu-id="28b93-300">如果您想要立即停止服務，按一下**停止**。</span><span class="sxs-lookup"><span data-stu-id="28b93-300">If you want to stop the service immediately, click **Stop**.</span></span>  
  
         <span data-ttu-id="28b93-301">如果**停止其他服務**對話方塊出現時，請注意其他相依服務，將也停止，然後按一下 **是**，然後按一下 **確定**。</span><span class="sxs-lookup"><span data-stu-id="28b93-301">If the **Stop Other Services** dialog box appears, note the other dependent services that will also stop, and then click **Yes**, and then click **OK**.</span></span>  
  
5.  <span data-ttu-id="28b93-302">重複步驟 4，以停用其他非必要的服務。</span><span class="sxs-lookup"><span data-stu-id="28b93-302">Repeat step 4 to disable the other nonessential services.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="28b93-303">停用每個服務，以確定您未停用的服務，您要繼續使用之後，請測試正常運作的伺服器。</span><span class="sxs-lookup"><span data-stu-id="28b93-303">Test the server for correct operation after you disable each service to make sure you did not disable a service you want to continue to use.</span></span>   
> <span data-ttu-id="28b93-304">如果伺服器是成員的 Windows Server 2008 的網域，這通常是 BizTalk Server，您必須有 TCP/IP helper 服務正確地套用到電腦上的 群組原則在系統上。</span><span class="sxs-lookup"><span data-stu-id="28b93-304">If the server is a member of a Windows Server 2008 domain, which BizTalk Servers often are, you must have the TCP/IP helper service on your system to correctly apply Group Policy to the computer.</span></span>   
> <span data-ttu-id="28b93-305">當您停用 DHCP 用戶端時，DHCP 用戶端就會停止 DNS 動態更新通訊協定登錄，且需手動加入此用戶端的 DNS 伺服器的 DNS 記錄。</span><span class="sxs-lookup"><span data-stu-id="28b93-305">When you disable the DHCP client, the DHCP client stops DNS dynamic update protocol registration and requires manual DNS records to be added for this client to the DNS server.</span></span>  
  
## <a name="manually-load-microsoft-certificate-revocation-lists"></a><span data-ttu-id="28b93-306">手動載入 Microsoft 憑證撤銷清單</span><span class="sxs-lookup"><span data-stu-id="28b93-306">Manually load Microsoft Certificate Revocation lists</span></span>  
 <span data-ttu-id="28b93-307">當啟動.NET 應用程式時，.NET Framework 會嘗試下載的憑證撤銷清單 (CRL) 的任何帶正負號的組件。</span><span class="sxs-lookup"><span data-stu-id="28b93-307">When starting a .NET application, the .NET Framework will attempt to download the Certificate Revocation list (CRL) for any signed assembly.</span></span> <span data-ttu-id="28b93-308">如果您的系統並沒有直接存取網際網路，或限制存取 Microsoft.com 網域，這可能會延遲啟動 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="28b93-308">If your system does not have direct access to the Internet, or is restricted from accessing the Microsoft.com domain, this may delay startup of BizTalk Server.</span></span> <span data-ttu-id="28b93-309">若要避免這種延遲應用程式啟動時，您可以使用下列步驟手動下載並安裝的程式碼簽署您的系統上的憑證撤銷清單。</span><span class="sxs-lookup"><span data-stu-id="28b93-309">To avoid this delay at application startup, you can use the following steps to manually download and install the code signing Certificate Revocation Lists on your system.</span></span>  
  
1.  <span data-ttu-id="28b93-310">下載最新 CRL 更新從[http://crl.microsoft.com/pki/crl/products/CodeSignPCA.crl](http://go.microsoft.com/fwlink/?LinkID=117794) (http://go.microsoft.com/fwlink/?LinkID = 117794) 和[http://crl.microsoft.com/pki/crl/products/CodeSignPCA2.crl](http://go.microsoft.com/fwlink/?LinkId=117795) (http://go.microsoft.com/fwlink/?LinkId = 117795)。</span><span class="sxs-lookup"><span data-stu-id="28b93-310">Download the latest CRL updates from [http://crl.microsoft.com/pki/crl/products/CodeSignPCA.crl](http://go.microsoft.com/fwlink/?LinkID=117794) (http://go.microsoft.com/fwlink/?LinkID=117794) and [http://crl.microsoft.com/pki/crl/products/CodeSignPCA2.crl](http://go.microsoft.com/fwlink/?LinkId=117795) (http://go.microsoft.com/fwlink/?LinkId=117795).</span></span>  
  
2.  <span data-ttu-id="28b93-311">將 CodeSignPCA.crl 和 CodeSignPCA2.crl 檔移到隔離的系統。</span><span class="sxs-lookup"><span data-stu-id="28b93-311">Move the CodeSignPCA.crl and CodeSignPCA2.crl files to the isolated system.</span></span>  
  
3.  <span data-ttu-id="28b93-312">從命令提示字元中，輸入下列命令以使用 certutil 公用程式以在步驟 1 中下載 CRL 更新本機憑證存放區：</span><span class="sxs-lookup"><span data-stu-id="28b93-312">From a command prompt, enter the following command to use the certutil utility to update the local certificate store with the CRL downloaded in step 1:</span></span>  
  
     <span data-ttu-id="28b93-313">certutil – addstore CA c:\CodeSignPCA.crl</span><span class="sxs-lookup"><span data-stu-id="28b93-313">certutil –addstore CA c:\CodeSignPCA.crl</span></span>  
  
 <span data-ttu-id="28b93-314">CRL 檔案會定期更新，因此您應該考慮將設定重複的下載工作，並安裝 CRL 會更新。</span><span class="sxs-lookup"><span data-stu-id="28b93-314">The CRL files are updated regularly, so you should consider setting a reoccurring task of downloading and installing the CRL updates.</span></span> <span data-ttu-id="28b93-315">檢視下次的更新、 按兩下.crl 檔案，然後檢視值**下一個更新**欄位。</span><span class="sxs-lookup"><span data-stu-id="28b93-315">To view the next update time, double-click the .crl file and view the value of the **Next Update** field.</span></span>  
  
## <a name="synchronize-time-on-all-servers"></a><span data-ttu-id="28b93-316">同步處理所有伺服器上的時間</span><span class="sxs-lookup"><span data-stu-id="28b93-316">Synchronize time on all servers</span></span>  
 <span data-ttu-id="28b93-317">多項作業涉及票證，回條和記錄依賴正在正確的本機系統時鐘。</span><span class="sxs-lookup"><span data-stu-id="28b93-317">Many operations involving tickets, receipts and logging rely on the local system clock being accurate.</span></span> <span data-ttu-id="28b93-318">這是特別在分散式環境中，系統之間的時間差異，可能會導致不同步的記錄檔或來為已過期，會拒絕的另一個系統所核發的票證或尚未生效。</span><span class="sxs-lookup"><span data-stu-id="28b93-318">This is especially true in a distributed environment, where time discrepancies between systems may cause logs to be out of sync or tickets issued by one system to be rejected by another as expired or not yet valid.</span></span>  
  
 <span data-ttu-id="28b93-319">如需有關設定伺服器自動同步處理時間的詳細資訊，請參閱[設定自動網域時間同步處理的用戶端電腦](http://go.microsoft.com/fwlink/?LinkId=99420)(http://go.microsoft.com/fwlink/?LinkId=99420)。</span><span class="sxs-lookup"><span data-stu-id="28b93-319">For more information on configuring a server to automatically synchronize time, see [Configure a client computer for automatic domain time synchronization](http://go.microsoft.com/fwlink/?LinkId=99420) (http://go.microsoft.com/fwlink/?LinkId=99420).</span></span>  
  
## <a name="configure-the-windows-pagefile-for-optimal-performance"></a><span data-ttu-id="28b93-320">設定 Windows 分頁檔，以獲得最佳效能</span><span class="sxs-lookup"><span data-stu-id="28b93-320">Configure the Windows PAGEFILE for optimal performance</span></span>  
 <span data-ttu-id="28b93-321">為了達到最佳效能，請遵循下列指導方針來設定 Windows 分頁檔 （分頁檔案）：</span><span class="sxs-lookup"><span data-stu-id="28b93-321">Follow these guidelines to configure the Windows PAGEFILE (paging file) for optimal performance:</span></span>  
  
1.  <span data-ttu-id="28b93-322">**將分頁檔移至不同的作業系統安裝以減少磁碟爭用並提高磁碟效能的實體磁碟機的實體磁區**-BizTalk Server 在電腦上，移動相關聯的效能改善分頁檔會有所不同的文件處理負載。</span><span class="sxs-lookup"><span data-stu-id="28b93-322">**Move the paging file to a physical volume separate from the physical drive that operating system is installed on to reduce disk contention and increase disk performance** -  On BizTalk Server computers, the performance gain associated with moving the paging file will vary depending on the document processing load.</span></span> <span data-ttu-id="28b93-323">SQL Server 電腦上，將分頁檔移到不同的磁碟區會被視為最佳作法是在所有情況下，由於 SQL Server 磁碟大量本質。</span><span class="sxs-lookup"><span data-stu-id="28b93-323">On SQL Server computers, moving the paging file to a separate volume is considered a best practice in all scenarios due to the disk intensive nature of SQL Server.</span></span>  
  
2.  <span data-ttu-id="28b93-324">**隔離到一或多個專用實體磁碟機設定為 RAID 0 （等量） 或 raid-1 （鏡像） 陣列，或在單一磁碟，而 RAID 沒有分頁檔**︰ 藉由使用專用的磁碟機陣列其中分頁檔。SYS 是整個磁碟區上唯一的檔案、 分頁檔將不會分散，這也會改善效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-324">**Isolate the paging file onto one or more dedicated physical drives that are configured as either RAID-0 (striping) or RAID-1 (mirroring) arrays, or on single disks without RAID** - By using a dedicated disk or drive array where PAGEFILE.SYS is the only file on the entire volume, the paging file will not become fragmented, which will also improve performance.</span></span> <span data-ttu-id="28b93-325">如同大部分的磁碟陣列，陣列的效能已獲得改善，為陣列中的實體磁碟數目會增加。</span><span class="sxs-lookup"><span data-stu-id="28b93-325">As with most disk-arrays, performance of the array is improved as the number of physical disks in the array is increased.</span></span> <span data-ttu-id="28b93-326">如果分頁檔分散在多個磁碟區上的磁碟陣列中的多個實體磁碟機之間，分頁檔大小應該在陣列中每個磁碟機上的相同大小。</span><span class="sxs-lookup"><span data-stu-id="28b93-326">If the paging file is distributed between multiple volumes on multiple physical drives in a disk array, the paging file size should be the same size on each drive in the array.</span></span> <span data-ttu-id="28b93-327">在設定的磁碟陣列時，也建議使用具有相同的容量和速度的實體磁碟機。</span><span class="sxs-lookup"><span data-stu-id="28b93-327">When configuring a disk array, it is also recommended to use physical drives that have the same capacity and speed.</span></span> <span data-ttu-id="28b93-328">請注意備援不通常需要分頁檔。</span><span class="sxs-lookup"><span data-stu-id="28b93-328">Note that redundancy is not normally required for the paging file.</span></span>  
  
3.  <span data-ttu-id="28b93-329">**未設定 RAID 5 陣列上的分頁檔**-不建議的 RAID 5 陣列上的分頁檔的組態，因為分頁檔案 」 活動的撰寫需要大量和 RAID 5 陣列，最好是讀取效能比寫入效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-329">**Do not configure the paging file on a RAID 5 array** - Configuration of the paging file on a RAID 5 array is not recommended because paging file activity is write intensive and RAID 5 arrays are better suited for read performance than write performance.</span></span>  
  
4.  <span data-ttu-id="28b93-330">**如果您沒有將分頁檔移至實體磁碟區，除了在安裝作業系統的資源，設定分頁檔，在相同的邏輯磁碟區做為作業系統**-設定分頁檔，位於搜尋時間即是相同的實體磁碟上的作業系統將會增加磁碟的另一個邏輯磁碟區，並降低系統效能，因為磁碟機磁碟讀寫頭將會持續移動之間的磁碟區，或者存取分頁檔，作業系統檔案、 應用程式檔案和資料檔案。</span><span class="sxs-lookup"><span data-stu-id="28b93-330">**If you do not have resources to move the paging file to a physical volume other than the operating system is installed on, configure the paging file to reside on the same logical volume as the operating system** - Configuring the paging file to reside on a another logical volume which is on the same physical disk as the operating system will increase disk seek time and reduce system performance as the disk drive platter heads will be continually moving between the volumes, alternately accessing the page file, operating system files, application files, and data files.</span></span> <span data-ttu-id="28b93-331">此外，作業系統通常會安裝在實體磁碟，通常是最接近的實體磁碟外緣的第一個資料分割，而且已最佳化磁碟，其中是磁碟速度，而相關聯的效能。</span><span class="sxs-lookup"><span data-stu-id="28b93-331">Also, the operating system is typically installed on the first partition of a physical disk, which is usually the closest to the outside edge of the physical disk and where disk speed is and associated performance are optimal for the disk.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="28b93-332">如果您沒有移除分頁檔從開機磁碟分割，Windows 無法建立損毀傾印檔案 （記憶體。DMP) 中，核心模式停止寫入偵錯資訊就會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="28b93-332">If you do remove the paging file from the boot partition, Windows cannot create a crash dump file (MEMORY.DMP) in which to write debugging information in the event that a kernel mode STOP error occurs.</span></span> <span data-ttu-id="28b93-333">如果您需要損毀傾印檔案，則您會不有任何選項，但若要將保留最少的分頁檔的實體記憶體 + 1 MB 的開機磁碟分割大小。</span><span class="sxs-lookup"><span data-stu-id="28b93-333">If you do require a crash dump file, then you will have no option but to leave a paging file of at least the size of physical memory + 1 MB on the boot partition.</span></span>  
  
5.  <span data-ttu-id="28b93-334">**手動設定分頁檔的大小**-手動設定分頁檔的大小通常提供較佳的效能比允許伺服器自動調整大小，或完全沒有分頁檔。</span><span class="sxs-lookup"><span data-stu-id="28b93-334">**Manually set the size of the paging file** – Manually setting the size of the paging file typically provides better performance than allowing the server to size it automatically or having no paging file at all.</span></span> <span data-ttu-id="28b93-335">微調最佳做法是將初始 （最小值） 和分頁檔的大小上限設定設定為相同的值。</span><span class="sxs-lookup"><span data-stu-id="28b93-335">Best-practice tuning is to set the initial (minimum) and maximum size settings for the paging file to the same value.</span></span> <span data-ttu-id="28b93-336">這可確保不處理資源遺失分頁檔可能會大量的動態調整大小。</span><span class="sxs-lookup"><span data-stu-id="28b93-336">This ensures that no processing resources are lost to the dynamic resizing of the paging file, which can be intensive.</span></span> <span data-ttu-id="28b93-337">假設系統上的記憶體資源已變得受限時，通常會發生此調整大小的活動，這是特別有用。</span><span class="sxs-lookup"><span data-stu-id="28b93-337">This is especially true given that this resizing activity typically occurs when the memory resources on the system are already becoming constrained.</span></span> <span data-ttu-id="28b93-338">搜尋時間值也請確定磁碟上的分頁區域是一個單一的連續區域，改善磁碟相同的最小值和最大的分頁檔大小的設定。</span><span class="sxs-lookup"><span data-stu-id="28b93-338">Setting the same minimum and maximum page file size values also ensure the paging area on a disk is one single, contiguous area, improving disk seek time.</span></span> <span data-ttu-id="28b93-339">Windows Server 2008 會自動建議分頁檔案大小總計等於 1.5 倍的已安裝的 RAM 數量。</span><span class="sxs-lookup"><span data-stu-id="28b93-339">Windows Server 2008 automatically recommends a total paging file size equal to 1.5 times the amount of installed RAM.</span></span> <span data-ttu-id="28b93-340">在伺服器上有足夠磁碟空間，結合的所有磁碟上的分頁檔都應該設定兩次以獲得最佳效能的實體記憶體的最大。</span><span class="sxs-lookup"><span data-stu-id="28b93-340">On servers with adequate disk space, the paging file on all disks combined should be configured up to twice the physical memory for optimal performance.</span></span>  
  
## <a name="remove-cpu-intensive-screen-savers"></a><span data-ttu-id="28b93-341">移除需要大量 CPU 的螢幕保護裝置</span><span class="sxs-lookup"><span data-stu-id="28b93-341">Remove CPU-intensive screen savers</span></span>  
 <span data-ttu-id="28b93-342">並使用重要的系統資源，在執行時的 CPU 運算密集已知 3D 或 OpenGL 螢幕保護裝置。</span><span class="sxs-lookup"><span data-stu-id="28b93-342">3D or OpenGL screen savers are known to be CPU-intensive and use important system resources when they are running.</span></span> <span data-ttu-id="28b93-343">建議您最好避免這些完全安裝在伺服器建置時，選擇，或如果已安裝加以移除。</span><span class="sxs-lookup"><span data-stu-id="28b93-343">It is best to avoid installing these altogether as an option at server-build time, or to remove them if they have been installed.</span></span> <span data-ttu-id="28b93-344">基本的 Windows Server 2008 」 或空白的螢幕保護裝置會使用需要大量 CPU 的螢幕保護裝置的最佳替代方案。</span><span class="sxs-lookup"><span data-stu-id="28b93-344">The basic “Windows Server 2008” or blank screen savers are an excellent alternative to using CPU-intensive screen savers.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="28b93-345">另請參閱</span><span class="sxs-lookup"><span data-stu-id="28b93-345">See Also</span></span>  
 [<span data-ttu-id="28b93-346">作業系統效能最佳化</span><span class="sxs-lookup"><span data-stu-id="28b93-346">Optimizing Operating System Performance</span></span>](../technical-guides/optimizing-operating-system-performance.md)