---
title: 設計階段建議 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ee3d183e-a6f3-47d0-90ac-99b12c064607
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a0f361734aa7539f12940212a339b582bb4f2641
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22239742"
---
# <a name="design-phase-recommendations"></a><span data-ttu-id="99a16-102">設計階段建議</span><span class="sxs-lookup"><span data-stu-id="99a16-102">Design Phase Recommendations</span></span>
<span data-ttu-id="99a16-103">設計階段的主要產物，是為了驗證系統功能和效能而提供的系統和測試案例設計規格。</span><span class="sxs-lookup"><span data-stu-id="99a16-103">The primary deliverables for the design phase are design specifications for both the system and the test cases for validating system functionality and performance.</span></span> <span data-ttu-id="99a16-104">調查功能及測試的可行性是設計程序常見的一部分，其中包含初始的開發以及一些概念証明實作的一些早期測試 (在驗證設計的情況下)，如以下章節所述。</span><span class="sxs-lookup"><span data-stu-id="99a16-104">Investigations of the feasibility of features and tests are a typical part of the design process, involving initial development and, in the case of validation design, some early testing of proof-of-concept implementations as discussed in this section below.</span></span>  
  
## <a name="acquire-detailed-throughput-and-latency-profiles"></a><span data-ttu-id="99a16-105">取得詳細的輸送量和延遲設定檔</span><span class="sxs-lookup"><span data-stu-id="99a16-105">Acquire Detailed Throughput and Latency Profiles</span></span>  
 <span data-ttu-id="99a16-106">在設計階段期間，以前一個專案階段效能發佈準則所依據的初始負載設定檔為基礎，建立詳細的輸送量和延遲設定檔。</span><span class="sxs-lookup"><span data-stu-id="99a16-106">Building on the initial load profiles on which the performance release criteria from the previous project phase were established, establish detailed throughput and latency profiles during the design phase.</span></span> <span data-ttu-id="99a16-107">如果可以，請從實際執行系統取得效能資料。</span><span class="sxs-lookup"><span data-stu-id="99a16-107">If available, acquire performance data from production systems.</span></span> <span data-ttu-id="99a16-108">使用實際執行資料可提供實際的效能設定檔，可根據此種設定檔在此階段設計測試案例。</span><span class="sxs-lookup"><span data-stu-id="99a16-108">Using production data will provide realistic performance profiles on which test cases can be designed during this phase.</span></span> <span data-ttu-id="99a16-109">如果沒有實際執行資料可用，則必須從預期的負載情況推斷實際的設定檔。</span><span class="sxs-lookup"><span data-stu-id="99a16-109">If production data is not available, then a realistic profile must be extrapolated from expected load.</span></span>  
  
 <span data-ttu-id="99a16-110">在設計階段所建立的效能測試案例，必須包含能在實際執行時精確模擬系統之預期支援情況的效能設定檔，這點非常重要。</span><span class="sxs-lookup"><span data-stu-id="99a16-110">It is critical that the performance test cases being created during the design phase include performance profiles that closely emulate what the system will be expected to support in production.</span></span> <span data-ttu-id="99a16-111">如需建立實際的持續性效能設定檔的詳細資訊，請參閱[何謂持續性效能？](../core/what-is-sustainable-performance.md)</span><span class="sxs-lookup"><span data-stu-id="99a16-111">For more information about creating realistic and sustainable performance profiles, see [What Is Sustainable Performance?](../core/what-is-sustainable-performance.md)</span></span>  
  
## <a name="investigate-performance-risk-mitigations"></a><span data-ttu-id="99a16-112">調查效能風險防護</span><span class="sxs-lookup"><span data-stu-id="99a16-112">Investigate Performance Risk Mitigations</span></span>  
 <span data-ttu-id="99a16-113">在需求階段期間，會辨識達到所要效能目標的風險，並指出可能的防護方法。</span><span class="sxs-lookup"><span data-stu-id="99a16-113">During the requirements phase, risks to achieving the desired performance goals were identified and possible mitigations identified.</span></span>  <span data-ttu-id="99a16-114">應該儘早在設計階段中調查風險及防護方法，如此在必要時才有時間變更設計。</span><span class="sxs-lookup"><span data-stu-id="99a16-114">The risks and mitigations should be investigated as early in the design phase as possible in order to allow time to change the design if needed.</span></span> <span data-ttu-id="99a16-115">每項辨識出的風險，都應該先藉由概念証明 (POC) 測試證明確有問題，然後再測試防護方法來評估其功效。</span><span class="sxs-lookup"><span data-stu-id="99a16-115">Each identified risk should first be proven to be an issue using proof of concept (POC) testing and then mitigations should be tested to evaluate efficacy.</span></span>  
  
 <span data-ttu-id="99a16-116">例如，假設舊版系統是使用 FTP 與其他系統通訊。</span><span class="sxs-lookup"><span data-stu-id="99a16-116">For example, assume that a legacy system uses FTP to communicate with other systems.</span></span> <span data-ttu-id="99a16-117">不過，以舊版 FTP 伺服器搭配 BizTalk Server FTP 配接器所能達到的輸送量層級來看，想要的輸送量 (在需求階段期間建立為發行準則) 很明顯是無法達成的。</span><span class="sxs-lookup"><span data-stu-id="99a16-117">However, looking at the level of throughput that the legacy FTP server can achieve in combination with the BizTalk Server FTP adapter, it is clear that the desired throughput (established as release criteria during the requirements phase) will not be achievable.</span></span> <span data-ttu-id="99a16-118">若要緩解專案的風險，必須在需求階段期間確認下列方法：</span><span class="sxs-lookup"><span data-stu-id="99a16-118">To mitigate the risk to the project, the following alternatives are identified during the requirements phase:</span></span>  
  
-   <span data-ttu-id="99a16-119">向上或向外延展 FTP 伺服器，並建立多個邏輯 FTP 位址，專供特定的訊息類型擴充負載。</span><span class="sxs-lookup"><span data-stu-id="99a16-119">Scale up or out the FTP server and create multiple logical FTP addresses dedicated to specific message types to spread the load</span></span>  
  
-   <span data-ttu-id="99a16-120">修改舊版系統，以在單一檔案中傳送許多訊息，以每個訊息傳輸的額外負荷降低批次</span><span class="sxs-lookup"><span data-stu-id="99a16-120">Modify the legacy system to deliver many messages in a single file as a batch to reduce the per-message transfer overhead</span></span>  
  
-   <span data-ttu-id="99a16-121">修改舊版系統，以使用傳送速度比 FTP 快的其他通訊協定 (例如 MSMQ)。</span><span class="sxs-lookup"><span data-stu-id="99a16-121">Modify the legacy system to use an alternative protocol that is known to be faster than FTP such as MSMQ</span></span>  
  
 <span data-ttu-id="99a16-122">在此範例中需要完成的第一項調查，是測試目前的 FTP 系統效能，證明有風險存在。</span><span class="sxs-lookup"><span data-stu-id="99a16-122">The first investigation that needs to be done in this example is to prove that the risk exists by testing the current FTP system performance.</span></span> <span data-ttu-id="99a16-123">首先會建立及部署只會從 FTP 伺服器接收訊息的簡單的概念証明方案，然後對其套用 FTP 路徑所預期的實際執行負載設定檔。</span><span class="sxs-lookup"><span data-stu-id="99a16-123">A simple proof of concept solution that just receives messages from the FTP server would be built and deployed and the production load profile expected for the FTP pathway applied to it.</span></span> <span data-ttu-id="99a16-124">如果伺服器可以維持所需的負載，則不會構成風險，也不需要進行更多調查。</span><span class="sxs-lookup"><span data-stu-id="99a16-124">If the server is capable of sustaining the desired load, then the risk is not realized and further investigation is not needed.</span></span> <span data-ttu-id="99a16-125">如果不能維持所需的負載，則應該透過概念証明調查，來調查最可能解決這個問題、成本最低，專案風險又最少的方案。</span><span class="sxs-lookup"><span data-stu-id="99a16-125">If it is not able to sustain the desired load, then the alternative that is most likely to address the issue with the least amount of cost and project risk should be investigated via a proof of concept investigation.</span></span>  
  
## <a name="refine-system-size-estimate"></a><span data-ttu-id="99a16-126">調整系統大小估計</span><span class="sxs-lookup"><span data-stu-id="99a16-126">Refine System Size Estimate</span></span>  
 <span data-ttu-id="99a16-127">在設計階段期間所進行的調查，可提供有關系統效能功能的寶貴經驗資訊。</span><span class="sxs-lookup"><span data-stu-id="99a16-127">Investigations conducted during the design phase provide valuable empirical information regarding the performance capabilities of your system.</span></span>  
  
 <span data-ttu-id="99a16-128">例如，讓我們繼續上述的範例，此範例中的 FTP 效能過低。</span><span class="sxs-lookup"><span data-stu-id="99a16-128">For example, let's continue the example above where the performance of FTP is found to be too low.</span></span> <span data-ttu-id="99a16-129">因為環境中已經包含使用 MSMQ 做為傳訊傳輸的系統，所以決定要將舊版系統修改為同樣使用 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="99a16-129">Because the environment already includes systems that use MSMQ as a messaging transport, it was decided to modify the legacy system to use MSMQ as well.</span></span> <span data-ttu-id="99a16-130">不過，對運用 MSMQ 的新 POC 進行效能測試時，觀察到其中安裝 MessageBox 資料庫的 SQL 伺服器 CPU 幾乎經常達到 100% 的使用率，而您無法在 MSMQ 路徑上達到預期的輸送量。</span><span class="sxs-lookup"><span data-stu-id="99a16-130">However, during the performance testing of a new POC that employs MSMQ, it was observed that the CPU on the SQL server on which the MessageBox database lives almost constantly at 100% utilization and you are not able to achieve the expected throughput on the MSMQ pathway.</span></span>  
  
 <span data-ttu-id="99a16-131">假設 SQL Server 組態已針對應用程式進行最佳化，則 SQL Server 硬體的大小對於所需的輸送量而言明顯不足，需要重新調整系統的大小。</span><span class="sxs-lookup"><span data-stu-id="99a16-131">Assuming the SQL Server configuration is optimal for the application, the SQL Server hardware is clearly undersized for the desired throughput and the system size needs to be refined.</span></span> <span data-ttu-id="99a16-132">在這種狀況下，SQL Server 硬體需要新增 CPU、更換更快的 CPU，或兩者皆需要。</span><span class="sxs-lookup"><span data-stu-id="99a16-132">In this case, the SQL Server hardware needs either additional CPUs, faster CPUs, or both.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="99a16-133">另請參閱</span><span class="sxs-lookup"><span data-stu-id="99a16-133">See Also</span></span>  
 <span data-ttu-id="99a16-134">[依階段的專案規劃建議](../core/project-planning-recommendations-by-phase.md) </span><span class="sxs-lookup"><span data-stu-id="99a16-134">[Project Planning Recommendations by Phase](../core/project-planning-recommendations-by-phase.md) </span></span>  
 <span data-ttu-id="99a16-135">[需求階段建議](../core/requirements-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="99a16-135">[Requirements Phase Recommendations](../core/requirements-phase-recommendations.md) </span></span>  
 <span data-ttu-id="99a16-136">[實作階段建議](../core/implementation-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="99a16-136">[Implementation Phase Recommendations](../core/implementation-phase-recommendations.md) </span></span>  
 <span data-ttu-id="99a16-137">[驗證階段建議](../core/verification-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="99a16-137">[Verification Phase Recommendations](../core/verification-phase-recommendations.md) </span></span>  
 [<span data-ttu-id="99a16-138">發行階段建議</span><span class="sxs-lookup"><span data-stu-id="99a16-138">Release Phase Recommendations</span></span>](../core/release-phase-recommendations.md)