---
title: "監視與 BAM 商務程序管理解決方案 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- process management solution tutorial, monitoring
- monitoring, process management solutions
ms.assetid: 7c5fde9d-6eef-41c9-979c-ac7e5a172812
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 26a8b795b90b75518f6c1ec21a6ca6d8f0f0d6a0
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="monitoring-the-business-process-management-solution-with-bam"></a><span data-ttu-id="d624e-102">使用 BAM 監控商務程序管理解決方案</span><span class="sxs-lookup"><span data-stu-id="d624e-102">Monitoring the Business Process Management Solution with BAM</span></span>
<span data-ttu-id="d624e-103">解決方案可使用「商務活動監控」(BAM) API 監控處理訂單的步驟。</span><span class="sxs-lookup"><span data-stu-id="d624e-103">The solution monitors the steps in processing orders using the Business Activity Monitoring (BAM) API.</span></span> <span data-ttu-id="d624e-104">商務程序的設計會分割多個階段中的活動。</span><span class="sxs-lookup"><span data-stu-id="d624e-104">The design of the business process splits activities among multiple stages.</span></span> <span data-ttu-id="d624e-105">整個活動可以重新組合，以建立連續的程序。</span><span class="sxs-lookup"><span data-stu-id="d624e-105">Through, the activities can be re-combined to create a sense of a continuous process.</span></span> <span data-ttu-id="d624e-106">BAM 也提供彙總資料，讓您知道不同的後端系統需要花費多少時間、已完成的訂單數和其他類似資料。</span><span class="sxs-lookup"><span data-stu-id="d624e-106">BAM also provides aggregate data so that you can know how long different back-ends are taking, how many orders have been completed, and other similar information.</span></span>  
  
 <span data-ttu-id="d624e-107">如同服務導向解決方案中，使用新**OrchestrationEventStream**物件。</span><span class="sxs-lookup"><span data-stu-id="d624e-107">Like the service-oriented solution, it uses the new **OrchestrationEventStream** object.</span></span> <span data-ttu-id="d624e-108">如需討論**OrchestrationEventStream**物件，請參閱中的 「 什麼是 OrchestrationEventStream 物件 >[監控服務導向解決方案使用 BAM](../core/monitoring-the-service-oriented-solution-with-bam.md)。</span><span class="sxs-lookup"><span data-stu-id="d624e-108">For a discussion of the **OrchestrationEventStream** object, see "What Is the OrchestrationEventStream Object" in [Monitoring the Service Oriented Solution with BAM](../core/monitoring-the-service-oriented-solution-with-bam.md).</span></span>  
  
 <span data-ttu-id="d624e-109">如需 BAM 的一般資訊，請參閱[使用商務活動監控](../core/using-business-activity-monitoring.md)。</span><span class="sxs-lookup"><span data-stu-id="d624e-109">For general information about BAM, see [Using Business Activity Monitoring](../core/using-business-activity-monitoring.md).</span></span> <span data-ttu-id="d624e-110">如需追蹤設定檔編輯器 (TPE) 的相關資訊，請參閱[追蹤設定檔編輯器](../core/tracking-profile-editor.md)。</span><span class="sxs-lookup"><span data-stu-id="d624e-110">For information about the Tracking Profile Editor (TPE), see [Tracking Profile Editor](../core/tracking-profile-editor.md).</span></span>  
  
## <a name="wrapping-the-orchestrationeventstream-object"></a><span data-ttu-id="d624e-111">包裝 OrchestrationEventStream 物件</span><span class="sxs-lookup"><span data-stu-id="d624e-111">Wrapping the OrchestrationEventStream Object</span></span>  
 <span data-ttu-id="d624e-112">如同服務導向解決方案，商務程序管理解決方案會包裝**OrchestrationEventStream**物件。</span><span class="sxs-lookup"><span data-stu-id="d624e-112">Like the service-oriented solution, the business process management solution wraps the **OrchestrationEventStream** object.</span></span> <span data-ttu-id="d624e-113">而且和服務導向解決方案一樣，所有方法均為靜態，如此協調流程不需要建立物件的執行個體便能使用方法。</span><span class="sxs-lookup"><span data-stu-id="d624e-113">And, like the service-oriented solution, all of the methods are static so that the orchestrations do not need to create instances of objects in order to use the methods.</span></span> <span data-ttu-id="d624e-114">這也代表若引擎凍結協調流程，並不需要序列化用於追蹤的物件，也不需要儲存物件 (不需要為可序列化)。</span><span class="sxs-lookup"><span data-stu-id="d624e-114">This also means that the objects used in tracking do not have to be serialized and will not need to be saved (do not need to be serializable) if the engine dehydrates an orchestration.</span></span> <span data-ttu-id="d624e-115">商務程序管理解決方案，不過，包裝**OrchestrationEventStream**全都衍生自單一的數個物件，與抽象物件。</span><span class="sxs-lookup"><span data-stu-id="d624e-115">The business process management solution, however, wraps **OrchestrationEventStream** with several objects all derived from a single, abstract object.</span></span>  
  
 <span data-ttu-id="d624e-116">抽象類別是**BasicActivity**。</span><span class="sxs-lookup"><span data-stu-id="d624e-116">The abstract class is **BasicActivity**.</span></span> <span data-ttu-id="d624e-117">雖然為抽象類別，但此類別實際上並未當作衍生類別的範本使用。</span><span class="sxs-lookup"><span data-stu-id="d624e-117">Although it is abstract, the class does not really serve as a template for derived classes.</span></span> <span data-ttu-id="d624e-118">而是透過它的靜態方法提供一組可用的方法，不以衍生類別為限。</span><span class="sxs-lookup"><span data-stu-id="d624e-118">Rather, through its static methods, it provides a set of methods available without qualification in a derived class.</span></span> <span data-ttu-id="d624e-119">實際上，這可讓您實作四種預設方法。</span><span class="sxs-lookup"><span data-stu-id="d624e-119">This, in effect, gives you four default implementations of the methods.</span></span> <span data-ttu-id="d624e-120">四個靜態方法是： **CreateActivityId**， **BeginActivity**， **UpdateActivity**，和**EndActivity**。</span><span class="sxs-lookup"><span data-stu-id="d624e-120">The four static methods are: **CreateActivityId**, **BeginActivity**, **UpdateActivity**, and **EndActivity**.</span></span>  
  
 <span data-ttu-id="d624e-121">類別可多載**BeginActivity**方法。</span><span class="sxs-lookup"><span data-stu-id="d624e-121">The class overloads the **BeginActivity** method.</span></span> <span data-ttu-id="d624e-122">其中一個版本可將活動名稱做為單一引數，建立 GUID 以做為活動識別碼使用，然後呼叫採用活動名稱和活動識別碼的版本，再傳回活動識別碼。</span><span class="sxs-lookup"><span data-stu-id="d624e-122">One version of it takes an activity name as a single argument, creates a GUID to use as the activity identifier, and then calls the version of itself that takes an activity name and an activity identifier, and then returns the activity identifier.</span></span> <span data-ttu-id="d624e-123">當訂單沒有唯一的識別碼時，此單一引數版本就非常有用。</span><span class="sxs-lookup"><span data-stu-id="d624e-123">This single argument version is useful for cases where an order might not have a unique identifier.</span></span>  
  
 <span data-ttu-id="d624e-124">**CreateActivityId**方法採用字串和唯一的識別項，例如要求識別項，並傳回它們以底線串連的字串。</span><span class="sxs-lookup"><span data-stu-id="d624e-124">The **CreateActivityId** method takes a string and a unique identifier such as the request identifier and returns a string concatenating them with an underscore.</span></span> <span data-ttu-id="d624e-125">這可以提供唯一的活動識別碼，而且可在衍生類別中廣泛的使用。</span><span class="sxs-lookup"><span data-stu-id="d624e-125">This provides a unique activity identifier and is used extensively in the derived classes.</span></span> <span data-ttu-id="d624e-126">**BeginActivity**， **UpdateActivity**，和**EndActivity**方法呼叫**Orchestrationeventstream**， **UpdateActivity**，和**EndActivity**方法**OrchestrationEventStream**。</span><span class="sxs-lookup"><span data-stu-id="d624e-126">The **BeginActivity**, **UpdateActivity**, and **EndActivity** methods call the **BeginActiviy**, **UpdateActivity**, and **EndActivity** methods of **OrchestrationEventStream**.</span></span>  
  
 <span data-ttu-id="d624e-127">方案衍生的類別**BasicActivity**訂單仲介 (**Ordermanager**)，訂單管理員 (**OrderManager**)，和處理階段 (**Basicactivity**)。</span><span class="sxs-lookup"><span data-stu-id="d624e-127">The solution derives classes from **BasicActivity** for the order broker (**CustomerOrderRequest**), order manager (**OrderManager**), and the processing stages (**ServiceOrderRequest**).</span></span> <span data-ttu-id="d624e-128">每個類別均對應至一個活動。</span><span class="sxs-lookup"><span data-stu-id="d624e-128">Each of the classes corresponds to an activity.</span></span> <span data-ttu-id="d624e-129">每個類別會提供要用於活動名稱的字串**CreateActivityId**建立活動識別碼，以及方法專門供活動里程碑。</span><span class="sxs-lookup"><span data-stu-id="d624e-129">Each class provides a string for the activity name to be used in **CreateActivityId** to create the activity identifier as well as methods specialized for the activity milestones.</span></span>  
  
 <span data-ttu-id="d624e-130">因為訂單仲介可傳遞訂單並於之後接收回應，所以它包含一種方法，可復原指定給訂單之要求識別碼的活動識別碼。</span><span class="sxs-lookup"><span data-stu-id="d624e-130">Because the order broker hands off the order and later receives a response, it includes a method to recover the activity identifier given to the request identifier of the order.</span></span> <span data-ttu-id="d624e-131">這可讓商務程序持續追蹤處理訂單的最終項目。</span><span class="sxs-lookup"><span data-stu-id="d624e-131">This allows the business process to continue tracking the final elements of processing the order.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d624e-132">若透過檔案功能提交訂單而非透過客戶服務 Web 應用程式，便必須對各要求新增其特有的識別碼。</span><span class="sxs-lookup"><span data-stu-id="d624e-132">If you submit orders through the file facility rather than through the customer service web application, you need to add an identifier unique to each request.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d624e-133">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d624e-133">See Also</span></span>  
 [<span data-ttu-id="d624e-134">開發商務程序管理解決方案</span><span class="sxs-lookup"><span data-stu-id="d624e-134">Developing a Business Process Management Solution</span></span>](../core/developing-a-business-process-management-solution.md)