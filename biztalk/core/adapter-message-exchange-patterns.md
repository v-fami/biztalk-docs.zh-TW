---
title: "配接器訊息交換模式 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 54a3fc8f-33d0-4b7e-ad4c-b00912dc3328
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f42368d8687bbed4cbce60243a3b8528364b5fda
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="adapter-message-exchange-patterns"></a><span data-ttu-id="88a25-102">配接器訊息交換模式</span><span class="sxs-lookup"><span data-stu-id="88a25-102">Adapter Message Exchange Patterns</span></span>
<span data-ttu-id="88a25-103">BizTalk「配接器架構」支援豐富的訊息交換模式，可供配接器在許多功能強大的傳訊實例中使用。</span><span class="sxs-lookup"><span data-stu-id="88a25-103">The BizTalk Adapter Framework supports a rich set of message exchange patterns that adapters can use in many powerful messaging scenarios.</span></span>  
  
## <a name="one-way-asynchronous"></a><span data-ttu-id="88a25-104">單向 (非同步)</span><span class="sxs-lookup"><span data-stu-id="88a25-104">One-Way (Asynchronous)</span></span>  
 <span data-ttu-id="88a25-105">其重要概念是訊息流程為單一方向。</span><span class="sxs-lookup"><span data-stu-id="88a25-105">The key concept here is that messages flow in one direction.</span></span>  
  
 <span data-ttu-id="88a25-106">在這個訊息交換模式中，訊息流程透過配接器到達 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="88a25-106">In this message exchange pattern, messages flow one way into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] through an adapter.</span></span> <span data-ttu-id="88a25-107">「傳訊引擎」會將訊息發佈至 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="88a25-107">The Messaging Engine publishes the message into the MessageBox database.</span></span> <span data-ttu-id="88a25-108">如果協調流程目前訂閱該類型訊息，便會將訊息傳送至協調流程。</span><span class="sxs-lookup"><span data-stu-id="88a25-108">If an orchestration has an active subscription to a message of that type, the message is routed to that orchestration.</span></span>  
  
 <span data-ttu-id="88a25-109">在處理訊息之後，協調流程會將訊息發佈回 MessageBox 資料庫中，然後再傳送至配接器，以傳輸至特定結束點。</span><span class="sxs-lookup"><span data-stu-id="88a25-109">After processing the message, the orchestration publishes the message back into the MessageBox database before it is routed to an adapter to be transmitted to the specific endpoint.</span></span>  
  
 <span data-ttu-id="88a25-110">訊息提交至引擎之後，不需要回應。</span><span class="sxs-lookup"><span data-stu-id="88a25-110">When the message is submitted to the engine, no response is expected.</span></span> <span data-ttu-id="88a25-111">在輸出端，訊息傳輸之後，也不需要回應。</span><span class="sxs-lookup"><span data-stu-id="88a25-111">On the outbound side, when the message is transmitted, no response is expected.</span></span> <span data-ttu-id="88a25-112">這一般稱為非同步傳訊，就許多方面來說是引擎使用於所有傳訊實例的基本建置區塊。</span><span class="sxs-lookup"><span data-stu-id="88a25-112">This is typically referred to as asynchronous messaging and is in many ways the basic building block used by the engine for all messaging scenarios.</span></span>  
  
## <a name="request-response-style-protocols-sync-on-async"></a><span data-ttu-id="88a25-113">要求-回應樣式通訊協定 (Sync-on-Async)</span><span class="sxs-lookup"><span data-stu-id="88a25-113">Request-Response Style Protocols (Sync-on-Async)</span></span>  
 <span data-ttu-id="88a25-114">要求-回應實例包含接收要求訊息、處理該訊息，以及傳送回應訊息。</span><span class="sxs-lookup"><span data-stu-id="88a25-114">A request-response scenario consists of receiving a request message, processing it, and sending a response message.</span></span> <span data-ttu-id="88a25-115">它也稱為同步-非同步混合處理 (Sync-on-Async)，因為 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 基礎架構基於擴充性理由是非同步的。</span><span class="sxs-lookup"><span data-stu-id="88a25-115">It is also referred to as synchronous-on-asynchronous (sync-on-async) because the underlying [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] architecture is asynchronous for scalability reasons.</span></span> <span data-ttu-id="88a25-116">不過，除了非同步交換，BizTalk「傳訊引擎」還會公開同步訊息交換模式。</span><span class="sxs-lookup"><span data-stu-id="88a25-116">However, the architecture of the BizTalk Messaging Engine enables exposing a synchronous message exchange pattern on top of these asynchronous exchanges.</span></span> <span data-ttu-id="88a25-117">為了執行此操作，引擎會連結一些非同步訊息交換以公開同步介面，在向外擴充的架構上處理要求和回應訊息關聯的複雜工作。</span><span class="sxs-lookup"><span data-stu-id="88a25-117">To do this, the engine handles the complex task of correlating the request and response messages across a scaled-out architecture by linking together a number of asynchronous message exchanges to expose a synchronous interface.</span></span>  
  
 <span data-ttu-id="88a25-118">例如，網頁上，檢查清查可能發出 SOAP 呼叫對 BizTalk SOAP 接收配接器。</span><span class="sxs-lookup"><span data-stu-id="88a25-118">For example, a Web page that checks inventory might make a SOAP call to a BizTalk SOAP receive adapter.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="88a25-119">會協調一連串彙總資訊，並傳回一個 SOAP 回應中的 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="88a25-119"> orchestrates a series of Web services that aggregate the information and return it in one SOAP response.</span></span> <span data-ttu-id="88a25-120">對用戶端來說，這看起來是同步 SOAP 呼叫，但實際上，這是引擎組合一些非同步訊息交換。</span><span class="sxs-lookup"><span data-stu-id="88a25-120">To the client this appears to be a synchronous SOAP call, but in actuality the engine knits together a number of asynchronous message exchanges.</span></span>  
  
## <a name="solicit-response-style-protocols"></a><span data-ttu-id="88a25-121">請求-回應樣式通訊協定</span><span class="sxs-lookup"><span data-stu-id="88a25-121">Solicit-Response Style Protocols</span></span>  
 <span data-ttu-id="88a25-122">這個實例始於傳送請求訊息，並以接收回應訊息結束。</span><span class="sxs-lookup"><span data-stu-id="88a25-122">This scenario is initiated by sending a solicit message and completed by receiving a response message.</span></span> <span data-ttu-id="88a25-123">這稱為請求-回應，因為傳送的初始訊息是向結束點請求回應訊息。</span><span class="sxs-lookup"><span data-stu-id="88a25-123">It is referred to as solicit-response because the initial message sent is soliciting an endpoint for a response message.</span></span> <span data-ttu-id="88a25-124">這種訊息交換模式的實例中，協調流程可能需要發出輸出 HTTP 呼叫 (回應的請求) 並等待回應。</span><span class="sxs-lookup"><span data-stu-id="88a25-124">A scenario using this message exchange pattern might involve an orchestration making an outbound HTTP call (a solicit for a response) and waiting for the response.</span></span>  
  
## <a name="request-multiresponse"></a><span data-ttu-id="88a25-125">要求-多重回應</span><span class="sxs-lookup"><span data-stu-id="88a25-125">Request-Multiresponse</span></span>  
 <span data-ttu-id="88a25-126">本實範例與要求-回應實例相似。</span><span class="sxs-lookup"><span data-stu-id="88a25-126">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="88a25-127">不過，在本實例中，可能針對指定的要求傳回多個回應。</span><span class="sxs-lookup"><span data-stu-id="88a25-127">However, in this scenario multiple responses may be returned for a given request.</span></span> <span data-ttu-id="88a25-128">API 允許指定逾時值，而且逾時期間內收到的所有回應都會傳回至接收配接器。</span><span class="sxs-lookup"><span data-stu-id="88a25-128">The APIs allow a time-out value to be specified, and all responses received within the time-out period are returned to the receive adapter.</span></span>  
  
## <a name="loop-back"></a><span data-ttu-id="88a25-129">回送</span><span class="sxs-lookup"><span data-stu-id="88a25-129">Loop-Back</span></span>  
 <span data-ttu-id="88a25-130">本實範例與要求-回應實例相似。</span><span class="sxs-lookup"><span data-stu-id="88a25-130">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="88a25-131">要求訊息照常發佈，但引擎會確定回應訊息傳回至原來發佈要求訊息的相同配接器執行個體。</span><span class="sxs-lookup"><span data-stu-id="88a25-131">The request message is published as usual, but the engine ensures that the response message is routed back to the same adapter instance the published the request message.</span></span> <span data-ttu-id="88a25-132">因為要求訊息是發佈至 MessageBox 資料庫，所以追蹤基礎結構會確定要求和回應訊息都受到追蹤。</span><span class="sxs-lookup"><span data-stu-id="88a25-132">Because the request message is published to the MessageBox database, the tracking infrastructure ensures that both the request and response messages are tracked.</span></span> <span data-ttu-id="88a25-133">這也是在訊息上叫用傳送管線處理，然後立即將輸出訊息傳回至配接器進行後續處理的好方法。</span><span class="sxs-lookup"><span data-stu-id="88a25-133">This is also a good way to invoke a send pipeline processing on message then immediately get the output message send back to the adapter for subsequent processing.</span></span>  
  
 <span data-ttu-id="88a25-134">這個實例的例子是用戶端需要訊息的回條。</span><span class="sxs-lookup"><span data-stu-id="88a25-134">An example of this scenario is a client that requires a receipt for a message.</span></span> <span data-ttu-id="88a25-135">輸入訊息會發佈到 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="88a25-135">The inbound message is published to the MessageBox database.</span></span> <span data-ttu-id="88a25-136">此訊息和回條會在相同批次中傳回至配接器。</span><span class="sxs-lookup"><span data-stu-id="88a25-136">Both this message and the receipt are returned to the adapter in the same batch.</span></span> <span data-ttu-id="88a25-137">在此情況下，會複製輸入訊息，其中一個執行個體傳回至用戶端，另一個則透過正常方式處理。</span><span class="sxs-lookup"><span data-stu-id="88a25-137">In this case, the inbound message is copied with one instance being returned to the client, and the other being processed in the normal manner.</span></span> <span data-ttu-id="88a25-138">本特殊實例也需要撰寫自訂的 XML 解譯器。</span><span class="sxs-lookup"><span data-stu-id="88a25-138">This specific scenario also requires a custom XML disassembler to be written.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="88a25-139">另請參閱</span><span class="sxs-lookup"><span data-stu-id="88a25-139">See Also</span></span>  
 [<span data-ttu-id="88a25-140">什麼是配接器架構？</span><span class="sxs-lookup"><span data-stu-id="88a25-140">What Is the Adapter Framework?</span></span>](../core/what-is-the-adapter-framework.md)