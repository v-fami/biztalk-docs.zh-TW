---
title: "結構描述 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- schemas, schema types
- deploying, schemas
- schemas
- schemas, about schemas
- property schemas
- envelope schemas
- schemas, deploying
- XML schemas
- flat file schemas
ms.assetid: aea772bd-e7ab-448e-ba82-e7c8f38087db
caps.latest.revision: "9"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 696c79a30bb58cd91536c19c97db54d6159762b6
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="schemas"></a><span data-ttu-id="a7d8b-102">結構描述</span><span class="sxs-lookup"><span data-stu-id="a7d8b-102">Schemas</span></span>
<span data-ttu-id="a7d8b-103">Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使用 XML 結構描述定義 (XSD) 語言來定義的所有訊息之處理序，並指的是這些做為訊息結構的定義結構*結構描述*。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses the XML Schema definition (XSD) language to define the structure of all messages that it processes, and refers to these definitions of message structure as *schemas*.</span></span> <span data-ttu-id="a7d8b-104">在絕大部分的情況下，結構化訊息是所有應用程式的核心。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-104">With few exceptions, structured messages are the core of any application.</span></span> <span data-ttu-id="a7d8b-105">這些結構化訊息可以是任何形式、大小，並以一系列大範圍的後端系統和資料存放區為目標。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-105">These structured messages can take any form, large or small, and target a wide array of back-end systems and data stores.</span></span> <span data-ttu-id="a7d8b-106">經常建立和消耗結構化訊息的系統使用不同的格式。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-106">Systems that create and consume the structured messages frequently use different formats.</span></span> <span data-ttu-id="a7d8b-107">結構化訊息最常使用的兩種格式為 XML 和一般檔案。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-107">Two of the most common formats for structured messages are XML and flat files.</span></span>  
  
 <span data-ttu-id="a7d8b-108">BizTalk Server 支援下列四種類型的結構描述：</span><span class="sxs-lookup"><span data-stu-id="a7d8b-108">BizTalk Server supports the following four types of schemas:</span></span>  
  
-   <span data-ttu-id="a7d8b-109">XML 結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-109">XML schema.</span></span> <span data-ttu-id="a7d8b-110">XML 結構描述定義 XML 執行個體訊息類別的結構。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-110">An XML schema defines the structure of a class of XML instance messages.</span></span> <span data-ttu-id="a7d8b-111">由於這種類型的結構描述是使用 XML 結構描述定義 (XSD) 語言定義 XML 執行個體訊息的結構，而這正是 XSD 的用途，所以這類結構描述會以直接的方式使用 XSD。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-111">Because this type of schema uses XML Schema definition (XSD) language to define the structure of an XML instance message, and this is the intended purpose of XSD, such schemas use XSD in a straightforward way.</span></span> <span data-ttu-id="a7d8b-112">如需有關 XML 結構描述的詳細資訊，請參閱[XML 結構描述](../core/xml-schemas.md)。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-112">For more information about XML schemas, see [XML Schemas](../core/xml-schemas.md).</span></span>  
  
-   <span data-ttu-id="a7d8b-113">一般檔案結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-113">Flat file schema.</span></span> <span data-ttu-id="a7d8b-114">一般檔案結構描述是用來定義使用一般檔案格式 (分隔或位置或這兩者的組合) 的執行個體訊息類別之結構。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-114">A flat file schema defines the structure of a class of instance messages that use a flat file format, either delimited or positional or some combination thereof.</span></span> <span data-ttu-id="a7d8b-115">由於 XSD 的原生語意功能無法滿足定義一般檔案執行個體訊息結構的所有需求 (例如可用於一般檔案中不同記錄和欄位的各種分隔符號)，因此，BizTalk Server 使用了 XSD 的註解功能，將此額外資訊儲存在 XSD 結構描述中。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-115">Because the native semantic capabilities of XSD do not accommodate all of the requirements for defining the structure of flat file instance messages—such as the various types of delimiters that might be used for different records and fields within the flat file—BizTalk Server uses the annotation capabilities of XSD to store this extra information within an XSD schema.</span></span> <span data-ttu-id="a7d8b-116">BizTalk Server 定義了一組豐富的特定註解標記，可用來儲存所有必要的額外資訊。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-116">BizTalk Server defines a rich set of specific annotation tags that can be used to store all of the required additional information.</span></span> <span data-ttu-id="a7d8b-117">如需有關一般檔案結構描述的詳細資訊，請參閱[一般檔案結構描述](../core/flat-file-schemas.md)。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-117">For more information about flat file schemas, see [Flat File Schemas](../core/flat-file-schemas.md).</span></span>  
  
-   <span data-ttu-id="a7d8b-118">信封結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-118">Envelope schema.</span></span> <span data-ttu-id="a7d8b-119">信封結構描述是一種 XML 結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-119">An envelope schema is a type of XML schema.</span></span> <span data-ttu-id="a7d8b-120">信封結構描述是用來定義 XML 信封的結構，可用來將一或多個 XML 商務文件包裝成單一 XML 執行個體訊息。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-120">Envelope schemas are used to define the structure of XML envelopes, which are used to wrap one or more XML business documents into a single XML instance message.</span></span> <span data-ttu-id="a7d8b-121">將 XML 結構描述定義為信封結構描述時，根據信封結構描述中是否定義了一個以上的根記錄而定，會需要其他的屬性設定。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-121">When you define an XML schema to be an envelope schema, additional property settings are required, depending on such factors as whether there are more than one root record defined in the envelope schema.</span></span> <span data-ttu-id="a7d8b-122">如需信封結構描述的詳細資訊，請參閱[信封結構描述](../core/envelope-schemas.md)。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-122">For more information about Envelope schemas, see [Envelope Schemas](../core/envelope-schemas.md).</span></span>  
  
-   <span data-ttu-id="a7d8b-123">屬性結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-123">Property schema.</span></span> <span data-ttu-id="a7d8b-124">屬性結構描述是與 BizTalk Server 中所具有的兩種機制之一搭配使用，用來進行屬性升級。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-124">A property schema is used with one of the two mechanisms that exist within BizTalk Server for property promotion.</span></span> <span data-ttu-id="a7d8b-125">*屬性升級*是執行個體訊息內特定值複製到訊息內容的程序。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-125">*Property promotion* is the process of copying specific values from deep within an instance message to the message context.</span></span> <span data-ttu-id="a7d8b-126">透過訊息內容，這些值可以更容易被各種 BizTalk Server 元件存取。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-126">From the message context, these values are more easily accessed by various BizTalk Server components.</span></span> <span data-ttu-id="a7d8b-127">這些元件可使用這些值來執行訊息路由等動作。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-127">These components use the values to perform actions such as message routing.</span></span> <span data-ttu-id="a7d8b-128">您也可以依相反方向複製升級的屬性值 (從較容易存取的訊息內容複製回執行個體訊息內)，只要是在執行個體訊息傳送到目的地之前即可。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-128">Promoted property values can also be copied in the other direction, from the more easily accessible message context back into the depths of the instance message, just before the instance message is sent to its destination.</span></span> <span data-ttu-id="a7d8b-129">屬性結構描述是 BizTalk 結構描述的簡單版本，在執行個體訊息與訊息內容之間來回複製升級屬性的過程中會使用到。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-129">A property schema, which is a simple version of a BizTalk schema, plays a role in the process of copying promoted properties back and forth between the instance message and the message context.</span></span> <span data-ttu-id="a7d8b-130">如需屬性結構描述的詳細資訊，請參閱[屬性結構描述](../core/property-schemas.md)。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-130">For more information about property schemas, see [Property Schemas](../core/property-schemas.md).</span></span>  
  
## <a name="schema-deployment"></a><span data-ttu-id="a7d8b-131">結構描述部署</span><span class="sxs-lookup"><span data-stu-id="a7d8b-131">Schema Deployment</span></span>  
 <span data-ttu-id="a7d8b-132">您會部署不同類型的結構描述，如訊息結構描述、屬性結構描述及信封結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-132">You deploy different types of schemas, such as message schemas, property schemas, and envelope schemas.</span></span> <span data-ttu-id="a7d8b-133">因為每個結構描述都不同，因此在部署後處理各結構描述的方法上也有些微不同。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-133">Because each schema is different, there are small differences in how they are handled after deployment.</span></span> <span data-ttu-id="a7d8b-134">本節會指出所有結構描述的共同點，也會描述這些結構描述類型的不同之處。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-134">This section addresses what is common to all schemas, and also describes the differences relating to the types of schema.</span></span>  
  
 <span data-ttu-id="a7d8b-135">當您部署結構描述時，管理資料庫會儲存結構描述的內容。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-135">When you deploy a schema, the Management database stores the contents of the schema.</span></span> <span data-ttu-id="a7d8b-136">您可以在同一個目標命名空間內部署多個結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-136">You can deploy multiple schemas with the same target namespace.</span></span> <span data-ttu-id="a7d8b-137">BizTalk Server 會在管線設計師中明確指出在執行階段使用的結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-137">BizTalk Server explicitly points to the schema in the Pipeline Designer that is used at run time.</span></span> <span data-ttu-id="a7d8b-138">若您使用預設的管線，或您不要在管線設計師中指定結構描述，或是已經部署了同一個結構描述的多種版本，BizTalk Server 會判斷要使用的結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-138">If you use default pipelines, or if you do not specify a schema in the Pipeline Designer, and if multiple versions of the same schema have been deployed, BizTalk Server determines the schema to use.</span></span> <span data-ttu-id="a7d8b-139">在此情況下，將使用以該結構描述部署的最新版本組件相關的結構描述 (具有最高的版本號碼)。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-139">In this case, it will be the schema associated with the most recent version—with the highest version number—of the assembly deployed using that schema.</span></span>  
  
 <span data-ttu-id="a7d8b-140">當您移除部署結構描述的最新版組件時，來自同一個組件之最高舊版本的結構描述會變成作用中的結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-140">When you remove the most recent version of the assembly that deployed a schema, the schema from the highest previous version of the same assembly becomes the active schema.</span></span>  
  
 <span data-ttu-id="a7d8b-141">若您部署的結構描述有重複的目標命名空間，您必須參照來自自訂設計使用者管線的結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-141">If you deploy schemas with duplicate target namespaces, you must reference a schema from a custom-designed user pipeline.</span></span> <span data-ttu-id="a7d8b-142">這樣可提供其他的資訊給傳訊引擎，來載入正確的結構描述。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-142">This gives the Messaging Engine additional information to be able to load the right schema.</span></span>  
  
 <span data-ttu-id="a7d8b-143">例如，您會使用重複目標命名空間的一個案例是，當您建立多個 Web 服務結構描述版本時。</span><span class="sxs-lookup"><span data-stu-id="a7d8b-143">For example, one case where you would use a duplicate target namespace is when you create multiple versions of a Web Service schema.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a7d8b-144">另請參閱</span><span class="sxs-lookup"><span data-stu-id="a7d8b-144">See Also</span></span>  
 <span data-ttu-id="a7d8b-145">[使用 BizTalk 編輯器建立結構描述](../core/creating-schemas-using-biztalk-editor.md) </span><span class="sxs-lookup"><span data-stu-id="a7d8b-145">[Creating Schemas Using BizTalk Editor](../core/creating-schemas-using-biztalk-editor.md) </span></span>  
 <span data-ttu-id="a7d8b-146">[BizTalk 結構描述表示法](../core/biztalk-representation-of-schemas.md) </span><span class="sxs-lookup"><span data-stu-id="a7d8b-146">[BizTalk Representation of Schemas](../core/biztalk-representation-of-schemas.md) </span></span>  
 [<span data-ttu-id="a7d8b-147">成品</span><span class="sxs-lookup"><span data-stu-id="a7d8b-147">Artifacts</span></span>](../core/artifacts.md)