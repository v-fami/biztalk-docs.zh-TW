---
title: "設定 File 配接器 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- File adapters, configuring
- configuring [File adapters], about configuring File adapters
- configuring [File adapters]
ms.assetid: 1e0c7e20-80f8-469b-b423-34a2b90f9ec3
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d2f2de6a4c4cae93db90f0fb2cfc79321bfc7b3e
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2017
---
# <a name="configure-the-file-adapter"></a><span data-ttu-id="3526c-102">設定 File 配接器</span><span class="sxs-lookup"><span data-stu-id="3526c-102">Configure the File adapter</span></span>
<span data-ttu-id="3526c-103">如何設定 File 配接器、 讀取的安全性建議，以及檢視的必要權限。</span><span class="sxs-lookup"><span data-stu-id="3526c-103">How to configure the File adapter, read the security recommendations, and view the required permissions.</span></span>

<span data-ttu-id="3526c-104">您可以建立接收位置和傳送埠使用[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，或以程式設計的方式。</span><span class="sxs-lookup"><span data-stu-id="3526c-104">You can create a receive location and send port using [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], or programmatically.</span></span> <span data-ttu-id="3526c-105">本主題著重在[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]主控台。</span><span class="sxs-lookup"><span data-stu-id="3526c-105">This topic focuses on the [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)] console.</span></span> <span data-ttu-id="3526c-106">如需以程式設計方式的步驟，請移至[建立接收位置或傳送埠，以程式設計方式](../core/create-the-receive-location-and-send-port-programmatically.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-106">For the programmatic steps, go to [Create the receive location or send port programmatically](../core/create-the-receive-location-and-send-port-programmatically.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3526c-107">**從開始[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]** ，您可以連接到 Azure 的檔案共用使用 File 配接器。</span><span class="sxs-lookup"><span data-stu-id="3526c-107">**Starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]**, you can connect to an Azure file share using the File adapter.</span></span> <span data-ttu-id="3526c-108">Azure 儲存體帳戶必須裝載在 BizTalk Server 上。</span><span class="sxs-lookup"><span data-stu-id="3526c-108">The Azure storage account must be mounted on your BizTalk Server.</span></span> <span data-ttu-id="3526c-109">[開始使用 Azure 檔案儲存在 Windows 上](https://docs.microsoft.com/azure/storage/storage-dotnet-how-to-use-files#mount-the-file-share)列出掛接步驟。</span><span class="sxs-lookup"><span data-stu-id="3526c-109">[Get started with Azure File storage on Windows](https://docs.microsoft.com/azure/storage/storage-dotnet-how-to-use-files#mount-the-file-share) lists the mounting steps.</span></span>

## <a name="security-recommendations"></a><span data-ttu-id="3526c-110">安全性建議</span><span class="sxs-lookup"><span data-stu-id="3526c-110">Security recommendations</span></span>

<span data-ttu-id="3526c-111">FILE 配接器負責在 BizTalk Server 的某個目錄中傳輸檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-111">The File adapter transfers files into and out of BizTalk Server from and to a directory.</span></span> <span data-ttu-id="3526c-112">建議您依照這些指導方針，來保護和部署您作業環境中的 FILE 配接器。</span><span class="sxs-lookup"><span data-stu-id="3526c-112">It is recommended you follow these guidelines for securing and deploying the File adapter in your environment:</span></span>  
  
-   <span data-ttu-id="3526c-113">不要開啟連線到周邊網路中的檔案共用的連接埠。</span><span class="sxs-lookup"><span data-stu-id="3526c-113">Do not open ports to connect to a file share in the perimeter network.</span></span> <span data-ttu-id="3526c-114">您應該在具有高度信任的環境中使用 FILE 配接器，例如內部網路。</span><span class="sxs-lookup"><span data-stu-id="3526c-114">You should use the File adapter in environments where there is a high level of trust, such as an intranet.</span></span> 
  
-   <span data-ttu-id="3526c-115">在接收位置的放置目錄設定強式判別存取控制清單 (DACL)。</span><span class="sxs-lookup"><span data-stu-id="3526c-115">Set strong discretionary access control lists (DACL) in the receive location's drop directories.</span></span> <span data-ttu-id="3526c-116">例如，您必須對檔案接收位置收取訊息的目錄設定讀取、寫入、刪除檔案及刪除子資料夾與檔案的權限，使得只有授權的使用者可以在此位置中放置訊息。</span><span class="sxs-lookup"><span data-stu-id="3526c-116">For example, you must set read, write, delete files, and delete subfolders and files permissions to the directory from which the file receive location picks up messages, so that only authorized users can drop messages in this location.</span></span>  
  
-   <span data-ttu-id="3526c-117">當您使用 FILE 配接器收取重要資料時，建議您使用「網際網路通訊協定安全性」(IPSec)。</span><span class="sxs-lookup"><span data-stu-id="3526c-117">When you use the File adapter to pick up critical data, it is recommended to use Internet Protocol Security (IPSec.)</span></span>  
  
## <a name="required-permissions"></a><span data-ttu-id="3526c-118">必要權限</span><span class="sxs-lookup"><span data-stu-id="3526c-118">Required permissions</span></span>

<span data-ttu-id="3526c-119">在 選擇配接器處理常式的主控件執行個體的安全性內容下，執行配接器處理常式。</span><span class="sxs-lookup"><span data-stu-id="3526c-119">Adapter handlers run under the security context of the host instance selected for the adapter handler.</span></span> <span data-ttu-id="3526c-120">主控件執行個體使用`Logon`屬性***主機名稱*-主控件執行個體屬性**在 BizTalk 管理中。</span><span class="sxs-lookup"><span data-stu-id="3526c-120">The host instance uses the `Logon` property in the ***Host name* - Host Instance Properties** in BizTalk Administration.</span></span> <span data-ttu-id="3526c-121">這`Logon`帳戶必須具有任何資料夾或共用的檔案配接器使用的特定權限。</span><span class="sxs-lookup"><span data-stu-id="3526c-121">This `Logon` account must have specific permissions to any folders or shares used by the File adapter.</span></span>

<span data-ttu-id="3526c-122">處理常式所使用的主控件執行個體使用者帳戶需要下列權限。</span><span class="sxs-lookup"><span data-stu-id="3526c-122">The host instance user account used by the handler requires the following permissions.</span></span> <span data-ttu-id="3526c-123">✔ 表示是必要的權限。</span><span class="sxs-lookup"><span data-stu-id="3526c-123">A ✔ means the permission is required.</span></span> <span data-ttu-id="3526c-124">空白項目則表示不需要權限。</span><span class="sxs-lookup"><span data-stu-id="3526c-124">A blank entry means the permission is not required.</span></span>

| <span data-ttu-id="3526c-125">Permissions</span><span class="sxs-lookup"><span data-stu-id="3526c-125">Permissions</span></span> | <span data-ttu-id="3526c-126">接收處理常式</span><span class="sxs-lookup"><span data-stu-id="3526c-126">Receive handler</span></span> | <span data-ttu-id="3526c-127">傳送處理常式</span><span class="sxs-lookup"><span data-stu-id="3526c-127">Send handler</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3526c-128">完整控制</span><span class="sxs-lookup"><span data-stu-id="3526c-128">Full control</span></span> | <span data-ttu-id="3526c-129">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-129">✔</span></span> <br/> <span data-ttu-id="3526c-130">共用層級 （若存取檔案共用）</span><span class="sxs-lookup"><span data-stu-id="3526c-130">at the share level (if accessing a file share)</span></span> |  | 
| <span data-ttu-id="3526c-131">周遊資料夾 / 執行檔案</span><span class="sxs-lookup"><span data-stu-id="3526c-131">Traverse folder / execute file</span></span> |  | <span data-ttu-id="3526c-132">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-132">✔</span></span> <br/> <span data-ttu-id="3526c-133">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-133">at the file level</span></span> | 
| <span data-ttu-id="3526c-134">列出資料夾/讀取資料</span><span class="sxs-lookup"><span data-stu-id="3526c-134">List folder / read data</span></span> | <span data-ttu-id="3526c-135">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-135">✔</span></span> <br/> <span data-ttu-id="3526c-136">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-136">at the file level</span></span> | <span data-ttu-id="3526c-137">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-137">✔</span></span> <br/> <span data-ttu-id="3526c-138">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-138">at the file level</span></span> | 
| <span data-ttu-id="3526c-139">讀取屬性</span><span class="sxs-lookup"><span data-stu-id="3526c-139">Read attributes</span></span> | | <span data-ttu-id="3526c-140">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-140">✔</span></span> <br/> <span data-ttu-id="3526c-141">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-141">at the file level</span></span> | 
| <span data-ttu-id="3526c-142">讀取擴充屬性</span><span class="sxs-lookup"><span data-stu-id="3526c-142">Read extended attributes</span></span> | | <span data-ttu-id="3526c-143">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-143">✔</span></span> <br/> <span data-ttu-id="3526c-144">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-144">at the file level</span></span> | 
| <span data-ttu-id="3526c-145">建立檔案 / 寫入資料</span><span class="sxs-lookup"><span data-stu-id="3526c-145">Create files / write data</span></span> | | <span data-ttu-id="3526c-146">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-146">✔</span></span> <br/> <span data-ttu-id="3526c-147">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-147">at the file level</span></span> | 
| <span data-ttu-id="3526c-148">建立資料夾 / 附加資料</span><span class="sxs-lookup"><span data-stu-id="3526c-148">Create folders / append data</span></span> | | <span data-ttu-id="3526c-149">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-149">✔</span></span> <br/> <span data-ttu-id="3526c-150">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-150">at the file level</span></span> | 
| <span data-ttu-id="3526c-151">刪除子資料夾及檔案</span><span class="sxs-lookup"><span data-stu-id="3526c-151">Delete subfolders and files</span></span> | <span data-ttu-id="3526c-152">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-152">✔</span></span> <br/> <span data-ttu-id="3526c-153">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-153">at the file level</span></span> | <span data-ttu-id="3526c-154">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-154">✔</span></span> <br/> <span data-ttu-id="3526c-155">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-155">at the file level</span></span> | 
| <span data-ttu-id="3526c-156">讀取權限</span><span class="sxs-lookup"><span data-stu-id="3526c-156">Read permissions</span></span> | | <span data-ttu-id="3526c-157">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-157">✔</span></span> <br/> <span data-ttu-id="3526c-158">在檔案層級</span><span class="sxs-lookup"><span data-stu-id="3526c-158">at the file level</span></span> | 
| <span data-ttu-id="3526c-159">變更</span><span class="sxs-lookup"><span data-stu-id="3526c-159">Change</span></span> | | <span data-ttu-id="3526c-160">✔</span><span class="sxs-lookup"><span data-stu-id="3526c-160">✔</span></span> <br/> <span data-ttu-id="3526c-161">共用層級 （若存取檔案共用）</span><span class="sxs-lookup"><span data-stu-id="3526c-161">at the share level (if accessing a file share)</span></span> |

> [!TIP] 
> <span data-ttu-id="3526c-162">在檔案層級中，開啟**進階權限**檔案或資料夾，以查看這些權限。</span><span class="sxs-lookup"><span data-stu-id="3526c-162">At the file level, open the **advanced permissions** on the file or folder to see these permissions.</span></span>

> [!NOTE] 
> <span data-ttu-id="3526c-163">每個主控件只可和一個接收處理常式建立關聯。</span><span class="sxs-lookup"><span data-stu-id="3526c-163">Each host can associate with only one receive handler.</span></span>  

## <a name="configure-the-receive-location"></a><span data-ttu-id="3526c-164">設定接收位置</span><span class="sxs-lookup"><span data-stu-id="3526c-164">Configure the receive location</span></span>
  
> [!NOTE]
>  <span data-ttu-id="3526c-165">之前完成下列程序，您必須已經新增單向接收埠。</span><span class="sxs-lookup"><span data-stu-id="3526c-165">Before completing the following procedure, you must have already added a one-way receive port.</span></span> <span data-ttu-id="3526c-166">請參閱[如何建立接收埠](../core/how-to-create-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-166">See [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
1.  <span data-ttu-id="3526c-167">在 BizTalk Server 管理主控台中，展開  [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，展開**BizTalk 群組**，依序展開**應用程式**，然後展開 應用程式在您要建立接收位置。</span><span class="sxs-lookup"><span data-stu-id="3526c-167">In the BizTalk Server Administration console, expand [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expand **BizTalk Group**, expand **Applications**, and then expand the application under you want to create a receive location.</span></span>  
  
2.  <span data-ttu-id="3526c-168">在左窗格中，按一下 **接收埠**節點。</span><span class="sxs-lookup"><span data-stu-id="3526c-168">In the left pane, click the **Receive Ports** node.</span></span> <span data-ttu-id="3526c-169">然後在右窗格中，使用滑鼠右鍵按一下與現有接收位置關聯的接收埠，或是您要與新接收位置關聯的接收埠，然後按一下 **[屬性]**。</span><span class="sxs-lookup"><span data-stu-id="3526c-169">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="3526c-170">在左窗格中**接收埠屬性**對話方塊中，選取**接收位置**，並在右窗格中按兩下現有接收位置或按一下**新增**至建立新接收位置。</span><span class="sxs-lookup"><span data-stu-id="3526c-170">In the left pane of the **Receive Port Properties** dialog box, select **Receive Locations**, and in the right pane double-click an existing receive location or click **New** to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="3526c-171">在**接收位置屬性**對話方塊中，於**傳輸**區段中，選取**檔案**從下拉式清單中，輸入，然後按一下**設定**設定接收位置的傳輸屬性。</span><span class="sxs-lookup"><span data-stu-id="3526c-171">In the **Receive Location Properties** dialog box, in the **Transport** section, select **FILE** type from the drop-down list, and then click **Configure** to configure the transport properties for the receive location.</span></span>  
  
5.  <span data-ttu-id="3526c-172">在**一般**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="3526c-172">In the **General** tab, do the following:</span></span>  
  
    |<span data-ttu-id="3526c-173">使用</span><span class="sxs-lookup"><span data-stu-id="3526c-173">Use this</span></span>|<span data-ttu-id="3526c-174">動作</span><span class="sxs-lookup"><span data-stu-id="3526c-174">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3526c-175">**接收資料夾**</span><span class="sxs-lookup"><span data-stu-id="3526c-175">**Receive folder**</span></span>|<span data-ttu-id="3526c-176">必要。</span><span class="sxs-lookup"><span data-stu-id="3526c-176">Required.</span></span> <span data-ttu-id="3526c-177">輸入資料夾的路徑上檔案系統、 網路共用，或在檔案接收處理常式的 Azure 檔案共用讀取檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-177">Enter the path to a folder on the file system, the network share, or the Azure file share where the file receive handler reads files.</span></span> <span data-ttu-id="3526c-178">您可以輸入路徑中直接**接收資料夾**文字 方塊中，也可以從檔案系統使用**瀏覽** 按鈕。</span><span class="sxs-lookup"><span data-stu-id="3526c-178">You can enter the path directly in the **Receive folder** text box, or select it from the file system using the **Browse** button.</span></span> <span data-ttu-id="3526c-179">當瀏覽資料夾，您也可以建立新資料夾，請使用**建立新資料夾**。</span><span class="sxs-lookup"><span data-stu-id="3526c-179">When browsing for the folder, you can also create a new folder using **Make New Folder**.</span></span><br /><br /> <span data-ttu-id="3526c-180">如果使用 Azure 檔案儲存體共用，請輸入`\\yourfilestoragename.file.core.windows.net\yourfilesharename`。</span><span class="sxs-lookup"><span data-stu-id="3526c-180">If using an Azure file storage share, enter `\\yourfilestoragename.file.core.windows.net\yourfilesharename`.</span></span> <br /><br /><span data-ttu-id="3526c-181">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-181">**Type:** String</span></span> <br/><br/><span data-ttu-id="3526c-182">**注意：**不要設定**接收資料夾**屬性設為使用含有符號連結的 「 NT 分散式檔案系統資料夾。</span><span class="sxs-lookup"><span data-stu-id="3526c-182">**Note:**  Do not set the **Receive folder** property to a folder that uses the NT Distributed File System with a symbolic link.</span></span> <span data-ttu-id="3526c-183">如果您使用 NT 分散式檔案系統，您只能使用資料夾含有直接網路路徑中檔案配接器接收位置。</span><span class="sxs-lookup"><span data-stu-id="3526c-183">If you are using an NT Distributed File System, you can only use folders with straight network paths in File adapter receive locations.</span></span> <br /><br /> <span data-ttu-id="3526c-184">如需有關這個屬性的限制，請參閱[設定 File 配接器時的限制](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-184">For restrictions on this property, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span> <br/><br/><span data-ttu-id="3526c-185">**注意：** URI 傳送埠或接收位置不能超過 256 個字元。</span><span class="sxs-lookup"><span data-stu-id="3526c-185">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>|  
    |<span data-ttu-id="3526c-186">**檔案遮罩**</span><span class="sxs-lookup"><span data-stu-id="3526c-186">**File mask**</span></span>|<span data-ttu-id="3526c-187">必要。</span><span class="sxs-lookup"><span data-stu-id="3526c-187">Required.</span></span> <span data-ttu-id="3526c-188">指定檔案的遮罩。</span><span class="sxs-lookup"><span data-stu-id="3526c-188">Specify the mask for the files.</span></span> <span data-ttu-id="3526c-189">此遮罩可包含標準萬用字元值"\*"。</span><span class="sxs-lookup"><span data-stu-id="3526c-189">This mask can contain the standard wildcard value "\*".</span></span><br /><br /> <span data-ttu-id="3526c-190">**預設值：** \*.xml</span><span class="sxs-lookup"><span data-stu-id="3526c-190">**Default value:** \*.xml</span></span><br /><br /> <span data-ttu-id="3526c-191">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-191">**Type:** String</span></span><br /><br /> <span data-ttu-id="3526c-192">如需有關這個屬性的限制，請參閱[設定 File 配接器時的限制](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-192">For restrictions on this property, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span>|  
    |<span data-ttu-id="3526c-193">**公用位址**</span><span class="sxs-lookup"><span data-stu-id="3526c-193">**Public address**</span></span>|<span data-ttu-id="3526c-194">指定此位置的公用位址。</span><span class="sxs-lookup"><span data-stu-id="3526c-194">Specify the public address of this location.</span></span> <span data-ttu-id="3526c-195">BizTalk Server 會對外部夥伴公開此位址。</span><span class="sxs-lookup"><span data-stu-id="3526c-195">BizTalk Server exposes this address to external partners.</span></span><br /><br /> <span data-ttu-id="3526c-196">若未指定此屬性，執行階段引擎會以下列位址取代：</span><span class="sxs-lookup"><span data-stu-id="3526c-196">If this property is not specified, the runtime engine replaces it as:</span></span><br /><br /> <span data-ttu-id="3526c-197">file://\<*接收資料夾*\>/\<*檔案遮罩*\></span><span class="sxs-lookup"><span data-stu-id="3526c-197">file://\<*Receive folder*\>/\<*File mask*\></span></span><br /><br /> <span data-ttu-id="3526c-198">此屬性值必須有配接器前置詞。</span><span class="sxs-lookup"><span data-stu-id="3526c-198">The value for this property requires an adapter prefix.</span></span><br /><br /> <span data-ttu-id="3526c-199">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-199">**Type:** String</span></span><br /><br /> <span data-ttu-id="3526c-200">**最小長度：** 0</span><span class="sxs-lookup"><span data-stu-id="3526c-200">**Minimum length:** 0</span></span><br /><br /> <span data-ttu-id="3526c-201">**最大長度：** 256</span><span class="sxs-lookup"><span data-stu-id="3526c-201">**Maximum length:** 256</span></span>|  
    |<span data-ttu-id="3526c-202">**重試計數**</span><span class="sxs-lookup"><span data-stu-id="3526c-202">**Retry count**</span></span>|<span data-ttu-id="3526c-203">指定當網路共用上的接收位置暫時無法使用時，嘗試存取該接收位置的次數。</span><span class="sxs-lookup"><span data-stu-id="3526c-203">Specify the number of attempts to access the receive location on a network share if it is temporarily unavailable.</span></span><br /><br /> <span data-ttu-id="3526c-204">**預設值：** 5</span><span class="sxs-lookup"><span data-stu-id="3526c-204">**Default value:** 5</span></span><br /><br /> <span data-ttu-id="3526c-205">**類型：**長</span><span class="sxs-lookup"><span data-stu-id="3526c-205">**Type:** Long</span></span><br /><br /> <span data-ttu-id="3526c-206">**最小值：** 0</span><span class="sxs-lookup"><span data-stu-id="3526c-206">**Minimum value:** 0</span></span><br /><br /> <span data-ttu-id="3526c-207">**最大值：** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="3526c-207">**Maximum value:** MAX_LONG</span></span>|  
    |<span data-ttu-id="3526c-208">**重試間隔 （分鐘）**</span><span class="sxs-lookup"><span data-stu-id="3526c-208">**Retry interval (min)**</span></span>|<span data-ttu-id="3526c-209">指定當網路共用上的接收位置暫時無法使用時，嘗試存取該接收位置的重試間隔時間 (以分為單位)。</span><span class="sxs-lookup"><span data-stu-id="3526c-209">Specify the retry interval time (in minutes) between attempts to access the receive location on the network share if it is temporarily unavailable.</span></span><br /><br /> <span data-ttu-id="3526c-210">**預設值：** 5 分鐘</span><span class="sxs-lookup"><span data-stu-id="3526c-210">**Default value:** 5 minutes</span></span><br /><br /> <span data-ttu-id="3526c-211">**類型：**長</span><span class="sxs-lookup"><span data-stu-id="3526c-211">**Type:** Long</span></span><br /><br /> <span data-ttu-id="3526c-212">**最小值：** 0</span><span class="sxs-lookup"><span data-stu-id="3526c-212">**Minimum value:** 0</span></span><br /><br /> <span data-ttu-id="3526c-213">**最大值：** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="3526c-213">**Maximum value:** MAX_LONG</span></span>|  
  
6.  <span data-ttu-id="3526c-214">在**驗證**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="3526c-214">On the **Authentication** tab, do the following:</span></span>  
  
    |<span data-ttu-id="3526c-215">使用</span><span class="sxs-lookup"><span data-stu-id="3526c-215">Use this</span></span>|<span data-ttu-id="3526c-216">動作</span><span class="sxs-lookup"><span data-stu-id="3526c-216">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3526c-217">**主機沒有網路共用的存取權時，使用這些認證**</span><span class="sxs-lookup"><span data-stu-id="3526c-217">**Use these credentials when host does not have access to network share**</span></span>| <span data-ttu-id="3526c-218">使用網路共用或對 Azure 的檔案共用時，才需要。</span><span class="sxs-lookup"><span data-stu-id="3526c-218">Required only when using a network share, or an Azure file share.</span></span> <br /><br /> <span data-ttu-id="3526c-219">**預設值：** False</span><span class="sxs-lookup"><span data-stu-id="3526c-219">**Default Value:** False</span></span><br /><br /> <span data-ttu-id="3526c-220">**類型：**布林</span><span class="sxs-lookup"><span data-stu-id="3526c-220">**Type:** Boolean</span></span>|  
    |<span data-ttu-id="3526c-221">**使用者名稱**</span><span class="sxs-lookup"><span data-stu-id="3526c-221">**User name**</span></span>|<span data-ttu-id="3526c-222">如果使用網路共用，請輸入具有共用存取權的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="3526c-222">If using a network share, enter the user name that has access to the share.</span></span> <br /><br />  <span data-ttu-id="3526c-223">如果使用 Azure 檔案儲存區共用，請輸入儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="3526c-223">If using an Azure file storage share, enter the name of your storage account.</span></span><br/><br/><span data-ttu-id="3526c-224">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-224">**Type:** String</span></span> <br /><br /><span data-ttu-id="3526c-225">**注意：**如果對應到相同的網路共用的多個接收位置會設定以替代認證，則必須使用相同的認證，所有接收位置。</span><span class="sxs-lookup"><span data-stu-id="3526c-225">**Note:**  If multiple receive locations mapped to the same network share are configured with alternative credentials, then the same credentials must be used for all of the receive locations.</span></span> <span data-ttu-id="3526c-226">若您嘗試使用一組以上的認證，Windows 不允許您從相同電腦建立多個連至共用網路伺服器的連線。</span><span class="sxs-lookup"><span data-stu-id="3526c-226">Windows does not allow you to make multiple connections to a shared network server from the same computer if you attempt to use more than one set of credentials.</span></span>|  
    |<span data-ttu-id="3526c-227">**密碼**</span><span class="sxs-lookup"><span data-stu-id="3526c-227">**Password**</span></span>|<span data-ttu-id="3526c-228">如果使用網路共用，請輸入具有網路共用的存取權的帳戶的密碼。</span><span class="sxs-lookup"><span data-stu-id="3526c-228">If using a network share, enter the password for the account that has access to the network share.</span></span><br /><br />  <span data-ttu-id="3526c-229">如果使用 Azure 檔案儲存區共用，請輸入儲存體帳戶存取金鑰。在 Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="3526c-229">If using an Azure file storage share, enter the storage account access key; which is listed in the Azure portal.</span></span><br /><br /> <span data-ttu-id="3526c-230">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-230">**Type:** String</span></span>|  
  
7.  <span data-ttu-id="3526c-231">在**批次處理**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="3526c-231">In the **Batching** tab, do the following:</span></span>  
  
    |<span data-ttu-id="3526c-232">使用</span><span class="sxs-lookup"><span data-stu-id="3526c-232">Use this</span></span>|<span data-ttu-id="3526c-233">動作</span><span class="sxs-lookup"><span data-stu-id="3526c-233">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3526c-234">**批次中的訊息數目**</span><span class="sxs-lookup"><span data-stu-id="3526c-234">**Number of messages in a batch**</span></span>|<span data-ttu-id="3526c-235">指定以一個批次提交的訊息數量上限。</span><span class="sxs-lookup"><span data-stu-id="3526c-235">Specify the maximum number of messages to be submitted in a batch.</span></span><br /><br /> <span data-ttu-id="3526c-236">**預設值：** 5</span><span class="sxs-lookup"><span data-stu-id="3526c-236">**Default Value:** 5</span></span><br /><br /> <span data-ttu-id="3526c-237">**類型：** Int</span><span class="sxs-lookup"><span data-stu-id="3526c-237">**Type:** Int</span></span><br /><br /> <span data-ttu-id="3526c-238">**最小值：** 1</span><span class="sxs-lookup"><span data-stu-id="3526c-238">**Minimum value:** 1</span></span><br /><br /> <span data-ttu-id="3526c-239">**最大值：** 256</span><span class="sxs-lookup"><span data-stu-id="3526c-239">**Maximum value:** 256</span></span>|  
    |<span data-ttu-id="3526c-240">**批次大小上限 （以位元組為單位）**</span><span class="sxs-lookup"><span data-stu-id="3526c-240">**Maximum batch size (in bytes)**</span></span>|<span data-ttu-id="3526c-241">指定一個批次的總位元組上限。</span><span class="sxs-lookup"><span data-stu-id="3526c-241">Specify the maximum total bytes for a batch.</span></span><br /><br /> <span data-ttu-id="3526c-242">**預設值：** 102400</span><span class="sxs-lookup"><span data-stu-id="3526c-242">**Default Value:** 102400</span></span><br /><br /> <span data-ttu-id="3526c-243">**類型：** Int</span><span class="sxs-lookup"><span data-stu-id="3526c-243">**Type:** Int</span></span><br /><br /> <span data-ttu-id="3526c-244">**最小值：** 1024年</span><span class="sxs-lookup"><span data-stu-id="3526c-244">**Minimum value:** 1024</span></span><br /><br /> <span data-ttu-id="3526c-245">**最大值：** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="3526c-245">**Maximum value:** MAX_LONG</span></span>|  
  
     <span data-ttu-id="3526c-246">FILE 配接器將會限制先到達任一值 (訊息數目上限或是允許位元組上限) 的批次。</span><span class="sxs-lookup"><span data-stu-id="3526c-246">The File adapter will limit the batch to whichever value is reached first, maximum number of messages or maximum allowed bytes.</span></span>  
  
9. <span data-ttu-id="3526c-247">選取 [確定]。</span><span class="sxs-lookup"><span data-stu-id="3526c-247">Select **OK**.</span></span>  
  
10. <span data-ttu-id="3526c-248">輸入適當的值在**接收位置屬性**對話方塊，即可完成設定的接收位置，然後按一下**確定**儲存設定。</span><span class="sxs-lookup"><span data-stu-id="3526c-248">Enter the appropriate values in the **Receive Location Properties** dialog box to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="3526c-249">如需有關資訊**接收位置屬性**對話方塊中，請參閱[如何建立接收位置](../core/how-to-create-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-249">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  

## <a name="configure-the-send-port"></a><span data-ttu-id="3526c-250">設定傳送埠</span><span class="sxs-lookup"><span data-stu-id="3526c-250">Configure the send port</span></span>

1.  <span data-ttu-id="3526c-251">在 BizTalk Server 管理主控台中，建立新的傳送埠，或按兩下現有的傳送埠進行修改。</span><span class="sxs-lookup"><span data-stu-id="3526c-251">In the BizTalk Server Administration console, create a new send port or double-click an existing send port to modify it.</span></span> <span data-ttu-id="3526c-252">請參閱[如何建立傳送埠](../core/how-to-create-a-send-port2.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-252">See [How to Create a Send Port](../core/how-to-create-a-send-port2.md).</span></span> <span data-ttu-id="3526c-253">設定所有傳送埠選項，並指定**檔案**如**類型**選項**傳輸**區段**一般** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="3526c-253">Configure all of the send port options and specify **FILE** for the **Type** option in the **Transport** section of the **General** tab.</span></span>  
  
2.  <span data-ttu-id="3526c-254">選取**設定**旁邊**類型**。</span><span class="sxs-lookup"><span data-stu-id="3526c-254">Select the **Configure** button next to **Type**.</span></span>  
  
3.  <span data-ttu-id="3526c-255">在**一般**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="3526c-255">In the **General** tab, do the following:</span></span>  
  
    |<span data-ttu-id="3526c-256">使用</span><span class="sxs-lookup"><span data-stu-id="3526c-256">Use this</span></span>|<span data-ttu-id="3526c-257">動作</span><span class="sxs-lookup"><span data-stu-id="3526c-257">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3526c-258">**目的地位置**</span><span class="sxs-lookup"><span data-stu-id="3526c-258">**Destination Location**</span></span>|<span data-ttu-id="3526c-259">必要。</span><span class="sxs-lookup"><span data-stu-id="3526c-259">Required.</span></span> <span data-ttu-id="3526c-260">輸入路徑上檔案系統、 公開共用或要寫入輸出訊息的 Azure 檔案共用位置。</span><span class="sxs-lookup"><span data-stu-id="3526c-260">Enter the path to the location on the file system, public share, or the Azure file share to write the output messages.</span></span> <span data-ttu-id="3526c-261">您可以輸入路徑中直接**目的地位置**，也可以從檔案系統使用**瀏覽** 按鈕。</span><span class="sxs-lookup"><span data-stu-id="3526c-261">You can enter the path directly in the **Destination Location**, or select it from the file system using the **Browse** button.</span></span> <span data-ttu-id="3526c-262">在資料夾瀏覽時**瀏覽資料夾**對話方塊中，您也可以建立新的資料夾，依序按一下**建立新資料夾**。</span><span class="sxs-lookup"><span data-stu-id="3526c-262">When browsing for the folder in the **Browse For Folder** dialog box, you can also create a new folder by clicking **Make New Folder**.</span></span><br /><br /> <span data-ttu-id="3526c-263">如果使用 Azure 檔案儲存體共用，請輸入`\\yourfilestoragename.file.core.windows.net\yourfilesharename`。</span><span class="sxs-lookup"><span data-stu-id="3526c-263">If using an Azure file storage share, enter `\\yourfilestoragename.file.core.windows.net\yourfilesharename`.</span></span><br /><br /> <span data-ttu-id="3526c-264">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-264">**Type:** String</span></span> <br /><br /><span data-ttu-id="3526c-265">**注意：** URI 傳送埠或接收位置不能超過 256 個字元。</span><span class="sxs-lookup"><span data-stu-id="3526c-265">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>|  
    |<span data-ttu-id="3526c-266">**檔案名稱**</span><span class="sxs-lookup"><span data-stu-id="3526c-266">**File name**</span></span>|<span data-ttu-id="3526c-267">指定 FILE 傳送處理常式寫入訊息的檔案名稱。</span><span class="sxs-lookup"><span data-stu-id="3526c-267">Specify the name of the file where the File send handler writes the message.</span></span><br /><br /> <span data-ttu-id="3526c-268">如需有關這個屬性的限制，包括使用巨集，在檔案名稱，請參閱[設定 File 配接器時的限制](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="3526c-268">For restrictions on this property, including using macros in the file name, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span>|  
    |<span data-ttu-id="3526c-269">**複製模式**</span><span class="sxs-lookup"><span data-stu-id="3526c-269">**Copy mode**</span></span>|<span data-ttu-id="3526c-270">定義將訊息寫入檔案時使用的複製模式。</span><span class="sxs-lookup"><span data-stu-id="3526c-270">Define the copy mode to use when writing a message to a file.</span></span> <span data-ttu-id="3526c-271">有效值為：</span><span class="sxs-lookup"><span data-stu-id="3526c-271">Valid values are:</span></span><br /><br /> <span data-ttu-id="3526c-272">**附加。**</span><span class="sxs-lookup"><span data-stu-id="3526c-272">**Append.**</span></span> <span data-ttu-id="3526c-273">若檔案存在，FILE 傳送處理常式會開啟檔案，並將訊息附加到檔案結尾。</span><span class="sxs-lookup"><span data-stu-id="3526c-273">The File send handler opens a file if it exists and appends a message to the end of the file.</span></span> <span data-ttu-id="3526c-274">若檔案不存在，FILE 傳送處理常式會建立新檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-274">If the file does not exist, the File send handler creates a new file.</span></span><br /><br /> <span data-ttu-id="3526c-275">**覆寫**。</span><span class="sxs-lookup"><span data-stu-id="3526c-275">**Overwrite**.</span></span> <span data-ttu-id="3526c-276">若檔案存在，FILE 傳送處理常式會開啟檔案，並覆寫其內容。</span><span class="sxs-lookup"><span data-stu-id="3526c-276">The File send handler opens a file if it exists and overwrites its content.</span></span> <span data-ttu-id="3526c-277">若檔案不存在，FILE 傳送處理常式會建立新檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-277">If the file does not exist, the File send handler creates a new file.</span></span><br /><br /> <span data-ttu-id="3526c-278">**建立新**。</span><span class="sxs-lookup"><span data-stu-id="3526c-278">**Create new**.</span></span> <span data-ttu-id="3526c-279">若檔案不存在，FILE 傳送處理常式會建立新檔案並寫入檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-279">If a file does not exist, the File send handler creates a new file and writes to it.</span></span> <span data-ttu-id="3526c-280">若檔案已存在，FILE 傳送處理常式會報告錯誤，然後依照傳送埠的一般配接器重試邏輯來處理。</span><span class="sxs-lookup"><span data-stu-id="3526c-280">If the file already exists, the File send handler reports an error and then follows common adapter retry logic for send ports.</span></span> <span data-ttu-id="3526c-281">此為 FILE 傳送處理常式的預設複製模式。</span><span class="sxs-lookup"><span data-stu-id="3526c-281">This is a default copy mode for the File send handler.</span></span>|  
    |<span data-ttu-id="3526c-282">**允許寫入時快取**</span><span class="sxs-lookup"><span data-stu-id="3526c-282">**Allow Cache on write**</span></span>|<span data-ttu-id="3526c-283">定義將訊息寫入檔案時是否使用檔案系統快取。</span><span class="sxs-lookup"><span data-stu-id="3526c-283">Define whether to use file system caching when writing a message to a file.</span></span><br /><br /> <span data-ttu-id="3526c-284">有效的選項包括：</span><span class="sxs-lookup"><span data-stu-id="3526c-284">Valid options are:</span></span><br /><br /> <span data-ttu-id="3526c-285">**False**不使用檔案系統快取。</span><span class="sxs-lookup"><span data-stu-id="3526c-285">**False** Do not use the file system cache.</span></span><br /><br /> <span data-ttu-id="3526c-286">**True**使用檔案系統快取。</span><span class="sxs-lookup"><span data-stu-id="3526c-286">**True** Use the file system cache.</span></span><br /><br /> <span data-ttu-id="3526c-287">**預設值：** False**重要事項：**將此屬性設定為**True**電源中斷時，可以增加 File 配接器，潛在資料遺失的風險下的效能而非所有資料都會都寫入至磁碟。</span><span class="sxs-lookup"><span data-stu-id="3526c-287">**Default Value:** False **Important:**  Setting this property to **True** can increase the performance of the File adapter at the risk of potential data loss when there is a loss of power and not all data is written to disk.</span></span>|  
    |<span data-ttu-id="3526c-288">**寫入時使用暫存檔案**</span><span class="sxs-lookup"><span data-stu-id="3526c-288">**Use temporary file while writing**</span></span>|<span data-ttu-id="3526c-289">定義是否先將輸出檔寫入暫存檔，然後等寫入作業完成後再重新命名檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-289">Define whether to write the output file to a temporary file first and then rename the file once the write operation has completed.</span></span> <span data-ttu-id="3526c-290">如果啟用此選項，則會建立暫存檔案副檔名**BTS-WIP**。</span><span class="sxs-lookup"><span data-stu-id="3526c-290">If this option is enabled then the temporary file will be created with the extension **BTS-WIP**.</span></span><br /><br /> <span data-ttu-id="3526c-291">有效選項為</span><span class="sxs-lookup"><span data-stu-id="3526c-291">Valid options are</span></span><br /><br /> <span data-ttu-id="3526c-292">**True** File 配接器會在寫入目標資料夾時建立暫存檔。</span><span class="sxs-lookup"><span data-stu-id="3526c-292">**True** The File adapter creates a temporary file when writing to the target folder.</span></span><br /><br /> <span data-ttu-id="3526c-293">**False** File 配接器不會寫入目標資料夾時建立暫存檔案。</span><span class="sxs-lookup"><span data-stu-id="3526c-293">**False** The File adapter does not create a temporary file when writing to the target folder.</span></span><br /><br /> <span data-ttu-id="3526c-294">**預設值：** False**附註：**此選項時，才可以使用**CopyMode**屬性設定的值為**建立新的**</span><span class="sxs-lookup"><span data-stu-id="3526c-294">**Default Value:** False **Note:**  This option is only available when the **CopyMode** property is set to a value of **Create new**</span></span>|  
  
4.  <span data-ttu-id="3526c-295">在**驗證**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="3526c-295">On the **Authentication** tab, do the following:</span></span>  
  
    |<span data-ttu-id="3526c-296">使用</span><span class="sxs-lookup"><span data-stu-id="3526c-296">Use this</span></span>|<span data-ttu-id="3526c-297">動作</span><span class="sxs-lookup"><span data-stu-id="3526c-297">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3526c-298">**主機沒有網路共用的存取權時，使用這些認證**</span><span class="sxs-lookup"><span data-stu-id="3526c-298">**Use these credentials when host does not have access to network share**</span></span>| <span data-ttu-id="3526c-299">使用網路共用或對 Azure 的檔案共用時，才需要。</span><span class="sxs-lookup"><span data-stu-id="3526c-299">Required only when using a network share, or an Azure file share.</span></span> <br /><br /> <span data-ttu-id="3526c-300">**預設值：** False</span><span class="sxs-lookup"><span data-stu-id="3526c-300">**Default Value:** False</span></span><br /><br /> <span data-ttu-id="3526c-301">**類型：**布林</span><span class="sxs-lookup"><span data-stu-id="3526c-301">**Type:** Boolean</span></span>|  
    |<span data-ttu-id="3526c-302">**使用者名稱**</span><span class="sxs-lookup"><span data-stu-id="3526c-302">**User name**</span></span>|<span data-ttu-id="3526c-303">如果使用網路共用，請輸入具有共用存取權的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="3526c-303">If using a network share, enter the user name that has access to the share.</span></span> <br /><br />  <span data-ttu-id="3526c-304">如果使用 Azure 檔案儲存區共用，請輸入儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="3526c-304">If using an Azure file storage share, enter the name of your storage account.</span></span><br /><br /> <span data-ttu-id="3526c-305">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-305">**Type:** String</span></span>|  
    |<span data-ttu-id="3526c-306">**密碼**</span><span class="sxs-lookup"><span data-stu-id="3526c-306">**Password**</span></span>|<span data-ttu-id="3526c-307">如果使用網路共用，請輸入具有網路共用的存取權的帳戶的密碼。</span><span class="sxs-lookup"><span data-stu-id="3526c-307">If using a network share, enter the password for the account that has access to the network share.</span></span><br /><br />  <span data-ttu-id="3526c-308">如果使用 Azure 檔案儲存區共用，請輸入儲存體帳戶存取金鑰。在 Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="3526c-308">If using an Azure file storage share, enter the storage account access key; which is listed in the Azure portal.</span></span><br /><br /> <span data-ttu-id="3526c-309">**類型：**字串</span><span class="sxs-lookup"><span data-stu-id="3526c-309">**Type:** String</span></span>|  
  
5.  <span data-ttu-id="3526c-310">選取**確定**以儲存設定。</span><span class="sxs-lookup"><span data-stu-id="3526c-310">Select **OK** to save your settings.</span></span>  

## <a name="set-the-properties-for-a-dynamic-send-port"></a><span data-ttu-id="3526c-311">設定動態傳送埠的屬性</span><span class="sxs-lookup"><span data-stu-id="3526c-311">Set the properties for a dynamic send port</span></span>
  
 <span data-ttu-id="3526c-312">動態傳送埠不提供 BizTalk Server 管理主控台中的任何傳輸組態選項，因為這些屬性會隨著與訊息關聯的內容屬性一起提供。</span><span class="sxs-lookup"><span data-stu-id="3526c-312">A dynamic send port does not provide any transport configuration options in BizTalk Server Administration console because it is expected that these properties will be provided with the context properties associated with the message.</span></span> <span data-ttu-id="3526c-313">這些屬性可以在自訂管線或協調流程中設定。</span><span class="sxs-lookup"><span data-stu-id="3526c-313">These properties can be set in a custom pipeline or in an orchestration.</span></span> <span data-ttu-id="3526c-314">若要在協調流程中設定訊息組態屬性，您可以執行下列作業：</span><span class="sxs-lookup"><span data-stu-id="3526c-314">To set message configuration properties in an orchestration, you can do the following:</span></span>  
  
-   <span data-ttu-id="3526c-315">新增**建構訊息**圖形至協調流程。</span><span class="sxs-lookup"><span data-stu-id="3526c-315">Add a **Construct Message** shape to your orchestration.</span></span>  
  
-   <span data-ttu-id="3526c-316">設定**建構訊息**圖形來建構新訊息。</span><span class="sxs-lookup"><span data-stu-id="3526c-316">Configure the **Construct Message** shape to construct a new message.</span></span> <span data-ttu-id="3526c-317">(例如 Message_2)</span><span class="sxs-lookup"><span data-stu-id="3526c-317">(for example Message_2)</span></span>  
  
-   <span data-ttu-id="3526c-318">新增**訊息指派**圖形至**建構訊息**圖形。</span><span class="sxs-lookup"><span data-stu-id="3526c-318">Add a **Message Assignment** shape to the **Construct Message** shape.</span></span>  
  
-   <span data-ttu-id="3526c-319">將程式碼加入**訊息指派**圖形來初始化您建構的訊息，並設定適當的組態屬性的訊息。</span><span class="sxs-lookup"><span data-stu-id="3526c-319">Add code to the **Message Assignment** shape to initialize the message that you constructed and to set the appropriate configuration properties for the message.</span></span> <span data-ttu-id="3526c-320">下列程式碼會初始化所建構的 message_2 訊息**建構訊息**圖形，並設定兩個訊息組態屬性。</span><span class="sxs-lookup"><span data-stu-id="3526c-320">The following code initializes a message named Message_2 that was constructed with a **Construct Message** shape and then sets two configuration properties for the message.</span></span> <span data-ttu-id="3526c-321">在此實例中，Message_1 原先是由協調流程接收：</span><span class="sxs-lookup"><span data-stu-id="3526c-321">In this scenario, Message_1 was originally received by the orchestration:</span></span>  
  
    ```  
    Message_2=Message_1;  
    Message_2(FILE.CopyMode)= 0; //0=Append  
    Message_2(FILE.AllowCacheOnWrite)= true;  
    Message_2(FILE.UseTempFileOnWrite)= true;  
    ```  
 
  
## <a name="configure-the-receive-or-send-handler"></a><span data-ttu-id="3526c-322">設定接收埠或傳送處理常式</span><span class="sxs-lookup"><span data-stu-id="3526c-322">Configure the receive or send handler</span></span>
  
1.  <span data-ttu-id="3526c-323">在 BizTalk Server 管理主控台中，展開  **BizTalk Server 管理**，依序展開**BizTalk 群組**，依序展開**平台設定**，然後按一下  **配接器**。</span><span class="sxs-lookup"><span data-stu-id="3526c-323">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Platform Settings**, and then click **Adapters**.</span></span>  
  
2.  <span data-ttu-id="3526c-324">在展開的配接器清單中，按一下**檔案**、 在右窗格中，以滑鼠右鍵按一下接收或傳送您想要設定的處理常式。</span><span class="sxs-lookup"><span data-stu-id="3526c-324">In the expanded list of adapters, click **FILE**, in the right pane, right-click the receive or send handler that you want to configure.</span></span> <span data-ttu-id="3526c-325">選取**屬性**。</span><span class="sxs-lookup"><span data-stu-id="3526c-325">Select **Properties**.</span></span>  
  
3.  <span data-ttu-id="3526c-326">在**主機名稱**清單中，選取要執行此處理常式的主控件。</span><span class="sxs-lookup"><span data-stu-id="3526c-326">In the **Host Name** list, select the host to run the handler.</span></span>  
  
4.  <span data-ttu-id="3526c-327">按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="3526c-327">Click **OK**.</span></span>  

## <a name="more-topics-in-this-section"></a><span data-ttu-id="3526c-328">本節中的多個主題</span><span class="sxs-lookup"><span data-stu-id="3526c-328">More topics in this section</span></span>

[<span data-ttu-id="3526c-329">建立檔案接收位置，或以程式設計方式傳送埠</span><span class="sxs-lookup"><span data-stu-id="3526c-329">Create the File receive location or send port programmatically</span></span>](../core/create-the-receive-location-and-send-port-programmatically.md)

[<span data-ttu-id="3526c-330">File 配接器屬性結構描述和屬性</span><span class="sxs-lookup"><span data-stu-id="3526c-330">File adapter property schema and properties</span></span>](../core/file-adapter-property-schema-and-properties.md)

[<span data-ttu-id="3526c-331">設定 FILE 配接器的限制</span><span class="sxs-lookup"><span data-stu-id="3526c-331">Restrictions when configuring the File adapter</span></span>](../core/restrictions-when-configuring-the-file-adapter.md)

## <a name="see-also"></a><span data-ttu-id="3526c-332">另請參閱</span><span class="sxs-lookup"><span data-stu-id="3526c-332">See also</span></span>

 <span data-ttu-id="3526c-333">[接收和傳送伺服器的連接埠](../core/ports-for-the-receive-and-send-servers.md) </span><span class="sxs-lookup"><span data-stu-id="3526c-333">[Ports for the Receive and Send Servers](../core/ports-for-the-receive-and-send-servers.md) </span></span>  
 [<span data-ttu-id="3526c-334">最低安全性使用者權限</span><span class="sxs-lookup"><span data-stu-id="3526c-334">Minimum Security User Rights</span></span>](../core/minimum-security-user-rights.md)