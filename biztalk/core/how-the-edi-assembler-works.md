---
title: "EDI 組合器如何運作 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c3785870-08ab-4fc2-8f7e-7c5a37639a7a
caps.latest.revision: "33"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6f11fa41cabb6d5199953c2df005aa79965216f9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="how-the-edi-assembler-works"></a><span data-ttu-id="07ce6-102">EDI 組合器如何運作</span><span class="sxs-lookup"><span data-stu-id="07ce6-102">How the EDI Assembler Works</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="07ce6-103"> 會在 EDI 傳送管線 (`Microsoft.BizTalk.DefaultPipelines.EDISendPipeline`) 中執行對待傳送 EDI 編碼交換的大部分處理。</span><span class="sxs-lookup"><span data-stu-id="07ce6-103"> performs most processing of EDI-encoded interchanges to be sent in the EDI Send Pipeline (`Microsoft.BizTalk.DefaultPipelines.EDISendPipeline`).</span></span> <span data-ttu-id="07ce6-104">這個管線包含可執行下列處理的 EDI 組合器管線元件：</span><span class="sxs-lookup"><span data-stu-id="07ce6-104">This pipeline includes the EDI assembler pipeline component, which performs the following processing:</span></span>  
  
-   <span data-ttu-id="07ce6-105">序列化 EDI 交換，並將 XML 編碼訊息轉換為交換中的 EDI 交易集。</span><span class="sxs-lookup"><span data-stu-id="07ce6-105">Serializes the EDI interchange, converting XML-encoded messages into EDI transaction sets in the interchange.</span></span>  
  
-   <span data-ttu-id="07ce6-106">執行 EDI 結構描述驗證、X-12 編碼訊息的欄位交互驗證 (若已設定)、EDI 結構化驗證，以及擴充的結構描述驗證 (若該結構描述已自訂為具有非 EDI 資料型別的節點)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-106">Performs EDI schema validation, cross-field validation for X12-encoded messages (if configured), EDI structural validation, and extended schema validation (if the schema was customized with a node that has a non-EDI data type).</span></span>  
  
-   <span data-ttu-id="07ce6-107">將信封套用至 EDI 訊息。</span><span class="sxs-lookup"><span data-stu-id="07ce6-107">Applies an envelope to the EDI message.</span></span>  
  
-   <span data-ttu-id="07ce6-108">處理為了回應 EDI 訊息而接收的技術和功能通知，並會解除批次處理通知 (如果設定的話)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-108">Processes Technical and Functional acknowledgments received in response to EDI messages, debatching the acknowledgments if configured.</span></span>  
  
## <a name="applying-an-envelope-to-an-outgoing-edi-message"></a><span data-ttu-id="07ce6-109">將信封套用至外寄 EDI 訊息</span><span class="sxs-lookup"><span data-stu-id="07ce6-109">Applying an Envelope to an Outgoing EDI Message</span></span>  
 <span data-ttu-id="07ce6-110">當 EDI 傳送管線從中繼 XML 檔案建置外寄 EDI 訊息時，它會根據已針對接收端協議所建立的 EDI 屬性，將包含交換和群組標頭的信封套用至該訊息。</span><span class="sxs-lookup"><span data-stu-id="07ce6-110">When the EDI send pipeline builds an outgoing EDI message from an intermediate XML file, it applies an envelope containing interchange and group headers to the message based upon the EDI properties established for the receive-side agreement.</span></span> <span data-ttu-id="07ce6-111">如果傳送管線無法從傳送埠判斷接收端協議，它就會使用後原協議來套用信封。</span><span class="sxs-lookup"><span data-stu-id="07ce6-111">If the send pipeline was not able to determine the receiving agreement from the send port, it will use the fallback agreement to apply the envelope.</span></span>  
  
 <span data-ttu-id="07ce6-112">如果 `EdiOverride.OverrideEdiHeader` 內容屬性設定為 true，則 EDI 傳送管線會使用 EdiOverride 屬性集合中指定的值來建構信封。</span><span class="sxs-lookup"><span data-stu-id="07ce6-112">If the `EdiOverride.OverrideEdiHeader` context property is set to true, the EDI send pipeline will use values specified in the EdiOverride property collection to construct the envelope.</span></span> <span data-ttu-id="07ce6-113">如果集合中沒有某個值，則會使用協議屬性中的對應 EDI 值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-113">If a value is not present in the collection, the corresponding EDI value in agreement properties will be used.</span></span> <span data-ttu-id="07ce6-114">如果某個值既不存在於 EdiOverride 集合中，也不存在於協議屬性中，則會使用後援 EDI 協議中的屬性。</span><span class="sxs-lookup"><span data-stu-id="07ce6-114">If a value does not exist in either the EdiOverride collection or the agreement properties, the properties in the fallback EDI agreement will be used.</span></span>  
  
 <span data-ttu-id="07ce6-115">如果中繼 XML 檔案有保留標記或 ReuseEnvelope 內容屬性，訊息就是保留批次，而將不會套用該信封應用程式邏輯。</span><span class="sxs-lookup"><span data-stu-id="07ce6-115">If the intermediate XML file has a reserved tag or the ReuseEnvelope context property, the message is a preserved batch and the envelope application logic will not apply.</span></span>  
  
### <a name="sources-for-x12-envelope-values"></a><span data-ttu-id="07ce6-116">X12 信封值的來源</span><span class="sxs-lookup"><span data-stu-id="07ce6-116">Sources for X12 Envelope Values</span></span>  
 <span data-ttu-id="07ce6-117">下表列出 EDI 傳送管線會自何處取得 X12 信封之各個部分所需要的資訊：</span><span class="sxs-lookup"><span data-stu-id="07ce6-117">The following table shows where the EDI send pipeline gets the information it needs for each part of an X12 envelope:</span></span>  
  
|<span data-ttu-id="07ce6-118">標頭</span><span class="sxs-lookup"><span data-stu-id="07ce6-118">Header</span></span>|<span data-ttu-id="07ce6-119">Source</span><span class="sxs-lookup"><span data-stu-id="07ce6-119">Source</span></span>|  
|------------|------------|  
|<span data-ttu-id="07ce6-120">交換控制標頭 (ISA)</span><span class="sxs-lookup"><span data-stu-id="07ce6-120">Interchange Control Header (ISA)</span></span>|<span data-ttu-id="07ce6-121">-EdiOverride 內容屬性 (如果`EdiOverride.OverrideEdiHeader`為 true)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-121">-   EdiOverride context properties (if `EdiOverride.OverrideEdiHeader` is true).</span></span><br /><span data-ttu-id="07ce6-122">-如果已定義了協議，ISA 區段下不同頁面定義**交換設定**的單向協議屬性中的區段**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-122">-   If an agreement is defined, ISA segment definitions from different pages under the **Interchange Settings** section in the one-way agreement properties in the **Agreement Properties** dialog box.</span></span><br /><span data-ttu-id="07ce6-123">-如果未定義協議時，ISA 區段下不同頁面定義**交換設定**一節中**EDIFACT 後援設定** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-123">-   If no agreement is defined, ISA segment definitions from different pages under the **Interchange Settings** section in the **EDIFACT Fallback Settings** dialog box.</span></span>|  
|<span data-ttu-id="07ce6-124">功能群組標頭 (GS)</span><span class="sxs-lookup"><span data-stu-id="07ce6-124">Functional Group Headers (GS)</span></span>|<span data-ttu-id="07ce6-125">-EdiOverride 內容屬性 (如果`EdiOverride.OverrideEdiHeader`為 true)</span><span class="sxs-lookup"><span data-stu-id="07ce6-125">-   EdiOverride context properties (if `EdiOverride.OverrideEdiHeader` is true)</span></span><br /><span data-ttu-id="07ce6-126">-如果已定義了協議，GS 區段定義**信封**頁面 (在**交易集設定**區段) 的單向協議屬性中**協議屬性**對話方塊</span><span class="sxs-lookup"><span data-stu-id="07ce6-126">-   If an agreement is defined, GS segment definitions from the **Envelopes** page (under **Transaction Set Settings** section) in the one-way agreement properties in the **Agreement Properties** dialog box</span></span><br /><span data-ttu-id="07ce6-127">-如果未定義協議時，GS 區段定義**信封**頁面 (在**交易集設定**區段) 中**X12 後援設定**對話方塊</span><span class="sxs-lookup"><span data-stu-id="07ce6-127">-   If no agreement is defined, GS segment definitions from the **Envelopes** page (under **Transaction Set Settings** section) in the **X12 Fallback Settings** dialog box</span></span><br /><br /> <span data-ttu-id="07ce6-128">如果定義了協議，傳送管線就會根據「交易集識別項」(ST1)、版本和目標命名空間的組合來判斷 GS 資料元素的值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-128">If an agreement is defined, the values for the GS data elements are determined based upon the combination of the Transaction Set Identifier (ST1), the version, and the target namespace.</span></span> <span data-ttu-id="07ce6-129">方格中比較這些值**信封**頁面 (在**交易集設定**區段) 的協議屬性 （如果已定義了協議） 或後援協議屬性 （如果未定義協議是）：</span><span class="sxs-lookup"><span data-stu-id="07ce6-129">These values are compared to the grid in the **Envelopes** page (under **Transaction Set Settings** section) of the agreement properties (if an agreement is defined) or the fallback agreement properties (if no agreement is defined):</span></span><br /><br /> <span data-ttu-id="07ce6-130">-如果沒有相符的資料列，則相符的資料列中包含的值會用於 GS 標頭。</span><span class="sxs-lookup"><span data-stu-id="07ce6-130">-   If there is a matching row, then the values contained in the matching row are used for the GS header.</span></span><br /><span data-ttu-id="07ce6-131">-如果沒有相符項目，但預設資料列定義是，要預設列填入除 gs01 外的所有 GS 資料元素。</span><span class="sxs-lookup"><span data-stu-id="07ce6-131">-   If there is no match, but a default row is defined, all the GS data elements except GS01 are populated from the default row.</span></span> <span data-ttu-id="07ce6-132">GS01 是根據 ST1 的值來動態決定。</span><span class="sxs-lookup"><span data-stu-id="07ce6-132">GS01 is dynamically determined based on the value of ST1.</span></span><br /><span data-ttu-id="07ce6-133">-如果沒有相符的列，而且沒有預設值的資料列，則會擱置訊息。</span><span class="sxs-lookup"><span data-stu-id="07ce6-133">-   If there is no matching row, and no default row, the message is suspended.</span></span> <span data-ttu-id="07ce6-134">**注意：**是唯一的其他群組的群組，不是所有的這些值可以是另一個群組相同。</span><span class="sxs-lookup"><span data-stu-id="07ce6-134">**Note:**  For a group to be unique from other groups, not all of these values can be the same as those for another group.</span></span> <br /><br /> <span data-ttu-id="07ce6-135">如果未定義協議，則會從後援協議屬性填入 GS 資料元素。</span><span class="sxs-lookup"><span data-stu-id="07ce6-135">If no agreement is defined, then the GS data elements are populated from the fallback agreement properties.</span></span>|  
  
### <a name="sources-for-edifact-envelope-values"></a><span data-ttu-id="07ce6-136">EDIFACT 信封值的來源</span><span class="sxs-lookup"><span data-stu-id="07ce6-136">Sources for EDIFACT Envelope Values</span></span>  
 <span data-ttu-id="07ce6-137">下表列出 EDI 傳送管線會自何處取得 EDIFACT 信封之各個部分所需要的資訊：</span><span class="sxs-lookup"><span data-stu-id="07ce6-137">The following table shows where the EDI send pipeline gets the information it needs for each part of an EDIFACT envelope:</span></span>  
  
|<span data-ttu-id="07ce6-138">標頭</span><span class="sxs-lookup"><span data-stu-id="07ce6-138">Header</span></span>|<span data-ttu-id="07ce6-139">Source</span><span class="sxs-lookup"><span data-stu-id="07ce6-139">Source</span></span>|  
|------------|------------|  
|<span data-ttu-id="07ce6-140">字串服務建議 (UNA)</span><span class="sxs-lookup"><span data-stu-id="07ce6-140">Service String Advice (UNA)</span></span>|<span data-ttu-id="07ce6-141">-EdiOverride 內容屬性 (如果`EdiOverride.OverrideEdiHeader`為 true)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-141">-   EdiOverride context properties (if `EdiOverride.OverrideEdiHeader` is true).</span></span><br /><span data-ttu-id="07ce6-142">-如果已定義了協議，UNA 區段定義**字元集和分隔符號**頁面的單向協議屬性中**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-142">-   If an agreement is defined, UNA segment definitions from **Charset and Separators** page in the one-way agreement properties in the **Agreement Properties** dialog box.</span></span><br /><span data-ttu-id="07ce6-143">-如果未定義協議時，UNA 區段定義**字元集和分隔符號**頁面**EDIFACT 後援設定** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-143">-   If no agreement is defined, UNA segment definitions from **Charset and Separators** page in the **EDIFACT Fallback Settings** dialog box.</span></span>|  
|<span data-ttu-id="07ce6-144">交換控制標頭 (UNB)</span><span class="sxs-lookup"><span data-stu-id="07ce6-144">Interchange Control Header (UNB)</span></span>|<span data-ttu-id="07ce6-145">-EdiOverride 內容屬性 (如果`EdiOverride.OverrideEdiHeader`為 true)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-145">-   EdiOverride context properties (if `EdiOverride.OverrideEdiHeader` is true).</span></span><br /><span data-ttu-id="07ce6-146">-如果已定義了協議，UNB 區段下不同頁面定義**交換設定**的單向協議屬性中的區段**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-146">-   If an agreement is defined, UNB segment definitions from different pages under the **Interchange Settings** section in the one-way agreement properties in the **Agreement Properties** dialog box.</span></span><br /><span data-ttu-id="07ce6-147">-如果未定義協議時，UNB 區段下不同頁面定義**交換設定**一節中**EDIFACT 後援設定** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-147">-   If no agreement is defined, UNB segment definitions from different pages under the **Interchange Settings** section in the **EDIFACT Fallback Settings** dialog box.</span></span>|  
|<span data-ttu-id="07ce6-148">功能群組標頭 (UNG)</span><span class="sxs-lookup"><span data-stu-id="07ce6-148">Functional Group Headers (UNG)</span></span>|<span data-ttu-id="07ce6-149">-EdiOverride 內容屬性 (如果`EdiOverride.OverrideEdiHeader`為 true)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-149">-   EdiOverride context properties (if `EdiOverride.OverrideEdiHeader` is true).</span></span><br /><span data-ttu-id="07ce6-150">-如果已定義了協議，UNG 和 UNH 區段定義**信封**頁面 (在**交易集設定**區段) 的單向協議屬性中**協議屬性**對話方塊</span><span class="sxs-lookup"><span data-stu-id="07ce6-150">-   If an agreement is defined, UNG and UNH segment definitions from the **Envelopes** page (under **Transaction Set Settings** section) in the one-way agreement properties in the **Agreement Properties** dialog box</span></span><br /><span data-ttu-id="07ce6-151">-如果未定義協議時，適用的 UNG 和 UNH 區段定義**信封**頁面 (在**交易集設定**區段) 的單向協議屬性中**協議屬性**對話方塊**EDIFACT 後援設定**對話方塊</span><span class="sxs-lookup"><span data-stu-id="07ce6-151">-   If no agreement is defined, UNG and UNH segment definitions from the **Envelopes** page (under **Transaction Set Settings** section) in the one-way agreement properties in the **Agreement Properties** dialog box in the **EDIFACT Fallback Settings** dialog box</span></span><br /><br /> <span data-ttu-id="07ce6-152">如果定義了協議，傳送管線就會根據訊息類型 (UNH2.1)、訊息版次號碼 (UNH2.3)、指定代碼 (UNH2.5)、版本和目標命名空間來判斷 UNG 資料元素的值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-152">If an agreement is defined, the values for the UNG data elements are determined based upon the combination of the Message Type (UNH2.1), the Message Release Number (UNH2.3), the Assigned Code (UNH2.5), the version, and the target namespace.</span></span> <span data-ttu-id="07ce6-153">**注意：**是唯一的其他群組的群組，不是所有的這些值可以是另一個群組相同。</span><span class="sxs-lookup"><span data-stu-id="07ce6-153">**Note:**  For a group to be unique from other groups, not all of these values can be the same as those for another group.</span></span>|  
  
### <a name="applying-transaction-set-header-and-trailer-segments"></a><span data-ttu-id="07ce6-154">套用交易集標頭和結尾區段</span><span class="sxs-lookup"><span data-stu-id="07ce6-154">Applying Transaction Set Header and Trailer Segments</span></span>  
 <span data-ttu-id="07ce6-155">將序列化為外寄 EDI 交換的 XML 交易集，應該有交易集標頭和結尾。</span><span class="sxs-lookup"><span data-stu-id="07ce6-155">An XML transaction set being serialized into an outgoing EDI interchange should have a transaction set header and trailer.</span></span> <span data-ttu-id="07ce6-156">不過，如果訊息沒有交易集標頭和結尾，「EDI 組合器」也會處理此訊息。</span><span class="sxs-lookup"><span data-stu-id="07ce6-156">However, the EDI Assembler will process the message if it does not have a transaction set header or trailer.</span></span> <span data-ttu-id="07ce6-157">對 XML 交易集而言，X12 和 EDIFACT 結構描述中的交易集標頭和結尾都是選擇性項目。</span><span class="sxs-lookup"><span data-stu-id="07ce6-157">Transaction set header and trailer segments in X12 and EDIFACT schemas are optional for XML transaction sets.</span></span> <span data-ttu-id="07ce6-158">如果交易沒有標頭或結尾，EDISend 或 AS2EDISend 傳送管線中的「EDI 組合器」就會將交易集標頭和結尾值加入至此交易。</span><span class="sxs-lookup"><span data-stu-id="07ce6-158">If a transaction does not have a header or trailer, the EDI Assembler in the EDISend or AS2EDISend send pipeline will add transaction set header and trailer values to it.</span></span> <span data-ttu-id="07ce6-159">這些值是根據對應或計算而定。</span><span class="sxs-lookup"><span data-stu-id="07ce6-159">These values will be based on mappings or calculations.</span></span> <span data-ttu-id="07ce6-160">EDI 組合器會針對交換 XML (保留批次)、批次交易集 XML 和交易集 XML 執行這項作業。</span><span class="sxs-lookup"><span data-stu-id="07ce6-160">The EDI Assembler will do this for interchange XML (a preserved batch), batched transaction set XML, and transaction set XML.</span></span>  
  
 <span data-ttu-id="07ce6-161">如果對應造成驗證錯誤，XML 交易集或交換 XML 就會遭到擱置，並在事件檢視器中顯示適當錯誤，例如無效的長度或資料型別或無效的「控管單位代碼」。</span><span class="sxs-lookup"><span data-stu-id="07ce6-161">If mapping causes a validation error, the XML transaction set or interchange XML is suspended with an appropriate error in the event viewer, such as invalid length or data type, or invalid Control Agency Code.</span></span>  
  
####  <a name="BKMK_X12"></a><span data-ttu-id="07ce6-162">X12 交易集標頭和結尾區段</span><span class="sxs-lookup"><span data-stu-id="07ce6-162">X12 Transaction Set Header and Trailer Segments</span></span>  
 <span data-ttu-id="07ce6-163">對於沒有標頭和結尾區段的 X12 編碼交易集，EDI 組合器會將 ST 和 SE 區段設定如下：</span><span class="sxs-lookup"><span data-stu-id="07ce6-163">For X12-encoded transaction sets that do not have header and trailer segments, the EDI Assembler will set ST and SE segments to the following:</span></span>  
  
|<span data-ttu-id="07ce6-164">頁首/頁尾區段</span><span class="sxs-lookup"><span data-stu-id="07ce6-164">Header/Footer Segment</span></span>|<span data-ttu-id="07ce6-165">值</span><span class="sxs-lookup"><span data-stu-id="07ce6-165">Value</span></span>|  
|----------------------------|-----------|  
|<span data-ttu-id="07ce6-166">ST01 (交易集識別項代碼)</span><span class="sxs-lookup"><span data-stu-id="07ce6-166">ST01 (Transaction Set Identifier Code)</span></span>|<span data-ttu-id="07ce6-167">對應到內送 XML 交易集中 RootNode 名稱的最後三個字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-167">Mapped to the last three characters of the RootNode name from the incoming XML transaction set.</span></span> <span data-ttu-id="07ce6-168">例如，"X12_00401_855" 中的 "855"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-168">For example, "855" from "X12_00401_855".</span></span> <span data-ttu-id="07ce6-169">如果 HIPAA 主張有 TS 識別項代碼 837P、837D 或 837I，則會使用 "837"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-169">For HIPAA Claims that have a TS Identifier Code of 837P, 837D, or 837I, "837" is used.</span></span>|  
|<span data-ttu-id="07ce6-170">ST02 (交易集控制編號)</span><span class="sxs-lookup"><span data-stu-id="07ce6-170">ST02 (Transaction Set Control Number)</span></span>|<span data-ttu-id="07ce6-171">值`EdiOverride.ST02`(如果`EdiOveride.OverrideEdiHeader`為 true，) 或對應至值**交易集控制編號 (ST02)**中**本機主機設定**頁面 (在**交換設定**) 的單向協議索引標籤中**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-171">The value of `EdiOverride.ST02` (if `EdiOveride.OverrideEdiHeader` is true,) or mapped to the value of the **Transaction set control number (ST02)** in the **Local Host Settings** page (under **Interchange Settings**) of the one-way agreement tab in the **Agreement Properties** dialog box.</span></span><br /><br /> <span data-ttu-id="07ce6-172">不論設定為何套用新的或遞增的控制編號**套用新識別碼**屬性。</span><span class="sxs-lookup"><span data-stu-id="07ce6-172">A new or incremented control number is applied regardless of the setting of the **Apply New ID** property.</span></span>|  
|<span data-ttu-id="07ce6-173">ST03 (版本識別項)</span><span class="sxs-lookup"><span data-stu-id="07ce6-173">ST03 (Version identifier)</span></span>|<span data-ttu-id="07ce6-174">對應至內送交易集中的 ST03 值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-174">Mapped to the value of ST03 from the incoming XML transaction set.</span></span> <span data-ttu-id="07ce6-175">例如，5010 HIPAA 820 文件 (薪資扣除額) 的此值即為 “005010X218”。</span><span class="sxs-lookup"><span data-stu-id="07ce6-175">For example, “005010X218” for a 5010 HIPAA 820 document (Payroll deduction).</span></span> <span data-ttu-id="07ce6-176">系統會根據用以驗證交易集的結構描述來驗證 ST03。</span><span class="sxs-lookup"><span data-stu-id="07ce6-176">ST03 is validated against the schema that is used to validate the transaction set.</span></span> <span data-ttu-id="07ce6-177">**注意：** ST03 是強制性的所有 HIPAA 5010 版交易 835 除外。</span><span class="sxs-lookup"><span data-stu-id="07ce6-177">**Note:**  ST03 is mandatory for all HIPAA version 5010 transactions except for 835.</span></span>|  
|<span data-ttu-id="07ce6-178">SE01 (已包括區段的數目)</span><span class="sxs-lookup"><span data-stu-id="07ce6-178">SE01 (Number of Included Segments)</span></span>|<span data-ttu-id="07ce6-179">設定為交易集中的區段總數，包括 ST 和 SE 區段。</span><span class="sxs-lookup"><span data-stu-id="07ce6-179">Set to the total number of segments in the transaction set, including the ST and SE segments.</span></span>|  
|<span data-ttu-id="07ce6-180">SE02 (交易集控制編號)</span><span class="sxs-lookup"><span data-stu-id="07ce6-180">SE02 (Transaction Set Control Number)</span></span>|<span data-ttu-id="07ce6-181">對應到交易集中的 ST02 值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-181">Mapped to the value of ST02 in the transaction set.</span></span>|  
  
 <span data-ttu-id="07ce6-182">交易集標頭中的其他資料元素 (例如 ST03) 是選擇項，因此不是已產生區段中的值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-182">Other data elements in the transaction set header, such as ST03, are optional and so are not valued in the generated segments.</span></span>  
  
####  <a name="BKMK_EDIFACT"></a><span data-ttu-id="07ce6-183">EDIFACT 交易集標頭和結尾區段</span><span class="sxs-lookup"><span data-stu-id="07ce6-183">EDIFACT Transaction Set Header and Trailer Segments</span></span>  
 <span data-ttu-id="07ce6-184">對於沒有標頭和結尾區段的 EDIFACT 編碼交易集，EDI 組合器會將 UNH 和 UNT 區段設定如下：</span><span class="sxs-lookup"><span data-stu-id="07ce6-184">For EDIFACT-encoded transaction sets that do not have header and trailer segments, the EDI Assembler will set UNH and UNT segments to the following:</span></span>  
  
|<span data-ttu-id="07ce6-185">頁首/頁尾區段</span><span class="sxs-lookup"><span data-stu-id="07ce6-185">Header/Footer Segment</span></span>|<span data-ttu-id="07ce6-186">值</span><span class="sxs-lookup"><span data-stu-id="07ce6-186">Value</span></span>|  
|----------------------------|-----------|  
|<span data-ttu-id="07ce6-187">UNH01 (訊息參考控制編號)</span><span class="sxs-lookup"><span data-stu-id="07ce6-187">UNH01 (Message Reference Control Number)</span></span>|<span data-ttu-id="07ce6-188">值`EdiOverride.UNH1`(如果`EdiOverride.OverrideEdiHeader`為 true，) 或對應至值**參考編號 (UNH1)**中**本機主機設定**頁面 (在**交換設定**)在單向協議索引標籤的**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-188">The value of `EdiOverride.UNH1` (if `EdiOverride.OverrideEdiHeader` is true,) or mapped to the value of **Reference Number (UNH1)** in the **Local Host Settings** page (under **Interchange Settings**)of the one-way agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="07ce6-189">不論設定為何套用新的或遞增的控制編號**套用新識別碼**屬性。</span><span class="sxs-lookup"><span data-stu-id="07ce6-189">A new or incremented control number is applied regardless of the setting of the **Apply New ID** property.</span></span>|  
|<span data-ttu-id="07ce6-190">UNH2.1 (訊息類型)</span><span class="sxs-lookup"><span data-stu-id="07ce6-190">UNH2.1 (Message Type)</span></span>|<span data-ttu-id="07ce6-191">對應到內送 XML 交易集中 RootNode 名稱的最後六個字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-191">Mapped to the last six characters of the RootNode name from the incoming XML transaction set.</span></span> <span data-ttu-id="07ce6-192">例如，"EFACT_D96A_INVOIC" 中的 "INVOIC"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-192">For example, "INVOIC" from "EFACT_D96A_INVOIC".</span></span>|  
|<span data-ttu-id="07ce6-193">UNH2.2 (訊息版本號碼)</span><span class="sxs-lookup"><span data-stu-id="07ce6-193">UNH2.2 (Message Version Number)</span></span>|<span data-ttu-id="07ce6-194">對應到內送 XML 交易集中 RootNode 名稱的第七個字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-194">Mapped to the seventh character of the RootNode name from the incoming XML transaction set.</span></span> <span data-ttu-id="07ce6-195">例如，"EFACT_D96A_INVOIC" 中的 "D"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-195">For example, "D" from "EFACT_D96A_INVOIC".</span></span>|  
|<span data-ttu-id="07ce6-196">UNH2.3 (訊息版次號碼)</span><span class="sxs-lookup"><span data-stu-id="07ce6-196">UNH2.3 (Message Release Number)</span></span>|<span data-ttu-id="07ce6-197">對應到內送 XML 交易集中 RootNode 名稱的第八、第九和第十個字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-197">Mapped to the eighth, ninth, and tenth characters of the RootNode name from the incoming XML transaction set.</span></span> <span data-ttu-id="07ce6-198">例如，"EFACT_D96A_INVOIC" 中的 "96A"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-198">For example, "96A" from "EFACT_D96A_INVOIC".</span></span>|  
|<span data-ttu-id="07ce6-199">UNH2.4 (控管單位代碼)</span><span class="sxs-lookup"><span data-stu-id="07ce6-199">UNH2.4 (Control Agency Coded)</span></span>|<span data-ttu-id="07ce6-200">永遠對應到字串 "UN"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-200">Always mapped to string ‘UN’.</span></span>|  
|<span data-ttu-id="07ce6-201">UNT01 (包括的區段數目)</span><span class="sxs-lookup"><span data-stu-id="07ce6-201">UNT01 (Number of Included Segments)</span></span>|<span data-ttu-id="07ce6-202">設定為交易集中的區段總數，包括 UNH 和 UNT 區段。</span><span class="sxs-lookup"><span data-stu-id="07ce6-202">Set to the total number of segments in the transaction set, including the UNH and UNT segments.</span></span>|  
|<span data-ttu-id="07ce6-203">UNT02 (訊息參考控制編號)</span><span class="sxs-lookup"><span data-stu-id="07ce6-203">UNT02 (Message Reference Control Number)</span></span>|<span data-ttu-id="07ce6-204">對應至值**參考編號 (UNH1)**中**本機主機設定**頁面 (在**交換設定**) 的單向協議索引標籤中**協議屬性**對話方塊</span><span class="sxs-lookup"><span data-stu-id="07ce6-204">Mapped to the value of **Reference Number (UNH1)** in the **Local Host Settings** page (under **Interchange Settings**)of the one-way agreement tab in the **Agreement Properties** dialog box</span></span>|  
  
 <span data-ttu-id="07ce6-205">UNH 交易集標頭中的其他資料元素 (例如 UNH3 到 UNH6) 是選擇項，因此不是已產生區段中的值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-205">Other data elements in the UNH transaction set header, such as UNH3 to UNH6, are optional and so are not valued in the generated segments.</span></span> <span data-ttu-id="07ce6-206">如果上述其中任何一個欄位是必要項，您必須將它們設定為內送 XML 交易集中的值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-206">If any of these fields are required, you must set them to a value in the incoming XML transaction set.</span></span>  
  
### <a name="additional-processing-on-envelope-of-an-outgoing-message"></a><span data-ttu-id="07ce6-207">外寄訊息信封的其他處理</span><span class="sxs-lookup"><span data-stu-id="07ce6-207">Additional Processing on Envelope of an Outgoing Message</span></span>  
 <span data-ttu-id="07ce6-208">EDI 傳送管線會在外寄訊息信封上執行下列處理：</span><span class="sxs-lookup"><span data-stu-id="07ce6-208">The EDI send pipeline performs the following processing on the envelope of an outgoing message.</span></span>  
  
#### <a name="control-numbers"></a><span data-ttu-id="07ce6-209">控制編號</span><span class="sxs-lookup"><span data-stu-id="07ce6-209">Control Numbers</span></span>  
 <span data-ttu-id="07ce6-210">EDI 傳送管線會在每個外寄交換的信封區段中，輸入交換控制編號、群組控制編號和交易集控制 (或參考) 編號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-210">The EDI send pipeline will enter an interchange control number, a group control number, and a transaction set control (or reference) number into the envelope segments of each outgoing interchange.</span></span> <span data-ttu-id="07ce6-211">下表說明這些編號：</span><span class="sxs-lookup"><span data-stu-id="07ce6-211">These numbers are shown in the following table:</span></span>  
  
|<span data-ttu-id="07ce6-212">控制編號</span><span class="sxs-lookup"><span data-stu-id="07ce6-212">Control Number</span></span>|<span data-ttu-id="07ce6-213">X12 欄位</span><span class="sxs-lookup"><span data-stu-id="07ce6-213">X12 Field</span></span>|<span data-ttu-id="07ce6-214">EDIFACT 欄位</span><span class="sxs-lookup"><span data-stu-id="07ce6-214">EDIFACT Field</span></span>|  
|--------------------|---------------|-------------------|  
|<span data-ttu-id="07ce6-215">交換控制編號</span><span class="sxs-lookup"><span data-stu-id="07ce6-215">Interchange control number</span></span>|<span data-ttu-id="07ce6-216">ISA13</span><span class="sxs-lookup"><span data-stu-id="07ce6-216">ISA13</span></span>|<span data-ttu-id="07ce6-217">UNB5</span><span class="sxs-lookup"><span data-stu-id="07ce6-217">UNB5</span></span>|  
|<span data-ttu-id="07ce6-218">群組控制編號</span><span class="sxs-lookup"><span data-stu-id="07ce6-218">Group control number</span></span>|<span data-ttu-id="07ce6-219">GS6</span><span class="sxs-lookup"><span data-stu-id="07ce6-219">GS6</span></span>|<span data-ttu-id="07ce6-220">UNG5</span><span class="sxs-lookup"><span data-stu-id="07ce6-220">UNG5</span></span>|  
|<span data-ttu-id="07ce6-221">交易集控制編號 (X12)</span><span class="sxs-lookup"><span data-stu-id="07ce6-221">Transaction set control number (X12)</span></span><br /><br /> <span data-ttu-id="07ce6-222">交易集參考編號 (EDIFACT)</span><span class="sxs-lookup"><span data-stu-id="07ce6-222">Transaction set reference number (EDIFACT)</span></span>|<span data-ttu-id="07ce6-223">ST2</span><span class="sxs-lookup"><span data-stu-id="07ce6-223">ST2</span></span>|<span data-ttu-id="07ce6-224">UNH1</span><span class="sxs-lookup"><span data-stu-id="07ce6-224">UNH1</span></span>|  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="07ce6-225">將根據您在輸入的值的範圍上傳送的下一個交換的交換控制編號**交換控制編號 (ISA13)**屬性**本機主機設定**頁面 （在下**交換設定**) 的單向協議索引標籤中**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-225"> will set the interchange control number for the next interchange sent based on the range of values that you entered in the **Interchange control number (ISA13)** property on the **Local Host Settings** page (under **Interchange Settings**) of the one-way agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="07ce6-226">它會將每個後續交換的此編號遞增，直到達到最大值為止。</span><span class="sxs-lookup"><span data-stu-id="07ce6-226">It will increment this number for each subsequent interchange, until the maximum value is reached.</span></span>  
  
 <span data-ttu-id="07ce6-227">如果使用 EdiOverride 內容屬性指定交換控制編號，指定的值將會用於此交換，且不會影響到協議中所指定的交換控制編號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-227">If the interchange control number is specified using the EdiOverride context properties, the value specified will be used for this interchange and will not affect the interchange control number specified in agreement.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="07ce6-228">在 EDIFACT 中的群組控制編號才會遞增**套用 UNG 區段**屬性**信封**已選取 EDIFACT 協議屬性 頁面。</span><span class="sxs-lookup"><span data-stu-id="07ce6-228">The group control number in EDIFACT is only incremented if the **Apply UNG segments** property in the **Envelopes** page of the EDIFACT agreement properties is selected.</span></span> <span data-ttu-id="07ce6-229">第二個欄位 (參考編號) 會遞增；前置詞和尾碼欄位不會遞增。</span><span class="sxs-lookup"><span data-stu-id="07ce6-229">The second field (reference number) is incremented; the prefix and suffix fields are not incremented.</span></span> <span data-ttu-id="07ce6-230">如果交易集控制編號才會遞增**套用新識別碼**選取屬性。</span><span class="sxs-lookup"><span data-stu-id="07ce6-230">Transaction set control numbers are only incremented if the **Apply new ID** property is selected.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="07ce6-231">在保留的批次交換中，您可以使用「訊息豐富」範例，建立自訂的交換控制編號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-231">In a preserved batch interchange, you can create a custom interchange control number using the message enrichment sample.</span></span> <span data-ttu-id="07ce6-232">如需詳細資訊，請參閱[訊息豐富 」 範例 （BizTalk Server 範例）](../core/message-enrichment-sample-biztalk-server-sample.md)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-232">For more information, see [Message Enrichment Sample (BizTalk Server Sample)](../core/message-enrichment-sample-biztalk-server-sample.md).</span></span>  
  
 <span data-ttu-id="07ce6-233">如果未定義協議，傳送管線就會從後援協議中的相同頁面擷取編號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-233">If no agreement is defined, the numbers are taken from the same pages in the fallback agreement.</span></span> <span data-ttu-id="07ce6-234">傳送管線會儲存上次使用的控制編號，然後針對下一個交換、群組和交易集輸入遞增的編號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-234">The send pipeline stores the last-used control number, and then enters an incremented number for the next interchange, group, and transaction set.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="07ce6-235">如果有任何控制編號達到所指定範圍的最大值，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 就會引發錯誤，並擱置交換。</span><span class="sxs-lookup"><span data-stu-id="07ce6-235">If any control number reaches the maximum value of the specified range, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will raise an error and suspend the interchange.</span></span> <span data-ttu-id="07ce6-236">您可以手動重設控制編號，或設定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]自動重設為較低的限制，在**本機主機設定**頁面**協議屬性**對話方塊中，這兩個 x12 和EDIFACT 訊息。</span><span class="sxs-lookup"><span data-stu-id="07ce6-236">You can manually reset the control number, or configure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to automatically reset to the lower limit, in the **Local Host Settings** page in the **Agreement Properties** dialog box for both X12 and EDIFACT messages.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="07ce6-237">控制編號儲存在 BizTalk MessageBox 資料庫的 dbo.EdiSequenceNumbers 資料表中。</span><span class="sxs-lookup"><span data-stu-id="07ce6-237">Control numbers are saved in the dbo.EdiSequenceNumbers table of the BizTalk MessageBox database.</span></span> <span data-ttu-id="07ce6-238">您應該視情況清除資料表中的控制編號或是封存控制編號，以便管理這份資料庫資料表。</span><span class="sxs-lookup"><span data-stu-id="07ce6-238">You should manage this database table by purging the control numbers from the table or archiving the control numbers, as appropriate.</span></span>  
  
 <span data-ttu-id="07ce6-239">在 EDIFACT 中，控制編號由英數字元值所組成。</span><span class="sxs-lookup"><span data-stu-id="07ce6-239">In EDIFACT, the control numbers consist of alphanumeric values.</span></span> <span data-ttu-id="07ce6-240">下列為支援的格式：</span><span class="sxs-lookup"><span data-stu-id="07ce6-240">The following formats are supported:</span></span>  
  
-   <span data-ttu-id="07ce6-241">Numbers (例如 "1")</span><span class="sxs-lookup"><span data-stu-id="07ce6-241">Numbers (for example, "1")</span></span>  
  
-   <span data-ttu-id="07ce6-242">PrefixNumbersSuffix (例如 "WA1A")</span><span class="sxs-lookup"><span data-stu-id="07ce6-242">PrefixNumbersSuffix (for example, "WA1A")</span></span>  
  
-   <span data-ttu-id="07ce6-243">PrefixNumbers (例如 "AA1")</span><span class="sxs-lookup"><span data-stu-id="07ce6-243">PrefixNumbers (for example, "AA1")</span></span>  
  
-   <span data-ttu-id="07ce6-244">NumbersSuffix (例如 "1AA")</span><span class="sxs-lookup"><span data-stu-id="07ce6-244">NumbersSuffix (for example, "1AA")</span></span>  
  
 <span data-ttu-id="07ce6-245">使用這些格式時，數字字元可從 "0" 到 "9"，而前置詞和尾碼字元可以是數字以外的任何字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-245">In these formats, the number characters can be from "0" to "9", and the prefix and suffix characters can be any characters other than numbers.</span></span> <span data-ttu-id="07ce6-246">只有數字會一直遞增，直到達到最大值。</span><span class="sxs-lookup"><span data-stu-id="07ce6-246">Only the number will be incremented to reach the maximum value.</span></span>  
  
#### <a name="count-of-segments"></a><span data-ttu-id="07ce6-247">區段計數</span><span class="sxs-lookup"><span data-stu-id="07ce6-247">Count of segments</span></span>  
 <span data-ttu-id="07ce6-248">對於交換中的每個交易集，EDI 傳送管線會確認交易集中的區段計數，表示方式為 SE01 資料元素 (若是 X12) 和 UNT01 資料元素 (若是 EDIFACT)。</span><span class="sxs-lookup"><span data-stu-id="07ce6-248">For each transaction set in an interchange, the EDI send pipeline will verify the count of segments in the transaction set, as indicated in the SE01 data element for X12 and the UNT01 data element for EDIFACT.</span></span> <span data-ttu-id="07ce6-249">如果適當資料元素的值與實際數目不符，則傳送管線會更新此計數，以反映實際的區段數目。</span><span class="sxs-lookup"><span data-stu-id="07ce6-249">If the value of the appropriate data element does not match the actual count, the send pipeline will update the count to reflect the actual number of segments.</span></span> <span data-ttu-id="07ce6-250">交易集不會因錯誤計數而遭到拒絕。</span><span class="sxs-lookup"><span data-stu-id="07ce6-250">The transaction set will not be rejected because of an erroneous count.</span></span> <span data-ttu-id="07ce6-251">計數的更新會記錄到事件檢視器的警告中。</span><span class="sxs-lookup"><span data-stu-id="07ce6-251">The update of the count will be logged in a warning in the event viewer.</span></span> <span data-ttu-id="07ce6-252">這項更新並不會套用到保留批次的處理作業。</span><span class="sxs-lookup"><span data-stu-id="07ce6-252">This does not apply to the processing of preserved batches.</span></span>  
  
## <a name="additional-steps-in-serializing-an-edi-interchange"></a><span data-ttu-id="07ce6-253">序列化 EDI 交換的其他步驟</span><span class="sxs-lookup"><span data-stu-id="07ce6-253">Additional Steps in Serializing an EDI Interchange</span></span>  
 <span data-ttu-id="07ce6-254">EDI 傳送管線也會在序列化期間執行下列步驟。</span><span class="sxs-lookup"><span data-stu-id="07ce6-254">The EDI send pipeline also performs the following steps during serializing.</span></span>  
  
### <a name="serializing-the-release-indicator"></a><span data-ttu-id="07ce6-255">序列化釋放指示符號</span><span class="sxs-lookup"><span data-stu-id="07ce6-255">Serializing the Release Indicator</span></span>  
 <span data-ttu-id="07ce6-256">在序列化 EDIFACT 訊息期間，EDI 傳送管線會在 EDI 交換中插入任何必要的釋放指示符號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-256">During the serializing of an EDIFACT messages, the EDI send pipeline will insert any required release indicator into the EDI interchange.</span></span> <span data-ttu-id="07ce6-257">這時是假設路由至傳送管線的中繼 XML 不包含逸出的資料。</span><span class="sxs-lookup"><span data-stu-id="07ce6-257">It is assumed that the intermediate XML routed to the send pipeline does not include data that is escaped.</span></span> <span data-ttu-id="07ce6-258">例如，如果路由至傳送管線的 XML 資料中出現釋放指示符號，該傳送管線就會在現有釋放指示符號前面加入另一個釋放指示符號，以使其逸出。</span><span class="sxs-lookup"><span data-stu-id="07ce6-258">For example, if a release indicator is present in the XML data routed to the send pipeline, the send pipeline will add another release indicator before the existing release indicator in order to escape it.</span></span>  
  
 <span data-ttu-id="07ce6-259">因此 EDI 驗證不會包括該釋放指示符號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-259">The release indicator will not be included in EDI validation.</span></span> <span data-ttu-id="07ce6-260">EDI 傳送管線計算長度限制時，不會計入該釋放指示符號。</span><span class="sxs-lookup"><span data-stu-id="07ce6-260">The EDI send pipeline will not include the release indicator when it computes length restrictions.</span></span>  
  
### <a name="adding-trailing-zeroes-to-meet-implied-decimal-requirements"></a><span data-ttu-id="07ce6-261">加入尾端零以符合隱含的十進位需求</span><span class="sxs-lookup"><span data-stu-id="07ce6-261">Adding Trailing Zeroes to Meet Implied Decimal Requirements</span></span>  
 <span data-ttu-id="07ce6-262">如果 EDI 組合器遇到小數點後面有不足位數的數字，它會在小數點後加入尾端零，以符合隱含的十進位需求。</span><span class="sxs-lookup"><span data-stu-id="07ce6-262">If the EDI Assembler encounters a number that has an insufficient number of digits after the decimal point, it will add trailing zeroes after the decimal point to meet implied decimal requirements.</span></span> <span data-ttu-id="07ce6-263">例如，如果 EDI 組合器在數字格式應該是 N2 時遇到數字 "4.5"，這時組合器會將此數字變更為 "4.50"。</span><span class="sxs-lookup"><span data-stu-id="07ce6-263">For example, if the EDI Assembler encounters the number "4.5" when the number should have the format N2, the Assembler will change the number to "4.50".</span></span>  
  
### <a name="replacing-separators-in-payload-data"></a><span data-ttu-id="07ce6-264">取代內容資料中的分隔符號</span><span class="sxs-lookup"><span data-stu-id="07ce6-264">Replacing Separators in Payload Data</span></span>  
 <span data-ttu-id="07ce6-265">如果輸出訊息內的資料中有些字元同時也被設定做為資料、區段或元件的分隔符號，EDI 傳送管線可以取代這些字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-265">If the data in the outbound message contains characters that are also configured as data, segment or component separators, the EDI send pipeline can replace these characters.</span></span> <span data-ttu-id="07ce6-266">比方說，如果訊息包含值為 「 測試 * 資料 」 和資料元素分隔符號設定為\*'，這可能會遇到剖析問題造成接收端系統。</span><span class="sxs-lookup"><span data-stu-id="07ce6-266">For example, if the message contains a value of “test*data” and the data element separator is configured as ‘\*’, this may cause parsing problems on the receiving system.</span></span>  
  
 <span data-ttu-id="07ce6-267">EDI 傳送管線可以設定來取代此字元，藉由啟用**取代內容中的分隔符號**屬性並指定取代字元。</span><span class="sxs-lookup"><span data-stu-id="07ce6-267">The EDI send pipeline can be configured to replace this character by enabling the **Replace separators in payload with** property and specifying a replacement character.</span></span> <span data-ttu-id="07ce6-268">這個屬性位於**字元集和分隔符號**頁面的單向協議索引標籤中**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="07ce6-268">This property is located in the **Charset and Separators** page in the one-way agreement tab of the **Agreement Properties** dialog box.</span></span>  
  
### <a name="transform-hipaa-records-based-on-trigger-fields"></a><span data-ttu-id="07ce6-269">根據 觸發程序欄位轉換 HIPAA 記錄</span><span class="sxs-lookup"><span data-stu-id="07ce6-269">Transform HIPAA Records Based on Trigger Fields</span></span>  
 <span data-ttu-id="07ce6-270">如果輸出文件是 HIPAA 交易集，EDI 組合器會將轉換任何相符的一般 EDI 區段將包含觸發程序欄位的唯一 XML 記錄 (請參閱[HIPAA 結構描述的觸發程序欄位註解](../core/hipaa-schema-trigger-field-annotations.md))。</span><span class="sxs-lookup"><span data-stu-id="07ce6-270">If the outbound document is a HIPAA transaction set, the EDI Assembler will transform any unique XML record that contains a trigger field into the matching generic EDI segment (see [HIPAA Schema Trigger Field Annotations](../core/hipaa-schema-trigger-field-annotations.md)).</span></span> <span data-ttu-id="07ce6-271">這是藉由刪除 XML 記錄名稱 “_” 字元後的尾碼來達成。</span><span class="sxs-lookup"><span data-stu-id="07ce6-271">This is accomplished by dropping the suffix of the XML record name after the “_” character.</span></span>  
  
 <span data-ttu-id="07ce6-272">例如，<N1_PayerIdentification_TS835W1_1000A> 與 <N1_PayeeIdentification_TS835W1_1000B> 兩個項目都會變成 N1 區段。</span><span class="sxs-lookup"><span data-stu-id="07ce6-272">For example, both the elements <N1_PayerIdentification_TS835W1_1000A> and <N1_PayeeIdentification_TS835W1_1000B> will become N1 segments.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="07ce6-273">另請參閱</span><span class="sxs-lookup"><span data-stu-id="07ce6-273">See Also</span></span>  
 [<span data-ttu-id="07ce6-274">BizTalk Server 如何傳送 EDI 訊息</span><span class="sxs-lookup"><span data-stu-id="07ce6-274">How BizTalk Server Sends EDI Messages</span></span>](../core/how-biztalk-server-sends-edi-messages.md)