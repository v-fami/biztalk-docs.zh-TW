---
title: "BizTalk Server 執行階段安全性建議 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- security, runtime
- runtime, security
- discretionary access control lists (DACLs)
- DACLs
- .NET Framework Code Access Security Mechanism
ms.assetid: 1933789d-b79a-47ad-8f70-6f1e99bc2be0
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 27386b7294294088b7dcfcad1198e410e56e724d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="biztalk-server-runtime-security-recommendations"></a><span data-ttu-id="17189-102">BizTalk Server 執行階段安全性建議</span><span class="sxs-lookup"><span data-stu-id="17189-102">BizTalk Server Runtime Security Recommendations</span></span>
<span data-ttu-id="17189-103">您必須將 BizTalk Server 執行階段或引擎安裝在用來接收、傳送、處理和追蹤訊息的所有電腦上。</span><span class="sxs-lookup"><span data-stu-id="17189-103">You must install the BizTalk Server runtime, or engine, on all the computers from which you want to receive, send, process, and track messages.</span></span> <span data-ttu-id="17189-104">換句話說，您必須將執行階段元件安裝在建立 BizTalk 主控件執行個體 (處理伺服器) 的電腦上。</span><span class="sxs-lookup"><span data-stu-id="17189-104">In other words, you must install the run time components on any computer where you create a BizTalk Host instance (processing servers).</span></span> <span data-ttu-id="17189-105">建議您依照這些指導方針來保護和部署您作業環境中的 BizTalk Server 執行階段。</span><span class="sxs-lookup"><span data-stu-id="17189-105">It is recommended you follow these guidelines for securing and deploying the BizTalk Server runtime in your environment.</span></span>  
  
-   <span data-ttu-id="17189-106">確定您具有「最小安全性使用者權限」，以便執行 BizTalk 執行階段工作。</span><span class="sxs-lookup"><span data-stu-id="17189-106">Ensure you have the Minimum Security User Rights to perform BizTalk runtime tasks.</span></span> <span data-ttu-id="17189-107">如需最小安全性使用者權限的詳細資訊，請參閱[最低安全性使用者權限](../core/minimum-security-user-rights.md)。</span><span class="sxs-lookup"><span data-stu-id="17189-107">For more information about the Minimum Security User Rights, see [Minimum Security User Rights](../core/minimum-security-user-rights.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="17189-108">BizTalk 組態為這些帳戶提供了執行工作所需的最低權限。</span><span class="sxs-lookup"><span data-stu-id="17189-108">BizTalk Configuration gives the accounts the minimum permissions they need to perform their tasks.</span></span>  
  
-   <span data-ttu-id="17189-109">每個主控件執行個體的服務帳戶必須有記錄做為主控件執行個體執行所在電腦上的服務權限。</span><span class="sxs-lookup"><span data-stu-id="17189-109">The service account for each host instance must have log on as service permissions on the computer where the host instance runs.</span></span>  
  
-   <span data-ttu-id="17189-110">僅主控件的服務帳戶可以存取與主控件相關的 MessageBox 資料，而且只有這些服務可以公佈到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="17189-110">Only the service account(s) for a host have access to MessageBox data related to a host and only these services can post to the MessageBox.</span></span> <span data-ttu-id="17189-111">若要將資料洩漏攻擊的潛在威脅降到最低，您不應該在多個主控件使用相同的服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="17189-111">To minimize the potential for information disclosure attacks, you should not use the same service account for more than one host.</span></span>  
  
-   <span data-ttu-id="17189-112">處理伺服器 (沒有裝載追蹤的主控件) 僅需要連接到 MessageBox 和「管理」資料庫以及主要密碼伺服器。</span><span class="sxs-lookup"><span data-stu-id="17189-112">Processing servers (hosts that do not host tracking) only need to connect to the MessageBox and Management databases, and the master secret server.</span></span> <span data-ttu-id="17189-113">若是您使用網際網路通訊協定安全性 (IPSec)，則可以限制處理伺服器對這兩個資料庫及主要密碼伺服器的存取權。</span><span class="sxs-lookup"><span data-stu-id="17189-113">If you use Internet Protocol security (IPSec), you can restrict the access of the processing servers to these two databases and the master secret server.</span></span>  
  
-   <span data-ttu-id="17189-114">在相同 BizTalk 主控件內執行的所有元件，都具有與主控件相同的信任層級。</span><span class="sxs-lookup"><span data-stu-id="17189-114">All components running within the same BizTalk Host have the same level of trust as the host.</span></span> <span data-ttu-id="17189-115">哪些元件應該以相同的主控件執行是由 BizTalk 系統管理員來決定的，因此，這些元件共用相同的信任層級。</span><span class="sxs-lookup"><span data-stu-id="17189-115">It is up to the BizTalk administrator to determine which components should run under the same host, and therefore, share the same level of trust.</span></span> <span data-ttu-id="17189-116">BizTalk 確保只有由 BizTalk 系統管理員安裝的組件可以在 BizTalk 主控件中執行。</span><span class="sxs-lookup"><span data-stu-id="17189-116">BizTalk makes sure that only assemblies installed by BizTalk administrators run in a BizTalk Host.</span></span> <span data-ttu-id="17189-117">如果您想要建立進一步限制您可以使用哪些組件 BizTalk 用途，例如，如果您想要限制 BizTalk 僅執行由特定供應商簽署的組件或驗證協調流程的強式名稱簽章[!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)]程式碼存取安全性機制。</span><span class="sxs-lookup"><span data-stu-id="17189-117">If you want to create further restrictions as to what assemblies BizTalk uses, for example, if you want to restrict BizTalk only to run assemblies signed by a particular vendor or validate the strong name signature for an orchestration, you can use the [!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)] Code Access Security Mechanism.</span></span> <span data-ttu-id="17189-118">如需有關 Microsoft MSDN 網站，網址[http://go.microsoft.com/fwlink/?LinkId=60947](http://go.microsoft.com/fwlink/?LinkId=60947)。</span><span class="sxs-lookup"><span data-stu-id="17189-118">For more information about the Microsoft MSDN Web site at [http://go.microsoft.com/fwlink/?LinkId=60947](http://go.microsoft.com/fwlink/?LinkId=60947).</span></span>  
  
-   <span data-ttu-id="17189-119">公佈訊息的授權細項位於 BizTalk 主控件層級。</span><span class="sxs-lookup"><span data-stu-id="17189-119">The authorization granularity for posting messages is at the BizTalk Host level.</span></span> <span data-ttu-id="17189-120">換言之，若是相同的 BizTalk 主控件內執行了多個協調流程或配接器，則無法限制一個特定協調流程接收傳送到主控件的訊息。</span><span class="sxs-lookup"><span data-stu-id="17189-120">In other words, if you have multiple orchestrations or adapters running within the same BizTalk Host, you cannot restrict one specific orchestration to receive messages sent to the host.</span></span>  
  
-   <span data-ttu-id="17189-121">未授權主控件接收訊息時，主控件會將訊息放置在它的已擱置佇列中。</span><span class="sxs-lookup"><span data-stu-id="17189-121">When a host is not authorized to receive a message, the host places the message in its suspended queue.</span></span> <span data-ttu-id="17189-122">依照預設，接收配接器和協調流程在相同的主控件中執行時，協調流程可以讀取主控件的已擱置佇列。</span><span class="sxs-lookup"><span data-stu-id="17189-122">By default, when receive adapters and orchestrations are running in the same host, the orchestration can read the suspended queue of the host.</span></span> <span data-ttu-id="17189-123">如此一來，協調流程即可拾取 BizTalk 因為授權失敗而擱置的訊息。</span><span class="sxs-lookup"><span data-stu-id="17189-123">It is then possible for an orchestration to pick up a message that BizTalk suspended due to authorization failure.</span></span> <span data-ttu-id="17189-124">因此，建議您不要在相同的主控件中執行協調流程及接收配接器。</span><span class="sxs-lookup"><span data-stu-id="17189-124">Therefore, it is recommended you do not run orchestrations and receive adapters in the same host.</span></span>  
  
-   <span data-ttu-id="17189-125">主控件執行個體是在特定電腦上執行的 Windows 服務。</span><span class="sxs-lookup"><span data-stu-id="17189-125">Host instances are Windows services running on a specific computer.</span></span> <span data-ttu-id="17189-126">為了建立主控件執行個體，在想要建立主控件執行個體的電腦上，您必須同時是 BizTalk 系統管理員與 Windows 系統管理員，因為 BizTalk 會建立與主控件執行個體對應的 Windows 服務。</span><span class="sxs-lookup"><span data-stu-id="17189-126">In order to create a host instance, you must be both a BizTalk administrator and a Windows administrator on the computer where you want to create the host instance, as BizTalk creates a Windows service to correspond to the host instance.</span></span>  
  
-   <span data-ttu-id="17189-127">當 Microsoft[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]產生組件，它會使用產生的整合式開發環境 (IDE) 中的自訂金鑰。</span><span class="sxs-lookup"><span data-stu-id="17189-127">When Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] generates an assembly, it uses a custom key generated by the Integrated Developer Environment (IDE).</span></span> <span data-ttu-id="17189-128">如果您的環境需要使用特定的金鑰簽署所有組件，您必須設定所有開發電腦的 IDE，才能使用該金鑰，或使用延遲簽署的組件...</span><span class="sxs-lookup"><span data-stu-id="17189-128">If your environment requires you to sign all assemblies with a specific key, you must either configure the IDE for all development computers to use that key or use delay signing of assemblies..</span></span>  
  
-   <span data-ttu-id="17189-129">接收和傳送管線中的所有元件都會嘗試保持低記憶體耗用量。</span><span class="sxs-lookup"><span data-stu-id="17189-129">All the components in the receive and send pipelines try to keep the memory footprint low.</span></span> <span data-ttu-id="17189-130">當資料大於特定閾值時，這些元件會將資料傳送到暫存資料夾 (%TEMP%) 的磁碟中。</span><span class="sxs-lookup"><span data-stu-id="17189-130">When the data is larger than a particular threshold, these components stream data to disk in the temporary folder (%TEMP%).</span></span> <span data-ttu-id="17189-131">您必須確保主控件執行個體服務帳戶的暫存資料夾具有適當的判別存取控制清單 (DACL)，如此一來，僅服務帳戶可以讀取這些檔案。</span><span class="sxs-lookup"><span data-stu-id="17189-131">You must ensure the temporary folders for the service accounts for the host instances have proper discretionary access control lists (DACLs), so that only the service account can read these files.</span></span> <span data-ttu-id="17189-132">另外也要確定暫存資料夾有足夠的空間，以便未來可以儲存大型檔案。</span><span class="sxs-lookup"><span data-stu-id="17189-132">You must also ensure the temporary folder have room to store potentially large files.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="17189-133">另請參閱</span><span class="sxs-lookup"><span data-stu-id="17189-133">See Also</span></span>  
 <span data-ttu-id="17189-134">[管理 BizTalk Server 安全性](../core/managing-biztalk-server-security.md) </span><span class="sxs-lookup"><span data-stu-id="17189-134">[Managing BizTalk Server Security](../core/managing-biztalk-server-security.md) </span></span>  
 <span data-ttu-id="17189-135">[處理伺服器的連接埠](../core/ports-for-the-processing-servers.md) </span><span class="sxs-lookup"><span data-stu-id="17189-135">[Ports for the Processing Servers](../core/ports-for-the-processing-servers.md) </span></span>  
 <span data-ttu-id="17189-136">[BizTalk Server 部署的安全性建議](../core/security-recommendations-for-a-biztalk-server-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="17189-136">[Security Recommendations for a BizTalk Server Deployment](../core/security-recommendations-for-a-biztalk-server-deployment.md) </span></span>  
 [<span data-ttu-id="17189-137">安全性規劃</span><span class="sxs-lookup"><span data-stu-id="17189-137">Planning for Security</span></span>](../core/planning-for-security.md)