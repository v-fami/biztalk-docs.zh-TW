---
title: 安裝 WCF 配接器的憑證 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- tools, Certificates Management Console
- certificates, installing [WCF adapters]
- certificates, Certificates Management Console
- certificates, WCF adapters
- WCF adapters, send locations
- receive locations, WCF adapters
- send locations, WCF adapters
- WCF adapters, receive locations
- WCF adapters, certificates
ms.assetid: 04dc065f-a6e8-4359-8696-2a3de24d531d
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f92f27f71f5989edaf847d3c0d340368553c7afa
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37015183"
---
# <a name="installing-certificates-for-the-wcf-adapters"></a><span data-ttu-id="bc150-102">安裝 WCF 配接器的憑證</span><span class="sxs-lookup"><span data-stu-id="bc150-102">Installing Certificates for the WCF Adapters</span></span>
<span data-ttu-id="bc150-103">WCF 配接器可以基於下列用途使用公開金鑰基礎結構 (PKI) 數位憑證：訊息加密和解密、訊息簽章和驗證 (Verification) (不可否認性) 和用戶端驗證 (Authentication)。</span><span class="sxs-lookup"><span data-stu-id="bc150-103">The WCF adapters can use public key infrastructure (PKI) digital certificates for purposes of message encryption and decryption, message signing and verification (non-repudiation), and client authentication.</span></span> <span data-ttu-id="bc150-104">本主題描述各種憑證使用方式案例和組態選項指導方針，以搭配 WCF 配接器使用數位憑證。</span><span class="sxs-lookup"><span data-stu-id="bc150-104">This topic describes various certification usage scenarios and configuration option guidelines for using digital certificates with the WCF adapters.</span></span>  

## <a name="certificate-usage-scenarios-for-the-wcf-receive-locations"></a><span data-ttu-id="bc150-105">WCF 接收位置的憑證使用方式案例</span><span class="sxs-lookup"><span data-stu-id="bc150-105">Certificate Usage Scenarios for the WCF Receive Locations</span></span>  
 <span data-ttu-id="bc150-106">下表顯示如何安裝 WCF 接收位置的憑證。</span><span class="sxs-lookup"><span data-stu-id="bc150-106">The following table shows how to install the certificates for the WCF receive locations.</span></span>  


|                                 <span data-ttu-id="bc150-107">憑證使用方式</span><span class="sxs-lookup"><span data-stu-id="bc150-107">Certificate usage</span></span>                                 |                             <span data-ttu-id="bc150-108">使用者內容</span><span class="sxs-lookup"><span data-stu-id="bc150-108">User context</span></span>                              |                                                                                                                                                                                     <span data-ttu-id="bc150-109">憑證存放區位置</span><span class="sxs-lookup"><span data-stu-id="bc150-109">Certificate store location</span></span>                                                                                                                                                                                      |                      <span data-ttu-id="bc150-110">憑證類型</span><span class="sxs-lookup"><span data-stu-id="bc150-110">Certificate type</span></span>                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="bc150-111">安裝憑證的時機</span><span class="sxs-lookup"><span data-stu-id="bc150-111">When to install the certificates</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------------------------------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bc150-112">依據接收位置的安全性設定進行解密和簽章</span><span class="sxs-lookup"><span data-stu-id="bc150-112">Decryption and signing depending on the security settings of the receive location</span></span> | <span data-ttu-id="bc150-113">與接收處理常式關聯之主控件執行個體所使用的帳戶</span><span class="sxs-lookup"><span data-stu-id="bc150-113">Account used by the host instance associated with the receive handler</span></span> |                                                          <span data-ttu-id="bc150-114">登入執行每一部電腦[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，會為每個主控件執行個體服務帳戶 」，裝載接收位置，並將服務憑證匯入**目前使用者 \ 個人 (My)** 儲存。</span><span class="sxs-lookup"><span data-stu-id="bc150-114">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the receive locations as each host instance service account, and import the service certificate to the **Current User \ Personal (My)** store.</span></span>                                                           |                  <span data-ttu-id="bc150-115">自有私用憑證</span><span class="sxs-lookup"><span data-stu-id="bc150-115">Own private certificate</span></span>                   | <span data-ttu-id="bc150-116">指定的值**服務憑證-憑證指紋**下列組態屬性：</span><span class="sxs-lookup"><span data-stu-id="bc150-116">Specify the value for the **Service certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="bc150-117">-**安全性模式**屬性的 Wcf-basichttp 接收位置設定為**訊息**。</span><span class="sxs-lookup"><span data-stu-id="bc150-117">-   The **Security mode** property of the WCF-BasicHttp receive location is set to **Message**.</span></span><br /><span data-ttu-id="bc150-118">-**傳輸用戶端認證類型**屬性的 Wcf-basichttp 接收位置設定為**憑證**for **TransportCredentialOnly**安全性模式。</span><span class="sxs-lookup"><span data-stu-id="bc150-118">-   The **Transport client credential type** property of the WCF-BasicHttp receive location is set to **Certificate** for the **TransportCredentialOnly** security mode.</span></span><br /><span data-ttu-id="bc150-119">-**訊息用戶端認證類型**屬性的 Wcf-wshttp 接收位置設定為**無**，**憑證**，或**UserName**針對**訊息**安全性模式。</span><span class="sxs-lookup"><span data-stu-id="bc150-119">-   The **Message client credential type** property of the WCF-WSHttp receive location is set to **None**, **Certificate**, or **UserName** for the **Message** security mode.</span></span><br /><span data-ttu-id="bc150-120">-**傳輸用戶端認證類型**屬性的 Wcf-nettcp 接收位置設定為**無**或是**憑證**的**傳輸**安全性模式。</span><span class="sxs-lookup"><span data-stu-id="bc150-120">-   The **Transport client credential type** property of the WCF-NetTcp receive location is set to **None** or **Certificate** for the **Transport** security mode.</span></span><br /><span data-ttu-id="bc150-121">-**訊息用戶端認證類型**屬性的 Wcf-nettcp 接收位置設定為**無**， **UserName**，或**憑證**針對**訊息**安全性模式。</span><span class="sxs-lookup"><span data-stu-id="bc150-121">-   The **Message client credential type** property of the WCF-NetTcp receive location is set to **None**, **UserName**, or **Certificate** for the **Message** security mode.</span></span><br /><span data-ttu-id="bc150-122">-**訊息用戶端認證類型**屬性的 Wcf-nettcp 接收位置設定為**Windows**， **UserName**，或**憑證**for **TransportWithMessageCredential**安全性模式。</span><span class="sxs-lookup"><span data-stu-id="bc150-122">-   The **Message client credential type** property of the WCF-NetTcp receive location is set to **Windows**, **UserName**, or **Certificate** for the **TransportWithMessageCredential** security mode.</span></span><br /><span data-ttu-id="bc150-123">-**安全性模式**Wcf-netmsmq 屬性設定為**訊息**或是**兩者**。</span><span class="sxs-lookup"><span data-stu-id="bc150-123">-   The **Security mode** property of the WCF-NetMsmq is set to **Message** or **Both**.</span></span> |
|                               <span data-ttu-id="bc150-124">用戶端驗證</span><span class="sxs-lookup"><span data-stu-id="bc150-124">Client authentication</span></span>                               |                                  <span data-ttu-id="bc150-125">不適用</span><span class="sxs-lookup"><span data-stu-id="bc150-125">N/A</span></span>                                  | <span data-ttu-id="bc150-126">以系統管理員的身分，登入執行 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 並將裝載接收位置的每個電腦，再將用戶端 X.509 憑證的 CA 憑證鏈結匯入電腦的「信任的根憑證授權」憑證存放區中，這樣就可以驗證這個接收位置的用戶端。</span><span class="sxs-lookup"><span data-stu-id="bc150-126">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the receive locations as Administrators, and import the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store of the computer so that the clients can be authenticated to this receive location.</span></span> | <span data-ttu-id="bc150-127">X.509 憑證的 CA 憑證鏈結</span><span class="sxs-lookup"><span data-stu-id="bc150-127">The CA certificate chain for the client X.509 certificates</span></span> |                                                                                                                                                                                                               <span data-ttu-id="bc150-128">依據下列組態，將用戶端 X.509 憑證的 CA 憑證鏈結安裝在「信任的根憑證授權」憑證存放區：</span><span class="sxs-lookup"><span data-stu-id="bc150-128">Install the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store in the following configurations:</span></span><br /><br /> <span data-ttu-id="bc150-129">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**屬性的 Wcf-basichttp 接收位置設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-129">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-130">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**屬性 Wcf-wshttp 接收位置設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-130">-   The **Message client credential type** or **Transport client credential type** property of the WCF-WSHttp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-131">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**屬性的 Wcf-nettcp 接收位置設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-131">-   The **Message client credential type** or **Transport client credential type** property of the WCF-NetTcp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-132">-**訊息用戶端認證類型**或是**MSMQ 驗證模式**屬性的 Wcf-netmsmq 接收位置設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-132">-   The **Message client credential type** or **MSMQ authentication mode** property of the WCF-NetMsmq receive location is set to **Certificate**.</span></span>                                                                                                                                                                                                                |

> [!NOTE]
>  <span data-ttu-id="bc150-133">因為標準的 WCF 接收配接器使用，所以[ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)模式來驗證用戶端憑證，您必須安裝用戶端 X.509 憑證的 CA 憑證鏈結。</span><span class="sxs-lookup"><span data-stu-id="bc150-133">Because the standard WCF receive adapters use the [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960) mode to validate the client certificates, you must install the CA certificate chain for the client X.509 certificates.</span></span> <span data-ttu-id="bc150-134">您可以使用 WCF-Custom 或 WCF-CustomIsolated 配接器變更此預設行為。</span><span class="sxs-lookup"><span data-stu-id="bc150-134">You can use the WCF-Custom or the WCF-CustomIsolated adapters to cange this default behavior.</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-135">對於外掛式 WCF 接收配接器，您需要讓外掛式主控件執行個體與對應的應用程式集區間的使用者帳戶相符合。</span><span class="sxs-lookup"><span data-stu-id="bc150-135">For the isolated WCF receive adapters, you need to match the user account between an isolated host instance and the corresponding application pools.</span></span> <span data-ttu-id="bc150-136">如需 BizTalk 外掛式主控件的詳細資訊，請參閱[啟用 Web 服務](../core/enabling-web-services.md)。</span><span class="sxs-lookup"><span data-stu-id="bc150-136">For more information about the BizTalk isolated hosts, see [Enabling Web Services](../core/enabling-web-services.md).</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-137">Wcf-custom 和 Wcf-customisolated 接收位置、 使用者內容、 憑證存放區位置，並安裝憑證的憑證類型而異**serviceCredentials**和**clientCredentials**行為項目設定。</span><span class="sxs-lookup"><span data-stu-id="bc150-137">For the WCF-Custom and WCF-CustomIsolated receive locations, the user context, certificate store location, and certificate type for the certificates to install varies between the **serviceCredentials** and **clientCredentials** behavior element settings.</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-138">如果接收位置使用的憑證項目**端點身分識別**屬性，您也必須安裝已發佈的服務身分識別的憑證中指定的憑證存放區**結束點識別**屬性。</span><span class="sxs-lookup"><span data-stu-id="bc150-138">If the receive location uses the certificate element for the **Endpoint Identity** property, you also have to install the certificate for the published service identity into the certificate store specified in the **Endpoint Identity** property.</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-139">如果不使用主控件執行個體服務帳戶或系統管理員帳戶登入電腦，您也可以改為使用「執行身分」命令搭配適用的帳戶，以執行相同的動作。</span><span class="sxs-lookup"><span data-stu-id="bc150-139">Instead of log on to the computer using host instance service account or administrator account, you can alternatively use Run As command with applicable accounts to perform the same action.</span></span>  

## <a name="certificate-usage-scenarios-for-the-wcf-send-ports"></a><span data-ttu-id="bc150-140">WCF 傳送埠的憑證使用方式案例</span><span class="sxs-lookup"><span data-stu-id="bc150-140">Certificate Usage Scenarios for the WCF Send Ports</span></span>  
 <span data-ttu-id="bc150-141">下表顯示如何安裝 WCF 傳送埠的憑證。</span><span class="sxs-lookup"><span data-stu-id="bc150-141">The following table shows how to install the certificates for the WCF send ports.</span></span>  


|                                                 <span data-ttu-id="bc150-142">憑證使用方式</span><span class="sxs-lookup"><span data-stu-id="bc150-142">Certificate usage</span></span>                                                  |                          <span data-ttu-id="bc150-143">使用者內容</span><span class="sxs-lookup"><span data-stu-id="bc150-143">User context</span></span>                           |                                                                                                                                                                                                      <span data-ttu-id="bc150-144">憑證存放區位置</span><span class="sxs-lookup"><span data-stu-id="bc150-144">Certificate store location</span></span>                                                                                                                                                                                                      |                                       <span data-ttu-id="bc150-145">憑證類型</span><span class="sxs-lookup"><span data-stu-id="bc150-145">Certificate type</span></span>                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="bc150-146">安裝憑證的時機</span><span class="sxs-lookup"><span data-stu-id="bc150-146">When to install the certificates</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                               <span data-ttu-id="bc150-147">用戶端驗證</span><span class="sxs-lookup"><span data-stu-id="bc150-147">Client authentication</span></span>                                                | <span data-ttu-id="bc150-148">與傳送埠關聯之主控件執行個體所使用的帳戶</span><span class="sxs-lookup"><span data-stu-id="bc150-148">Account used by the host instance associated with the send port</span></span> |                                                                               <span data-ttu-id="bc150-149">登入執行每一部電腦[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，會為每個主控件執行個體服務帳戶 」，裝載傳送埠，並將用戶端憑證匯入**目前使用者 \ 個人 (My)** 儲存。</span><span class="sxs-lookup"><span data-stu-id="bc150-149">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send ports as each host instance service account, and import the client certificate to the **Current User \ Personal (My)** store.</span></span>                                                                               |                                   <span data-ttu-id="bc150-150">自有私用憑證</span><span class="sxs-lookup"><span data-stu-id="bc150-150">Own private certificate</span></span>                                    |                                                                                              <span data-ttu-id="bc150-151">指定的值**用戶端憑證-憑證指紋**下列組態屬性：</span><span class="sxs-lookup"><span data-stu-id="bc150-151">Specify the value for the **Client certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="bc150-152">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**Wcf-basichttp 傳送埠的屬性設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-152">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-153">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**Wcf-wshttp 傳送埠的屬性設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-153">-   The **Message client credential type** or **Transport client credential type** property of the WCF-WSHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-154">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**Wcf-nettcp 傳送埠的屬性設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-154">-   The **Message client credential type** or **Transport client credential type** property of the WCF-NetTcp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-155">-**訊息用戶端認證類型**或是**MSMQ 驗證模式**Wcf-netmsmq 傳送埠的屬性設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-155">-   The **Message client credential type** or **MSMQ authentication mode** property of the WCF-NetMsmq send port is set to **Certificate**.</span></span>                                                                                              |
| <span data-ttu-id="bc150-156">依據傳送埠的安全性設定進行服務驗證 (Authentication)、簽章驗證 (Verification) 和加密</span><span class="sxs-lookup"><span data-stu-id="bc150-156">Service authentication, signature verification, and encryption depending on the security settings of the send port</span></span> |                               <span data-ttu-id="bc150-157">不適用</span><span class="sxs-lookup"><span data-stu-id="bc150-157">N/A</span></span>                               | <span data-ttu-id="bc150-158">登入執行每一部電腦[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，將裝載傳送埠，以系統管理員，並將服務憑證匯入**本機電腦 \ 其他人 (AddressBook)** 儲存。</span><span class="sxs-lookup"><span data-stu-id="bc150-158">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send ports as Administrators, and import the service certificate to the **Local Computer \ Other people (AddressBook)** store.</span></span> <span data-ttu-id="bc150-159">您也必須將服務憑證的 CA 憑證鏈結安裝在電腦「信任的根憑證授權」憑證存放區中。</span><span class="sxs-lookup"><span data-stu-id="bc150-159">You also have to install the CA certificate chain for the service certificates to the Trusted Root Certification Authorities certificate store of the computer.</span></span> | <span data-ttu-id="bc150-160">服務公開憑證</span><span class="sxs-lookup"><span data-stu-id="bc150-160">-   Service public certificate</span></span><br /><span data-ttu-id="bc150-161">的服務憑證 CA 憑證鏈結</span><span class="sxs-lookup"><span data-stu-id="bc150-161">-   The CA certificate chain for the service certificate</span></span> |                                                                                                                                                                           <span data-ttu-id="bc150-162">指定的值**服務憑證-憑證指紋**下列組態屬性：</span><span class="sxs-lookup"><span data-stu-id="bc150-162">Specify the value for the **Service certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="bc150-163">-**訊息用戶端認證類型**或是**傳輸用戶端認證類型**Wcf-basichttp 傳送埠的屬性設定為**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-163">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="bc150-164">-**訊息用戶端認證類型**Wcf-wshttp 傳送埠的屬性設定為**無**， **UserName**，或**憑證**時**交涉服務認證**清除選項。</span><span class="sxs-lookup"><span data-stu-id="bc150-164">-   The **Message client credential type** property of the WCF-WSHttp send port is set to **None**, **UserName**, or **Certificate** when the **Negotiate service credential** option is cleared.</span></span><br /><span data-ttu-id="bc150-165">-**安全性模式**Wcf-netmsmq 傳送埠設定為**訊息**或是**兩者**。</span><span class="sxs-lookup"><span data-stu-id="bc150-165">-   The **Security mode** of the WCF-NetMsmq send port is set to **Message** or **Both**.</span></span>                                                                                                                                                                           |
| <span data-ttu-id="bc150-166">依據傳送埠的安全性設定進行服務驗證 (Authentication)、簽章驗證 (Verification) 和加密</span><span class="sxs-lookup"><span data-stu-id="bc150-166">Service authentication, signature verification, and encryption depending on the security settings of the send port</span></span> |                               <span data-ttu-id="bc150-167">不適用</span><span class="sxs-lookup"><span data-stu-id="bc150-167">N/A</span></span>                               |                         <span data-ttu-id="bc150-168">以系統管理員的身分，登入執行 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 並將裝載傳送埠的每個電腦，再將用戶端 X.509 憑證的 CA 憑證鏈結匯入電腦的「信任的根憑證授權」憑證存放區中，這樣就可以驗證這個傳送埠的服務。</span><span class="sxs-lookup"><span data-stu-id="bc150-168">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send port as Administrators, and import the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store of the computer so that the service can be authenticated to this send port.</span></span>                         |                     <span data-ttu-id="bc150-169">服務憑證的 CA 憑證鏈結</span><span class="sxs-lookup"><span data-stu-id="bc150-169">The CA certificate chain for the service certificate</span></span>                     | <span data-ttu-id="bc150-170">如果您未明確指定的服務憑證**服務憑證-憑證指紋**屬性中，安裝服務 X.509 CA 憑證鏈結憑證到信任的根憑證授權單位下列組態的憑證存放區：</span><span class="sxs-lookup"><span data-stu-id="bc150-170">If you do not explicitly specify the service certificate for the **Service certificate - Thumbprint** property, install the CA certificate chain for the service X.509 certificates to the Trusted Root Certification Authorities certificate store in the following configurations:</span></span><br /><br /> <span data-ttu-id="bc150-171">-**安全性模式**Wcf-basichttp 傳送埠設定為**傳輸**或是**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="bc150-171">-   The **Security mode** of the WCF-BasicHttp send port is set to **Transport** or **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="bc150-172">-**安全性模式**Wcf-wshttp 傳送埠設定為**傳輸**或是**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="bc150-172">-   The **Security mode** of the WCF-WSHttp send port is set to **Transport** or **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="bc150-173">-**安全性模式**Wcf-nettcp 傳送埠設定為**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="bc150-173">-   The **Security mode** of the WCF-NetTcp send port is set to **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="bc150-174">-**傳輸用戶端認證類型**Wcf-nettcp 傳送埠的屬性設定為**無**或是**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-174">-   The **Transport client credential type** property of the WCF-NetTcp send port is set to **None** or **Certificate**.</span></span><br /><span data-ttu-id="bc150-175">-**訊息用戶端認證類型**Wcf-nettcp 傳送埠的屬性設定為**無**， **UserName**，或**憑證**。</span><span class="sxs-lookup"><span data-stu-id="bc150-175">-   The **Message client credential type** property of the WCF-NetTcp send port is set to **None**, **UserName**, or **Certificate**.</span></span> |

> [!NOTE]
>  <span data-ttu-id="bc150-176">因為標準的 WCF 傳送配接器使用，所以[ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)模式來驗證服務憑證，您必須安裝服務 X.509 憑證的 CA 憑證鏈結。</span><span class="sxs-lookup"><span data-stu-id="bc150-176">Because the standard WCF send adapters use the [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960) mode to validate the service certificates, you must install the CA certificate chain for the service X.509 certificates.</span></span> <span data-ttu-id="bc150-177">您可以使用 WCF-Custom 或 WCF-CustomIsolated 配接器變更此預設行為。</span><span class="sxs-lookup"><span data-stu-id="bc150-177">You can use the WCF-Custom or the WCF-CustomIsolated adapters to change this default behavior.</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-178">Wcf-custom 和 Wcf-customisolated 傳送連接埠、 使用者內容、 憑證存放區位置，並安裝憑證的憑證類型而異**serviceCredentials**和**clientCredentials**行為項目設定。</span><span class="sxs-lookup"><span data-stu-id="bc150-178">For the WCF-Custom and WCF-CustomIsolated send ports, the user context, certificate store location, and certificate type for the certificates to install varies between the **serviceCredentials** and **clientCredentials** behavior element settings.</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-179">如果傳送埠使用的憑證項目**端點身分識別**屬性，您也必須安裝預期的服務身分識別的憑證中指定的憑證存放區**端點身分識別**屬性。</span><span class="sxs-lookup"><span data-stu-id="bc150-179">If the send port uses the certificate element for the **Endpoint Identity** property, you also have to install the certificate for the expected service identity into the certificate store specified in the **Endpoint Identity** property.</span></span>  

> [!NOTE]
>  <span data-ttu-id="bc150-180">如果不使用主控件執行個體服務帳戶或系統管理員帳戶登入電腦，您也可以改為使用「執行身分」命令搭配適用的帳戶，以執行相同的動作。</span><span class="sxs-lookup"><span data-stu-id="bc150-180">Instead of log on to the computer using host instance service account or administrator account, you can alternatively use Run As command with applicable accounts to perform the same action.</span></span>  

## <a name="displaying-the-certificates-management-console"></a><span data-ttu-id="bc150-181">顯示憑證管理主控台</span><span class="sxs-lookup"><span data-stu-id="bc150-181">Displaying the Certificates Management Console</span></span>  
 <span data-ttu-id="bc150-182">若要顯示本機電腦和目前的使用者的 [憑證管理主控台] 介面，請執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="bc150-182">To display the Certificates Management Console interface for Local Computer and Current User, perform the following steps:</span></span>  

1.  <span data-ttu-id="bc150-183">按一下 **開始**，按一下**執行**，類型**MMC**，然後按一下**確定**開啟 Microsoft Management Console。</span><span class="sxs-lookup"><span data-stu-id="bc150-183">Click **Start**, click **Run**, type **MMC**, and click **OK** to open the Microsoft Management Console.</span></span>  

2.  <span data-ttu-id="bc150-184">在上**檔案**功能表上，按一下**新增/移除嵌入式管理單元**以顯示**新增/移除嵌入式管理單元** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="bc150-184">On the **File** menu, click **Add/Remove Snap-in** to display the **Add/Remove Snap-in** dialog box.</span></span>  

3.  <span data-ttu-id="bc150-185">按一下 [**新增**顯示**新增獨立嵌入式管理單元**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="bc150-185">Click **Add** to display the **Add Standalone Snap-in** dialog box.</span></span>  

4.  <span data-ttu-id="bc150-186">選取 **憑證**從清單中的嵌入式管理單元，然後按一下**新增**。</span><span class="sxs-lookup"><span data-stu-id="bc150-186">Select **Certificates** from the list of snap-ins, and then click **Add**.</span></span>  

5.  <span data-ttu-id="bc150-187">選取 [**電腦帳戶**，按一下**下一步]**，然後按一下**完成**。</span><span class="sxs-lookup"><span data-stu-id="bc150-187">Select **Computer account**, click **Next**, and then click **Finish**.</span></span> <span data-ttu-id="bc150-188">這樣會新增本機電腦的 [憑證管理主控台] 介面。</span><span class="sxs-lookup"><span data-stu-id="bc150-188">This adds the Certificates Management Console interface for Local Computer.</span></span>  

6.  <span data-ttu-id="bc150-189">請確認**憑證**仍然有選取的嵌入式管理單元清單，然後按一下**新增**一次。</span><span class="sxs-lookup"><span data-stu-id="bc150-189">Ensure that **Certificates** is still selected from the list of snap-ins, and then click **Add** again.</span></span>  

7.  <span data-ttu-id="bc150-190">選取 **我的使用者帳戶**，然後按一下**完成**。</span><span class="sxs-lookup"><span data-stu-id="bc150-190">Select **My user account**, and then click **Finish**.</span></span> <span data-ttu-id="bc150-191">這樣會新增目前的使用者的 [憑證管理主控台] 介面。</span><span class="sxs-lookup"><span data-stu-id="bc150-191">This adds the Certificates Management Console interface for Current User.</span></span>  

    > [!NOTE]
    >  <span data-ttu-id="bc150-192">如此將會針對您目前登入所使用的帳戶顯示 [憑證管理主控台]。</span><span class="sxs-lookup"><span data-stu-id="bc150-192">This displays the Certificates Management Console for the account that you are currently logged on as.</span></span> <span data-ttu-id="bc150-193">如果您需要針對某個服務帳戶將憑證匯入「個人」存放區，您應該先使用該服務帳戶認證來登入。</span><span class="sxs-lookup"><span data-stu-id="bc150-193">If you need to import certificates into the Personal store for a service account then you should log on with the service account credentials first.</span></span>  

8.  <span data-ttu-id="bc150-194">按一下 [**關閉**中**獨立嵌入式管理單元**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="bc150-194">Click **Close** in the **Standalone Snap-in** dialog box.</span></span>  

9. <span data-ttu-id="bc150-195">按一下 [ **[確定]** 中**新增/移除嵌入式管理單元**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="bc150-195">Click **OK** in the **Add/Remove Snap-in** dialog box.</span></span>