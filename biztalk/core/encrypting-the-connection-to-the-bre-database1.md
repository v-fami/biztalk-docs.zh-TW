---
title: "加密 BRE 資料庫連線 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 63edd2bb-97f1-4b8b-8cdc-f4792909ca86
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1b3891ef72b5b1aeba42bce1586ee9c73aa29408
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/01/2017
---
# <a name="encrypt-the-connection-to-the-bre-database"></a><span data-ttu-id="1694c-102">加密 BRE 資料庫的連接</span><span class="sxs-lookup"><span data-stu-id="1694c-102">Encrypt the Connection to the BRE Database</span></span>
<span data-ttu-id="1694c-103">根據公司的安全性原則，請考慮對下列項目加密：</span><span class="sxs-lookup"><span data-stu-id="1694c-103">Based on the security policy of your company, consider encrypting:</span></span>  
  
-   <span data-ttu-id="1694c-104">登入程序期間傳輸的認證。</span><span class="sxs-lookup"><span data-stu-id="1694c-104">The credentials transmitted during the logon process.</span></span>  
  
-   <span data-ttu-id="1694c-105">在網路上，執行「商務規則引擎」(BRE) 原則的用戶端電腦和規則引擎資料庫之間傳輸的資料。</span><span class="sxs-lookup"><span data-stu-id="1694c-105">The data transmitted across a network between the client computer where the Business Rule Engine (BRE) policy runs and the Rule Engine database.</span></span>  
  
 <span data-ttu-id="1694c-106">本主題描述如何加密 SQL Server 上裝載的 BRE 資料庫連線。</span><span class="sxs-lookup"><span data-stu-id="1694c-106">This topic describes how to encrypt the connections to BRE databases hosted on SQL Server.</span></span>  
  
## <a name="encrypt-the-connection-to-the-bre-database"></a><span data-ttu-id="1694c-107">加密 BRE 資料庫的連接</span><span class="sxs-lookup"><span data-stu-id="1694c-107">Encrypt the Connection to the BRE Database</span></span>
 <span data-ttu-id="1694c-108">根據預設，當用戶端應用程式連接到 SQL Server 登入程序期間傳輸的認證會加密。</span><span class="sxs-lookup"><span data-stu-id="1694c-108">By default, credentials that are transmitted during the logon process when a client application connects to SQL Server are encrypted.</span></span> <span data-ttu-id="1694c-109">如果伺服器未提供憑證，啟動時，SQL Server 會產生自我簽署憑證，用它來對登入封包加密。</span><span class="sxs-lookup"><span data-stu-id="1694c-109">If no certificate has been provisioned on the server, when it starts up, SQL Server generates a self-signed certificate that is used to encrypt logon packets.</span></span>  
  
 <span data-ttu-id="1694c-110">若要啟用加密資料的 SQL Server 和用戶端之間透過網路傳送的 SQL Server 執行個體，您應該設定**強制加密**在伺服器上的選項**是**或設定**強制通訊協定加密**選項設定為**是**用戶端上。</span><span class="sxs-lookup"><span data-stu-id="1694c-110">To enable encryption of data that is transmitted across a network between SQL Server and the client for an instance of SQL Server, you should set the **Force Encryption** option on the server to **Yes** or set the **Force Protocol Encryption** option to **Yes** on the client.</span></span>  
  
 <span data-ttu-id="1694c-111">當**強制加密**選項設定為**是**在伺服器端，SQL Server 會使用 SSL 來加密所有通訊*所有用戶端與資料庫伺服器之間*.</span><span class="sxs-lookup"><span data-stu-id="1694c-111">When the **Force Encryption** option is set to **Yes** on the server side, SQL Server uses SSL to encrypt all the communication *between all the clients and the database server*.</span></span> <span data-ttu-id="1694c-112">換言之，伺服器的所有輸入連線都會經過加密。</span><span class="sxs-lookup"><span data-stu-id="1694c-112">In other words, all the incoming connections to the server are encrypted.</span></span> <span data-ttu-id="1694c-113">若要在伺服器啟用這個選項，建議您使用「SQL Server 組態管理員」，在伺服器中安裝憑證。</span><span class="sxs-lookup"><span data-stu-id="1694c-113">To enable this option on the server, it is recommended that you install a certificate on the server by using SQL Server Configuration Manager.</span></span> <span data-ttu-id="1694c-114">如果伺服器中未安裝憑證，伺服器便會在執行個體啟動時自動產生自我簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="1694c-114">If a certificate is not installed on the server, the server auto-generates a self-signed certificate when the instance is started.</span></span>  
  
 <span data-ttu-id="1694c-115">此自我簽署憑證可用來代替信任的憑證授權單位發行的憑證，但它並不提供詐騙識別威脅的任何安全防護。</span><span class="sxs-lookup"><span data-stu-id="1694c-115">This self-signed certificate can be used instead of a certificate from a trusted certificate authority, but it does not provide any protection against spoofing identity threats.</span></span> <span data-ttu-id="1694c-116">在實際執行環境或連接到網際網路的伺服器上，您不應該仰賴使用自我簽署憑證的 SSL。</span><span class="sxs-lookup"><span data-stu-id="1694c-116">You should not rely on SSL using self-signed certificates in a production environment or on servers that are connected to the Internet.</span></span> <span data-ttu-id="1694c-117">已設定選項時，會拒絕存取任何無法支援加密的用戶端。</span><span class="sxs-lookup"><span data-stu-id="1694c-117">When the option is set, any client that cannot support encryption is denied access.</span></span> <span data-ttu-id="1694c-118">必須重新啟動 SQL Server 設定後**強制加密**選項。</span><span class="sxs-lookup"><span data-stu-id="1694c-118">SQL Server must be restarted after setting the **Force Encryption** option.</span></span> <span data-ttu-id="1694c-119">您可以使用 SQL Server 組態管理員 （SQL Server 網路組態） 來設定此選項。</span><span class="sxs-lookup"><span data-stu-id="1694c-119">You can set this option by using the SQL Server Configuration Manager (SQL Server Network Configuration).</span></span>  
  
 <span data-ttu-id="1694c-120">當**強制通訊協定加密**是用戶端設定，SQL Server 會使用 SSL 來加密所有通訊*該用戶端和所有伺服器之間*。</span><span class="sxs-lookup"><span data-stu-id="1694c-120">When the **Force Protocol Encryption** is set on the client side, SQL Server uses SSL to encrypt all the communication *between that client and all the servers*.</span></span> <span data-ttu-id="1694c-121">換言之，該用戶端的所有輸出連線都會經過加密。</span><span class="sxs-lookup"><span data-stu-id="1694c-121">In other words, all the outgoing connections from the client are encrypted.</span></span> <span data-ttu-id="1694c-122">若要啟用此選項，用戶端上的，您應該安裝憑證的伺服器上如果**信任伺服器憑證**用戶端上的選項設定為**否**。</span><span class="sxs-lookup"><span data-stu-id="1694c-122">To enable this option on the client side, you should install a certificate on the server if the **Trust Server Certificate** option on the client is set to **No**.</span></span> <span data-ttu-id="1694c-123">如果**信任伺服器憑證**用戶端上的選項設定為**是**，用戶端不會驗證伺服器憑證，因此會啟用自我簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="1694c-123">If the **Trust Server Certificate** option on the client is set to **Yes**, the client does not validate the server certificate, thereby enabling the use of a self-signed certificate.</span></span> <span data-ttu-id="1694c-124">您可以透過「SQL Server 組態管理員」([SQL Native Client 組態]) 設定這個選項。</span><span class="sxs-lookup"><span data-stu-id="1694c-124">You can set this option by using the SQL Server Configuration Manager (SQL Native Client Configuration).</span></span>  
  
 <span data-ttu-id="1694c-125">SQL Server 也可讓您啟用的加密*從用戶端到伺服器的特定連線*藉由設定**資料的加密/使用加密**旗標設為**是**中連接字串。</span><span class="sxs-lookup"><span data-stu-id="1694c-125">SQL Server also allows you to enable the encryption for a *specific connection from a client to the server* by setting the **Encrypt/Use Encryption for Data** flag to **Yes** in the connection string.</span></span> <span data-ttu-id="1694c-126">不過，BRE 會自動產生連接字串，而不加密選項設為**是**。</span><span class="sxs-lookup"><span data-stu-id="1694c-126">However, the BRE automatically generates the connection strings without setting the encryption option to **Yes**.</span></span> <span data-ttu-id="1694c-127">因此，您無法從用戶端電腦對「規則引擎」資料庫伺服器的特定連線進行加密。</span><span class="sxs-lookup"><span data-stu-id="1694c-127">Hence, you cannot encrypt a specific connection to the Rule Engine database server from the client computer.</span></span> <span data-ttu-id="1694c-128">相反地，您應該設定**強制通訊協定加密**選項在用戶端，如先前段落中所述。</span><span class="sxs-lookup"><span data-stu-id="1694c-128">Instead, you should set the **Force Protocol Encryption** option on the client as mentioned in the previous paragraph.</span></span>