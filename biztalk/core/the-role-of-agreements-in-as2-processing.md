---
title: 協議的 AS2 處理的角色 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: bb6a6fe1-8fb4-4998-a1b4-aadad7e672c4
caps.latest.revision: 23
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4214fe58c10839bcabbd37437002072eae4ad6a8
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36976903"
---
# <a name="the-role-of-agreements-in-as2-processing"></a><span data-ttu-id="fcb44-102">AS2 處理中協議的角色</span><span class="sxs-lookup"><span data-stu-id="fcb44-102">The Role of Agreements in AS2 Processing</span></span>
<span data-ttu-id="fcb44-103">組織會使用 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，從一個或多個交易夥伴接收 AS2 訊息或傳送 AS2 訊息給他們。</span><span class="sxs-lookup"><span data-stu-id="fcb44-103">An organization uses [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to receive AS2 messages from, and send AS2 messages to, one or more trading partners.</span></span> <span data-ttu-id="fcb44-104">交易夥伴，接著會定義組織內的商務實體的商務設定檔。</span><span class="sxs-lookup"><span data-stu-id="fcb44-104">The trading partners, in turn define business profiles that are business entities within an organization.</span></span> <span data-ttu-id="fcb44-105">您會在屬於不同交易夥伴的兩個商務設定檔之間的雙向交易夥伴協議內，設定 AS2 屬性。</span><span class="sxs-lookup"><span data-stu-id="fcb44-105">You set AS2 properties in bi-directional trading partner agreements between two business profiles belonging to different trading partners.</span></span>  
  
 <span data-ttu-id="fcb44-106">您可以在交易夥伴管理 (TPM) 使用者介面中建立交易夥伴協議。</span><span class="sxs-lookup"><span data-stu-id="fcb44-106">You can create trading partner agreements in the Trading Partner Management (TPM) user interface.</span></span> <span data-ttu-id="fcb44-107">TPM 畫面位於**合作對象**節點[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="fcb44-107">The TPM screens are in the **Parties** node of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  
  
 <span data-ttu-id="fcb44-108">如需有關如何交易夥伴的詳細資訊，請商務設定檔，以及合約繫結一起放在 TPM 解決方案，請參閱[交易夥伴管理解決方案的建置組塊](../core/building-blocks-of-a-trading-partner-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="fcb44-108">For more information about how trading partners, business profiles, and agreements tie together into a TPM solution, see [Building Blocks of a Trading Partner Management Solution](../core/building-blocks-of-a-trading-partner-management-solution.md).</span></span>  
  
## <a name="configuring-an-agreement-for-as2-processing"></a><span data-ttu-id="fcb44-109">設定適用於 AS2 處理的協議</span><span class="sxs-lookup"><span data-stu-id="fcb44-109">Configuring an Agreement for AS2 Processing</span></span>  
 <span data-ttu-id="fcb44-110">當某個交易夥伴在任何時間從另一個交易夥伴接收 AS2 訊息或傳送 AS2 訊息給另一個交易夥伴時，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] AS2 接收管線或 AS2 傳送管線就會根據這兩個交易夥伴之間的 AS2 協議屬性來處理訊息。</span><span class="sxs-lookup"><span data-stu-id="fcb44-110">Any time a trading partner receives an AS2 message from, or sends an AS2 message to, another trading partner, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] AS2 receive pipeline or AS2 send pipeline will process the message according to the AS2 agreement properties between the two trading partners.</span></span> <span data-ttu-id="fcb44-111">您可以設定 AS2 屬性，以便定義 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 如何執行包括輸入和輸出的 AS2 通訊。</span><span class="sxs-lookup"><span data-stu-id="fcb44-111">You can configure the AS2 properties that define how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform AS2 communications, both incoming and outgoing.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fcb44-112">與 EDI 處理不同的是，當 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 無法判斷協議時，沒有可用的後援 AS2 協議。</span><span class="sxs-lookup"><span data-stu-id="fcb44-112">Unlike in EDI processing, there are no fallback AS2 agreements that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can use if it cannot determine the agreement.</span></span> <span data-ttu-id="fcb44-113">只有在判斷協議之後，AS2 接收管線或傳送管線才會處理訊息。</span><span class="sxs-lookup"><span data-stu-id="fcb44-113">The AS2 receive or send pipeline will process the message only if an agreement is determined.</span></span>  
> 
> [!NOTE]
>  <span data-ttu-id="fcb44-114">AS2 協議會與 EDI 協議分開設定。</span><span class="sxs-lookup"><span data-stu-id="fcb44-114">The AS2 agreement is configured separately from the EDI agreement.</span></span> <span data-ttu-id="fcb44-115">當接收文件時，AS2 處理期間會解析 AS2 協議，然後會在 EDI 處理期間個別解析 EDI 協議。</span><span class="sxs-lookup"><span data-stu-id="fcb44-115">When receiving documents, the AS2 agreement is resolved during AS2 processing, then the EDI agreement is resolved separately during EDI processing.</span></span> <span data-ttu-id="fcb44-116">這兩個協議會組成合作關係。</span><span class="sxs-lookup"><span data-stu-id="fcb44-116">Both the agreements together make a partnership.</span></span> <span data-ttu-id="fcb44-117">如需詳細資訊，請參閱[交易夥伴協議](../core/trading-partner-agreement.md)。</span><span class="sxs-lookup"><span data-stu-id="fcb44-117">For more information see [Trading Partner Agreement](../core/trading-partner-agreement.md).</span></span>  
> 
> [!NOTE]
>  <span data-ttu-id="fcb44-118">定義合作對象之一般層面 (如名稱與別名、傳送埠和簽章憑證) 的屬性會指定為交易夥伴屬性的一部分。</span><span class="sxs-lookup"><span data-stu-id="fcb44-118">Properties that define general aspects of the party, such as name and aliases, send ports, and signing certificate are specified as part of the trading partner’s properties.</span></span>  
  
 <span data-ttu-id="fcb44-119">HTTP/HTTPS 傳輸可以用於 EDIINT/AS2 編碼訊息或透過 AS2 編碼的非 EDI 訊息。</span><span class="sxs-lookup"><span data-stu-id="fcb44-119">You can use HTTP/HTTPS transport for either EDIINT/AS2-encoded messages or non-EDI over AS2-encoded messages.</span></span> <span data-ttu-id="fcb44-120">如果您透過 HTTP/HTTPS 傳輸來傳送 EDIINT/AS2 編碼訊息，則會套用該協議的 EDI 屬性。</span><span class="sxs-lookup"><span data-stu-id="fcb44-120">If you transmit EDIINT/AS2-encoded messages over HTTP/HTTPS transport, the EDI properties for the agreement will apply.</span></span>  
  
 <span data-ttu-id="fcb44-121">中定義主要組織的簽署憑證**憑證**頁**BizTalk 群組-群組屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fcb44-121">The signing certificate for the home organization is defined in the **Certificate** page of the **BizTalk Group - Group Properties** dialog box.</span></span> <span data-ttu-id="fcb44-122">此外，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 可讓您藉由在協議屬性中定義憑證，以覆寫 AS2 訊息的預設簽章憑證。</span><span class="sxs-lookup"><span data-stu-id="fcb44-122">Additionally, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] enables you to override the default signing certificate for AS2 messages by defining a certificate as part of the agreement properties.</span></span>  <span data-ttu-id="fcb44-123">若要定義特定協議不同的憑證，請使用**簽章憑證**頁面中，單向 AS2 協議**協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fcb44-123">To define a different certificate for a specific agreement, use the **Signature Certificate** page of the one-way AS2 agreement in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="fcb44-124">如需有關如何指定不同的憑證的指示，請參閱[設定簽章憑證 (AS2)](../core/configuring-signature-certificates-as2.md)。</span><span class="sxs-lookup"><span data-stu-id="fcb44-124">For instructions on how to specify a different certificate, see [Configuring Signature Certificates (AS2)](../core/configuring-signature-certificates-as2.md).</span></span>  
  
## <a name="determining-an-agreement-for-as2-processing"></a><span data-ttu-id="fcb44-125">判斷協議的 AS2 處理</span><span class="sxs-lookup"><span data-stu-id="fcb44-125">Determining an Agreement for AS2 Processing</span></span>  
 <span data-ttu-id="fcb44-126">當[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收 AS2 編碼訊息，它會嘗試判斷傳送該訊息比對 AS2 合作對象-From 標頭與 AS2-從在單向協議的合作對象的協議設定。</span><span class="sxs-lookup"><span data-stu-id="fcb44-126">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an AS2-encoded message, it attempts to determine the party that sent the message by matching the AS2-From header to the AS2-From agreement settings in the one-way agreement for the party.</span></span> <span data-ttu-id="fcb44-127">當 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 傳送 AS2 編碼訊息時，它會比對合作對象之單向協議內的 AS2-To 標頭與 AS2-To 協議屬性，以嘗試判斷將會接收訊息的合作對象。</span><span class="sxs-lookup"><span data-stu-id="fcb44-127">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sends an AS2-encoded message, it attempts to determine the party that will receive the message by matching the AS2-To header to the AS2-To agreement property in the one-way agreement for the party.</span></span> <span data-ttu-id="fcb44-128">如需詳細資訊，請參閱 <<c0> [ 在內送 AS2 訊息的協議解析](../core/agreement-resolution-for-incoming-as2-messages.md)或是[外寄 AS2 訊息的協議解析](../core/agreement-resolution-for-outgoing-as2-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="fcb44-128">For more information, see [Agreement Resolution for Incoming AS2 Messages](../core/agreement-resolution-for-incoming-as2-messages.md) or [Agreement Resolution for Outgoing AS2 Messages](../core/agreement-resolution-for-outgoing-as2-messages.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fcb44-129">另請參閱</span><span class="sxs-lookup"><span data-stu-id="fcb44-129">See Also</span></span>  
 <span data-ttu-id="fcb44-130">[內送 AS2 訊息的協議解析](../core/agreement-resolution-for-incoming-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="fcb44-130">[Agreement Resolution for Incoming AS2 Messages](../core/agreement-resolution-for-incoming-as2-messages.md) </span></span>  
 <span data-ttu-id="fcb44-131">[外寄 AS2 訊息的協議解析](../core/agreement-resolution-for-outgoing-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="fcb44-131">[Agreement Resolution for Outgoing AS2 Messages](../core/agreement-resolution-for-outgoing-as2-messages.md) </span></span>  
 [<span data-ttu-id="fcb44-132">設定 AS2 屬性</span><span class="sxs-lookup"><span data-stu-id="fcb44-132">Configuring AS2 Properties</span></span>](../core/configuring-as2-properties.md)