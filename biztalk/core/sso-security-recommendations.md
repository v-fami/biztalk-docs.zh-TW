---
title: SSO 安全性建議 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- SSO, deploying
- Kerberos protocol, SSO
- deploying, SSO
- user accounts, SSO
- deploying, security
- SQL Server, SSO
- security, SSO
- SSO, Kerberos protocol
- SSO, auditing
- best practices, deploying
- SSO, Windows groups
- SSO, best practices
- SSO, perimeter network
- Windows groups, SSO
- SSO, SQL Server access
- best practices, security
- Master Secret server, clustering
- perimeter networks
- auditing [SSO]
- SSO, security
- SSO, user accounts
- Master Secret server, best practices
ms.assetid: 7ae922b4-fd48-41f4-aaab-419a5e22c753
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0a86e669e603eaabf142ce446b8d7204a6cc0091
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22279838"
---
# <a name="sso-security-recommendations"></a><span data-ttu-id="63cfc-102">SSO 安全性建議</span><span class="sxs-lookup"><span data-stu-id="63cfc-102">SSO Security Recommendations</span></span>
<span data-ttu-id="63cfc-103">使用「企業單一登入」(SSO) 系統，使用者只需使用一組認證，便可連接至不同的系統。</span><span class="sxs-lookup"><span data-stu-id="63cfc-103">With the Enterprise Single Sign-On (SSO) system, users can connect to different systems by using only one set of credentials.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="63cfc-104">會使用 SSO 系統做為機密資訊的存放區。</span><span class="sxs-lookup"><span data-stu-id="63cfc-104"> leverages the SSO system as a store for sensitive information.</span></span> <span data-ttu-id="63cfc-105">安裝 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 執行階段時會自動安裝 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，不過，您也可在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 以外的環境，將「企業單一登入」以獨立元件方式安裝。</span><span class="sxs-lookup"><span data-stu-id="63cfc-105">Although [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically installs whenever you install the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime, you can also install Enterprise Single Sign-On as a stand-alone component, independent of your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="63cfc-106">如需企業單一登入的詳細資訊，請參閱[使用 SSO](../core/using-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-106">For more information about Enterprise Single Sign-On, see [Using SSO](../core/using-sso.md).</span></span> <span data-ttu-id="63cfc-107">建議您遵循以下指導方針，在您的環境中保護和部署「企業單一登入」(SSO) 服務和資源。</span><span class="sxs-lookup"><span data-stu-id="63cfc-107">It is recommended you follow these guidelines for securing and deploying the Enterprise Single Sign-On (SSO) services and resources in your environment.</span></span>  
  
## <a name="general-deployment-recommendations-for-sso"></a><span data-ttu-id="63cfc-108">SSO 的一般部署建議</span><span class="sxs-lookup"><span data-stu-id="63cfc-108">General Deployment Recommendations for SSO</span></span>  
  
-   <span data-ttu-id="63cfc-109">即使您的環境中有多個 BizTalk 群組，但整個環境中必須只能有一個主要密碼伺服器和一個 SSO 資料庫。</span><span class="sxs-lookup"><span data-stu-id="63cfc-109">There must be only one master secret server and only one SSO database in the entire environment, even if you have multiple BizTalk groups in your environment.</span></span> <span data-ttu-id="63cfc-110">在設定其他的 BizTalk 和 SSO 伺服器之前，必須先設定這兩個伺服器。</span><span class="sxs-lookup"><span data-stu-id="63cfc-110">You must configure these two servers before you configure any other BizTalk and SSO servers.</span></span>  
  
-   <span data-ttu-id="63cfc-111">您的環境必須要有一個時間伺服器，以確保所有 SSO 伺服器均同步。</span><span class="sxs-lookup"><span data-stu-id="63cfc-111">You must have a time server in your environment to ensure all SSO servers are synchronized.</span></span> <span data-ttu-id="63cfc-112">若 SSO 伺服器的時鐘未同步，環境的安全性會受到影響。</span><span class="sxs-lookup"><span data-stu-id="63cfc-112">If the clocks on the SSO servers are not synchronized, the security of your environment could be compromised.</span></span>  
  
-   <span data-ttu-id="63cfc-113">假設整個環境中只有一個主要密碼伺服器，建議主要密碼伺服器使用主動-被動叢集組態。</span><span class="sxs-lookup"><span data-stu-id="63cfc-113">Considering there is only one master secret server in your entire environment, it is recommended to use an active-passive cluster configuration for the master secret server.</span></span> <span data-ttu-id="63cfc-114">如需叢集化主要密碼伺服器的詳細資訊，請參閱[如何叢集化主要密碼伺服器](../core/how-to-cluster-the-master-secret-server1.md)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-114">For more information about clustering the master secret server, see [How to Cluster the Master Secret Server](../core/how-to-cluster-the-master-secret-server1.md).</span></span>  
  
-   <span data-ttu-id="63cfc-115">主要密碼伺服器保存 SSO 系統在 SSO 資料庫中用來加密資訊的加密金鑰。</span><span class="sxs-lookup"><span data-stu-id="63cfc-115">The master secret server holds the encryption key that the SSO system uses to encrypt the information in the SSO database.</span></span> <span data-ttu-id="63cfc-116">建議您不要在此電腦安裝或設定任何其他產品或服務。</span><span class="sxs-lookup"><span data-stu-id="63cfc-116">It is recommended that you do not install or configure any other products or services on this computer.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="63cfc-117">您安裝和設定主要密碼伺服器的電腦，不一定要是伺服器。</span><span class="sxs-lookup"><span data-stu-id="63cfc-117">The computer where you install and configure the master secret server does not have to be a server.</span></span>  
  
-   <span data-ttu-id="63cfc-118">主要密碼伺服器應能存取卸除式媒體或 NTFS 檔案系統資料夾，才能備份和還原主要密碼。</span><span class="sxs-lookup"><span data-stu-id="63cfc-118">The master secret server should have access to a removable media or NTFS file system folder in order to back up and restore the master secret.</span></span> <span data-ttu-id="63cfc-119">若您使用卸除式媒體，請確定使用適當措施以保護卸除式媒體。</span><span class="sxs-lookup"><span data-stu-id="63cfc-119">If you use removable media, ensure you take appropriate measures to protect the removable media.</span></span> <span data-ttu-id="63cfc-120">若將主要密碼備份至 NTFS 檔案系統，請保護檔案和資料夾的安全性。</span><span class="sxs-lookup"><span data-stu-id="63cfc-120">If you back up the master secret to an NTFS file system, ensure you protect the file and the folder.</span></span> <span data-ttu-id="63cfc-121">只有 SSO 系統管理員才可存取此檔案。</span><span class="sxs-lookup"><span data-stu-id="63cfc-121">Only the SSO Administrator should have access to this file.</span></span>  
  
-   <span data-ttu-id="63cfc-122">您應在主要密碼伺服器產生主要密碼後，立即將它備份。</span><span class="sxs-lookup"><span data-stu-id="63cfc-122">You should back up the master secret as soon as the master secret server generates it.</span></span> <span data-ttu-id="63cfc-123">這樣在主要密碼伺服器故障時，才能夠還原 SSO 資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="63cfc-123">This is so that you may recover the data in the SSO database in the event the master secret server fails.</span></span> <span data-ttu-id="63cfc-124">如需備份主要密碼的詳細資訊，請參閱[管理主要密碼](../core/managing-the-master-secret.md)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-124">For more information about backing up the master secret, see [Managing the Master Secret](../core/managing-the-master-secret.md).</span></span>  
  
-   <span data-ttu-id="63cfc-125">備份目前的密碼，或定期產生新密碼，例如 1 個月 1 次。</span><span class="sxs-lookup"><span data-stu-id="63cfc-125">Back up your current secret, or generate a new secret on a regular basis, for example, once a month.</span></span> <span data-ttu-id="63cfc-126">沒有密碼，便無法從 SSO 資料庫中擷取資訊。</span><span class="sxs-lookup"><span data-stu-id="63cfc-126">Without the secret, you cannot retrieve information from the SSO database.</span></span> <span data-ttu-id="63cfc-127">如需有關備份和還原主要密碼的詳細資訊，請參閱[管理主要密碼](../core/managing-the-master-secret.md)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-127">For more information about backing up and restoring the master secret, see [Managing the Master Secret](../core/managing-the-master-secret.md).</span></span>  
  
## <a name="security-recommendations-for-sso-groups-and-accounts"></a><span data-ttu-id="63cfc-128">SSO 群組和帳戶的安全性建議</span><span class="sxs-lookup"><span data-stu-id="63cfc-128">Security Recommendations for SSO Groups and Accounts</span></span>  
  
-   <span data-ttu-id="63cfc-129">建議使用 Windows 群組而非單一使用者帳戶，特別是「SSO 系統管理員」和「SSO 分支機構系統管理員」群組。</span><span class="sxs-lookup"><span data-stu-id="63cfc-129">It is recommended to use Windows groups, and not single user accounts, especially for the SSO Administrator and SSO Affiliate administrator groups.</span></span> <span data-ttu-id="63cfc-130">這些群組至少需有兩個使用者帳戶，以做為群組的成員。</span><span class="sxs-lookup"><span data-stu-id="63cfc-130">These groups must have at least two user accounts as members of the group at all times.</span></span>  
  
-   <span data-ttu-id="63cfc-131">SSO 執行階段服務帳戶和 SSO 系統管理員使用者帳戶應該是不同的帳戶，即使它們是同一個「SSO 系統管理員」群組的成員。</span><span class="sxs-lookup"><span data-stu-id="63cfc-131">The SSO runtime service accounts and the SSO administrator user accounts should be different accounts, even when they are members of the same SSO Administrators group.</span></span> <span data-ttu-id="63cfc-132">執行管理工作 (例如產生和備份密碼) 的 SSO 系統管理員使用者必須是 Windows 管理員，而 SSO 執行階段服務帳戶則不一定要是 Windows 管理員。</span><span class="sxs-lookup"><span data-stu-id="63cfc-132">The SSO administrator users performing administrative tasks such as generating and backing up the secret must be Windows administrators, while the SSO runtime service accounts do not need to be Windows administrators.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="63cfc-133">Windows 管理員使用者權限不能取代 SSO 系統管理員使用者權限。</span><span class="sxs-lookup"><span data-stu-id="63cfc-133">Windows administrator user rights do not supersede the user rights of the SSO administrator.</span></span> <span data-ttu-id="63cfc-134">即使您已是 Windows 管理員，但仍需為 SSO 系統管理員群組的成員，才能執行任何 SSO 管理層級工作。</span><span class="sxs-lookup"><span data-stu-id="63cfc-134">To perform any SSO administration-level task you must be a member of SSO administrators group even if you already are a Windows administrator.</span></span>  
  
-   <span data-ttu-id="63cfc-135">若使用 SSO 票證功能，必須使用處理網域 (SSO 伺服器所在的網域) 的電腦所識別的網域帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-135">If you use the SSO ticketing feature, you must use domain accounts that the computers in the processing domain (domain where the SSO servers are) recognize.</span></span>  
  
-   <span data-ttu-id="63cfc-136">建議主要密碼伺服器所對應的 SSO 服務，使用專用的服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-136">It is recommended to use a unique service account for the SSO service corresponding to the master secret server.</span></span>  
  
-   <span data-ttu-id="63cfc-137">SSO 系統管理員帳戶是 SSO 系統中高度授權的帳戶，也是擁有 SSO 資料庫的 SQL Server 管理員帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-137">The SSO administrator account is a highly privileged account in the SSO system, which also is the SQL Server administrator account for the SQL server that has the SSO database.</span></span> <span data-ttu-id="63cfc-138">您應該具備 SSO 系統管理員的專用帳戶，而且不得將這些帳戶用於任何其他用途。</span><span class="sxs-lookup"><span data-stu-id="63cfc-138">You should have dedicated accounts for SSO administrators, and should not use these accounts for any other purposes.</span></span> <span data-ttu-id="63cfc-139">您應將 SSO 系統管理員群組的成員資格，限制為負責執行和維護 SSO 系統的帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-139">You should limit the membership to the SSO administrators group only to those accounts responsible for running and maintaining the SSO system.</span></span>  
  
-   <span data-ttu-id="63cfc-140">您必須手動將 BizTalk 系統管理員群組新增至「SSO 分支機構系統管理員」群組，如此 BizTalk 系統管理員便能使用 SSO 系統，將配接器的組態資訊儲存在 SSO 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="63cfc-140">You must manually add the BizTalk administrators group to the SSO Affiliate Administrators group so that the BizTalk administrators can leverage the SSO system to save the configuration information for the adapters in the SSO database.</span></span> <span data-ttu-id="63cfc-141">只有管理配接器的 BizTalk 系統管理員需為「SSO 分支機構系統管理員」群組的成員，</span><span class="sxs-lookup"><span data-stu-id="63cfc-141">Only the BizTalk administrators managing adapters need to be members of the SSO Affiliate Administrators group.</span></span> <span data-ttu-id="63cfc-142">BizTalk 系統管理員不需為 SSO 系統管理員。</span><span class="sxs-lookup"><span data-stu-id="63cfc-142">BizTalk administrators do not need to be SSO administrators.</span></span>  
  
## <a name="security-recommendations-for-an-sso-deployment"></a><span data-ttu-id="63cfc-143">SSO 部署的安全性建議</span><span class="sxs-lookup"><span data-stu-id="63cfc-143">Security Recommendations for an SSO Deployment</span></span>  
  
-   <span data-ttu-id="63cfc-144">若您的網路支援 Kerberos 驗證，您應該註冊所有 SSO 伺服器。</span><span class="sxs-lookup"><span data-stu-id="63cfc-144">If your network supports Kerberos authentication, you should register all SSO servers.</span></span> <span data-ttu-id="63cfc-145">當您在主要密碼伺服器與 SSO 資料庫之間使用 Kerberos 驗證時，需在 SSO 資料庫所在的 SQL Server 上設定服務主要名稱 (SPN)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-145">When you use Kerberos authentication between the master secret server and the SSO database, you must configure Service Principal Names (SPN) on the SQL server where the SSO database is located.</span></span> <span data-ttu-id="63cfc-146">如需設定 「 服務主體名稱的詳細資訊，請參閱 Microsoft 下載網站[http://go.microsoft.com/fwlink/?LinkId=195797](http://go.microsoft.com/fwlink/?LinkId=195797)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-146">For more information about configuring Service Principal Names, see Microsoft Download Web site at [http://go.microsoft.com/fwlink/?LinkId=195797](http://go.microsoft.com/fwlink/?LinkId=195797).</span></span>  
  
-   <span data-ttu-id="63cfc-147">當執行[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]或[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]，如果主要密碼伺服器位於不同的網域從其他 SSO 伺服器和 SSO 資料庫中，您必須停用 RPC 安全性 （用於電腦之間的 Data Transaction Coordinator (DTC) 驗證) 主要密碼伺服器、 （處理在處理網域中的電腦） 的 SSO 伺服器和 SSO 資料庫。</span><span class="sxs-lookup"><span data-stu-id="63cfc-147">When running [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] or [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], if the master secret server is on a different domain from the other SSO servers and from the SSO database, you must disable RPC security (as used for Data Transaction Coordinator (DTC) authentication between computers) on the master secret server, on the SSO servers (processing computers in the processing domain), and on the SSO database.</span></span> <span data-ttu-id="63cfc-148">RPC 安全性是 [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] 與 [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] 中的 DTC 功能。</span><span class="sxs-lookup"><span data-stu-id="63cfc-148">RPC security is a DTC feature in [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] and [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="63cfc-149">當您停用 RPC 安全性時，RPC 呼叫的 DTC 驗證安全性等級會回到 Microsoft Windows Server 2003 中提供。</span><span class="sxs-lookup"><span data-stu-id="63cfc-149">When you disable RPC security, the DTC authentication security level for RPC calls goes back to one available in Microsoft Windows Server 2003.</span></span>  
  
-   <span data-ttu-id="63cfc-150">SSO 系統管理員應定期監控主要密碼伺服器和 SSO 伺服器中的事件日誌，以瞭解 SSO 稽核事件。</span><span class="sxs-lookup"><span data-stu-id="63cfc-150">SSO administrators should regularly monitor the event log in the master secret server and the SSO server for SSO auditing events.</span></span>  
  
-   <span data-ttu-id="63cfc-151">除了防火牆，建議在 SSO 伺服器和 SSO 資料庫之間使用網際網路通訊協定安全性 (IPSec) 或安全通訊端層 (SSL)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-151">In addition to firewalls, it is recommended to use Internet Protocol security (IPSec) or Secure Sockets Layer (SSL) between all the SSO servers and the SSO database.</span></span> <span data-ttu-id="63cfc-152">如需有關 SSL 的詳細資訊，請參閱 Microsoft 說明及支援 」 網站，網址[http://go.microsoft.com/fwlink/?LinkId=195798](http://go.microsoft.com/fwlink/?LinkId=195798)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-152">For more information about SSL, see Microsoft Help and Support Web site at [http://go.microsoft.com/fwlink/?LinkId=195798](http://go.microsoft.com/fwlink/?LinkId=195798).</span></span> <span data-ttu-id="63cfc-153">如需有關所有 SSO 伺服器與 SSO 資料庫之間使用 SSL 的詳細資訊，請參閱[如何針對 SSO 啟用 SSL](../core/how-to-enable-ssl-for-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-153">For more information about using SSL between all the SSO servers and the SSO database, see [How to Enable SSL for SSO](../core/how-to-enable-ssl-for-sso.md).</span></span>  
  
## <a name="perimeter-network"></a><span data-ttu-id="63cfc-154">周邊網路</span><span class="sxs-lookup"><span data-stu-id="63cfc-154">Perimeter Network</span></span>  
 <span data-ttu-id="63cfc-155">執行 Internet Information Services (IIS) 和「企業單一登入」時，請按照以下建議執行：</span><span class="sxs-lookup"><span data-stu-id="63cfc-155">When running Internet Information Services (IIS) and Enterprise Single Sign-On, follow these recommendations:</span></span>  
  
-   <span data-ttu-id="63cfc-156">若 IIS 是在周邊網路 (也稱為非軍事區域、DMZ 以及過濾的子網路)，請在防火牆後面提供另一個 IIS 伺服器來連接 SSO 系統。</span><span class="sxs-lookup"><span data-stu-id="63cfc-156">If IIS is in a perimeter network (also known as demilitarized zone, DMZ, and screened subnet), provide another IIS server behind the firewall to connect to the SSO system.</span></span>  
  
-   <span data-ttu-id="63cfc-157">請不要開啟 IIS 上的遠端程序呼叫 (RPC) 連接埠。</span><span class="sxs-lookup"><span data-stu-id="63cfc-157">Do not open the remote procedure calls (RPC) port on IIS.</span></span>  
  
## <a name="sql-server-access"></a><span data-ttu-id="63cfc-158">SQL Server 存取</span><span class="sxs-lookup"><span data-stu-id="63cfc-158">SQL Server Access</span></span>  
 <span data-ttu-id="63cfc-159">所有 SSO 伺服器都會存取 SQL Server SSO 資料庫。</span><span class="sxs-lookup"><span data-stu-id="63cfc-159">All SSO servers access the SQL Server SSO database.</span></span> <span data-ttu-id="63cfc-160">如需如何保護 SQL Server 資料庫的詳細資訊，請參閱[http://go.microsoft.com/fwlink/?LinkId=33175](http://go.microsoft.com/fwlink/?LinkId=33175)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-160">For more information about how to secure SQL Server databases, see [http://go.microsoft.com/fwlink/?LinkId=33175](http://go.microsoft.com/fwlink/?LinkId=33175).</span></span>  
  
 <span data-ttu-id="63cfc-161">建議您使用安全通訊端層 (SSL) 和 (或) 網際網路通訊協定安全性 (IPSec)，以保護 SSO 伺服器和 SSO 資料庫之間資料傳輸的安全性。</span><span class="sxs-lookup"><span data-stu-id="63cfc-161">It is recommended that you use Secure Sockets Layer (SSL) and/or Internet Protocol security (IPSec) to secure the transmission of data between the SSO servers and the SSO database.</span></span> <span data-ttu-id="63cfc-162">如需有關使用 SSL 的詳細資訊，請參閱[http://go.microsoft.com/fwlink/?LinkId=195798](http://go.microsoft.com/fwlink/?LinkId=195798)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-162">For more information about using SSL, see [http://go.microsoft.com/fwlink/?LinkId=195798](http://go.microsoft.com/fwlink/?LinkId=195798).</span></span>  
  
 <span data-ttu-id="63cfc-163">若只想針對 SSO 伺服器和 SSO 資料庫之間的連線啟用 SSL，您可使用 ssoconfig 公用程式在每個 SSO 伺服器上設定 SSL 支援。</span><span class="sxs-lookup"><span data-stu-id="63cfc-163">To enable SSL for only the connection between the SSO server and the SSO database, you can set SSL support on every SSO server using the ssoconfig utility.</span></span> <span data-ttu-id="63cfc-164">此選項可讓 SSO 永遠使用 SSL 來存取 SSO 資料庫。</span><span class="sxs-lookup"><span data-stu-id="63cfc-164">This option enables SSO to always use SSL when accessing the SSO database.</span></span> <span data-ttu-id="63cfc-165">如需詳細資訊，請參閱[如何針對 SSO 啟用 SSL](../core/how-to-enable-ssl-for-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-165">For more information, see [How to Enable SSL for SSO](../core/how-to-enable-ssl-for-sso.md).</span></span>  
  
## <a name="strong-passwords"></a><span data-ttu-id="63cfc-166">增強式密碼</span><span class="sxs-lookup"><span data-stu-id="63cfc-166">Strong Passwords</span></span>  
 <span data-ttu-id="63cfc-167">對於所有帳戶而言，使用強式密碼十分重要，特別是「SSO 系統管理員」群組成員的帳戶，因為這些使用者可以控制整個 SSO 系統。</span><span class="sxs-lookup"><span data-stu-id="63cfc-167">It is very important that you use strong passwords for all accounts, especially the accounts that are members of the SSO Administrators group, because these users have control over the entire SSO system.</span></span>  
  
## <a name="sso-administrator-accounts"></a><span data-ttu-id="63cfc-168">SSO 系統管理員帳戶</span><span class="sxs-lookup"><span data-stu-id="63cfc-168">SSO Administrator Accounts</span></span>  
 <span data-ttu-id="63cfc-169">建議您針對在不同電腦上執行的 SSO 服務，使用不同的服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-169">It is recommended that you use different service accounts for the SSO services running on different computers.</span></span> <span data-ttu-id="63cfc-170">您不應使用執行管理作業 (例如產生和備份 SSO 服務的密碼) 的 SSO 系統管理員帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-170">You should not use the SSO administrator account that performs administration operations such as generating and backing up the secret for the SSO service.</span></span> <span data-ttu-id="63cfc-171">SSO 服務帳戶不應是該電腦的本機系統管理員，但執行管理作業的 SSO 系統管理員必須是電腦的本機系統管理員，才能執行部分作業。</span><span class="sxs-lookup"><span data-stu-id="63cfc-171">While the SSO service accounts should not be local administrators on that computer, the SSO administrator that is performing administration operations must be a local administrator on the computer for some operations.</span></span>  
  
## <a name="master-secret-server"></a><span data-ttu-id="63cfc-172">主要密碼伺服器</span><span class="sxs-lookup"><span data-stu-id="63cfc-172">Master Secret Server</span></span>  
 <span data-ttu-id="63cfc-173">強烈建議您保護和鎖定主要密碼伺服器。</span><span class="sxs-lookup"><span data-stu-id="63cfc-173">It is highly recommended that you secure and lock down the master secret server.</span></span> <span data-ttu-id="63cfc-174">您不應將此伺服器當成處理伺服器。</span><span class="sxs-lookup"><span data-stu-id="63cfc-174">You should not use this server as a processing server.</span></span> <span data-ttu-id="63cfc-175">此伺服器的唯一用途應該是保存主要密碼。</span><span class="sxs-lookup"><span data-stu-id="63cfc-175">The only purpose of this server should be to hold the master secret.</span></span> <span data-ttu-id="63cfc-176">您應確定此電腦的實體安全性，且只有「SSO 系統管理員」才能存取此電腦。</span><span class="sxs-lookup"><span data-stu-id="63cfc-176">You should ensure the physical security of this computer and only SSO Administrators should have access to this computer.</span></span>  
  
## <a name="kerberos"></a><span data-ttu-id="63cfc-177">Kerberos</span><span class="sxs-lookup"><span data-stu-id="63cfc-177">Kerberos</span></span>  
 <span data-ttu-id="63cfc-178">SSO 支援 Kerberos，且建議您為 SSO 設定 Kerberos。</span><span class="sxs-lookup"><span data-stu-id="63cfc-178">SSO supports Kerberos, and it is recommended that you set up Kerberos for SSO.</span></span> <span data-ttu-id="63cfc-179">要在 SSO 設定 Kerberos，必須註冊 SSO 服務的 Secure Principal Name (SPN)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-179">To set up Kerberos with SSO, you must register a Secure Principal Name (SPN) for the SSO service.</span></span> <span data-ttu-id="63cfc-180">依照預設，當您設定 Kerberos 時，SSO 會使用該 SPN 來驗證使用 SSO 服務的元件。</span><span class="sxs-lookup"><span data-stu-id="63cfc-180">By default, when you setup Kerberos, SSO uses that SPN to authenticate the components using the SSO Service.</span></span> <span data-ttu-id="63cfc-181">建議您在 SSO 管理子服務和 SSO 伺服器之間設定 Kerberos 驗證。</span><span class="sxs-lookup"><span data-stu-id="63cfc-181">It is recommended you set up Kerberos authentication between the SSO administrative subservices and the SSO server.</span></span> <span data-ttu-id="63cfc-182">您也可以在 SSO 伺服器之間、SSO 伺服器之間，以及 SSO 資料庫所在的 SQL Server 之間使用 Kerberos 驗證。</span><span class="sxs-lookup"><span data-stu-id="63cfc-182">You can also user Kerberos authentication between the SSO servers and between the SSO servers and the SQL server where the SSO database is.</span></span>  
  
 <span data-ttu-id="63cfc-183">要設定和驗證 Kerberos，您可使用公用程式 setspn 和 kerbtray。</span><span class="sxs-lookup"><span data-stu-id="63cfc-183">To set up and verify Kerberos, you use the utilities setspn and kerbtray.</span></span> <span data-ttu-id="63cfc-184">如需有關這些公用程式的詳細資訊，請參閱[http://go.microsoft.com/fwlink/?LinkId=33178](http://go.microsoft.com/fwlink/?LinkId=33178)。</span><span class="sxs-lookup"><span data-stu-id="63cfc-184">For more information about these utilities, see [http://go.microsoft.com/fwlink/?LinkId=33178](http://go.microsoft.com/fwlink/?LinkId=33178).</span></span>  
  
## <a name="delegation"></a><span data-ttu-id="63cfc-185">委派</span><span class="sxs-lookup"><span data-stu-id="63cfc-185">Delegation</span></span>  
 <span data-ttu-id="63cfc-186">使用 [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] 或 [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] 時可使用限制委派，但建議您不要使用委派來執行「單一登入系統管理員」的工作。</span><span class="sxs-lookup"><span data-stu-id="63cfc-186">When using [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] or [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], it is possible to use constrained delegation, but it is recommended that you do not use delegation to perform the tasks of the Single Sign-On Administrator.</span></span> <span data-ttu-id="63cfc-187">同樣地，建議您不要將其他工作或使用者權限委派給「單一登入」系統管理員。</span><span class="sxs-lookup"><span data-stu-id="63cfc-187">Similarly, it is recommended that you do not delegate additional tasks or user rights to the Single Sign-On administrator.</span></span>  
  
## <a name="auditing"></a><span data-ttu-id="63cfc-188">稽核</span><span class="sxs-lookup"><span data-stu-id="63cfc-188">Auditing</span></span>  
 <span data-ttu-id="63cfc-189">稽核是追蹤環境資訊的重要機制。</span><span class="sxs-lookup"><span data-stu-id="63cfc-189">Auditing is a critical mechanism for tracking information in your environment.</span></span> <span data-ttu-id="63cfc-190">「企業單一登入」(SSO) 會稽核所有在 SSO 資料庫執行的作業。</span><span class="sxs-lookup"><span data-stu-id="63cfc-190">Enterprise Single Sign-On (SSO) audits all operations performed in the SSO database.</span></span> <span data-ttu-id="63cfc-191">SSO 使用資料庫本身的事件日誌和稽核日誌。</span><span class="sxs-lookup"><span data-stu-id="63cfc-191">SSO uses event logs and audit logs of the database itself.</span></span> <span data-ttu-id="63cfc-192">SSO 為「單一登入」伺服器提供兩種稽核層級：</span><span class="sxs-lookup"><span data-stu-id="63cfc-192">SSO provides two audit levels for the Single Sign-On servers:</span></span>  
  
-   <span data-ttu-id="63cfc-193">正面稽核層級會稽核成功的作業</span><span class="sxs-lookup"><span data-stu-id="63cfc-193">Positive auditing levels audit successful operations</span></span>  
  
-   <span data-ttu-id="63cfc-194">負面稽核層級會稽核失敗的作業</span><span class="sxs-lookup"><span data-stu-id="63cfc-194">Negative auditing levels audit operations that fail</span></span>  
  
 <span data-ttu-id="63cfc-195">SSO 系統管理員可設定符合公司政策的正面和負面稽核層級。</span><span class="sxs-lookup"><span data-stu-id="63cfc-195">SSO administrators can set the positive and negative audit levels that suit their corporate policies.</span></span>  
  
 <span data-ttu-id="63cfc-196">您可以在下列層級的其中一個設定正面和負面稽核：</span><span class="sxs-lookup"><span data-stu-id="63cfc-196">You can set positive and negative audits to one of the following levels:</span></span>  
  
 <span data-ttu-id="63cfc-197">0 = 無。</span><span class="sxs-lookup"><span data-stu-id="63cfc-197">0 = None.</span></span> <span data-ttu-id="63cfc-198">此層級不會發出稽核訊息</span><span class="sxs-lookup"><span data-stu-id="63cfc-198">This level issues no audit messages</span></span>  
  
 <span data-ttu-id="63cfc-199">1 = 低</span><span class="sxs-lookup"><span data-stu-id="63cfc-199">1 = Low</span></span>  
  
 <span data-ttu-id="63cfc-200">2 = 中</span><span class="sxs-lookup"><span data-stu-id="63cfc-200">2 = Medium</span></span>  
  
 <span data-ttu-id="63cfc-201">3 = 高。</span><span class="sxs-lookup"><span data-stu-id="63cfc-201">3 = High.</span></span> <span data-ttu-id="63cfc-202">此層級會儘可能發出最多的稽核訊息</span><span class="sxs-lookup"><span data-stu-id="63cfc-202">This level issues as many audit messages as possible</span></span>  
  
 <span data-ttu-id="63cfc-203">正面稽核的預設值為 0 （無）、 和負面稽核的預設值為 1 （低）。</span><span class="sxs-lookup"><span data-stu-id="63cfc-203">The default value for positive auditing is 0 (none), and the default value for negative auditing is 1 (low).</span></span> <span data-ttu-id="63cfc-204">您可按照 SSO 系統的稽核層級來變更這些值。</span><span class="sxs-lookup"><span data-stu-id="63cfc-204">You may want to change these values depending on the level of auditing you want for your SSO system.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="63cfc-205">「企業單一登入」稽核會發出「單一登入」服務產生的訊息。</span><span class="sxs-lookup"><span data-stu-id="63cfc-205">Enterprise Single Sign-On auditing issues messages generated by the Single Sign-On service.</span></span> <span data-ttu-id="63cfc-206">這不是安全性稽核，且 SSO 系統不會將資訊儲存在「事件日誌」的安全記錄檔中。</span><span class="sxs-lookup"><span data-stu-id="63cfc-206">This is not a security audit, and the SSO system does not save the information in the security log of the Event Log.</span></span> <span data-ttu-id="63cfc-207">SSO 系統會將 SSO 稽核訊息直接儲存至「應用程式事件日誌」。</span><span class="sxs-lookup"><span data-stu-id="63cfc-207">The SSO system saves the SSO audit messages directly to the Application Event Log.</span></span>  
  
### <a name="database-level-auditing"></a><span data-ttu-id="63cfc-208">資料庫層級稽核</span><span class="sxs-lookup"><span data-stu-id="63cfc-208">Database-Level Auditing</span></span>  
 <span data-ttu-id="63cfc-209">若是資料庫層級稽核，SSO 系統會將所有在 SSO 資料庫執行的作業，記錄至資料庫的稽核表格。</span><span class="sxs-lookup"><span data-stu-id="63cfc-209">For database-level auditing, the SSO system tracks the operations performed on the SSO database in the audit tables in the database.</span></span> <span data-ttu-id="63cfc-210">這些稽核表格的大小定義在 SSO 系統層級。</span><span class="sxs-lookup"><span data-stu-id="63cfc-210">The size of these audit tables is defined at the SSO system level.</span></span> <span data-ttu-id="63cfc-211">您可以稽核刪除的分支機構應用程式、刪除的對應，以及所執行的認證查詢。</span><span class="sxs-lookup"><span data-stu-id="63cfc-211">You can audit for affiliate applications that are deleted, for mappings that are deleted, and for credential look-ups that are performed.</span></span> <span data-ttu-id="63cfc-212">依照預設，稽核大小設定為 1,000 個項目。</span><span class="sxs-lookup"><span data-stu-id="63cfc-212">By default, the audit size is set to 1,000 entries.</span></span> <span data-ttu-id="63cfc-213">SSO 系統管理員可變更此大小，以符合公司的政策。</span><span class="sxs-lookup"><span data-stu-id="63cfc-213">SSO administrators can change this size to meet their corporate policies.</span></span>  
  
## <a name="using-sso-accounts"></a><span data-ttu-id="63cfc-214">使用 SSO 帳戶</span><span class="sxs-lookup"><span data-stu-id="63cfc-214">Using SSO Accounts</span></span>  
 <span data-ttu-id="63cfc-215">本節包含在「企業單一登入」(SSO) 系統中使用網域、本機群組以及個別帳戶的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="63cfc-215">This section contains best practices when using domain and local groups and individual accounts in the Enterprise Single Sign-On (SSO) system.</span></span>  
  
### <a name="domain-windows-groups-and-accounts"></a><span data-ttu-id="63cfc-216">網域 Windows 群組和帳戶</span><span class="sxs-lookup"><span data-stu-id="63cfc-216">Domain Windows Groups and Accounts</span></span>  
 <span data-ttu-id="63cfc-217">使用網域 Windows 群組時，適用以下建議：</span><span class="sxs-lookup"><span data-stu-id="63cfc-217">When working with domain Windows groups, the following recommendations apply:</span></span>  
  
-   <span data-ttu-id="63cfc-218">使用網域群組和網域帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-218">Use domain groups and domain accounts.</span></span>  
  
-   <span data-ttu-id="63cfc-219">當使用[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]或[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]ENTSSO 服務帳戶可以設定為在 Network Service 帳戶下執行。</span><span class="sxs-lookup"><span data-stu-id="63cfc-219">When using [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] or [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]the ENTSSO service account can be configured to run under the Network Service account.</span></span> <span data-ttu-id="63cfc-220">但是，基於安全性理由不建議這樣做，因為必須授與網路服務帳戶 SSO 系統管理員權限。</span><span class="sxs-lookup"><span data-stu-id="63cfc-220">However, this is not recommended for security reasons, as the Network Service account will need to be given the SSO Administrators privilege.</span></span> <span data-ttu-id="63cfc-221">建議您為 ENTSSO 服務帳戶使用唯一的網域服務帳戶作為替代。</span><span class="sxs-lookup"><span data-stu-id="63cfc-221">It is recommended instead that you use a unique domain service account for the ENTSSO service account.</span></span>  
  
-   <span data-ttu-id="63cfc-222">對於 SSO 系統管理員，請使用網域群組。</span><span class="sxs-lookup"><span data-stu-id="63cfc-222">Use a domain group for SSO administrators.</span></span> <span data-ttu-id="63cfc-223">您不應將個人網域帳戶指定為 SSO 系統管理員，因為您無法將此帳戶變更為另一個個人帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-223">You should not specify an individual domain account as the SSO administrator, because you cannot change this account from one individual account to another individual account.</span></span>  
  
-   <span data-ttu-id="63cfc-224">您可將個別網域帳戶指定為 SSO 分支機構系統管理員，但建議您使用網域群組。</span><span class="sxs-lookup"><span data-stu-id="63cfc-224">Although you can specify an individual domain account as the SSO affiliate administrator, you should use a domain group.</span></span>  
  
-   <span data-ttu-id="63cfc-225">您可將個別網域帳戶指定為應用程式系統管理員，但建議您使用網域群組。</span><span class="sxs-lookup"><span data-stu-id="63cfc-225">Although you can specify an individual domain account as the application administrator, you should use a domain group.</span></span>  
  
-   <span data-ttu-id="63cfc-226">應用程式使用者帳戶必須使用網域群組。</span><span class="sxs-lookup"><span data-stu-id="63cfc-226">You must use domain groups for the application user account.</span></span> <span data-ttu-id="63cfc-227">SSO 應用程式使用者帳戶不支援個別帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-227">The SSO applications user account does not support an individual account.</span></span>  
  
-   <span data-ttu-id="63cfc-228">這些 SSO 存取帳戶可指定多個帳戶。</span><span class="sxs-lookup"><span data-stu-id="63cfc-228">Multiple accounts can be specified for each of these SSO access accounts.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="63cfc-229">另請參閱</span><span class="sxs-lookup"><span data-stu-id="63cfc-229">See Also</span></span>  
 <span data-ttu-id="63cfc-230">[企業單一登入伺服器的連接埠](../core/ports-for-the-enterprise-single-sign-on-servers.md) </span><span class="sxs-lookup"><span data-stu-id="63cfc-230">[Ports for the Enterprise Single Sign-On Servers](../core/ports-for-the-enterprise-single-sign-on-servers.md) </span></span>  
 [<span data-ttu-id="63cfc-231">最小安全性使用者權限</span><span class="sxs-lookup"><span data-stu-id="63cfc-231">Minimum Security User Rights</span></span>](../core/minimum-security-user-rights.md)