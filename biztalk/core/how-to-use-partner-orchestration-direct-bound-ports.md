---
title: "如何使用夥伴協調流程直接繫結連接埠 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 19f9987f-79fb-4cb6-bf6e-542f6eea9ce0
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7a77988ea233ca63fa227eaa00a6da1c3b611808
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-use-partner-orchestration-direct-bound-ports"></a>如何使用夥伴協調流程直接繫結的連接埠
夥伴協調流程直接繫結連接埠提供協調流程之間的通訊出現透過連接埠的功能。 您可以建立兩種通訊模式： 轉寄夥伴協調流程直接繫結以及反向夥伴協調流程直接繫結。 這兩種模式提供明確的協調流程之間通訊，這表示使用轉寄夥伴協調流程直接繫結時，會有預定的收件者協調流程，而使用反向夥伴協調流程直接繫結時，則有預定的傳送者協調流程。  
  
 您也可以執行下列其中一項動作，來設計隱含的夥伴協調流程直接繫結：  
  
-   將接收者設定為 MessageBox 直接繫結連接埠，並建立接受來自特定傳送協調流程之訊息的篩選條件。  
  
-   將傳送者設定為 MessageBox 直接繫結連接埠，並升級比對接收協調流程上之訂閱的屬性。  
  
 若要設定夥伴協調流程直接繫結連接埠，連接埠組態精靈中，指定**直接**如**連接埠繫結**選取**從其他協調流程、 接收訊息選取此連接埠此處與那些協調流程**或**將訊息傳送至其他協調流程中，選取此連接埠此處與那些協調流程**根據您是在接收或傳送訊息此連接埠。 然後選取 從連接埠**夥伴協調流程上的連接埠**下拉式清單。 兩個連接埠的連接埠類型必須相同，這意味著訊息類型也必須相同。 此外，若要能夠直接繫結至夥伴協調流程連接埠，**型別修飾詞**連接埠的型別必須是**內部**相同組件中的協調流程或**公用**允許協調流程繫結到它的另一個組件。 連接埠的極性必須相反。 例如，如果一端是傳送埠，另一端就必須是接收埠。  
  
 如需如何使用夥伴協調流程直接繫結連接埠的範例，請參閱 SDK 範例 「 直接繫結至協調流程 」 在[http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703)。  
  
## <a name="forward-partner-orchestration-direct-binding"></a>轉寄夥伴協調流程直接繫結  
 這是用於夥伴協調流程直接繫結的典型通訊模式。 此類型的轉寄夥伴協調流程繫結允許您讓多個傳送者繫結至相同的收件者。  
  
 **若要設定轉寄夥伴協調流程直接繫結，執行下列作業：**  
  
1.  在 協調流程 A 中，選取 **連接埠**協調流程 工具箱 中的圖形。 如此將啟動 [連接埠組態精靈]。  
  
2.  在**連接埠內容**頁面上，於**名稱**欄位中，輸入`MyReceivePort`。 按一下 **[下一步]**。  
  
3.  在**選取連接埠類型**頁面上，選取**建立新的連接埠類型**。 在**連接埠類型名稱**欄位中，輸入`MyPartnerPortType`。 按一下 **[下一步]**。  
  
4.  在**連接埠繫結**頁面上，於**連接埠通訊方向**下拉式清單中，選取**我將一律接收訊息，在此連接埠**。 在**連接埠繫結**下拉式清單中，選取**直接**。  
  
5.  選取**若要從其他協調流程接收訊息，選取此連接埠這裡與那些協調流程**，然後在**夥伴協調流程上的連接埠**下拉式清單中，選取**OrchestrationA.MyReceivePort**。 按一下 **[下一步]**。  
  
6.  在**完成連接埠精靈**頁面上，按一下**完成**。  
  
7.  在協調流程 B 中，選取**連接埠**協調流程 [工具箱] 中的圖形。 如此將啟動 [連接埠組態精靈]。  
  
8.  在**連接埠內容**頁面上，於**名稱**欄位中，輸入`MySendPort`。 按一下 **[下一步]**。  
  
9. 在 **[選取連接埠類型]** 頁面上，選取 **[使用現有連接埠類型]**。 在下**可用的連接埠類型**，選取**MyPartnerPortType**，然後按一下 **下一步**。  
  
10. 在**連接埠繫結**頁面上，於**連接埠通訊方向**下拉式清單中，選取**我將總是傳送訊息在此連接埠**。 在**連接埠繫結**下拉式清單中，選取**直接**。  
  
11. 選取**若要將訊息傳送至其他協調流程中，選取此連接埠這裡與那些協調流程**，然後在**夥伴協調流程上的連接埠**下拉式清單中，選取**OrchestrationA.MyReceivePort**。 按一下 **[下一步]**。  
  
12. 在**完成連接埠精靈**頁面上，按一下**完成**。  
  
    > [!NOTE]
    >  從傳送者協調流程到接收者協調流程之間會產生強式繫結。 因此，如果想要修改接收者協調流程，或者想要變更接收者協調流程的版本，您就必須更新傳送者夥伴協調流程直接繫結連接埠的設計階段組態。 不過，因為接收者協調流程對傳送者協調流程並無明確的認知，所以可以更新傳送者協調流程，而不會影響接收者協調流程。  
  
 在前面的組態中，協調流程 A 是收件者，而協調流程 B 是傳送者。 這個組態可讓協調流程 B 傳送訊息至**OrchestrationA.MyReceivePort**，並讓協調流程 A 接收任何訊息傳送至**OrchestrationA.MyReceivePort**。 此外，您還可以使用如同協調流程 B 的組態，將協調流程 C 加入成為第二個傳送者，而將協調流程 D 加入成為第三個傳送者。  
  
## <a name="inverse-partner-orchestration-direct-binding"></a>反向夥伴協調流程直接繫結  
 這不是夥伴協調流程直接繫結使用的典型通訊模式。 在此模式中，繫結的方向與通訊的方向相反。 此類型的反向夥伴協調流程繫結允許您讓單一傳送者與多個接收者進行通訊。  
  
> [!NOTE]
>  如果您要搭配反向夥伴協調流程直接繫結使用雙向連接埠類型，則必須設定接收篩選條件，確保只有其中一個收件者會取用訊息。 這是因為請求-回應連接埠只預期接收單一回應。 如果有多個收件者要取得訊息，則請求-回應連接埠會接受第一個回應，而所有的後續回應都將遭到擱置且不可繼續。 當您嘗試在這種情況下傳送訊息時，傳訊引擎會擲回例外狀況，並指出請求-回應連接埠有多個收件者。  
  
 **若要設定反向夥伴協調流程直接繫結，執行下列作業：**  
  
1.  在 協調流程 A 中，選取 **連接埠**協調流程 工具箱 中的圖形。 如此將啟動 [連接埠組態精靈]。  
  
2.  在**連接埠內容**頁面上，於**名稱**欄位中，輸入`MySendPort`。 按一下 **[下一步]**。  
  
3.  在**選取連接埠類型**頁面上，選取**建立新的連接埠類型**。 在**連接埠類型名稱**欄位中，輸入`MyPartnerPortType`。 按一下 **[下一步]**。  
  
4.  在**連接埠繫結**頁面上，於**連接埠通訊方向**下拉式清單中，選取**我將總是傳送訊息在此連接埠**。 在**連接埠繫結**下拉式清單中，選取**直接**。  
  
5.  選取**若要將訊息傳送至其他協調流程中，選取此連接埠這裡與那些協調流程**，然後在**夥伴協調流程上的連接埠**下拉式清單中，選取**OrchestrationA.MySendPort**。 按一下 **[下一步]**。  
  
6.  在**完成連接埠精靈**頁面上，按一下**完成**。  
  
7.  在協調流程 B 中，選取**連接埠**協調流程 [工具箱] 中的圖形。 如此將啟動 [連接埠組態精靈]。  
  
8.  在**連接埠內容**頁面上，於**名稱**欄位中，輸入`MyReceivePort`。 按一下 **[下一步]**。  
  
9. 在 **[選取連接埠類型]** 頁面上，選取 **[使用現有連接埠類型]**。 在下**可用的連接埠類型**，選取**MyPartnerPortType**，然後按一下 **下一步**。  
  
10. 在**連接埠繫結**頁面上，於**連接埠通訊方向**下拉式清單中，選取**我將一律接收訊息，在此連接埠**。 在**連接埠繫結**下拉式清單中，選取**直接**。  
  
11. 選取**若要從其他協調流程接收訊息，選取此連接埠這裡與那些協調流程**，然後在**夥伴協調流程上的連接埠**下拉式清單中，選取**OrchestrationA.MySendPort**。 按一下 **[下一步]**。  
  
12. 在**完成連接埠精靈**頁面上，按一下**完成**。  
  
    > [!NOTE]
    >  接收者協調流程會強式繫結至傳送者協調流程。 因此，如果想要修改接收者協調流程，或更新接收者協調流程的版本，您就必須更新傳送者的連接埠組態。 傳送者協調流程對接收者協調流程並無明確的認知，所以可以更新接收者協調流程，而不會影響傳送者協調流程。  
  
 在前面的組態中，協調流程 A 是傳送者，而協調流程 B 是收件者。 這個組態可讓協調流程將訊息傳送至協調流程 B 到 A **OrchestrationA.MySendPort**，並讓協調流程 B 接收來自**OrchestrationA.MySendPort**. 此外，您還可以使用如同協調流程 B 的組態，將協調流程 C 加入成為第二個收件者，而將協調流程 D 加入成為第三個收件者。  
  
## <a name="see-also"></a>另請參閱  
 [如何使用 MessageBox 直接繫結連接埠](../core/how-to-use-messagebox-direct-bound-ports.md)   
 [如何使用自我相互關聯直接繫結連接埠](../core/how-to-use-self-correlating-direct-bound-ports.md)