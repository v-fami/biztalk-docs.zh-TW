---
title: EDI 處理的協議的角色 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d81b0449-6656-49f7-a781-5fd60031b3d5
caps.latest.revision: 25
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d2125ca348cc8f333b1b223404371ae13b113fe1
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36980431"
---
# <a name="the-role-of-agreements-in-edi-processing"></a><span data-ttu-id="7206c-102">中協議 EDI 處理的角色</span><span class="sxs-lookup"><span data-stu-id="7206c-102">The Role of Agreements in EDI Processing</span></span>
<span data-ttu-id="7206c-103">組織會使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]來接收 EDI 訊息，並傳送 EDI 訊息，一或多個交易夥伴。</span><span class="sxs-lookup"><span data-stu-id="7206c-103">An organization uses [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to receive EDI messages from, and send EDI messages to, one or more trading partners.</span></span> <span data-ttu-id="7206c-104">交易夥伴，接著會定義組織內的商務實體的商務設定檔。</span><span class="sxs-lookup"><span data-stu-id="7206c-104">The trading partners, in turn define business profiles that are business entities within an organization.</span></span> <span data-ttu-id="7206c-105">如何交換訊息定義的交易一部分的商務設定檔夥伴的兩個商務設定檔之間的合約。</span><span class="sxs-lookup"><span data-stu-id="7206c-105">How business profiles exchange messages is defined as part of trading partner agreements between two business profiles.</span></span> <span data-ttu-id="7206c-106">如需詳細資訊，請參閱 <<c0> [ 交易夥伴管理解決方案的建置組塊](../core/building-blocks-of-a-trading-partner-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="7206c-106">For more information, see [Building Blocks of a Trading Partner Management Solution](../core/building-blocks-of-a-trading-partner-management-solution.md).</span></span>  
  
 <span data-ttu-id="7206c-107">您在交易夥伴管理 (TPM) 使用者介面中建立交易夥伴協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-107">You create a trading partner agreement in the Trading Partner Management (TPM) user interface.</span></span> <span data-ttu-id="7206c-108">TPM 畫面位於**合作對象**節點[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="7206c-108">The TPM screens are in the **Parties** node of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  
  
## <a name="configuring-an-agreement-for-edi-processing"></a><span data-ttu-id="7206c-109">設定協議的 EDI 處理</span><span class="sxs-lookup"><span data-stu-id="7206c-109">Configuring an Agreement for EDI Processing</span></span>  
 <span data-ttu-id="7206c-110">將交換 EDI 訊息使用的所有交易夥伴[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]必須同意通訊參數。</span><span class="sxs-lookup"><span data-stu-id="7206c-110">All trading partners that will be exchanging EDI messages using [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must agree upon communication parameters.</span></span> <span data-ttu-id="7206c-111">這麼做之後, 組織裝載[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]必須建立 TPM （包括為自己的交易夥伴） 中的交易夥伴、 建立商務設定檔和交易夥伴協議之間的商務設定檔。</span><span class="sxs-lookup"><span data-stu-id="7206c-111">After they have done this, the organization hosting [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must create the trading partners in TPM (including a trading partner for itself), create the business profiles, and the trading partner agreement between the business profiles.</span></span> <span data-ttu-id="7206c-112">交易夥伴協議的一部分，您可以設定屬性如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收 EDI 訊息，並傳送 EDI 訊息給交易夥伴的商務設定檔。</span><span class="sxs-lookup"><span data-stu-id="7206c-112">As part of the trading partner agreement, you set the properties for how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI message from, and send an EDI message to, the trading partner’s business profile.</span></span> <span data-ttu-id="7206c-113">在其結束時，其他交易夥伴必須執行相同，，交換訊息，組態必須相容。</span><span class="sxs-lookup"><span data-stu-id="7206c-113">On their end, the other trading partners must do the same, and to exchange messages, the configurations must be compatible.</span></span>  
  
 <span data-ttu-id="7206c-114">您必須定義下列幾組屬性進行 EDI 通訊。</span><span class="sxs-lookup"><span data-stu-id="7206c-114">You must define the following sets of properties for EDI communications.</span></span>  
  
- <span data-ttu-id="7206c-115">交易的交易夥伴屬性會定義一般層面的交易夥伴，例如名稱、 傳送埠以及簽章的憑證。</span><span class="sxs-lookup"><span data-stu-id="7206c-115">Trading partner properties that define general aspects of the trading partner, such as name, send ports, and the signing certificate.</span></span>  
  
- <span data-ttu-id="7206c-116">定義商務識別的商務設定檔屬性。</span><span class="sxs-lookup"><span data-stu-id="7206c-116">Business profile properties that define the business identities.</span></span>  
  
- <span data-ttu-id="7206c-117">EDI 屬性，做為交易夥伴協議的一部分，定義如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會處理來自交易夥伴以及如何產生繫結至交易夥伴的外寄訊息的傳入訊息。</span><span class="sxs-lookup"><span data-stu-id="7206c-117">EDI properties, as part of the trading partner agreement, that defines how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will process an incoming message from a trading partner and how it will generate an outgoing message bound to the trading partner.</span></span>  
  
- <span data-ttu-id="7206c-118">AS2 屬性，做為交易夥伴協議的一部分，定義如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]執行 AS2 通訊，傳入和傳出。</span><span class="sxs-lookup"><span data-stu-id="7206c-118">AS2 properties, as part of the trading partner agreement, that defines how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform AS2 communications, both incoming and outgoing.</span></span> <span data-ttu-id="7206c-119">這些屬性只會在 EDI 訊息是透過 AS2 傳送時，才會影響 EDI 通訊。</span><span class="sxs-lookup"><span data-stu-id="7206c-119">These properties affect EDI communications only when an EDI message is sent over AS2.</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="7206c-120">AS2 協議的 EDI 傳訊的 「 協議相同的商務設定檔指定和分開。</span><span class="sxs-lookup"><span data-stu-id="7206c-120">The AS2 agreement and the EDI messaging agreement between the same business profiles are specified separately.</span></span> <span data-ttu-id="7206c-121">兩個協議一起構成合作關係。</span><span class="sxs-lookup"><span data-stu-id="7206c-121">The two agreements together form a partnership.</span></span>  
  
  <span data-ttu-id="7206c-122">交易夥伴協議屬性會決定下列特定的處理：</span><span class="sxs-lookup"><span data-stu-id="7206c-122">Trading partner agreement properties determine the following specific processing:</span></span>  
  
- <span data-ttu-id="7206c-123">EDI 信封處理和產生</span><span class="sxs-lookup"><span data-stu-id="7206c-123">EDI envelope processing and generation</span></span>  
  
- <span data-ttu-id="7206c-124">通知處理和產生</span><span class="sxs-lookup"><span data-stu-id="7206c-124">ACK processing and generation</span></span>  
  
- <span data-ttu-id="7206c-125">內送和外寄 EDI 訊息的驗證</span><span class="sxs-lookup"><span data-stu-id="7206c-125">Validation of incoming and outgoing EDI messages</span></span>  
  
- <span data-ttu-id="7206c-126">批次產生</span><span class="sxs-lookup"><span data-stu-id="7206c-126">Batch creation</span></span>  
  
- <span data-ttu-id="7206c-127">狀態報告</span><span class="sxs-lookup"><span data-stu-id="7206c-127">Status reporting</span></span>  
  
  <span data-ttu-id="7206c-128">商務識別，可以有特定的值，例如**D-U-N-S (Dun & Bradstreet)**。</span><span class="sxs-lookup"><span data-stu-id="7206c-128">For business identities, there can be specific values, such as **D-U-N-S (Dun & Bradstreet)**.</span></span> <span data-ttu-id="7206c-129">特定的名稱有特定的辨識符號，例如"01"代表 Duns。</span><span class="sxs-lookup"><span data-stu-id="7206c-129">Specific names have specific qualifiers, such as "01" for Duns.</span></span> <span data-ttu-id="7206c-130">沒有特定的商務身分識別名稱時，"ZZ"會用於 X12 編碼訊息，"ZZZ"會用於 EDIFACT 編碼訊息，指出由個別實體相互定義的名稱。</span><span class="sxs-lookup"><span data-stu-id="7206c-130">When a business identity name is not specific, "ZZ" is used for X12-encoded messages and "ZZZ" is used for EDIFACT-encoded messages, indicating a name mutually defined by separate entities.</span></span> <span data-ttu-id="7206c-131">值和辨識符號，然後識別商務設定檔。</span><span class="sxs-lookup"><span data-stu-id="7206c-131">The value and qualifier then identifies the business profile.</span></span> <span data-ttu-id="7206c-132">商務識別的名稱是僅供參考之用;它不是由 BizTalk 執行階段進行處理。</span><span class="sxs-lookup"><span data-stu-id="7206c-132">The name of the business identity is for informational purposes only; it is not used by the BizTalk runtime for processing.</span></span>  
  
## <a name="determining-an-agreement-for-edi-processing"></a><span data-ttu-id="7206c-133">判斷協議的 EDI 處理</span><span class="sxs-lookup"><span data-stu-id="7206c-133">Determining an Agreement for EDI Processing</span></span>  
 <span data-ttu-id="7206c-134">任何時候[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收 EDI 訊息時，它會嘗試判斷訊息解析為交易夥伴協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-134">Any time [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI message, it attempts to determine the trading partner agreement that the message resolves to.</span></span> <span data-ttu-id="7206c-135">它會嘗試比對訊息的傳送者辨識符號、 寄件者識別碼、 接收者辨識符號和接收者識別項定義為協議的一部分來解決交易夥伴協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-135">It attempts to resolve the trading partner agreement by making a match between the message and the sender qualifier, sender identifier, receiver qualifier, and receiver identifier defined as part of the agreement.</span></span> <span data-ttu-id="7206c-136">如需此程序的詳細資訊，請參閱 <<c0> [ 協議解析、 結構描述探索和授權收到 EDI 訊息](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md)。</span><span class="sxs-lookup"><span data-stu-id="7206c-136">For more details on this process, see [Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md).</span></span>  
  
 <span data-ttu-id="7206c-137">任何時候[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會產生要傳送，它會嘗試判斷傳送訊息的商務設定檔所關聯的協議的 EDI 訊息。</span><span class="sxs-lookup"><span data-stu-id="7206c-137">Any time [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] generates an EDI message to send, it attempts to determine the agreement that associates with the business profile to which the message will be sent.</span></span> <span data-ttu-id="7206c-138">它會嘗試比對訊息，並且使用下列其中一項 「 合約 」，以解析合約：</span><span class="sxs-lookup"><span data-stu-id="7206c-138">It attempts to resolve the agreement by making a match between the message and the agreement using any of the following:</span></span>  
  
- <span data-ttu-id="7206c-139">內容屬性 AgreementPartIdForSend</span><span class="sxs-lookup"><span data-stu-id="7206c-139">Context property AgreementPartIdForSend</span></span>  
  
- <span data-ttu-id="7206c-140">AgreementNameForSend、 SenderPartyNameForSend、 和 ReceiverPartyNameForSend 的內容屬性</span><span class="sxs-lookup"><span data-stu-id="7206c-140">Context properties AgreementNameForSend, SenderPartyNameForSend, and ReceiverPartyNameForSend</span></span>  
  
- <span data-ttu-id="7206c-141">傳送者辨識符號和識別項和接收者辨識符號和識別項</span><span class="sxs-lookup"><span data-stu-id="7206c-141">Sender qualifiers and identifiers, and receiver qualifiers and identifiers</span></span>  
  
- <span data-ttu-id="7206c-142">傳送埠名稱</span><span class="sxs-lookup"><span data-stu-id="7206c-142">Send port name</span></span>  
  
  <span data-ttu-id="7206c-143">如需此程序的詳細資訊，請參閱 <<c0> [ 協議解析和外寄 EDI 訊息的結構描述判斷](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="7206c-143">For more details on this process, see [Agreement Resolution and Schema Determination for Outgoing EDI Messages](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md).</span></span>  
  
## <a name="using-edi-global-properties"></a><span data-ttu-id="7206c-144">使用 EDI 全域屬性</span><span class="sxs-lookup"><span data-stu-id="7206c-144">Using EDI Global Properties</span></span>  
 <span data-ttu-id="7206c-145">如果[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]無法判斷協議的任一個內送或外寄訊息，它會使用後援協議來處理內送交換或產生外寄交換。</span><span class="sxs-lookup"><span data-stu-id="7206c-145">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] cannot determine the agreement for either an incoming or outgoing message, it will use the fallback agreement to process the incoming interchange or generate the outgoing interchange.</span></span> <span data-ttu-id="7206c-146">以滑鼠右鍵按一下設定後援協議**合作對象**中的節點[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台，然後按一下**X12 後援設定**（適用於 X12 編碼訊息） 或**EDIFACT 後援設定**（EDIFACT 編碼訊息）。</span><span class="sxs-lookup"><span data-stu-id="7206c-146">The fallback agreements are set by right-clicking the **Parties** node in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console and clicking **X12 Fallback Settings** (for X12-encoded messages) or **EDIFACT Fallback Settings** (EDIFACT-encoded messages).</span></span> <span data-ttu-id="7206c-147">如需有關全域屬性的詳細資訊，請參閱[設定全域或後援協議屬性](../core/configuring-global-or-fallback-agreement-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="7206c-147">For more information on global properties, see [Configuring Global or Fallback Agreement Properties](../core/configuring-global-or-fallback-agreement-properties.md).</span></span>  
  
> [!NOTE]
>  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="7206c-148"> 只有當它無法判斷交換的協議時，就會使用後援協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-148"> will use fallback agreement only if it cannot determine the agreement for an interchange.</span></span> <span data-ttu-id="7206c-149">如果已判斷出協議，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]尚未定義的兩個交易夥伴之間的協議屬性不會使用後援協議的屬性值。</span><span class="sxs-lookup"><span data-stu-id="7206c-149">If an agreement has been determined, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will not use a property value from the fallback agreement for a property that has not been defined for the agreement between two trading partners.</span></span>  
  
 <span data-ttu-id="7206c-150">如果連接埠設定需要驗證，就不會使用後援協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-150">Fallback agreements will not be used if port settings require authentication.</span></span> <span data-ttu-id="7206c-151">如果接收埠的通訊埠設定需要驗證 (如果有任一**驗證失敗時捨棄訊息**或是**驗證失敗時保留訊息**上選取**一般**頁面的**接收埠屬性**對話方塊)，都需要接收埠收到的任何交換的協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-151">If the port settings for a receive port require authentication (if either **Drop messages if authentication fails** or **Keep messages if authentication fails** is selected on the **General** page of the **Receive Port Properties** dialog box), an agreement is required for any interchange received by the receive port.</span></span> <span data-ttu-id="7206c-152">在此情況下，不會使用後援協議。</span><span class="sxs-lookup"><span data-stu-id="7206c-152">In this case, fallback agreements are not used.</span></span> <span data-ttu-id="7206c-153">如果判斷出交換的協議，交換會被視為驗證失敗，並將被擱置。</span><span class="sxs-lookup"><span data-stu-id="7206c-153">If no agreement is determined for an interchange, the interchange will be treated as though authentication had failed, and will be suspended.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7206c-154">另請參閱</span><span class="sxs-lookup"><span data-stu-id="7206c-154">See Also</span></span>  
 <span data-ttu-id="7206c-155">[協議解析、 結構描述探索和授權接收之 EDI 訊息](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md) </span><span class="sxs-lookup"><span data-stu-id="7206c-155">[Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md) </span></span>  
 <span data-ttu-id="7206c-156">[協議解析和外寄 EDI 訊息的結構描述判斷](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md) </span><span class="sxs-lookup"><span data-stu-id="7206c-156">[Agreement Resolution and Schema Determination for Outgoing EDI Messages](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md) </span></span>  
 <span data-ttu-id="7206c-157">[設定 EDI 屬性](../core/configuring-edi-properties.md) </span><span class="sxs-lookup"><span data-stu-id="7206c-157">[Configuring EDI Properties](../core/configuring-edi-properties.md) </span></span>  
 <span data-ttu-id="7206c-158">[設定全域或後援協議屬性](../core/configuring-global-or-fallback-agreement-properties.md) </span><span class="sxs-lookup"><span data-stu-id="7206c-158">[Configuring Global or Fallback Agreement Properties](../core/configuring-global-or-fallback-agreement-properties.md) </span></span>  
 [<span data-ttu-id="7206c-159">EDI 合作對象的已知問題</span><span class="sxs-lookup"><span data-stu-id="7206c-159">Known Issues with EDI Parties</span></span>](../core/known-issues-with-edi-parties.md)