---
title: "向外擴充接收主控件 |Microsoft 文件"
ms.custom: 
ms.date: 2016-03-17
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- adapters, receive adapters
- high availability
- HTTP adapters, scaling
- receive adapters, scaling
- POP3 adapters, scaling
- MSMQ adapters, scaling
- EDI adapters, scaling
- Web services, scaling
- hosts, multiple
- MQSeries adapters, scaling
- adapters, Windows SharePoint Services
- scaling, hosts
- scaling, adapters
- SAP adapters
- FTP adapters
- scaling, receive adapters
- hosts, receiving
- adapters, Web services
- hosts, scaling
- SOAP adapters, scaling
- adapters, scaling
- SQL adapters, scaling
- Web services, adapters
- File adapters, scaling
- clustering
ms.assetid: 94f35426-37fa-4ad2-8e35-d82fdca02262
caps.latest.revision: "54"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5b9bc048de978a6dfd7c28505c54cdaaaef64064
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="scaled-out-receiving-hosts"></a><span data-ttu-id="f5907-102">向外擴充的接收主控件</span><span class="sxs-lookup"><span data-stu-id="f5907-102">Scaled-Out Receiving Hosts</span></span>
<span data-ttu-id="f5907-103">當主控件包含接收項目時 (例如接收位置或管線)，它將做為安全範圍，而訊息解碼和解密都發生在主控件的管線中。</span><span class="sxs-lookup"><span data-stu-id="f5907-103">When a host contains a receiving item, such as a receive location or pipeline, it acts as a security boundary, and the message decoding and decrypting occurs in a pipeline within the host.</span></span> <span data-ttu-id="f5907-104">若要讓接收主控件變成高度可用，您必須有兩部或以上的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 電腦執行每個接收主控件的執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5907-104">To make the receiving hosts highly available, you must have two or more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers that are running instances of each receiving host.</span></span> <span data-ttu-id="f5907-105">透過向外擴充接收主控件，您可以確保需要大量傳訊的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署的可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-105">By scaling out the receiving hosts you can guarantee availability for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that are messaging intensive.</span></span> <span data-ttu-id="f5907-106">雖然這些部署有可能執行最少的協調流程處理，不過它們仍可以最快的速度並提供最大的可靠性來路由許多不同類型的訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-106">While these deployments might perform minimal processing for orchestrations, they can route many messages of varying types with great speed and reliability.</span></span>  
  
 <span data-ttu-id="f5907-107">您可以將接收主控件與處理協調流程和傳送訊息的主控件分開，藉此個別保護和擴充其他主控件的每個主控件，提升環境的安全性與擴充性。</span><span class="sxs-lookup"><span data-stu-id="f5907-107">You can enhance security and scalability in your environment by separating the receiving host from the hosts that process orchestrations and send messages because you can secure and scale each host independently of other hosts.</span></span> <span data-ttu-id="f5907-108">例如，您可以將兩部電腦 (主控件執行個體) 新增至接收主控件，而不需將任何電腦新增至處理或傳送主控件。</span><span class="sxs-lookup"><span data-stu-id="f5907-108">For example, you can add two computers (host instances) to the receiving host without adding any computers to the processing or sending hosts.</span></span>  
  
## <a name="multiple-hosts-for-receiving-messages"></a><span data-ttu-id="f5907-109">接收訊息的多個主控件</span><span class="sxs-lookup"><span data-stu-id="f5907-109">Multiple Hosts for Receiving Messages</span></span>  
 <span data-ttu-id="f5907-110">下圖顯示 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署，此部署具有兩台執行接收主控件執行個體的電腦，可為接收主控件提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-110">The following figure shows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the receiving host by having two computers that are running instances of the receiving host.</span></span> <span data-ttu-id="f5907-111">請注意，在此圖中處理和傳送主控件不是高度可用。</span><span class="sxs-lookup"><span data-stu-id="f5907-111">Note that in this figure the processing and sending hosts are not highly available.</span></span>  
  
 <span data-ttu-id="f5907-112">![多個主控件接收訊息](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span><span class="sxs-lookup"><span data-stu-id="f5907-112">![Multiple Host for Receiving Messages](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span></span>  
  
 <span data-ttu-id="f5907-113">在大型部署、處理多個交易夥伴的實例，以及使用不同通訊協定的實例方面，您可以在多個接收主控件之間分佈接收功能。</span><span class="sxs-lookup"><span data-stu-id="f5907-113">For large deployments, for scenarios dealing with multiple trading partners, and for scenarios when you use different protocols, you can spread out the receiving functionality across multiple receiving hosts.</span></span> <span data-ttu-id="f5907-114">例如，您可以為每個配接器建立接收訊息的主控件，或是建立不同的主控件以接收不同夥伴的訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-114">For example, you can create a host for receiving messages for each adapter, or different hosts for receiving messages from different partners.</span></span> <span data-ttu-id="f5907-115">當您建立多個接收主控件時，您可以建立安全範圍並讓環境更容易管理和擴充，不過，它並不會使環境變得高度可用。</span><span class="sxs-lookup"><span data-stu-id="f5907-115">When you create multiple receiving hosts you can create security boundaries and ease the manageability and scalability of your environment; however, it does not make your environment highly available.</span></span>  
  
 <span data-ttu-id="f5907-116">為了使環境變得高度可用，您必須為每個建立的接收主控件建立兩個或以上的主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5907-116">To make your environment highly available, you must create two or more host instances for each receiving host that you create.</span></span> <span data-ttu-id="f5907-117">例如，您可以建立三個不同的接收主控件 (A、B 和 C) 以接收三個不同公司的訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-117">For example, you can create three different receive hosts (A, B, and C) to receive messages from three different companies.</span></span> <span data-ttu-id="f5907-118">若要讓每個主控件高度可用，您需要在兩部或以上的電腦中為每個主控件建立主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5907-118">To make each of these hosts highly available you then create host instances of each of these hosts in two or more computers.</span></span> <span data-ttu-id="f5907-119">請注意，您可以在一部電腦上擁有每個主控件的執行個體，而不會損失安全範圍、管理性或擴充性。</span><span class="sxs-lookup"><span data-stu-id="f5907-119">Note that you can have instances of each host on one computer without losing the security boundary, manageability, or scalability.</span></span>  
  
 <span data-ttu-id="f5907-120">下圖顯示高度可用的三部電腦之 BizTalk Server 環境，包含專用以接受不同公司訊息的主控件。</span><span class="sxs-lookup"><span data-stu-id="f5907-120">The following figure shows a highly available three-computer BizTalk Server environment with hosts dedicated to receiving messages from different companies.</span></span>  
  
 <span data-ttu-id="f5907-121">![接收執行個體](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span><span class="sxs-lookup"><span data-stu-id="f5907-121">![Receive Instances](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span></span>  
  
 <span data-ttu-id="f5907-122">若要以此組態提供高可用性，每部電腦都需執行三個主控件執行個體：三家公司的每一家各有一個執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5907-122">To provide high availability in this configuration, each computer runs three host instances: one instance for each of the three companies.</span></span> <span data-ttu-id="f5907-123">每家公司的主控件執行個體都包含接收位置和管線以便和該公司通訊。</span><span class="sxs-lookup"><span data-stu-id="f5907-123">The host instances for each company contain the receive locations and pipelines to communicate with that company.</span></span> <span data-ttu-id="f5907-124">在一般作業期間，只要您在接收配接器前為向外擴充做了必要工作 (例如，若您設定 HTTP 的網路負載平衡)，傳訊負載將分散於每個主控件的三個主控件執行個體之間。</span><span class="sxs-lookup"><span data-stu-id="f5907-124">During typical operations, as long as you have done the necessary work for scale out in front of the receive adapters (for example, if you configure network load balancing for HTTP), the messaging load is distributed among the three host instances for each host.</span></span> <span data-ttu-id="f5907-125">若一部電腦上的主控件執行個體失敗，在另外兩部電腦上執行的主控件執行個體會提供備援並維護服務的可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-125">If a host instance on one computer fails, the host instances running on the other two computers provide redundancy and maintain service availability.</span></span>  
  
## <a name="scaling-the-biztalk-server-receive-adapters"></a><span data-ttu-id="f5907-126">擴充 BizTalk Server 接收配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-126">Scaling the BizTalk Server Receive Adapters</span></span>  
 <span data-ttu-id="f5907-127">除了主控件執行個體之外，為接收主控件擴充和提供高可用性的程序也取決於您在部署中實作的特定配接器而定。</span><span class="sxs-lookup"><span data-stu-id="f5907-127">Besides host instances, the process of scaling and providing high availability for the receive hosts also depends on the specific adapters that you implement in your deployment.</span></span> <span data-ttu-id="f5907-128">每個配接器都有通訊協定特有的特性，使得每個案例中的規劃和部署均不同。</span><span class="sxs-lookup"><span data-stu-id="f5907-128">Each adapter has protocol-specific characteristics that make planning and deployment different in each case.</span></span> <span data-ttu-id="f5907-129">不過，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 讓您可為所有配接器套用相同的高可用性方案，主要是透過其他電腦和主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5907-129">However, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] lets you apply the same high-availability solution for all adapters, primarily through additional computers and host instances.</span></span>  
  
 <span data-ttu-id="f5907-130">視要使用的特定通訊協定之不同，某些接收配接器需要其他機制，以便在多個主機電腦之間分散內送訊息以提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-130">Depending on the specific protocol being used, some receive adapters require an additional mechanism for distributing incoming messages among multiple host computers to provide high availability.</span></span> <span data-ttu-id="f5907-131">例如，使用 HTTP 或 SOAP 配接器 (又稱為 Web 服務配接器) 的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 解決方案，需要像「網路負載平衡」(NLB) 等負載平衡器來分散接收工作負載。</span><span class="sxs-lookup"><span data-stu-id="f5907-131">For example, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solutions that use the HTTP or SOAP adapter (otherwise known as the Web services adapter) require a load balancer such as Network Load Balancing (NLB) to distribute the receiving workload.</span></span> <span data-ttu-id="f5907-132">下表摘要了 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中最常用之配接器的高可用性指導方針。</span><span class="sxs-lookup"><span data-stu-id="f5907-132">The following table summarizes the high-availability guidelines for the most common adapters in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
|<span data-ttu-id="f5907-133">**配接器**</span><span class="sxs-lookup"><span data-stu-id="f5907-133">**Adapter**</span></span>|<span data-ttu-id="f5907-134">**高可用性指導方針**</span><span class="sxs-lookup"><span data-stu-id="f5907-134">**High-availability guidelines**</span></span>|  
|-----------------|---------------------------------------|  
|<span data-ttu-id="f5907-135">HTTP</span><span class="sxs-lookup"><span data-stu-id="f5907-135">HTTP</span></span>|<span data-ttu-id="f5907-136">將多部電腦新增至接收主控件並將 NLB 設定為在多部主機電腦之間分散內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-136">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="f5907-137">SOAP</span><span class="sxs-lookup"><span data-stu-id="f5907-137">SOAP</span></span>|<span data-ttu-id="f5907-138">將多部電腦新增至接收主控件並將 NLB 設定為在多部主機電腦之間分散內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-138">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="f5907-139">檔案</span><span class="sxs-lookup"><span data-stu-id="f5907-139">File</span></span>|<span data-ttu-id="f5907-140">將多部電腦新增至在每部主機電腦上含有接收位置的接收主控件，這些電腦參考相同的檔案資料夾或是「通用命名慣例」(UNC) 路徑。</span><span class="sxs-lookup"><span data-stu-id="f5907-140">Add multiple computers to the receive host with the receive location on each host computer referencing the same file folder or Universal Naming Convention (UNC) path.</span></span> <span data-ttu-id="f5907-141">在完整高度可用的方案方面，您必須確定 UNC 路徑所指向的檔案位置是高度可用的 (或至少是可靠的)。</span><span class="sxs-lookup"><span data-stu-id="f5907-141">For a complete highly available solution, you must make sure that the file location to which the UNC path points is highly available (or at least reliable).</span></span>|  
|<span data-ttu-id="f5907-142">FTP</span><span class="sxs-lookup"><span data-stu-id="f5907-142">FTP</span></span>|<span data-ttu-id="f5907-143">設定 FTP 接收配接器以便在叢集 BizTalk 主控件中執行。</span><span class="sxs-lookup"><span data-stu-id="f5907-143">Configure the FTP receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="f5907-144">如需詳細資訊，請參閱[叢集主控件中執行配接器處理常式的考量](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="f5907-144">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="f5907-145">POP3</span><span class="sxs-lookup"><span data-stu-id="f5907-145">POP3</span></span>|<span data-ttu-id="f5907-146">設定 POP3 接收配接器以便在叢集 BizTalk 主控件中執行。</span><span class="sxs-lookup"><span data-stu-id="f5907-146">Configure the POP3 receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="f5907-147">如需詳細資訊，請參閱[叢集主控件中執行配接器處理常式的考量](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="f5907-147">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="f5907-148">MSMQ</span><span class="sxs-lookup"><span data-stu-id="f5907-148">MSMQ</span></span>|<span data-ttu-id="f5907-149">設定 MSMQ 接收配接器，Windows 叢集 BizTalk 主控件中執行。</span><span class="sxs-lookup"><span data-stu-id="f5907-149">Configure the MSMQ receive adapter to run in a Windows-clustered BizTalk host.</span></span> <span data-ttu-id="f5907-150">如需詳細資訊，請參閱[叢集主控件中執行配接器處理常式的考量](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="f5907-150">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span> <span data-ttu-id="f5907-151">如果 MSMQ 接收位置會使用遠端 MSMQ 伺服器上的佇列，您不需要在叢集 BizTalk 主控件。</span><span class="sxs-lookup"><span data-stu-id="f5907-151">If the MSMQ receive locations are using queues on a remote MSMQ server, you do not need to cluster the BizTalk host.</span></span>  <span data-ttu-id="f5907-152">在此案例中，執行 MSMQ 接收多個 BizTalk 群組中的電腦上的主機。</span><span class="sxs-lookup"><span data-stu-id="f5907-152">In this scenario, run the MSMQ receive host on multiple BizTalk computers in the group.</span></span>|  
|<span data-ttu-id="f5907-153">MQSeries</span><span class="sxs-lookup"><span data-stu-id="f5907-153">MQSeries</span></span>|<span data-ttu-id="f5907-154">將多部電腦新增至此配接器的接收主控件、使用 MQSeries for Windows 中的叢集佇列管理員，並叢集 MQSeries Server for Windows。</span><span class="sxs-lookup"><span data-stu-id="f5907-154">Add multiple computers to the receive host for this adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span>|  
|<span data-ttu-id="f5907-155">Windows SharePoint Services</span><span class="sxs-lookup"><span data-stu-id="f5907-155">Windows Sharepoint Services</span></span>|<span data-ttu-id="f5907-156">將多部電腦新增至接收主控件並將 NLB 設定為在多部主機電腦之間分散內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-156">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="f5907-157">WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="f5907-157">-   WCF-NetTcp</span></span><br /><span data-ttu-id="f5907-158">-WCF 自訂</span><span class="sxs-lookup"><span data-stu-id="f5907-158">-   WCF-Custom</span></span>|<span data-ttu-id="f5907-159">將多部電腦新增至接收主控件並將 NLB 設定為在這些主機電腦之間分散內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-159">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span><br /><br /> <span data-ttu-id="f5907-160">-或者-</span><span class="sxs-lookup"><span data-stu-id="f5907-160">-or -</span></span><br /><br /> <span data-ttu-id="f5907-161">將配接器接收處理常式所使用的主控件進行叢集處理。</span><span class="sxs-lookup"><span data-stu-id="f5907-161">Cluster the host used by the adapter receive handler.</span></span>|  
|<span data-ttu-id="f5907-162">-Wcf-netnamedpipe</span><span class="sxs-lookup"><span data-stu-id="f5907-162">-   WCF-NetNamedPipe</span></span><br /><span data-ttu-id="f5907-163">-Wcf-basichttp</span><span class="sxs-lookup"><span data-stu-id="f5907-163">-   WCF-BasicHttp</span></span><br /><span data-ttu-id="f5907-164">-Wcf-wshttp</span><span class="sxs-lookup"><span data-stu-id="f5907-164">-   WCF-WSHttp</span></span><br /><span data-ttu-id="f5907-165">-Wcf-customisolated</span><span class="sxs-lookup"><span data-stu-id="f5907-165">-   WCF-CustomIsolated</span></span>|<span data-ttu-id="f5907-166">將多部電腦新增至接收主控件並將 NLB 設定為在這些主機電腦之間分散內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-166">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span>|  
|<span data-ttu-id="f5907-167">WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="f5907-167">WCF-NetMsmq</span></span>|<span data-ttu-id="f5907-168">將配接器接收處理常式所使用的主控件進行叢集處理。</span><span class="sxs-lookup"><span data-stu-id="f5907-168">Cluster the host used by the adapter receive handler.</span></span>|  
  
### <a name="http-adapter"></a><span data-ttu-id="f5907-169">HTTP 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-169">HTTP Adapter</span></span>  
 <span data-ttu-id="f5907-170">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中的 HTTP 接收配接器是網際網路伺服器 API (ISAPI) 延伸模組 (BTSHTTPReceive.dll)，此延伸模組以主控件執行個體的方式在每部接收主機電腦上執行。</span><span class="sxs-lookup"><span data-stu-id="f5907-170">The HTTP receive adapter in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is an Internet Server API (ISAPI) extension (BTSHTTPReceive.dll) that runs as a host instance on each receive host computer.</span></span> <span data-ttu-id="f5907-171">當夥伴透過 HTTP 通訊協定傳送訊息至 BizTalk Server 時，此訊息通常會到達安裝 Internet Information Services (IIS) 的 BizTalk Server 電腦上的特定 URL。</span><span class="sxs-lookup"><span data-stu-id="f5907-171">When a partner sends a message to BizTalk Server through the HTTP protocol, the message typically arrives at a specific URL on a BizTalk Server computer with Internet Information Services (IIS) installed.</span></span> <span data-ttu-id="f5907-172">您可以在 BizTalk Server 中建立主控件執行個體，並包含訂閱此 URL 的接收位置。</span><span class="sxs-lookup"><span data-stu-id="f5907-172">You create a host instance in BizTalk Server with a receive location that subscribes to this URL.</span></span> <span data-ttu-id="f5907-173">當訊息到達 URL 時，BizTalk Server 會擷取它們並將它們保存在 MessageBox 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="f5907-173">When messages arrive at the URL, BizTalk Server retrieves them and persists them in the MessageBox database.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f5907-174"> 可讓您建立相同接收主控件的多個主控件執行個體，為 HTTP 接收配接器提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-174"> provides high availability for the HTTP receive adapter by letting you create multiple host instances of the same receive host.</span></span> <span data-ttu-id="f5907-175">若您使用 NLB 在多個接收主控件之間分散內送訊息，這些主控件執行個體就會訂閱可能是共用或叢集 IP 位址的特定 URL。</span><span class="sxs-lookup"><span data-stu-id="f5907-175">These host instances subscribe to a specific URL that can be a shared, cluster IP address if you are using NLB to distribute incoming messages across multiple receive hosts.</span></span> <span data-ttu-id="f5907-176">這些主控件全部都可以做為叢集的虛擬 IP 位址，因此，若一個叢集成員失敗，其他成員仍然可以服務此 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="f5907-176">These hosts all function to serve the virtual IP address of the cluster, so that if one cluster member fails, others can still serve this IP address.</span></span>  
  
### <a name="soap-adapter-web-services-adapter"></a><span data-ttu-id="f5907-177">SOAP 配接器 (Web 服務配接器)</span><span class="sxs-lookup"><span data-stu-id="f5907-177">SOAP Adapter (Web Services Adapter)</span></span>  
 <span data-ttu-id="f5907-178">不像 HTTP 接收配接器，Web 服務的接收配接器並不包含 ISAPI 延伸模組。</span><span class="sxs-lookup"><span data-stu-id="f5907-178">Unlike the HTTP receive adapter, the receive adapter for Web services does not involve an ISAPI extension.</span></span> <span data-ttu-id="f5907-179">它會經由您利用「BizTalk Web 服務發佈精靈」所指定的 URL 來接收內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-179">It receives incoming messages through a URL that you specify by using the BizTalk Web Services Publishing Wizard.</span></span> <span data-ttu-id="f5907-180">此精靈會匯出 Web 服務並建立可做為接收位置的虛擬目錄。</span><span class="sxs-lookup"><span data-stu-id="f5907-180">This wizard exports a Web service and creates a virtual directory that functions as the receive location.</span></span>  
  
 <span data-ttu-id="f5907-181">若要為 Web 服務配接器提供高可用性，請將多部電腦新增至接收主控件並使用 NLB 來分散內送訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-181">To provide high availability for the Web services adapter, add multiple computers to the receive host and use NLB to distribute incoming messages.</span></span> <span data-ttu-id="f5907-182">當用戶端透過 Web 服務配接器傳送訊息至 BizTalk Server 時，NLB 負載會將訊息平衡至其中一個接收主控件，而在主控件上執行的適當主控件執行個體會保存訊息在 MessageBox 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="f5907-182">When a client sends a message to BizTalk Server through the Web services adapter, NLB load balances the message to one of the receiving hosts, and the appropriate host instance running on the host persists the message to the MessageBox database.</span></span>  
  
### <a name="file-adapter"></a><span data-ttu-id="f5907-183">FILE 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-183">File Adapter</span></span>  
 <span data-ttu-id="f5907-184">FILE 接收配接器會擷取檔案資料夾或 UNC 路徑的訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-184">The File receive adapter retrieves messages from a file folder or UNC path.</span></span> <span data-ttu-id="f5907-185">因為雙方都需要路徑的權限，而不同的公司通常不會共用檔案系統，所以此配接器通常是用在公司內，而不是 B2B 的實例。</span><span class="sxs-lookup"><span data-stu-id="f5907-185">This adapter is frequently used within companies instead of in business-to-business scenarios because both parties require permissions to the path, and companies do not typically share file systems.</span></span> <span data-ttu-id="f5907-186">您可以設定檔案接收處理常式來訂閱路徑，這樣 BizTalk Server 就會在訊息到達接收位置時擷取它。</span><span class="sxs-lookup"><span data-stu-id="f5907-186">You configure the File receive handler to subscribe to the path so that BizTalk Server retrieves the message when it arrives at the receive location.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f5907-187"> 可讓您在訂閱相同 UNC 路徑的多個主機電腦上建立主控件執行個體，為 FILE 接收配接器提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-187"> provides high availability for the file receive adapter by letting you create host instances on multiple host computers that subscribe to the same UNC path.</span></span> <span data-ttu-id="f5907-188">若在一部主機電腦上執行的主控件執行個體發生錯誤或失敗，在另一部主機電腦上執行的相同主控件執行個體就會擷取訊息，並將它保存在 MessageBox 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="f5907-188">If a host instance running on one host computer encounters errors or fails, the same host instance running on another host computer can retrieve the message and persist it to the MessageBox database.</span></span>  
  
### <a name="ftp-adapter"></a><span data-ttu-id="f5907-189">FTP 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-189">FTP Adapter</span></span>  
 <span data-ttu-id="f5907-190">FTP 接收配接器不應設定為在多個主控件中執行，因為 FTP 接收配接器使用 FTP 通訊協定擷取目標系統的檔案，而 FTP 通訊協定並沒有任何檔案鎖定的概念可確保執行 FTP 接收配接器的多個執行個體時不能同時擷取相同檔案的多個複本。</span><span class="sxs-lookup"><span data-stu-id="f5907-190">The FTP receive adapter should not be configured to run in multiple hosts because the FTP receive adapter uses the FTP protocol to retrieve files from the target system and the FTP protocol does not have any notion of file locking to ensure that multiple copies of the same file are not retrieved simultaneously when running multiple instances of the FTP receive adapter.</span></span> <span data-ttu-id="f5907-191">FTP 接收配接器應設定為在叢集 BizTalk 主控件中執行。</span><span class="sxs-lookup"><span data-stu-id="f5907-191">The FTP receive adapter should be configured to run in a clustered BizTalk host.</span></span> <span data-ttu-id="f5907-192">如需詳細資訊，請參閱[叢集主控件中執行配接器處理常式的考量](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="f5907-192">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="pop3-adapter"></a><span data-ttu-id="f5907-193">POP3 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-193">POP3 Adapter</span></span>  
 <span data-ttu-id="f5907-194">POP3 接收配接器可以設定為在多個主控件中執行，除非配接器正在讀取的 POP3 伺服器允許多個並行連線同時連接到相同信箱。</span><span class="sxs-lookup"><span data-stu-id="f5907-194">The POP3 receive adapter can be configured to run in multiple hosts unless the POP3 server that the adapter is reading from allows multiple concurrent connections to be made to the same mailbox.</span></span> <span data-ttu-id="f5907-195">若 POP3 配接器所連接的 POP3 伺服器允許多個連接至其信箱的並行連線，則必須透過設定 POP3 配接器接收處理常式在已叢集的 BizTalk 主控件執行個體中執行，以達成 POP3 配接器的高可用性。</span><span class="sxs-lookup"><span data-stu-id="f5907-195">If the POP3 server that the POP3 adapter is connected to permits multiple concurrent connections to its mailboxes then high availability for the POP3 adapter must be achieved by configuring POP3 adapter receive handlers to run in a BizTalk host instance that has been clustered.</span></span> <span data-ttu-id="f5907-196">如需詳細資訊，請參閱[叢集主控件中執行配接器處理常式的考量](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="f5907-196">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="msmq-adapter"></a><span data-ttu-id="f5907-197">MSMQ 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-197">MSMQ Adapter</span></span>  
 <span data-ttu-id="f5907-198">若要達到高可用性，執行 MSMQ 接收配接器，在 Windows 叢集 BizTalk 主控件叢集 MSMQ 資源相同叢集群組中。</span><span class="sxs-lookup"><span data-stu-id="f5907-198">To achieve high availability, run the MSMQ receive adapter in a Windows-clustered BizTalk host that is in the same cluster group as the clustered MSMQ resource.</span></span> <span data-ttu-id="f5907-199">如需詳細資訊，請參閱[叢集主控件中執行配接器處理常式的考量](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="f5907-199">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
 <span data-ttu-id="f5907-200">如果 MSMQ 接收位置是**只**接收來自遠端 MSMQ 伺服器上的 MSMQ 佇列，則可以透過執行 MSMQ 達成高可用性 BizTalk 群組中接收多個 BizTalk 電腦上的主機。</span><span class="sxs-lookup"><span data-stu-id="f5907-200">If the MSMQ receive location is **only** receiving from MSMQ queues on a remote MSMQ server, then high availability can be achieved by running the MSMQ receive host on multiple BizTalk computers in the BizTalk group.</span></span>  <span data-ttu-id="f5907-201">若要 MSMQ 提供高可用性，您必須確定遠端 MSMQ 伺服器正在使用容錯移轉叢集的 Windows。</span><span class="sxs-lookup"><span data-stu-id="f5907-201">To provide high availability for MSMQ, you must ensure the remote MSMQ server is using failover clustering in Windows.</span></span>  <span data-ttu-id="f5907-202">遠端 MSMQ 伺服器使用交易式佇列，如果必須執行 MSMQ 4.0 (Windows Server 2008) 或更新版本。</span><span class="sxs-lookup"><span data-stu-id="f5907-202">If using transactional queues, the remote MSMQ server must be running MSMQ 4.0 (Windows Server 2008) or above.</span></span>  
  
### <a name="mqseries-adapter"></a><span data-ttu-id="f5907-203">MQSeries 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-203">MQSeries Adapter</span></span>  
 <span data-ttu-id="f5907-204">Microsoft BizTalk Adapter for MQSeries 可做為 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 與 IBM MQSeries 伺服器之間的橋樑。</span><span class="sxs-lookup"><span data-stu-id="f5907-204">The Microsoft BizTalk Adapter for MQSeries serves as a bridge between [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and IBM MQSeries servers.</span></span> <span data-ttu-id="f5907-205">若要在使用此配接器時提供高度可用的方案，您必須有多個執行 MQSeries 配接器的主控件執行個體，且使用 MQSeries for Windows 中的叢集佇列管理員，並叢集 MQSeries Server for Windows。</span><span class="sxs-lookup"><span data-stu-id="f5907-205">To provide a highly available solution when you use this adapter, you must have multiple instances of the host running the MQSeries adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span> <span data-ttu-id="f5907-206">如需叢集佇列管理員及叢集 MQSeries Server 的詳細資訊，請參閱 IBM WebSphere MQ 文件。</span><span class="sxs-lookup"><span data-stu-id="f5907-206">For more information about clustering the queue manager and clustering the MQSeries Server, see the IBM WebSphere MQ documentation.</span></span> <span data-ttu-id="f5907-207">如需讓 MQSeries 配接器高度可用的詳細資訊，請參閱 Microsoft BizTalk Adapter for MQSeries 說明中的＜高可用性＞。</span><span class="sxs-lookup"><span data-stu-id="f5907-207">For more information about making the MQSeries adapter highly available, see "High Availability" in Microsoft BizTalk Adapter for MQSeries Help.</span></span>  
  
### <a name="windows-sharepoint-services-adapter"></a><span data-ttu-id="f5907-208">Windows SharePoint Services 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-208">Windows SharePoint Services Adapter</span></span>  
 <span data-ttu-id="f5907-209">Windows SharePoint Services 配接器透過呼叫由 SharePoint 電腦上的 BizTalk 所安裝的 Windows SharePoint Services Web 服務來擷取 SharePoint 的訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-209">The Windows SharePoint Services adapter retrieves messages from SharePoint by calling into the Windows SharePoint Services web service installed by BizTalk on the SharePoint machine.</span></span> <span data-ttu-id="f5907-210">配接器使用簽出機制，以確保不同的主控件執行個體將不會處理相同訊息。</span><span class="sxs-lookup"><span data-stu-id="f5907-210">The adapter uses a checkout mechanism in order to ensure that different host instances will not process the same message.</span></span> <span data-ttu-id="f5907-211">這可讓接收配接器向外延展，藉由新增更多的主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5907-211">This allows the receive adapter to scale out by adding more host instances.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f5907-212">提供高可用性 SharePoint 接收配接器，可讓您執行相同的接收訂閱指向 SharePoint NLB 安裝之相同 HTTP URL 的多個主控件執行個體上的位置。</span><span class="sxs-lookup"><span data-stu-id="f5907-212"> provides high availability for the SharePoint receive adapter by letting you run the same receive locations on multiple host instances that subscribe to the same HTTP URL pointing to a SharePoint NLB installation.</span></span>  
  
### <a name="wcf-nettcp-adapter"></a><span data-ttu-id="f5907-213">WCF-NetTcp 配接器</span><span class="sxs-lookup"><span data-stu-id="f5907-213">WCF-NetTcp Adapter</span></span>  
 <span data-ttu-id="f5907-214">NetTcpBinding 可以使用 IP 層負載平衡技術來進行負載平衡。</span><span class="sxs-lookup"><span data-stu-id="f5907-214">The NetTcpBinding can be load balanced using IP-layer load balancing techniques.</span></span> <span data-ttu-id="f5907-215">不過，NetTcpBinding 預設會使用 TCP 連線集區以減少連線延遲時間。</span><span class="sxs-lookup"><span data-stu-id="f5907-215">However, the NetTcpBinding pools TCP connections by default to reduce connection latency.</span></span> <span data-ttu-id="f5907-216">這是最佳化處理，但會干擾負載平衡的基本機制。</span><span class="sxs-lookup"><span data-stu-id="f5907-216">This is an optimization that interferes with the basic mechanism of load balancing.</span></span> <span data-ttu-id="f5907-217">主要用於最佳化 NetTcpBinding 的組態值是租用逾時，此值屬於 [連線集區設定] 的一部分。</span><span class="sxs-lookup"><span data-stu-id="f5907-217">The primary configuration value for optimizing the NetTcpBinding is the lease timeout, which is part of the Connection Pool Settings.</span></span> <span data-ttu-id="f5907-218">使用 連線集區會導致用戶端連線只會連到與伺服器陣列中的特定伺服器 。</span><span class="sxs-lookup"><span data-stu-id="f5907-218">Connection pooling causes client connections to become associated to specific servers within the farm.</span></span> <span data-ttu-id="f5907-219">如果這些連線的存留期增加 (由租用逾時設定控制的因素)，伺服器陣列中各伺服器之間的負載分配就會變得不均衡。</span><span class="sxs-lookup"><span data-stu-id="f5907-219">As the lifetime of those connections increase (a factor controlled by the lease timeout setting), the load distribution across various servers in the farm becomes unbalanced.</span></span> <span data-ttu-id="f5907-220">這樣平均呼叫時間就會增加。</span><span class="sxs-lookup"><span data-stu-id="f5907-220">As a result the average call time increases.</span></span> <span data-ttu-id="f5907-221">因此，在負載平衡的實例中使用 NetTcpBinding 時，請考慮減少繫節所使用的預設租用逾時。</span><span class="sxs-lookup"><span data-stu-id="f5907-221">So when using the NetTcpBinding in load-balanced scenarios, consider reducing the default lease timeout used by the binding.</span></span> <span data-ttu-id="f5907-222">對於負載平衡實例，先使用 30 秒的租用逾時值還算適當，但最佳值仍應視應用程式而定。</span><span class="sxs-lookup"><span data-stu-id="f5907-222">A 30-second lease timeout is a reasonable starting point for load-balanced scenarios, although the optimal value is application-dependent.</span></span> <span data-ttu-id="f5907-223">如需 通道租用逾時和其他傳輸配額的詳細資訊，請參閱 「 傳輸配額 」。</span><span class="sxs-lookup"><span data-stu-id="f5907-223">For more information about the channel lease timeout and other transport quotas, see Transport Quotas.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f5907-224">另請參閱</span><span class="sxs-lookup"><span data-stu-id="f5907-224">See Also</span></span>  
 [<span data-ttu-id="f5907-225">為 BizTalk 主控件提供高可用性</span><span class="sxs-lookup"><span data-stu-id="f5907-225">Providing High Availability for BizTalk Hosts</span></span>](../core/providing-high-availability-for-biztalk-hosts.md)