---
title: 設定 AS2 的憑證 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: c160f294-7529-4e0a-876c-5827feaed067
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: cb2f9c22ddf41eec4133710de8a775bf8ff0b044
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22234654"
---
# <a name="configuring-certificates-for-as2"></a><span data-ttu-id="40cb9-102">設定 AS2 的憑證</span><span class="sxs-lookup"><span data-stu-id="40cb9-102">Configuring Certificates for AS2</span></span>
<span data-ttu-id="40cb9-103">為了使用加密和數位簽章來保護 AS2 資料傳輸，除了在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 適當設定 AS2 之外，您還必須安裝適當的憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-103">To help secure AS2 data transfer using encryption and digital signatures, you must have the appropriate certificates installed, in addition to the appropriate AS2 configuration on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="40cb9-104">本主題會描述所需的憑證、如何設定憑證，以及憑證的常見問題。</span><span class="sxs-lookup"><span data-stu-id="40cb9-104">This topic describes the certificates required, how to configure them, and common issues with them.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="40cb9-105">必要條件</span><span class="sxs-lookup"><span data-stu-id="40cb9-105">Prerequisites</span></span>  
 <span data-ttu-id="40cb9-106">您必須以「[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 系統管理員」群組的成員身分登入。</span><span class="sxs-lookup"><span data-stu-id="40cb9-106">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span>  
  
## <a name="certificates-required-for-as2-transport"></a><span data-ttu-id="40cb9-107">AS2 傳輸所需的憑證</span><span class="sxs-lookup"><span data-stu-id="40cb9-107">Certificates Required for AS2 Transport</span></span>  
 <span data-ttu-id="40cb9-108">為了保護 AS2 資料傳輸，您必須將適當憑證加入適當的憑證存放區，並使憑證與適當的 BizTalk 成品產生關聯。</span><span class="sxs-lookup"><span data-stu-id="40cb9-108">To help secure AS2 data transfer, you must add the appropriate certificate to the appropriate certificate store, and associate the certificates with the appropriate BizTalk artifacts.</span></span> <span data-ttu-id="40cb9-109">下列憑證可用來保護 AS2 訊息：</span><span class="sxs-lookup"><span data-stu-id="40cb9-109">The following certificates are used to help secure AS2 messages:</span></span>  
  
|<span data-ttu-id="40cb9-110">憑證使用方式</span><span class="sxs-lookup"><span data-stu-id="40cb9-110">Certificate Usage</span></span>|<span data-ttu-id="40cb9-111">憑證類型</span><span class="sxs-lookup"><span data-stu-id="40cb9-111">Certificate Type</span></span>|<span data-ttu-id="40cb9-112">管線元件</span><span class="sxs-lookup"><span data-stu-id="40cb9-112">Pipeline Component</span></span>|<span data-ttu-id="40cb9-113">使用者內容</span><span class="sxs-lookup"><span data-stu-id="40cb9-113">User Context</span></span>|<span data-ttu-id="40cb9-114">憑證存放區</span><span class="sxs-lookup"><span data-stu-id="40cb9-114">Certificate Store</span></span>|<span data-ttu-id="40cb9-115">定義於</span><span class="sxs-lookup"><span data-stu-id="40cb9-115">Where Defined</span></span>|  
|-----------------------|----------------------|------------------------|------------------|-----------------------|-------------------|  
|<span data-ttu-id="40cb9-116">簽章 (輸出)</span><span class="sxs-lookup"><span data-stu-id="40cb9-116">Signature (outbound)</span></span>|<span data-ttu-id="40cb9-117">自有私密金鑰 (.pfx)</span><span class="sxs-lookup"><span data-stu-id="40cb9-117">Own private key (.pfx)</span></span>|<span data-ttu-id="40cb9-118">AS2 編碼器</span><span class="sxs-lookup"><span data-stu-id="40cb9-118">AS2 encoder</span></span>|<span data-ttu-id="40cb9-119">與傳送處理常式相關聯之主控件執行個體所使用的帳戶</span><span class="sxs-lookup"><span data-stu-id="40cb9-119">Account used by the host instance associated with the send handler.</span></span>|<span data-ttu-id="40cb9-120">每個以主控件執行個體服務帳戶身分裝載 AS2 編碼器管線的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的目前使用者\個人存放區。</span><span class="sxs-lookup"><span data-stu-id="40cb9-120">Current User\Personal store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 encoder pipeline as each host instance service account</span></span>|<span data-ttu-id="40cb9-121">-   **憑證**頁面**群組內容** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="40cb9-121">-   **Certificate** page of the **Group Properties** dialog box.</span></span> <span data-ttu-id="40cb9-122">這是傳送已簽署的文件時所使用的預設簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-122">This is the default signing certificate used when sending signed documents.</span></span><br /><span data-ttu-id="40cb9-123">-您可以覆寫預設的憑證設定，並針對不同的合作對象改用不同的憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-123">-   You can override the default certificate setting and instead use different certificates for different parties.</span></span> <span data-ttu-id="40cb9-124">您可以藉由選取**覆寫群組簽章憑證**中**簽章憑證**單向協議索引標籤的頁面**協議屬性**對話方塊方塊中，並指定簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-124">You can do so by selecting **Override Group Signature Certificate** in the **Signature Certificate** page of the one-way agreement tab of the **Agreement Properties** dialog box, and specify a signing certificate.</span></span> <span data-ttu-id="40cb9-125">如果設定這個屬性，無論 AS2 訊息會解析為協議將會使用憑證簽署中提供**簽章憑證**頁面上，並不是由憑證提供做為 BizTalk 群組屬性的一部分。</span><span class="sxs-lookup"><span data-stu-id="40cb9-125">If this property is set, whichever AS2 message resolves to the agreement will be signed using the certificate provided in the **Signature Certificate** page and not by the certificate provided as part of the BizTalk Group properties.</span></span>|  
|<span data-ttu-id="40cb9-126">簽章驗證 (輸入)</span><span class="sxs-lookup"><span data-stu-id="40cb9-126">Signature verification (inbound)</span></span>|<span data-ttu-id="40cb9-127">交易夥伴的公開金鑰 (.cer)</span><span class="sxs-lookup"><span data-stu-id="40cb9-127">Trading partner's public key (.cer)</span></span>|<span data-ttu-id="40cb9-128">AS2 解碼器</span><span class="sxs-lookup"><span data-stu-id="40cb9-128">AS2 decoder</span></span>|<span data-ttu-id="40cb9-129">與接收處理常式相關聯之主控件執行個體所使用的帳戶</span><span class="sxs-lookup"><span data-stu-id="40cb9-129">Account used by the host instance associated with the receive handler.</span></span>|<span data-ttu-id="40cb9-130">每個以主控件執行個體服務帳戶身分裝載 AS2 解碼器管線的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的本機電腦\其他人存放區。</span><span class="sxs-lookup"><span data-stu-id="40cb9-130">Local computer\Other People store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 decoder pipeline as each host instance service account</span></span>|<span data-ttu-id="40cb9-131">**憑證**頁面**合作對象屬性**對話方塊**附註：** 用來驗證合作對象必須是唯一從用來驗證簽章憑證的簽章的憑證其他合作對象。</span><span class="sxs-lookup"><span data-stu-id="40cb9-131">**Certificate** page of the **Party Properties** dialog box **Note:**  The certificate used to verify a signature for a party must be unique from the certificates used to verify signatures for other parties.</span></span>|  
|<span data-ttu-id="40cb9-132">加密 (輸出)</span><span class="sxs-lookup"><span data-stu-id="40cb9-132">Encryption (outbound)</span></span>|<span data-ttu-id="40cb9-133">交易夥伴的公開金鑰 (.cer)</span><span class="sxs-lookup"><span data-stu-id="40cb9-133">Trading partner's public key (.cer)</span></span>|<span data-ttu-id="40cb9-134">AS2 編碼器</span><span class="sxs-lookup"><span data-stu-id="40cb9-134">AS2 encoder</span></span>|<span data-ttu-id="40cb9-135">與傳送處理常式相關聯之主控件執行個體所使用的帳戶</span><span class="sxs-lookup"><span data-stu-id="40cb9-135">Account used by the host instance associated with the send handler.</span></span>|<span data-ttu-id="40cb9-136">每個裝載 AS2 編碼器管線的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的本機電腦\其他人存放區</span><span class="sxs-lookup"><span data-stu-id="40cb9-136">Local computer\Other People store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 encoder pipeline</span></span>|<span data-ttu-id="40cb9-137">**憑證**頁面**傳送埠屬性**對話方塊</span><span class="sxs-lookup"><span data-stu-id="40cb9-137">**Certificate** page of the **Send Port Properties** dialog box</span></span>|  
|<span data-ttu-id="40cb9-138">解密 (輸入)</span><span class="sxs-lookup"><span data-stu-id="40cb9-138">Decryption (inbound)</span></span>|<span data-ttu-id="40cb9-139">自有私密金鑰 (.pfx)</span><span class="sxs-lookup"><span data-stu-id="40cb9-139">Own private key (.pfx)</span></span>|<span data-ttu-id="40cb9-140">AS2 解碼器</span><span class="sxs-lookup"><span data-stu-id="40cb9-140">AS2 decoder</span></span>|<span data-ttu-id="40cb9-141">與接收處理常式相關聯之主控件執行個體所使用的帳戶</span><span class="sxs-lookup"><span data-stu-id="40cb9-141">Account used by the host instance associated with the receive handler.</span></span>|<span data-ttu-id="40cb9-142">每個以主控件執行個體服務帳戶身分裝載 AS2 解碼器管線的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的目前使用者\個人存放區。</span><span class="sxs-lookup"><span data-stu-id="40cb9-142">Current User\Personal store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 decoder pipeline as each host instance service account</span></span>|<span data-ttu-id="40cb9-143">「AS2 解碼器」會根據訊息中的憑證資訊來判斷憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-143">The AS2 Decoder will determine the certificate based upon certificate information in the message.</span></span><br /><br /> <span data-ttu-id="40cb9-144">對於 BizTalk MIME 解碼器，憑證必須位於**憑證**用來接收訊息的主控件的頁面。</span><span class="sxs-lookup"><span data-stu-id="40cb9-144">For the BizTalk MIME Decoder, the certificate must be in the **Certificate** page of the host used for receiving the message.</span></span> <span data-ttu-id="40cb9-145">這不一定適用於「AS2 解碼器」。</span><span class="sxs-lookup"><span data-stu-id="40cb9-145">This is not necessary for the AS2 Decoder.</span></span>|  
  
## <a name="certificate-signing-for-outgoing-messages"></a><span data-ttu-id="40cb9-146">外寄訊息的憑證簽署</span><span class="sxs-lookup"><span data-stu-id="40cb9-146">Certificate Signing for Outgoing Messages</span></span>  
 <span data-ttu-id="40cb9-147">外寄 AS2 訊息會以 BizTalk 群組屬性所定義的預設憑證簽署。</span><span class="sxs-lookup"><span data-stu-id="40cb9-147">Outgoing AS2 messages are signed using a default certificate defined as part of the BizTalk Group properties.</span></span> <span data-ttu-id="40cb9-148">但在某些情況下，接收訊息的合作對象可能希望訊息是以他們提供的私人憑證來簽署，或希望傳送給他們的外寄訊息是以不同的憑證來簽署。</span><span class="sxs-lookup"><span data-stu-id="40cb9-148">However, there could be scenarios where the party receiving the messages wants the messages to be signed with a private certificate that they provide or expect a different certificate to be used when signing outgoing messages for them.</span></span> <span data-ttu-id="40cb9-149">如果您選取 啟用此案例的簽署外寄訊息，使用其他憑證**覆寫群組簽章憑證**中**簽章憑證**頁面的單向協議索引標籤**協議屬性**對話方塊方塊中，並指定簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-149">This scenario of signing outgoing messages using other certificates is enabled if you select the **Override Group Signature Certificate** in the **Signature Certificate** page of the one-way agreement tab of the **Agreement Properties** dialog box, and specify a signing certificate.</span></span> <span data-ttu-id="40cb9-150">如果某個憑證指定在合作對象的 AS2 協議中，即會使用該憑證簽署外寄訊息。</span><span class="sxs-lookup"><span data-stu-id="40cb9-150">If a certificate is specified as part of the AS2 agreement for a party, that certificate is used for signing outgoing messages.</span></span> <span data-ttu-id="40cb9-151">如果未針對合作對象定義任何憑證，則會使用 BizTalk 群組屬性所指定的預設憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-151">If no certificate is defined for the party, the default certificate specified as part of the BizTalk Group properties is used.</span></span>  
  
## <a name="adding-certificates-to-the-certificate-stores"></a><span data-ttu-id="40cb9-152">將憑證加入憑證存放區</span><span class="sxs-lookup"><span data-stu-id="40cb9-152">Adding Certificates to the Certificate Stores</span></span>  
 <span data-ttu-id="40cb9-153">如需詳細資訊，請參閱 < 顯示憑證管理主控台 > 一節[安裝 WCF 配接器的憑證](../core/installing-certificates-for-the-wcf-adapters.md)，並將[憑證精靈公用程式](../core/certificate-wizard-utility.md)主題。</span><span class="sxs-lookup"><span data-stu-id="40cb9-153">For more information, see the "Displaying the Certificates Management Console" section of [Installing Certificates for the WCF Adapters](../core/installing-certificates-for-the-wcf-adapters.md), as well as the [Certificate Wizard Utility](../core/certificate-wizard-utility.md) topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="40cb9-154">只有在針對其登入認證與主控件執行個體相關聯的使用者載入使用者設定檔時，個人憑證存放區才能用於訊息處理。</span><span class="sxs-lookup"><span data-stu-id="40cb9-154">The Personal certificate store will be available for message processing only if the user profile is loaded for the user whose logon credentials are associated with the host instance.</span></span> <span data-ttu-id="40cb9-155">個人存放區是用於簽章和解密憑證 (使用者專屬的私密金鑰)。</span><span class="sxs-lookup"><span data-stu-id="40cb9-155">The Personal store is used for signing and decryption certificates (the user's own private key).</span></span> <span data-ttu-id="40cb9-156">預設會為內含式主控件執行個體載入使用者設定檔，但是不會為外掛式主控件執行個體載入使用者設定檔。</span><span class="sxs-lookup"><span data-stu-id="40cb9-156">The user profile is loaded by default for the in-process host instance; however, the user profile is not loaded by default for the isolated host instance.</span></span> <span data-ttu-id="40cb9-157">您可以讓應用程式針對外掛式主控件載入使用者設定檔。</span><span class="sxs-lookup"><span data-stu-id="40cb9-157">You can have an application load the user profile for the isolated host.</span></span> <span data-ttu-id="40cb9-158">或者，您也可以為內含式主控件執行個體和外掛式主控件執行個體使用相同的登入，以解決這個問題。</span><span class="sxs-lookup"><span data-stu-id="40cb9-158">Alternatively, you can work around this issue by using the same logon for the in-process host instance and the isolated host instance.</span></span>  
  
## <a name="generating-certificates"></a><span data-ttu-id="40cb9-159">產生憑證</span><span class="sxs-lookup"><span data-stu-id="40cb9-159">Generating Certificates</span></span>  
 <span data-ttu-id="40cb9-160">您可以向憑證授權單位 (CA) 取得憑證；但要求憑證的步驟可能會隨 CA 而不同。</span><span class="sxs-lookup"><span data-stu-id="40cb9-160">Certificates can be obtained from a Certificate Authority (CA); however the steps to request a certificate can vary between CAs.</span></span> <span data-ttu-id="40cb9-161">在提交憑證要求之前，請先檢閱憑證授權單位的網站所提供的資訊。</span><span class="sxs-lookup"><span data-stu-id="40cb9-161">Review the information provided on the Certificate Authority’s Web site before submitting any certificate requests.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="40cb9-162">AS2 傳輸所使用的憑證必須有憑證預定使用方式的必要屬性。</span><span class="sxs-lookup"><span data-stu-id="40cb9-162">Certificates used for AS2 transport must have the attributes required for their intended use.</span></span> <span data-ttu-id="40cb9-163">簽署和簽章驗證，**金鑰使用方法**憑證的屬性必須是**數位簽章**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-163">For signing and signature verification, the **Key Usage** attribute of the certificate must be **Digital Signature**.</span></span> <span data-ttu-id="40cb9-164">加密和解密，**金鑰使用方法**憑證的屬性必須是**資料編密**或**金鑰編密**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-164">For encryption and decryption, the **Key Usage** attribute of the certificate must be **Data Encipherment** or **Key Encipherment**.</span></span> <span data-ttu-id="40cb9-165">您可以確認**金鑰使用方法**屬性，請按兩下憑證，然後按一下**詳細資料**索引標籤中**憑證**對話方塊中，並檢查**金鑰使用方法**欄位。</span><span class="sxs-lookup"><span data-stu-id="40cb9-165">You can verify the **Key Usage** attribute by double-clicking the certificate, clicking the **Details** tab in the **Certificate** dialog box, and checking the **Key Usage** field.</span></span>  
  
 <span data-ttu-id="40cb9-166">您也可以使用「憑證服務」，在 Windows Server 2003 或 Windows Server 2000 中產生憑證，但您的合作對象可能只會將這些憑證用於測試目的，因為這些憑證是自我簽署的憑證，而非公用 CA 所簽署的憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-166">You can also generate certificates in Windows Server 2008 by using Certificate Services, however your partner may only accept these certificates for test purposes as they are self-signed instead of signed by a public CA.</span></span> <span data-ttu-id="40cb9-167">如需有關如何使用憑證服務來要求憑證的詳細資訊，請下載**Windows Server 2008 Active Directory 憑證服務逐步指南**從[Windows Server 2008 逐步指南](http://go.microsoft.com/fwlink/?LinkId=187916) ([http://go.microsoft.com/fwlink/?LinkId=187916](http://go.microsoft.com/fwlink/?LinkId=187916))。</span><span class="sxs-lookup"><span data-stu-id="40cb9-167">For more information on using Certificate Services to request certificates, download **Windows Server 2008 Active Directory Certificate Services Step-By-Step Guide** from [Windows Server 2008 Step-by-Step Guides](http://go.microsoft.com/fwlink/?LinkId=187916) ([http://go.microsoft.com/fwlink/?LinkId=187916](http://go.microsoft.com/fwlink/?LinkId=187916)).</span></span>  
  
### <a name="to-configure-a-certificate-for-signing-outgoing-as2-messages"></a><span data-ttu-id="40cb9-168">若要設定用以簽署外寄 AS2 訊息的憑證</span><span class="sxs-lookup"><span data-stu-id="40cb9-168">To configure a certificate for signing outgoing AS2 messages</span></span>  
  
1.  <span data-ttu-id="40cb9-169">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，以滑鼠右鍵按一下**BizTalk 群組**節點，然後再按一下**屬性**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-169">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **BizTalk Group** node, and then click **Properties**.</span></span>  
  
2.  <span data-ttu-id="40cb9-170">在主控台樹狀目錄中的**群組內容**對話方塊中，按一下 **憑證**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-170">In the console tree of the **Group Properties** dialog box, click **Certificate**.</span></span>  
  
3.  <span data-ttu-id="40cb9-171">在**憑證**] 窗格中，按一下 [**瀏覽**，尋找您想要用於簽署的憑證，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-171">In the **Certificate** pane, click **Browse**, find the certificate you want to use for signing, and then click **OK**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="40cb9-172">您可以只輸入憑證指紋，而不需要輸入憑證的一般名稱。</span><span class="sxs-lookup"><span data-stu-id="40cb9-172">Instead of entering the common name of the certificate, you can enter just the thumbprint.</span></span> <span data-ttu-id="40cb9-173">您可以按兩下在 MMC 或檔案系統中，按一下 憑證存放區中的憑證來取得憑證指紋**詳細資料**索引標籤上，按一下**指紋**欄位，然後複製憑證指紋.</span><span class="sxs-lookup"><span data-stu-id="40cb9-173">You can get the thumbprint by double-clicking the certificate in the certificate store in MMC or in the file system, clicking the **Details** tab, clicking the **Thumbprint** field, and copying the thumbprint.</span></span>  
  
4.  <span data-ttu-id="40cb9-174">按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-174">Click **OK**.</span></span>  
  
### <a name="to-configure-a-certificate-for-signing-outgoing-as2-messages-for-a-specific-party"></a><span data-ttu-id="40cb9-175">若要為特定合作對象設定用以簽署外寄 AS2 訊息的憑證</span><span class="sxs-lookup"><span data-stu-id="40cb9-175">To configure a certificate for signing outgoing AS2 messages for a specific party</span></span>  
  
1.  <span data-ttu-id="40cb9-176">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，按一下 **合作對象**節點。</span><span class="sxs-lookup"><span data-stu-id="40cb9-176">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node.</span></span> <span data-ttu-id="40cb9-177">從**合作對象與商務設定檔**] 窗格中，從**協議**區段中以滑鼠右鍵按一下 [建立與特定合作對象交換訊息的協議，然後按一下**屬性**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-177">From the **Parties and Business Profiles** pane, from the **Agreements** section, right-click the agreement that is created for exchanging messages with a specific party, and click **Properties**.</span></span>  
  
2.  <span data-ttu-id="40cb9-178">在單向協議索引標籤上，按一下 **簽章憑證**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-178">On a one-way agreement tab, click **Signature Certificates**.</span></span>  
  
3.  <span data-ttu-id="40cb9-179">選取**覆寫群組簽章憑證**使用此頁面中的憑證簽署外寄 AS2 訊息和 MDN 核取方塊。</span><span class="sxs-lookup"><span data-stu-id="40cb9-179">Select the **Override group signing certificate** check box to use the certificate provided in this page for signing outgoing AS2 messages and MDN.</span></span>  
  
4.  <span data-ttu-id="40cb9-180">按一下**瀏覽**顯示**選取憑證**對話方塊中，選取要套用此合作對象所傳輸訊息的簽章憑證的位置。</span><span class="sxs-lookup"><span data-stu-id="40cb9-180">Click **Browse** to display the **Select Certificate** dialog box, where you select the signature certificate to apply to messages transmitted by this party.</span></span>  
  
5.  <span data-ttu-id="40cb9-181">**一般名稱**文字方塊會顯示所選憑證的描述。</span><span class="sxs-lookup"><span data-stu-id="40cb9-181">The **Common Name** text box displays a description of the selected certificate.</span></span>  
  
6.  <span data-ttu-id="40cb9-182">**指紋**文字方塊會顯示憑證的指紋。</span><span class="sxs-lookup"><span data-stu-id="40cb9-182">The **Thumbprint** text box displays the thumbprint of certificate.</span></span> <span data-ttu-id="40cb9-183">憑證指紋的格式為 HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH，其中 H 是十六進位數字 (0 到 9 的數字或是 A 到 F 的字母)。</span><span class="sxs-lookup"><span data-stu-id="40cb9-183">The certificate thumbprint has the format HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH, where H is a hexadecimal digit (a number from 0 through 9 or a letter from A through F).</span></span>  
  
7.  <span data-ttu-id="40cb9-184">按一下**移除憑證**若要移除選取的憑證。</span><span class="sxs-lookup"><span data-stu-id="40cb9-184">Click **Remove Certificate** to remove the selected certificate.</span></span>  
  
8.  <span data-ttu-id="40cb9-185">按一下**確定**來驗證變更，然後關閉對話方塊。</span><span class="sxs-lookup"><span data-stu-id="40cb9-185">Click **OK** to validate the changes and then close the dialog box.</span></span>  
  
### <a name="to-configure-a-certificate-for-verifying-the-digital-signature-of-an-incoming-as2-messages"></a><span data-ttu-id="40cb9-186">若要設定憑證來確認內送 AS2 訊息的數位簽章</span><span class="sxs-lookup"><span data-stu-id="40cb9-186">To configure a certificate for verifying the digital signature of an incoming AS2 messages</span></span>  
  
1.  <span data-ttu-id="40cb9-187">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，開啟**BizTalk 群組**節點，然後再按一下**合作對象**節點。</span><span class="sxs-lookup"><span data-stu-id="40cb9-187">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, open the **BizTalk Group** node, and then click the **Parties** node.</span></span>  
  
2.  <span data-ttu-id="40cb9-188">在**合作對象與商務設定檔**窗格中，以滑鼠右鍵按一下您將接收的合作對象簽章的訊息，然後按一下 **屬性**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-188">In the **Parties and Business Profiles** pane, right-click the party that you will be receiving signed messages from, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="40cb9-189">在主控台樹狀目錄中，按一下**憑證**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-189">In the console tree, click **Certificate**.</span></span>  
  
4.  <span data-ttu-id="40cb9-190">在**憑證**] 窗格中，按一下 [**瀏覽**，找到您想要用來驗證數位簽章的憑證，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-190">In the **Certificate** pane, click **Browse**, find the certificate you want to use for verifying the digital signature, and then click **OK**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="40cb9-191">您可以只輸入憑證指紋，而不需要輸入憑證的一般名稱。</span><span class="sxs-lookup"><span data-stu-id="40cb9-191">Instead of entering the common name of the certificate, you can enter just the thumbprint.</span></span> <span data-ttu-id="40cb9-192">您可以按兩下在 MMC 或檔案系統中，按一下 憑證存放區中的憑證來取得憑證指紋**詳細資料**索引標籤上，按一下**指紋**欄位，然後複製憑證指紋.</span><span class="sxs-lookup"><span data-stu-id="40cb9-192">You can get the thumbprint by double-clicking the certificate in the certificate store in MMC or in the file system, clicking the **Details** tab, clicking the **Thumbprint** field, and copying the thumbprint.</span></span>  
  
5.  <span data-ttu-id="40cb9-193">按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-193">Click **OK**.</span></span>  
  
### <a name="to-configure-a-certificate-for-encrypting-an-outgoing-as2-messages"></a><span data-ttu-id="40cb9-194">若要設定憑證來加密外寄 AS2 訊息</span><span class="sxs-lookup"><span data-stu-id="40cb9-194">To configure a certificate for encrypting an outgoing AS2 messages</span></span>  
  
1.  <span data-ttu-id="40cb9-195">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，開啟**BizTalk 群組**節點，開啟**應用程式** 節點，並開啟的節點**應用程式**包含傳送埠，您會在傳送加密的訊息。</span><span class="sxs-lookup"><span data-stu-id="40cb9-195">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, open the **BizTalk Group** node, open the **Applications** node, and open the node of the **application** that contains the send port that you will be sending the encrypted message on.</span></span>  
  
2.  <span data-ttu-id="40cb9-196">開啟**傳送埠** 節點，以滑鼠右鍵按一下傳送埠，然後**屬性**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-196">Open the **Send Ports** node, right-click the send port, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="40cb9-197">在主控台樹狀目錄中，按一下**憑證**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-197">In the console tree, click **Certificate**.</span></span>  
  
4.  <span data-ttu-id="40cb9-198">在**憑證** 窗格中，按一下 **瀏覽**，找不到您想要使用加密，然後按一下 憑證**確定**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-198">In the **Certificate** pane, click **Browse**, find the certificate that you want to use for encryption, and then click **OK**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="40cb9-199">您可以只輸入憑證指紋，而不需要輸入憑證的一般名稱。</span><span class="sxs-lookup"><span data-stu-id="40cb9-199">Instead of entering the common name of the certificate, you can enter just the thumbprint.</span></span> <span data-ttu-id="40cb9-200">您可以按兩下在 MMC 或檔案系統中，按一下 憑證存放區中的憑證來取得憑證指紋**詳細資料**索引標籤上，按一下**指紋**欄位，然後複製憑證指紋.</span><span class="sxs-lookup"><span data-stu-id="40cb9-200">You can get the thumbprint by double-clicking the certificate in the certificate store in MMC or in the file system, clicking the **Details** tab, clicking the **Thumbprint** field, and copying the thumbprint.</span></span>  
  
5.  <span data-ttu-id="40cb9-201">按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="40cb9-201">Click **OK**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="40cb9-202">另請參閱</span><span class="sxs-lookup"><span data-stu-id="40cb9-202">See Also</span></span>  
 <span data-ttu-id="40cb9-203">[AS2 安全性](../core/as2-security.md) </span><span class="sxs-lookup"><span data-stu-id="40cb9-203">[AS2 Security](../core/as2-security.md) </span></span>  
 <span data-ttu-id="40cb9-204">[設定簽署、 壓縮和加密 AS2 傳輸中](../core/configuring-signing-compression-and-encryption-in-as2-transport.md) </span><span class="sxs-lookup"><span data-stu-id="40cb9-204">[Configuring Signing, Compression, and Encryption in AS2 Transport](../core/configuring-signing-compression-and-encryption-in-as2-transport.md) </span></span>  
 <span data-ttu-id="40cb9-205">[AS2 方案架構](../core/as2-solution-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="40cb9-205">[AS2 Solution Architecture](../core/as2-solution-architecture.md) </span></span>  
 [<span data-ttu-id="40cb9-206">WCF 配接器安裝憑證</span><span class="sxs-lookup"><span data-stu-id="40cb9-206">Installing Certificates for the WCF Adapters</span></span>](../core/installing-certificates-for-the-wcf-adapters.md)