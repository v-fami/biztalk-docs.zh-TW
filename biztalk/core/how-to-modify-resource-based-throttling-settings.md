---
title: 如何修改資源型節流設定 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- Bts10.settings.HostResource
ms.assetid: 5f8b32a8-d8cc-4045-a8be-0de0bbadcce4
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1b874374c8aec99affe8055f61ed95992853dbff
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37012359"
---
# <a name="how-to-modify-resource-based-throttling-settings"></a>如何修改以資源為基礎的節流設定
您可以使用設定儀表板，來修改 BizTalk 群組中指定主控件的資源節流組態設定。 這些設定會套用至指派給指定主控件的所有主控件執行個體。 本主題提供修改這些設定的逐步程序。  

 為管理主控件執行個體程序對系統資源 (如執行緒、記憶體與資料庫大小) 的使用，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 利用一種透過主控件執行個體管理訊息流程和處理的可調式節流機制。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 主控件節流機制可協助確保系統在最佳且可承受的層級作業。  

-   調節主控件執行個體的工作量。  

-   避免可能降低主控件執行個體程序或其他系統處理程序整體效能的資源爭用情形。  

-   偵測是否有未充分使用的可用資源。  

## <a name="prerequisites"></a>必要條件  
 若要執行此作業，您必須以 BizTalk Server Administrators 群組的成員身分登入。  

### <a name="to-modify-the-resource-based-throttling-settings-of-a-host"></a>修改主控件的資源節流設定  

1. 在  **BizTalk Server 管理主控台**，展開[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，以滑鼠右鍵按一下**BizTalk 群組**，然後按一下**設定**。  

2. 在  **BizTalk 設定儀表板**對話方塊的 **主機**索引標籤上，按一下 **資源節流** 索引標籤。  

3. 執行下列命令，，然後按一下**套用**以套用所做的修改，並前進到另一個索引標籤。否則，請按一下**確定**以套用所做的修改並結束 設定儀表板。  


   |          **使用此選項**           |                                                                                                                                                                                                                                                                                                                                                             以進行此動作                                                                                                                                                                                                                                                                                                                                                             |                                            界限值                                             | 預設值 |                                           升級邏輯                                           |
   |---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|---------------|---------------------------------------------------------------------------------------------------|
   |            **主控件**             |                                                                                                                                                                                                                                                                                  從下拉式清單選取代表 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 執行階段執行個體的主控件。                                                                                                                                                                                                                                                                                   |                                                   -                                                    |       -       |                                                 -                                                 |
   |      **每一 CPU 設定**       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                   -                                                    |       -       |                                                 -                                                 |
   |           **執行緒**           |                                                                                                                                                                                                                                                                                                                指定節流開始前允許的程序中執行緒數目上限 (每一 CPU)。                                                                                                                                                                                                                                                                                                                |                                   [0 – 整數類型的最大值)                                   |       0       |                                                 -                                                 |
   |    **資料庫連接**     |                                                                                                                                                                                                                                                                                                                    指定節流開始前允許的資料庫工作階段的數目上限 (每一 CPU)。                                                                                                                                                                                                                                                                                                                     |                                   1 – 整數型別的最大值                                    |       0       |                                                 -                                                 |
   |     **內含式訊息**     |                                                                                                                                                                                                                                              指定傳遞至「結束點管理員」(EPM) 或 XLANG 尚未經過處理的訊息數目上限。 這不包括已從資料庫擷取但仍在記憶體中的佇列等待傳遞的訊息。                                                                                                                                                                                                                                              |                                   1 – 整數型別的最大值                                    |     1000      |                                                 -                                                 |
   | **內部訊息佇列大小** |                                                代表記憶體中的佇列大小。 這個佇列當做傳遞訊息的暫時預留位置。<br /><br /> 將此參數設為較大的值或多或少可以改善低延遲實例，因為會從 MessageBox 資料庫主動擷取更多訊息來處理。 由於此佇列中的訊息會耗用記憶體，因此，將此參數設為較小的值可能較適合涉及大型訊息的實例，以避免處理序以記憶體為根據的節流。 **注意：** 您修改這個值，如果主機需要重新啟動，變更才會生效。                                                |                                   1 – 整數型別的最大值                                    |      100      |                                                 -                                                 |
   |     **在 DB 中的訊息計數**     |                                                                                                                              代表主控件執行個體發佈到訂閱的主控件之工作、狀態和擱置佇列的訊息總數。<br /><br /> **DB 中的訊息計數**設定也間接定義以多工緩衝處理表格或追蹤資料表中的訊息數目為基礎的節流條件的臨界值。 若多工緩衝處理資料表或追蹤資料表中的訊息數目超過此值的 10 倍，則會觸發節流狀況。                                                                                                                              |                                   1 – 整數型別的最大值                                    |     50000     |                                                 -                                                 |
   |        **記憶體使用量**         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                   -                                                    |       -       |                                                 -                                                 |
   |       **全域實體**       |                                                                                                                                                                                                                                                                                                                指定節流開始前允許的全系統虛擬記憶體使用上限 (百分比)。                                                                                                                                                                                                                                                                                                                 | 0：停用<br /><br /> 1% – 100%<br /><br /> > 100% 的值會視為 MB，最高為 int Max |       0       |                                                 -                                                 |
   |       **程序虛擬**       |                                                                                                                                                                                                                                                                                                            指定節流開始前允許的程序記憶體上限 (百分比或 MB)。                                                                                                                                                                                                                                                                                                             | 0：停用<br /><br /> 1% – 100%<br /><br /> > 100% 的值會視為 MB，最高為 int Max |      25       |                                                 -                                                 |
   |      **多工緩衝處理乘數**       |                                                                                                                                                                              所表示的因素**DB 中的訊息計數**臨界值會乘以，然後會在多工緩衝處理資料表中的目前記錄計數相比。<br /><br /> 這樣做是為了判斷系統是否應對多工緩衝處理表格大小節流。 若將此值設為 0，就不會使用多工緩衝處理表格大小做為判斷節流條件的考量。                                                                                                                                                                              |                                                 0-1000                                                 |      10       | 從登錄讀取的節流參數應以一對一的方式對應至主控件執行個體參數。 |
   |  **追蹤資料乘數**   |                                                                                                                                                                          指定的因數**DB 中的訊息計數**臨界值會乘以，然後進行比較，追蹤資料表中的目前記錄計數。<br /><br /> 這樣做是為了判斷系統是否應對追蹤資料表大小節流。 若將此值設為 0，就不會使用追蹤資料表大小做為判斷節流條件的考量。                                                                                                                                                                          |                                                 0-1000                                                 |      10       | 從登錄讀取的節流參數應以一對一的方式對應至主控件執行個體參數。 |
   |     **觸發 GC 的限制**     |                                                                                                                                                                                                                                               指定當程序記憶體耗用量增加並接近閾值時，何時要觸發 .NET 記憶體回收 (GC)。 當記憶體耗用量超過這個記憶體閾值的百分比值時，會觸發 GC。                                                                                                                                                                                                                                               |                                                 50-100                                                 |      80       | 從登錄讀取的節流參數應以一對一的方式對應至主控件執行個體參數。 |
   |   **批次記憶體閾值**    | 指定記憶體閾值 (百分比)，超過此閾值便對訊息批次的發佈進行節流。<br /><br /> 批次記憶體閾值相乘，此百分比因數**程序虛擬**臨界值。 若預計要執行發佈批次的記憶體超過批次記憶體閾值，會對此批次進行以程序記憶體為基礎的節流。 否則，批次已豁免程序記憶體為基礎的節流的總處理序記憶體超過時，即使**程序虛擬**臨界值。<br /><br /> 值為零代表即使預計要執行批次的記憶體很小，也會對所有發佈批次進行以處理序記憶體為基礎的節流。 |                                                0%-100%                                                 |               | 從登錄讀取的節流參數應以一對一的方式對應至主控件執行個體參數。 |
   |          **Severity**           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                   -                                                    |       -       |                                                 -                                                 |
   |           **記憶體**            |                                                                                                                                                                                                                                                   指定觸發節流條件的程序記憶體嚴重性。 以百分比值指定，此參數設定時所造成的節流條件嚴重性**程序虛擬**超過臨界值。                                                                                                                                                                                                                                                   |                                                1 – 1000                                                |      500      |                                所有主控件執行個體值的最低值                                 |
   |           **DB 大小**           |                                                                                                                                                                                                                                                 指定觸發節流條件的資料庫大小嚴重性。 以百分比值指定，此參數設定時所造成的節流條件嚴重性**DB 中的訊息計數**超過臨界值。                                                                                                                                                                                                                                                 |                                                1 – 1000                                                |       @shouldalert       |                                所有主控件執行個體值的最低值                                 |
   |      **傳遞訊息**       |                                                                                                                                                                                                                      指定時的節流反應時間的值**內含式訊息**超出臨界值。 這以百分比值指定，而此參數設定時所造成的節流條件嚴重性的值**內含式訊息**超過臨界值。                                                                                                                                                                                                                       |                                                1 – 1000                                                |      75       |                                所有主控件執行個體值的最低值                                 |

   > [!NOTE]
   >  若要還原預設設定，請按一下**還原預設值**。  

## <a name="see-also"></a>另請參閱  
 [如何修改主控件設定](../core/how-to-modify-host-settings.md)