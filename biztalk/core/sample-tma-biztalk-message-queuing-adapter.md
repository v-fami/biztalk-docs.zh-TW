---
title: '範例 TMA: BizTalk 訊息佇列配接器 |Microsoft 文件'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- security examples [TMA], MSMQ adapters
- architecture, examples
- MSMQ adapters, TMA
- DFD, MSMQ adapters
- MSMQ adapters, data flow
ms.assetid: 15b4a540-2fcd-4668-b4b4-757f23ebd83e
caps.latest.revision: 23
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 91f37c57c24bdd37c0f2cc0399a797050228aa54
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22272454"
---
# <a name="sample-tma-biztalk-message-queuing-adapter"></a><span data-ttu-id="d82ca-102">範例 TMA: BizTalk 訊息佇列配接器</span><span class="sxs-lookup"><span data-stu-id="d82ca-102">Sample TMA: BizTalk Message Queuing Adapter</span></span>
<span data-ttu-id="d82ca-103">本主題呈現範例架構的 BizTalk 訊息佇列配接器實例之威脅模型分析 (TMA)。</span><span class="sxs-lookup"><span data-stu-id="d82ca-103">This topic presents the threat model analysis (TMA) for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span>  
  
## <a name="step-1-collect-background-information-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="d82ca-104">步驟 1：</span><span class="sxs-lookup"><span data-stu-id="d82ca-104">Step 1.</span></span> <span data-ttu-id="d82ca-105">收集背景資訊 （BizTalk 訊息佇列配接器實例）</span><span class="sxs-lookup"><span data-stu-id="d82ca-105">Collect Background Information (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="d82ca-106">本節提供範例架構的 BizTalk 訊息佇列配接器實例之資料流程圖 (DFD)。</span><span class="sxs-lookup"><span data-stu-id="d82ca-106">This section provides the data flow diagram (DFD) for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span> <span data-ttu-id="d82ca-107">下圖顯示 HTTP 與 SOAP 配接器實例的範例架構。</span><span class="sxs-lookup"><span data-stu-id="d82ca-107">The following figure shows the sample architecture for the HTTP and SOAP adapters scenario.</span></span>  
  
 <span data-ttu-id="d82ca-108">**圖 1 的 BizTalk 訊息佇列配接器實例的範例架構**</span><span class="sxs-lookup"><span data-stu-id="d82ca-108">**Figure 1 Sample architecture for the BizTalk Message Queuing adapter scenario**</span></span>  
  
 <span data-ttu-id="d82ca-109">![BizTalk 訊息佇列的範例架構](../core/media/tdi-sec-refarch-msmq.gif "TDI_Sec_RefArch_MSMQ")</span><span class="sxs-lookup"><span data-stu-id="d82ca-109">![Sample architecture for BizTalk Message Queuing](../core/media/tdi-sec-refarch-msmq.gif "TDI_Sec_RefArch_MSMQ")</span></span>  
  
 <span data-ttu-id="d82ca-110">所有其他背景資訊也適用於所有使用實例，並為先前所述[範例實例的背景資訊](../core/background-information-for-sample-scenarios.md)。</span><span class="sxs-lookup"><span data-stu-id="d82ca-110">All the other background information is the same for all our usage scenarios, and is described previously in [Background Information for Sample Scenarios](../core/background-information-for-sample-scenarios.md).</span></span>  
  
### <a name="data-flow-diagram"></a><span data-ttu-id="d82ca-111">資料流程圖</span><span class="sxs-lookup"><span data-stu-id="d82ca-111">Data Flow Diagram</span></span>  
 <span data-ttu-id="d82ca-112">下圖顯示使用 BizTalk 訊息佇列配接器時範例架構的 DFD。</span><span class="sxs-lookup"><span data-stu-id="d82ca-112">The following figure shows the DFD for the sample architecture when you use the BizTalk Message Queuing adapter.</span></span>  
  
 <span data-ttu-id="d82ca-113">**圖 2 BizTalk 訊息佇列配接器實例的範例架構 DFD**</span><span class="sxs-lookup"><span data-stu-id="d82ca-113">**Figure 2 DFD for the sample architecture of the BizTalk Message Queuing adapter scenario**</span></span>  
  
 <span data-ttu-id="d82ca-114">![BizTalk 訊息佇列的範例架構](../core/media/tdi-sec-refarch-dfd-msmq.gif "TDI_Sec_RefArch_DFD_MSMQ")</span><span class="sxs-lookup"><span data-stu-id="d82ca-114">![Sample architecture for BizTalk Message Queuing](../core/media/tdi-sec-refarch-dfd-msmq.gif "TDI_Sec_RefArch_DFD_MSMQ")</span></span>  
  
 <span data-ttu-id="d82ca-115">資料流程如下所示：</span><span class="sxs-lookup"><span data-stu-id="d82ca-115">The data flow is as follows:</span></span>  
  
1.  <span data-ttu-id="d82ca-116">夥伴使用訊息佇列或 BizTalk 訊息佇列來傳送一個訊息。</span><span class="sxs-lookup"><span data-stu-id="d82ca-116">A partner sends a message using Message Queuing or BizTalk Message Queuing.</span></span> <span data-ttu-id="d82ca-117">此訊息會以適當格式封裝，並在網路上傳送。</span><span class="sxs-lookup"><span data-stu-id="d82ca-117">The message is packed in the appropriate format and sent on the network.</span></span> <span data-ttu-id="d82ca-118">若您使用 Active Directory，此訊息會通過一系列訊息佇列路由器，直到它抵達正確的目的地 (執行 BizTalk 訊息佇列接收配接器的主控件執行個體之 BizTalk Server)。</span><span class="sxs-lookup"><span data-stu-id="d82ca-118">If you use Active Directory, the message goes through a series of Message Queuing routers until it reaches the right destination (the BizTalk Server that runs a host instance of the BizTalk Message Queuing receive adapter).</span></span>  
  
2.  <span data-ttu-id="d82ca-119">BizTalk 訊息佇列接收配接器的內含式主控件的執行個體會從訊息佇列路由器 (透過防火牆 2) 定期接收訊息，並執行任何初始處理，還有傳送網路通訊協定所定義的正確網路回應，以及將訊息放入 MessageBox 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="d82ca-119">An instance of an in-process host for the BizTalk Message Queuing receive adapter regularly receives the message from a Message Queuing router (through Firewall 2), does any initial processing, sends the correct network responses as defined by the network protocol, and puts the message in the MessageBox database.</span></span>  
  
3.  <span data-ttu-id="d82ca-120">訂閱該訊息的處理主控件執行個體會從 MessageBox 資料庫拾取此訊息、執行任何進一步的處理，然後將訊息放回 MessageBox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="d82ca-120">An instance of the processing host that has a subscription to the message picks it up from the MessageBox database, does any additional processing, and puts the message back in the MessageBox database.</span></span>  
  
4.  <span data-ttu-id="d82ca-121">而擁有 BizTalk 訊息佇列傳送配接器的內含式主控件之執行個體則會從 MessageBox 資料庫拾取訊息。</span><span class="sxs-lookup"><span data-stu-id="d82ca-121">An instance of the in-process host that has a BizTalk Message Queuing send adapter picks up the message from the MessageBox database.</span></span> <span data-ttu-id="d82ca-122">此訊息在傳送管線中經過任何最終處理，然後穿過防火牆 2 並透過網路將訊息送回夥伴或應用程式。</span><span class="sxs-lookup"><span data-stu-id="d82ca-122">The message goes through any final processing in the send pipeline, and is then sent through Firewall 2 over the network to the partner or application.</span></span>  
  
## <a name="step-2-create-and-analyze-the-threat-model-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="d82ca-123">步驟 2：</span><span class="sxs-lookup"><span data-stu-id="d82ca-123">Step 2.</span></span> <span data-ttu-id="d82ca-124">建立和分析威脅模型 （BizTalk 訊息佇列配接器實例）</span><span class="sxs-lookup"><span data-stu-id="d82ca-124">Create and Analyze the Threat Model (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="d82ca-125">本節提供我們為範例架構的 BizTalk 訊息佇列配接器所做的 TMA 結果。</span><span class="sxs-lookup"><span data-stu-id="d82ca-125">This section provides the results of the TMA we did for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span>  
  
-   <span data-ttu-id="d82ca-126">**識別進入點、 信任界限以及的資料流-** 請參閱稍早在步驟 1 中及中所述的背景資訊[範例實例的背景資訊](../core/background-information-for-sample-scenarios.md)。</span><span class="sxs-lookup"><span data-stu-id="d82ca-126">**Identify Entry Points, Trust Boundaries, and Flow of Data -** See background information described earlier in step 1 and in [Background Information for Sample Scenarios](../core/background-information-for-sample-scenarios.md).</span></span>  
  
-   <span data-ttu-id="d82ca-127">**建立一份識別的威脅-** 我們針對 dfd 的所有項目使用下列分類來識別潛在的威脅： **S**假冒識別， **T**ampering 取代資料， **R**epudiation，**我**若資訊洩漏、 **D**拒絕服務，以及**E**身分權限。</span><span class="sxs-lookup"><span data-stu-id="d82ca-127">**Create a List of the Identified Threats -** We used the following categorization for all entries in the DFD to identify potential threats to the scenario: **S**poofing identify, **T**ampering with data, **R**epudiation, **I**nformation disclosure, **D**enial of service, and **E**levation of privileges.</span></span> <span data-ttu-id="d82ca-128">下表列出當您使用 BizTalk 訊息佇列配接器從 BizTalk Server 傳送和接收訊息時，我們所識別的威脅。</span><span class="sxs-lookup"><span data-stu-id="d82ca-128">The following table lists the threats we identified when you use the BizTalk Message Queuing adapter to send and receive messages to and from BizTalk Server.</span></span>  
  
 <span data-ttu-id="d82ca-129">**表 1 已識別的威脅的清單**</span><span class="sxs-lookup"><span data-stu-id="d82ca-129">**Table 1 List of identified threats**</span></span>  
  
|<span data-ttu-id="d82ca-130">威脅</span><span class="sxs-lookup"><span data-stu-id="d82ca-130">Threat</span></span>|<span data-ttu-id="d82ca-131">Description</span><span class="sxs-lookup"><span data-stu-id="d82ca-131">Description</span></span>|<span data-ttu-id="d82ca-132">資產</span><span class="sxs-lookup"><span data-stu-id="d82ca-132">Asset</span></span>|<span data-ttu-id="d82ca-133">影響</span><span class="sxs-lookup"><span data-stu-id="d82ca-133">Impact</span></span>|  
|------------|-----------------|-----------|------------|  
|<span data-ttu-id="d82ca-134">傳送許多訊息至接收位置</span><span class="sxs-lookup"><span data-stu-id="d82ca-134">Send lots of messages to receive location</span></span>|<span data-ttu-id="d82ca-135">惡意使用者可以傳送大量有效或無效的訊息，並灌爆應用程式。</span><span class="sxs-lookup"><span data-stu-id="d82ca-135">A malicious user can send a large number of valid or invalid messages and flood the application.</span></span>|<span data-ttu-id="d82ca-136">BizTalk Server 環境</span><span class="sxs-lookup"><span data-stu-id="d82ca-136">BizTalk Server environment</span></span>|<span data-ttu-id="d82ca-137">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="d82ca-137">Denial of service</span></span>|  
|<span data-ttu-id="d82ca-138">訊息標頭在網路上無礙地傳遞</span><span class="sxs-lookup"><span data-stu-id="d82ca-138">Message header travels in the clear on the wire</span></span>|<span data-ttu-id="d82ca-139">當訊息從佇列移至 BizTalk 訊息佇列接收配接器時，訊息標頭是在無危險狀態，但惡意使用者可能讀取和修改標頭。</span><span class="sxs-lookup"><span data-stu-id="d82ca-139">As the message travels from the queue to the BizTalk Message Queuing receive adapter, the message header is in the clear, and a malicious user can potentially read and tamper with the header.</span></span>|<span data-ttu-id="d82ca-140">訊息標頭</span><span class="sxs-lookup"><span data-stu-id="d82ca-140">Message header</span></span>|<span data-ttu-id="d82ca-141">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-141">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-142">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-142">Information disclosure</span></span>|  
|<span data-ttu-id="d82ca-143">未經授權的使用者可以透過網路連線到執行 BizTalk 訊息佇列主控件的 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d82ca-143">An unauthorized user can make a network connection to the BizTalk Server that runs the BizTalk Message Queuing host</span></span>|<span data-ttu-id="d82ca-144">您可以使用判別存取控制清單 (DACL) 來限制存取 BizTalk 訊息佇列接收位置。</span><span class="sxs-lookup"><span data-stu-id="d82ca-144">You cannot use a discretionary access list (DACL) to restrict access to the BizTalk Message Queuing receive location.</span></span> <span data-ttu-id="d82ca-145">因此，能夠連線到執行 BizTalk 訊息佇列接收配接器主控件執行個體之 BizTalk Server 與連接埠 1801 的任何人，都可以傳送訊息到 BizTalk 訊息佇列接收位置。</span><span class="sxs-lookup"><span data-stu-id="d82ca-145">Therefore, anyone that can make a network connection to the BizTalk Server that runs a host instance of the BizTalk Message Queuing receive adapter and to port 1801 can send messages to the BizTalk Message Queuing receive location.</span></span>|<span data-ttu-id="d82ca-146">BizTalk Server 環境</span><span class="sxs-lookup"><span data-stu-id="d82ca-146">BizTalk Server environment</span></span>|<span data-ttu-id="d82ca-147">否認性</span><span class="sxs-lookup"><span data-stu-id="d82ca-147">Repudiation</span></span><br /><br /> <span data-ttu-id="d82ca-148">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-148">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-149">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-149">Information disclosure</span></span><br /><br /> <span data-ttu-id="d82ca-150">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="d82ca-150">Denial of service</span></span><br /><br /> <span data-ttu-id="d82ca-151">權限提高</span><span class="sxs-lookup"><span data-stu-id="d82ca-151">Elevation of privileges</span></span>|  
|<span data-ttu-id="d82ca-152">惡意使用者可以在 BizTalk Server 收到訊息之前竄改訊息</span><span class="sxs-lookup"><span data-stu-id="d82ca-152">A malicious user can tamper with the message before BizTalk Server receives it</span></span>|<span data-ttu-id="d82ca-153">惡意使用者可以在訊息傳輸時攔截訊息，並加以修改。</span><span class="sxs-lookup"><span data-stu-id="d82ca-153">A malicious user can intercept the message while it is in transit and modify it.</span></span>|<span data-ttu-id="d82ca-154">訊息內文</span><span class="sxs-lookup"><span data-stu-id="d82ca-154">Message body</span></span>|<span data-ttu-id="d82ca-155">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-155">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-156">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-156">Information disclosure</span></span>|  
  
## <a name="step-3-review-threats-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="d82ca-157">步驟 3：</span><span class="sxs-lookup"><span data-stu-id="d82ca-157">Step 3.</span></span> <span data-ttu-id="d82ca-158">檢視威脅 （BizTalk 訊息佇列配接器實例）</span><span class="sxs-lookup"><span data-stu-id="d82ca-158">Review Threats (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="d82ca-159">本節提供針對範例架構的 BizTalk 訊息佇列配接器實例已識別出的威脅，我們所執行的風險分析結果。</span><span class="sxs-lookup"><span data-stu-id="d82ca-159">This section provides the results of the risk analysis we did for threats we identified for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span> <span data-ttu-id="d82ca-160">主要威脅模型會議之後，我們已複查威脅，並使用下列影響類別來識別每個威脅的風險： **D**損害潛在， **R**eproducibility， **E**xploitability， **A**受使用者和**D**iscoverability。</span><span class="sxs-lookup"><span data-stu-id="d82ca-160">After the main threat model meeting, we reviewed the threats and used the following impact categories to identify the risk for each threat: **D**amage potential, **R**eproducibility, **E**xploitability, **A**ffected users, and **D**iscoverability.</span></span>  
  
 <span data-ttu-id="d82ca-161">下表列出當您使用 BizTalk 訊息佇列配接器從 BizTalk Server 傳送和接收訊息時，我們所識別的威脅之風險等級。</span><span class="sxs-lookup"><span data-stu-id="d82ca-161">The following table lists the risk ratings for the threats we identified when you use the BizTalk Message Queuing adapter to send and receive messages to and from BizTalk Server.</span></span>  
  
 <span data-ttu-id="d82ca-162">**表 2 已識別的威脅的風險等級**</span><span class="sxs-lookup"><span data-stu-id="d82ca-162">**Table 2 Risk ratings for identified threats**</span></span>  
  
|<span data-ttu-id="d82ca-163">威脅</span><span class="sxs-lookup"><span data-stu-id="d82ca-163">Threat</span></span>|<span data-ttu-id="d82ca-164">影響</span><span class="sxs-lookup"><span data-stu-id="d82ca-164">Impact</span></span>|<span data-ttu-id="d82ca-165">可能的損害</span><span class="sxs-lookup"><span data-stu-id="d82ca-165">Damage potential</span></span>|<span data-ttu-id="d82ca-166">可複製性</span><span class="sxs-lookup"><span data-stu-id="d82ca-166">Reproducibility</span></span>|<span data-ttu-id="d82ca-167">利用性</span><span class="sxs-lookup"><span data-stu-id="d82ca-167">Exploitability</span></span>|<span data-ttu-id="d82ca-168">受影響的使用者</span><span class="sxs-lookup"><span data-stu-id="d82ca-168">Affected users</span></span>|<span data-ttu-id="d82ca-169">發現性</span><span class="sxs-lookup"><span data-stu-id="d82ca-169">Discoverability</span></span>|<span data-ttu-id="d82ca-170">風險暴露程度</span><span class="sxs-lookup"><span data-stu-id="d82ca-170">Risk exposure</span></span>|  
|------------|------------|----------------------|---------------------|--------------------|--------------------|---------------------|-------------------|  
|<span data-ttu-id="d82ca-171">傳送許多訊息至接收位置</span><span class="sxs-lookup"><span data-stu-id="d82ca-171">Send lots of messages to receive location</span></span>|<span data-ttu-id="d82ca-172">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="d82ca-172">Denial of service</span></span>|<span data-ttu-id="d82ca-173">8</span><span class="sxs-lookup"><span data-stu-id="d82ca-173">8</span></span>|<span data-ttu-id="d82ca-174">7</span><span class="sxs-lookup"><span data-stu-id="d82ca-174">7</span></span>|<span data-ttu-id="d82ca-175">7</span><span class="sxs-lookup"><span data-stu-id="d82ca-175">7</span></span>|<span data-ttu-id="d82ca-176">7</span><span class="sxs-lookup"><span data-stu-id="d82ca-176">7</span></span>|<span data-ttu-id="d82ca-177">5</span><span class="sxs-lookup"><span data-stu-id="d82ca-177">5</span></span>|<span data-ttu-id="d82ca-178">6.8</span><span class="sxs-lookup"><span data-stu-id="d82ca-178">6.8</span></span>|  
|<span data-ttu-id="d82ca-179">訊息標頭在網路上無礙地傳遞</span><span class="sxs-lookup"><span data-stu-id="d82ca-179">Message header travels in the clear on the wire</span></span>|<span data-ttu-id="d82ca-180">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-180">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-181">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-181">Information disclosure</span></span>|<span data-ttu-id="d82ca-182">8</span><span class="sxs-lookup"><span data-stu-id="d82ca-182">8</span></span>|<span data-ttu-id="d82ca-183">10</span><span class="sxs-lookup"><span data-stu-id="d82ca-183">10</span></span>|<span data-ttu-id="d82ca-184">8</span><span class="sxs-lookup"><span data-stu-id="d82ca-184">8</span></span>|<span data-ttu-id="d82ca-185">3</span><span class="sxs-lookup"><span data-stu-id="d82ca-185">3</span></span>|<span data-ttu-id="d82ca-186">5</span><span class="sxs-lookup"><span data-stu-id="d82ca-186">5</span></span>|<span data-ttu-id="d82ca-187">6.8</span><span class="sxs-lookup"><span data-stu-id="d82ca-187">6.8</span></span>|  
|<span data-ttu-id="d82ca-188">未經授權的使用者可以透過網路連線到執行 BizTalk 訊息佇列主控件的 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d82ca-188">An unauthorized user can make a network connection to the BizTalk Server that runs the BizTalk Message Queuing host</span></span>|<span data-ttu-id="d82ca-189">否認性</span><span class="sxs-lookup"><span data-stu-id="d82ca-189">Repudiation</span></span><br /><br /> <span data-ttu-id="d82ca-190">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-190">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-191">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-191">Information disclosure</span></span><br /><br /> <span data-ttu-id="d82ca-192">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="d82ca-192">Denial of service</span></span><br /><br /> <span data-ttu-id="d82ca-193">權限提高</span><span class="sxs-lookup"><span data-stu-id="d82ca-193">Elevation of privileges</span></span>|<span data-ttu-id="d82ca-194">8</span><span class="sxs-lookup"><span data-stu-id="d82ca-194">8</span></span>|<span data-ttu-id="d82ca-195">10</span><span class="sxs-lookup"><span data-stu-id="d82ca-195">10</span></span>|<span data-ttu-id="d82ca-196">9</span><span class="sxs-lookup"><span data-stu-id="d82ca-196">9</span></span>|<span data-ttu-id="d82ca-197">9</span><span class="sxs-lookup"><span data-stu-id="d82ca-197">9</span></span>|<span data-ttu-id="d82ca-198">9</span><span class="sxs-lookup"><span data-stu-id="d82ca-198">9</span></span>|<span data-ttu-id="d82ca-199">9</span><span class="sxs-lookup"><span data-stu-id="d82ca-199">9</span></span>|  
|<span data-ttu-id="d82ca-200">惡意使用者可以在 BizTalk Server 收到訊息之前竄改訊息</span><span class="sxs-lookup"><span data-stu-id="d82ca-200">A malicious user can tamper with the message before BizTalk Server receives it</span></span>|<span data-ttu-id="d82ca-201">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-201">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-202">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-202">Information disclosure</span></span>|<span data-ttu-id="d82ca-203">5</span><span class="sxs-lookup"><span data-stu-id="d82ca-203">5</span></span>|<span data-ttu-id="d82ca-204">7</span><span class="sxs-lookup"><span data-stu-id="d82ca-204">7</span></span>|<span data-ttu-id="d82ca-205">6</span><span class="sxs-lookup"><span data-stu-id="d82ca-205">6</span></span>|<span data-ttu-id="d82ca-206">5</span><span class="sxs-lookup"><span data-stu-id="d82ca-206">5</span></span>|<span data-ttu-id="d82ca-207">7</span><span class="sxs-lookup"><span data-stu-id="d82ca-207">7</span></span>|<span data-ttu-id="d82ca-208">6</span><span class="sxs-lookup"><span data-stu-id="d82ca-208">6</span></span>|  
  
## <a name="step-4-identify-mitigation-techniques-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="d82ca-209">步驟 4：</span><span class="sxs-lookup"><span data-stu-id="d82ca-209">Step 4.</span></span> <span data-ttu-id="d82ca-210">識別防護技術 （BizTalk 訊息佇列配接器實例）</span><span class="sxs-lookup"><span data-stu-id="d82ca-210">Identify Mitigation Techniques (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="d82ca-211">本節呈現我們在範例架構的 BizTalk 訊息佇列配接器實例所識別的威脅之一些防護技術。</span><span class="sxs-lookup"><span data-stu-id="d82ca-211">This section presents some mitigation techniques for the threats we identified for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span>  
  
 <span data-ttu-id="d82ca-212">下表列出當您使用 BizTalk 訊息佇列配接器從 BizTalk Server 傳送和接收訊息時，我們所識別的威脅之防護技術。</span><span class="sxs-lookup"><span data-stu-id="d82ca-212">The following table lists mitigation techniques and technologies for the threats we identified when you use the BizTalk Message Queuing adapter to send and receive messages to and from BizTalk Server.</span></span>  
  
 <span data-ttu-id="d82ca-213">**表 3 防護技術和技術**</span><span class="sxs-lookup"><span data-stu-id="d82ca-213">**Table 3 Mitigation techniques and technologies**</span></span>  
  
|<span data-ttu-id="d82ca-214">威脅</span><span class="sxs-lookup"><span data-stu-id="d82ca-214">Threat</span></span>|<span data-ttu-id="d82ca-215">影響</span><span class="sxs-lookup"><span data-stu-id="d82ca-215">Impact</span></span>|<span data-ttu-id="d82ca-216">風險暴露程度</span><span class="sxs-lookup"><span data-stu-id="d82ca-216">Risk exposure</span></span>|<span data-ttu-id="d82ca-217">防護技術</span><span class="sxs-lookup"><span data-stu-id="d82ca-217">Mitigation techniques and technologies</span></span>|  
|------------|------------|-------------------|--------------------------------------------|  
|<span data-ttu-id="d82ca-218">傳送許多訊息至接收位置</span><span class="sxs-lookup"><span data-stu-id="d82ca-218">Send lots of messages to receive location</span></span>|<span data-ttu-id="d82ca-219">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="d82ca-219">Denial of service</span></span>|<span data-ttu-id="d82ca-220">6.8</span><span class="sxs-lookup"><span data-stu-id="d82ca-220">6.8</span></span>|<span data-ttu-id="d82ca-221">在需要驗證模式中使用 BizTalk 訊息佇列配接器。</span><span class="sxs-lookup"><span data-stu-id="d82ca-221">Use the BizTalk Message Queuing adapter in authentication-required mode.</span></span> <span data-ttu-id="d82ca-222">設定**要求 MSMQ 驗證**接收位置上的旗標和**需要驗證 （捨棄訊息）** 接收埠上。</span><span class="sxs-lookup"><span data-stu-id="d82ca-222">Set the **Requires MSMQ authentication** flag on the receive location and **Authentication Required (Drop messages)** on the receive port.</span></span><br /><br /> <span data-ttu-id="d82ca-223">設定 BizTalk 訊息佇列為需要認證驗證。</span><span class="sxs-lookup"><span data-stu-id="d82ca-223">Configure BizTalk Message Queuing to require certificate-based authentication.</span></span> <span data-ttu-id="d82ca-224">此行為發生於配接器層級，而且不同於 BizTalk 管線的「合作對象解析」元件。</span><span class="sxs-lookup"><span data-stu-id="d82ca-224">This behavior occurs at the adapter level, and is different from the Party Resolution component of a BizTalk pipeline.</span></span> <span data-ttu-id="d82ca-225">若已設定，則內送訊息會包含公用憑證。</span><span class="sxs-lookup"><span data-stu-id="d82ca-225">If configured, the public certificate is included with the incoming message.</span></span> <span data-ttu-id="d82ca-226">這是 BizTalk 訊息佇列唯一可用的用戶端驗證模式。</span><span class="sxs-lookup"><span data-stu-id="d82ca-226">This is the only client authentication mode available for BizTalk Message Queuing.</span></span> <span data-ttu-id="d82ca-227">若要使用此用戶端驗證模式，您必須使用 Active Directory 整合模式安裝 BizTalk 訊息佇列。</span><span class="sxs-lookup"><span data-stu-id="d82ca-227">To use this client authentication mode, you must install BizTalk Message Queuing with Active Directory Integration Mode.</span></span> <span data-ttu-id="d82ca-228">當您使用這項功能時，請記得選取**需要驗證**核取方塊，在屬性對話方塊中，BizTalk 訊息佇列接收位置。</span><span class="sxs-lookup"><span data-stu-id="d82ca-228">When you use this feature, remember to select the **Require Authentication** check box on the property dialog box for the BizTalk Message Queuing receive location.</span></span>|  
|<span data-ttu-id="d82ca-229">訊息標頭在網路上無礙地傳遞</span><span class="sxs-lookup"><span data-stu-id="d82ca-229">Message header travels in the clear on the wire</span></span>|<span data-ttu-id="d82ca-230">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-230">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-231">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-231">Information disclosure</span></span>|<span data-ttu-id="d82ca-232">6.8</span><span class="sxs-lookup"><span data-stu-id="d82ca-232">6.8</span></span>|<span data-ttu-id="d82ca-233">使用網際網路通訊協定安全性 (IPsec) 協助保護在伺服器之間傳遞的訊息內文與訊息標頭。</span><span class="sxs-lookup"><span data-stu-id="d82ca-233">Use Internet Protocol security (IPsec) to help protect the message body and the message header as it travels from one server to another.</span></span>|  
|<span data-ttu-id="d82ca-234">未經授權的使用者可以透過網路連線到執行 BizTalk 訊息佇列主控件的 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d82ca-234">An unauthorized user can make a network connection to the BizTalk Server that runs the BizTalk Message Queuing host</span></span>|<span data-ttu-id="d82ca-235">否認性</span><span class="sxs-lookup"><span data-stu-id="d82ca-235">Repudiation</span></span><br /><br /> <span data-ttu-id="d82ca-236">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-236">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-237">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-237">Information disclosure</span></span><br /><br /> <span data-ttu-id="d82ca-238">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="d82ca-238">Denial of service</span></span><br /><br /> <span data-ttu-id="d82ca-239">權限提高</span><span class="sxs-lookup"><span data-stu-id="d82ca-239">Elevation of privileges</span></span>|<span data-ttu-id="d82ca-240">9</span><span class="sxs-lookup"><span data-stu-id="d82ca-240">9</span></span>|<span data-ttu-id="d82ca-241">建立擁有「合作對象解析」管線元件的自訂管線，然後設定「合作對象解析」元件使用「傳送者識別碼」(SID) 來解析合作對象。</span><span class="sxs-lookup"><span data-stu-id="d82ca-241">Create a custom pipeline with a Party Resolution pipeline component, and then configure the Party Resolution component to use the Sender ID (SID) to resolve the party.</span></span> <span data-ttu-id="d82ca-242">設定**依憑證解析合作對象**屬性**False**，而**依 SID 解析合作對象**屬性**True**。</span><span class="sxs-lookup"><span data-stu-id="d82ca-242">Set the **Resolve Party By Certificate** property to **False**, and the **Resolve Party By SID** property to **True**.</span></span> <span data-ttu-id="d82ca-243">如需詳細資訊，請參閱[合作對象解析管線元件](../core/party-resolution-pipeline-component.md)。</span><span class="sxs-lookup"><span data-stu-id="d82ca-243">For more information, see [Party Resolution Pipeline Component](../core/party-resolution-pipeline-component.md).</span></span><br /><br /> <span data-ttu-id="d82ca-244">在 接收埠中，設定**驗證**屬性**必要 （捨棄訊息）**。</span><span class="sxs-lookup"><span data-stu-id="d82ca-244">On the receive port, set the **Authentication** property to **Required (Drop Messages)**.</span></span>|  
|<span data-ttu-id="d82ca-245">惡意使用者可以在 BizTalk Server 收到訊息之前竄改訊息</span><span class="sxs-lookup"><span data-stu-id="d82ca-245">A malicious user can tamper with the message before BizTalk Server receives it</span></span>|<span data-ttu-id="d82ca-246">竄改資料</span><span class="sxs-lookup"><span data-stu-id="d82ca-246">Tampering with data</span></span><br /><br /> <span data-ttu-id="d82ca-247">資訊洩露</span><span class="sxs-lookup"><span data-stu-id="d82ca-247">Information disclosure</span></span>|<span data-ttu-id="d82ca-248">6</span><span class="sxs-lookup"><span data-stu-id="d82ca-248">6</span></span>|<span data-ttu-id="d82ca-249">使用通訊協定層級的驗證來確定訊息在傳輸時未遭到修改。</span><span class="sxs-lookup"><span data-stu-id="d82ca-249">Use protocol-level authentication to make sure the message was not tampered with while in transit.</span></span> <span data-ttu-id="d82ca-250">若要使用通訊協定層級的驗證，您必須在電子商務網域中擁有訊息佇列路由器。</span><span class="sxs-lookup"><span data-stu-id="d82ca-250">To use protocol-level authentication, you must have a Message Queuing router in the E-Business domain.</span></span> <span data-ttu-id="d82ca-251">設定 BizTalk Server 如下：</span><span class="sxs-lookup"><span data-stu-id="d82ca-251">Configure BizTalk Server as follows:</span></span><br /><br /> <span data-ttu-id="d82ca-252">-在**BizTalk 傳訊**頁面上的 Configuration Manager 中，提供路由器的名稱。</span><span class="sxs-lookup"><span data-stu-id="d82ca-252">-   On the **BizTalk Messaging** page of the Configuration Manager, provide the name of the router.</span></span><br /><span data-ttu-id="d82ca-253">-若為接收埠中，設定**驗證**屬性**必要 （捨棄訊息）** 或**必要 （保留訊息）**。</span><span class="sxs-lookup"><span data-stu-id="d82ca-253">-   For the receive port, set the **Authentication** property to **Required (Drop Messages)** or **Required (Keep Messages)**.</span></span><br /><span data-ttu-id="d82ca-254">-若為傳送處理常式上**一般**索引標籤的**MSMQ 路由器**名稱方塊中，輸入訊息佇列路由器的名稱。</span><span class="sxs-lookup"><span data-stu-id="d82ca-254">-   For the send handler, on the **General** tab, in the **MSMQ Router** name box, type the name of the Message Queuing router.</span></span><br /><span data-ttu-id="d82ca-255">-傳送埠，請選取**使用 MSMQ 驗證**。</span><span class="sxs-lookup"><span data-stu-id="d82ca-255">-   For the send port, select **Use MSMQ Authentication**.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="d82ca-256">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d82ca-256">See Also</span></span>  
 <span data-ttu-id="d82ca-257">[威脅模型分析](../core/threat-model-analysis.md) </span><span class="sxs-lookup"><span data-stu-id="d82ca-257">[Threat Model Analysis](../core/threat-model-analysis.md) </span></span>  
 <span data-ttu-id="d82ca-258">[威脅模型分析的範例案例](../core/sample-scenarios-for-threat-model-analysis.md) </span><span class="sxs-lookup"><span data-stu-id="d82ca-258">[Sample Scenarios for Threat Model Analysis](../core/sample-scenarios-for-threat-model-analysis.md) </span></span>  
 [<span data-ttu-id="d82ca-259">小型與中型公司的範例架構</span><span class="sxs-lookup"><span data-stu-id="d82ca-259">Sample Architectures for Small & Medium-Sized Companies</span></span>](../core/sample-architectures-for-small-medium-sized-companies.md)