---
title: 設定批次處理 (EDIFACT) |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: f711ff4b-702b-419b-9c17-dce60ea437a0
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 116c196d4688e4e7d21c8951c32838539cf10aa4
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22234662"
---
# <a name="configuring-batching-edifact"></a>設定批次處理 (EDIFACT)
批次定義 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 如何產生 EDI 批次並傳送給合作對象。  
  
> [!IMPORTANT]
>  所有屬性已停都用此頁面上即使您清除**本機 BizTalk 會處理合作對象或支援此合作對象傳送訊息所收到的訊息**時建立您要為其建立的合作對象 核取方塊協議。 **新批次**按鈕已停用此頁面上。  
>   
>  只有在對應於合作對象送出交換屬性的單向協議索引標籤上，這些屬性才會變成停用狀態。 比方說，如果您建立兩個合作對象的合作對象 A 與合作對象 B 和合作對象 a 清除核取方塊，**新批次**會停用按鈕**合作對象 a-> 合作對象 B**單向協議索引標籤。  
  
## <a name="prerequisites"></a>必要條件  
 您必須以「[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 系統管理員」或「[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B 操作員」群組成員的身分來登入。  
  
### <a name="to-configure-batching-settings"></a>若要設定批次處理的設定值  
  
1.  建立 EDIFACT 編碼協議中所述[設定一般設定 (EDIFACT)](../core/configuring-general-settings-edifact.md)。 若要更新現有的協議，以滑鼠右鍵按一下協議中的**合作對象與商務設定檔**頁面，然後按一下**屬性**。  
  
2.  在單向協議索引標籤底下**交換設定**區段中，按一下**批次組態**。  
  
3.  從**批次組態**頁面上，按一下**新批次**來建立新的批次組態。 A **Batch1**索引標籤會加入。  
  
4.  在**識別** 索引標籤的區段中，執行下列步驟：  
  
    1.  輸入**批次**名稱。 這個值會當做此批次組態的索引標籤識別項。  
  
    2.  輸入在此批次組態的描述**批次描述**。  
  
    3.  **批次識別碼**是唯讀文字方塊套用批次的設定之後，顯示唯一的批次識別碼。  
  
    4.  **協調流程執行個體識別碼**是唯讀文字方塊顯示批次相關聯的批次處理協調流程執行個體識別碼。 在批次啟動之後，就會顯示協調流程執行個體識別碼。  
  
5.  在**篩選** 索引標籤的區段中，執行下列步驟：  
  
    1.  按一下**篩選**。  
  
    2.  在**批次篩選條件**對話方塊方塊中，輸入屬性、 運算子和值，來建置批次處理協調流程的訂閱篩選條件。 這些篩選子句會判定路由協調流程要將哪些交易集路由到 MessageBox 以進行批次處理。  
  
        > [!NOTE]
        >  若要指定某個群組的所有訊息都必須批次處理，請將批次篩選條件中的合作對象屬性設為該合作對象的名稱。  
  
        > [!NOTE]
        >  如需批次處理程序的詳細資訊，請參閱[組合批次 EDI 交換](../core/assembling-a-batched-edi-interchange.md)。  
  
    3.  若要刪除的資料列，選取資料列，然後按一下**刪除**。  
  
    4.  若要向上或向下移動一個資料列，按一下 **移**或**下移**按鈕。  
  
6.  在**發行** 索引標籤的區段中，執行下列步驟：  
  
    1.  選取**排程**來建立和傳送批次根據預先決定的排程。 若要定義排程，請按一下**排程器**再繼續執行，如下所示：  
  
        > [!NOTE]
        >  批次排程可能會受到特殊事件影響。 例如，日光節約時間的開始。 如果按照每小時的基準，將批次排定在日光節約時間開始後不到一個小時的時間，則以遞增小時的方式重設時鐘後，將不會建立和傳送批次。 您可以按一下導致略過批次的特殊事件補償**啟動**按鈕**批次**頁面，即可手動啟動批次處理協調流程。 您可能也必須停止重複的批次。  
  
        -   若要每小時傳送一個批次，請選取**每小時**。 從下拉式清單中，為**初次釋放於**選取，表示批次第一次釋放的日期，然後輸入時間。 如**後續釋放每個**、 從清單中選取下拉式清單中期間是否**小時**或**分鐘**，然後輸入將的小時或是分鐘數目分隔每個批次。  
  
        -   若要每天傳送批次，請選取**每日**。 從下拉式清單中，為**初次釋放於**選取，表示批次第一次釋放的日期，然後輸入時間。 如**後續釋放每個**，輸入每個批次分隔的天數。  
  
        -   若要於每週傳送批次，請選取**每週**。 從下拉式清單中，為**初次釋放於**選取，表示批次第一次釋放的日期，然後輸入時間。 如**後續釋放每個**，輸入第一次釋放當週和每次後續釋放週之間的週數。 然後選取星期幾要釋放批次。  
  
            > [!NOTE]
            >  將所做的日期，在中設定第一次釋放**初次釋放於**欄位中，即使未在對話方塊中選取該星期幾。  
  
            > [!NOTE]
            >  如果您已在對話方塊中選取一或多個星期別，則會在第一週中第一次釋放之後的任何選定日子釋放批次。 例如，如果選取星期一和星期五，而第一次釋放是在星期三，則會在第一週的星期五釋放。 後續版本會發生 *n* 之後的第一週、 週與 *n* 中的值所決定**後續釋放每個**欄位。 釋放作業將會在對話方塊中選取每個星期別進行。  
  
        -   選取**傳送空的批次訊號**時不收到任何訊息已由批次處理協調流程排程傳送批次時，傳送空的批次訊號。  
  
    2.  選取**最大數目的交易集**來建立和傳送批次，每當有特定數目的交易集或訊息路由到 MessageBox 進行批次處理。 選取要計算交易訊息的部分設定中 (任一**群組**或**交換**)，然後輸入批次的群組或交換中應有的交易集數目上限。  
  
         例如，如果您想要批次處理成一個批次的兩個交換選取**交換**從下拉式清單，並輸入`2`在文字方塊中。  
  
    3.  選取**的交換中的字元數上限**來建立和傳送批次，可供批次處理的特定數目的字元時。 輸入批次群組或交換中的字元數上限。  
  
         批次處理協調流程會累積批次處理項目，直到這些項目中的字元數 (減去信封中的計數) 超過最大計數為止。 接著它會批次處理所有項目 (最後一個項目除外，因為這個項目會導致計數超過最大計數)。  
  
        > [!NOTE]
        >  輸入的最大字元數，應該要大到足以產生對您稱得上有意義的批次。 這個數目至少必須大於批次標頭的字元總數加上訊息的最大字元數。 數目太小可能會產生空的批次。  
  
    4.  選取**外部釋放觸發程序**來建立和傳送批次給 BizTalk Server 外部的應用程式執行外部觸發程序時。 如需如何設定這項機制的詳細資訊，請參閱[實作外部批次釋放機制](../core/implementing-an-external-batch-release-mechanism.md)。  
  
        > [!NOTE]
        >  **覆寫**按鈕和**啟動範圍**控制項仍然會有效如果**外部釋放**選取了觸發程序屬性。  
  
7.  在**啟用** 索引標籤的區段中，執行下列步驟：  
  
    1.  選取**立即開始**讓批次處理協調流程立即開始批次處理訊息。  
  
         若要啟動批次處理協調流程在特定日期，請清除**立即開始**方塊和選取的日期和時間啟動批次處理協調流程。  
  
8.  在**終止** 索引標籤的區段中，執行下列步驟：  
  
    1.  保留**沒有結束日期**選取如果您不要指定停用批次處理協調流程的結束日期。  
  
    2.  選取**發生幾次之後結束**來指定已產生批次數目之後，將會停用批次處理協調流程。 在文字方塊中輸入需要的數字。  
  
    3.  選取**結束**來指定將會停用批次處理協調流程的結束日期。 在此時間之後，將不再收集批次處理的訊息。 從行事曆中選取結束日期，或是直接在文字方塊中變更日期或時間。  
  
9. 按一下**套用**套用您在先前步驟中所提供的批次設定。 按一下 之後**套用**，批次識別碼建立，而且會顯示在**批次識別碼**文字欄位中的**識別**> 一節。  
  
    > [!NOTE]
    >  訊息**批次處理未啟動**底下會顯示**啟動** 按鈕。  
  
10. 按一下**啟動**即可手動啟動批次處理協調流程。  
  
    > [!NOTE]
    >  若要確定，批次處理協調流程便會立即啟動當您按一下**啟動**按鈕，更新 batchcontrolmessagereccvloc SQL 配接器接收位置的輪詢間隔。 如需詳細資訊，請參閱[(X12) 逐步解說： 傳送批次 EDI 交換](../core/walkthrough-x12-sending-batched-edi-interchanges.md)。  
  
    > [!NOTE]
    >  按一下 之後**啟動**，按一下 **重新整理**。 您可能需要等候一些時間讓批次與協調流程執行個體產生關聯。 如果您按一下**重新整理**批次都與協調流程之前，您會看到訊息**批次處理已啟動批次處理協調流程，但尚未產生**。 按一下**重新整理**，請參閱關聯的協調流程中的執行個體識別碼**協調流程執行個體識別碼**文字方塊。 訊息**批次處理已啟動**下顯示**啟動** 按鈕。  
  
11. 按一下**覆寫**來強制批次處理協調流程傳送批次，不論是否已符合釋放準則。 使用此選項會覆寫現有的批次準則，變成使用現有的項目來建立並立即傳送批次。 此後，批次處理協調流程會依據建立的設定，再繼續批次處理。  
  
12. 按一下**停止**，而不傳送批次結束作用中的批次處理協調流程，並手動停用批次處理協調流程。  
  
13. 按一下**重新整理**，重新整理批次處理協調流程的狀態。  
  
    > [!NOTE]
    >  您可以使用下拉式清單頂端的**批次組態**來篩選顯示所選取的批次組態索引標籤頁面**所有**（可看見所有批次的索引標籤），**主動**（若要查看作用中批次的索引標籤），或**Inactive** （可看見非作用中批次的索引標籤）。  
  
    > [!NOTE]
    >  如果您在協調流程正在處理批次時變更組態設定，則新的設定不會套用至該批次。 這可能會在傳送管線中產生驗證錯誤。  
  
    > [!NOTE]
    >  若要加速啟動開發伺服器上的協調流程合作對象，您可以在該伺服器上縮短批次處理 SQL 配接器接收位置 (BatchControlMessageRecvLoc) 的輪詢間隔。 建議您將開發伺服器的輪詢間隔設定為 30 秒。  
  
14. 按一下**確定**來驗證變更，然後關閉對話方塊。  
  
## <a name="see-also"></a>另請參閱  
 [設定交換設定 (EDIFACT)](../core/configuring-interchange-settings-edifact.md)