---
title: 合作對象解析管線元件 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6ad728ff-4d7c-4ab3-af0e-76006576dce5
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d2e1c9b95c84d82dd1d7e2538138bcb9f89b6b8a
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2017
ms.locfileid: "25971580"
---
# <a name="party-resolution-pipeline-component"></a><span data-ttu-id="c8f49-102">合作對象解析管線元件</span><span class="sxs-lookup"><span data-stu-id="c8f49-102">Party Resolution Pipeline Component</span></span>

## <a name="overview"></a><span data-ttu-id="c8f49-103">概觀</span><span class="sxs-lookup"><span data-stu-id="c8f49-103">Overview</span></span>
<span data-ttu-id="c8f49-104">合作對象解析管線元件的責任是對應傳送者憑證或傳送者安全性識別碼 (SID) 至所對應已設定的 BizTalk Server 合作對象。</span><span class="sxs-lookup"><span data-stu-id="c8f49-104">The responsibility of the Party Resolution pipeline component is to map the sender certificate or the sender security identifier (SID) to the corresponding configured BizTalk Server party.</span></span>  
  
 <span data-ttu-id="c8f49-105">當合作對象解析元件讀取內送訊息時，它會使用兩個訊息內容屬性做為輸入： **WindowsUser**和**SignatureCertificate**。</span><span class="sxs-lookup"><span data-stu-id="c8f49-105">When the Party Resolution component reads the incoming message, it takes two message context properties as input: **WindowsUser** and **SignatureCertificate**.</span></span> <span data-ttu-id="c8f49-106">**WindowsUser**屬性會填入配接器，或自訂管線元件，與寄件者可以可靠地衍生傳送者資訊時的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="c8f49-106">The **WindowsUser** property is populated by the adapter, or by a custom pipeline component, with the user name of the sender when it can reliably derive the sender information.</span></span> <span data-ttu-id="c8f49-107">**SignatureCertificate**會填入配接器或 MIME/SMIME 解碼器管線元件，用戶端驗證憑證的指紋。</span><span class="sxs-lookup"><span data-stu-id="c8f49-107">The **SignatureCertificate** is populated by the adapter or the MIME/SMIME Decoder pipeline component with the thumbprint of the client authentication certificate.</span></span>  
  
 <span data-ttu-id="c8f49-108">若訊息已簽章，則用以驗證輸入訊息簽章的憑證指紋就會用以查詢「組態儲存機制」，以決定它與哪些合作對象相關聯。</span><span class="sxs-lookup"><span data-stu-id="c8f49-108">If the message is signed, the thumbprint of the certificate that was used to validate the signature on the inbound message is then used to look in the Configuration Repository to determine which party it is associated with.</span></span> <span data-ttu-id="c8f49-109">若找到合作對象，就會將該合作對象的 SourcePartyID 放置在訊息內容中以作為訊息的建立者。</span><span class="sxs-lookup"><span data-stu-id="c8f49-109">If a party is found, the SourcePartyID for that party is placed in the context of the message as the originator of the message.</span></span>  
  
 <span data-ttu-id="c8f49-110">若要啟用合作對象解析管線元件以驗證 Windows 使用者，您必須將 "WindowsUser" 別名新增至合作對象。</span><span class="sxs-lookup"><span data-stu-id="c8f49-110">To enable the Party Resolution pipeline component to validate a Windows user, you must add the "WindowsUser" alias to a party.</span></span> <span data-ttu-id="c8f49-111">在 名稱 和 辨識符號欄位中輸入"WindowsUser"並將值設為使用者名稱格式為\<網域 \ 使用者名稱\>(e.g.SOMEDOMAIN\someuser)。</span><span class="sxs-lookup"><span data-stu-id="c8f49-111">Type "WindowsUser" in the Name and Qualifier fields and set the Value to a user name in format of \<domain\user name\> (e.g. SOMEDOMAIN\someuser).</span></span> <span data-ttu-id="c8f49-112">在獨立的實例中，用以設定合作對象的 WindowsUser 值應符合接收配接器所設定的值。</span><span class="sxs-lookup"><span data-stu-id="c8f49-112">In a stand-alone scenario, the WindowsUser value used to configure the party should match the value that is set by the receive adapter.</span></span>  
  
 <span data-ttu-id="c8f49-113">如果在訊息到達合作對象解析元件使用兩個屬性加上戳記，合作對象解析元件第一次嘗試依憑證解析合作對象 (假設**依憑證解析合作對象**屬性設定為**True**)。</span><span class="sxs-lookup"><span data-stu-id="c8f49-113">If the message arrives at the Party Resolution component with both of the properties stamped, the Party Resolution component first tries to resolve the party by the certificate (assuming the **Resolve Party By Certificate** property is set to **True**).</span></span> <span data-ttu-id="c8f49-114">如果合作對象解析，該合作對象的 SourcePartyID 放在訊息的內容做為訊息的 OriginatorPID 執行管線的主控件程序標示為**信任的驗證**的管線。</span><span class="sxs-lookup"><span data-stu-id="c8f49-114">If the party is resolved, the SourcePartyID for that party is placed in the context of the message as the OriginatorPID of the message if the host process running the pipeline is marked as **Authentication Trusted** by the pipeline.</span></span> <span data-ttu-id="c8f49-115">若不能使用憑證完成合作對象解析，則在訊息上的 OriginatorPID 值會加上 "s-1-5-7" 的戳記，此為匿名使用者的 SID。</span><span class="sxs-lookup"><span data-stu-id="c8f49-115">If the party resolution cannot be completed by using the certificate, the OriginatorPID value on the message is stamped with "s-1-5-7", which is the SID of an anonymous user.</span></span> <span data-ttu-id="c8f49-116">如需 OriginatorPID 屬性的詳細資訊，請參閱[如何保護管線](../core/how-to-secure-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="c8f49-116">For more information about the OriginatorPID property, see [How to Secure Pipelines](../core/how-to-secure-pipelines.md).</span></span>  

## <a name="resolve-the-party"></a><span data-ttu-id="c8f49-117">解析合作對象</span><span class="sxs-lookup"><span data-stu-id="c8f49-117">Resolve the party</span></span>  
 <span data-ttu-id="c8f49-118">下表顯示合作對象解析管線元件嘗試解析合作對象的方式。</span><span class="sxs-lookup"><span data-stu-id="c8f49-118">The following table shows how the Party Resolution pipeline component attempts to resolve the party.</span></span>  
  
|<span data-ttu-id="c8f49-119">依 SID</span><span class="sxs-lookup"><span data-stu-id="c8f49-119">By SID</span></span>|<span data-ttu-id="c8f49-120">依憑證</span><span class="sxs-lookup"><span data-stu-id="c8f49-120">By certificate</span></span>|<span data-ttu-id="c8f49-121">WindowsUser</span><span class="sxs-lookup"><span data-stu-id="c8f49-121">WindowsUser</span></span>|<span data-ttu-id="c8f49-122">SignatureCertificate</span><span class="sxs-lookup"><span data-stu-id="c8f49-122">SignatureCertificate</span></span>|<span data-ttu-id="c8f49-123">結果</span><span class="sxs-lookup"><span data-stu-id="c8f49-123">Result</span></span>|  
|------------|--------------------|-----------------|--------------------------|------------|  
|<span data-ttu-id="c8f49-124">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-124">True</span></span>|<span data-ttu-id="c8f49-125">False</span><span class="sxs-lookup"><span data-stu-id="c8f49-125">False</span></span>|<span data-ttu-id="c8f49-126">可用</span><span class="sxs-lookup"><span data-stu-id="c8f49-126">Available</span></span>|<span data-ttu-id="c8f49-127">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-127">Available or unavailable</span></span>|<span data-ttu-id="c8f49-128">合作對象已解析。</span><span class="sxs-lookup"><span data-stu-id="c8f49-128">Party is resolved.</span></span>|  
|<span data-ttu-id="c8f49-129">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-129">True</span></span>|<span data-ttu-id="c8f49-130">False</span><span class="sxs-lookup"><span data-stu-id="c8f49-130">False</span></span>|<span data-ttu-id="c8f49-131">無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-131">Unavailable</span></span>|<span data-ttu-id="c8f49-132">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-132">Available or unavailable</span></span>|<span data-ttu-id="c8f49-133">合作對象未解析並加上匿名的戳記。</span><span class="sxs-lookup"><span data-stu-id="c8f49-133">Party is not resolved and is stamped as anonymous.</span></span>|  
|<span data-ttu-id="c8f49-134">False</span><span class="sxs-lookup"><span data-stu-id="c8f49-134">False</span></span>|<span data-ttu-id="c8f49-135">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-135">True</span></span>|<span data-ttu-id="c8f49-136">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-136">Available or unavailable</span></span>|<span data-ttu-id="c8f49-137">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-137">Available or unavailable</span></span>|<span data-ttu-id="c8f49-138">合作對象未解析並加上匿名的戳記。</span><span class="sxs-lookup"><span data-stu-id="c8f49-138">Party is not resolved and is stamped as anonymous.</span></span>|  
|<span data-ttu-id="c8f49-139">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-139">True</span></span>|<span data-ttu-id="c8f49-140">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-140">True</span></span>|<span data-ttu-id="c8f49-141">可用</span><span class="sxs-lookup"><span data-stu-id="c8f49-141">Available</span></span>|<span data-ttu-id="c8f49-142">可用</span><span class="sxs-lookup"><span data-stu-id="c8f49-142">Available</span></span>|<span data-ttu-id="c8f49-143">合作對象已解析。</span><span class="sxs-lookup"><span data-stu-id="c8f49-143">Party is resolved.</span></span>|  
|<span data-ttu-id="c8f49-144">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-144">True</span></span>|<span data-ttu-id="c8f49-145">True</span><span class="sxs-lookup"><span data-stu-id="c8f49-145">True</span></span>|<span data-ttu-id="c8f49-146">無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-146">Unavailable</span></span>|<span data-ttu-id="c8f49-147">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-147">Available or unavailable</span></span>|<span data-ttu-id="c8f49-148">合作對象未解析並加上匿名的戳記。</span><span class="sxs-lookup"><span data-stu-id="c8f49-148">Party is not resolved and is stamped as anonymous.</span></span>|  
|<span data-ttu-id="c8f49-149">False</span><span class="sxs-lookup"><span data-stu-id="c8f49-149">False</span></span>|<span data-ttu-id="c8f49-150">False</span><span class="sxs-lookup"><span data-stu-id="c8f49-150">False</span></span>|<span data-ttu-id="c8f49-151">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-151">Available or unavailable</span></span>|<span data-ttu-id="c8f49-152">可用或無法使用</span><span class="sxs-lookup"><span data-stu-id="c8f49-152">Available or unavailable</span></span>|<span data-ttu-id="c8f49-153">合作對象未解析並加上匿名的戳記。</span><span class="sxs-lookup"><span data-stu-id="c8f49-153">Party is not resolved and is stamped as anonymous.</span></span>|  
  
 <span data-ttu-id="c8f49-154">如需設定 「 合作對象解析 」 管線元件的資訊，請參閱[如何設定合作對象解析管線元件](../core/how-to-configure-the-party-resolution-pipeline-component.md)。</span><span class="sxs-lookup"><span data-stu-id="c8f49-154">For information about configuring the Party Resolution pipeline component, see [How to Configure the Party Resolution Pipeline Component](../core/how-to-configure-the-party-resolution-pipeline-component.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c8f49-155">請參閱</span><span class="sxs-lookup"><span data-stu-id="c8f49-155">See Also</span></span>  
-  <span data-ttu-id="c8f49-156">**訊息內容屬性**[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span><span class="sxs-lookup"><span data-stu-id="c8f49-156">**Message Context Properties** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span></span>   
-  [<span data-ttu-id="c8f49-157">管線元件</span><span class="sxs-lookup"><span data-stu-id="c8f49-157">Pipeline Components</span></span>](../core/pipeline-components.md)   
-  [<span data-ttu-id="c8f49-158">自訂合作對象解析 (BizTalk Server 範例)</span><span class="sxs-lookup"><span data-stu-id="c8f49-158">Custom Party Resolution (BizTalk Server Sample)</span></span>](../core/custom-party-resolution-biztalk-server-sample.md)   
-  [<span data-ttu-id="c8f49-159">程序之間的訊息驗證</span><span class="sxs-lookup"><span data-stu-id="c8f49-159">Authentication of Messages Between Processes</span></span>](../core/authentication-of-messages-between-processes.md)