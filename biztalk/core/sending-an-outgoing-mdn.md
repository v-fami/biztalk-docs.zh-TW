---
title: "傳送外寄 MDN |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 2dce7620-d354-4b76-bcbc-f97dc93c3fc3
caps.latest.revision: "12"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d947751e06e0dc9892ab63e109b417047ad91b59
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="sending-an-outgoing-mdn"></a><span data-ttu-id="643a2-102">傳送外寄 MDN</span><span class="sxs-lookup"><span data-stu-id="643a2-102">Sending an Outgoing MDN</span></span>
<span data-ttu-id="643a2-103">外寄 MDN 是由 AS2EDIReceive 或 AS2Receive receive 管線產生，並且由 AS2Send 管線傳送。</span><span class="sxs-lookup"><span data-stu-id="643a2-103">An outgoing MDN is generated by the AS2EDIReceive or AS2Receive receive pipeline, and sent by the AS2Send pipeline.</span></span> <span data-ttu-id="643a2-104">本主題將描述如何傳送 MDN。</span><span class="sxs-lookup"><span data-stu-id="643a2-104">This topic describes how an MDN is sent.</span></span> <span data-ttu-id="643a2-105">如需有關如何產生 MDN 的詳細資訊，請參閱[產生外寄 MDN](../core/generating-an-outgoing-mdn.md)。</span><span class="sxs-lookup"><span data-stu-id="643a2-105">For more information on how an MDN is generated, see [Generating an Outgoing MDN](../core/generating-an-outgoing-mdn.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="643a2-106">AS2EDISend 傳送管線不是用來傳送外寄 MDN，因為該管線中的 EDI 組合器不是在處理 MDN 時使用。</span><span class="sxs-lookup"><span data-stu-id="643a2-106">The AS2EDISend send pipeline is not used to send an outgoing MDN, because the EDI assembler in that pipeline is not used in processing an MDN.</span></span>  
  
## <a name="agreement-resolution-for-an-mdn"></a><span data-ttu-id="643a2-107">MDN 的協議解析</span><span class="sxs-lookup"><span data-stu-id="643a2-107">Agreement Resolution for an MDN</span></span>  
 <span data-ttu-id="643a2-108">MDN 會自動路由。</span><span class="sxs-lookup"><span data-stu-id="643a2-108">An MDN is self-routing.</span></span> <span data-ttu-id="643a2-109">它包含路由至目標協議時所需的資訊。</span><span class="sxs-lookup"><span data-stu-id="643a2-109">It contains the information that it needs to be routed to the intended agreement.</span></span> <span data-ttu-id="643a2-110">傳送管線會使用 AS2 協議屬性來處理外寄 MDN。</span><span class="sxs-lookup"><span data-stu-id="643a2-110">The send pipeline uses the AS2 agreement properties to process the outgoing MDN.</span></span> <span data-ttu-id="643a2-111">不過，MDN 不必擁有它路由傳送至合作對象解析協議。</span><span class="sxs-lookup"><span data-stu-id="643a2-111">However, the MDN does not have to have an agreement resolved for it to be routed to the party.</span></span>  
  
 <span data-ttu-id="643a2-112">當 AS2Send 管線處理外寄 MDN 時，它會使用 AS2 的訊息內容取得來處理 MDN 的協議屬性中的值。</span><span class="sxs-lookup"><span data-stu-id="643a2-112">When the AS2Send pipeline processes an outgoing MDN, it uses the AS2-To value in the message context to obtain the agreement properties to process the MDN.</span></span> <span data-ttu-id="643a2-113">它是藉由比對 AS2-內容屬性與 [AS2-協議屬性中**識別碼**單向 AS2 協議索引標籤中的頁面**協議屬性**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="643a2-113">It does so by matching the AS2-To context property with the AS2-To agreement property in the **Identifiers** page in the one-way AS2 agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="643a2-114">如果此 mdn 的協議解析可能會失敗，AS2-以值未設定協議。</span><span class="sxs-lookup"><span data-stu-id="643a2-114">This agreement resolution for the MDN can fail if the AS2-To value is not set for the agreement.</span></span> <span data-ttu-id="643a2-115">如果無法判斷協議，預設的協議用來產生 MDN。</span><span class="sxs-lookup"><span data-stu-id="643a2-115">If the agreement cannot be determined, a default agreement is used to generate the MDN.</span></span>  
  
 <span data-ttu-id="643a2-116">在外寄 MDN 的預設協議中，會執行憑證解析清單驗證。</span><span class="sxs-lookup"><span data-stu-id="643a2-116">In the default agreement for an outgoing MDN, the certificate resolution list verification is performed.</span></span> <span data-ttu-id="643a2-117">如果您不要執行此驗證，請確認已設定正確的 AS2-To 協議屬性，以便解析接收的合作對象並判斷協議屬性。</span><span class="sxs-lookup"><span data-stu-id="643a2-117">If you do not want this verification to be performed, verify that the correct AS2-To agreement property is set, so the receiving party can be resolved and the agreement properties can be determined.</span></span> <span data-ttu-id="643a2-118">如此一來，便不會使用預設協議 (會提示要驗證憑證解析清單)。</span><span class="sxs-lookup"><span data-stu-id="643a2-118">If so, the default agreement that prompts verification of the certificate resolution list will not be used.</span></span> <span data-ttu-id="643a2-119">您也需要停用**檢查憑證撤銷清單**屬性**驗證**頁面的單向 AS2 協議索引標籤中**協議屬性**對話方塊。</span><span class="sxs-lookup"><span data-stu-id="643a2-119">You will also need to disable the **Check Certification Revocation List** property on the **Validation** page of the one-way AS2 agreement tab in the **Agreement Properties** dialog box.</span></span>  
  
## <a name="synchronous-and-asynchronous-transmission"></a><span data-ttu-id="643a2-120">同步和非同步傳輸</span><span class="sxs-lookup"><span data-stu-id="643a2-120">Synchronous and Asynchronous Transmission</span></span>  
 <span data-ttu-id="643a2-121">在預設 AS2 程序中，MDN 是以同步的方式傳送。</span><span class="sxs-lookup"><span data-stu-id="643a2-121">In default AS2 processing, an MDN is sent synchronously.</span></span> <span data-ttu-id="643a2-122">MDN 是由與雙向接收埠相關聯的傳送埠傳送。</span><span class="sxs-lookup"><span data-stu-id="643a2-122">The MDN is sent by the send port associated with a two-way receive port.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="643a2-123">為 HTTP 回應至 HTTP POST 或 HTTPS 回應至 HTTPS POST，相同的 TCP/IP 連線傳送 MDN。</span><span class="sxs-lookup"><span data-stu-id="643a2-123"> sends the MDN as an HTTP response to an HTTP POST or as an HTTPS response to an HTTPS POST, on the same TCP/IP connection.</span></span> <span data-ttu-id="643a2-124">MDN 會包含在 [HTTP 回應] 命令的訊息內文中。</span><span class="sxs-lookup"><span data-stu-id="643a2-124">The MDN is included in the message body of the HTTP Response command.</span></span>  
  
 <span data-ttu-id="643a2-125">如果 MDN 將以非同步的方式傳送，則 MDN 必須透過不同的傳送埠傳送，該傳送埠會從 MessageBox 挑選 MDN。</span><span class="sxs-lookup"><span data-stu-id="643a2-125">If the MDN is being sent asynchronously, the MDN must be sent by a separate send port, which picks the MDN up from the MessageBox.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="643a2-126">您可以將 MDN 當成個別 HTTP Post 傳送唯一的 TCP/IP 連線，不同於用來傳遞原始 AS2 訊息。</span><span class="sxs-lookup"><span data-stu-id="643a2-126"> sends the MDN as a separate HTTP Post delivered on a unique TCP/IP connection, distinct from that used to deliver the original AS2 message.</span></span> <span data-ttu-id="643a2-127">即使 MDN 設為不同的 HTTP Post，Post 仍需要 [HTTP 回應] 命令。</span><span class="sxs-lookup"><span data-stu-id="643a2-127">Even though the MDN is set as a separate HTTP Post, an HTTP Response command is still required for the Post.</span></span>  
  
 <span data-ttu-id="643a2-128">非同步的 MDN 通常會傳送至原始 AS2 訊息的 Receipt-Delivery-Option 標頭中的 URL。</span><span class="sxs-lookup"><span data-stu-id="643a2-128">An asynchronous MDN will normally be sent to the URL in the Receipt-Delivery-Option header of the original AS2 message.</span></span> <span data-ttu-id="643a2-129">不過，如果**對驗證與 MDN 使用協議設定，而非訊息標頭**上設定屬性上**驗證**頁面的單向 AS2 協議索引標籤中**協議屬性**對話方塊中，將會傳送 MDN 的 url，**回條傳遞選項 (URL)**協議屬性設定為。</span><span class="sxs-lookup"><span data-stu-id="643a2-129">However, if the **Use agreement settings for validation and MDN instead of message header** property is set on the on the **Validation** page of the one-way AS2 agreement tab in the **Agreement Properties** dialog box, the MDN will be sent to the URL that the **Receipt-Delivery-Option (URL)** agreement property is set to.</span></span>  
  
## <a name="how-the-send-pipeline-processes-an-outgoing-mdn"></a><span data-ttu-id="643a2-130">傳送管線如何處理外寄 MDN</span><span class="sxs-lookup"><span data-stu-id="643a2-130">How the Send Pipeline Processes an Outgoing MDN</span></span>  
 <span data-ttu-id="643a2-131">AS2Send 管線處理外寄 MDN 的方式如下所示：</span><span class="sxs-lookup"><span data-stu-id="643a2-131">The AS2Send pipeline processes an outgoing MDN are as follows:</span></span>  
  
-   <span data-ttu-id="643a2-132">如果已在 AS2 單向協議屬性中啟用，則執行 MIME 處理，包括套用數位簽章。</span><span class="sxs-lookup"><span data-stu-id="643a2-132">Performs MIME processing, including applying a digital signature, if enabled in the AS2 one-way agreement properties.</span></span>  
  
-   <span data-ttu-id="643a2-133">在不可否認性資料庫 (BizTalkDTADb 資料庫的 EdiMessageContent 資料表) 中填入相互關聯項目。</span><span class="sxs-lookup"><span data-stu-id="643a2-133">Makes correlation entries in the non-repudiation database (the EdiMessageContent table of the BizTalkDTADb database).</span></span>  
  
-   <span data-ttu-id="643a2-134">複製 MDN （以電傳格式） 並將它儲存在不可否認性資料庫中，如果在啟用**為輸出的 MDN 啟用 NRR**協議屬性。</span><span class="sxs-lookup"><span data-stu-id="643a2-134">Makes a copy of the MDN (in wire format) and stores it in the non-repudiation database, if enabled in the **NRR enabled for outbound MDN** agreement property.</span></span>  
  
-   <span data-ttu-id="643a2-135">將 MDN 傳送至 HTTP 配接器</span><span class="sxs-lookup"><span data-stu-id="643a2-135">Delivers the MDN to the HTTP adapter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="643a2-136">另請參閱</span><span class="sxs-lookup"><span data-stu-id="643a2-136">See Also</span></span>  
 <span data-ttu-id="643a2-137">[BizTalk Server 傳送 AS2 訊息的方式](../core/how-biztalk-server-sends-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="643a2-137">[How BizTalk Server Sends AS2 Messages](../core/how-biztalk-server-sends-as2-messages.md) </span></span>  
 [<span data-ttu-id="643a2-138">AS2 傳送元件</span><span class="sxs-lookup"><span data-stu-id="643a2-138">AS2 Send Components</span></span>](../core/as2-send-components.md)