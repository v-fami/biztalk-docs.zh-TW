---
title: "SB Messaging 配接器 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c06c4934-45b2-4f6f-9d19-3ebd937c32ae
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2fb2eb8f532d72708dfca199f0eef794afdf77df
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="sb-messaging-adapter"></a><span data-ttu-id="f7f5e-102">SB Messaging 配接器</span><span class="sxs-lookup"><span data-stu-id="f7f5e-102">SB-Messaging Adapter</span></span>
<span data-ttu-id="f7f5e-103">服務匯流排 (**Sb-messaging**) 配接器用來接收和傳送來自服務匯流排實體，例如佇列、 主題和轉送。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-103">The Service Bus (**SB-Messaging**) adapter is used to receive and send from Service Bus entities like Queues, Topics, and Relays.</span></span> <span data-ttu-id="f7f5e-104">您可以使用**Sb-messaging**橋接之間連線的介面卡[!INCLUDE[winazure](../includes/winazure-md.md)]和內部[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，藉此讓使用者可以建立一般的混合式應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-104">You can use the **SB-Messaging** adapters to bridge the connectivity between [!INCLUDE[winazure](../includes/winazure-md.md)] and on-premises [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], thereby enabling users to create a typical hybrid application.</span></span> <span data-ttu-id="f7f5e-105">此章節的主題提供有關如何設定指示**Sb-messaging**接收位置和傳送埠以接收和傳送訊息的服務匯流排實體。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-105">The topics in this section provide instructions on how to configure an **SB-Messaging** receive location and a send port to receive and send messages from the Service Bus entities.</span></span>  

## <a name="before-you-get-started"></a><span data-ttu-id="f7f5e-106">在開始之前</span><span class="sxs-lookup"><span data-stu-id="f7f5e-106">Before you get started</span></span>
<span data-ttu-id="f7f5e-107">服務匯流排提供兩種方法來驗證： 存取控制服務 (ACS) 以及共用存取簽章 (SAS)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-107">Service Bus provides two methods to authenticate: Access Control Service (ACS) and the Shared Access Signature (SAS).</span></span> <span data-ttu-id="f7f5e-108">我們建議使用服務匯流排驗證時，使用共用存取簽章 (SAS)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-108">Our recommendation is to use Shared Access Signature (SAS) when authenticating with Service Bus.</span></span> <span data-ttu-id="f7f5e-109">共用存取金鑰值都會列在[Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-109">The Shared Access Key value is listed in the [Azure portal](https://portal.azure.com).</span></span>

<span data-ttu-id="f7f5e-110">當您建立服務匯流排命名空間時，不會自動建立的存取控制 (ACS) 命名空間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-110">When you create a Service Bus namespace, the Access Control (ACS) namespace is not automatically created.</span></span> <span data-ttu-id="f7f5e-111">若要使用存取控制，您需要此命名空間的簽發者名稱和簽發者金鑰值。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-111">To use Access Control, you need the Issuer Name and Issuer Key values of this namespace.</span></span> <span data-ttu-id="f7f5e-112">這些值可用，當您建立新的 ACS 命名空間使用 Windows PowerShell。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-112">These values are available when you create a new ACS namespace using Windows PowerShell.</span></span> <span data-ttu-id="f7f5e-113">這些值不會列出在 Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-113">These values are not listed in the Azure portal.</span></span>

<span data-ttu-id="f7f5e-114">若要使用 ACS 進行驗證，並取得簽發者名稱和簽發者金鑰值，整體的步驟包括：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-114">To use ACS for authentication, and get the Issuer Name and Issuer Key values, the overall steps include:</span></span>

1. <span data-ttu-id="f7f5e-115">安裝[Azure Powershell cmdlet](https://azure.microsoft.com/documentation/articles/powershell-install-configure/)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-115">Install the [Azure Powershell cmdlets](https://azure.microsoft.com/documentation/articles/powershell-install-configure/).</span></span>
2. <span data-ttu-id="f7f5e-116">加入您的 Azure 帳戶：`Add-AzureAccount`</span><span class="sxs-lookup"><span data-stu-id="f7f5e-116">Add your Azure account: `Add-AzureAccount`</span></span>
3. <span data-ttu-id="f7f5e-117">傳回訂用帳戶名稱：`get-azuresubscription`</span><span class="sxs-lookup"><span data-stu-id="f7f5e-117">Return your subscription name: `get-azuresubscription`</span></span>
4. <span data-ttu-id="f7f5e-118">選取您的訂用帳戶：`select-azuresubscription <name of your subscription>`</span><span class="sxs-lookup"><span data-stu-id="f7f5e-118">Select your subscription: `select-azuresubscription <name of your subscription>`</span></span> 
5. <span data-ttu-id="f7f5e-119">建立新的命名空間：`new-azuresbnamespace <name for the service bus> "Location" -CreateACSNamespace $true -NamespaceType Messaging`</span><span class="sxs-lookup"><span data-stu-id="f7f5e-119">Create a new namespace: `new-azuresbnamespace <name for the service bus> "Location" -CreateACSNamespace $true -NamespaceType Messaging`</span></span>

    <span data-ttu-id="f7f5e-120">範例：`new-azuresbnamespace biztalksbnamespace "South Central US" -CreateACSNamespace $true -NamespaceType Messaging`</span><span class="sxs-lookup"><span data-stu-id="f7f5e-120">Example:    `new-azuresbnamespace biztalksbnamespace "South Central US" -CreateACSNamespace $true -NamespaceType Messaging`</span></span>
      
5. <span data-ttu-id="f7f5e-121">（這可能要花費幾分鐘的時間） 建立新的 ACS 命名空間時，連接字串中列出的 IssuerName 和 IssuerKey 值：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-121">When the new ACS namespace is created (which can take several minutes), the IssuerName and IssuerKey values are listed in the connection string:</span></span> 

    ```
    Name                  : biztalksbnamespace
    Region                : South Central US
    DefaultKey            : abcdefghijklmnopqrstuvwxyz
    Status                : Active
    CreatedAt             : 10/18/2016 9:36:30 PM
    AcsManagementEndpoint : https://biztalksbnamespace-sb.accesscontrol.windows.net/
    ServiceBusEndpoint    : https://biztalksbnamespace.servicebus.windows.net/
    ConnectionString      : Endpoint=sb://biztalksbnamespace.servicebus.windows.net/;SharedSecretIssuer=owner;SharedSecretValue=abcdefghijklmnopqrstuvwxyz
    NamespaceType         : Messaging
    ```
[<span data-ttu-id="f7f5e-122">新 AzureSBNamespace</span><span class="sxs-lookup"><span data-stu-id="f7f5e-122">New-AzureSBNamespace</span></span>](https://msdn.microsoft.com/library/dn495165.aspx)

## <a name="receive-messages-from-service-bus"></a><span data-ttu-id="f7f5e-123">接收來自服務匯流排的訊息</span><span class="sxs-lookup"><span data-stu-id="f7f5e-123">Receive messages from Service Bus</span></span>
  
<span data-ttu-id="f7f5e-124">本節提供有關如何設定資訊**Sb-messaging**接收位置使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-124">This section provides information on how to configure an **SB-Messaging** Receive Location using the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f7f5e-125">之前完成下列程序，您必須已經新增單向接收埠。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-125">Before completing the following procedure, you must have already added a one-way receive port.</span></span> <span data-ttu-id="f7f5e-126">請參閱[如何建立接收埠](../core/how-to-create-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-126">See [How to create a receive port](../core/how-to-create-a-receive-port.md).</span></span>  

 
1.  <span data-ttu-id="f7f5e-127">在 BizTalk Server 管理主控台中，展開  [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，展開**BizTalk 群組**，依序展開**應用程式**，然後展開 應用程式在您要建立接收位置。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-127">In the BizTalk Server Administration console, expand [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expand **BizTalk Group**, expand **Applications**, and then expand the application under you want to create a receive location.</span></span>  
  
2.  <span data-ttu-id="f7f5e-128">在左窗格中按一下 **[接收埠]** 節點，在右窗格中以滑鼠右鍵按一下您想與新接收位置建立關聯的接收埠，然後按一下 **[屬性]**。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-128">In the left pane, click the **Receive Ports** node and in the right pane, right-click the receive port with which you want to associate the new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="f7f5e-129">在左窗格中**接收埠屬性**對話方塊中，選取**接收位置**，並在右窗格中按一下**新增**以建立新接收位置。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-129">In the left pane of the **Receive Port Properties** dialog box, select **Receive Locations**, and in the right pane click **New** to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="f7f5e-130">在**接收位置屬性**對話方塊中，於**傳輸**區段中，選取**Sb-messaging**從**類型**下拉式清單然後按一下 **設定**設定接收位置的傳輸屬性。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-130">In the **Receive Location Properties** dialog box, in the **Transport** section, select **SB-Messaging** from the **Type** drop-down list, and then click **Configure** to configure the transport properties for the receive location.</span></span>  
  
5.  <span data-ttu-id="f7f5e-131">在**Sb-messaging 傳輸屬性**對話方塊中，於**一般**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-131">In the **SB-Messaging Transport Properties** dialog box, in the **General** tab, do the following:</span></span>  
  
    |<span data-ttu-id="f7f5e-132">使用</span><span class="sxs-lookup"><span data-stu-id="f7f5e-132">Use this</span></span>|<span data-ttu-id="f7f5e-133">動作</span><span class="sxs-lookup"><span data-stu-id="f7f5e-133">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="f7f5e-134">**佇列或訂閱 URL**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-134">**Queue or Subscription URL**</span></span>|<span data-ttu-id="f7f5e-135">指定已部署服務匯流排佇列的 URL。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-135">Specify the URL where the Service Bus queue is deployed.</span></span> <span data-ttu-id="f7f5e-136">URL 通常會使用下列格式：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-136">Typically the URL is in the following format:</span></span><br /><br /> `sb://<namespace>.servicebus.windows.net/<queue_name>`|  
    |<span data-ttu-id="f7f5e-137">**開啟逾時**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-137">**Open Timeout**</span></span>|<span data-ttu-id="f7f5e-138">指定時間值，表示可供完成通道開啟作業的時間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-138">Specifies a time span value that indicates the time for a channel open operation to complete.</span></span><br /><br /> <span data-ttu-id="f7f5e-139">**預設值：** 1 分鐘</span><span class="sxs-lookup"><span data-stu-id="f7f5e-139">**Default value:** 1 minute</span></span>|  
    |<span data-ttu-id="f7f5e-140">**關閉逾時**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-140">**Close Timeout**</span></span>|<span data-ttu-id="f7f5e-141">指定時間值，表示可供完成通道關閉作業的時間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-141">Specifies a time span value that indicates the time for a channel close operation to complete.</span></span><br /><br /> <span data-ttu-id="f7f5e-142">**預設值：** 1 分鐘</span><span class="sxs-lookup"><span data-stu-id="f7f5e-142">**Default value:** 1 minute</span></span>|  
    |<span data-ttu-id="f7f5e-143">**接收逾時**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-143">**Receive timeout**</span></span>|<span data-ttu-id="f7f5e-144">指定時間值，表示可供完成接收作業的時間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-144">Specifies a time span value that indicates the time for a receive operation to complete.</span></span><br /><br /> <span data-ttu-id="f7f5e-145">**預設值：** 10 分鐘</span><span class="sxs-lookup"><span data-stu-id="f7f5e-145">**Default value:** 10 minutes</span></span>|  
    |<span data-ttu-id="f7f5e-146">**預先擷取計數**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-146">**Prefetch count**</span></span>|<span data-ttu-id="f7f5e-147">指定同時從服務匯流排佇列或主題接收的訊息數目。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-147">Specifies the number of messages that are received simultaneously from the Service Bus Queue or a topic.</span></span> <span data-ttu-id="f7f5e-148">預先擷取可讓佇列或訂閱用戶端在執行接收作業時從服務載入其他訊息。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-148">Prefetching enables the queue or subscription client to load additional messages from the service when it performs a receive operation.</span></span> <span data-ttu-id="f7f5e-149">用戶端會將這些訊息存放在本機快取中。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-149">The client stores these messages in a local cache.</span></span> <span data-ttu-id="f7f5e-150">快取大小是由您在此指定的 [預先擷取計數] 屬性值所決定。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-150">The size of the cache is determined by the value for the Prefetch Count property you specify here.</span></span><br /><br /> <span data-ttu-id="f7f5e-151">如需詳細資訊，請參閱章節 < 預先擷取 」 在[https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements/](https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements/)</span><span class="sxs-lookup"><span data-stu-id="f7f5e-151">For more information, refer to the section “Prefetching” at [https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements/](https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements/)</span></span><br /><br /> <span data-ttu-id="f7f5e-152">**預設值：** -1</span><span class="sxs-lookup"><span data-stu-id="f7f5e-152">**Default value:** -1</span></span>|  
    |<span data-ttu-id="f7f5e-153">**使用工作階段**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-153">**Use Session**</span></span>|<span data-ttu-id="f7f5e-154">選取此核取方塊以使用服務匯流排工作階段從佇列或訂閱接收訊息。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-154">Select this check box to use a Service Bus session to receive messages from a queue or a subscription.</span></span>|  
  
6.  <span data-ttu-id="f7f5e-155">在**驗證**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-155">In the **Authentication** tab, do the following:</span></span>  
  
    |<span data-ttu-id="f7f5e-156">使用</span><span class="sxs-lookup"><span data-stu-id="f7f5e-156">Use this</span></span>|<span data-ttu-id="f7f5e-157">動作</span><span class="sxs-lookup"><span data-stu-id="f7f5e-157">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="f7f5e-158">**存取控制服務**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-158">**Access Control Service**</span></span>|<span data-ttu-id="f7f5e-159">選取此項目以使用 ACS 進行驗證並提供下列值：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-159">Select this to use ACS for authentication and provide the following values:</span></span><br /><br /> <span data-ttu-id="f7f5e-160">輸入服務匯流排存取控制服務 STS URI。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-160">- Enter the Service Bus Access Control Service STS URI.</span></span> <span data-ttu-id="f7f5e-161">URI 通常會使用下列格式：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-161">Typically the URI is in the following format:</span></span><br /><br /> `https://<namespace>-sb.accesscontrol.windows.net/`<br /><br /> <span data-ttu-id="f7f5e-162">輸入服務匯流排命名空間的簽發者名稱。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-162">- Enter the issuer name for the Service Bus namespace.</span></span><br /><br /> <span data-ttu-id="f7f5e-163">輸入服務匯流排命名空間的簽發者金鑰。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-163">- Enter the issuer key for the Service Bus namespace.</span></span>|  
    |<span data-ttu-id="f7f5e-164">**共用存取簽章**(新開頭[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)])</span><span class="sxs-lookup"><span data-stu-id="f7f5e-164">**Shared Access Signature** (new starting with [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)])</span></span>|<span data-ttu-id="f7f5e-165">選取此項目以使用共用存取簽章 (SAS) 以進行驗證，並提供 SAS 金鑰和金鑰值。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-165">Select this to use Shared Access Signature (SAS) for authentication, and provide the SAS key name and key value.</span></span>|  
  
7.  <span data-ttu-id="f7f5e-166">在**屬性**索引標籤的**仲介訊息屬性的命名空間**欄位中，指定配接器用來撰寫代理的訊息屬性做為訊息內容屬性的命名空間所收到的訊息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-166">In the **Properties** tab, in the **Namespace for Brokered Message Properties** field, specify the namespace that the adapter uses to write the brokered message properties as message context properties on the message received by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f7f5e-167">此外，如果您想要升級仲介的訊息屬性，選取 **升級仲介訊息屬性**核取方塊。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-167">Additionally, if you want to promote the brokered message properties, select the **Promote Brokered Message Properties** check box.</span></span>  
  
8.  <span data-ttu-id="f7f5e-168">按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-168">Click **OK**.</span></span>  
  
9. <span data-ttu-id="f7f5e-169">在 **[接收位置屬性]** 對話方塊中輸入適當的值，以完成接收位置的組態，然後按一下 **[確定]** 儲存設定值。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-169">Enter the appropriate values in the **Receive Location Properties** dialog box to complete the configuration of the receive location and click **OK** to save settings.</span></span> <span data-ttu-id="f7f5e-170">如需有關資訊**接收位置屬性**對話方塊中，請參閱[如何建立接收位置](../core/how-to-create-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-170">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  
  
## <a name="send-messages-to-service-bus"></a><span data-ttu-id="f7f5e-171">將訊息傳送至服務匯流排</span><span class="sxs-lookup"><span data-stu-id="f7f5e-171">Send messages to Service Bus</span></span>
<span data-ttu-id="f7f5e-172">本節提供有關如何設定資訊**Sb-messaging**傳送連接埠使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-172">This section provides information on how to configure an **SB-Messaging** send port using the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  
  
1.  <span data-ttu-id="f7f5e-173">在 BizTalk Server 管理主控台中，建立新的傳送埠，或按兩下現有的傳送埠進行修改。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-173">In the BizTalk Server Administration console, create a new send port or double-click an existing send port to modify it.</span></span> <span data-ttu-id="f7f5e-174">如需詳細資訊，請參閱[如何建立傳送埠](../core/how-to-create-a-send-port2.md)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-174">For more information, see [How to Create a Send Port](../core/how-to-create-a-send-port2.md).</span></span> <span data-ttu-id="f7f5e-175">設定所有傳送埠選項，並指定**Sb-messaging**如**類型**選項**傳輸**區段**一般**索引標籤。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-175">Configure all of the send port options and specify **SB-Messaging** for the **Type** option in the **Transport** section of the **General** tab.</span></span>  
  
2.  <span data-ttu-id="f7f5e-176">在**一般**索引標籤的**傳輸**區段中，按一下**設定** 按鈕。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-176">On the **General** tab, in the **Transport** section, click the **Configure** button.</span></span>  
  
3.  <span data-ttu-id="f7f5e-177">在**Sb-messaging 傳輸屬性**對話方塊**一般**索引標籤上，指定下列項目：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-177">In the **SB-Messaging Transport Properties** dialog box, on the **General** tab, specify the following:</span></span>  
  
    |<span data-ttu-id="f7f5e-178">使用</span><span class="sxs-lookup"><span data-stu-id="f7f5e-178">Use this</span></span>|<span data-ttu-id="f7f5e-179">動作</span><span class="sxs-lookup"><span data-stu-id="f7f5e-179">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="f7f5e-180">**目的地 URL**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-180">**Destination URL**</span></span>|<span data-ttu-id="f7f5e-181">輸入部署服務匯流排佇列所在的 URL。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-181">Enter the URL where the Service Bus queue is deployed.</span></span> <span data-ttu-id="f7f5e-182">URL 通常會使用下列格式：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-182">Typically the URL is in the following format:</span></span><br /><br /> `sb://<namespace>.servicebus.windows.net/<queue_name>`|  
    |<span data-ttu-id="f7f5e-183">**批次排清間隔**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-183">**Batch Flush Interval**</span></span>|<span data-ttu-id="f7f5e-184">指定時間值，表示將傳送至佇列或主題的訊息批次排清的間隔。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-184">Specifies a time span value that indicates the interval when the message batches being sent to a Queue or a Topic are flushed.</span></span> <span data-ttu-id="f7f5e-185">預設值是 20 毫秒。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-185">The default value is 20 milliseconds.</span></span><br /><br /> <span data-ttu-id="f7f5e-186">如需批次處理相對於服務匯流排佇列和主題的詳細資訊，請參閱**用戶端批次處理**區段在[https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements](https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-186">For more information about batching with respect to Service Bus Queues and Topics, see the **Client-side batching** section at [https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements](https://azure.microsoft.com/documentation/articles/service-bus-performance-improvements).</span></span>|  
    |<span data-ttu-id="f7f5e-187">**開啟逾時**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-187">**Open Timeout**</span></span>|<span data-ttu-id="f7f5e-188">指定時間值，表示可供完成通道開啟作業的時間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-188">Specifies a time span value that indicates the time for a channel open operation to complete.</span></span><br /><br /> <span data-ttu-id="f7f5e-189">**預設值：** 1 分鐘</span><span class="sxs-lookup"><span data-stu-id="f7f5e-189">**Default value:** 1 minute</span></span>|  
    |<span data-ttu-id="f7f5e-190">**傳送逾時**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-190">**Send Timeout**</span></span>|<span data-ttu-id="f7f5e-191">指定時間值，表示可供完成傳送作業的時間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-191">Specifies a time span value that indicates the time for a send operation to complete.</span></span><br /><br /> <span data-ttu-id="f7f5e-192">**預設值：** 1 分鐘</span><span class="sxs-lookup"><span data-stu-id="f7f5e-192">**Default value:** 1 minute</span></span>|  
    |<span data-ttu-id="f7f5e-193">**關閉逾時**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-193">**Close Timeout**</span></span>|<span data-ttu-id="f7f5e-194">指定時間值，表示可供完成通道關閉作業的時間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-194">Specifies a time span value that indicates the time for a channel close operation to complete.</span></span><br /><br /> <span data-ttu-id="f7f5e-195">**預設值：** 1 分鐘</span><span class="sxs-lookup"><span data-stu-id="f7f5e-195">**Default value:** 1 minute</span></span>|  
  
4.  <span data-ttu-id="f7f5e-196">在**驗證**索引標籤上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-196">In the **Authentication** tab, do the following:</span></span>  
  
    |<span data-ttu-id="f7f5e-197">使用</span><span class="sxs-lookup"><span data-stu-id="f7f5e-197">Use this</span></span>|<span data-ttu-id="f7f5e-198">動作</span><span class="sxs-lookup"><span data-stu-id="f7f5e-198">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="f7f5e-199">**存取控制服務**</span><span class="sxs-lookup"><span data-stu-id="f7f5e-199">**Access Control Service**</span></span>|<span data-ttu-id="f7f5e-200">選取此項目以使用 ACS 進行驗證並提供下列值：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-200">Select this to use ACS for authentication and provide the following values:</span></span><br /><br /> <span data-ttu-id="f7f5e-201">輸入服務匯流排存取控制服務 STS URI。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-201">- Enter the Service Bus Access Control Service STS URI.</span></span> <span data-ttu-id="f7f5e-202">URI 通常會使用下列格式：</span><span class="sxs-lookup"><span data-stu-id="f7f5e-202">Typically the URI is in the following format:</span></span><br /><br /> `https://<namespace>-sb.accesscontrol.windows.net/`<br /><br /> <span data-ttu-id="f7f5e-203">輸入服務匯流排命名空間的簽發者名稱。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-203">- Enter the issuer name for the Service Bus namespace.</span></span><br /><br /> <span data-ttu-id="f7f5e-204">輸入服務匯流排命名空間的簽發者金鑰。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-204">- Enter the issuer key for the Service Bus namespace.</span></span>|  
    |<span data-ttu-id="f7f5e-205">**共用存取簽章**(新開頭[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)])</span><span class="sxs-lookup"><span data-stu-id="f7f5e-205">**Shared Access Signature** (new starting with [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)])</span></span>|<span data-ttu-id="f7f5e-206">選取此項目以使用共用存取簽章 (SAS) 以進行驗證，並提供 SAS 金鑰和金鑰值。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-206">Select this to use Shared Access Signature (SAS) for authentication, and provide the SAS key name and key value.</span></span>|  
  
5.  <span data-ttu-id="f7f5e-207">在**屬性**索引標籤的**命名空間，使用者定義的仲介訊息屬性**欄位中，指定包含您想要撰寫來做為 BizTalk 訊息內容屬性的命名空間使用者定義代理訊息屬性傳送至服務匯流排佇列的傳出訊息上。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-207">In the **Properties** tab, in the **Namespace for the user defined Brokered Message Properties** field, specify the namespace that contains the BizTalk message context properties that you want to write as user-defined Brokered Message properties on the outgoing message sent to the Service Bus Queue.</span></span> <span data-ttu-id="f7f5e-208">屬於此命名空間的所有屬性都會當作使用者定義的仲介訊息屬性寫入至訊息。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-208">All the properties that belong to the namespace are written to the message as user-defined Brokered Message properties.</span></span> <span data-ttu-id="f7f5e-209">配接器將屬性寫入為仲介訊息屬性時，會忽略此命名空間。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-209">The adapter ignores the namespace while writing the properties as Brokered Message properties.</span></span> <span data-ttu-id="f7f5e-210">它僅使用命名空間來確定要寫入的屬性。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-210">It uses the namespace only to ascertain what properties to write.</span></span>  
  
     <span data-ttu-id="f7f5e-211">您也可以指定 BrokeredMessage 屬性的值。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-211">You can also specify the values for the BrokeredMessage properties.</span></span> <span data-ttu-id="f7f5e-212">如需屬性的詳細資訊，請參閱[BrokeredMessage 屬性](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage_properties.aspx)。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-212">For more information about the properties, see [BrokeredMessage Properties](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage_properties.aspx).</span></span>  
  
6.  <span data-ttu-id="f7f5e-213">按一下**確定**和**確定**以儲存設定。</span><span class="sxs-lookup"><span data-stu-id="f7f5e-213">Click **OK** and **OK** again to save settings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f7f5e-214">另請參閱</span><span class="sxs-lookup"><span data-stu-id="f7f5e-214">See also</span></span>
[<span data-ttu-id="f7f5e-215">使用配接器</span><span class="sxs-lookup"><span data-stu-id="f7f5e-215">Using adapters</span></span>](../core/using-adapters.md)