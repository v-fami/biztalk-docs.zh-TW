---
title: "如何修改速率型節流設定 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords: Bts10.settings.HostRate
ms.assetid: a99dfb29-dee6-4a43-8d34-45179d9d0b5e
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: be54bd3d986143b3f267655bbcb003967e50238f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-modify-rate-based-throttling-settings"></a>如何修改根據速率的節流設定
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中根據速率的節流，適用於包含協調流程或傳送配接器 (負責接收、傳遞或處理發佈至 MessageBox 的訊息) 的主控件執行個體。 您可以使用 [!INCLUDE[btsSettingsDashboard](../includes/btssettingsdashboard-md.md)] 來修改整個 BizTalk 群組中某個主控件的根據速率的節流組態設定。 這些設定會套用至指派給指定主控件的所有主控件執行個體。 本主題提供修改這些設定的逐步程序。  
  
 可能會觸發根據速率的節流的狀況有：  
  
-   主控件執行個體使用的記憶體數量、執行緒數目或資料庫連線數目超過節流閾值。  
  
-   主控件執行個體的訊息傳遞內送速率超過訊息傳遞外寄速率 * 指定的速率增加因數 (百分比) 值。  
  
-   主控件執行個體同時處理的訊息數目超過每一 CPU 的內含式訊息數 * 電腦上可用的 CPU 數目。  
  
## <a name="prerequisites"></a>必要條件  
 若要執行此作業，您必須以 BizTalk Server Administrators 群組的成員身分登入。  
  
### <a name="to-modify-the-rate-based-throttling-settings-of-a-host"></a>若要修改主控件的根據速率的節流設定  
  
1.  在**BizTalk Server 管理主控台**，依序展開[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，以滑鼠右鍵按一下**BizTalk 群組**，然後按一下 **設定**。  
  
2.  在**BizTalk 設定儀表板**對話方塊**主機**索引標籤上，按一下 [**速率型節流**] 索引標籤。  
  
3.  執行下列作業，按一下 **套用**以套用所做的修改，並前進到另一個索引標籤。否則，請按一下**確定**以套用變更並結束 設定儀表板。  
  
    |使用|動作|界限值|預設值|升級邏輯|  
    |--------------|----------------|---------------------|-------------------|-------------------|  
    |**Host**|從下拉式清單選取代表 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 執行階段執行個體的主控件。|-|-|-|  
  
     **發行**  
  
    |使用|動作|界限值|預設值|升級邏輯|  
    |--------------|----------------|---------------------|-------------------|-------------------|  
    |**最小取樣數目**|指定訊息的最小數目[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]針對**取樣視窗持續期間**考慮根據速率的節流之前。<br /><br /> 若取樣視窗中的樣本實際數目低於此值，則會捨棄樣本，而且不會套用節流。 此值應該與中型負載情形下可發佈訊息的速率一致。 例如，如果您的系統預期要處理 1,000 份文件，每秒中型負載情形下，則此參數應設為 1,000\*取樣視窗持續期間 （秒） (或更精確地說，1 \* **取樣視窗持續時間**（秒）)。 若此值設得太低，則在低負載情形下，系統可能會發生節流狀況。 若此值設得太高，則可能沒有足夠的樣本可有效利用此技術。|1 – 整數型別的最大值|100|-|  
    |**取樣視窗持續期間**|指定時間間隔 (以秒為單位)，這是用來計算以收集之樣本為基礎的發佈速率。 若發佈單一訊息所需的延遲很高，應增加持續期間。|1 – 整數型別的最大值|15000|-|  
    |**速率增加因數**|指定百分比以控制發生節流狀況之前，您允許要求速率較完成速率高出多少。<br /><br /> 例如，若訊息正以每秒 200 個的速率發佈，且此參數設為 125，則在套用節流之前，系統將可允許每秒最多發佈 250 個訊息 (125% * 200 = 250)。 若指定給此參數的值太小，系統會頻繁地進行節流，因而導致過度節流。 若指定給此參數的值太大，則不能有效節流，使節流機制無法識別合理的節流狀況。|1 – 整數型別的最大值|125|-|  
    |**節流延遲上限**|指定 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 可透過節流來對訊息執行個體實施的延遲上限 (以毫秒為單位)。 實際的延遲根據節流狀況的嚴重性而有所不同。|1 – 整數型別的最大值|300000|-|  
    |**節流覆寫**|指定是否要覆寫訊息發佈節流。|0： 不會覆寫<br /><br /> 1： 起始節流條件<br /><br /> 2： 不要節流|0|從登錄讀取的節流參數應以一對一的方式對應至主控件執行個體參數。|  
    |**節流覆寫嚴重性**|指定輸入節流條件的嚴重性。<br /><br /> 較高的值會增加初始輸入節流條件的嚴重性時**節流覆寫**設為 1。|1 – 1000|100|所有主控件執行個體值當中的最低值。|  
  
     **傳遞**  
  
    |使用|動作|界限值|預設值|升級邏輯|  
    |--------------|----------------|---------------------|-------------------|-------------------|  
    |**最小取樣數目**|指定將範例 BizTalk 訊息的最小數目**取樣視窗持續期間**考慮根據速率的節流之前。<br /><br /> 若取樣視窗中的樣本實際數目低於此值，則會捨棄樣本，而且不會套用節流。 此值應該與中型負載情形下可傳遞訊息的速率一致。 例如，如果您的系統預期要處理 1,000 份文件，每秒中型負載情形下，則此參數應設為 1,000\*取樣視窗持續期間 （秒） (或更精確地說，1 \* **取樣視窗持續期間** （秒），此案例中)。<br /><br /> 若此值設得太低，則在低負載情形下，系統可能會發生節流狀況。 若此值設得太高，則可能沒有足夠的樣本可有效利用此技術。|1 – 整數型別的最大值|100|-|  
    |**取樣視窗持續期間**|指定時間間隔 (以秒為單位)，這是用來計算以收集之樣本為基礎的處理速率。 若處理單一訊息所需的延遲很高，應增加持續期間。|1 – 整數型別的最大值|15000|-|  
    |**速率增加因數**|指定百分比以控制發生節流狀況之前，您允許協調流程或傳訊引擎的傳遞速率較完成速率高出多少。<br /><br /> 例如，若訊息正以每秒 200 個的速率處理，且此參數設為 125，則在套用節流之前，系統可允許每秒最多處理 250 個訊息 (125% * 200 = 250)。 若指定給此參數的值太小，系統會頻繁地進行節流，因而導致過度節流。 若指定給此參數的值太大，則不能有效節流，使節流機制無法識別合理的節流狀況。|1 – 整數型別的最大值|125|-|  
    |**節流延遲上限**|指定 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 因為節流而在訊息執行個體上套用的延遲時間上限。 實際的延遲根據節流狀況的嚴重性而有所不同。|1 – 整數型別的最大值|300000|-|  
    |**節流覆寫**|指定是否要覆寫訊息傳遞節流。|0： 不會覆寫<br /><br /> 1： 起始節流條件<br /><br /> 2： 不要節流|0|從登錄讀取的節流參數應以一對一的方式對應至主控件執行個體參數。|  
    |**節流覆寫嚴重性**|指定輸出節流狀況的嚴重性。<br /><br /> 較高的值會增加初始輸出節流條件的嚴重性時**節流覆寫**設為 1。|1 – 1000|100|所有主控件執行個體值當中的最低值。|  
  
    > [!NOTE]
    >  若要還原預設設定，請按一下**還原預設值**。  
  
## <a name="see-also"></a>另請參閱  
 [如何修改主控件設定](../core/how-to-modify-host-settings.md)