---
title: EDI 解譯器如何運作 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 8da91ba4-e1c9-4e6b-bbd1-fe71ea880118
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4edf1353a9f06103205e1e6e4296c2aa77e74dc6
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/23/2018
---
# <a name="how-the-edi-disassembler-works"></a><span data-ttu-id="10212-102">EDI 解譯器如何運作</span><span class="sxs-lookup"><span data-stu-id="10212-102">How the EDI Disassembler Works</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="10212-103"> 會在 EDI 接收管線 (`Microsoft.BizTalk.DefaultPipelines.EDIReceivePipeline`) 中執行對所收到 EDI 編碼交換的大部分處理。</span><span class="sxs-lookup"><span data-stu-id="10212-103"> performs most processing for received EDI-encoded interchanges in the EDI Receive Pipeline (`Microsoft.BizTalk.DefaultPipelines.EDIReceivePipeline`).</span></span> <span data-ttu-id="10212-104">此管線包含 EDI 解譯器管線元件，可執行下列處理：</span><span class="sxs-lookup"><span data-stu-id="10212-104">This pipeline includes the EDI disassembler pipeline component, which performs the following processing:</span></span>  
  
-   <span data-ttu-id="10212-105">將單一訊息中的多個交換分割為不同的交換 (若接收位置的 "DetectMID" 管線屬性設定為 True)。</span><span class="sxs-lookup"><span data-stu-id="10212-105">Splits multiple interchanges in a single message into separate interchanges (if the "DetectMID" pipeline property for the receive location is set to True).</span></span> <span data-ttu-id="10212-106">EDI 解譯器執行此工作的方式是搜尋交換控制標頭 (ISA、UNA 或 UNB)，即使已經找到交換控制結尾 (IEA 或 UNZ) 也一樣。</span><span class="sxs-lookup"><span data-stu-id="10212-106">The EDI Disassembler does so by searching for an interchange control header (ISA, UNA, or UNB) even after an interchange control trailer (IEA or UNZ) has been encountered.</span></span>  
  
-   <span data-ttu-id="10212-107">驗證信封。</span><span class="sxs-lookup"><span data-stu-id="10212-107">Validates the envelope.</span></span>  
  
-   <span data-ttu-id="10212-108">解譯交換。</span><span class="sxs-lookup"><span data-stu-id="10212-108">Disassembles the interchange.</span></span>  
  
-   <span data-ttu-id="10212-109">處理 HIPAA 交換的觸發程序欄位。</span><span class="sxs-lookup"><span data-stu-id="10212-109">Processes trigger fields for HIPAA interchanges.</span></span>  
  
-   <span data-ttu-id="10212-110">適用時，驗證 EDI 和夥伴特定的屬性。</span><span class="sxs-lookup"><span data-stu-id="10212-110">Validates EDI and partner-specific properties, as applicable.</span></span> <span data-ttu-id="10212-111">這包含 EDI 結構描述驗證、X-12 編碼訊息的欄位交互驗證 (若已設定)、EDI 結構化驗證，以及擴充的結構描述驗證 (若結構描述已自訂的節點具有非 EDI 資料型別)。</span><span class="sxs-lookup"><span data-stu-id="10212-111">This includes EDI schema validation, cross-field validation for X12-encoded messages (if configured), EDI structural validation, and extended schema validation (if the schema was customized with a node that has a non-EDI data type).</span></span> <span data-ttu-id="10212-112">如需詳細資訊，請參閱[驗證的接收 EDI 訊息](../core/validation-of-received-edi-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="10212-112">For more information, see [Validation of Received EDI Messages](../core/validation-of-received-edi-messages.md).</span></span>  
  
-   <span data-ttu-id="10212-113">驗證交換、 群組和交易集控制編號並未重複項目，如果在啟用檢查 **驗證** 頁面 (在 **交換設定**) 之雙向協議索引標籤的 **協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="10212-113">Verifies that the interchange, group, and transaction set control numbers are not duplicates, if the checks are enabled in the **Validation** page (under **Interchange Settings**) of the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="10212-114">針對先前已接收的交換檢查交換控制編號。</span><span class="sxs-lookup"><span data-stu-id="10212-114">Check the interchange control number against previously received interchanges.</span></span> <span data-ttu-id="10212-115">針對交換內其他的群組控制編號檢查群組控制編號。</span><span class="sxs-lookup"><span data-stu-id="10212-115">Checks the group control number against other group control numbers in the interchange.</span></span> <span data-ttu-id="10212-116">針對該群組內其他的交易集控制編號檢查交易集控制編號。</span><span class="sxs-lookup"><span data-stu-id="10212-116">Checks the transaction set control number against other transaction set control numbers in that group.</span></span> <span data-ttu-id="10212-117">若發現重複，狀態報告會指出存在重複記錄。</span><span class="sxs-lookup"><span data-stu-id="10212-117">If a duplicate is discovered, the status report will indicate that a duplicate record exists.</span></span>  
  
-   <span data-ttu-id="10212-118">為各交易集產生 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="10212-118">Generates an XML document for each transaction set.</span></span> <span data-ttu-id="10212-119">在每個 XML 檔案上，升級 BTS.MessageType 的內容屬性，將它設定為含有命名空間的結構描述名稱。</span><span class="sxs-lookup"><span data-stu-id="10212-119">On each XML file, promotes the context property of BTS.MessageType, setting it to the schema name with namespace.</span></span>  
  
-   <span data-ttu-id="10212-120">將整個交換轉換為 XML，如果 **輸入批次處理選項** 屬性設定為兩個的其中一個 **保留交換** 值。</span><span class="sxs-lookup"><span data-stu-id="10212-120">Converts the entire interchange to XML if the **Inbound batch processing option** property is set to one of the two **Preserve Interchange** values.</span></span> <span data-ttu-id="10212-121">這個屬性可以設定從 **本機主機設定** 頁面下 **交換設定** 雙向協議索引標籤的 **協議屬性** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="10212-121">This property can is set from the **Local Host Settings** page under **Interchange Settings** of the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="10212-122">接收管線會升級 ReuseEnvelope 屬性，以識別保留的交換。</span><span class="sxs-lookup"><span data-stu-id="10212-122">The receive pipeline promotes the property ReuseEnvelope to identify the interchange as preserved.</span></span>  
  
-   <span data-ttu-id="10212-123">產生「技術」和/或「功能」通知 (若已設定)。</span><span class="sxs-lookup"><span data-stu-id="10212-123">Generates a Technical and/or Functional acknowledgment (if configured).</span></span> <span data-ttu-id="10212-124">這可包含批次處理通知 (若已設定)。</span><span class="sxs-lookup"><span data-stu-id="10212-124">This can include batching the acknowledgments (if configured).</span></span> <span data-ttu-id="10212-125">升級 BTS 的內容屬性。訊息類型，將它設定等於中的控制結構描述http://schemas.microsoft.com/EDI/ \<X12 或 EDIFACT\>命名空間 （例如，997 通知就是 X12_997_Root）。</span><span class="sxs-lookup"><span data-stu-id="10212-125">Promotes the context property of BTS.MessageType, setting it equal to the control schema in the http://schemas.microsoft.com/EDI/\<X12 or EDIFACT\> namespace (for example, X12_997_Root for a 997 acknowledgment).</span></span> <span data-ttu-id="10212-126">另外，升級 EDI.DestinationPartyName 內容屬性，可確保會挑選要傳送的通知。</span><span class="sxs-lookup"><span data-stu-id="10212-126">Also promotes the EDI.DestinationPartyName context property, which ensures that the acknowledgment will be picked up for sending.</span></span> <span data-ttu-id="10212-127">如需詳細資訊，請參閱[傳送 EDI 通知](../core/sending-an-edi-acknowledgment.md)。</span><span class="sxs-lookup"><span data-stu-id="10212-127">For more information, see [Sending an EDI Acknowledgment](../core/sending-an-edi-acknowledgment.md).</span></span>  
  
-   <span data-ttu-id="10212-128">適用時，執行 HIPAA 276/277 (僅 5010 版) 834、835 (僅 4010 版) 和 837 文件分割。</span><span class="sxs-lookup"><span data-stu-id="10212-128">Performs HIPAA 276/277 (version 5010 only) 834, 835 (version 4010 only) and 837 document splitting, if applicable.</span></span>  
  
-   <span data-ttu-id="10212-129">升級或寫入屬性至訊息內容 (參閱下一節)。</span><span class="sxs-lookup"><span data-stu-id="10212-129">Promotes or writes properties to the message context (see next section).</span></span>  
  
## <a name="promoting-or-writing-properties-to-the-context"></a><span data-ttu-id="10212-130">升級或寫入屬性至內容</span><span class="sxs-lookup"><span data-stu-id="10212-130">Promoting or Writing Properties to the Context</span></span>  
 <span data-ttu-id="10212-131">EDI 解譯器處理所接收的訊息時，會升級或寫入下列屬性至訊息內容：</span><span class="sxs-lookup"><span data-stu-id="10212-131">When the EDI Disassembler processes a received message, it promotes or writes the following properties to the message context:</span></span>  
  
-   <span data-ttu-id="10212-132">X12 編碼未批次訊息中，會升級信封的下列屬性︰ ISA06、 ISA08、 ISA15;GS01，GS02，GS03，GS08;ST03 和 ST01。</span><span class="sxs-lookup"><span data-stu-id="10212-132">For an X12-encoded unbatched message, promotes the following properties from the envelope: ISA06, ISA08, ISA15; GS01, GS02, GS03, GS08; ST03 and ST01.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="10212-133">內送 HIPAA 837 交換，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]支援三個 HIPAA 837 結構描述： claim-dental_837d、 宣告 Institutional_837I 和宣告 Professional_837P。</span><span class="sxs-lookup"><span data-stu-id="10212-133">For an incoming HIPAA 837 interchange, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supports three HIPAA 837 schemas: Claim-Dental_837D, Claim-Institutional_837I, and Claim-Professional_837P.</span></span> <span data-ttu-id="10212-134">每個選項的 ST01 是"837"。下列三個結構描述版本 5010 中的 GS08 有不同的值:"005010X223A1"837I、 837d，如"005010X224A1"和"005010 X 222"837。</span><span class="sxs-lookup"><span data-stu-id="10212-134">The ST01 for each of these is “837".These three schemas have different values for GS08 in version 5010: "005010X223A1" for 837I, "005010X224A1" for 837D, and "005010X222" for 837P.</span></span> <span data-ttu-id="10212-135">結構描述有的 GS08 在 4010 版中不同的值:"004010X096A1"837I、 837d，如"004010X097A1"為"004010X098A1"837。</span><span class="sxs-lookup"><span data-stu-id="10212-135">The schemas have different values for GS08 in version 4010: "004010X096A1" for 837I, "004010X097A1" for 837D, and "004010X098A1" for 837P.</span></span>  
  
-   <span data-ttu-id="10212-136">EDIFACT 編碼未批次訊息中，會升級信封的下列屬性︰ UNB2.1，UNB2.3，UNB3.1，UNB11;UNG1，UNG2.1，UNG3.1;UNH2.1，UNH2.2，UNH2.3。</span><span class="sxs-lookup"><span data-stu-id="10212-136">For an EDIFACT-encoded unbatched message, promotes the following properties from the envelope: UNB2.1, UNB2.3, UNB3.1, UNB11; UNG1, UNG2.1, UNG3.1; UNH2.1, UNH2.2, UNH2.3.</span></span>  
  
-   <span data-ttu-id="10212-137">若批次處理的交換已分割，會將 ISA_Segment 和 GS_Segment 寫入至 X12 編碼訊息的內容，或將 UNA_Segment、UNB_Segment 和 UNG_Segment 寫入至 EDIFACT 編碼訊息的內容。</span><span class="sxs-lookup"><span data-stu-id="10212-137">If a batched interchange is split, writes ISA_Segment and GS_Segment to the context for X12-encoded messages, or writes UNA_Segment, UNB_Segment, and UNG_Segment to the context for EDIFACT-encoded messages.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="10212-138">以上區段會寫入內容。</span><span class="sxs-lookup"><span data-stu-id="10212-138">The above segments are written to the context.</span></span> <span data-ttu-id="10212-139">他們不會升級至內容。</span><span class="sxs-lookup"><span data-stu-id="10212-139">They are not promoted to the context.</span></span> <span data-ttu-id="10212-140">不過您可以使用「訊息豐富」範例，將這些區段附加至交易集。</span><span class="sxs-lookup"><span data-stu-id="10212-140">You can, however, append these segments to a transaction set using the Message Enrichment sample.</span></span> <span data-ttu-id="10212-141">您也可以擷取附加範例的程式碼，再將它新增至自訂管線元件。</span><span class="sxs-lookup"><span data-stu-id="10212-141">You can also take the code that appends the samples and add it to a custom pipeline component.</span></span> <span data-ttu-id="10212-142">如需詳細資訊，請參閱[訊息豐富 」 範例 （BizTalk Server 範例）](../core/message-enrichment-sample-biztalk-server-sample.md)。</span><span class="sxs-lookup"><span data-stu-id="10212-142">For more information, see [Message Enrichment Sample (BizTalk Server Sample)](../core/message-enrichment-sample-biztalk-server-sample.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="10212-143">ISA_Segment 已升級包含安全性/授權資訊 (ISA02「授權資訊」和 ISA04「安全性資訊」) 的屬性，可能導致資訊洩漏。</span><span class="sxs-lookup"><span data-stu-id="10212-143">The ISA_Segment promoted property contains security/authorization information (ISA02, Authorization Information, and ISA04, Security Information) that may lead to information disclosure.</span></span> <span data-ttu-id="10212-144">您可以使用 **遮罩內容屬性中的安全性/授權/密碼資訊屬性** (在 **本機主機設定** 頁面 **交換設定** 雙向協議屬性) 以 '#' 字元取代 ISA02 和 ISA04 欄位中的每個字元。</span><span class="sxs-lookup"><span data-stu-id="10212-144">You can use the **Mask security/authorization/password information property in context property** (in **Local Host Settings** page for **Interchange Settings** for bi-directional agreement properties) to replace the each character in the ISA02 and ISA04 fields with a ‘#’ character.</span></span> <span data-ttu-id="10212-145">這是單向的程序: '#' 字元無法轉換成實際的字元。</span><span class="sxs-lookup"><span data-stu-id="10212-145">This is a one-way process: the ‘#’ characters cannot be converted to actual characters.</span></span>  
  
-   <span data-ttu-id="10212-146">若為 X12 和 EDIFACT 編碼的訊息，請升級 ReuseEnvelope，這會指出批次處理的交換是否已分割或保留。</span><span class="sxs-lookup"><span data-stu-id="10212-146">For X12- and EDIFACT-encoded messages, promotes ReuseEnvelope, which indicates whether a batched interchange is split or preserved.</span></span>  
  
-   <span data-ttu-id="10212-147">若已保留批次處理的交換，會升級下列屬性：</span><span class="sxs-lookup"><span data-stu-id="10212-147">If a batched interchange is preserved, promotes the following properties:</span></span>  
  
    -   <span data-ttu-id="10212-148">InboundTransportatLocation</span><span class="sxs-lookup"><span data-stu-id="10212-148">InboundTransportatLocation</span></span>  
  
    -   <span data-ttu-id="10212-149">InboundTransportType</span><span class="sxs-lookup"><span data-stu-id="10212-149">InboundTransportType</span></span>  
  
    -   <span data-ttu-id="10212-150">ISA05</span><span class="sxs-lookup"><span data-stu-id="10212-150">ISA05</span></span>  
  
    -   <span data-ttu-id="10212-151">ISA07</span><span class="sxs-lookup"><span data-stu-id="10212-151">ISA07</span></span>  
  
    -   <span data-ttu-id="10212-152">ISA06</span><span class="sxs-lookup"><span data-stu-id="10212-152">ISA06</span></span>  
  
    -   <span data-ttu-id="10212-153">ISA08</span><span class="sxs-lookup"><span data-stu-id="10212-153">ISA08</span></span>  
  
    -   <span data-ttu-id="10212-154">ISA15</span><span class="sxs-lookup"><span data-stu-id="10212-154">ISA15</span></span>  
  
    -   <span data-ttu-id="10212-155">LastInterchangeMessage = {True &#124;False}</span><span class="sxs-lookup"><span data-stu-id="10212-155">LastInterchangeMessage = {True&#124;False}</span></span>  
  
    -   <span data-ttu-id="10212-156">MessageType</span><span class="sxs-lookup"><span data-stu-id="10212-156">MessageType</span></span>  
  
    -   <span data-ttu-id="10212-157">ReceivePortID</span><span class="sxs-lookup"><span data-stu-id="10212-157">ReceivePortID</span></span>  
  
    -   <span data-ttu-id="10212-158">ReceivePortName</span><span class="sxs-lookup"><span data-stu-id="10212-158">ReceivePortName</span></span>  
  
    -   <span data-ttu-id="10212-159">ReuseEnvelope</span><span class="sxs-lookup"><span data-stu-id="10212-159">ReuseEnvelope</span></span>  
  
## <a name="parsing-the-envelope"></a><span data-ttu-id="10212-160">剖析信封</span><span class="sxs-lookup"><span data-stu-id="10212-160">Parsing the Envelope</span></span>  
 <span data-ttu-id="10212-161">EDI 接收管線會使用標頭控制結構描述剖析已接收 EDI 訊息的信封，以及使用 EDI 文件結構描述剖析交換內的交易集/訊息。</span><span class="sxs-lookup"><span data-stu-id="10212-161">The EDI receive pipeline uses the header control schema to parse the envelope of a received EDI message and the EDI document schema to parse the transaction sets/messages in the interchange.</span></span>  
  
 <span data-ttu-id="10212-162">若透過 HTTP/HTTPS 傳輸接收到 EDIINT/AS2 編碼的訊息，EDI 解譯器會檢查 BTS.MessageDestination 內容屬性。</span><span class="sxs-lookup"><span data-stu-id="10212-162">If an EDIINT/AS2-encoded message was received via HTTP/HTTPS transport, the EDI disassembler will inspect the context property BTS.MessageDestination.</span></span> <span data-ttu-id="10212-163">若該屬性設定為 SuspendQueue，表示 AS2 處理中發生錯誤且已擱置訊息，EDI 解譯器會扮演通過管線元件的角色，並擱置傳送至 MessageBox 的訊息。</span><span class="sxs-lookup"><span data-stu-id="10212-163">If that property is set to SuspendQueue, indicating that an error occurred in AS2 processing and the message is to be suspended, the EDI disassembler will act as a passthrough pipeline component, and will suspend the message to the MessageBox.</span></span>  
  
 <span data-ttu-id="10212-164">剖析 EDIFACT 交換時，EDI 接收管線會移除用來逸出字元的釋放指示符號。</span><span class="sxs-lookup"><span data-stu-id="10212-164">During parsing of EDIFACT interchanges, the EDI receive pipeline removes the release indicator used to escape characters.</span></span> <span data-ttu-id="10212-165">EDI 驗證並未包含釋放指示符號。</span><span class="sxs-lookup"><span data-stu-id="10212-165">The release indicator is not included in EDI validation.</span></span> <span data-ttu-id="10212-166">EDI 接收管線計算長度限制時，並未包含釋放指示符號。</span><span class="sxs-lookup"><span data-stu-id="10212-166">The EDI receive pipeline does not include the release indicator when it computes length restrictions.</span></span>  
  
 <span data-ttu-id="10212-167">**字元集**</span><span class="sxs-lookup"><span data-stu-id="10212-167">**Character Set**</span></span>  
  
 <span data-ttu-id="10212-168">若為 X12 交換，[管線元件屬性] 會決定 EDI 解譯器處理交換時將使用的字元集。</span><span class="sxs-lookup"><span data-stu-id="10212-168">For X12 interchanges, the Pipeline Component Properties determine the character set that the EDI Disassembler will use when processing the interchange.</span></span> <span data-ttu-id="10212-169">可能是「基本」、「擴充的」或 UTF8/Unicode。</span><span class="sxs-lookup"><span data-stu-id="10212-169">It can Basic, Extended, or UTF8/Unicode.</span></span> <span data-ttu-id="10212-170">預設值是 UTF8。若為 EDIFACT 交換，UNB1.1 欄位會決定字元集。</span><span class="sxs-lookup"><span data-stu-id="10212-170">The default value is UTF8 For EDIFACT interchanges, the UNB1.1 field determines the character set.</span></span>  
  
 <span data-ttu-id="10212-171">**動態分隔符號探索**</span><span class="sxs-lookup"><span data-stu-id="10212-171">**Dynamic Separator Discovery**</span></span>  
  
 <span data-ttu-id="10212-172">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 接收 EDI 交換時，沒有任何協議屬性會指示交換內的分隔符號應該是什麼。</span><span class="sxs-lookup"><span data-stu-id="10212-172">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI interchange, no agreement properties indicate what the separators in the interchange should be.</span></span> <span data-ttu-id="10212-173">反而是 EDI 解譯器會在執行階段探索分隔符號是哪些 (針對 X12 或 EDIFACT)。</span><span class="sxs-lookup"><span data-stu-id="10212-173">Instead, the EDI Disassembler discovers what the delimiters are (for either X12 or EDIFACT) at runtime.</span></span>  
  
 <span data-ttu-id="10212-174">若為 X12 訊息，EDI 解譯器會使用交換內的下列字元：</span><span class="sxs-lookup"><span data-stu-id="10212-174">For X12 messages, the EDI Disassembler uses the following characters from within the interchange:</span></span>  
  
|<span data-ttu-id="10212-175">分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-175">Separator</span></span>|<span data-ttu-id="10212-176">字元</span><span class="sxs-lookup"><span data-stu-id="10212-176">Character</span></span>|  
|---------------|---------------|  
|<span data-ttu-id="10212-177">資料項目分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-177">Data Element Separator</span></span>|<span data-ttu-id="10212-178">ISA 第 4 個字元</span><span class="sxs-lookup"><span data-stu-id="10212-178">4th character of ISA</span></span>|  
|<span data-ttu-id="10212-179">元件元素分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-179">Component Element Separator</span></span>|<span data-ttu-id="10212-180">ISA16</span><span class="sxs-lookup"><span data-stu-id="10212-180">ISA16</span></span>|  
|<span data-ttu-id="10212-181">區段分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-181">Segment Separator</span></span>|<span data-ttu-id="10212-182">ISA 第 106 個字元</span><span class="sxs-lookup"><span data-stu-id="10212-182">106th character of ISA</span></span>|  
|<span data-ttu-id="10212-183">區段結束字元尾碼</span><span class="sxs-lookup"><span data-stu-id="10212-183">Segment Terminator Suffix</span></span>|<span data-ttu-id="10212-184">ISA 區段與 GS 區段之間的字元</span><span class="sxs-lookup"><span data-stu-id="10212-184">Character between ISA segment and GS segment</span></span><br /><br /> <span data-ttu-id="10212-185">**值︰** 無、 CR、 LF 或 CRLF **附註︰**  分隔符號可以採取上述的值。</span><span class="sxs-lookup"><span data-stu-id="10212-185">**Values:** None, CR, LF, or CRLF **Note:**  The separator can take only the above values.</span></span>|  
|<span data-ttu-id="10212-186">重複分隔符號或標準識別項</span><span class="sxs-lookup"><span data-stu-id="10212-186">Repetition Separator or Standard Identifier</span></span><br /><br /> <span data-ttu-id="10212-187">(根據上的 「 ISA11 使用狀況 協議屬性 **信封** 頁面的雙向協議索引標籤)</span><span class="sxs-lookup"><span data-stu-id="10212-187">(depending on the "ISA11 usage" agreement property on the **Envelopes** page of the bi-directional agreement tab)</span></span>|<span data-ttu-id="10212-188">ISA11</span><span class="sxs-lookup"><span data-stu-id="10212-188">ISA11</span></span>|  
  
 <span data-ttu-id="10212-189">若為 EDIFACT 交換，EDI 解譯器會檢查定義交換內之分隔符號的 UNA 區段。</span><span class="sxs-lookup"><span data-stu-id="10212-189">For EDIFACT interchanges, the EDI Disassembler checks the UNA segment that defines the separators in the interchange.</span></span> <span data-ttu-id="10212-190">若交換沒有 UNA 區段 (選擇性)，解譯器會使用管線元件屬性內定義的預設值。</span><span class="sxs-lookup"><span data-stu-id="10212-190">If the interchange does not have a UNA segment, which is optional, the Disassembler will use the default values defined in the pipeline component properties.</span></span>  
  
|<span data-ttu-id="10212-191">分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-191">Separator</span></span>|<span data-ttu-id="10212-192">UNA 的字元</span><span class="sxs-lookup"><span data-stu-id="10212-192">Character of UNA</span></span>|  
|---------------|----------------------|  
|<span data-ttu-id="10212-193">元件元素分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-193">Component Element Separator</span></span>|<span data-ttu-id="10212-194">第 4 個</span><span class="sxs-lookup"><span data-stu-id="10212-194">4th</span></span>|  
|<span data-ttu-id="10212-195">資料項目分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-195">Data Element Separator</span></span>|<span data-ttu-id="10212-196">第 5 個</span><span class="sxs-lookup"><span data-stu-id="10212-196">5th</span></span>|  
|<span data-ttu-id="10212-197">小數點標記</span><span class="sxs-lookup"><span data-stu-id="10212-197">Decimal Notation</span></span>|<span data-ttu-id="10212-198">第 6 個</span><span class="sxs-lookup"><span data-stu-id="10212-198">6th</span></span>|  
|<span data-ttu-id="10212-199">釋放字元</span><span class="sxs-lookup"><span data-stu-id="10212-199">Release Character</span></span>|<span data-ttu-id="10212-200">第 7 個</span><span class="sxs-lookup"><span data-stu-id="10212-200">7th</span></span>|  
|<span data-ttu-id="10212-201">重複字元</span><span class="sxs-lookup"><span data-stu-id="10212-201">Repetition Character</span></span>|<span data-ttu-id="10212-202">第 8 個</span><span class="sxs-lookup"><span data-stu-id="10212-202">8th</span></span>|  
|<span data-ttu-id="10212-203">區段分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-203">Segment Separator</span></span>|<span data-ttu-id="10212-204">第 9 個</span><span class="sxs-lookup"><span data-stu-id="10212-204">9th</span></span>|  
|<span data-ttu-id="10212-205">區段分隔符號尾碼</span><span class="sxs-lookup"><span data-stu-id="10212-205">Segment Separator Suffix</span></span>|<span data-ttu-id="10212-206">UNA 區段與 UNB 區段之間的字元</span><span class="sxs-lookup"><span data-stu-id="10212-206">Character between UNA segment and UNB segment</span></span><br /><br /> <span data-ttu-id="10212-207">**值︰** 無、 CR、 LF 或 CRLF **附註︰**  分隔符號可以採取上述的值。</span><span class="sxs-lookup"><span data-stu-id="10212-207">**Values:** None, CR, LF, or CRLF **Note:**  The separator can take only the above values.</span></span>|  
  
 <span data-ttu-id="10212-208">UNA 字串是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="10212-208">The UNA string is optional.</span></span> <span data-ttu-id="10212-209">若出現，會定義檔案的所有分隔符號。</span><span class="sxs-lookup"><span data-stu-id="10212-209">If it is present, it defined all the delimiters for the file.</span></span> <span data-ttu-id="10212-210">若沒出現，EDI 解譯器會使用 EfactDelimiters 管線元件屬性決定分隔符號。</span><span class="sxs-lookup"><span data-stu-id="10212-210">If it is not present, the EDI Disassembler will use the EfactDelimiters pipeline component property to determine the delimiters.</span></span> <span data-ttu-id="10212-211">如需詳細資訊，請參閱[設定 EDI 管線屬性](../core/configuring-edi-pipeline-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="10212-211">For more information, see [Configuring EDI Pipeline Properties](../core/configuring-edi-pipeline-properties.md).</span></span>  
  
 <span data-ttu-id="10212-212">**公佈錯誤**</span><span class="sxs-lookup"><span data-stu-id="10212-212">**Posting Errors**</span></span>  
  
 <span data-ttu-id="10212-213">若 EDI 解譯器發生 EDI 處理錯誤，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 會將下列兩個錯誤公佈到「事件檢視器」(若這類公佈已啟用)：</span><span class="sxs-lookup"><span data-stu-id="10212-213">If the EDI disassembler encounters an EDI processing error, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] posts the following two errors in the Event Viewer (if such posting is enabled):</span></span>  
  
-   <span data-ttu-id="10212-214">來源 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 在擱置訊息時記錄的錯誤。</span><span class="sxs-lookup"><span data-stu-id="10212-214">An error logged by the source [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] while it suspends the message.</span></span> <span data-ttu-id="10212-215">這是和 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 處理有關的必須公佈錯誤。</span><span class="sxs-lookup"><span data-stu-id="10212-215">This is a required error relating to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processing.</span></span>  
  
-   <span data-ttu-id="10212-216">由來源 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI 所記錄的交易集內錯誤報告問題。</span><span class="sxs-lookup"><span data-stu-id="10212-216">An error reporting problems in the transaction set, as logged by the source [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI.</span></span> <span data-ttu-id="10212-217">這個錯誤是 EDI 特有的。</span><span class="sxs-lookup"><span data-stu-id="10212-217">This error is EDI-specific.</span></span>  
  
## <a name="using-agreement-properties"></a><span data-ttu-id="10212-218">使用協議屬性</span><span class="sxs-lookup"><span data-stu-id="10212-218">Using Agreement Properties</span></span>  
 <span data-ttu-id="10212-219">EDI 解譯器若可識別協議，將會使用協議屬性 (請參閱[協議解析、 結構描述探索和授權接收 EDI 訊息](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md))。</span><span class="sxs-lookup"><span data-stu-id="10212-219">The EDI Disassembler will use agreement properties if it can identify the agreement (see [Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md)).</span></span> <span data-ttu-id="10212-220">如果找不到符合的協議或對應的值不能使用後援協議中，EDI 解譯器 」 中設定 **屬性** 將使用 Visual Studio 的視窗。</span><span class="sxs-lookup"><span data-stu-id="10212-220">If a matching agreement cannot be found and the corresponding values are not available in the fallback agreement as well, the EDI Disassembler properties set in the **Properties** window of Visual Studio will be used.</span></span> <span data-ttu-id="10212-221">不過，將不會發生此後援如果需要驗證在接收埠屬性 (如果有任一 **驗證失敗時捨棄訊息** 或 **驗證失敗時保留訊息** 已選取)。</span><span class="sxs-lookup"><span data-stu-id="10212-221">However, this fallback will not occur if authentication is required in receive port properties (if either **Drop messages if authentication fails** or **Keep messages if authentication fails** are selected).</span></span> <span data-ttu-id="10212-222">這時就必須設定協議，否則交換會遭擱置。</span><span class="sxs-lookup"><span data-stu-id="10212-222">In this case, an agreement must be configured; if not, the interchange will be suspended.</span></span>  
  
 <span data-ttu-id="10212-223">若要讓 EDI 解譯器使用協議屬性，需已設定下列協議屬性：</span><span class="sxs-lookup"><span data-stu-id="10212-223">When the EDI Disassembler uses agreement properties, it requires that the following agreement properties be set:</span></span>  
  
|<span data-ttu-id="10212-224">屬性</span><span class="sxs-lookup"><span data-stu-id="10212-224">Property</span></span>|<span data-ttu-id="10212-225">協議屬性頁面</span><span class="sxs-lookup"><span data-stu-id="10212-225">Agreement Properties Page</span></span>|  
|--------------|-------------------------------|  
|<span data-ttu-id="10212-226">重複分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-226">Repetition separator</span></span>|<span data-ttu-id="10212-227">**信封** 頁面 (在 **交換設定**) 中雙向協議索引標籤</span><span class="sxs-lookup"><span data-stu-id="10212-227">**Envelopes** page (under **Interchange Settings**) in the bi-directional agreement tab</span></span>|  
|<span data-ttu-id="10212-228">執行 EDI 資料型別驗證</span><span class="sxs-lookup"><span data-stu-id="10212-228">Perform EDI Data Type Validation</span></span>|<span data-ttu-id="10212-229">**驗證** 頁面下 **交易集設定** 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-229">**Validation** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-230">擴充驗證</span><span class="sxs-lookup"><span data-stu-id="10212-230">Extended Validation</span></span>|<span data-ttu-id="10212-231">**驗證** 頁面下 **交易集設定** 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-231">**Validation** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-232">允許前置和尾端零及空格</span><span class="sxs-lookup"><span data-stu-id="10212-232">Allow leading and trailing zeroes and spaces</span></span>|<span data-ttu-id="10212-233">**驗證** 頁面下 **交易集設定** 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-233">**Validation** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-234">如果允許尾端分隔符號，則建立空的 XML 標記</span><span class="sxs-lookup"><span data-stu-id="10212-234">Create empty XML Tags if trailing separators allowed</span></span>|<span data-ttu-id="10212-235">**本機主機設定** 頁面下 **交易集設定** 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-235">**Local Host Settings** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-236">輸入批次處理選項</span><span class="sxs-lookup"><span data-stu-id="10212-236">Inbound batch processing option</span></span>|<span data-ttu-id="10212-237">**本機主機設定** 頁面 (在 **交換設定**) 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-237">**Local Host Settings** page (under **Interchange Settings**) in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-238">預設 EDIFACT 分隔符號</span><span class="sxs-lookup"><span data-stu-id="10212-238">Default EDIFACT Separators</span></span>|-|  
|<span data-ttu-id="10212-239">遮罩安全性/授權/密碼資訊</span><span class="sxs-lookup"><span data-stu-id="10212-239">Mask security/authorization/password information</span></span>|<span data-ttu-id="10212-240">**本機主機設定** 頁面 (在 **交換設定**) 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-240">**Local Host Settings** page (under **Interchange Settings**) in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-241">將隱含的小數格式 Nn 轉換為 10 進制數值</span><span class="sxs-lookup"><span data-stu-id="10212-241">Convert implied decimal format Nn to base 10 numeric value</span></span>|<span data-ttu-id="10212-242">**本機主機設定** 頁面下 **交易集設定** 雙向協議索引標籤中 (針對 X12 協議)</span><span class="sxs-lookup"><span data-stu-id="10212-242">**Local Host Settings** page under **Transaction Set Settings** in the bi-directional agreement tab (for X12 agreements)</span></span>|  
|<span data-ttu-id="10212-243">將通知的路由設定為要求回應接收埠上的傳送管線</span><span class="sxs-lookup"><span data-stu-id="10212-243">Route ACK to send pipeline on request-response receive port</span></span>|<span data-ttu-id="10212-244">**本機主機設定** 頁面 (**接收者的設定** 區段) 下 **交換設定** 在雙向協議索引標籤 （適用於 X12 和 EDIFACT 協議）</span><span class="sxs-lookup"><span data-stu-id="10212-244">**Local Host Settings** page (**Receiver’s Settings** section) under **Interchange Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="10212-245">X12 字元集</span><span class="sxs-lookup"><span data-stu-id="10212-245">X12 character set</span></span>|<span data-ttu-id="10212-246">X12 交換信封產生 **附註︰**  這項設定僅用於驗證協議屬性所輸入的值。</span><span class="sxs-lookup"><span data-stu-id="10212-246">X12 Interchange Envelope Generation **Note:**  This setting is only used to validate the values entered for the agreement properties.</span></span> <span data-ttu-id="10212-247">管線屬性內會選取用來進行執行階段處理的 X12 字元集。</span><span class="sxs-lookup"><span data-stu-id="10212-247">The X12 character set used for runtime processing is selected in the pipeline properties.</span></span> <span data-ttu-id="10212-248">如需詳細資訊，請參閱[EDI 字元集](../core/edi-character-sets.md)。</span><span class="sxs-lookup"><span data-stu-id="10212-248">For more information, see [EDI Character Sets](../core/edi-character-sets.md).</span></span>|  
  
## <a name="using-hipaa-trigger-fields"></a><span data-ttu-id="10212-249">使用 HIPAA 觸發程序欄位</span><span class="sxs-lookup"><span data-stu-id="10212-249">Using HIPAA Trigger Fields</span></span>  
 <span data-ttu-id="10212-250">EDI 區段通常包含修飾區段意義的辨識符號。</span><span class="sxs-lookup"><span data-stu-id="10212-250">EDI segments often contain qualifier values that modify the meaning of the segment.</span></span> <span data-ttu-id="10212-251">例如，N1 區段可能包含 “BT” 辨識元素以表示「帳單收件人」，或可能包含 “ST” 辨識元素以表示「出貨收件人」。</span><span class="sxs-lookup"><span data-stu-id="10212-251">For example, an N1 segment can contain a qualifying element of “BT” to signify a “bill-to name,” or it may contain a qualifying element of “ST” to indicate a “ship-to name.”</span></span> <span data-ttu-id="10212-252">商務邏輯決定如何解譯這些欄位通常會維持和解譯器會將 N1 區段的所有執行個體解析成相同的 XML 記錄名稱。不過，BizTalk Server 所隨附的 HIPAA 結構描述含有註解，可讓 EDI 解譯器來建立根據存在的辨識值的唯一 XML 記錄 (請參閱[HIPAA 結構描述的觸發程序欄位註解](../core/hipaa-schema-trigger-field-annotations.md))。</span><span class="sxs-lookup"><span data-stu-id="10212-252">Normally it is left to business logic to determine how to interpret these fields and the disassembler resolves all instances of the N1 segment to the same XML record name; however, the HIPAA schemas shipped with BizTalk Server contain annotations that allow the EDI disassembler to create unique XML records based on the presence of a qualifying value (see [HIPAA Schema Trigger Field Annotations](../core/hipaa-schema-trigger-field-annotations.md)).</span></span>  
  
 <span data-ttu-id="10212-253">EDI 解譯器在收到 HIPAA 交易集時，若遇到含有觸發程序欄位的區段，便會使用觸發程序資訊來產生這個區段和觸發程序組合特有的 XML 記錄。</span><span class="sxs-lookup"><span data-stu-id="10212-253">When receiving a HIPAA transaction set, if the EDI Disassembler encounters a segment that contains a trigger field, it uses the trigger information to generate an XML record specific to the segment and trigger combination.</span></span>  
  
 <span data-ttu-id="10212-254">下表顯示 N1 區段如何根據 N101 的值轉譯為 XML 記錄：</span><span class="sxs-lookup"><span data-stu-id="10212-254">The following table shows how an N1 segment will be translated into an XML record based on the value of N101:</span></span>  
  
|<span data-ttu-id="10212-255">N1 區段</span><span class="sxs-lookup"><span data-stu-id="10212-255">N1 Segment</span></span>|<span data-ttu-id="10212-256">結果產生的 XML 資料</span><span class="sxs-lookup"><span data-stu-id="10212-256">Resulting XML Data</span></span>|  
|----------------|------------------------|  
|<span data-ttu-id="10212-257">N1 * PR\*Contoso\*1763\*0000000 ~</span><span class="sxs-lookup"><span data-stu-id="10212-257">N1*PR\*Contoso\*XV\*0000000~</span></span>|`<ns0:TS835W1_1000A_Loop>  <N1_PayerIdentification_TS835W1_1000A>   <N101__EntityIdentifierCode>PR</N101__EntityIdentifierCode>    <N102__PayerName>Contoso</N102__PayerName>    <N103__IdentificationCodeQualifier>XV</N103__IdentificationCodeQualifier>    <N104__PayerIdentifier>0000000</N104__PayerIdentifier>   </N1_PayerIdentification_TS835W1_1000A>`|  
|<span data-ttu-id="10212-258">N1 * PE\*Fabrikam\*FI\*9999999 ~</span><span class="sxs-lookup"><span data-stu-id="10212-258">N1*PE\*Fabrikam\*FI\*9999999~</span></span>|`<TS835W1_1000B_Loop>   <N1_PayeeIdentification_TS835W1_1000B>    <N101__EntityIdentifierCode>PE</N101__EntityIdentifierCode>    <N102__PayeeName>Fabrikam</N102__PayeeName>    <N103__IdentificationCodeQualifier>FI</N103__IdentificationCodeQualifier>    <N104__PayeeIdentificationCode>9999999</N104__PayeeIdentificationCode>   </N1_PayeeIdentification_TS835W1_1000B>`|  
  
## <a name="see-also"></a><span data-ttu-id="10212-259">另請參閱</span><span class="sxs-lookup"><span data-stu-id="10212-259">See Also</span></span>  
 [<span data-ttu-id="10212-260">BizTalk Server 如何接收 EDI 訊息</span><span class="sxs-lookup"><span data-stu-id="10212-260">How BizTalk Server Receives EDI Messages</span></span>](../core/how-biztalk-server-receives-edi-messages.md)