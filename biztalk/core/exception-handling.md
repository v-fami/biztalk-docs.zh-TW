---
title: "例外狀況處理 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 00a9125c-7c7c-4d2a-ae04-c923cd89683c
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 520f4eb47fb98bf497753a8348031f7c2ab93d29
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="exception-handling"></a><span data-ttu-id="5f552-102">例外狀況處理</span><span class="sxs-lookup"><span data-stu-id="5f552-102">Exception Handling</span></span>
<span data-ttu-id="5f552-103">**RuleEngine**類別具有屬性**CompensationHandlerInfo**，其中又包含兩個屬性： **CompensationHandler**和**UserData**.</span><span class="sxs-lookup"><span data-stu-id="5f552-103">The **RuleEngine** class has the property **CompensationHandlerInfo**, which in turn has two properties: **CompensationHandler** and **UserData**.</span></span> <span data-ttu-id="5f552-104">**CompensationHandler**屬性屬於型別**RuleEngineCompensationHandler**，而**UserData**屬性屬於型別**物件**.</span><span class="sxs-lookup"><span data-stu-id="5f552-104">The **CompensationHandler** property is of type **RuleEngineCompensationHandler**, and the **UserData** property is of type **Object**.</span></span> <span data-ttu-id="5f552-105">定義**RuleEngineCompensationHandler**如下所示：</span><span class="sxs-lookup"><span data-stu-id="5f552-105">The definition for the **RuleEngineCompensationHandler** is as follows:</span></span>  
  
```  
public delegate bool RuleEngineCompensationHandler(  
   Exception ex,  
   object userData  
);  
```  
  
 <span data-ttu-id="5f552-106">規則引擎取用者指定處理常式，規則引擎之使用者資料使用**CompensationHandlerInfo**屬性**RuleEngine**類別。</span><span class="sxs-lookup"><span data-stu-id="5f552-106">The rule engine consumer specifies the handler and the user data to the rule engine by using the **CompensationHandlerInfo** property of the **RuleEngine** class.</span></span> <span data-ttu-id="5f552-107">處理常式必須具有相同的簽章**RuleEngineCompensationHandler**委派。</span><span class="sxs-lookup"><span data-stu-id="5f552-107">The handler must have the same signature as the **RuleEngineCompensationHandler** delegate.</span></span> <span data-ttu-id="5f552-108">如果發生執行階段例外狀況，引擎便會呼叫處理常式，並傳遞例外狀況及預先定義的使用者資料做為處理常式的參數。</span><span class="sxs-lookup"><span data-stu-id="5f552-108">If there is a run-time exception, the engine calls the handler and passes the exception and the predefined user data as parameters to the handler.</span></span> <span data-ttu-id="5f552-109">如果處理常式傳回 `true`，則規則引擎會繼續進行處理。</span><span class="sxs-lookup"><span data-stu-id="5f552-109">If the handler returns `true`, then the rule engine continues processing.</span></span> <span data-ttu-id="5f552-110">否則，規則引擎會中止處理，並將原本的例外狀況傳回至使用者。</span><span class="sxs-lookup"><span data-stu-id="5f552-110">Otherwise, the rule engine aborts processing and returns to the user with the original exception.</span></span> <span data-ttu-id="5f552-111">如您所見，只有當您使用叫用原則，您可以使用這個例外狀況處理機制**RuleEngine.Execute**方法。</span><span class="sxs-lookup"><span data-stu-id="5f552-111">As you can see, you can use this exception-handling mechanism only if you invoke the policy by using the **RuleEngine.Execute** method.</span></span>  
  
 <span data-ttu-id="5f552-112">如果您使用**Policy.Execute**方法來執行原則，您必須使用 try catch 區塊來攔截規則引擎執行原則時產生任何例外狀況。</span><span class="sxs-lookup"><span data-stu-id="5f552-112">If you use the **Policy.Execute** method to execute a policy, you will need to use a try-catch block to catch any exceptions generated by the rule engine while executing the policy.</span></span>  
  
 <span data-ttu-id="5f552-113">如果您使用**呼叫規則**圖形以執行原則，請使用**Catch 例外狀況**封鎖**範圍**攔截規則引擎執行時引發的例外狀況的圖形原則。</span><span class="sxs-lookup"><span data-stu-id="5f552-113">If you use the **Call Rules** shape to execute a policy, use the **Catch Exception** block for the **Scope** shape to catch an exception raised by the rule engine while executing the policy.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5f552-114">另請參閱</span><span class="sxs-lookup"><span data-stu-id="5f552-114">See Also</span></span>  
 [<span data-ttu-id="5f552-115">如何新增 Catch 例外狀況區塊</span><span class="sxs-lookup"><span data-stu-id="5f552-115">How to Add a Catch Exception Block</span></span>](../core/how-to-add-a-catch-exception-block3.md)