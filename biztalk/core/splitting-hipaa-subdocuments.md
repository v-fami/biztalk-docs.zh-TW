---
title: "分割 HIPAA 子文件 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 66d9badd-00c6-43a3-807e-0ad313983adc
caps.latest.revision: "21"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 799cb5813b3c13339a0c477bf142a467a91b2c94
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="splitting-hipaa-subdocuments"></a><span data-ttu-id="e7b80-102">分割 HIPAA 子文件</span><span class="sxs-lookup"><span data-stu-id="e7b80-102">Splitting HIPAA Subdocuments</span></span>
<span data-ttu-id="e7b80-103">HIPAA 的 EDI 交換通常會在單一交易集中，使用由 ST/SE 標頭繫結的多重子 (child/sub) 文件。</span><span class="sxs-lookup"><span data-stu-id="e7b80-103">EDI interchanges for HIPAA commonly have multiple child/sub documents within a single transaction set, as bounded by the ST/SE headers.</span></span> <span data-ttu-id="e7b80-104">EDI 接收管線，可支援從該等交易集建立不同的 HIPAA 子文件。</span><span class="sxs-lookup"><span data-stu-id="e7b80-104">The EDI receive pipeline supports creation of separate HIPAA subdocuments from such an transaction set.</span></span> <span data-ttu-id="e7b80-105">這種方式不同於「非 HIPAA EDI 交換」將單一交易集當作單一訊息來處理的方式。</span><span class="sxs-lookup"><span data-stu-id="e7b80-105">This is different from non-HIPAA EDI interchanges, in which a single transaction set is processed as a single message.</span></span>  
  
## <a name="subdocument-splitting-schemas"></a><span data-ttu-id="e7b80-106">子文件分割結構描述</span><span class="sxs-lookup"><span data-stu-id="e7b80-106">Subdocument Splitting Schemas</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="e7b80-107"> 支援透過原生結構描述分割下列 HIPAA 文件類型：</span><span class="sxs-lookup"><span data-stu-id="e7b80-107"> supports splitting of the following HIPAA document types through native schemas:</span></span>  
  
-   <span data-ttu-id="e7b80-108">HIPAA 4010 版文件： 834 Enrollment、 835 Claim Payment 與 837 Claim 的三種變化</span><span class="sxs-lookup"><span data-stu-id="e7b80-108">HIPAA version 4010 documents: 834 Enrollment, 835 Claim Payment and three variants of 837 Claim</span></span>  
  
-   <span data-ttu-id="e7b80-109">HIPAA 5010 版文件： 276/277 Claim Status – 要求與回應、 834 Enrollment 與 837 Claim 的三種變化</span><span class="sxs-lookup"><span data-stu-id="e7b80-109">HIPAA version 5010 documents: 276/277 Claim Status – Request and Response, 834 Enrollment and three variants of 837 Claim</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="e7b80-110"> 會針對上述三種文件類型分別提供兩種版本的結構描述。</span><span class="sxs-lookup"><span data-stu-id="e7b80-110"> provides two versions of schemas for each of these three document types.</span></span> <span data-ttu-id="e7b80-111">對於每一種文件類型，支援分割的結構描述檔名會用 ‘Multiple’ 標記提供識別。</span><span class="sxs-lookup"><span data-stu-id="e7b80-111">For each document type, the schema supporting splitting is identified by the ‘Multiple’ tag in the file name.</span></span> <span data-ttu-id="e7b80-112">其他的結構描述則不支援子文件分割。</span><span class="sxs-lookup"><span data-stu-id="e7b80-112">The other schema does not support subdocument splitting.</span></span>  
  
 <span data-ttu-id="e7b80-113">有些實例可能同時需要使用分割和非分割類型的結構描述。</span><span class="sxs-lookup"><span data-stu-id="e7b80-113">In some scenarios, both splitting and non splitting schemas may be required.</span></span> <span data-ttu-id="e7b80-114">藉由針對其中一個結構描述的變化使用自訂的目標命名空間，就可以同時使用兩種結構描述。</span><span class="sxs-lookup"><span data-stu-id="e7b80-114">This will be supported through the use of a custom target namespace for one variant of the schema.</span></span>  
  
## <a name="how-subdocument-splitting-is-enabled"></a><span data-ttu-id="e7b80-115">分割子文件的啟用方式</span><span class="sxs-lookup"><span data-stu-id="e7b80-115">How Subdocument Splitting Is Enabled</span></span>  
 <span data-ttu-id="e7b80-116">分割 HIPAA 子文件的功能，是透過 HIPAA 結構描述中的三個註解項目啟用。</span><span class="sxs-lookup"><span data-stu-id="e7b80-116">The splitting of HIPAA subdocuments is enabled by three annotation entries in the HIPAA schema.</span></span> <span data-ttu-id="e7b80-117">前兩個是在應用程式資訊註解，必須設定為結構描述的項目**是**:</span><span class="sxs-lookup"><span data-stu-id="e7b80-117">The first two are  entries for the schema in the appinfo annotation, which must be set to **yes**:</span></span>  
  
```  
subdocument_break = "yes" Split_Without_Sibling_Data = "Yes"  
```  
  
 <span data-ttu-id="e7b80-118">第三個註解項目位在 HIPAA 結構描述內的適當記錄層級上。</span><span class="sxs-lookup"><span data-stu-id="e7b80-118">The third annotation entry is located at the appropriate record levels within the HIPAA schema.</span></span> <span data-ttu-id="e7b80-119">這個屬性也必須設定為**是**。</span><span class="sxs-lookup"><span data-stu-id="e7b80-119">This property must also be set to **yes**.</span></span>  
  
```  
subdocument_creation_break = "yes"  
```  
  
 <span data-ttu-id="e7b80-120">只有在 HIPAA 結構描述中的子文件建立分頁註解是設為 "Yes"，以及「輸入批次處理選項」的合作對象屬性是設為「將交換分割為交易集」時，HIPAA 交換才會分割成子文件。</span><span class="sxs-lookup"><span data-stu-id="e7b80-120">A HIPAA interchange will be split into subdocuments only if the subdocument creation break annotation within the HIPAA schema is set to "yes", and the Inbound batch processing option party property is set to "Split Interchange as Transaction Sets".</span></span> <span data-ttu-id="e7b80-121">如果輸入批次處理選項的合作對象屬性是設為「保留交換」，EDI 解譯器就不會將該交換成子文件。</span><span class="sxs-lookup"><span data-stu-id="e7b80-121">If the Inbound batch processing option party property is set to preserve the interchange, the EDI disassembler will not split the interchange into subdocuments.</span></span> <span data-ttu-id="e7b80-122">在這種情況下，EDI 解譯器將會忽略該註解。</span><span class="sxs-lookup"><span data-stu-id="e7b80-122">In this case, the EDI disassembler will ignore the annotation.</span></span> <span data-ttu-id="e7b80-123">發生這種情況時，事件檢視器中並不會發出任何警告。</span><span class="sxs-lookup"><span data-stu-id="e7b80-123">No warning will be raised in the event viewer if this occurs.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e7b80-124">子文件建立分頁註解不能為巢狀。</span><span class="sxs-lookup"><span data-stu-id="e7b80-124">Subdocument creation break annotations cannot be nested.</span></span> <span data-ttu-id="e7b80-125">如果結構描述包含有套用子文件註解的迴圈，該迴圈一定不能包含另一個有套用子文件註解的迴圈。</span><span class="sxs-lookup"><span data-stu-id="e7b80-125">If a schema includes a loop that has a subdocument annotation applied to it, that loop cannot contain another loop that has a subdocument annotation applied to it.</span></span>  
  
## <a name="how-subdocuments-are-processed"></a><span data-ttu-id="e7b80-126">子文件的處理方式</span><span class="sxs-lookup"><span data-stu-id="e7b80-126">How Subdocuments are Processed</span></span>  
 <span data-ttu-id="e7b80-127">EDI 接收管線中的 EDI 解譯器會分割子文件。</span><span class="sxs-lookup"><span data-stu-id="e7b80-127">The EDI disassembler in the EDI receive pipeline splits the subdocuments.</span></span> <span data-ttu-id="e7b80-128">在接收管線驗證內送交換並產生適當的應答後，它會將各個子文件路由到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="e7b80-128">After the receive pipeline validates the incoming interchange and generates the appropriate acknowledgments, it routes each separate subdocument to the MessageBox.</span></span> <span data-ttu-id="e7b80-129">每份子文件在結構上和語法上都是正確的；不過，商務層級摘要、交易集總計和交易集控制編號應該還沒執行同步處理。</span><span class="sxs-lookup"><span data-stu-id="e7b80-129">Each subdocument is structurally and syntactically valid; however, business level summaries, transaction set totals, and transaction set control numbers are expected to be out of synchronization.</span></span> <span data-ttu-id="e7b80-130">傳送管線會將每份子文件之 SE01 中的現有區段計數 (來自原始的交易集)，覆寫成子文件中已包含區段的計數。</span><span class="sxs-lookup"><span data-stu-id="e7b80-130">The send pipeline will overwrite the value of the existing segment count in SE01 of each subdocument (which came from the original transaction set) to the count of included segments in the subdocument.</span></span> <span data-ttu-id="e7b80-131">接收管線會同時重設每份子文件中的交易集控制編號，這樣該子文件就不會出現重複的控制編號。</span><span class="sxs-lookup"><span data-stu-id="e7b80-131">The receive pipeline will also reset the transaction set control numbers in each subdocument so that the subdocument do not have duplicate control numbers.</span></span> <span data-ttu-id="e7b80-132">這樣可確保傳送端處理不會失敗。</span><span class="sxs-lookup"><span data-stu-id="e7b80-132">This ensures that send-side processing will not fail.</span></span>  
  
 <span data-ttu-id="e7b80-133">如果交易集在子文件分割期間未成功執行 EDI 或接續的驗證作業，每個失敗的交易集將進入擱置狀態。</span><span class="sxs-lookup"><span data-stu-id="e7b80-133">If a transaction set fails EDI or extended validation during subdocument splitting, the individual failing transaction set is suspended.</span></span>  
  
 <span data-ttu-id="e7b80-134">訂閱這些子文件的傳送埠將從 MessageBox 接收每份子文件，序列化這些 XML 子文件，批次處理它們 (在啟用情況下)，驗證它們，然後傳送它們。</span><span class="sxs-lookup"><span data-stu-id="e7b80-134">A send port that subscribes to the subdocuments will pick up each subdocument from MessageBox, serialize the XML subdocuments, batch them (if enabled), validate them, and send them.</span></span> <span data-ttu-id="e7b80-135">傳送管線會更新區段資料項目 (SE01) 的計數。</span><span class="sxs-lookup"><span data-stu-id="e7b80-135">The send pipeline updates the count of segments data element (SE01).</span></span>  
  
## <a name="how-subdocuments-are-split"></a><span data-ttu-id="e7b80-136">子文件的分割方式</span><span class="sxs-lookup"><span data-stu-id="e7b80-136">How Subdocuments Are Split</span></span>  
 <span data-ttu-id="e7b80-137">子文件建立分頁註解，通常會套用到包含有 HIPAA 結構描述中一或多個項目的迴圈。</span><span class="sxs-lookup"><span data-stu-id="e7b80-137">A subdocument creation break annotation is commonly applied to a loop that encompasses one or more elements within a HIPAA schema.</span></span> <span data-ttu-id="e7b80-138">在結構描述中該分頁迴圈前後的其他項目，則會複製到各個多重子文件中。</span><span class="sxs-lookup"><span data-stu-id="e7b80-138">Other elements before and after the break loop in the schema are replicated in each of the multiple subdocuments.</span></span>  
  
 <span data-ttu-id="e7b80-139">下表列出子文件分割範例。</span><span class="sxs-lookup"><span data-stu-id="e7b80-139">The following table shows an example of subdocument splitting.</span></span> <span data-ttu-id="e7b80-140">在這個範例中，CC 項目迴圈的子文件建立分頁註解是設成 "Yes"。</span><span class="sxs-lookup"><span data-stu-id="e7b80-140">In this example, the subdocument creation break annotation is set to "yes" for the CC element loop.</span></span> <span data-ttu-id="e7b80-141">這樣一來，在交易集中的 CC 項目會分割成不同的子文件，而該交易集內的 AA、BB 和 DD 項目，則會完整包括到個別子文件中。</span><span class="sxs-lookup"><span data-stu-id="e7b80-141">As a result, the CC elements in the transaction set are separated into separate subdocuments, while the AA, BB, and DD elements in the transaction set are all included in each separate subdocument.</span></span>  
  
|<span data-ttu-id="e7b80-142">結構描述 (最小和最大相符項目)</span><span class="sxs-lookup"><span data-stu-id="e7b80-142">Schema(min and max occurrences)</span></span>|<span data-ttu-id="e7b80-143">原始執行個體</span><span class="sxs-lookup"><span data-stu-id="e7b80-143">Original Instance</span></span>|<span data-ttu-id="e7b80-144">子文件 #1</span><span class="sxs-lookup"><span data-stu-id="e7b80-144">Subdocument #1</span></span>|<span data-ttu-id="e7b80-145">子文件 #2</span><span class="sxs-lookup"><span data-stu-id="e7b80-145">Subdocument #2</span></span>|<span data-ttu-id="e7b80-146">子文件 #3</span><span class="sxs-lookup"><span data-stu-id="e7b80-146">Subdocument #3</span></span>|  
|---------------------------------------|-----------------------|---------------------|---------------------|---------------------|  
|<span data-ttu-id="e7b80-147">ST (1,0)</span><span class="sxs-lookup"><span data-stu-id="e7b80-147">ST (1,0)</span></span>|<span data-ttu-id="e7b80-148">ST</span><span class="sxs-lookup"><span data-stu-id="e7b80-148">ST</span></span>|<span data-ttu-id="e7b80-149">ST</span><span class="sxs-lookup"><span data-stu-id="e7b80-149">ST</span></span>|<span data-ttu-id="e7b80-150">ST</span><span class="sxs-lookup"><span data-stu-id="e7b80-150">ST</span></span>|<span data-ttu-id="e7b80-151">ST</span><span class="sxs-lookup"><span data-stu-id="e7b80-151">ST</span></span>|  
|<span data-ttu-id="e7b80-152">AA (1,1)</span><span class="sxs-lookup"><span data-stu-id="e7b80-152">AA (1,1)</span></span>|<span data-ttu-id="e7b80-153">AA</span><span class="sxs-lookup"><span data-stu-id="e7b80-153">AA</span></span>|<span data-ttu-id="e7b80-154">AA</span><span class="sxs-lookup"><span data-stu-id="e7b80-154">AA</span></span>|<span data-ttu-id="e7b80-155">AA</span><span class="sxs-lookup"><span data-stu-id="e7b80-155">AA</span></span>|<span data-ttu-id="e7b80-156">AA</span><span class="sxs-lookup"><span data-stu-id="e7b80-156">AA</span></span>|  
|<span data-ttu-id="e7b80-157">BB loop (1,n)</span><span class="sxs-lookup"><span data-stu-id="e7b80-157">BB loop (1,n)</span></span><br /><br /> <span data-ttu-id="e7b80-158">BB1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="e7b80-158">BB1 (1,n)</span></span><br /><br /> <span data-ttu-id="e7b80-159">CC loop (1,n) - subdocument_break = "yes"</span><span class="sxs-lookup"><span data-stu-id="e7b80-159">CC loop (1,n) - subdocument_break = "yes"</span></span><br /><br /> <span data-ttu-id="e7b80-160">CC1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="e7b80-160">CC1 (1,n)</span></span><br /><br /> <span data-ttu-id="e7b80-161">CC2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="e7b80-161">CC2 (0,n)</span></span><br /><br /> <span data-ttu-id="e7b80-162">BB2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="e7b80-162">BB2 (0,n)</span></span>|<span data-ttu-id="e7b80-163">BB1*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-163">BB1*1</span></span><br /><br /> <span data-ttu-id="e7b80-164">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-164">CC1\*1</span></span><br /><br /> <span data-ttu-id="e7b80-165">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-165">CC2\*1</span></span><br /><br /> <span data-ttu-id="e7b80-166">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-166">BB2\*1</span></span><br /><br /> <span data-ttu-id="e7b80-167">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="e7b80-167">BB1\*2</span></span><br /><br /> <span data-ttu-id="e7b80-168">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="e7b80-168">CC1\*2</span></span><br /><br /> <span data-ttu-id="e7b80-169">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="e7b80-169">CC2\*2</span></span><br /><br /> <span data-ttu-id="e7b80-170">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="e7b80-170">BB1\*3</span></span><br /><br /> <span data-ttu-id="e7b80-171">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="e7b80-171">CC1\*3</span></span><br /><br /> <span data-ttu-id="e7b80-172">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="e7b80-172">CC2\*3</span></span>|<span data-ttu-id="e7b80-173">BB1*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-173">BB1*1</span></span><br /><br /> <span data-ttu-id="e7b80-174">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-174">CC1\*1</span></span><br /><br /> <span data-ttu-id="e7b80-175">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-175">CC2\*1</span></span><br /><br /> <span data-ttu-id="e7b80-176">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="e7b80-176">BB2\*1</span></span>|<span data-ttu-id="e7b80-177">BB1*2</span><span class="sxs-lookup"><span data-stu-id="e7b80-177">BB1*2</span></span><br /><br /> <span data-ttu-id="e7b80-178">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="e7b80-178">CC1\*2</span></span><br /><br /> <span data-ttu-id="e7b80-179">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="e7b80-179">CC2\*2</span></span>|<span data-ttu-id="e7b80-180">BB1*3</span><span class="sxs-lookup"><span data-stu-id="e7b80-180">BB1*3</span></span><br /><br /> <span data-ttu-id="e7b80-181">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="e7b80-181">CC1\*3</span></span><br /><br /> <span data-ttu-id="e7b80-182">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="e7b80-182">CC2\*3</span></span>|  
|<span data-ttu-id="e7b80-183">DD (0,n)</span><span class="sxs-lookup"><span data-stu-id="e7b80-183">DD (0,n)</span></span>|<span data-ttu-id="e7b80-184">DD</span><span class="sxs-lookup"><span data-stu-id="e7b80-184">DD</span></span>|<span data-ttu-id="e7b80-185">DD</span><span class="sxs-lookup"><span data-stu-id="e7b80-185">DD</span></span>|<span data-ttu-id="e7b80-186">DD</span><span class="sxs-lookup"><span data-stu-id="e7b80-186">DD</span></span>|<span data-ttu-id="e7b80-187">DD</span><span class="sxs-lookup"><span data-stu-id="e7b80-187">DD</span></span>|  
|<span data-ttu-id="e7b80-188">SE</span><span class="sxs-lookup"><span data-stu-id="e7b80-188">SE</span></span>|<span data-ttu-id="e7b80-189">SE</span><span class="sxs-lookup"><span data-stu-id="e7b80-189">SE</span></span>|<span data-ttu-id="e7b80-190">SE</span><span class="sxs-lookup"><span data-stu-id="e7b80-190">SE</span></span>|<span data-ttu-id="e7b80-191">SE</span><span class="sxs-lookup"><span data-stu-id="e7b80-191">SE</span></span>|<span data-ttu-id="e7b80-192">SE</span><span class="sxs-lookup"><span data-stu-id="e7b80-192">SE</span></span>|