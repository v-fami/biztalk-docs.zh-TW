---
title: "如何重新部署 BizTalk 組件從 Visual Studio |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 5c4bb627-48de-4874-bb25-af2c513dbc51
caps.latest.revision: "41"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 361d2bccc783e7bfc7aa6cb0cd1f3eab51d8e640
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-redeploy-a-biztalk-assembly-from-visual-studio"></a><span data-ttu-id="bc31e-102">如何從 Visual Studio 重新部署 BizTalk 組件</span><span class="sxs-lookup"><span data-stu-id="bc31e-102">How to Redeploy a BizTalk Assembly from Visual Studio</span></span>
<span data-ttu-id="bc31e-103">在開發組件的程序中，您通常必須重複進行部署、測試、修改和重新部署。</span><span class="sxs-lookup"><span data-stu-id="bc31e-103">In the process of developing an assembly, you often need to deploy, test, modify, and redeploy it repeatedly.</span></span> <span data-ttu-id="bc31e-104">在舊版的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，如果您想要重新部署組件，而不變更版本號碼，您首先需要以手動方式停止、 取消登錄和解除繫結中的組件中所包含的成品[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]然後再移除的組件BizTalk 管理 （組態） 資料庫。</span><span class="sxs-lookup"><span data-stu-id="bc31e-104">In previous versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], if you wanted to redeploy an assembly without changing the version number, you first needed to manually stop, unenlist, and unbind artifacts contained in the assembly in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and then remove the assembly from the BizTalk Management (configuration) database.</span></span> <span data-ttu-id="bc31e-105">此外之後重新部署組件，, 您需要繫結、 登錄和啟動成品[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bc31e-105">In addition, after redeploying the assembly, you needed to bind, enlist, and start its artifacts in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="bc31e-106">與[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]，不過，當您啟用重新部署 選項[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會自動將所有的步驟，重新部署您的組件。</span><span class="sxs-lookup"><span data-stu-id="bc31e-106">With [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], however, when you enable the Redeploy option in [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically takes all of the steps to redeploy the assembly for you.</span></span> <span data-ttu-id="bc31e-107">雖然可從專案層級重新部署組件 (例如在 [方案總管] 中以滑鼠右鍵按一下專案，然後按一下 [部署])，重新部署個別組件，但強烈建議您一定要從解決方案層級部署組件 (例如以滑鼠右鍵按一下解決方案，然後按一下 [部署])。</span><span class="sxs-lookup"><span data-stu-id="bc31e-107">Although you can redeploy an assembly from the project level (such as by right-clicking the project in Solution Explorer and clicking Deploy) to redeploy an individual assembly, we strongly recommend that you always redeploy assemblies from the solution level (such as by right-clicking the solution and clicking Deploy).</span></span> <span data-ttu-id="bc31e-108">這會立即重新部署解決方案中的所有組件，並在相依性存在時處理所有相關步驟 (稍後說明)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-108">This redeploys all of the assemblies in the solution at once and handles all of the steps involved when there are dependencies, as described later.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="bc31e-109">雖然在少數情況下您可能需要在專案層級重新部署，但通常一定是在解決方案層級重新部署。</span><span class="sxs-lookup"><span data-stu-id="bc31e-109">Although there are rare situations in which you might need to redeploy at the project level, as a rule you should always redeploy at the solution level.</span></span>  
  
 <span data-ttu-id="bc31e-110">重新部署組件時，請牢記下列要點：</span><span class="sxs-lookup"><span data-stu-id="bc31e-110">When redeploying an assembly, bear in mind the following important points:</span></span>  
  
-   <span data-ttu-id="bc31e-111">**您必須在 GAC 中安裝新的組件。**</span><span class="sxs-lookup"><span data-stu-id="bc31e-111">**You must install the new assembly in the GAC.**</span></span> <span data-ttu-id="bc31e-112">當您重新部署組件時，您必須一律安裝新版的組件在 gac、 中所述[如何在 GAC 中安裝組件](../core/how-to-install-an-assembly-in-the-gac.md)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-112">When you redeploy an assembly, you must always install the new version of the assembly in the GAC, as described in [How to Install an Assembly in the GAC](../core/how-to-install-an-assembly-in-the-gac.md).</span></span> <span data-ttu-id="bc31e-113">您可以在重新部署後執行此作業。</span><span class="sxs-lookup"><span data-stu-id="bc31e-113">You can do this after you redeploy it.</span></span>  
  
-   <span data-ttu-id="bc31e-114">**您應該永遠重新部署方案層級相依性時。**</span><span class="sxs-lookup"><span data-stu-id="bc31e-114">**You should always redeploy at the solution level when there are dependencies.**</span></span> <span data-ttu-id="bc31e-115">如果解決方案中有多個組件，而且此解決方案中的一或多個組件相依於要重新部署的組件，則您必須在解決方案層級重新部署組件。</span><span class="sxs-lookup"><span data-stu-id="bc31e-115">If you have multiple assemblies in a solution, and one or more assemblies in the solution has a dependency on the assembly that you want to redeploy, you should redeploy your assemblies at the solution level.</span></span> <span data-ttu-id="bc31e-116">這是因為當您重新部署組件在專案層級[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]將會停止、 取消登錄、 解除繫結，並移除所有成品，是取決於此組件的這個組件相依的所有組件中。</span><span class="sxs-lookup"><span data-stu-id="bc31e-116">This is because when you redeploy an assembly at the project level, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will stop, unenlist, unbind, and remove the artifacts in all assemblies that either depend on this assembly on upon which this assembly depends.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="bc31e-117">不會部署、 繫結、 登錄和啟動成品的其他步驟。</span><span class="sxs-lookup"><span data-stu-id="bc31e-117"> will not take the additional steps to deploy, bind, enlist, and start the artifacts.</span></span> <span data-ttu-id="bc31e-118">當您重新部署整個方案，不過，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]會自動帶解除部署和重新部署所有的相依性為基礎的方案中的成品所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="bc31e-118">When you redeploy the entire solution, however, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically takes the steps required to undeploy and redeploy all of the artifacts in the solution based on their dependencies.</span></span>  
  
-   <span data-ttu-id="bc31e-119">**您可能需要手動重新部署相依組件。**</span><span class="sxs-lookup"><span data-stu-id="bc31e-119">**You may need to manually redeploy dependent assemblies.**</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="bc31e-120">固定會解除部署相依的組件，但在下列情況下，您必須採取其他步驟，部署、 繫結，並且登錄之後重新部署組件所依賴的組件的每個相依組件中的成品：</span><span class="sxs-lookup"><span data-stu-id="bc31e-120"> always undeploys dependent assemblies, but in the following cases, you must take the additional steps to deploy, bind, and enlist the artifacts in each dependent assembly after redeploying the assembly on which the assembly depends:</span></span>  
  
    -   <span data-ttu-id="bc31e-121">如果您在專案層級重新部署組件，而且相同解決方案中的另一個組件相依於此組件。</span><span class="sxs-lookup"><span data-stu-id="bc31e-121">If you redeploy an assembly at the project level and another assembly in the same solution depends on it.</span></span>  
  
    -   <span data-ttu-id="bc31e-122">如果您在解決方案層級重新部署組件，但不同解決方案中存在相依組件。</span><span class="sxs-lookup"><span data-stu-id="bc31e-122">If you redeploy an assembly at the solution level, but a dependent assembly exists in a different solution.</span></span>  
  
     <span data-ttu-id="bc31e-123">例如，如果您只要重新部署下圖中的「組件 3」，在重新部署後，您還必須部署「組件 2」的成品、將其繫結和登錄，接著部署「組件 1」的成品、將其繫結和登錄。</span><span class="sxs-lookup"><span data-stu-id="bc31e-123">For example, if you were to redeploy only Assembly 3 shown in the following diagram, following redeployment you would need to deploy, bind, and enlist the artifacts in Assembly 2, and then deploy, bind, and enlist the artifacts in Assembly 1.</span></span>  
  
     <span data-ttu-id="bc31e-124">![具有相依性的組件](../core/media/assemblydependencies.gif "AssemblyDependencies")</span><span class="sxs-lookup"><span data-stu-id="bc31e-124">![Assemblies with dependencies](../core/media/assemblydependencies.gif "AssemblyDependencies")</span></span>  
  
     <span data-ttu-id="bc31e-125">另一個方法是為了避免不必要的部署中未變更的核心組件。</span><span class="sxs-lookup"><span data-stu-id="bc31e-125">An alternative approach is to avoid unnecessary deployment of core assemblies that have not changed.</span></span>  <span data-ttu-id="bc31e-126">例如在上圖中，如果沒有其他相依於組件 2 和 3 的組件及兩者皆非的這些組件的組件已更新。</span><span class="sxs-lookup"><span data-stu-id="bc31e-126">For example in the diagram above, if there are other assemblies that depend on Assembly 2 and Assembly 3 and neither of these assemblies have been updated.</span></span>  <span data-ttu-id="bc31e-127">取消核取**部署**configuration manager 中的組件 2 和 3 的組件專案中的選項。</span><span class="sxs-lookup"><span data-stu-id="bc31e-127">Uncheck the **Deploy** option in configuration manager for the Assembly 2 and the Assembly 3 projects.</span></span> <span data-ttu-id="bc31e-128">這種方式取決於它們的外部組件不會解除部署需要重新部署。</span><span class="sxs-lookup"><span data-stu-id="bc31e-128">This way external assemblies that depended on them will not be undeployed requiring redeployment.</span></span> <span data-ttu-id="bc31e-129">如需詳細資訊，請參閱[如何在 Visual Studio 中設定部署屬性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-129">For more information, see [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span>  
  
-   <span data-ttu-id="bc31e-130">**您必須重新啟動主控件執行個體。**</span><span class="sxs-lookup"><span data-stu-id="bc31e-130">**You must restart host instances.**</span></span> <span data-ttu-id="bc31e-131">當您重新部署包含協調流程的組件而不變更組件版本號碼時，BizTalk 管理資料庫中的現有組件會遭到覆寫。</span><span class="sxs-lookup"><span data-stu-id="bc31e-131">When you redeploy an assembly that contains an orchestration without changing the assembly version number, the existing assembly is overwritten in the BizTalk Management database.</span></span> <span data-ttu-id="bc31e-132">不過，在變更生效之前，您必須重新啟動協調流程所繫結之主控件的每個主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="bc31e-132">Before the change will take effect, however, you must restart each host instance of the host to which the orchestration is bound.</span></span> <span data-ttu-id="bc31e-133">您可以指定選項，在重新部署組件時，自動重新啟動本機電腦上的所有主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="bc31e-133">You can specify the option that all host instances on the local computer restart automatically when you redeploy an assembly.</span></span> <span data-ttu-id="bc31e-134">如需指示，請參閱[如何在 Visual Studio 中設定部署屬性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-134">For instructions, see [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="bc31e-135">您也可以手動停止並啟動中所述的每個主控件執行個體，[如何停止主控件執行個體](../core/how-to-stop-a-host-instance.md)和[如何啟動主控件執行個體](../core/how-to-start-a-host-instance.md)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-135">You can also manually stop and start each host instance, as described in [How to Stop a Host Instance](../core/how-to-stop-a-host-instance.md) and [How to Start a Host Instance](../core/how-to-start-a-host-instance.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="bc31e-136">因為 [重新部署] 選項會略過版本控制，因此建議只在開發期間使用。</span><span class="sxs-lookup"><span data-stu-id="bc31e-136">Because the Redeploy option bypasses version control, we recommend that you use it only during development.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="bc31e-137">必要條件</span><span class="sxs-lookup"><span data-stu-id="bc31e-137">Prerequisites</span></span>  
 <span data-ttu-id="bc31e-138">若要執行這個主題中的程序，您必須使用「[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 系統管理員」群組成員的帳戶登入。</span><span class="sxs-lookup"><span data-stu-id="bc31e-138">To perform the procedure in this topic, you must be logged on with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="bc31e-139">此外，您的帳戶也必須有本機檔案系統和全域組件快取 (GAC) 的讀取/寫入權限。</span><span class="sxs-lookup"><span data-stu-id="bc31e-139">In addition, your account must have Read/Write permissions on the local file system and the global assembly cache (GAC).</span></span> <span data-ttu-id="bc31e-140">本機電腦上的「系統管理員」帳戶具有這些權限。</span><span class="sxs-lookup"><span data-stu-id="bc31e-140">The Administrators account on the local computer has these permissions.</span></span>  
  
## <a name="to-redeploy-a-biztalk-solution"></a><span data-ttu-id="bc31e-141">若要重新部署 BizTalk 解決方案</span><span class="sxs-lookup"><span data-stu-id="bc31e-141">To redeploy a BizTalk solution</span></span>  
  
#### <a name="using-visual-studio-solution-explorer"></a><span data-ttu-id="bc31e-142">使用 Visual Studio 方案總管</span><span class="sxs-lookup"><span data-stu-id="bc31e-142">Using Visual Studio Solution Explorer</span></span>  
  
1.  <span data-ttu-id="bc31e-143">請確定重新部署 選項已啟用在方案中，每個專案的部署屬性中所述[如何在 Visual Studio 中設定部署屬性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-143">Ensure that the Redeploy option is enabled in Deployment properties for each project in the solution, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="bc31e-144">此選項預設為啟用。</span><span class="sxs-lookup"><span data-stu-id="bc31e-144">This option is enabled by default.</span></span>  
  
2.  <span data-ttu-id="bc31e-145">在[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]方案總管 中，以滑鼠右鍵按一下 BizTalk 解決方案，然後**部署**。</span><span class="sxs-lookup"><span data-stu-id="bc31e-145">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] Solution Explorer, right-click a BizTalk solution, and then click **Deploy**.</span></span>  
  
     <span data-ttu-id="bc31e-146">解決方案中的組件隨即部署到指定的 BizTalk 應用程式中。</span><span class="sxs-lookup"><span data-stu-id="bc31e-146">The assemblies in the solution are deployed into the specified BizTalk application.</span></span> <span data-ttu-id="bc31e-147">建置和部署程序的狀態會顯示在頁面左下角。</span><span class="sxs-lookup"><span data-stu-id="bc31e-147">The status of the build and deployment process displays in the lower left corner of the page.</span></span>  
  
#### <a name="using-the-visual-studio-command-prompt"></a><span data-ttu-id="bc31e-148">使用 Visual Studio 命令提示字元</span><span class="sxs-lookup"><span data-stu-id="bc31e-148">Using the Visual Studio command prompt</span></span>  
  
1.  <span data-ttu-id="bc31e-149">請確定重新部署 選項已啟用在方案中，每個專案的部署屬性中所述[如何在 Visual Studio 中設定部署屬性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="bc31e-149">Ensure that the Redeploy option is enabled in Deployment properties for each project in the solution, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="bc31e-150">此選項預設為啟用。</span><span class="sxs-lookup"><span data-stu-id="bc31e-150">This option is enabled by default.</span></span>  
  
2.  <span data-ttu-id="bc31e-151">啟動**Visual Studio 命令提示字元**。</span><span class="sxs-lookup"><span data-stu-id="bc31e-151">Start **Visual Studio Command Prompt**.</span></span>  
  
3.  <span data-ttu-id="bc31e-152">輸入下列命令，並以適當的值替代，如下表所述：</span><span class="sxs-lookup"><span data-stu-id="bc31e-152">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
     <span data-ttu-id="bc31e-153">**devenv / 部署***SolnConfigName* *SolutionName* </span><span class="sxs-lookup"><span data-stu-id="bc31e-153">**devenv /deploy**  *SolnConfigName* *SolutionName*</span></span>  
  
     <span data-ttu-id="bc31e-154">範例：</span><span class="sxs-lookup"><span data-stu-id="bc31e-154">Example:</span></span>  
  
     <span data-ttu-id="bc31e-155">**devenv / 部署發行"C:\Documents 和 Settings\someuser\My Documents\Visual Studio\Projects\MySolution\MySolution.sln"**</span><span class="sxs-lookup"><span data-stu-id="bc31e-155">**devenv /deploy Release "C:\Documents and Settings\someuser\My Documents\Visual Studio\Projects\MySolution\MySolution.sln"**</span></span>  
  
    |<span data-ttu-id="bc31e-156">參數</span><span class="sxs-lookup"><span data-stu-id="bc31e-156">Parameter</span></span>|<span data-ttu-id="bc31e-157">值</span><span class="sxs-lookup"><span data-stu-id="bc31e-157">Value</span></span>|  
    |---------------|-----------|  
    |<span data-ttu-id="bc31e-158">**/ 部署**</span><span class="sxs-lookup"><span data-stu-id="bc31e-158">**/deploy**</span></span>|<span data-ttu-id="bc31e-159">在建置或重建後部署解決方案。</span><span class="sxs-lookup"><span data-stu-id="bc31e-159">Deploys a solution after a build or rebuild.</span></span>|  
    |<span data-ttu-id="bc31e-160">*SolnConfigName*</span><span class="sxs-lookup"><span data-stu-id="bc31e-160">*SolnConfigName*</span></span>|<span data-ttu-id="bc31e-161">解決方案組態名稱，用來建置在 SolutionName 中命名的解決方案。</span><span class="sxs-lookup"><span data-stu-id="bc31e-161">Name of the solution configuration that will be used to build the solution named in SolutionName.</span></span>|  
    |<span data-ttu-id="bc31e-162">*SolutionName*</span><span class="sxs-lookup"><span data-stu-id="bc31e-162">*SolutionName*</span></span>|<span data-ttu-id="bc31e-163">解決方案檔案的完整路徑和名稱。</span><span class="sxs-lookup"><span data-stu-id="bc31e-163">Full path and name of the solution file.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="bc31e-164">另請參閱</span><span class="sxs-lookup"><span data-stu-id="bc31e-164">See Also</span></span>  
 [<span data-ttu-id="bc31e-165">部署 BizTalk 組件從 Visual Studio 到 BizTalk 應用程式</span><span class="sxs-lookup"><span data-stu-id="bc31e-165">Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application</span></span>](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md)