---
title: 如何匯入原則 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- policies, requirements
- importing, policies
- policies, importing
- managing [policies], importing
ms.assetid: 92f6ef18-279f-416d-b13e-8b9642539d27
caps.latest.revision: 29
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c70038d23dc43a865a5fe30d80543f0d1a47149a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "37000295"
---
# <a name="how-to-import-a-policy"></a><span data-ttu-id="59a87-102">如何匯入原則</span><span class="sxs-lookup"><span data-stu-id="59a87-102">How to Import a Policy</span></span>
<span data-ttu-id="59a87-103">本主題描述如何使用 [BizTalk Server 管理] 主控台將原則匯入到 BizTalk 群組，或是使用 BTSTask 命令列工具將原則匯入到 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a87-103">This topic describes how to use the BizTalk Server Administration console to import a policy into a BizTalk group or the BTSTask command-line tool to import a policy into a BizTalk application.</span></span>  
  
 <span data-ttu-id="59a87-104">您可以使用 「 商務規則編輯器 」 中，建立原則，如中所述[使用商務規則編輯器建立商務規則](../core/creating-business-rules-using-the-business-rule-composer.md)，並將它匯入直接或中所述，您可以從另一個 BizTalk 群組，匯出原則[如何匯出原則](../core/how-to-export-a-policy.md)然後再將它匯入。</span><span class="sxs-lookup"><span data-stu-id="59a87-104">You can create a policy by using the Business Rule Composer, as described in [Creating Business Rules Using the Business Rule Composer](../core/creating-business-rules-using-the-business-rule-composer.md), and then import it directly, or you can export a policy from another BizTalk group, as described in [How to Export a Policy](../core/how-to-export-a-policy.md) and then import it.</span></span>  
  
 <span data-ttu-id="59a87-105">匯入原則會將它登錄在 BizTalk 群組的「規則引擎」資料庫中。</span><span class="sxs-lookup"><span data-stu-id="59a87-105">Importing a policy registers it in the Rule Engine database for the BizTalk group.</span></span> <span data-ttu-id="59a87-106">在您匯入原則之後，可以在 [BizTalk Server 管理] 主控台中檢視它。</span><span class="sxs-lookup"><span data-stu-id="59a87-106">After you import the policy, you can view it in the BizTalk Server Administration console.</span></span> <span data-ttu-id="59a87-107">如果您使用 [BizTalk Server 管理主控台來匯入原則時，它會顯示在\<所有成品\>BizTalk 群組] 節點。</span><span class="sxs-lookup"><span data-stu-id="59a87-107">If you use the BizTalk Server Administration console to import a policy, it will display in the \<All Artifacts\> node for the BizTalk group.</span></span> <span data-ttu-id="59a87-108">然後，您可以發佈它，使其可以將它新增至 BizTalk 應用程式中所述[如何發佈原則](../core/how-to-publish-a-policy.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-108">You can then publish it to make it available to add it to a BizTalk application, as described in [How to Publish a Policy](../core/how-to-publish-a-policy.md).</span></span> <span data-ttu-id="59a87-109">如果您使用 BTSTask 命令列工具來匯入原則，將會自動發佈該原則，而且它會顯示在匯入所在之應用程式的原則資料夾內。</span><span class="sxs-lookup"><span data-stu-id="59a87-109">If you use the BTSTask command-line tool to import a policy, the policy will be automatically published and will display in the Policies folder of the application into which you imported it.</span></span>  
  
 <span data-ttu-id="59a87-110">匯入原則時，請牢記下列要點：</span><span class="sxs-lookup"><span data-stu-id="59a87-110">When importing a policy, bear in mind the following important points:</span></span>  
  
- <span data-ttu-id="59a87-111">即使您指定了要以匯入的原則覆寫現有原則的選項，您還是無法匯入此群組的規則引擎資料庫中已經存在且已經部署的原則。</span><span class="sxs-lookup"><span data-stu-id="59a87-111">Even if you specify the option to overwrite an existing policy with the imported policy, you cannot import a policy that already exists in the Rule Engine database for the group and has been deployed.</span></span> <span data-ttu-id="59a87-112">在此情況下，匯入作業會失敗。</span><span class="sxs-lookup"><span data-stu-id="59a87-112">The import operation will fail.</span></span>  
  
- <span data-ttu-id="59a87-113">即使當從另一個 BizTalk 群組匯出此原則時，它是已部署的狀態，但是將它匯入時，它就會變成解除部署的狀態。</span><span class="sxs-lookup"><span data-stu-id="59a87-113">Even if the policy was in a deployed state when exported from another BizTalk group, it will be in an undeployed state when imported.</span></span>  
  
- <span data-ttu-id="59a87-114">BTSTask 沒有提供匯入原則的特定命令，不過您可以使用 BTSTask 的 ExportApp 命令來選擇只匯出應用程式中所需要的原則，而不包括其他的應用程式成品。</span><span class="sxs-lookup"><span data-stu-id="59a87-114">BTSTask does not provide a specific command for importing policies; however you can use the ExportApp command of BTSTask to selectively export only the policies in an application that you want, including no other application artifacts.</span></span> <span data-ttu-id="59a87-115">然後，您可以使用 ImportApp 命令將 .msi 檔案匯入到不同 BizTalk 群組的應用程式中。</span><span class="sxs-lookup"><span data-stu-id="59a87-115">Then you can use the ImportApp command to import the .msi file into an application in a different BizTalk group.</span></span> <span data-ttu-id="59a87-116">這就是本主題所描述的方法。</span><span class="sxs-lookup"><span data-stu-id="59a87-116">This is the approach described in this topic.</span></span> <span data-ttu-id="59a87-117">當您進行這項處理時，此原則會自動匯入，並在 BizTalk 群組中發佈，然後新增至指定的應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a87-117">When you do this, the policy is automatically imported and published in the BizTalk group and added to the specified application.</span></span>  
  
  <span data-ttu-id="59a87-118">如需使用原則的詳細資訊，請參閱[管理的原則](../core/managing-policies.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-118">For more information about working with policies, see [Managing Policies](../core/managing-policies.md).</span></span> <span data-ttu-id="59a87-119">如需新增原則至應用程式的最佳作法，請參閱[部署 BizTalk 應用程式的最佳作法](../core/best-practices-for-deploying-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-119">For best practices on adding policies to applications, see [Best Practices for Deploying a BizTalk Application](../core/best-practices-for-deploying-a-biztalk-application.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="59a87-120">方案開發人員可以建立原則，然後將它們到規則引擎資料庫中的群組使用 「 規則引擎部署精靈 」 中所述[如何部署和解除部署原則和詞彙](../core/how-to-deploy-and-undeploy-policies-and-vocabularies.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-120">The solution developer can create policies and then import them into the Rule Engine database for the group by using the Rule Engine Deployment Wizard, as described in [How to Deploy and Undeploy Policies and Vocabularies](../core/how-to-deploy-and-undeploy-policies-and-vocabularies.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="59a87-121">必要條件</span><span class="sxs-lookup"><span data-stu-id="59a87-121">Prerequisites</span></span>  
 <span data-ttu-id="59a87-122">下列是執行本主題所述程序的必要條件：</span><span class="sxs-lookup"><span data-stu-id="59a87-122">The following are prerequisites for performing the procedures in this topic:</span></span>  
  
-   <span data-ttu-id="59a87-123">您必須以 BizTalk Server Administrators 群組成員的帳戶登入。</span><span class="sxs-lookup"><span data-stu-id="59a87-123">You must be logged on with an account that is a member of the BizTalk Server Administrators group.</span></span> <span data-ttu-id="59a87-124">如需詳細的權限的詳細資訊，請參閱[部署和管理 BizTalk 應用程式所需的權限](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-124">For more detailed information on permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md).</span></span>  
  
-   <span data-ttu-id="59a87-125">必須安裝「商務規則引擎」。</span><span class="sxs-lookup"><span data-stu-id="59a87-125">The Business Rule Engine must be installed.</span></span> <span data-ttu-id="59a87-126">如需詳細資訊，請參閱 < [BizTalk Server 2013 和 2013 R2 的安裝概觀](http://msdn.microsoft.com/library/8041926c-cfc9-4eaf-9c28-a2c6e8015bc5)。</span><span class="sxs-lookup"><span data-stu-id="59a87-126">For more information, see [Installation Overview for BizTalk Server 2013 and 2013 R2](http://msdn.microsoft.com/library/8041926c-cfc9-4eaf-9c28-a2c6e8015bc5).</span></span>  
  
-   <span data-ttu-id="59a87-127">如果您想要使用 [BizTalk Server 管理] 主控台來匯入原則，您必須有一個可用的 .xml 檔案，且其中包含您想要匯入的原則。</span><span class="sxs-lookup"><span data-stu-id="59a87-127">If you want to use the BizTalk Server Administration console to import a policy, you must have available an .xml file containing the policy that you want to import.</span></span> <span data-ttu-id="59a87-128">您可以產生這類.xml 檔案來自另一個 BizTalk 群組或應用程式，匯出原則中所述[如何匯出原則](../core/how-to-export-a-policy.md)，或藉由使用 「 商務規則編輯器 」 中，如下所示[如何匯入和匯出原則和詞彙](../core/how-to-import-and-export-policies-and-vocabularies.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-128">You can generate such an .xml file by exporting a policy from another BizTalk group or application, as described in [How to Export a Policy](../core/how-to-export-a-policy.md), or by using the Business Rule Composer, as described in [How to Import and Export Policies and Vocabularies](../core/how-to-import-and-export-policies-and-vocabularies.md).</span></span>  
  
-   <span data-ttu-id="59a87-129">如果您想要使用 BTSTask 來匯入原則，您必須有一個 .msi 檔案，且其中包含您想要匯入的原則。</span><span class="sxs-lookup"><span data-stu-id="59a87-129">If you want to use BTSTask to import a policy, you must have an .msi file containing the policy to import.</span></span> <span data-ttu-id="59a87-130">如需相關指示，請參閱 <<c0> [ 如何匯出原則](../core/how-to-export-a-policy.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-130">For instructions, see [How to Export a Policy](../core/how-to-export-a-policy.md).</span></span>  
  
## <a name="to-import-a-policy"></a><span data-ttu-id="59a87-131">匯入原則</span><span class="sxs-lookup"><span data-stu-id="59a87-131">To import a policy</span></span>  
  
#### <a name="using-the-biztalk-server-administration-console"></a><span data-ttu-id="59a87-132">使用 BizTalk Server 管理主控台</span><span class="sxs-lookup"><span data-stu-id="59a87-132">Using the BizTalk Server Administration console</span></span>  
  
1. <span data-ttu-id="59a87-133">按一下 **開始**，按一下**所有程式**，按一下  [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]，然後按一下**BizTalk Server 管理**。</span><span class="sxs-lookup"><span data-stu-id="59a87-133">Click **Start**, click **All Programs**, click [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2. <span data-ttu-id="59a87-134">在主控台樹狀目錄中，依序展開[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，展開要匯入原則，請展開 BizTalk 群組**應用程式**，然後展開**\<所有成品\>**.</span><span class="sxs-lookup"><span data-stu-id="59a87-134">In the console tree, expand [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expand the BizTalk group into which you want to import the policy, expand **Applications**, and then expand **\<All Artifacts\>**.</span></span>  
  
3. <span data-ttu-id="59a87-135">以滑鼠右鍵按一下**原則**，然後按一下**匯入**。</span><span class="sxs-lookup"><span data-stu-id="59a87-135">Right-click **Policies**, and then click **Import**.</span></span>  
  
4. <span data-ttu-id="59a87-136">瀏覽至包含原則，然後按一下的.xml 檔案**開啟**。</span><span class="sxs-lookup"><span data-stu-id="59a87-136">Browse to the .xml file containing the policy and click **Open**.</span></span>  
  
    <span data-ttu-id="59a87-137">原則匯入群組，並顯示在**原則**的資料夾**\<所有成品\>**。</span><span class="sxs-lookup"><span data-stu-id="59a87-137">The policy is imported into the group and displays in the **Policies** folder of **\<All Artifacts\>**.</span></span>  
  
#### <a name="using-the-command-line"></a><span data-ttu-id="59a87-138">使用命令列</span><span class="sxs-lookup"><span data-stu-id="59a87-138">Using the command line</span></span>  
  
1. <span data-ttu-id="59a87-139">開啟命令提示字元，如下所示： 按一下**開始**，按一下**執行**，型別`cmd`，然後按一下 **確定**。</span><span class="sxs-lookup"><span data-stu-id="59a87-139">Open a command prompt as follows: Click **Start**, click **Run**, type `cmd`, and then click **OK**.</span></span>  
  
2. <span data-ttu-id="59a87-140">輸入下列命令，並以適當的值替代，如下表所述：</span><span class="sxs-lookup"><span data-stu-id="59a87-140">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
    <span data-ttu-id="59a87-141">**BTSTask 的 ImportApp /Package:** *值*[**/ApplicationName:**<em>值</em>] [**/覆寫**] [**/伺服器：**<em>值</em>] [**/database:**<em>值</em>]</span><span class="sxs-lookup"><span data-stu-id="59a87-141">**BTSTask ImportApp /Package:** *value* [**/ApplicationName:**<em>value</em>] [**/Overwrite**] [**/Server:**<em>value</em>] [**/Database:**<em>value</em>]</span></span>  
  
    <span data-ttu-id="59a87-142">範例</span><span class="sxs-lookup"><span data-stu-id="59a87-142">Example:</span></span>  
  
    <span data-ttu-id="59a87-143">**BTSTask 的 ImportApp /Package:"C:\MSI Files\MyApplication.msi"/Environment:Test /applicationname: myapplication / 覆寫**</span><span class="sxs-lookup"><span data-stu-id="59a87-143">**BTSTask ImportApp /Package:"C:\MSI Files\MyApplication.msi"  /Environment:Test /ApplicationName:MyApplication /Overwrite**</span></span>  
  
   |<span data-ttu-id="59a87-144">參數</span><span class="sxs-lookup"><span data-stu-id="59a87-144">Parameter</span></span>|<span data-ttu-id="59a87-145">ReplTest1</span><span class="sxs-lookup"><span data-stu-id="59a87-145">Value</span></span>|  
   |---------------|-----------|  
   |<span data-ttu-id="59a87-146">**/ 套件**</span><span class="sxs-lookup"><span data-stu-id="59a87-146">**/Package**</span></span>|<span data-ttu-id="59a87-147">包含要匯入之原則的 .msi 檔案的完整路徑。</span><span class="sxs-lookup"><span data-stu-id="59a87-147">Full path of the .msi file containing the policy to import.</span></span> <span data-ttu-id="59a87-148">如果路徑包含空格，您必須將它括在引號 (") 中。</span><span class="sxs-lookup"><span data-stu-id="59a87-148">If the path includes spaces, you must enclose it in quotation marks (").</span></span>|  
   |<span data-ttu-id="59a87-149">**/ 應用程式名稱**</span><span class="sxs-lookup"><span data-stu-id="59a87-149">**/ApplicationName**</span></span>|<span data-ttu-id="59a87-150">要將原則匯入其中的 BizTalk 應用程式名稱。</span><span class="sxs-lookup"><span data-stu-id="59a87-150">Name of the BizTalk application into which to import the policy.</span></span> <span data-ttu-id="59a87-151">如果沒有指定，將會使用匯入 .msi 檔案時指定的應用程式名稱。</span><span class="sxs-lookup"><span data-stu-id="59a87-151">If not specified, the application name that was specified when exporting the .msi file is used.</span></span> <span data-ttu-id="59a87-152">如果指定的應用程式不存在，則會建立該應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a87-152">If the specified application does not exist, it will be created.</span></span> <span data-ttu-id="59a87-153">包含空格的應用程式名稱必須以雙引號 (") 圍住。</span><span class="sxs-lookup"><span data-stu-id="59a87-153">Application names that include spaces must be enclosed with double quotation marks (").</span></span>|  
   |<span data-ttu-id="59a87-154">**/ 覆寫**</span><span class="sxs-lookup"><span data-stu-id="59a87-154">**/Overwrite**</span></span>|<span data-ttu-id="59a87-155">以 .msi 檔案中具有相同名稱和版本號碼的成品來覆寫應用程式中之原則的選項。</span><span class="sxs-lookup"><span data-stu-id="59a87-155">Option to overwrite policies in the application with artifacts in the .msi file that have the same name and version number.</span></span> <span data-ttu-id="59a87-156">若未指定此選項，且應用程式中有一或多個原則與 .msi 檔案中的原則具有相同的名稱和版本號碼，匯入就會失敗。</span><span class="sxs-lookup"><span data-stu-id="59a87-156">If this option is not specified, and there are one or more policies in the application that have the same name and version number as policies in the .msi file, the import fails.</span></span> <span data-ttu-id="59a87-157">您也可以使用應用程式中檢視的名稱和版本號碼的原則[ListApp 命令](../core/listapp-command.md)。</span><span class="sxs-lookup"><span data-stu-id="59a87-157">You can view the name and version number of the policies in an application by using the [ListApp Command](../core/listapp-command.md).</span></span>|  
   |<span data-ttu-id="59a87-158">**/ 伺服器**</span><span class="sxs-lookup"><span data-stu-id="59a87-158">**/Server**</span></span>|<span data-ttu-id="59a87-159">裝載 BizTalk 管理資料庫之 SQL Server 執行個體的名稱，其格式為：伺服器名稱\執行個體名稱,連接埠。</span><span class="sxs-lookup"><span data-stu-id="59a87-159">Name of the SQL Server instance hosting the BizTalk Management database, in the form ServerName\InstanceName,Port.</span></span><br /><br /> <span data-ttu-id="59a87-160">只有在執行個體名稱和伺服器名稱不同時，才需要執行個體名稱。</span><span class="sxs-lookup"><span data-stu-id="59a87-160">Instance name is only required when the instance name is different than the server name.</span></span> <span data-ttu-id="59a87-161">只有在 SQL Server 使用預設值 (1433) 以外的連接埠編號時，才需要連接埠。</span><span class="sxs-lookup"><span data-stu-id="59a87-161">Port is only required when SQL Server uses a port number other than the default (1433).</span></span><br /><br /> <span data-ttu-id="59a87-162">範例:</span><span class="sxs-lookup"><span data-stu-id="59a87-162">Examples:</span></span><br /><br /> <span data-ttu-id="59a87-163">Server=MyServer</span><span class="sxs-lookup"><span data-stu-id="59a87-163">Server=MyServer</span></span><br /><br /> <span data-ttu-id="59a87-164">Server=MyServer\MySQLServer,1533</span><span class="sxs-lookup"><span data-stu-id="59a87-164">Server=MyServer\MySQLServer,1533</span></span><br /><br /> <span data-ttu-id="59a87-165">如果不提供，將會使用在本機電腦上執行的 SQL Server 執行個體的名稱。</span><span class="sxs-lookup"><span data-stu-id="59a87-165">If not provided, the name of the SQL Server instance running on the local computer is used.</span></span>|  
   |<span data-ttu-id="59a87-166">**/ 資料庫**</span><span class="sxs-lookup"><span data-stu-id="59a87-166">**/Database**</span></span>|<span data-ttu-id="59a87-167">BizTalk 管理資料庫的名稱。</span><span class="sxs-lookup"><span data-stu-id="59a87-167">Name of the BizTalk Management database.</span></span> <span data-ttu-id="59a87-168">如果沒有指定，將會使用在 SQL Server 本機執行個體中執行的 BizTalk 管理資料庫。</span><span class="sxs-lookup"><span data-stu-id="59a87-168">If not specified, the BizTalk Management database running in the local instance of SQL Server is used.</span></span>|  
  
   > [!NOTE]
   >  <span data-ttu-id="59a87-169">在支援 [使用者帳戶控制] \(UAC) 的系統上，您必須以系統管理權限執行此工具。</span><span class="sxs-lookup"><span data-stu-id="59a87-169">On a system that supports User Account Control (UAC), you may need to run the tool with Administrative privileges.</span></span> <span data-ttu-id="59a87-170">若要這樣做，以滑鼠右鍵按一下 應用程式，然後按**系統管理員身分執行**。</span><span class="sxs-lookup"><span data-stu-id="59a87-170">To do this, right-click the application, and then select **Run as administrator**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="59a87-171">另請參閱</span><span class="sxs-lookup"><span data-stu-id="59a87-171">See Also</span></span>  
 <span data-ttu-id="59a87-172">[匯入 BizTalk 應用程式、 繫結和原則](../core/importing-biztalk-applications-bindings-and-policies.md) </span><span class="sxs-lookup"><span data-stu-id="59a87-172">[Importing BizTalk Applications, Bindings, and Policies](../core/importing-biztalk-applications-bindings-and-policies.md) </span></span>  
 <span data-ttu-id="59a87-173">[匯出 BizTalk 應用程式、 繫結和原則](../core/exporting-biztalk-applications-bindings-and-policies.md) </span><span class="sxs-lookup"><span data-stu-id="59a87-173">[Exporting BizTalk Applications, Bindings, and Policies](../core/exporting-biztalk-applications-bindings-and-policies.md) </span></span>  
 [<span data-ttu-id="59a87-174">管理原則</span><span class="sxs-lookup"><span data-stu-id="59a87-174">Managing Policies</span></span>](../core/managing-policies.md)