---
title: "Web 服務的使用時的考量 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: ea7038dc-4740-4c0a-b6a1-08bc22f42bc2
caps.latest.revision: "31"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0c5cbef60d968119950b6c426a45c94d2e9ab60a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="considerations-when-consuming-web-services"></a><span data-ttu-id="b4ce8-102">使用 Web 服務的考量</span><span class="sxs-lookup"><span data-stu-id="b4ce8-102">Considerations When Consuming Web Services</span></span>
<span data-ttu-id="b4ce8-103">本節提供您使用 Web 服務時應該納入考量的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-103">This section provides information that you should take into consideration when consuming Web services.</span></span>  
  
## <a name="using-two-underscore-characters-in-a-parameter-name"></a><span data-ttu-id="b4ce8-104">在參數名稱中使用兩個底線字元</span><span class="sxs-lookup"><span data-stu-id="b4ce8-104">Using two underscore characters in a parameter name</span></span>  
 <span data-ttu-id="b4ce8-105">Web 方法的參數名稱不可以 "__" (兩個底線字元) 作為開頭。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-105">Parameter names for Web methods cannot begin with "__" (two underscore characters).</span></span> <span data-ttu-id="b4ce8-106">以兩個底線字元作為開頭的名稱可能會建立無法為 XLANG/s 所支援 (亦即無法使用) 的 Web 訊息部分。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-106">Names that begin with two underscore characters may create Web message parts that are unsupported (unusable) by XLANG/s.</span></span>  
  
## <a name="the-any-element-and-the-anyattribute-attributes-are-not-supported-in-web-methods"></a><span data-ttu-id="b4ce8-107">Web 方法不支援 any 項目與 anyAttribute 屬性</span><span class="sxs-lookup"><span data-stu-id="b4ce8-107">The any element and the anyAttribute attributes are not supported in Web methods</span></span>  
 <span data-ttu-id="b4ce8-108">您無法使用**任何**項目或**anyAttribute** Web 方法的結構描述中的屬性。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-108">You cannot use the **any** element or **anyAttribute** attribute in the schema for a Web method.</span></span>  
  
## <a name="using-xlangs-keywords"></a><span data-ttu-id="b4ce8-109">使用 XLANG/s 關鍵字</span><span class="sxs-lookup"><span data-stu-id="b4ce8-109">Using XLANG/s keywords</span></span>  
 <span data-ttu-id="b4ce8-110">Web 服務名稱或 Web 方法名稱不能是 XLANG/s 中的關鍵字。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-110">A Web service name or a Web method name cannot be a keyword in an XLANG/s.</span></span> <span data-ttu-id="b4ce8-111">如果在 Web 服務名稱或是 Web 方法名稱中使用 XLANG/s 關鍵字，當您新增 Web 服務時就會出現編譯錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-111">If you use an XLANG/s keyword in the Web service name or Web method name, you will get a compilation error when you add the Web service.</span></span> <span data-ttu-id="b4ce8-112">如需 XLANG/s 語言保留字的清單，請參閱[XLANG s 保留字](../core/xlang-s-reserved-words.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-112">For a list of reserved words for the XLANG/s language, see [XLANG-s Reserved Words](../core/xlang-s-reserved-words.md).</span></span>  
  
## <a name="required-xlangs-support-for-parameter-types"></a><span data-ttu-id="b4ce8-113">參數類型必要的 XLANG/s 支援</span><span class="sxs-lookup"><span data-stu-id="b4ce8-113">Required XLANG/s support for parameter types</span></span>  
 <span data-ttu-id="b4ce8-114">使用非 XLANG/s 支援的 Web 方法參數類型將會造成編譯錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-114">Using non-XLANG/s supported Web method parameter type will cause compilation errors.</span></span> <span data-ttu-id="b4ce8-115">例如，BizTalk Server 不支援包含結構描述類型之單一維度陣列的參數。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-115">For example, BizTalk Server does not support a parameter that consists of a single dimensional array of schema types.</span></span> <span data-ttu-id="b4ce8-116">此外，BizTalk Server 不支援多維度陣列。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-116">In addition, BizTalk Server does not support multi-dimensional arrays.</span></span> <span data-ttu-id="b4ce8-117">如需在 BizTalk Server 的 XLANG/s 語言保留字的清單，請參閱[XLANG s 保留字](../core/xlang-s-reserved-words.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-117">For a list of words that XLANG/s language reserves in BizTalk Server, see [XLANG-s Reserved Words](../core/xlang-s-reserved-words.md).</span></span>  
  
## <a name="avoiding-compilation-errors-caused-by-adding-web-references-containing-c-keywords-or-identifiers"></a><span data-ttu-id="b4ce8-118">避免因為加入包含 C# 關鍵字或識別項的 Web 參考而造成的編譯錯誤</span><span class="sxs-lookup"><span data-stu-id="b4ce8-118">Avoiding compilation errors caused by adding Web references containing C# keywords or identifiers</span></span>  
 <span data-ttu-id="b4ce8-119">當您使用**加入服務參考**若要加入服務參考加入 BizTalk 專案，BizTalk Server 將會呼叫每個 Web 方法至結構描述所需的結構描述類型。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-119">When you use the **Add Service Reference** to add service references to BizTalk projects, BizTalk Server converts the schema types that are required to call each Web method to schemas.</span></span> <span data-ttu-id="b4ce8-120">BizTalk Server 會將這些結構描述加入到 Reference.xsd 中。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-120">BizTalk Server adds these schemas to Reference.xsd.</span></span> <span data-ttu-id="b4ce8-121">如果您的結構描述包含 C# 關鍵字的項目名稱，或者項目名稱不是有效的 C# 識別項，便可能會產生執行階段錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-121">If your schemas contain element names that are C# keywords or the element name is not valid as a C# identifier, you may get a run-time error.</span></span> <span data-ttu-id="b4ce8-122">為了避免執行階段錯誤，請確定您使用的 Web 服務不包含 C# 關鍵字項目名稱或是無效的 C# 識別項。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-122">To avoid run-time errors, ensure that the Web service you consume does not contain element names that are C# keywords or invalid C# identifiers.</span></span>  
  
## <a name="multiple-serviceport-type-definitions-are-unsupported"></a><span data-ttu-id="b4ce8-123">不支援多個服務/連接埠類型定義</span><span class="sxs-lookup"><span data-stu-id="b4ce8-123">Multiple service/port type definitions are unsupported</span></span>  
 <span data-ttu-id="b4ce8-124">BizTalk Server 支援使用單一服務與連接埠類型定義來新增 Web 服務檔。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-124">BizTalk Server supports adding a Web service file with a single service and port type definition.</span></span> <span data-ttu-id="b4ce8-125">如果您使用多個服務與連接埠類型定義來新增 WSDL 檔案，可能會出現下列錯誤：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-125">If you add a WSDL file with multiple service or port type definitions, you may receive the following error:</span></span>  
  
 <span data-ttu-id="b4ce8-126">無法產生 BizTalk 檔案。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-126">Could not generate BizTalk files.</span></span> <span data-ttu-id="b4ce8-127">物件參考未設定為物件的執行個體。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-127">Object reference not set to an instance of an object.</span></span>  
  
## <a name="support-for-consuming-arrays-exposed-by-web-services"></a><span data-ttu-id="b4ce8-128">支援使用 Web 服務所公開的陣列</span><span class="sxs-lookup"><span data-stu-id="b4ce8-128">Support for consuming arrays exposed by Web services</span></span>  
 <span data-ttu-id="b4ce8-129">BizTalk Server 可以使用由 Web 服務所公開，但不屬於 BizTalk Web 服務的一維與不規則陣列。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-129">BizTalk Server can consume one dimensional and jagged arrays exposed by Web services that are not BizTalk Web services.</span></span> <span data-ttu-id="b4ce8-130">如需如何使用 Web 服務陣列的詳細資訊，請參閱[如何取用 Web 服務陣列](../core/how-to-consume-web-service-arrays.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-130">For more information about how to consume Web service arrays, see [How to Consume Web Service Arrays](../core/how-to-consume-web-service-arrays.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b4ce8-131">不支援多維度陣列語法。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-131">Multi dimensional array syntax is not supported.</span></span> <span data-ttu-id="b4ce8-132">例如， `MyArray[1,5]`。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-132">For example, `MyArray[1,5]`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b4ce8-133">BizTalk Server 不支援使用的陣列**資料集**Web 服務所公開的物件。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-133">BizTalk Server does not support consuming an array of **DataSet** objects exposed by a Web service.</span></span> <span data-ttu-id="b4ce8-134">XLANG/s 子服務原本即支援 .NET DataSet 類別，但是如果您建立了 BizTalk 專案，其中包含了將 .NET DataSet 物件陣列公開的 Web 服務之 Web 參考，則當您嘗試編譯專案時，會產生錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-134">The XLANG/s subservice does natively support the .NET DataSet class but if you create a BizTalk project that contains a Web reference to a Web service that exposes an array of .NET DataSet objects you will get errors when you attempt to compile the project.</span></span>  
  
## <a name="web-method-parameters-must-be-xml-serializable"></a><span data-ttu-id="b4ce8-135">Web 方法參數必須為可序列化的 Xml</span><span class="sxs-lookup"><span data-stu-id="b4ce8-135">Web method parameters must be Xml Serializable</span></span>  
 <span data-ttu-id="b4ce8-136">在使用的 Web 服務中，所有參數都必須是可序列化的 XML。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-136">All parameters in a consumed Web service must be Xml Serializable.</span></span> <span data-ttu-id="b4ce8-137">如果您新增的 Web 方法中，包含的參數為不可序列化的 Xml，就會產生下列錯誤訊息：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-137">If you add a Web method that contains a parameter that is not Xml Serializable, you may receive the following error message:</span></span>  
  
 <span data-ttu-id="b4ce8-138">System.Xml.Element 必須是可序列化的 XML，才能做為訊息部分類型。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-138">System.Xml.Element must be Xml Seralizeable to be a message part type.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b4ce8-139">資料型別**XmlDocument**和**資料集**，沒有可序列化的 Xml，同時支援。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-139">The data types, **XmlDocument** and **DataSet**, while not Xml Serializable, are supported.</span></span>  
  
## <a name="consuming-messaging-only-web-services"></a><span data-ttu-id="b4ce8-140">使用僅供傳訊的 Web 服務</span><span class="sxs-lookup"><span data-stu-id="b4ce8-140">Consuming Messaging only Web services</span></span>  
 <span data-ttu-id="b4ce8-141">使用僅供傳訊的 Web 服務時，所有的 BizTalk 訊息內文部分名稱都必須符合 Web 方法參數名稱。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-141">When consuming messaging only Web services, all BizTalk message body part names must match the Web method parameter names.</span></span> <span data-ttu-id="b4ce8-142">例如，如果 Web 服務的簽章為 `WebMethod(MyType1 type1, MyType2 type2)`，則部分名稱必定為 type1 與 type2，且可能發生下列執行階段錯誤：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-142">For example, if the signature of the Web service is `WebMethod(MyType1 type1, MyType2 type2)`, the part name must be type1 and type2, you may get the following runtime error:</span></span>  
  
 <span data-ttu-id="b4ce8-143">無法擷取參數 %1 的訊息部分</span><span class="sxs-lookup"><span data-stu-id="b4ce8-143">Failed to retrieve the message part for parameter %1</span></span>  
  
 <span data-ttu-id="b4ce8-144">如需詳細資訊，請參閱[傳訊只在情節中取用 Web 服務如何](../core/how-to-consume-web-services-in-a-messaging-only-scenario.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-144">For more information, see [How to Consume Web Services in a Messaging Only Scenario](../core/how-to-consume-web-services-in-a-messaging-only-scenario.md).</span></span>  
  
## <a name="configuring-a-soap-send-port-programmatically"></a><span data-ttu-id="b4ce8-145">使用程式來設定 SOAP 傳送埠</span><span class="sxs-lookup"><span data-stu-id="b4ce8-145">Configuring a SOAP Send Port Programmatically</span></span>  
 <span data-ttu-id="b4ce8-146">您可以在訊息內容中，使用程式來設定組態屬性。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-146">It is possible to set configuration properties programmatically on the message context.</span></span> <span data-ttu-id="b4ce8-147">不管傳送埠是靜態還是動態，您都可以在協調流程或自訂的管線元件中設定這些屬性。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-147">You can set these properties in an orchestration or a custom pipeline component whether or not the send port is static or dynamic.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b4ce8-148">若要設定**MethodName**屬性靜態 soap 傳送埠以程式設計的方式，您需要設定**方法名稱**至**[稍後指定]**中**Web服務** 索引標籤**SOAP 傳輸屬性**在 BizTalk Server 管理主控台 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-148">To configure the **MethodName** property for the static SOAP send port programmatically, you need to set **Method name** to **[Specify Later]** in the **Web Service** tab of the **SOAP Transport Properties** dialog box in the BizTalk Server Administration Console.</span></span>  
>   
>  <span data-ttu-id="b4ce8-149">如需有關**MethodName**屬性，請參閱[如何動態設定取用 Web 服務的 URI](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-149">For more information about the **MethodName** property, see [How to Dynamically Set the URI of a Consumed Web Service](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md).</span></span>  
>   
>  <span data-ttu-id="b4ce8-150">如需有關**SOAP 傳輸屬性**對話方塊中，請參閱**SOAP 傳輸屬性對話方塊、 Web 服務** 索引標籤[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-150">For more information about **SOAP Transport Properties** dialog box, see the **SOAP Transport Properties Dialog Box, Web service** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>
  
## <a name="property-rules"></a><span data-ttu-id="b4ce8-151">屬性規則</span><span class="sxs-lookup"><span data-stu-id="b4ce8-151">Property Rules</span></span>  
 <span data-ttu-id="b4ce8-152">如果組態屬性是設於接收管線的協調流程或自訂管線元件中，則會套用下列規則：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-152">If the configuration property is set in an orchestration or in a custom pipeline component in a receive pipeline, then the following rules are applied:</span></span>  
  
-   <span data-ttu-id="b4ce8-153">若訊息傳送至靜態傳送埠，屬性值會以該傳送埠設定的值覆寫。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-153">If a message is sent to a static send port, the property value will be overwritten with the value configured for that send port.</span></span>  
  
-   <span data-ttu-id="b4ce8-154">若訊息傳送至動態傳送埠，則不會覆寫屬性值。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-154">If a message is sent to a dynamic send port, the property value will not be overwritten.</span></span>  
  
 <span data-ttu-id="b4ce8-155">如果組態屬性是設於傳送管線的自訂管線元件中，則會套用下列規則：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-155">If a configuration property is set in a custom pipeline component in a send pipeline, then the following rule is applied:</span></span>  
  
-   <span data-ttu-id="b4ce8-156">無論訊息是傳送至靜態或動態傳送埠，都不會覆寫值。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-156">The value will not be overwritten regardless of whether the message is sent to a static or dynamic send port.</span></span> <span data-ttu-id="b4ce8-157">換言之，不管組態屬性設於何處，傳送管線元件都會覆寫組態屬性。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-157">In other words, send pipeline components overwrite the configuration property no matter where it was set.</span></span>  
  
-   <span data-ttu-id="b4ce8-158">如需自訂管線元件的詳細資訊，請參閱[開發自訂管線元件](../core/developing-custom-pipeline-components.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-158">For more information about custom pipeline components, see [Developing Custom Pipeline Components](../core/developing-custom-pipeline-components.md).</span></span>  
  
-   <span data-ttu-id="b4ce8-159">如需 SOAP 傳送配接器的組態屬性的詳細資訊，請參閱[如何動態設定取用 Web 服務的 URI](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md)。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-159">For more information about the configuration properties of the SOAP send adapter, see [How to Dynamically Set the URI of a Consumed Web Service](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md).</span></span>  
  
## <a name="adding-a-web-reference-to-a-consumed-web-service-that-contains-a-multi-rooted-schema-will-cause-a-compilation-error"></a><span data-ttu-id="b4ce8-160">將 Web 參考加入包含多重根目錄結構描述的已使用 Web 服務時，將會產生編譯錯誤</span><span class="sxs-lookup"><span data-stu-id="b4ce8-160">Adding a Web reference to a consumed Web service that contains a multi-rooted schema will cause a compilation error</span></span>  
 <span data-ttu-id="b4ce8-161">如果您針對由已發佈之 BizTalk 協調流程衍生出來的 Web 服務，將 Web 參考加入專案，且協調流程包括含有多重根目錄的結構描述，當您編譯專案時會產生錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-161">If you add a Web reference to your project for a Web service that was derived from a published BizTalk orchestration and the orchestration contains a schema with multiple roots then an error will occur when the project is compiled.</span></span> <span data-ttu-id="b4ce8-162">如果您將 Web 參考加入由已發佈之 BizTalk 協調流程衍生出來的專案，請確定協調流程不包含任何多重根目錄的結構描述。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-162">If you add a Web reference to your project that was derived from a published BizTalk orchestration, ensure that the orchestration does not contain any multi-rooted schemas.</span></span>  
  
## <a name="using-typeddatasets-as-parameters-to-web-methods"></a><span data-ttu-id="b4ce8-163">使用 TypedDataSets 作為 Web 方法的參數</span><span class="sxs-lookup"><span data-stu-id="b4ce8-163">Using TypedDataSets as parameters to Web methods</span></span>  
 <span data-ttu-id="b4ce8-164">當您打算使用 TypedDataSets 作為 Web 方法的參數時，需要先進行下列事項來支援此操作：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-164">The following is what you need to do to support using TypedDataSets as parameters to Web methods:</span></span>  
  
1.  <span data-ttu-id="b4ce8-165">將 Web 參考加入 C# 專案，然後產生 Proxy。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-165">Add the Web reference to a C# project and then generate the proxy.</span></span>  
  
2.  <span data-ttu-id="b4ce8-166">建立 SOAP 傳送埠，然後指定傳送埠上的 Proxy 並選擇方法。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-166">Create a SOAP send port and specify the proxy on the send port and choose the method.</span></span>  
  
3.  <span data-ttu-id="b4ce8-167">在協調流程中，定義晚期繫結埠與訊息類型。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-167">In the orchestration, define a late bound port and define the message types.</span></span> <span data-ttu-id="b4ce8-168">需要沒有屬性升級或辨別的欄位存取大部分的情況下，可以定義型別為**XMLDocument**。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-168">For most cases where no property promotion or distinguished field access is needed, the type can be defined as **XMLDocument**.</span></span> <span data-ttu-id="b4ce8-169">選取使用此類型的 PassThrough 管線。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-169">Select PassThrough pipelines with this type.</span></span>  
  
4.  <span data-ttu-id="b4ce8-170">在 BizTalk Server 管理主控台中，在**Web 服務**索引標籤中**SOAP 傳輸屬性**對話方塊中的 soap 傳送埠時，指定您想要使用您建立該 proxy。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-170">In BizTalk Server Administration console, in the **Web Service** tab in the **SOAP Transport Properties** dialog box of the SOAP send port, specify that you want to use that proxy that you created.</span></span> <span data-ttu-id="b4ce8-171">您同時需要指定組件、類型與方法。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-171">You will also need to specify assembly, type, and method.</span></span> <span data-ttu-id="b4ce8-172">如需詳細資訊，請參閱**SOAP 傳輸屬性對話方塊、 Web 服務** 索引標籤[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-172">For more information, see the **SOAP Transport Properties Dialog Box, Web service** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>
  
## <a name="adding-a-web-reference-to-a-consumed-web-service-that-contains-a-web-method-expecting-generic-based-parameters-will-cause-a-compilation-error"></a><span data-ttu-id="b4ce8-173">將 Web 參考加入包含需要泛型參數之 Web 方法的已使用 Web 服務時，將會產生編譯錯誤</span><span class="sxs-lookup"><span data-stu-id="b4ce8-173">Adding a Web reference to a consumed Web service that contains a Web method expecting generic based parameters will cause a compilation error</span></span>  
 <span data-ttu-id="b4ce8-174">如果您將 Web 參考加入包含需要泛型參數 (例如空值參數) 之 Web 方法的 Web 服務專案，編譯專案時會產生錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-174">If you add a Web reference to your project for a Web service that contains a Web method expecting generic based parameters such as nullable parameters, an error will occur when the project is compiled.</span></span> <span data-ttu-id="b4ce8-175">不支援這個動作。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-175">This is not supported.</span></span> <span data-ttu-id="b4ce8-176">您必須使用明確特製化來呼叫 XLANG/s 的泛型類別。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-176">You must use explicit specialization to call the generic class from XLANG/s.</span></span>  
  
## <a name="biztalk-schema-generation-using-the-add-service-reference"></a><span data-ttu-id="b4ce8-177">使用加入服務參考來產生 BizTalk 結構描述</span><span class="sxs-lookup"><span data-stu-id="b4ce8-177">BizTalk Schema Generation using the Add Service Reference</span></span>  
 <span data-ttu-id="b4ce8-178">當您使用**加入服務參考**若要加入服務參考加入 BizTalk 專案，BizTalk Server 將會呼叫每個 Web 方法至結構描述所需的結構描述類型。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-178">When you use the **Add Service Reference** to add service references to BizTalk projects, BizTalk Server converts the schema types that are required to call each Web method to schemas.</span></span> <span data-ttu-id="b4ce8-179">BizTalk Server 會將這些結構描述加入到 Reference.xsd 中。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-179">BizTalk Server adds these schemas to Reference.xsd.</span></span> <span data-ttu-id="b4ce8-180">若要確保**加入服務參考**產生 BizTalk 結構描述正確，Web 服務必須符合下列指導方針：</span><span class="sxs-lookup"><span data-stu-id="b4ce8-180">To ensure that the **Add Service Reference** generates the BizTalk schemas correctly, the Web services must conform to the following guidelines:</span></span>  
  
-   <span data-ttu-id="b4ce8-181">Web 方法應該包含**SoapDocumentMethodAttribute**而不是**SoapRpcMethodAttribute**。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-181">Web methods should have **SoapDocumentMethodAttribute** instead of **SoapRpcMethodAttribute**.</span></span>  
  
-   <span data-ttu-id="b4ce8-182">Web 服務和方法必須使用**常值**繫結，而不**Encoded**例如**[SoapDocumentMethod(Use=SoapBindingUse.Literal)]**。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-182">Web services and methods must use the **Literal** binding instead of **Encoded** such as **[SoapDocumentMethod(Use=SoapBindingUse.Literal)]**.</span></span>  
  
-   <span data-ttu-id="b4ce8-183">Web 方法參數和傳回型別都必須有**XmlRootAttribute**的有效**命名空間**屬性除非它們是原生 XSD 類型與 XmlNode 類型。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-183">Web method parameters and return types must have **XmlRootAttribute** with a valid **Namespace** property unless they are native XSD types and the XmlNode type.</span></span>  
  
-   <span data-ttu-id="b4ce8-184">Web 方法不能使用**RequestNamespace**和**ResponseNamespace**中的屬性**SoapDocumentMethodAttribute**。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-184">Web methods must not use the **RequestNamespace** and **ResponseNamespace** properties in **SoapDocumentMethodAttribute**.</span></span>  
  
-   <span data-ttu-id="b4ce8-185">Web 服務必須符合 Web 服務互通性 (WSI) Basic Profile version 1.1。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-185">Web services must be compliant with the Web services interoperability (WSI) Basic Profile version 1.1.</span></span>  
  
## <a name="xsd-will-not-contain-nodes-for-simple-parameter-types"></a><span data-ttu-id="b4ce8-186">XSD 不會包含代表簡單參數類型的節點</span><span class="sxs-lookup"><span data-stu-id="b4ce8-186">XSD will not contain nodes for simple parameter types</span></span>  
 <span data-ttu-id="b4ce8-187">當您新增 Web 參考且 Web 方法具有簡單類型的參數時，所產生的 XSD 將不會包含代表該參數的節點。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-187">When you add a Web reference and the Web method has a parameter that is a simple type, the generated XSD will not contain nodes for that parameter.</span></span> <span data-ttu-id="b4ce8-188">但是，所產生的 Multipart 訊息將會包含一個屬於該簡單類型的部分。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-188">Instead, the multipart message that is generated will contain a part that is of the simple type.</span></span> <span data-ttu-id="b4ce8-189">協調流程應該要適當處理此訊息部分。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-189">The orchestration should handle this message part appropriately.</span></span> <span data-ttu-id="b4ce8-190">如果該部分是 Web 服務要求的一部分，請使用訊息指派圖形，手動指派值給該部分。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-190">If it is a part of the request to the Web service, manually assign the value to that part with a message assignment shape.</span></span> <span data-ttu-id="b4ce8-191">如果該部分是 Web 服務回應的一部分，請在運算式圖形中手動存取該部分以查看值。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-191">If it is a part of the response from the Web service, manually access that part in an expression shape to see the value.</span></span>  
  
## <a name="the-add-service-reference-do-not-support-the-web-services-description-language-wsdl-import-element"></a><span data-ttu-id="b4ce8-192">「加入服務參考」功能不支援 Web 服務描述語言 (WSDL) Import 項目</span><span class="sxs-lookup"><span data-stu-id="b4ce8-192">The Add Service Reference do not support the Web Services Description Language (WSDL) import element</span></span>  
 <span data-ttu-id="b4ce8-193">當您將服務參考加入含有 Import 項目的 WSDL 檔案時，加入服務參考功能將無法運作。</span><span class="sxs-lookup"><span data-stu-id="b4ce8-193">The Add Service Reference fails when you add service references for the WSDL file with the import element.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b4ce8-194">另請參閱</span><span class="sxs-lookup"><span data-stu-id="b4ce8-194">See Also</span></span>  
 [<span data-ttu-id="b4ce8-195">建構 Web 訊息</span><span class="sxs-lookup"><span data-stu-id="b4ce8-195">Constructing Web Messages</span></span>](../core/constructing-web-messages.md)