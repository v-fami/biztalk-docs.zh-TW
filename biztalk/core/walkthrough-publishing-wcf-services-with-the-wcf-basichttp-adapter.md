---
title: "逐步解說： 使用發佈 WCF 服務 Wcf-basichttp 配接器 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- tutorials, publishing
- WCF adapters, tutorials
- publishing, WCF services
- WCF-BasicHttp adapters, tutorials
- publishing, tutorials
- WCF services, publishing
- tutorials, WCF adapters
ms.assetid: 43b76215-9cb0-47ab-a085-c4cf265410f9
caps.latest.revision: "72"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8915c298160f53ea21c62bc6f44d51aec36cdf94
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter"></a><span data-ttu-id="881da-102">逐步解說： 使用發佈 WCF 服務 Wcf-basichttp 配接器</span><span class="sxs-lookup"><span data-stu-id="881da-102">Walkthrough: Publishing WCF Services with the WCF-BasicHttp Adapter</span></span>
## <a name="introduction"></a><span data-ttu-id="881da-103">簡介</span><span class="sxs-lookup"><span data-stu-id="881da-103">Introduction</span></span>  
 <span data-ttu-id="881da-104">本逐步解說[!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)]服務為使用 BizTalk WCF 服務發佈精靈和 Wcf-basichttp 配接器的 BizTalk 協調流程。</span><span class="sxs-lookup"><span data-stu-id="881da-104">This walkthrough publishes a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service as a BizTalk orchestration by using the BizTalk WCF Service Publishing Wizard and the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="881da-105">BizTalk 協調流程會出現另一個 Web 服務之類的外部用戶端或[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]應用程式中，做為[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務公開[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]使用 Wcf-basichttp 配接器的端點。</span><span class="sxs-lookup"><span data-stu-id="881da-105">A BizTalk orchestration appears to an external client, such as another Web service or [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] application, as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service by exposing a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] endpoint using the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="881da-106">Wcf-basichttp 配接器是由傳送配接器和接收配接器所組成。</span><span class="sxs-lookup"><span data-stu-id="881da-106">The WCF-BasicHttp adapter consists of both a send adapter and a receive adapter.</span></span> <span data-ttu-id="881da-107">在此範例會使用只有此配接器的接收端來接收 WCF 服務要求，透過 HTTP 或 HTTPS 通訊協定，從[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="881da-107">In this sample you will use only the receive side of this adapter to receive WCF service requests through the HTTP or HTTPS protocol from [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client applications.</span></span>  
  
 <span data-ttu-id="881da-108">Wcf-basichttp 配接器會使用**BasicHttpBinding**繫結至提供的傳輸/通訊協定堆疊實作，與初始版本相容的 Web 服務來服務之間的橋樑[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]功能。</span><span class="sxs-lookup"><span data-stu-id="881da-108">The WCF-BasicHttp adapter uses the **BasicHttpBinding** binding to provide a transport/protocol stack implementation compatible with the initial release of Web services to serve as a bridge between [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] functionality.</span></span> <span data-ttu-id="881da-109">會提供通訊傳統 ASMX 架構 Web 服務和用戶端符合 ws-i-使用文字編碼的 Basic Profile 1.1，使用 HTTP 或 HTTPS 傳輸。</span><span class="sxs-lookup"><span data-stu-id="881da-109">It provides communication with legacy ASMX-based Web services and clients that conform to the WS-I Basic Profile 1.1, using either the HTTP or HTTPS transport with text encoding.</span></span> <span data-ttu-id="881da-110">使用 Wcf-basichttp 配接器不能利用進階的 Web 通訊功能所支援的 WS-* 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="881da-110">Using the WCF-BasicHttp adapter you will not be able to take advantage of advanced Web communication features that are supported by WS-* protocols.</span></span> <span data-ttu-id="881da-111">如果您要這麼做，請使用 Wcf-wshttp 配接器。</span><span class="sxs-lookup"><span data-stu-id="881da-111">If you need to do that, use the WCF-WSHttp adapter.</span></span>  
  
 <span data-ttu-id="881da-112">本逐步解說會示範如何建立 Wcf-basichttp 接收位置，以做為協調流程發佈[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務。</span><span class="sxs-lookup"><span data-stu-id="881da-112">This walkthrough shows you how to create a WCF-BasicHttp receive location to publish an orchestration as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="881da-113">您將設定網際網路資訊服務 (IIS) 提供的外掛式主控[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務。</span><span class="sxs-lookup"><span data-stu-id="881da-113">You will configure Internet Information Services (IIS) to provide isolated hosting of that [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="881da-114">用戶端應用程式呼叫發佈[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]做為範例的方式可能外部用戶端呼叫已發佈的協調流程[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]網際網路以使用其功能的服務。</span><span class="sxs-lookup"><span data-stu-id="881da-114">A client application calls the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] orchestration as an example of how an external client might call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service over the Internet to use its functionality.</span></span>  
  
 <span data-ttu-id="881da-115">完成此逐步解說之後，您將會瞭解如何執行下列工作：</span><span class="sxs-lookup"><span data-stu-id="881da-115">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="881da-116">從 Visual Studio 內使用**部署**命令，將部署[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務的本機執行個體的 BizTalk 組件內 BizTalk 協調流程的形式[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="881da-116">From within Visual Studio, use the **Deploy** command to deploy the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service in the form of a BizTalk orchestration inside a BizTalk assembly to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="881da-117">從 Visual Studio 部署會建立會填入包含資源，例如協調流程、 管線、 結構描述的組件，並將對應至 BizTalk 解決方案中使用的 BizTalk 應用程式。</span><span class="sxs-lookup"><span data-stu-id="881da-117">Deployment from Visual Studio creates a BizTalk application that is populated with the assemblies containing resources such as orchestrations, pipelines, schemas, and maps to be used in the BizTalk solution.</span></span>  
  
-   <span data-ttu-id="881da-118">在部署後，BizTalk 協調流程是可用來設定和控制透過[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="881da-118">After it is deployed, the BizTalk orchestration is available for configuration and control through the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="881da-119">在本逐步解說中，您會設定 WCF-BasicHttp 接收位置接受傳送到 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務的內送訊息，而該服務是由 [BizTalk [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務發佈精靈] 所建立的。</span><span class="sxs-lookup"><span data-stu-id="881da-119">In this walkthrough you will configure the WCF-BasicHttp receive location to accept incoming messages sent to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service that the BizTalk [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Service Publishing Wizard creates.</span></span> <span data-ttu-id="881da-120">接收位置是由 IIS 中 BizTalk 外掛式主控件所裝載，並是用來做為 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務，以取得內送要求。</span><span class="sxs-lookup"><span data-stu-id="881da-120">The receive location is hosted by the BizTalk isolated host in IIS, and acts as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to get to the incoming requests.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="881da-121">在本逐步解說，您將使用 BizTalk WCF 發佈精靈 」 和/或 BizTalk Web 服務發佈精靈發佈 BizTalk 協調流程和結構描述為[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務使用[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]配接器。</span><span class="sxs-lookup"><span data-stu-id="881da-121">In this walkthrough, you will use the BizTalk WCF Publishing Wizard and/or BizTalk Web Service Publishing Wizard to publish BizTalk orchestrations and schemas as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services with the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters.</span></span> <span data-ttu-id="881da-122">若要協調流程和結構描述發佈為 Web 服務 SOAP 配接器，您使用**BizTalk WCF 發佈精靈**及/或**BizTalk Web 服務發佈精靈**。</span><span class="sxs-lookup"><span data-stu-id="881da-122">To publish orchestrations and schemas as Web services with the SOAP adapter, you use the **BizTalk WCF Publish Wizard** and/or **BizTalk Web Services Publishing Wizard**.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="881da-123">必要條件</span><span class="sxs-lookup"><span data-stu-id="881da-123">Prerequisites</span></span>  
 <span data-ttu-id="881da-124">若要執行此範例中的步驟會確認您的環境會安裝下列先決條件：</span><span class="sxs-lookup"><span data-stu-id="881da-124">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
-   <span data-ttu-id="881da-125">建置組件，並執行部署程序的電腦和執行範例的電腦需要 Microsoft Windows Server 2008 SP2 和/或 Windows Server 2008 R2、 Microsoft.NET Framework 4，與 Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="881da-125">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft Windows Server 2008 SP2 and/or Windows Server 2008 R2, Microsoft .NET Framework 4, and Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="881da-126">用來建置組件並執行部署程序的電腦需要 Microsoft Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="881da-126">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
-   <span data-ttu-id="881da-127">執行此範例的電腦需要[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]配接器和[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]系統管理工具。</span><span class="sxs-lookup"><span data-stu-id="881da-127">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="881da-128">這些是 Microsoft 的安裝期間安裝的選項[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="881da-128">These are options to install during setup of Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="881da-129">在電腦上您用來執行管理工作，您必須以成員的使用者帳戶執行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 群組，才能設定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]內的應用程式設定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="881da-129">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="881da-130">此使用者帳戶也必須為管理主控件執行個體和其他工作可能需要的應用程式部署的本機系統管理員群組的成員。</span><span class="sxs-lookup"><span data-stu-id="881da-130">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="881da-131">需要的任何電腦上[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]功能，完成的單次安裝程序[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]範例[http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510)。</span><span class="sxs-lookup"><span data-stu-id="881da-131">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="881da-132">執行範例，並匯入繫結或.msi 檔案的電腦上[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，請確定主機不受信任的主機，或匯入將會失敗。</span><span class="sxs-lookup"><span data-stu-id="881da-132">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="881da-133">您必須下載的逐步解說程式碼，並將它解壓縮到您的電腦。</span><span class="sxs-lookup"><span data-stu-id="881da-133">You must download the walkthrough code and extract it to your computer.</span></span> <span data-ttu-id="881da-134">這個逐步解說是整個屬於[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]配接器逐步解說 」 套件。</span><span class="sxs-lookup"><span data-stu-id="881da-134">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="881da-135">您可以下載檔案**WCFAdapterWalkthroughs.exe**從[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Developer Center [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140)。</span><span class="sxs-lookup"><span data-stu-id="881da-135">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
### <a name="to-deploy-the-sample-biztalk-solution-biztalkapp"></a><span data-ttu-id="881da-136">部署範例 BizTalk 方案 BizTalkApp</span><span class="sxs-lookup"><span data-stu-id="881da-136">To deploy the sample BizTalk solution, BizTalkApp</span></span>  
  
1.  <span data-ttu-id="881da-137">執行自動解壓縮**WCFBasicHttpReceiveAdapter.exe**檔案，並將檔案解壓縮到**C:\WCFBasicHttpReceiveAdapter**資料夾。</span><span class="sxs-lookup"><span data-stu-id="881da-137">Run the self-extracting **WCFBasicHttpReceiveAdapter.exe** file and extract the files into the **C:\WCFBasicHttpReceiveAdapter** folder.</span></span>  
  
2.  <span data-ttu-id="881da-138">在 Microsoft Visual Studio 中開啟**C:\WCFBasicHttpReceiveAdapter\WCFBasicHttpReceiveAdapter.sln**檔案。</span><span class="sxs-lookup"><span data-stu-id="881da-138">In Microsoft Visual Studio, open the **C:\WCFBasicHttpReceiveAdapter\WCFBasicHttpReceiveAdapter.sln** file.</span></span>  
  
3.  <span data-ttu-id="881da-139">**Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**組件包含[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]協調流程、 對應，以及兩個結構描述。</span><span class="sxs-lookup"><span data-stu-id="881da-139">The **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp** assembly contains a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration, a map, and two schemas.</span></span> <span data-ttu-id="881da-140">它必須安裝在 GAC 中，將需要強式名稱金鑰檔，以取得這個情況發生。</span><span class="sxs-lookup"><span data-stu-id="881da-140">It must be installed in the GAC and will need a strong name key file for this to occur.</span></span> <span data-ttu-id="881da-141">以滑鼠右鍵按一下**[biztalkapp]**專案，然後按一下**屬性**。</span><span class="sxs-lookup"><span data-stu-id="881da-141">Right-click the **BizTalkApp** project and then click **Properties**.</span></span> <span data-ttu-id="881da-142">在**屬性**頁面上，按一下**簽署**，然後選取**簽署組件**。</span><span class="sxs-lookup"><span data-stu-id="881da-142">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="881da-143">按一下向下的箭號，在**選擇強式名稱金鑰檔**下拉式清單中，按一下  **\<新增 >**，並輸入`keyfile.snk`中**金鑰檔名稱**文字方塊.</span><span class="sxs-lookup"><span data-stu-id="881da-143">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New>**, and enter `keyfile.snk` in the **key file name** textbox.</span></span> <span data-ttu-id="881da-144">取消核取**保護我的密碼金鑰檔**，然後按一下 **確定**。</span><span class="sxs-lookup"><span data-stu-id="881da-144">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="881da-145">在 [方案總管] 中，以滑鼠右鍵按一下**[biztalkapp]**專案，然後再按一下**重建**。</span><span class="sxs-lookup"><span data-stu-id="881da-145">In Solution Explorer, right-click the **BizTalkApp** project, and then click **Rebuild**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="881da-146">請勿嘗試**建置方案**，或建置**WCFClient**此時應用程式。</span><span class="sxs-lookup"><span data-stu-id="881da-146">Do not attempt a **Build Solution**, or to build the **WCFClient** application at this point.</span></span> <span data-ttu-id="881da-147">**WCFClient**尚未準備好要建置在此範例中的點。</span><span class="sxs-lookup"><span data-stu-id="881da-147">The **WCFClient** is not ready to be built at this point in the sample.</span></span>  
  
5.  <span data-ttu-id="881da-148">展開**[biztalkapp]**，然後開啟**DeliveryProcess.odx**檢閱。</span><span class="sxs-lookup"><span data-stu-id="881da-148">Expand **BizTalkApp**, and then open **DeliveryProcess.odx** to review.</span></span> <span data-ttu-id="881da-149">在協調流程會採用[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]使用 Wcf-basichttp 配接器透過 HTTP 要求。</span><span class="sxs-lookup"><span data-stu-id="881da-149">The orchestration takes in a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] request over HTTP using the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="881da-150">它透過使用傳輸地圖修改要求，並送出一次使用相同的回應[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]配接器。</span><span class="sxs-lookup"><span data-stu-id="881da-150">It modifies the request by using a transformation map and sends out the response again using the same [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter.</span></span>  
  
    1.  <span data-ttu-id="881da-151">這個協調流程具有邏輯要求-回應連接埠會使用 Wcf-basichttp 配接器發佈。</span><span class="sxs-lookup"><span data-stu-id="881da-151">This orchestration has a logical request-response port that will be published with the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="881da-152">並會於稍後的步驟中繫結到實體連接埠。</span><span class="sxs-lookup"><span data-stu-id="881da-152">It will be bound to a physical port in a later step.</span></span>  
  
    2.  <span data-ttu-id="881da-153">以滑鼠右鍵按一下最上層節點**DeliveryProcess.odx**在設計工具視窗，然後選取**屬性**。</span><span class="sxs-lookup"><span data-stu-id="881da-153">Right-click the top node of **DeliveryProcess.odx** in the designer window, and then select **Properties**.</span></span> <span data-ttu-id="881da-154">請確定**型別修飾詞**連接埠類型的屬性是**公用**。</span><span class="sxs-lookup"><span data-stu-id="881da-154">Make sure that the **Type Modifier** property of the port type is **Public**.</span></span>  
  
6.  <span data-ttu-id="881da-155">在 方案總管 中，以滑鼠右鍵按一下**biztalkapp**，然後按一下 **屬性**。</span><span class="sxs-lookup"><span data-stu-id="881da-155">In Solution Explorer, right-click **BizTalkApp**, and then click **Properties**.</span></span>  
  
    1.  <span data-ttu-id="881da-156">如果未在本機裝載 BizTalk 管理資料庫，修改**伺服器**屬性，如果您使用不同的資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="881da-156">If the BizTalk Management database is not hosted locally, modify the **Server** property if you use a different database server.</span></span> <span data-ttu-id="881da-157">按一下**部署**索引標籤，然後再修改**伺服器**屬性以指向資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="881da-157">Click the **Deployment** tab, and then modify the **Server** property to point to the database server.</span></span>  
  
    2.  <span data-ttu-id="881da-158">請確定**應用程式名稱**屬性設定為**WCFBasicHttpReceiveAdapter**。</span><span class="sxs-lookup"><span data-stu-id="881da-158">Make sure that the **Application Name** property is set to **WCFBasicHttpReceiveAdapter**.</span></span> <span data-ttu-id="881da-159">這是 BizTalk 解決方案的部署位置的 BizTalk 應用程式的名稱。</span><span class="sxs-lookup"><span data-stu-id="881da-159">This is name of the BizTalk application where the BizTalk solution will be deployed.</span></span>  
  
    3.  <span data-ttu-id="881da-160">在 方案總管 中，以滑鼠右鍵按一下**biztalkapp**，然後按一下 **部署**。</span><span class="sxs-lookup"><span data-stu-id="881da-160">In Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span> <span data-ttu-id="881da-161">如果不在本機部署您可能需要設定為允許遠端連接的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="881da-161">If not deploying locally you may need to configure SQL Server to allow remote connections.</span></span> <span data-ttu-id="881da-162">如需詳細資訊，請參閱[http://go.microsoft.com/fwlink/?LinkId=194141](http://go.microsoft.com/fwlink/?LinkId=194141)。</span><span class="sxs-lookup"><span data-stu-id="881da-162">For more information, see [http://go.microsoft.com/fwlink/?LinkId=194141](http://go.microsoft.com/fwlink/?LinkId=194141).</span></span>  
  
### <a name="to-publish-the-sample-orchestration-by-using-the-biztalk-wcf-service-publishing-wizard"></a><span data-ttu-id="881da-163">若要使用 BizTalk WCF 服務發佈精靈發佈範例協調流程</span><span class="sxs-lookup"><span data-stu-id="881da-163">To publish the sample orchestration by using the BizTalk WCF Service Publishing Wizard</span></span>  
  
1.  <span data-ttu-id="881da-164">在此步驟中，您將會採用新部署的協調流程組件，並將其發佈做為 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務。</span><span class="sxs-lookup"><span data-stu-id="881da-164">In this step you will take the newly deployed orchestration assembly and publish it as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="881da-165">若要這樣做，請按一下**啟動**，指向 **所有程式**，指向  **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]，然後按一下  **BizTalk WCF 服務發佈精靈**.</span><span class="sxs-lookup"><span data-stu-id="881da-165">To do this, click **Start**, point to **All Programs**, point to **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)], and then click **BizTalk WCF Service Publishing Wizard**.</span></span>  
  
2.  <span data-ttu-id="881da-166">在**歡迎使用 BizTalk WCF 服務發佈精靈**頁面上，按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-166">On the **Welcome to the BizTalk WCF Service Publishing Wizard** page, click **Next**.</span></span>  
  
3.  <span data-ttu-id="881da-167">在**WCF 服務類型**頁面上，執行下列動作，以指定的型別[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]發行、 服務和 BizTalk 端點接收[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]訊息，然後再按一下**下一步**:</span><span class="sxs-lookup"><span data-stu-id="881da-167">On the **WCF Service Type** page, perform the following actions to specify the type of [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to publish, and the BizTalk endpoints for receiving [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages, and then click **Next**:</span></span>  
  
    1.  <span data-ttu-id="881da-168">選取**服務端點**選項，這表示您將發行[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務從協調流程的組件中。</span><span class="sxs-lookup"><span data-stu-id="881da-168">Select the **Service endpoint** option, which states you will publish a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service from an orchestration in an assembly.</span></span> <span data-ttu-id="881da-169">選取**Wcf-basichttp**從**配接器名稱 （傳輸類型）**下拉式清單。</span><span class="sxs-lookup"><span data-stu-id="881da-169">Select **WCF-BasicHttp** from the **Adapter name (Transport type)** drop-down list.</span></span>  
  
    2.  <span data-ttu-id="881da-170">選取**啟用中繼資料端點**核取方塊讓[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]接收由 IIS 裝載的位置發佈其[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務中繼資料。</span><span class="sxs-lookup"><span data-stu-id="881da-170">Select the **Enable metadata endpoint** check box to make the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive location hosted by IIS publish its [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service metadata.</span></span> <span data-ttu-id="881da-171">選取此核取方塊設定**httpGetEnabled**屬性\< **serviceMetadata**> 項目`true`Web.Config 中。這個中繼資料的擷取是發生在 HTTP/GET 要求請求該中繼資料時。</span><span class="sxs-lookup"><span data-stu-id="881da-171">Selecting this check box sets the **httpGetEnabled** attribute of the \<**serviceMetadata**> element to `true` in Web.Config. This metadata is retrieved when an HTTP/GET request asks for it.</span></span> <span data-ttu-id="881da-172">稍後您將使用 SvcUtil.exe 工具來取得這項資料來產生 proxy 類別，用來呼叫用戶端程式碼[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務。</span><span class="sxs-lookup"><span data-stu-id="881da-172">Later you will use the SvcUtil.exe tool to obtain this data to generate a proxy class for the client code to use to call the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    3.  <span data-ttu-id="881da-173">選取**下列應用程式中的建立 BizTalk 接收位置**選項來建立接收埠與對應至 Wcf-basichttp 配接器的每個產生的.svc 檔的位置。</span><span class="sxs-lookup"><span data-stu-id="881da-173">Select the **Create BizTalk receive locations in the following application** option to create the receive ports and locations corresponding to each generated .svc file for the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="881da-174">選擇 BizTalk 應用程式名稱、 **WCFBasicHttpReceiveAdapter**，其中的接收埠和位置，將會產生，然後按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-174">Choose the BizTalk application name, **WCFBasicHttpReceiveAdapter**, where the receive ports and locations will be generated, and then click **Next**.</span></span>  
  
         <span data-ttu-id="881da-175">精靈會建立繫結檔案 Binding.XML，以表示相關聯的接收位置。</span><span class="sxs-lookup"><span data-stu-id="881da-175">The wizard creates a binding file, Binding.XML, to represent associated receive locations.</span></span> <span data-ttu-id="881da-176">這個檔案位於 Web 目錄中，可以稍後再透過手動匯入[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台。</span><span class="sxs-lookup"><span data-stu-id="881da-176">This file is located in the Web directory and later can be manually imported through the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="881da-177">如果您沒有選取部署的 BizTalk 應用程式，在這裡會選取預設的應用程式。</span><span class="sxs-lookup"><span data-stu-id="881da-177">If you do not select a deployed BizTalk application here the default application will be selected.</span></span>  
  
4.  <span data-ttu-id="881da-178">在**建立 WCF 服務**頁面上，選取**BizTalk 協調流程發佈為 WCF 服務**，然後按一下 **下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-178">On the **Create WCF Service** page, select **Publish BizTalk orchestrations as WCF service**, and then click **Next**.</span></span> <span data-ttu-id="881da-179">這將會發佈在下個步驟中指定做為 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務的協調流程。</span><span class="sxs-lookup"><span data-stu-id="881da-179">This will publish the orchestration specified in the next step as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
5.  <span data-ttu-id="881da-180">選取包含要發佈的協調流程的組件。</span><span class="sxs-lookup"><span data-stu-id="881da-180">Select the assembly containing the orchestration to be published.</span></span> <span data-ttu-id="881da-181">在**BizTalk 組件**頁面上，於**BizTalk 組件檔案 (\*.dll)**  文字方塊中，按一下 **瀏覽**瀏覽至**C:\WCFBasicHttpReceiveAdapter\BizTalkApp\bin\Development**資料夾中，按兩下**Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**包含此範例的組件按一下 協調流程發佈，**開啟**，然後按一下 **下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-181">On the **BizTalk Assembly** page, in the **BizTalk assembly file (\*.dll)** text box, click **Browse** to browse to the **C:\WCFBasicHttpReceiveAdapter\BizTalkApp\bin\Development** folder, double-click the **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp** assembly containing the sample orchestration to publish, click **Open**, and then click **Next**.</span></span>  
  
6.  <span data-ttu-id="881da-182">在**協調流程和連接埠**頁面上，請確定**連接埠： DeliveryRequestPort**節點已在頁面上，選取，然後按一下 **下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-182">On the **Orchestrations and Ports** page, make sure that the **Port: DeliveryRequestPort** node is selected on the page, and then click **Next**.</span></span> <span data-ttu-id="881da-183">選取此節點表示，會一併選取其對應的更高層級節點。</span><span class="sxs-lookup"><span data-stu-id="881da-183">Selecting this node means that its corresponding higher-level nodes are selected as well.</span></span> <span data-ttu-id="881da-184">而連接埠就會以裝載 WCF-BasicHttp 配接器的要求-回應接收位置來發佈。</span><span class="sxs-lookup"><span data-stu-id="881da-184">The port will be published with a request-response receive location hosting the WCF-BasicHttp adapter.</span></span>  
  
7.  <span data-ttu-id="881da-185">在**WCF 服務屬性**頁面上，於**目標**命名空間的**WCF 服務**文字方塊中，輸入您想要這個已發佈的 URI[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務使用，並然後按一下 **下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-185">On the **WCF Service Properties** page, in the **Target** namespace of the **WCF service** text box, type a URI that you want this published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to use, and then click **Next**.</span></span> <span data-ttu-id="881da-186">此逐步解說中，保留預設 URI"**http://tempuri.org/"**的目標命名空間中[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務文字方塊。</span><span class="sxs-lookup"><span data-stu-id="881da-186">For this walkthrough, leave the default URI, "**http://tempuri.org/"** in the Target namespace of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service text box.</span></span>  
  
8.  <span data-ttu-id="881da-187">在**WCF 服務位置**頁面上，執行下列動作，以指定的位置[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務來建立，然後按一下**下一步**:</span><span class="sxs-lookup"><span data-stu-id="881da-187">On the **WCF Service Location** page, perform the following actions to specify the location of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services to create, and then click **Next**:</span></span>  
  
    1.  <span data-ttu-id="881da-188">在**位置**文字方塊中，輸入 Web 目錄名稱[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務執行，或按一下**瀏覽**，並選取 Web 目錄。</span><span class="sxs-lookup"><span data-stu-id="881da-188">In the **Location** text box, type the Web directory name where the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service runs, or click **Browse** and select the Web directory.</span></span> <span data-ttu-id="881da-189">此逐步解說中，因為組件名稱與虛擬目錄相同，保留預設位置 (**http://localhost/Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**) 中**位置**文字方塊。</span><span class="sxs-lookup"><span data-stu-id="881da-189">For this walkthrough, since the assembly name is the same as the virtual directory, leave the default location (**http://localhost/Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**) in the **Location** text box.</span></span>  
  
    2.  <span data-ttu-id="881da-190">選取**允許匿名存取 WCF 服務**選項，然後再按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="881da-190">Select the **Allow anonymous access to WCF service** option, and then click **Next**.</span></span> <span data-ttu-id="881da-191">這個選項會允許對所建立虛擬目錄的匿名存取。</span><span class="sxs-lookup"><span data-stu-id="881da-191">This option allows anonymous access to the created virtual directory.</span></span> <span data-ttu-id="881da-192">由於本逐步解說會使用傳輸安全性模式驗證，此選項需要選取以允許匿名驗證，此精靈會建立 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="881da-192">Because this walkthrough uses the Transport security mode with no authentication, this option needs to be selected to allow anonymous authentication for the Web application that this wizard will create.</span></span>  
  
9. <span data-ttu-id="881da-193">在**WCF 服務摘要**頁面上，按一下**建立**建立[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務。</span><span class="sxs-lookup"><span data-stu-id="881da-193">On the **WCF Service Summary** page, click **Create** to create the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="881da-194">這個步驟會建立接收埠，讓指定的協調流程可以透過指定的 Web 目錄而使用。</span><span class="sxs-lookup"><span data-stu-id="881da-194">This step creates a receive port for the specified orchestration available through the specified Web directory.</span></span>  
  
10. <span data-ttu-id="881da-195">在**完成 BizTalk WCF 服務發佈精靈**頁面上，按一下**完成**。</span><span class="sxs-lookup"><span data-stu-id="881da-195">On the **Completing BizTalk WCF Service Publishing Wizard** page, click **Finish**.</span></span>  
  
### <a name="to-enable-the-sample-biztalk-application"></a><span data-ttu-id="881da-196">若要啟用範例 BizTalk 應用程式</span><span class="sxs-lookup"><span data-stu-id="881da-196">To enable the sample BizTalk application</span></span>  
  
1.  <span data-ttu-id="881da-197">按一下**啟動**，指向 **所有程式**，指向  **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]，然後按一下  **BizTalk Server 管理**。</span><span class="sxs-lookup"><span data-stu-id="881da-197">Click **Start**, point to **All Programs**, point to **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2.  <span data-ttu-id="881da-198">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統管理主控台中，展開**應用程式**，展開**WCFBasicHttpReceiveAdapter**，展開**協調流程**，以滑鼠右鍵按一下**DeliveryProcess**協調流程中，按一下 **屬性**，然後設定繫結資訊，如下所示：</span><span class="sxs-lookup"><span data-stu-id="881da-198">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Applications**, expand **WCFBasicHttpReceiveAdapter**, expand **Orchestrations**, right-click the **DeliveryProcess** orchestration, click **Properties**, and then configure the binding information as follows:</span></span>  
  
    1.  <span data-ttu-id="881da-199">在**協調流程屬性**對話方塊中，按一下**繫結**，然後設定**主機**至**BizTalkServerApplication**。</span><span class="sxs-lookup"><span data-stu-id="881da-199">In the **Orchestration Properties** dialog box, click **Bindings**, and then set **Host** to **BizTalkServerApplication**.</span></span>  
  
    2.  <span data-ttu-id="881da-200">在**協調流程屬性**對話方塊中選取的接收埠**DeliveryRequestPort**繫結。</span><span class="sxs-lookup"><span data-stu-id="881da-200">In the **Orchestration Properties** dialog box, select a receive port for the **DeliveryRequestPort** to bind.</span></span> <span data-ttu-id="881da-201">這個逐步解說中，選取接收埠，BizTalk[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務發佈精靈中先前的程序，建立，然後按一下 **確定**。</span><span class="sxs-lookup"><span data-stu-id="881da-201">For this walkthrough, select the receive port that the BizTalk [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Service Publishing Wizard created in the previous procedure, and then click **OK**.</span></span>  
  
3.  <span data-ttu-id="881da-202">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，以滑鼠右鍵按一下**WCFBasicHttpReceiveAdapter**，按一下**啟動**，然後按一下 [**啟動**中**開始應用程式**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="881da-202">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpReceiveAdapter**, click **Start**, and then click **Start** in the **Start Application** dialog box.</span></span>  
  
### <a name="to-configure-the-web-application-hosting-the-published-wcf-service"></a><span data-ttu-id="881da-203">若要設定裝載所發佈 WCF 服務的 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="881da-203">To configure the Web application hosting the published WCF service</span></span>  
  
1.  <span data-ttu-id="881da-204">按一下**啟動**，指向 **系統管理工具**，然後按一下 **網際網路資訊服務 (IIS) 7.0 管理員**。</span><span class="sxs-lookup"><span data-stu-id="881da-204">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) 7.0 Manager**.</span></span>  
  
2.  <span data-ttu-id="881da-205">在 IIS 管理員 中，展開**網站**，依序展開**Default Web Site**，然後展開 Web 應用程式**Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**， **BizTalk WCF 服務發佈精靈**建立。</span><span class="sxs-lookup"><span data-stu-id="881da-205">In IIS Manager, expand **Sites**, expand **Default Web Site**, and then expand the Web application **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp** that the **BizTalk WCF Service Publishing Wizard** created.</span></span>  
  
3.  <span data-ttu-id="881da-206">建立此服務會在其中執行的應用程式集區。</span><span class="sxs-lookup"><span data-stu-id="881da-206">Create an application pool within which this service will run.</span></span> <span data-ttu-id="881da-207">以滑鼠右鍵按一下**應用程式集區**，按一下 **新增應用程式集區**，輸入應用程式集區的名稱，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="881da-207">Right-click **Application Pools**, click **Add Application Pool**, enter a name for the application pool, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="881da-208">展開**應用程式集區**，以滑鼠右鍵按一下您剛在應用程式集區建立，並選取**進階設定**。</span><span class="sxs-lookup"><span data-stu-id="881da-208">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="881da-209">在下**處理序模型**區段中，輸入擁有存取權的帳戶[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]資料庫下**識別**欄位。</span><span class="sxs-lookup"><span data-stu-id="881da-209">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
5.  <span data-ttu-id="881da-210">在 [IIS 管理員] 中，按一下**內容檢視**。</span><span class="sxs-lookup"><span data-stu-id="881da-210">In IIS Manager, click **Content View**.</span></span>  <span data-ttu-id="881da-211">在右窗格中，以滑鼠右鍵按一下[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務.svc 檔案， **BizTalk WCF 服務發佈精靈**建立，，然後按一下 **瀏覽**。</span><span class="sxs-lookup"><span data-stu-id="881da-211">In the right pane, right-click the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service .svc file that the **BizTalk WCF Service Publishing Wizard** created, and then click **Browse**.</span></span> <span data-ttu-id="881da-212">此時會開啟 Internet Explorer 顯示一個頁面，表示您已成功建立執行中的 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務。</span><span class="sxs-lookup"><span data-stu-id="881da-212">This opens Internet Explorer to display a page that indicates you have successfully created a running [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="881da-213">此頁面還包含完整的 WSDL 位址，而您可以在擷取可用來建立服務之用戶端應用程式的 Proxy 程式碼和組態檔時，複製並使用此位址來搭配服務中繼資料工具 (svcutil.exe) 以執行該擷取作業。</span><span class="sxs-lookup"><span data-stu-id="881da-213">The page also includes a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe) to retrieve proxy code and a configuration file that can be used to create a client application for the service.</span></span>  
  
6.  <span data-ttu-id="881da-214">將 SvcUtil.exe 命令列，在 Internet Explorer 顯示上一個步驟中的頁面上的完整 WSDL 位址複製到剪貼簿。</span><span class="sxs-lookup"><span data-stu-id="881da-214">Copy to the Clipboard the SvcUtil.exe command line with the full WSDL address on the page that Internet Explorer displayed in the previous step.</span></span>  
  
### <a name="to-create-the-proxy-class-for-the-sample-wcf-client-application-wcfclient"></a><span data-ttu-id="881da-215">若要建立範例 WCF 用戶端應用程式 WCFClient 的 Proxy 類別</span><span class="sxs-lookup"><span data-stu-id="881da-215">To create the proxy class for the sample WCF client application, WCFClient</span></span>  
  
1.  <span data-ttu-id="881da-216">建立 Proxy 類別，讓 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 用戶端範例應用程式可以呼叫 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服務。</span><span class="sxs-lookup"><span data-stu-id="881da-216">Create a proxy class so the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client sample application can call into the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="881da-217">當 proxy 不需要手動撰寫的程式碼是很複雜，因此建議您建立 proxy。</span><span class="sxs-lookup"><span data-stu-id="881da-217">While a proxy is not required, to manually write the code is very complex so creating a proxy is recommended.</span></span> <span data-ttu-id="881da-218">開啟**Visual Studio 命令提示字元**並移至**C:\WCFBasicHttpReceiveAdapter\WCFClient**將放置 proxy 類別和應用程式組態檔的資料夾。</span><span class="sxs-lookup"><span data-stu-id="881da-218">Open a **Visual Studio Command Prompt** and go to the **C:\WCFBasicHttpReceiveAdapter\WCFClient** folder where you will place the proxy class and application configuration file.</span></span>  
  
2.  <span data-ttu-id="881da-219">貼上**svcutil.exe**命令列與您在先前的程序中複製並再叫用的完整 WSDL 位址**Enter**建立 proxy 類別和應用程式組態檔。</span><span class="sxs-lookup"><span data-stu-id="881da-219">Paste the **svcutil.exe** command line with the full WSDL address that you copied in the previous procedure, and then hit **Enter** to create the proxy class and application configuration file.</span></span> <span data-ttu-id="881da-220">此命令列建立**BizTalkServiceInstance.cs** proxy 類別和**output.config**應用程式組態檔。</span><span class="sxs-lookup"><span data-stu-id="881da-220">This command line creates **BizTalkServiceInstance.cs** for the proxy class and **output.config** for the application configuration file.</span></span>  
  
3.  <span data-ttu-id="881da-221">在 Visual Studio，在 方案總管中以滑鼠右鍵按一下**WCFClient**，指向 **新增**，然後按一下 **現有項目**。</span><span class="sxs-lookup"><span data-stu-id="881da-221">In Visual Studio, in Solution Explorer, right-click **WCFClient**, point to **Add**, and then click **Existing Item**.</span></span>  
  
4.  <span data-ttu-id="881da-222">在**加入現有項目**對話方塊中，瀏覽至**WCFClient**資料夾中，選取**所有檔案 (\*。\*)**中**檔案類型**下拉式清單中，選取**BizTalkServiceInstance.cs**和**output.config**檔案、，然後按一下  **新增**。</span><span class="sxs-lookup"><span data-stu-id="881da-222">In the **Add Existing Item** dialog box, browse to the **WCFClient** folder, select **All Files (\*.\*)** in the **Files of type** drop-down list, select the **BizTalkServiceInstance.cs** and **output.config** files, and then click **Add**.</span></span>  
  
5.  <span data-ttu-id="881da-223">如**WCFClient**專案中，展開 **參考**，然後確定**WCFClient**專案具有**System.ServiceModel**做為其中一個它的參考。</span><span class="sxs-lookup"><span data-stu-id="881da-223">For the **WCFClient** project, expand **References**, and then make sure that the **WCFClient** project has **System.ServiceModel** as one of its references.</span></span>  
  
6.  <span data-ttu-id="881da-224">展開**WCFClient**專案中，以滑鼠右鍵按一下**output.config**，按一下 **重新命名**，然後輸入**App.config**新的名稱。</span><span class="sxs-lookup"><span data-stu-id="881da-224">Expand the **WCFClient** project, right-click **output.config**, click **Rename**, and then type **App.config** for the new name.</span></span>  
  
7.  <span data-ttu-id="881da-225">按兩下**Program.cs**檢閱如何呼叫發佈[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務使用所產生的 proxy 類別**Svcutil.exe**。</span><span class="sxs-lookup"><span data-stu-id="881da-225">Double-click **Program.cs** to review how to call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service using the proxy class generated by **Svcutil.exe**.</span></span> <span data-ttu-id="881da-226">具現化和叫用呼叫[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務似乎是簡化的程式碼使用中的本機呼叫**Microsoft_Samples_BizTalk_WCFBasicHttpReceiveAdapter_BizTalkApp_DeliveryProcess_DeliveryRequestPortClient**類別。</span><span class="sxs-lookup"><span data-stu-id="881da-226">Calls to instantiate and invoke a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service appear to be local calls in the simplicity of coding using the **Microsoft_Samples_BizTalk_WCFBasicHttpReceiveAdapter_BizTalkApp_DeliveryProcess_DeliveryRequestPortClient** class.</span></span> <span data-ttu-id="881da-227">沒有其他程式碼才能進行遠端呼叫[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務。</span><span class="sxs-lookup"><span data-stu-id="881da-227">There is no additional code needed to make a call to a remote [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
8.  <span data-ttu-id="881da-228">在 Visual Studio 中，在**偵錯**功能表上，按一下 **啟動但不偵錯**執行 WCFClient。</span><span class="sxs-lookup"><span data-stu-id="881da-228">In Visual Studio, on the **Debug** menu, click **Start Without Debugging** to run WCFClient.</span></span> <span data-ttu-id="881da-229">用戶端程式碼建立 DeliveryItem 訊息，並會呼叫[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務，傳遞位址、 ProductID、 和數量。</span><span class="sxs-lookup"><span data-stu-id="881da-229">The client code creates a DeliveryItem message and makes a call to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, passing in the Address, ProductID, and Amount.</span></span>  
  
    ```  
    DeliveryItem deliveryRequestItem = new DeliveryItem();  
    deliveryRequestItem.Address = "One Microsoft Way";  
    deliveryRequestItem.ProductID = "00A120c";  
    deliveryRequestItem.Amount = "300";  
    DeliveryRequestPortClient deliveryProcessClient = new DeliveryRequestPortClient("BasicHttpBinding_ITwoWayAsync");  
    DeliveryItem1 deliveryConfirmation = deliveryProcessClient.Submit(deliveryRequestItem);  
    ```  
  
     <span data-ttu-id="881da-230">如果用戶端成功接收回應訊息回已發佈[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]服務，它會傳遞確認編號 （串連的 ProductID 和位址） 顯示回應訊息中。</span><span class="sxs-lookup"><span data-stu-id="881da-230">If the client successfully receives the response message back from the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, it displays the delivery confirmation number (a concatenation of the ProductID and Address) in the response message.</span></span>  
  
     <span data-ttu-id="881da-231">**提交以 deliveryRequestItem 呼叫的作業**</span><span class="sxs-lookup"><span data-stu-id="881da-231">**Submit operation called with deliveryRequestItem**</span></span>  
  
     <span data-ttu-id="881da-232">**傳回的傳遞確認編號： 00A120c300One Microsoft 方法**</span><span class="sxs-lookup"><span data-stu-id="881da-232">**Delivery confirmation number sent back: 00A120c300One Microsoft Way**</span></span>  
  
     <span data-ttu-id="881da-233">**請按任意鍵繼續...**</span><span class="sxs-lookup"><span data-stu-id="881da-233">**Press any key to continue . . .**</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="881da-234">另請參閱</span><span class="sxs-lookup"><span data-stu-id="881da-234">See Also</span></span>  
 [<span data-ttu-id="881da-235">如何使用 BizTalk WCF 服務發佈精靈協調流程發佈為 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="881da-235">How to Use the BizTalk WCF Service Publishing Wizard to Publish Orchestrations as WCF Services</span></span>](../core/publish-orchestrations-as-wcf-services--biztalk-wcf-service-publishing-wizard.md)