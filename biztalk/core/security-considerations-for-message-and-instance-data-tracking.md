---
title: 訊息和執行個體資料追蹤的安全性考量 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- permissions, HAT
- MessageBox database, HAT
- Tracking database, HAT
- security, HAT
- HAT, permissions
- HAT, security
- Management database, HAT
ms.assetid: 83e47dc2-c8e2-42a2-9c85-d511e7dae83f
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3ff40db932a7fa1932830289557e1e0bb71b61c7
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36974567"
---
# <a name="security-considerations-for-message-and-instance-data-tracking"></a><span data-ttu-id="16258-102">訊息和執行個體資料追蹤的安全性考量</span><span class="sxs-lookup"><span data-stu-id="16258-102">Security Considerations for Message and Instance Data Tracking</span></span>
<span data-ttu-id="16258-103">基於安全性理由，追蹤的訊息和服務執行個體不會使用瀏覽器或 Url 如同舊版[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="16258-103">For security reasons, message and service instance tracking does not use browsers or URLs as in previous releases of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="16258-104">此監視的選項就會包含在 BizTalk Server 管理主控台的 [群組概觀] 頁面的一部分。</span><span class="sxs-lookup"><span data-stu-id="16258-104">This monitoring option is included as a part of the Group Overview page in the BizTalk Server Administration Console.</span></span>  <span data-ttu-id="16258-105">回溯相容性，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]仍然裝載了 Microsoft Internet Explorer 基於安全性理由在殼層內。</span><span class="sxs-lookup"><span data-stu-id="16258-105">For backward compatibility, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] still hosts Microsoft Internet Explorer inside a shell for security reasons.</span></span>  

 <span data-ttu-id="16258-106">藉由追蹤訊息和服務執行個體資料，您可以存取進行疑難排解並最佳化所需的技術細節您[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]環境。</span><span class="sxs-lookup"><span data-stu-id="16258-106">By tracking message and service instance data, you can access the technical details necessary to troubleshoot and optimize your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="16258-107">因為這個追蹤資料是功能強大，您應該限制您的生產環境中加以存取，讓惡意或未經授權的使用者並不會造成損害。</span><span class="sxs-lookup"><span data-stu-id="16258-107">Because this tracking data is powerful, you should limit access to it in your production environment so that malicious or unauthorized users do not cause damage.</span></span> <span data-ttu-id="16258-108">建議您遵循下列指導方針保護與您環境中使用 BizTalk Server 管理主控台。</span><span class="sxs-lookup"><span data-stu-id="16258-108">It is recommended you follow these guidelines for securing and using the BizTalk Server Administration Console in your environment.</span></span>  

- <span data-ttu-id="16258-109">您必須以成員的登入[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Operators 群組，若要使用 BizTalk Server 管理主控台檢視資料。</span><span class="sxs-lookup"><span data-stu-id="16258-109">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators group to view data using the BizTalk Server Administration Console.</span></span> <span data-ttu-id="16258-110">若要存取訊息內文中的 [群組概觀] 區段[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，您必須以成員的登入[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 群組。</span><span class="sxs-lookup"><span data-stu-id="16258-110">To access message bodies in the Group Overview section of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, you must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span>  

   <span data-ttu-id="16258-111">當您使用訊息和服務執行個體的追蹤時，您可以存取下列資料庫：</span><span class="sxs-lookup"><span data-stu-id="16258-111">When you use message and service instance tracking, you can access the following databases:</span></span>  


  |               <span data-ttu-id="16258-112">[資料庫]</span><span class="sxs-lookup"><span data-stu-id="16258-112">Database</span></span>               |                                                                                                   <span data-ttu-id="16258-113">使用者群組/權限</span><span class="sxs-lookup"><span data-stu-id="16258-113">User Group/Permissions</span></span>                                                                                                   |
  |--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |  <span data-ttu-id="16258-114">BizTalk 管理 (BizTalkMgmtDb)</span><span class="sxs-lookup"><span data-stu-id="16258-114">BizTalk Management (BizTalkMgmtDb)</span></span>  |              [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="16258-115"> 系統管理員，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]運算子</span><span class="sxs-lookup"><span data-stu-id="16258-115"> Administrators, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators</span></span>               |
  | <span data-ttu-id="16258-116">BizTalk MessageBox (BizTalkMsgBoxDb)</span><span class="sxs-lookup"><span data-stu-id="16258-116">BizTalk MessageBox (BizTalkMsgBoxDb)</span></span> | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="16258-117"> 系統管理員，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作員或讀寫權限</span><span class="sxs-lookup"><span data-stu-id="16258-117"> Administrators, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators, or read-write permissions</span></span> |
  |   <span data-ttu-id="16258-118">BizTalk 追蹤 (BizTalkDTADb)</span><span class="sxs-lookup"><span data-stu-id="16258-118">BizTalk Tracking (BizTalkDTADb)</span></span>    | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="16258-119"> 系統管理員，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作員或唯讀權限</span><span class="sxs-lookup"><span data-stu-id="16258-119"> Administrators, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators, or read-only permissions</span></span>  |


- <span data-ttu-id="16258-120">訊息與服務執行個體追蹤會產生中的所有主機都在報導[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]環境會根據查詢的參數。</span><span class="sxs-lookup"><span data-stu-id="16258-120">Message and service instance tracking generates reports about all hosts in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment based on the parameters of a query.</span></span> <span data-ttu-id="16258-121">只有成員的資訊洩漏的可能性降至最低[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 群組可以使用 BizTalk Server 管理主控台，來執行這些性查詢。</span><span class="sxs-lookup"><span data-stu-id="16258-121">To minimize the potential of information disclosure, only members of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group can use the BizTalk Server Administration Console to execute these querries.</span></span> <span data-ttu-id="16258-122">不過，如果您不想所有[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統管理員存取的資料這追蹤程序會產生時，您可以新增/移除使用者從 BizTalk 中的 HM_EVENT_WRITER 與 BAM_EVENT_WRITER SQL Server 角色來限制其存取資料追蹤 (BizTalkDTADb) 資料庫。</span><span class="sxs-lookup"><span data-stu-id="16258-122">However, if you do not want all [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators to have access to the data this tracking process produces, you can limit their access to the data by adding/removing users from the HM_EVENT_WRITER and BAM_EVENT_WRITER SQL Server roles in the BizTalk Tracking (BizTalkDTADb) database.</span></span>  

- <span data-ttu-id="16258-123">BizTalk 會使用 BAM_EVENT_WRITER 與 HM_EVENT_WRITER SQL Server 角色，而不是透過角色成員資格，來授予/拒絕其中成員讀/寫「追蹤」資料庫中追蹤資料的權限。</span><span class="sxs-lookup"><span data-stu-id="16258-123">BizTalk uses the BAM_EVENT_WRITER and HM_EVENT_WRITER SQL Server roles to grant/deny their members permissions to read/write the tracking data in the Tracking database, but not through role membership.</span></span> <span data-ttu-id="16258-124">請勿移除這些 SQL Server 角色。</span><span class="sxs-lookup"><span data-stu-id="16258-124">Do not remove these SQL Server roles.</span></span> <span data-ttu-id="16258-125">將主控件從裝載變更為不裝載追蹤 (反之亦然) 時，會呼叫 adm_ChangeHostTrackingPrivilege 預存程序。</span><span class="sxs-lookup"><span data-stu-id="16258-125">When you change a host from hosting to not hosting tracking (or vice versa), the adm_ChangeHostTrackingPrivilege stored procedure is called.</span></span> <span data-ttu-id="16258-126">此預存程序會讀取 BAM_EVENT_WRITER 與 HM_EVENT_WRITER SQL Server 角色的定義，並將對應的 GRANT/DENY 陳述式套用到主控件 Windows 群組。</span><span class="sxs-lookup"><span data-stu-id="16258-126">This stored procedure reads the definition of the BAM_EVENT_WRITER and HM_EVENT_WRITER SQL Server roles and apply the corresponding GRANT/DENY statements to the Host Windows group.</span></span> <span data-ttu-id="16258-127">這種做法的效果與新增主控件 Windows 群組到這些 SQL 角色的效果一樣。</span><span class="sxs-lookup"><span data-stu-id="16258-127">This achieves the same effect as adding the Host Windows group to these SQL roles.</span></span>  

- <span data-ttu-id="16258-128">當您設定 BizTalk Server 管理主控台喜好設定，若要檢視封存資料庫中的資料時，在此情況下追蹤查詢連接到保留封存的資料，不到目前作用中 BizTalk 追蹤 (BizTalkDTADb) 資料庫資料庫。</span><span class="sxs-lookup"><span data-stu-id="16258-128">When you configure the BizTalk Server Administration Console preferences to view data from an archived database, In this case the tracking queries connect to the databases that hold the archived data, not to the currently active BizTalk Tracking (BizTalkDTADb) database.</span></span>  

- <span data-ttu-id="16258-129">您不能偵錯網路位址轉譯 (NAT，Network Address Translation) 防火牆之間的即時協調流程。</span><span class="sxs-lookup"><span data-stu-id="16258-129">You cannot debug live orchestrations across Network Address Translation (NAT) firewalls.</span></span> <span data-ttu-id="16258-130">您在處理網域上必須有管理電腦，才能偵錯即時協調流程。</span><span class="sxs-lookup"><span data-stu-id="16258-130">You must have an administration computer on the Processing domain in order to debug live orchestrations.</span></span>  

- <span data-ttu-id="16258-131">根據您設定追蹤管線和管線，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能會儲存訊息內容中所含敏感性資訊。</span><span class="sxs-lookup"><span data-stu-id="16258-131">Depending on how you configure tracking and the pipelines, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] may store sensitive information contained in the message context.</span></span> <span data-ttu-id="16258-132">如果您使用 WMI 或追蹤訊息內文儲存至檔案位置，請確定該位置具有強式判別存取控制清單 (DACL) 使得只有[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系統管理員具有讀取這些訊息內文的權限。</span><span class="sxs-lookup"><span data-stu-id="16258-132">If you use WMI or tracking to save message bodies to a file location, ensure that the location has a strong discretionary access control list (DACL) so that only [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators have read permissions to these message bodies.</span></span> <span data-ttu-id="16258-133">將相同 DACL 套用到您儲存訊息內文的所有位置，包括您可能要在其中封存和復原訊息內文的非 BizTalk 資料庫。</span><span class="sxs-lookup"><span data-stu-id="16258-133">Apply the same DACL to any location you save the message bodies, including non-BizTalk databases where you may archive and restore them.</span></span>  

- <span data-ttu-id="16258-134">您必須以手動方式授與的權限[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 群組，來存取追蹤 Analysis Server (BizTalkAnalysisDb) 資料庫中; 依預設，只有 OLAP 系統管理員有權限為止。</span><span class="sxs-lookup"><span data-stu-id="16258-134">You must manually grant permissions to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to access the Tracking Analysis Server (BizTalkAnalysisDb) database; by default, only OLAP administrators have permissions to it.</span></span>  

## <a name="see-also"></a><span data-ttu-id="16258-135">另請參閱</span><span class="sxs-lookup"><span data-stu-id="16258-135">See Also</span></span>  
 <span data-ttu-id="16258-136">[規劃訊息和追蹤的執行個體](../core/planning-for-message-and-instance-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="16258-136">[Planning for Message and Instance Tracking](../core/planning-for-message-and-instance-tracking.md) </span></span>  
 [<span data-ttu-id="16258-137">檢視追蹤的訊息和執行個體資料</span><span class="sxs-lookup"><span data-stu-id="16258-137">Viewing Tracked Message and Instance Data</span></span>](../core/viewing-tracked-message-and-instance-data.md)