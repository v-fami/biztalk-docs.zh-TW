---
title: Wcf-basichttp 配接器 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- WCF-BasicHttp adapters
ms.assetid: 51bc56be-3c78-4bf9-87b6-8fb1435d8cde
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 27d0e731fd63ce01e9cc1c2604eb8f83141e024e
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/23/2018
---
# <a name="wcf-basichttp-adapter"></a>WCF-BasicHttp 配接器
[!INCLUDE[btsCoName](../includes/btsconame-md.md)] [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 使用 Wcf-basichttp 配接器來接收和傳送 WCF 服務要求，透過[BasicHttpBinding 類別](https://msdn.microsoft.com/library/system.servicemodel.basichttpbinding.aspx)。 Wcf-basichttp 配接器可讓您發佈協調流程和結構描述為 WCF 服務，並使用外部 WCF 服務與 **BasicHttpBinding**。  
  
您可以使用 WCF-BasicHttp 配接器，利用具有文字編碼的 HTTP 或 HTTPS 傳輸，與符合 WS-I 基本設定檔 1.1 的傳統 ASMX 架構 Web 服務和用戶端進行跨電腦的通訊。 不過，您將無法使用 WS-* 通訊協定支援的功能。  
  
 下表摘要說明 Wcf-basichttp 配接器的特性︰
  
|Description|特性|  
|-----------------|--------------------|  
|互通性等級|基本設定檔|  
|訊息編碼|文字或 MTOM|  
|界限|跨電腦|  
|傳輸通訊協定|HTTP 或 HTTPS|  
|安全性模式|None、Message、Transport、TransportWithMessageCredential 和 TransportCredentialOnly|  
|用戶端驗證機制|傳輸安全性與訊息安全性|  
|支援 WS-ReliableMessaging|否|  
|支援 WS-AtomicTransaction|否|  
|支援單向傳訊|是|  
|支援雙向傳訊|是|  
|接收配接器的主控件類型|外掛式|  
|傳送配接器的主控件類型|內含式|  
  
 Wcf-basichttp 配接器是由兩個配接器所組成 — 接收配接器和傳送配接器。 

本主題說明如何建立接收位置和傳送埠使用 BizTalk 管理。 您也可以[建立接收位置和傳送埠，以程式設計方式](../core/create-the-receive-location-and-send-port-programmatically.md)。

## <a name="before-you-begin"></a>開始之前

- 從開始[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]，此傳送配接器可以使用存取控制服務 (ACS) 或共用存取簽章 (SAS) athenticate 至服務匯流排。 我們建議使用服務匯流排進行驗證時使用共用存取簽章 (SAS)。 

    當您建立服務匯流排命名空間時，不會自動建立存取控制 (ACS) 命名空間。 如果您使用 ACS 驗證，您可能需要建立新的 ACS 命名空間。 請參閱[SB Messaging 配接器](../core/sb-messaging-adapter.md)如需詳細資訊，包括擷取 ACS 索引鍵值的步驟。

- Wcf-basichttp 配接器最好透過 SOAP 配接器，在下列情況︰  
  
    -   WCF 配接器的文件的每秒的速率是通常高於 SOAP 配接器。    
    -   SOAP 配接器的缺點序列化和還原序列化的.NET 型別與原始資料來源之間的訊息在某些情況下可能會導致不必要的資料修改。 WCF 配接器則採取保留這些資料流的方式。    
    -   WCF 配接器發佈的結構描述基本上與將在 BizTalk 執行階段中使用的結構描述相同。 相反地，SOAP 配接器會傳回中繼資料，以反映表示結構描述的 .NET 類別。 由於 .NET 不會保留所有 XSD 結構描述的細節，因此公開 (Expose) 的 WSDL 可能不會正確反映 BizTalk 執行階段使用的結構描述。    
    -   如有需要就很容易從 Wcf-basichttp 移轉至 Wcf-wshttp。  
-  您可以使用 WCF-BasicHttp 接收配接器，透過 HTTP 或 HTTPS 通訊協定接收 WCF 服務要求。  您可以使用 WCF-BasicHttp 傳送配接器，利用 HTTP 或 HTTPS 通訊協定，透過無類型合約來呼叫 WCF 服務。  

## <a name="create-the-receive-location"></a>建立接收位置

此接收位置可以設定為單向或要求-回應 （雙向）。  

> [!NOTE]
>  完成下列步驟之前，您必須已經新增接收埠。 請參閱 [如何建立接收埠](../core/how-to-create-a-receive-port.md)。  
> 
> 您也可以[以程式設計方式建立接收位置](../core/create-the-receive-location-and-send-port-programmatically.md)。 
  
1.  在 BizTalk 管理主控台中，展開 **BizTalk Server 管理**, ，依序展開 **BizTalk 群組**, ，依序展開 **應用程式**, ，然後展開您想要在其中建立接收位置的應用程式。  
  
2.  在 [BizTalk 管理主控台] 的左窗格中，按一下 **[接收埠]** 節點。 然後在右窗格中，使用滑鼠右鍵按一下與現有接收位置關聯的接收埠，或是您要與新接收位置關聯的接收埠，然後按一下 **[屬性]**。  
  
3.  在 [接收埠屬性]  對話方塊的左窗格中，選取 [接收位置] ，然後在右窗格中按兩下現有的接收位置，或按一下 [新增]  以建立新接收位置。  
  
4.  在 **接收位置屬性** 對話方塊中，於 **傳輸** 區段旁邊 **類型**, ，請選取 **Wcf-basichttp** 從下拉式清單，然後按一下  **設定**。  
  
5.  在 **Wcf-basichttp 傳輸屬性**, 上 **一般**  索引標籤上，設定端點位址和服務識別 Wcf-basichttp 接收位置︰  

    > [!NOTE]
    >  如果您使用 **傳輸** 或 **TransportWithMessageCredential** 的 **安全性模式**, ，您必須設定設定安全通訊端層 (SSL) 在 Microsoft 網際網路資訊服務 (IIS)。  
    
    |使用|動作|  
    |--------------|----------------|  
    |**位址 (URI)**|必要。 指定此接收位置的 URI。 指定虛擬目錄加上 BizTalk WCF 服務發佈精靈產生的.svc 檔案名稱 — 例如，/path/service.svc。<br /><br /> 預設值: /<br /><br /> 最小長度︰ 1<br /><br /> 最大長度︰ 255|  
    |**端點身分識別**|選擇性。 指定的識別服務此接收位置，即可提供 **編輯**  按鈕。 您可以指定的值 **端點身分識別** 屬性，則根據安全性組態而有所不同。 這些設定可讓用戶端驗證此接收位置。 在用戶端與服務之間的交握程序中，Windows Communication Foundation (WCF) 基礎結構可確保預期之服務的識別能夠與這個項目的值相符。<br /><br /> 預設為空字串。<br /><br /> 最小長度：00<br /><br /> 最大長度：32767|  
  
6.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的 [ **繫結** ] 索引標籤上，設定逾時和編碼屬性︰
    
    |使用|動作|  
    |--------------|----------------|  
    |**開啟逾時 (hh: mmss)**|指定時間值，表示可供完成通道開啟作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**傳送逾時 (hh: mmss)**|指定時間值，表示可供完成傳送作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。 如果您使用要求-回應接收埠，這個值會指定完成整個互動的時間長度，即使服務傳回很大的訊息也是如此。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**關閉逾時 (hh: mmss)**|指定時間值，表示可供完成通道關閉作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**接收的訊息大小上限 （位元組）**|以位元組為單位，指定可在網路上接收的訊息大小上限 (含標頭)。 訊息的大小受限於配置給每個訊息的記憶體數量。 您可以使用這個屬性來限制遭受拒絕服務 (DoS) 攻擊的風險程度。<br /><br /> Wcf-basichttp 配接器會利用 [BasicHttpBinding](http://go.microsoft.com/fwlink/?LinkId=81086) 與端點進行通訊的緩衝的傳輸模式中的類別。 緩衝的傳輸模式下， [BasicHttpBinding.MaxBufferSize](http://go.microsoft.com/fwlink/?LinkId=80659) 屬性會一律等於這個屬性的值。<br /><br /> 預設值：65536<br /><br /> 最大值：2147483647|  
    |**訊息編碼**|指定用來為 SOAP 訊息編碼的編碼器。 有效值包括下列各項：<br /><br /> -   **文字**： 使用文字訊息編碼器。<br />-   **Mtom**︰ 使用訊息傳輸 Organization Mechanism 1.0 (MTOM) 編碼器。<br /><br /> 預設值是 **文字**。|  
    |**文字編碼**|指定字元集的編碼方式來繫結上發出訊息時 **訊息編碼** 屬性設定為 **文字**。 有效值包括下列各項：<br /><br /> -   **utf 16BE (unicodeFFFE)**: Unicode BigEndian 編碼方式。<br />-   **utf-16**: 16 位元編碼方式。<br />-   **utf-8**: 8 位元編碼方式<br /><br /> 預設值是 **utf-8**。|  
    |**同時呼叫數目上限**|指定對單一服務執行個體的並行呼叫數目。 超出上限的呼叫將排入佇列。 將這個值設定為 0 的效果與設定為 **Int32.MaxValue**相同。<br /><br /> 預設值為 200|  
  
7.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的  **安全性** 索引標籤上，定義的安全性功能︰
  
    |使用|動作|  
    |--------------|----------------|  
    |**安全性模式**|指定使用的安全性類型。 有效值包括下列各項：<br /><br /> -   **無**： 訊息傳輸期間並未受到保護。<br />-   **傳輸**︰ 使用 HTTPS 傳輸來提供安全性。 使用 HTTPS 來維護 SOAP 訊息的安全。 若要使用這個模式，您必須在 Microsoft Internet Information Services (IIS) 中設定「安全通訊端層」(SSL)。<br />-   **訊息**︰ 使用透過 HTTP 傳輸的 SOAP 訊息安全性來提供安全性。 根據預設，SOAP **Body** 會進行加密及簽署。 唯一有效 **訊息用戶端認證類型** 配接器是 WCF 基本 **憑證**。 這種模式需要使用 HTTP 傳輸。 使用此安全性模式時，服務憑證，這個接收位置必須可透過提供 **服務憑證-憑證指紋** 屬性。<br />-   **TransportWithMessageCredential**: HTTPS 傳輸提供完整性、 機密性和驗證服務。 若要使用這個模式，您必須在 Microsoft Internet Information Services (IIS) 中設定「安全通訊端層」(SSL)。<br />-   **TransportCredentialOnly**︰ 這個模式不提供訊息完整性和機密性。 它可提供 HTTP 用戶端驗證。 使用這種模式時需特別小心； 您應該在以其他方式 (例如 IPSec) 提供傳輸安全性，而且只由 WCF 基礎結構提供用戶端驗證的環境中使用此模式。 如果您選取 **憑證** 的 **傳輸用戶端認證類型** 屬性在此安全性模式中，服務憑證，這個接收位置必須可透過提供 **服務憑證-憑證指紋** 屬性。<br /><br /> 預設值是 **無**。|  
    |**傳輸用戶端認證類型**|指定在執行用戶端驗證時，所要使用的認證類型。 有效值包括下列各項：<br /><br /> -   **無**： 無驗證傳輸層級發生。<br />-   **基本**︰ 基本驗證。 在基本驗證中，會透過網路傳送純文字格式的使用者名稱和密碼。 您必須建立對應到認證的網域或本機使用者帳戶。<br />-   **摘要**︰ 摘要式驗證。 此驗證方法的運作方式與基本驗證相當類似，例外的一點是密碼會透過網路傳送為雜湊值，以提供額外的安全性。 只有當網域具有執行 Windows Server 作業系統驗證的網域控制站時，才能使用摘要驗證。 您必須建立對應到用戶端認證的網域或本機使用者帳戶。<br />-   **Ntlm**: NTLM 驗證。 用戶端可以傳送認證，而不需要傳送密碼給這個接收位置。 您必須建立對應到用戶端認證的網域或本機使用者帳戶。<br />-   **Windows**: Windows 整合式的驗證。 Windows Communication Foundation 會交涉 Kerberos 或 NTLM (當有網域存在時，則偏好 Kerberos)。 如果您想要使用 Kerberos，請務必讓用戶端識別具有服務主要名稱 (SPN) 的服務。 您必須建立對應到用戶端認證的網域或本機使用者帳戶。<br />-   **憑證**︰ 使用用戶端憑證的用戶端驗證。 用戶端 X.509 憑證的 CA 憑證鏈結必須安裝在這部電腦的「信任的根憑證授權單位」憑證存放區中，才可以向這個接收位置驗證用戶端。 **注意︰**   **傳輸用戶端認證類型** 屬性必須符合驗證結構描述之 iis 虛擬目錄裝載此接收位置。 例如，如果您將此屬性設為 **[Windows]**，您也需要針對裝載它的虛擬目錄啟用 **[整合式 Windows 驗證]** 。 同樣地，如果您將此屬性設為 **[無]**，您必須允許針對裝載此接收位置的虛擬目錄進行匿名存取。 <br /><br /> 預設值是 **無**。|  
    |**訊息用戶端認證類型**|指定當使用以訊息為基礎的安全性來執行用戶端驗證時，所要使用的認證類型。 有效值包括下列各項：<br /><br /> -   **使用者名稱**︰ 允許這個接收位置要求來驗證用戶端使用 **UserName** 認證。 您必須建立對應到用戶端認證的網域或本機使用者帳戶。<br />-   **憑證**︰ 用戶端驗證此接收位置使用用戶端憑證。 用戶端 X.509 憑證的 CA 憑證鏈結必須安裝在這部電腦的「信任的根憑證授權單位」憑證存放區中，才可以向這個接收位置驗證用戶端。<br /><br /> 預設值是 **UserName**。|  
    |**演算法套件**|指定訊息加密和 Key Wrap 演算法。 這些演算法會對應到安全性原則語言 (WS-SecurityPolicy) 規格中所指定的演算法。 可能的值為：<br /><br /> -   **Basic128**： 使用 Aes128 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic128Rsa15**︰ 使用 aes128 代表訊息加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic128Sha256**︰ 使用 aes256 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic128Sha256Rsa15**︰ 使用 aes128 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic192**︰ 使用 Aes192 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic192Rsa15**︰ 使用 aes192 代表訊息加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic192Sha256**︰ 使用 aes192 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic192Sha256Rsa15**︰ 使用 aes192 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic256**︰ 使用 Aes256 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic256Rsa15**︰ 使用 aes256 代表訊息加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic256Sha256**︰ 使用 aes256 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic256Sha256Rsa15**︰ 使用 aes256 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **TripleDes**︰ 使用 TripleDes 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **TripleDesRsa15**︰ 使用 TripleDes 加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **TripleDesSha256**︰ 使用 tripledes 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **TripleDesSha256Rsa15**︰ 使用 tripledes 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br /><br /> 預設值為 **[Basic256]**。|  
    |**服務憑證-指紋**|針對此接收位置指定用戶端用來驗證服務之 X.509 憑證的憑證指紋。 您可以使用 **[瀏覽]** 按鈕瀏覽至 **「目前使用者」** 位置的 **My** 存放區，以選取憑證指紋。 **注意︰**  您必須將服務憑證安裝到 **目前使用者** 裝載此接收位置的接收處理常式的使用者帳戶的位置。 <br /><br /> 最小長度：00<br /><br /> 最大長度：40<br /><br /> 預設為空字串。|  
    |**使用單一登入**|使用「單一登入」來擷取用戶端認證，以便發行 SSO 票證。 這個選項只適用於下面「WCF-BasicHttp 接收配接器的企業單一登入可支援性」章節中所列的安全性組態。<br /><br /> 預設值為清除核取方塊。|  
  
    **企業單一登入可支援性 Wcf-basichttp 接收配接器**  
    此配接器可以從 SSO 伺服器只會在下表中顯示的安全性組態中發出 SSO 票證︰
    
    |**安全性模式**|**傳輸用戶端認證類型**|**訊息用戶端認證類型**|  
    |-----------------------|------------------------------------------|----------------------------------------|  
    |**傳輸**|**基本**|不適用|  
    |**傳輸**|**摘要**|不適用|  
    |**傳輸**|**Ntlm**|不適用|  
    |**傳輸**|**Windows**|不適用|  
    |**傳輸**|**憑證**|不適用|  
    |**訊息**|不適用|**使用者名稱**|  
    |**TransportWithMessageCredential**|不適用|**使用者名稱**|  
    |**TransportCredentialOnly**|**基本**|不適用|  
    |**TransportCredentialOnly**|**摘要**|不適用|  
    |**TransportCredentialOnly**|**Ntlm**|不適用|  
    |**TransportCredentialOnly**|**Windows**|不適用|  
    |**TransportCredentialOnly**|**憑證**|不適用|  
  
8.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的  **訊息** 索引標籤上，指定資料選取範圍 soap **主體** 項目︰  
  
    |使用|動作|  
    |--------------|----------------|  
    |**信封--整個\<p: Envelope>\>**|從內送訊息的整個 SOAP **信封** 建立 BizTalk 訊息內文部分。<br /><br /> 預設值為清除核取方塊。|  
    |**內文--內容\<soap: Body\>項目**|使用內送訊息的 SOAP **Body** 元素內容來建立 BizTalk 訊息內文部分。 如果 **Body** 元素有一個以上的子元素，則只有第一個元素會成為 BizTalk 訊息內文部分。<br /><br /> 這是預設值。|  
    |**路徑--內容由內文路徑定位**|使用 **[內文路徑運算式]** 文字方塊中的內文路徑運算式，建立 BizTalk 訊息內文部分。 內文路徑運算式會依照內送訊息 SOAP **Body** 元素的直系子元素來進行評估。<br /><br /> 預設值為清除核取方塊。|  
    |**內文路徑運算式**|輸入內文路徑運算式，以識別用來建立 BizTalk 訊息內文部分的內送訊息特定部分。 這個內文路徑運算式會依照內送訊息 SOAP **Body** 元素的直系子項目來進行評估。 如果此內文路徑運算式傳回一個以上的節點，則只會為 BizTalk 訊息內文部分選擇第一個節點。 如果選取了 **[路徑 -- 內容由內文路徑定位]** 選項，就需要此屬性。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：32767<br /><br /> 預設為空字串。|  
    |**節點編碼**|指定的編碼 Wcf-basichttp 接收配接器，用來解碼的內文路徑運算式所識別的節點類型 **內文路徑運算式** 文字方塊。<br /><br /> 如果選取了 **[路徑 -- 內容由內文路徑定位]** 選項，就需要此屬性。 有效值包括下列各項：<br /><br /> -   **Base64**: Base64 編碼方式。<br />-   **Hex**︰ 十六進位編碼方式。<br />-   **字串**︰ 文字編碼-utf-8<br />-   **XML**: WCF 配接器建立 BizTalk 訊息內文中的內文路徑運算式所選取之節點外部 xml **內文路徑運算式** 文字方塊。<br /><br /> 預設值是 **[XML]**。|  
    |**內文--BizTalk 回應訊息內文**|使用 BizTalk 訊息內文部分建立外寄回應訊息的 SOAP **內文** 元素內容。 此屬性只適用於要求-回應接收位置。<br /><br /> 這是預設值。|  
    |**範本--由範本指定的內容**|使用 [XML]  文字方塊中提供的範本來建立外寄訊息的 SOAP **內文** 元素內容。 此屬性只適用於要求-回應接收位置。<br /><br /> 預設值為清除核取方塊。|  
    |**XML**|針對外寄訊息的 SOAP **內文** 元素內容，輸入 XML 格式的範本。 如果選取了 **[範本 -- BizTalk 回應訊息本文]** 選項，就需要此屬性。 此屬性只適用於要求-回應接收位置。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：32767<br /><br /> 預設值是 **\<bts 訊息主體 xmlns ="http://www.microsoft.com/schemas/bts2007"編碼方式 ="xml"\>**。|  
    |**擱置失敗的要求訊息**|指定是否擱置因接收管線失敗或路由失敗而造成輸入處理失敗的要求訊息。<br /><br /> 預設值為清除核取方塊。|  
    |**錯誤中包含例外狀況詳細資料**|指定是否要將在錯誤發生時傳回 SOAP 錯誤以方便偵錯。<br /><br /> 預設值為清除核取方塊。|   
 
 
## <a name="create-the-send-port"></a>建立傳送埠

> [!NOTE] 
> 您也可以[以程式設計方式建立傳送埠](../core/create-the-receive-location-and-send-port-programmatically.md)。

1.  在 [BizTalk 管理主控台] 中建立新的傳送埠，或按兩下現有的傳送埠進行修改。 如需詳細資訊，請參閱[如何建立傳送埠](../core/how-to-create-a-send-port2.md)。 設定所有傳送埠選項，並指定 **Wcf-basichttp** 的 **類型** 選項 **傳輸** 區段 **一般**  索引標籤。  
  
2.  在 **一般** 索引標籤的 **傳輸** 區段中，按一下 **設定** 旁 **類型**。  
  
3.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的  **一般** 索引標籤上，設定端點位址、 服務識別和 **SOAPAction** Wcf-basichttp 傳送埠的 HTTP 標頭︰  

    > [!NOTE]
    >  如果您指定 **https** 配置 **位址 (URI)** 屬性，您必須設定 **安全性模式** 屬性 **傳輸** 或 **TransportWithMessageCredential**。 您可以使用 **安全性** 索引標籤以設定 **安全性模式** 屬性。  
      
    |使用|動作|  
    |--------------|----------------|  
    |**位址 (URI)**|必要。 指定此接收位置的完整格式 URI。 使用 **https** 或 **http** 根據安全性組態的配置。<br /><br /> 最大長度︰ 255<br /><br /> 預設值︰ http://localhost/|  
    |**端點身分識別**|選擇性。 指定此傳送埠所預期服務的識別。 這些設定可讓此傳送埠驗證服務。 在用戶端與服務之間的交握程序中，Windows Communication Foundation (WCF) 基礎結構可確保預期之服務的識別能夠與這個項目的值相符。 您可以指定的值 **識別** 屬性，則根據安全性組態而有所不同。<br /><br /> 預設值為清除核取方塊。| 
    |**動作**|指定 **SOAPAction** 外寄訊息的 HTTP 標頭欄位。 這個屬性也可以透過訊息內容屬性設定 **WCF。動作** 管線或協調流程中。 您可以將這個值指定兩個不同的方式︰ 單一動作格式和動作對應格式。 如果您在設定此屬性的單一動作格式-例如， http://contoso.com/Svc/Op1- **SOAPAction**標頭外寄訊息一定會設定這個屬性中指定的值。<br /><br /> 如果您設定此屬性以動作對應格式傳出 **SOAPAction** 標頭由 **BTS。作業** 內容屬性。 例如，如果此屬性設定為下列 XML 格式和**BTS。作業**屬性設定為 Op1，WCF 傳送配接器會使用http://contoso.com/Svc/Op1針對外寄**SOAPAction**標頭。<br /><br /> \<BtsActionMapping\><br /><br /> \<Operation Name="Op1" Action="http://contoso.com/Svc/Op1" \><br /><br /> \<Operation Name="Op2" Action="http://contoso.com/Svc/Op2" \><br /><br /> \</BtsActionMapping\><br /><br /> 協調流程執行個體如果外寄訊息是來自協調流程連接埠，以動態方式設定 **BTS。作業** 與連接埠的作業名稱的屬性。 如果外寄訊息會路由傳送，以內容為基礎的路由，您可以設定 **BTS。作業** 管線元件中的屬性。<br /><br /> 最小長度：00<br /><br /> 最大長度：32767<br /><br /> 預設為空字串。|
 
4.  在 **Wcf-basichttp 傳輸屬性**, 上 **繫結**  索引標籤上，設定逾時和編碼屬性︰ 

    |使用|動作|  
    |--------------|----------------|  
    |**開啟逾時 (hh: mmss)**|指定時間值，表示可供完成通道開啟作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**傳送逾時 (hh: mmss)**|指定時間值，表示可供完成傳送作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。 如果您使用請求-回應傳送埠，這個值會指定完成整個互動的時間長度，即使服務傳回很大的訊息也是如此。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**關閉逾時 (hh: mmss)**|指定時間值，表示可供完成通道關閉作業的時間間隔。 這個值應該大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**接收的訊息大小上限 （位元組）**|以位元組為單位，指定可在網路上接收的訊息大小上限 (含標頭)。 訊息的大小受限於配置給每個訊息的記憶體數量。 您可以使用這個屬性來限制遭受拒絕服務 (DoS) 攻擊的風險程度。<br /><br /> Wcf-basichttp 配接器會利用 [BasicHttpBinding](http://go.microsoft.com/fwlink/?LinkId=81086) 與端點進行通訊的緩衝的傳輸模式中的類別。 緩衝的傳輸模式下， [BasicHttpBinding.MaxBufferSize](http://go.microsoft.com/fwlink/?LinkId=80659) 屬性會一律等於這個屬性的值。<br /><br /> 預設值：65536<br /><br /> 最大值：2147483647|  
    |**訊息編碼**|指定用來為 SOAP 訊息編碼的編碼器。 有效值包括下列各項：<br /><br /> -   **文字**： 使用文字訊息編碼器。<br />-   **Mtom**︰ 使用訊息傳輸 Organization Mechanism 1.0 (MTOM) 編碼器。<br /><br /> 預設值︰ **文字**|  
    |**文字編碼**|指定字元集的編碼方式來繫結上發出訊息時 **訊息編碼** 屬性設定為 **文字**。 有效值包括下列各項：<br /><br /> -   **utf 16BE (unicodeFFFE)**: Unicode BigEndian 編碼方式。<br />-   **utf-16**: 16 位元編碼方式。<br />-   **utf-8**: 8 位元編碼方式<br /><br /> 預設值︰ **utf-8**|  
  
5.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的  **安全性** 索引標籤上，定義 Wcf-basichttp 傳送埠的安全性功能︰
 
    |使用|動作|  
    |--------------|----------------|  
    |**安全性模式**|指定使用的安全性類型。 有效值包括下列各項：<br /><br /> -   **無**： 訊息傳輸期間並未受到保護。<br />-   **傳輸**︰ 使用 HTTPS 傳輸來提供安全性。 使用 HTTPS 來維護 SOAP 訊息的安全。 此服務之 X.509 憑證的 CA 憑證鏈結必須安裝在這部電腦的「信任的根憑證授權單位」憑證存放區中，才可以使用此服務的憑證向傳送埠驗證此服務。<br />-   **訊息**︰ 使用 SOAP 訊息安全性來提供安全性。 根據預設，SOAP **主體** 加密且簽署項目。 唯一有效 **訊息用戶端認證類型** Wcf-basichttp 傳送配接器是 **憑證**。 這種模式需要使用 HTTP 傳輸。<br />-   **TransportWithMessageCredential**: HTTPS 傳輸提供完整性、 機密性和驗證服務。 此服務之 X.509 憑證的 CA 憑證鏈結必須安裝在這部電腦的「信任的根憑證授權單位」憑證存放區中，才可以使用此服務的憑證向傳送埠驗證此服務。 傳送埠驗證是由 SOAP 訊息安全性所提供。<br />-   **TransportCredentialOnly**︰ 這個模式不提供訊息完整性和機密性。 它可提供 HTTP 用戶端驗證。 使用這種模式時需特別小心； 您應該在以其他方式 (例如 IPSec) 提供傳輸安全性，而且只由 WCF 基礎結構提供用戶端驗證的環境中使用此模式。<br /><br /> 預設值是 **無**。|  
    |**傳輸用戶端認證類型**|指定在執行傳送埠驗證時，所要使用的認證類型。 有效值包括下列各項：<br /><br /> -   **無**： 無驗證傳輸層級發生。<br />-   **基本**︰ 基本驗證。 在基本驗證中，會透過網路傳送純文字格式的使用者名稱和密碼。 這個選項需要設定 **用戶端認證** 屬性。<br />-   **摘要**︰ 摘要式驗證。 此驗證方法的運作方式與基本驗證相當類似，例外的一點是密碼會透過網路傳送為雜湊值，以提供額外的安全性。 只有當網域具有執行 Windows Server 作業系統驗證的網域控制站時，才能使用摘要驗證。 這個選項需要設定 **用戶端認證** 屬性。<br />-   **Ntlm**: NTLM 驗證。 執行此傳送埠所用的使用者帳戶會用於驗證此傳送埠的服務。<br />-   **Windows**: Windows 整合式的驗證。 執行此傳送埠所用的使用者帳戶會用於驗證此傳送埠的服務。<br />-   **憑證**︰ 使用透過所指定的用戶端憑證的用戶端驗證 **用戶端憑證-憑證指紋** 屬性。 使用此認證類型時，必須透過提供服務憑證 **服務憑證-憑證指紋** 屬性。<br /><br /> 預設值是 **無**。|  
    |**訊息用戶端認證類型**|指定當使用以訊息為基礎的安全性來執行用戶端驗證時，所要使用的認證類型。 有效值包括下列各項：<br /><br /> -   **使用者名稱**： 流向服務且經過此傳送埠**UserName**認證。 WCF-BasicHttp 傳送配接器不支援這種認證。<br />-   **憑證**︰ 使用用戶端憑證，透過指定的服務會驗證此傳送埠 **用戶端憑證-憑證指紋** 屬性。 此外，使用這個認證類型時，服務憑證必須透過提供 **服務憑證-憑證指紋** 屬性。<br /><br /> 預設值是 **UserName**。|  
    |**演算法套件**|指定訊息加密和 Key Wrap 演算法。 這些演算法會對應到安全性原則語言 (WS-SecurityPolicy) 規格中所指定的演算法。 可能的值為：<br /><br /> -   **Basic128**： 使用 Aes128 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic128Rsa15**︰ 使用 aes128 代表訊息加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic128Sha256**︰ 使用 aes256 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic128Sha256Rsa15**︰ 使用 aes128 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic192**︰ 使用 Aes192 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic192Rsa15**︰ 使用 aes192 代表訊息加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic192Sha256**︰ 使用 aes192 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic192Sha256Rsa15**︰ 使用 aes192 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic256**︰ 使用 Aes256 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic256Rsa15**︰ 使用 aes256 代表訊息加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **Basic256Sha256**︰ 使用 aes256 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **Basic256Sha256Rsa15**︰ 使用 aes256 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **TripleDes**︰ 使用 TripleDes 加密，Sha1 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **TripleDesRsa15**︰ 使用 TripleDes 加密，Sha1 用於訊息摘要，Rsa15 用於金鑰包裝。<br />-   **TripleDesSha256**︰ 使用 tripledes 代表訊息加密，Sha256 用於訊息摘要，Rsa-oaep-mgf1p 用於金鑰包裝。<br />-   **TripleDesSha256Rsa15**︰ 使用 tripledes 代表訊息加密，Sha256 用於訊息摘要，Rsa15 用於金鑰包裝。<br /><br /> 預設值為 **[Basic256]**。|  
    |**用戶端憑證-憑證指紋**|指定 X.509 憑證的憑證指紋，以便向服務驗證此傳送埠。 您可以瀏覽至選取的憑證指紋 **我** 存放 **目前使用者** 位置 **瀏覽**  按鈕。 **注意︰**  您必須將用戶端憑證安裝到 **目前使用者** 裝載此傳送處理常式的使用者帳戶的位置的傳送埠。 <br /><br /> 最小長度：00<br /><br /> 最大長度：40<br /><br /> 預設為空字串。|  
    |**服務憑證-憑證指紋**|指定 X.509 憑證的指紋，以便驗證此傳送埠傳送訊息的目標服務。 您可以選取 [瀏覽到憑證指紋 **其他人** 存放 **本機** 位置 **瀏覽** ] 按鈕。<br /><br /> 最小長度：00<br /><br /> 最大長度：40<br /><br /> 預設為空字串。|  
    |**使用者名稱認證**|指定用來傳送訊息的認證。 您可以指定的屬性，即可 **編輯**  按鈕。 這個選項只適用於下面「WCF-BasicHttp 傳送配接器的企業單一登入可支援性」一節中所列的安全性組態。<br /><br /> 預設值是 **不會使用單一登入**。|  
    |**服務匯流排連線資訊** | 新開頭[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。<br/><br/>選擇要使用的共用存取簽章 (SAS) 或存取控制服務 (ACS) 的服務匯流排命名空間。 <br/><br/>選取一個選項，然後選取 **編輯** 輸入索引鍵的資訊︰<br/><br/> - **共用存取簽章**： 輸入存取索引鍵名稱和存取金鑰。 這兩個值會列在 [Azure 入口網站](https://portal.azure.com)。<br/> - **存取控制服務**： 輸入 STS URI (`https://<yourNamespace>-sb.accesscontrol.windows.net/`)，簽發者名稱和簽發者金鑰。 中所述，使用 Windows PowerShell 來擷取這些值， [SB Messaging 配接器](../core/sb-messaging-adapter.md)。 |
  
    **企業單一登入可支援性 Wcf-basichttp 傳送配接器**  
    WCF-BasicHttp 傳送配接器可以從 SSO 伺服器贖回 SSO 票證，以便取得只有在下表顯示之安全性組態中的使用者認證。  
  
    |**安全性模式**|**傳輸用戶端認證類型**|**訊息用戶端認證類型**|  
    |-----------------------|------------------------------------------|----------------------------------------|  
    |**傳輸**|**基本**|不適用|  
    |**傳輸**|**摘要**|不適用|  
    |**TransportCredentialOnly**|**基本**|不適用|  
    |**TransportCredentialOnly**|**摘要**|不適用|  
    |**訊息**|不適用|**使用者名稱**|  
    |**TransportWithMessageCredential**|不適用|**使用者名稱**|   
 
 
6.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的  **Proxy** 索引標籤上，設定的 proxy 設定 Wcf-basichttp 傳送埠︰ 

    |使用|動作|  
    |--------------|----------------|  
    |**使用處理常式的預設 proxy 設定**|指定此傳送埠是否要在裝載此傳送埠的傳送處理常式中，使用 Proxy 設定。<br /><br /> 這是預設值。|  
    |**不使用 proxy**|指出這個傳送埠是否要使用 Proxy 伺服器。<br /><br /> 預設值為清除核取方塊。|  
    |**使用 proxy**|指出此傳送埠是否使用指定的 proxy 伺服器 **位址** 屬性。<br /><br /> 預設值為清除核取方塊。|  
    |**地址**|指定 Proxy 伺服器的位址。 使用 **https** 或 **http** 根據安全性組態的配置。 這個位址後面可以加上冒號和連接埠編號， 例如 http://127.0.0.1:8080。<br /><br /> 這個屬性的值才需要 **使用 proxy** 已選取。<br /><br /> 類型：字串<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**使用者名稱**|指定要用於驗證的使用者名稱。 若使用整合式驗證，則使用者名稱會包括網域，即「網域\使用者名稱」。 如果使用基本或摘要式驗證，則使用者名稱不包含網域\\。 這個屬性的值才需要 **使用 proxy** 已選取。 **注意︰**  Wcf-basichttp 傳送配接器會使用 proxy 的基本驗證。 <br /><br /> 類型：字串<br /><br /> 최소 길이: 0<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**密碼**|指定要用於驗證的密碼。<br /><br /> 這個屬性的值才需要 **使用 proxy** 已選取。<br /><br /> 類型：字串<br /><br /> 최소 길이: 0<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
  
7.  在 **Wcf-basichttp 傳輸屬性** 對話方塊的  **訊息** 索引標籤上，指定資料選取範圍 soap **主體** 項目。 

    |使用|動作|  
    |--------------|----------------|  
    |**內文--BizTalk 要求訊息內文**|使用 BizTalk 訊息內文部分建立內容的 soap **主體** 外寄訊息的項目。<br /><br /> 這是預設值。|  
    |**範本--由範本指定的內容**|使用 [XML]  文字方塊中提供的範本來建立外寄訊息的 SOAP **內文** 元素內容。<br /><br /> 預設值為清除核取方塊。|  
    |**XML**|針對外寄訊息的 SOAP **內文** 元素內容，輸入 XML 格式的範本。 如果選取了 **[範本 -- BizTalk 回應訊息本文]** 選項，就需要此屬性。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：32767<br /><br /> 預設值是 < bts-b o d y<br /><br /> xmlns ="http://www.microsoft.com/schemas/bts2007"編碼方式 ="xml"/ >。|  
    |**信封--整個\<p: Envelope>\>**|從內送訊息的整個 SOAP **信封** 建立 BizTalk 訊息內文部分。 此屬性只對請求-回應連接埠有效。<br /><br /> 預設值為清除核取方塊。|  
    |**內文--內容\<soap: Body\>項目**|使用內送訊息的 SOAP **Body** 元素內容來建立 BizTalk 訊息內文部分。 如果 **Body** 元素有一個以上的子元素，則只有第一個元素會成為 BizTalk 訊息內文部分。 此屬性只對請求-回應連接埠有效。<br /><br /> 這是預設值。|  
    |**路徑--內容由內文路徑定位**|使用 **[內文路徑運算式]** 文字方塊中的內文路徑運算式，建立 BizTalk 訊息內文部分。 內文路徑運算式會依照內送訊息 SOAP **Body** 元素的直系子元素來進行評估。 此屬性只對請求-回應連接埠有效。<br /><br /> 預設值為清除核取方塊。|  
    |**內文路徑運算式**|輸入內文路徑運算式，以識別用來建立 BizTalk 訊息內文部分的內送訊息特定部分。 此內文路徑運算式評估的 soap 的直系子項目 **主體** 內送訊息的節點。 如果此內文路徑運算式傳回一個以上的節點，則只會為 BizTalk 訊息內文部分選擇第一個節點。 如果選取了 **[路徑 -- 內容由內文路徑定位]** 選項，就需要此屬性。 此屬性只對請求-回應連接埠有效。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：32767<br /><br /> 預設為空字串。|  
    |**節點編碼**|指定 Wcf-basichttp 傳送配接器中的內文路徑運算式所識別的節點用來解碼的編碼類型 **內文路徑運算式** 文字方塊。 如果選取了 **[路徑 -- 內容由內文路徑定位]** 選項，就需要此屬性。 此屬性只對請求-回應連接埠有效。 有效值包括下列各項：<br /><br /> -   **Base64**: Base64 編碼方式。<br />-   **Hex**︰ 十六進位編碼方式。<br />-   **字串**︰ 文字編碼-utf-8<br />-   **XML**: WCF 配接器建立 BizTalk 訊息內文中的內文路徑運算式所選取之節點外部 xml **內文路徑運算式** 文字方塊。<br /><br /> 預設值是 **[XML]**。|  
    |**傳播錯誤訊息**|選取此核取方塊可將輸出處理失敗的訊息路由至訂閱應用程式 (例如另一個接收埠或協調流程排程)。 清除核取方塊以擱置失敗的訊息，並產生負值通知 (NACK)。 此屬性只對請求-回應連接埠有效。<br /><br /> 預設值為選取核取方塊。|  

## <a name="add-a-proxy-to-the-send-handler"></a>將 proxy 加入至傳送處理常式

您可以將 proxy 加入至傳送埠或傳送處理常式。 如果您要新增 proxy 在傳送埠，請略過本節。

1.  在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理主控台中，展開[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理、 展開**BizTalk 群組**，展開**平台設定**，然後展開**配接器**.  
  
2.  選取 **Wcf-basichttp**, ，，然後按兩下以選取傳送處理常式。  
  
3.  在 **配接器處理常式屬性**, 上 **一般** 索引標籤上，選取 **屬性**。  
  
4.  在 **Proxy** 索引標籤上，執行下列動作。  
  
    |使用|動作|  
    |--------------|----------------|  
    |**使用 proxy**|指出此傳送處理常式是否要使用 proxy 伺服器。<br /><br /> 預設值為清除核取方塊。|  
    |**地址**|指定 Proxy 伺服器的位址。 使用 **https** 或 **http** 根據安全性組態的配置。 這個位址後面可以加上冒號和連接埠編號， 例如 http://127.0.0.1:8080。<br /><br /> 這個屬性的值才需要 **使用 proxy** 已選取。<br /><br /> 類型：字串<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**使用者名稱**|指定要用於驗證的使用者名稱。 若使用整合式或基本驗證，則使用者名稱也包括網域，即「網域\使用者名稱」。 如果使用摘要式驗證，則使用者名稱不包含網域\\。<br /><br /> 這個屬性的值才需要 **使用 proxy** 已選取。<br /><br /> 類型：字串<br /><br /> 최소 길이: 0<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**密碼**|指定要用於驗證的密碼。<br /><br /> 這個屬性的值才需要 **使用 proxy** 已選取。<br /><br /> 類型：字串<br /><br /> 최소 길이: 0<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
  
5.  按一下  **確定** 直到結束所有對話方塊。  

 ## <a name="see-also"></a>另請參閱
 
[何謂 WCF 配接器？](../core/what-are-the-wcf-adapters.md)

[SB Messaging 配接器](../core/sb-messaging-adapter.md)

[使用配接器](../core/using-adapters.md)
 