---
title: "X12 997 通知 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 62a352fb-635c-4f0e-9844-4b250159333d
caps.latest.revision: "15"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e1868c6c644940c49f854282980efc09c631b2cd
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="x12-997-acknowledgment"></a>X12 997 通知
X12 997 功能通知會報告所接收交換的狀態。 它會報告處理所接收文件時遇到的每個錯誤。 BizTalk EDI 接收管線永遠會產生 4010 相容的 997；但是，EDI 接收管線與 EDI 傳送管線也可以驗證 5010 相容的 997。  
  
 如同所有 X12 交易集，997 通知也會包含在 GS/GE 信封中傳送。 ST 和 SE 與任何其他交易集的完全相同。  
  
 下表列出在 997 通知之交易集內的區段。  
  
|位置|區段<br />ID|名稱|Req.<br />Des。|每個索引的最大 使用|迴圈<br />重複|  
|--------------|-----------------|----------|----------------|--------------|------------------|  
|010|ST|交易集標頭 (對於通知)|M|1|-|  
|020|AK1|功能群組回應標頭|M|1|-|  
|030|AK2|交易集回應標頭|O|1|999999 <br />(迴圈識別碼 = AK2)|  
|040|AK3|資料區段附註|O|1|999999 <br />(迴圈識別碼 = AK2/AK3)|  
|050|AK4|資料項目附註|O|99|-|  
|060|AK5|交易集回應結尾|M|1|-|  
|070|AK9|功能群組回應結尾|M|1|-|  
|080|SE|交易集結尾 (對於通知)|M|1|-|  
  
-   Req.Des。 = 需求指定  
  
-   M = 必要項  
  
-   O = 選擇項  
  
 AK 區段敘述如下。 AK2 至 AK5 迴圈中的區段提供交易集錯誤的相關資訊。  
  
## <a name="ak1"></a>AK1  
 AK1 區段是必要項，會使用下列資料項目識別接受通知的功能群組：  
  
-   AK101 是接受通知之功能群組的功能群組識別碼 (GS01)。  
  
-   AK102 是接受通知之功能群組的群組控制編號 (GS06 和 GE02)。  
  
-   AK103 是選擇項，並且是原始交易的 GS08 中傳送的 EDI 實作版本。 AK103 支援輸入的 5010 相容的 997。  
  
## <a name="ak2"></a>AK2  
 AK2 區段是選擇項，會將交易集的通知包含在所接收的功能群組內。 如果有多個 AK2 區段，它們會當做一系列迴圈傳送。 每個 AK2 迴圈會依照接收的順序識別交易集。 AK2 區段會使用兩個資料項目識別交易集：  
  
-   AK201 是接受通知之交易集的交易集識別碼 (ST01)。  
  
-   AK202 是接受通知之交易集的交易集控制編號 (ST02 和 SE02)。  
  
-   AK203 是選擇項，並且是原始交易的 ST03 中傳送的 EDI 實作版本。 AK203 支援輸入的 5010 相容的 997。  
  
 如果交易集發生錯誤，AK2 迴圈將包含 AK3、AK4 與 AK5 區段。 如需相關資訊，請參閱下列區段的描述。  
  
 您可以指定針對所有 (無論是已接受或拒絕的) 交易集產生 AK2 區段，或是只針對被拒絕的交易集產生 AK2 區段。 BizTalk Server 會產生針對接受的交易集的 AK2 區段 (其中 AK501 = = A) 如果您選取**包含接受的交易集的 AK2 迴圈**中核取方塊**通知**頁面協議兩個商務設定檔之間的協議的 [內容] 對話方塊 (或**通知**頁面的 [X12 設定] 索引標籤，為商務設定檔)。 否則，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 將只為拒絕的交易集產生 AK2 迴圈。 如果沒有為正在回應的交換解析協議，997 產生設定會預設為後援協議設定，且不會為已接受的交易集產生 AK2 區段。  
  
## <a name="ak3"></a>AK3  
 AK3 區段是選擇項，會報告資料區段中的錯誤，並識別資料區段的位置。 如果交易集中的每個區段有一或多個錯誤，便會建立 AK3 區段。 如果有多個 AK3 區段，它們會當做一系列迴圈傳送 (每個迴圈一個區段)。 AK3 區段有四個資料項目，分別指定每個錯誤區段的位置，以及報告在該位置找到之語法錯誤的類型：  
  
-   AK301 會以 X12 區段識別碼來識別錯誤區段，例如 NM1。  
  
-   AK302 是錯誤區段的區段計數。 ST 區段是 "1"，而每增加一個區段，區段計數就會遞增 1。  
  
-   Ak303 會識別繫結的迴圈： 由 LS 區段和 LE 區段括住的迴圈。 AK303 包含與錯誤區段繫結之 LS 和 LE 區段的值。  
  
-   AK304 是資料區段中錯誤的錯誤碼。 AK304 是選擇項，但如果識別的區段存在錯誤，則為必要。 如需 AK304 錯誤碼的清單，請參閱[X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)。  
  
## <a name="ak4"></a>AK4  
 AK4 區段選擇項，會報告資料項目或複合資料結構中的錯誤，並識別資料項目的位置。 當 AK304 資料項目是 "8" (即「區段有資料項目錯誤」)，就會傳送這個區段。 它可以在每個 AK3 區段內重複達 99 次。 AK4 區段有四個指定的位置，每個資料項目或複合資料結構的錯誤的資料項目，並報告該位置中找到的語法錯誤的類型。  
  
-   AK401 是 AK41.1、 AK41.2 與 AK41.3 欄位的複合資料元素。 AK401-1 會以其數值計數識別錯誤資料項目或複合資料結構。 例如，區段中的第二個資料項目發生錯誤，AK401 就等於 "2"。 AK401-2 會識別複合資料結構中發生錯誤之元件資料項目的數值計數。 如果 AK401 報告錯誤的資料結構不是複合資料結構，則 AK401-2 不會指定值。  
  
     AK41.3 是選擇項，並且是重複的資料元素位置。 AK41.3 支援輸入的 5010 相容的 997。  
  
-   AK402 是選擇項，用來識別錯誤項目的簡單 X12 資料項目編號。 例如，NM101 是簡單 X12 資料項目編號 98。  
  
-   AK403 是必要項，會報告所識別項目的錯誤。 如需 AK403 錯誤碼的清單，請參閱[X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)。  
  
-   AK404 是選擇項，其中包含錯誤識別資料項目的複本。 如果錯誤表示的是無效字元，則不會使用 AK404。  
  
## <a name="ak5"></a>AK5  
 AK5 區段會報告已接受或拒絕 AK2 區段中所識別的交易集及其原因。 如果通知中包含選擇性 AK2 迴圈，AK5 區段就是必要項。 AK4 區段有一個表示交易集狀態的必要資料項目，以及一到五個選擇性資料項目，這些資料項目會根據交易集的語法編輯方式提供錯誤碼。  
  
-   AK501 表示已接受或拒絕所識別的交易集。 如需 AK501 錯誤碼的清單，請參閱[X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)。  
  
-   AK502 到 AK506 表示錯誤的性質。 如需 AK501 錯誤碼的清單，請參閱[X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)。  
  
## <a name="ak9"></a>AK9  
 AK9 區段是必要項，表示已接受或拒絕 AK1 區段中所識別的功能群組及其原因。 AK9 區段有四個必要資料項目，表示交易集的狀態以及任何錯誤的性質，另外還有一到五個選擇性項目，表示任何已記錄的錯誤。  
  
-   AK901 是必要項，表示已接受或拒絕 AK1 中所識別的功能群組。 如需 AK901 錯誤碼的清單，請參閱[X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)。  
  
-   AK902 表示所識別功能群組結尾 (GE01) 中包含的交易集數目。  
  
-   AK903 表示已接收的交易集數目。  
  
-   AK904 表示所識別的功能群組中已接受的交易集數目。  
  
-   AK905 到 AK909 表示所識別功能群組中記錄的一到五個錯誤。 如需 AK905 到 AK909 錯誤碼的清單，請參閱[X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)。  
  
## <a name="see-also"></a>另請參閱  
 [X12 997 通知錯誤碼](../core/x12-997-acknowledgment-error-codes.md)