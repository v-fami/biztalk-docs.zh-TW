---
title: 交易夥伴協議 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e40a3847-ee36-4a75-ab50-def9b0caf07e
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ea4f60dc4a05f3e6bbe1fca8347482db6297c04a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36994831"
---
# <a name="trading-partner-agreement"></a><span data-ttu-id="a63cf-102">交易夥伴協議</span><span class="sxs-lookup"><span data-stu-id="a63cf-102">Trading Partner Agreement</span></span>
## <a name="overview"></a><span data-ttu-id="a63cf-103">概觀</span><span class="sxs-lookup"><span data-stu-id="a63cf-103">Overview</span></span>
<span data-ttu-id="a63cf-104">交易夥伴協議 (TPA) 的定義是，兩個交易夥伴之間透過特定 B2B 通訊協定交易訊息時所採用的決定性與繫結性協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-104">A Trading Partner Agreement (TPA) is defined as a definitive and binding agreement between two trading partners for transacting messages over a specific B2B Protocol.</span></span> <span data-ttu-id="a63cf-105">協議會將在雙方合作對象所屬商務設定檔中共同的雙向訊息處理屬性收集在一起。</span><span class="sxs-lookup"><span data-stu-id="a63cf-105">Agreements bring together common bi-directional message processing properties from specific business profiles of both partners.</span></span> <span data-ttu-id="a63cf-106">這完整收集了兩個交易夥伴之間進行商務交易時受制於的所有層面。</span><span class="sxs-lookup"><span data-stu-id="a63cf-106">It is a comprehensive collection of all aspects governing the business transaction between the two trading partners.</span></span> <span data-ttu-id="a63cf-107">TPA 通常是透過設定每個合作夥伴的設定檔而產生，並可讓人自訂和覆寫必要設定。</span><span class="sxs-lookup"><span data-stu-id="a63cf-107">A TPA is typically derived from the profiles of each partner, with the ability to customize and override the required settings.</span></span>  
  
 <span data-ttu-id="a63cf-108">簡單地說，TPA 指的是當兩個商務設定檔互相交換 B2B 訊息時，對於使用特定訊息編碼通訊協定或特定傳輸通訊協定的一種共識。</span><span class="sxs-lookup"><span data-stu-id="a63cf-108">In simpler terms, a TPA is an understanding between two business profiles to use a specific message encoding protocol or a specific transport protocol while exchanging B2B messages with each other.</span></span>  
  
 <span data-ttu-id="a63cf-109">![夥伴設定檔與協議](../core/media/tradingpartneragreement.gif "TradingPartnerAgreement")</span><span class="sxs-lookup"><span data-stu-id="a63cf-109">![Partner profiles with agreements](../core/media/tradingpartneragreement.gif "TradingPartnerAgreement")</span></span>  
  
 <span data-ttu-id="a63cf-110">在上圖中，沒有分別對商務訊息使用 X12 編碼的"Shipping"和"Invoice"設定檔的 Fabrikam 和 Contoso 之間的協議 (**編碼協議**) 和 AS2 傳輸交換訊息 (**傳輸協議**)。</span><span class="sxs-lookup"><span data-stu-id="a63cf-110">In the preceding illustration, there’s an agreement between the “Shipping” and “Invoice” profiles of Fabrikam and Contoso respectively to use the X12 encoding for business messages (**encoding agreement**) and AS2 transport for exchanging messages (**transport agreement**).</span></span> <span data-ttu-id="a63cf-111">許多商務設定檔之間都可能會有這類協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-111">There can be many such agreements between various business profiles.</span></span> <span data-ttu-id="a63cf-112">例如，“Payments” 和 “Invoice” 設定檔之間可能會有一個使用 EDIFACT 訊息編碼標準的協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-112">For example, there can be an agreement between the “Payments” and “Invoice” profiles to use the EDIFACT message encoding standard.</span></span> <span data-ttu-id="a63cf-113">所有這類協議的所有設定檔的一組交易夥伴的構成**合作關係**之間兩個交易夥伴。</span><span class="sxs-lookup"><span data-stu-id="a63cf-113">All such agreements for all the profiles for a pair of trading partners constitute a **Partnership** between the two trading partners.</span></span>  
  
## <a name="bi-directional-agreements"></a><span data-ttu-id="a63cf-114">雙向協議</span><span class="sxs-lookup"><span data-stu-id="a63cf-114">Bi-directional agreements</span></span>  
 <span data-ttu-id="a63cf-115">兩個商務設定檔之間的每個協議都是雙向協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-115">Each agreement between two business profiles is bi-directional.</span></span> <span data-ttu-id="a63cf-116">例如，“Shipping” 和 “Invoice” 商務設定檔之間的協議將會包含屬性來處理下列訊息：</span><span class="sxs-lookup"><span data-stu-id="a63cf-116">For example, the agreement between “Shipping” and “Invoice” business profiles will contain properties to process messages:</span></span>  
  
- <span data-ttu-id="a63cf-117">“ Shipping” 設定檔從 “ Invoice” 設定檔那邊收到的訊息，以及</span><span class="sxs-lookup"><span data-stu-id="a63cf-117">Received by “Shipping” profile from “Invoice” profile, and</span></span>  
  
- <span data-ttu-id="a63cf-118">“ Shipping” 設定檔 傳送給 “ Invoice” 設定檔的訊息</span><span class="sxs-lookup"><span data-stu-id="a63cf-118">Sent by “Shipping” profile to “Invoice” profile</span></span>  
  
  <span data-ttu-id="a63cf-119">簡單地說，雙向協議就是兩個單向協議的集合。</span><span class="sxs-lookup"><span data-stu-id="a63cf-119">In simpler terms, a bi-directional agreement is a collection of two one-way agreements.</span></span> <span data-ttu-id="a63cf-120">其中一個單向協議可以想成一組屬性，這些屬性定義了合作對象 A 到合作對象 B 的訊息交易方式。而另一個單向協議則可以想成另一組屬性，這些屬性定義了合作對象 B 到合作對象 A 的訊息交易方式。</span><span class="sxs-lookup"><span data-stu-id="a63cf-120">One one-way agreement can be considered as a collection of properties that define how message transaction happens from party A to party B. The other one-way agreement can be considered as a collection of properties that define how message transaction happens from party B to party A.</span></span>  
  
## <a name="considerations-when-defining-an-agreement"></a><span data-ttu-id="a63cf-121">定義協議時的考量</span><span class="sxs-lookup"><span data-stu-id="a63cf-121">Considerations when defining an agreement</span></span>  
 <span data-ttu-id="a63cf-122">在建立交易夥伴協議時，您必須考慮下列各點：</span><span class="sxs-lookup"><span data-stu-id="a63cf-122">You must consider the following points while creating a Trading Partner Agreement:</span></span>  
  
-   <span data-ttu-id="a63cf-123">對於兩個彼此交換 B2B 訊息的商務設定檔，必須定義一個訊息編碼協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-123">For two business profiles that exchange B2B messages with each other, defining a message encoding agreement is mandatory.</span></span> <span data-ttu-id="a63cf-124">合作單位可以僅在需要使用 AS2 通訊協定來彼此傳輸訊息時，才選擇擁有 AS2 協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-124">The divisions may choose to have an AS2 agreement only if they want to use the AS2 protocol to transfer messages.</span></span> <span data-ttu-id="a63cf-125">例如，如果商業單位之間選擇透過電子郵件來傳輸訊息，就不需要有 AS2 協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-125">For example, an AS2 agreement is not required if the business divisions choose to transfer messages over e-mail.</span></span>  
  
-   <span data-ttu-id="a63cf-126">如果有兩個商務設定檔都支援 X12 和 EDIFACT 編碼，而且這兩個商務設定檔都同意使用這兩個編碼通訊協定來交換訊息，則每個通訊協定應該要有各自的協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-126">If two business profiles support both X12 and EDIFACT encoding and both business profiles agree to use both encoding protocols while exchanging messages, there should be separate agreements for each protocol.</span></span> <span data-ttu-id="a63cf-127">X12 通訊協定應該要有一個協議，而 EDIFACT 通訊協定應該要有另一個協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-127">There should be one agreement for X12 protocol and one agreement for EDIFACT protocol.</span></span> <span data-ttu-id="a63cf-128">兩個通訊協定不能共用一個協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-128">There cannot be a single agreement that can be used for both protocols.</span></span>  
  
-   <span data-ttu-id="a63cf-129">X12 與 EDIFACT 訊息的編碼協議不能和 AS2 的傳輸協議屬於同一個協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-129">The encoding agreement for X12 and EDIFACT messages and transport agreement (for AS2) cannot be part of one agreement.</span></span> <span data-ttu-id="a63cf-130">您必須為兩者建立個別的協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-130">You must create separate agreements for both.</span></span>  
  
## <a name="global-or-fallback-agreement"></a><span data-ttu-id="a63cf-131">全域或後援協議</span><span class="sxs-lookup"><span data-stu-id="a63cf-131">Global or fallback agreement</span></span>  
 <span data-ttu-id="a63cf-132">某些商業組織可能選擇只擁有一套 B2B 處理機制，而不管參與特定 B2B 訊息傳遞的夥伴是誰。</span><span class="sxs-lookup"><span data-stu-id="a63cf-132">Certain business organizations may choose to have a singular set of B2B processing mechanism without differentiating on the partners involved in specific B2B messaging.</span></span> <span data-ttu-id="a63cf-133">實際上，這類商業組織只會有一個與其他所有交易夥伴分享的通用 B2B 通訊協定設定。</span><span class="sxs-lookup"><span data-stu-id="a63cf-133">In effect, such business organizations have just one common B2B protocol setting that is shared with all other trading partners.</span></span> <span data-ttu-id="a63cf-134">此外，因為這類組織不需要針對特定夥伴有特定的設定，所以 B2B 通訊協定設定是針對交易夥伴進行定義，而不是針對交易商務設定檔。</span><span class="sxs-lookup"><span data-stu-id="a63cf-134">Also, because such organizations do not need to have specific settings for specific partners, the B2B protocol settings are defined for the trading partner itself and not for a trading business profile.</span></span> <span data-ttu-id="a63cf-135">在  [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]，這類商業組織稱為**全域交易夥伴**。</span><span class="sxs-lookup"><span data-stu-id="a63cf-135">In [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)], such business organizations are reflected as **Global Trading Partners**.</span></span> <span data-ttu-id="a63cf-136">其他企業在需要表示為全域交易夥伴的商務交易使用稱為 「 全域交易夥伴協議**全域交易夥伴協議**。</span><span class="sxs-lookup"><span data-stu-id="a63cf-136">Other businesses that need to trade with a business represented as a global trading partner use agreements with the global trading partner that are called **Global Trading Partner Agreement**.</span></span> <span data-ttu-id="a63cf-137">這些協議符合針對全域交易夥伴定義的訊息編碼和通訊協定設定。</span><span class="sxs-lookup"><span data-stu-id="a63cf-137">These agreements conform to the message encoding and protocol settings defined for the global trading partner.</span></span>  
  
 <span data-ttu-id="a63cf-138">當兩個交易夥伴之間在設定檔層級建立的通訊協定設定彼此配合不上，而無法形成交易夥伴協議時，這些在全域層級定義的設定也很有用。</span><span class="sxs-lookup"><span data-stu-id="a63cf-138">The settings defined at the global level can also be useful in scenarios when the profile-specific protocol settings between two trading partners do not formulate a trading partner agreement.</span></span> <span data-ttu-id="a63cf-139">在這種情況下，裝載 [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 的組織可以根據針對合作夥伴定義的通訊協定設定，使用另一個交易商務設定檔來形成協議。</span><span class="sxs-lookup"><span data-stu-id="a63cf-139">In this scenario, the organization hosting [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] can use the protocol settings defined for the partner to formulate an agreement with another trading business profile.</span></span> <span data-ttu-id="a63cf-140">使用合作夥伴就稱為所定義的全域通訊協定設定，在這種情況下，達成的協議**後援交易夥伴協議**。</span><span class="sxs-lookup"><span data-stu-id="a63cf-140">In such cases, the agreement arrived at using the global protocol settings defined for the partner is called the **Fallback Trading Partner Agreement**.</span></span>  

## <a name="learn-next"></a><span data-ttu-id="a63cf-141">了解接下來</span><span class="sxs-lookup"><span data-stu-id="a63cf-141">Learn next</span></span>

[<span data-ttu-id="a63cf-142">總結： 定義交易夥伴管理解決方案</span><span class="sxs-lookup"><span data-stu-id="a63cf-142">Putting it all together: Defining a trading partner management solution</span></span>](../core/putting-it-all-together-defining-a-trading-partner-management-solution.md)
  
## <a name="see-also"></a><span data-ttu-id="a63cf-143">另請參閱</span><span class="sxs-lookup"><span data-stu-id="a63cf-143">See Also</span></span>  
 [<span data-ttu-id="a63cf-144">交易夥伴管理解決方案的建置區塊</span><span class="sxs-lookup"><span data-stu-id="a63cf-144">Building Blocks of a Trading Partner Management Solution</span></span>](../core/building-blocks-of-a-trading-partner-management-solution.md)