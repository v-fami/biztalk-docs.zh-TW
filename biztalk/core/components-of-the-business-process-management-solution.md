---
title: "元件的商務處理管理解決方案 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- process management solution tutorial, back-end systems, process management solutions
- process management solution tutorial, client applications
- orchestrations, process management solutions
- adapters, process management solutions
- process management solution tutorial, adapters
- client applications, process management solutions
- process management solution tutorial, components
- process management solution tutorial, orchestrations
- pipelines, process management solutions
- process management solution tutorial, pipelines
- assemblies, process management solutions
- process management solution tutorial, assemblies
ms.assetid: e3ccebb9-b677-4c17-acd2-0f986f7bd3f0
caps.latest.revision: "22"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b63234dbf4a8dc62a620bf2b384b832e4887b0d4
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="components-of-the-business-process-management-solution"></a><span data-ttu-id="d0f65-102">商務程序管理解決方案的元件</span><span class="sxs-lookup"><span data-stu-id="d0f65-102">Components of the Business Process Management Solution</span></span>
<span data-ttu-id="d0f65-103">本節描述商務程序管理解決方案的主要 BizTalk Server 元件。</span><span class="sxs-lookup"><span data-stu-id="d0f65-103">This section describes the major BizTalk Server components of the Business Process Management Solution.</span></span> <span data-ttu-id="d0f65-104">來源檔案的相關資訊，請參閱[商務程序管理解決方案的檔案庫存](../core/file-inventory-for-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="d0f65-104">For information about the source files, see [File Inventory for the Business Process Management Solution](../core/file-inventory-for-the-business-process-management-solution.md).</span></span>  
  
## <a name="orchestrations"></a><span data-ttu-id="d0f65-105">協調流程</span><span class="sxs-lookup"><span data-stu-id="d0f65-105">Orchestrations</span></span>  
 <span data-ttu-id="d0f65-106">有兩個主要的協調流程： **OrderBroker**和**OrderManager**。</span><span class="sxs-lookup"><span data-stu-id="d0f65-106">There are two main orchestrations: **OrderBroker** and **OrderManager**.</span></span> <span data-ttu-id="d0f65-107">**OrderBroker**協調流程接受客戶要求透過 Web 服務或是透過 FTP，批次，並將傳送回透過 Microsoft Message Queuing (MSMQ) 佇列的回覆。</span><span class="sxs-lookup"><span data-stu-id="d0f65-107">The **OrderBroker** orchestration accepts customer requests through a Web service or in batches through FTP, and sends replies back through a Microsoft Message Queuing (MSMQ) queue.</span></span> <span data-ttu-id="d0f65-108">要求會從**OrderBroker**至**OrderManager**。</span><span class="sxs-lookup"><span data-stu-id="d0f65-108">Requests go from the **OrderBroker** to the **OrderManager**.</span></span> <span data-ttu-id="d0f65-109">兩個協調流程是透過 MessageBox 資料庫直接繫結。</span><span class="sxs-lookup"><span data-stu-id="d0f65-109">The two orchestrations are direct bound through the MessageBox database.</span></span>  
  
 <span data-ttu-id="d0f65-110">**OrderManager**透過使用兩個非同步處理階段會執行要求**CableOrder1**和**CableOrder2**協調流程。</span><span class="sxs-lookup"><span data-stu-id="d0f65-110">The **OrderManager** runs the requests through two asynchronous processing stages using the **CableOrder1** and **CableOrder2** orchestrations.</span></span> <span data-ttu-id="d0f65-111">整體而言， **CableOrder1**和**CableOrder2**協調流程即代表單一商務程序。</span><span class="sxs-lookup"><span data-stu-id="d0f65-111">Taken together, the **CableOrder1** and **CableOrder2** orchestrations represent a single business process.</span></span> <span data-ttu-id="d0f65-112">不過，這個程序已經分為兩個協調流程，如此一來階段可以變更，而不會中斷訂單處理。</span><span class="sxs-lookup"><span data-stu-id="d0f65-112">However, the process has been broken into two orchestrations so that stages can be changed without disrupting order processing.</span></span> <span data-ttu-id="d0f65-113">如需有關設計的階段，請參閱 < 分割商務程序 」 中的[商務程序管理解決方案中的部分設計原則](../core/some-design-principles-in-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="d0f65-113">For more information about the design of the stages, see "Dividing Business Processes" in [Some Design Principles in the Business Process Management Solution](../core/some-design-principles-in-the-business-process-management-solution.md).</span></span>  
  
 <span data-ttu-id="d0f65-114">**CableOrder1**協調流程使用**驗證**協調流程來驗證訂單，並將要求程式碼轉譯為動作呼叫分析 」 協調流程分析購物次序，然後再呼叫**Activate**，**取消**，或**變更**協調流程根據所需的動作。</span><span class="sxs-lookup"><span data-stu-id="d0f65-114">The **CableOrder1** orchestration uses the **Validate** orchestration to validate the order and to translate request codes into actions, calls the Analyze orchestration to analyze the order, and then calls the **Activate**, **Cancel**, or **Change** orchestration depending on the required action.</span></span> <span data-ttu-id="d0f65-115">**CableOrder2**協調流程會完成訂單處理藉由呼叫**完成**協調流程。</span><span class="sxs-lookup"><span data-stu-id="d0f65-115">The **CableOrder2** orchestration handles completion of the order by calling the **Complete** orchestration.</span></span> <span data-ttu-id="d0f65-116">請注意， **CableOrder1**和**CableOrder2**使用**呼叫**叫用附屬協調流程圖形。</span><span class="sxs-lookup"><span data-stu-id="d0f65-116">Notice that **CableOrder1** and **CableOrder2** use **Call** shapes to invoke the subordinate orchestrations.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d0f65-117">**取消**協調流程包含在呼叫的補償區塊**Activate**協調流程。</span><span class="sxs-lookup"><span data-stu-id="d0f65-117">The **Cancel** orchestration includes a compensation block that calls the **Activate** orchestration.</span></span> <span data-ttu-id="d0f65-118">這可確保訂單會針對取消的要求，適當地還原為補償的一部分。</span><span class="sxs-lookup"><span data-stu-id="d0f65-118">This ensures that the order is properly restored as part of the compensation for the cancel request.</span></span>  
  
 <span data-ttu-id="d0f65-119">**CableOrder1**和**CableOrder2**協調流程會使用直接繫結。</span><span class="sxs-lookup"><span data-stu-id="d0f65-119">The **CableOrder1** and **CableOrder2** orchestrations use direct binding.</span></span> <span data-ttu-id="d0f65-120">這些協調流程直接繫結的相關資訊，請參閱[實作會反白顯示的商務程序管理解決方案](../core/implementation-highlights-of-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="d0f65-120">For more information about the direct binding of these orchestrations, see [Implementation Highlights of the Business Process Management Solution](../core/implementation-highlights-of-the-business-process-management-solution.md).</span></span>  
  
 <span data-ttu-id="d0f65-121">許多協調流程會寫入，如此才能被中斷期間處理使用**中斷**協調流程。</span><span class="sxs-lookup"><span data-stu-id="d0f65-121">Many of the orchestrations are written so that they can be interrupted during processing using the **Interrupt** orchestration.</span></span> <span data-ttu-id="d0f65-122">如需中斷機制的詳細資訊，請參閱[程序管理員邏輯](../core/process-manager-logic.md)。</span><span class="sxs-lookup"><span data-stu-id="d0f65-122">For more information about the interrupt mechanism, see [Process Manager Logic](../core/process-manager-logic.md).</span></span>  
  
## <a name="back-end-applications"></a><span data-ttu-id="d0f65-123">後端應用程式</span><span class="sxs-lookup"><span data-stu-id="d0f65-123">Back-end Applications</span></span>  
 <span data-ttu-id="d0f65-124">商務程序管理解決方案會使用所有後端應用程式的模擬。</span><span class="sxs-lookup"><span data-stu-id="d0f65-124">The Business Process Management solution uses simulations for all of the back-end applications.</span></span> <span data-ttu-id="d0f65-125">**CableOrder1**， **CableOrder2**，和他們使用所有的協調流程採用特殊**OrderHandler**物件。</span><span class="sxs-lookup"><span data-stu-id="d0f65-125">**CableOrder1**, **CableOrder2**, and the orchestrations they use all employ a special **OrderHandler** object.</span></span> <span data-ttu-id="d0f65-126">**OrderHandler**用以通訊的模擬訂單管理系統的.NET 遠端處理。</span><span class="sxs-lookup"><span data-stu-id="d0f65-126">The **OrderHandler** uses .NET remoting to communicate with a simulation of an order management system.</span></span> <span data-ttu-id="d0f65-127">**CableProvisioningSystemClient**和**BTSScnBPMProvisioning** ( **CableProvisioningSystemServer**專案) 組件模擬的前端與後端管理系統的順序。</span><span class="sxs-lookup"><span data-stu-id="d0f65-127">The **CableProvisioningSystemClient** and **BTSScnBPMProvisioning** (the **CableProvisioningSystemServer** project) assemblies simulate the front and back ends of the order managing system, respectively.</span></span>  
  
 <span data-ttu-id="d0f65-128">解決方案會使用 Windows form 應用程式， **BSTScnBPMFacilities** ( **FacilitiesSimulator**專案)，以模擬處理功能要求的 MSMQ 伺服器。</span><span class="sxs-lookup"><span data-stu-id="d0f65-128">The solution uses a Windows forms application, **BSTScnBPMFacilities** (the **FacilitiesSimulator** project), to simulate the MSMQ server that handles the facilities requests.</span></span>  
  
 <span data-ttu-id="d0f65-129">除了這些元件以外，協調流程也會在 SQL Server 資料庫中建立項目，以維護訂單與其處理的歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="d0f65-129">In addition to these components, the orchestrations also make entries in a SQL Server database to maintain a history of orders and their processing.</span></span>  
  
## <a name="pipelines"></a><span data-ttu-id="d0f65-130">管線</span><span class="sxs-lookup"><span data-stu-id="d0f65-130">Pipelines</span></span>  
 <span data-ttu-id="d0f65-131">這個解決方案僅會使用透過 BizTalk 管理主控台或繫結檔案所設定的標準預設管線。</span><span class="sxs-lookup"><span data-stu-id="d0f65-131">The solution uses only standard default pipelines configured through the BizTalk Administration console or binding files.</span></span> <span data-ttu-id="d0f65-132">不過，管線會大量使用個別執行個體的組態。</span><span class="sxs-lookup"><span data-stu-id="d0f65-132">The pipelines do, however, make extensive use of per-instance configuration.</span></span> <span data-ttu-id="d0f65-133">由 FTP 傳送之訂單的接收埠會使用個別執行個體組態來設定信封。</span><span class="sxs-lookup"><span data-stu-id="d0f65-133">The receive port for orders sent by FTP uses per-instance configuration to configure the envelope.</span></span> <span data-ttu-id="d0f65-134">如需每個執行個體組態的詳細資訊，請參閱[如何部署管線](../core/how-to-deploy-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="d0f65-134">For more information about per-instance configuration, see [How to Deploy Pipelines](../core/how-to-deploy-pipelines.md).</span></span>  
  
## <a name="custom-adapter"></a><span data-ttu-id="d0f65-135">自訂配接器</span><span class="sxs-lookup"><span data-stu-id="d0f65-135">Custom Adapter</span></span>  
 <span data-ttu-id="d0f65-136">解決方案會使用自訂的配接器， **OpsAdapter**、 處理中偵測到一些錯誤**OrderManager**和**ErrorHandler**協調流程。</span><span class="sxs-lookup"><span data-stu-id="d0f65-136">The solution uses a custom adapter, the **OpsAdapter**, to process some errors detected in the **OrderManager** and **ErrorHandler** orchestrations.</span></span> <span data-ttu-id="d0f65-137">這個解決方案會使用指定錯誤報告之連接埠上的配接器。</span><span class="sxs-lookup"><span data-stu-id="d0f65-137">The solution uses the adapter on ports for which error reporting is specified.</span></span> <span data-ttu-id="d0f65-138">配接器會取得錯誤並傳送到作業系統上。</span><span class="sxs-lookup"><span data-stu-id="d0f65-138">The adapter takes the errors and sends them on to the operations system.</span></span> <span data-ttu-id="d0f65-139">如需錯誤報告的詳細資訊，請參閱[使用失敗訊息路由](../core/using-failed-message-routing.md)。</span><span class="sxs-lookup"><span data-stu-id="d0f65-139">For more information about error reporting, see [Using Failed Message Routing](../core/using-failed-message-routing.md).</span></span>  
  
## <a name="client-application"></a><span data-ttu-id="d0f65-140">用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="d0f65-140">Client Application</span></span>  
 <span data-ttu-id="d0f65-141">解決方案包括由 C# 程式，ASP.NET Web 網頁**CSRMain.aspx**，以模擬客戶服務系統。</span><span class="sxs-lookup"><span data-stu-id="d0f65-141">The solution includes an ASP.NET Web page backed by a C# program, **CSRMain.aspx**, to simulate the customer service system.</span></span>  
  
## <a name="other-assemblies"></a><span data-ttu-id="d0f65-142">其他組件</span><span class="sxs-lookup"><span data-stu-id="d0f65-142">Other Assemblies</span></span>  
 <span data-ttu-id="d0f65-143">解決方案會使用兩個額外的組件，**結構描述**和**公用程式**。</span><span class="sxs-lookup"><span data-stu-id="d0f65-143">The solution uses two additional assemblies, **Schemas** and **Utilities**.</span></span> <span data-ttu-id="d0f65-144">**結構描述**組件定義這個解決方案會使用不同的協調流程之間通訊的這類訊息**中斷**訊息。</span><span class="sxs-lookup"><span data-stu-id="d0f65-144">The **Schemas** assembly defines the messages the solution uses for communicating among the different orchestrations such as the **Interrupt** message.</span></span> <span data-ttu-id="d0f65-145">解決方案也會使用定義在數個.NET 訊息**SchemaClasses**組件。</span><span class="sxs-lookup"><span data-stu-id="d0f65-145">The solution also uses several .NET messages defined in the **SchemaClasses** assembly.</span></span>  
  
 <span data-ttu-id="d0f65-146">**公用程式**組件包括公用程式類別和方法，以協助處理訊息、 特定的例外狀況類型定義加入方案中，從 SSO 密碼存放區中，讀取組態值，以及協助進行錯誤處理。</span><span class="sxs-lookup"><span data-stu-id="d0f65-146">The **Utilities** assembly includes utility classes and methods to help handle messages, to define an exception type specific to the solution, to read configuration values from the SSO secret store, and to help with error handling.</span></span> <span data-ttu-id="d0f65-147">組件也包括**Recaller**物件。</span><span class="sxs-lookup"><span data-stu-id="d0f65-147">The assembly also includes the **Recaller** object.</span></span>  
  
 <span data-ttu-id="d0f65-148">其他組件包括對應和結構描述的組件，例如**OrderBrokerMaps**， **OrderBrokerSchemas**，**對應**， **MessagingSchemas**，和**SchemaClasses**。</span><span class="sxs-lookup"><span data-stu-id="d0f65-148">Other assemblies include map and schema assemblies such as **OrderBrokerMaps**, **OrderBrokerSchemas**, **Maps**, **MessagingSchemas**, and **SchemaClasses**.</span></span>  
  
 <span data-ttu-id="d0f65-149">**ServiceLevelTracking**組件包含一般的成品與 BAM 搭配使用，以追蹤訂單和處理。</span><span class="sxs-lookup"><span data-stu-id="d0f65-149">The **ServiceLevelTracking** assembly contains the common artifacts used with BAM to track orders and processing.</span></span> <span data-ttu-id="d0f65-150">訂單處理動作階段所使用的是在**CableOrderActions**組件。</span><span class="sxs-lookup"><span data-stu-id="d0f65-150">Order processing actions used by the stages are in the **CableOrderActions** assembly.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d0f65-151">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d0f65-151">See Also</span></span>  
 <span data-ttu-id="d0f65-152">[商務程序管理解決方案中的模式](../core/patterns-in-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-152">[Patterns in the Business Process Management Solution](../core/patterns-in-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="d0f65-153">[商務程序管理解決方案中的處理](../core/processing-in-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-153">[Processing in the Business Process Management Solution](../core/processing-in-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="d0f65-154">[商務程序管理解決方案的實作重點](../core/implementation-highlights-of-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-154">[Implementation Highlights of the Business Process Management Solution](../core/implementation-highlights-of-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="d0f65-155">[監視與 BAM 商務程序管理解決方案](../core/monitoring-the-business-process-management-solution-with-bam.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-155">[Monitoring the Business Process Management Solution with BAM](../core/monitoring-the-business-process-management-solution-with-bam.md) </span></span>  
 <span data-ttu-id="d0f65-156">[版本控制商務程序管理解決方案](../core/versioning-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-156">[Versioning the Business Process Management Solution](../core/versioning-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="d0f65-157">[商務程序管理解決方案參考](../core/business-process-management-solution-reference.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-157">[Business Process Management Solution Reference](../core/business-process-management-solution-reference.md) </span></span>  
 <span data-ttu-id="d0f65-158">[開發商務程序管理解決方案](../core/developing-a-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="d0f65-158">[Developing a Business Process Management Solution](../core/developing-a-business-process-management-solution.md) </span></span>  
 [<span data-ttu-id="d0f65-159">商務程序管理解決方案的檔案庫存</span><span class="sxs-lookup"><span data-stu-id="d0f65-159">File Inventory for the Business Process Management Solution</span></span>](../core/file-inventory-for-the-business-process-management-solution.md)