---
title: "範例 BizTalk Server 高可用性實例 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- architecture, small distributions
- examples, high availability
- architecture, examples
- high availability, examples
- examples, architecture
- databases, clustering
- architecture, medium distributions
- scaling
- architecture, large distributions
ms.assetid: ad9e3f57-1a23-41c2-82c9-dc8e1b29ed4d
caps.latest.revision: "30"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ff4db96e89dc91ee96aaf5f0b60f0de34ce83425
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="sample-biztalk-server-high-availability-scenarios"></a><span data-ttu-id="93f5e-102">BizTalk Server 高可用性實例範例</span><span class="sxs-lookup"><span data-stu-id="93f5e-102">Sample BizTalk Server High Availability Scenarios</span></span>
<span data-ttu-id="93f5e-103">本主題說明在 Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中透過向外擴充的主控件層提供高可用性的實例。</span><span class="sxs-lookup"><span data-stu-id="93f5e-103">This topic describes the scenarios in Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that provide high availability through scaled-out tiers of hosts.</span></span> <span data-ttu-id="93f5e-104">藉由在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中分隔功能部分為不同的主控件和階層，系統管理員可以為每個主控件提供備援並可獨立於其他主控件之外擴充它們。</span><span class="sxs-lookup"><span data-stu-id="93f5e-104">By separating areas of functionality into different hosts and tiers in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], administrators can provide redundancy for each host and scale them independently of other hosts.</span></span> <span data-ttu-id="93f5e-105">若要為每個功能部分提供高可用性，您可以為每個主要功能 (接收、處理、傳送和追蹤) 建立不同的主控件，並叢集 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 資料庫及「企業單一登入」主要密碼伺服器。</span><span class="sxs-lookup"><span data-stu-id="93f5e-105">To provide high availability for each functional area, you create separate hosts for each primary function—receiving, processing, sending, and tracking—and cluster the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and the Enterprise Single Sign-On master secret server.</span></span>  
  
## <a name="small-biztalk-server-deployments"></a><span data-ttu-id="93f5e-106">小型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="93f5e-106">Small BizTalk Server Deployments</span></span>  
 <span data-ttu-id="93f5e-107">可同時為 SQL Server 和 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 提供高可用性的最小 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署，是由兩部具有 SQL Server 主動/主動叢集組態的電腦所組成。</span><span class="sxs-lookup"><span data-stu-id="93f5e-107">The smallest [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the both SQL Server and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is made up of two computers that have an active/active cluster configuration for SQL Server.</span></span> <span data-ttu-id="93f5e-108">兩部電腦都包含環境中所有 BizTalk 主控件的執行個體。</span><span class="sxs-lookup"><span data-stu-id="93f5e-108">Both computers contain instances of all the BizTalk Hosts in the environment.</span></span> <span data-ttu-id="93f5e-109">若一部電腦失敗或發生錯誤，其他電腦仍會維護 SQL Server 與 BizTalk Server 的服務可用性。</span><span class="sxs-lookup"><span data-stu-id="93f5e-109">If one computer fails or encounters errors, the other computer maintains service availability for both SQL Server and BizTalk Server.</span></span> <span data-ttu-id="93f5e-110">此組態並不真的高度可用，因為其並不支援主要密碼伺服器叢集，不支援的原因是因為在叢集「企業單一登入」資源為被動的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 電腦上，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 主控件執行個體無法啟動。</span><span class="sxs-lookup"><span data-stu-id="93f5e-110">This configuration is not highly available because it does not accommodate clustering the master secret server, since [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instances will not start on a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer where the clustered Enterprise Single Sign-On resource is passive.</span></span> <span data-ttu-id="93f5e-111">如需叢集化主要密碼伺服器的詳細資訊，請參閱[高可用性的企業單一登入](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="93f5e-111">For more information about clustering the master secret server, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
 <span data-ttu-id="93f5e-112">對於 5 部電腦以下的小型 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署，建議您讓包含 BizTalk Server 資料庫的 SQL Server 叢集在與 BizTalk Server 電腦不同的電腦上執行。</span><span class="sxs-lookup"><span data-stu-id="93f5e-112">For small [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that contain fewer than five computers, we recommend that the SQL Server cluster that contains the BizTalk Server databases runs on separate computers from the BizTalk Server computers.</span></span> <span data-ttu-id="93f5e-113">BizTalk Server 電腦可執行所有 BizTalk 主控件 (接收、處理和傳送)。</span><span class="sxs-lookup"><span data-stu-id="93f5e-113">The BizTalk Server computers can run all the BizTalk Hosts (receive, process, and send).</span></span> <span data-ttu-id="93f5e-114">若要讓這個部署高度可用，請叢集 SQL Server 及「企業單一登入」主要密碼伺服器，並具備兩個 BizTalk Server，使其各自在您的環境中執行每個主控件的執行個體。</span><span class="sxs-lookup"><span data-stu-id="93f5e-114">To make this deployment highly available, cluster the SQL Server and the Enterprise Single Sign-On master secret server, and have two BizTalk Servers, each running an instance of each host in your environment.</span></span>  
  
 <span data-ttu-id="93f5e-115">下圖顯示高度可用的小型 BizTalk Server 部署。</span><span class="sxs-lookup"><span data-stu-id="93f5e-115">The following figure shows a small BizTalk Server deployment that is highly available.</span></span>  
  
 <span data-ttu-id="93f5e-116">![小型 BizTalk Server 部署](../core/media/tdi-highava-smalldepl.gif "TDI_HighAva_SmallDepl")</span><span class="sxs-lookup"><span data-stu-id="93f5e-116">![Small BizTalk Server Deployment](../core/media/tdi-highava-smalldepl.gif "TDI_HighAva_SmallDepl")</span></span>  
  
## <a name="medium-sized-biztalk-server-deployments"></a><span data-ttu-id="93f5e-117">中型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="93f5e-117">Medium-Sized BizTalk Server Deployments</span></span>  
 <span data-ttu-id="93f5e-118">對於包含五至十部電腦的中型部署，建議您叢集包含 BizTalk Server 資料庫及「企業單一登入」主要密碼伺服器的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="93f5e-118">For medium-sized deployments that contain five to ten computers, we recommend that you cluster the SQL Server that contains the BizTalk Server databases and the Enterprise Single Sign-On master secret server.</span></span> <span data-ttu-id="93f5e-119">若您的實例需要執行大量接收，您可能要指派兩部 BizTalk Server 專用於執行接收主控件執行個體，以提供高度可用的方案。</span><span class="sxs-lookup"><span data-stu-id="93f5e-119">If your scenario is receive-intensive, you may want to dedicate two BizTalk Servers to run the receiving host instances to provide a highly available solution.</span></span> <span data-ttu-id="93f5e-120">接著您可以讓兩部或以上的電腦執行處理和傳送主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="93f5e-120">You can then have two more computers that are running both the processing and send host instances.</span></span> <span data-ttu-id="93f5e-121">若要讓此成為高度可用的部署，請在兩部 BizTalk Server 上建立處理和傳送主控件的主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="93f5e-121">To make this a highly available deployment, create host instances of both the processing and send hosts on two BizTalk Servers.</span></span> <span data-ttu-id="93f5e-122">同樣地，若您的實例需要執行大量處理，您可能要指派兩部 BizTalk Server 專用於執行處理主控件執行個體，並讓其餘兩部 BizTalk Server 執行接收和傳送主控件的執行個體。</span><span class="sxs-lookup"><span data-stu-id="93f5e-122">Similarly, if you have a processing-intensive scenario, you may want to dedicate two BizTalk Servers to run the processing host instances, and have the remaining two BizTalk Servers running instances of both the receive and send hosts.</span></span>  
  
 <span data-ttu-id="93f5e-123">下圖顯示高度可用的中型 BizTalk Server 部署，其中包含兩部專用於接收作業的 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="93f5e-123">The following figure shows a highly available medium-sized BizTalk Server deployment with two BizTalk Servers dedicated to receiving operations.</span></span>  
  
 <span data-ttu-id="93f5e-124">![媒體 &#45;BizTalk Server 部署的大小調整](../core/media/tdi-highava-meddepl.gif "TDI_HighAva_MedDepl")</span><span class="sxs-lookup"><span data-stu-id="93f5e-124">![Medium&#45;Sized BizTalk Server Deployment](../core/media/tdi-highava-meddepl.gif "TDI_HighAva_MedDepl")</span></span>  
  
 <span data-ttu-id="93f5e-125">如需高可用性的企業單一登入，請參閱[高可用性的企業單一登入](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="93f5e-125">For more information about high availability for Enterprise Single Sign-On, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
## <a name="large-scale-biztalk-server-deployments"></a><span data-ttu-id="93f5e-126">大型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="93f5e-126">Large-Scale BizTalk Server Deployments</span></span>  
 <span data-ttu-id="93f5e-127">對於包含 10 部或以上電腦的大型部署，請為接收、處理和傳送功能指派獨立的 BizTalk Server 電腦。</span><span class="sxs-lookup"><span data-stu-id="93f5e-127">For large-scale deployments that contain 10 or more computers, dedicate separate BizTalk Server computers for the receiving, processing, and sending functions.</span></span> <span data-ttu-id="93f5e-128">另外，若在群組中有許多 BizTalk Server 電腦，您可以納入其他 MessageBox 資料庫電腦以增加效能。</span><span class="sxs-lookup"><span data-stu-id="93f5e-128">Also, if you have many BizTalk Server computers in a group, you can include additional MessageBox database computers to increase performance.</span></span> <span data-ttu-id="93f5e-129">在此情況下，請叢集 MessageBox 資料庫及主要密碼伺服器，以提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="93f5e-129">In this case, cluster the MessageBox databases and the master secret server to provide high availability.</span></span>  
  
 <span data-ttu-id="93f5e-130">像這樣的分散式組態可以展現 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的彈性，因為它能讓您評估和識別部署中特定的失敗點，然後策略性地配置資源以減少系統中的那些失敗點。</span><span class="sxs-lookup"><span data-stu-id="93f5e-130">Such a distributed configuration demonstrates the flexibility of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] because it lets you to evaluate and identify specific points of failure in your deployment, and then strategically allocate resources to reduce those points in the system.</span></span> <span data-ttu-id="93f5e-131">今日動態的商務環境需要這樣的彈性，因為工作負載變動和商務需求可能每天都在改變。</span><span class="sxs-lookup"><span data-stu-id="93f5e-131">Today's dynamic business environment demands such flexibility because workload fluctuations and business requirements can change daily.</span></span>  
  
 <span data-ttu-id="93f5e-132">您只要將資源從耗用較少資源的電腦移到需要大量資源的電腦，以使用現有的資源來達成高可用性，而不需花費額外的金錢來升級或取得新硬體。</span><span class="sxs-lookup"><span data-stu-id="93f5e-132">Instead of spending additional money to upgrade or acquire new hardware, you can use existing resources to achieve high availability by moving resources from computers that consume few resources to computers that are resource-intensive.</span></span>  
  
 <span data-ttu-id="93f5e-133">下圖顯示大型 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署。</span><span class="sxs-lookup"><span data-stu-id="93f5e-133">The following figure shows a large-scale [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment.</span></span>  
  
 <span data-ttu-id="93f5e-134">![大型 &#45;調整 BizTalk Server 部署](../core/media/tdi-highava-largedepl.gif "TDI_HighAva_LargeDepl")</span><span class="sxs-lookup"><span data-stu-id="93f5e-134">![Large&#45;Scale BizTalk Server Deployment](../core/media/tdi-highava-largedepl.gif "TDI_HighAva_LargeDepl")</span></span>  
  
 <span data-ttu-id="93f5e-135">如需高可用性的企業單一登入，請參閱[高可用性的企業單一登入](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="93f5e-135">For more information about high availability for Enterprise Single Sign-On, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
## <a name="providing-high-availability-using-hyper-v-and-failover-clustering"></a><span data-ttu-id="93f5e-136">使用 Hyper-V 和容錯移轉叢集提供高可用性</span><span class="sxs-lookup"><span data-stu-id="93f5e-136">Providing High Availability using Hyper-V and Failover Clustering</span></span>  
 <span data-ttu-id="93f5e-137">將 Windows® Server 2008 Hyper-V 角色和 Windows Server 2008 容錯移轉叢集功能一起使用，可提供虛擬伺服器運算環境的高可用性。</span><span class="sxs-lookup"><span data-stu-id="93f5e-137">The Windows® Server 2008 Hyper-V role and the Windows Server 2008 Failover Clustering feature can be used together to provide high availability for a virtualized server computing environment.</span></span> <span data-ttu-id="93f5e-138">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署中所用的 BizTalk Server 電腦和 SQL Server 電腦可以安裝在 Hyper-V 虛擬環境，然後透過容錯移轉叢集功能得到高度可用性。</span><span class="sxs-lookup"><span data-stu-id="93f5e-138">The BizTalk Server computers and the SQL Server computers used in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment can be installed in a Hyper-V virtualized environment and then made highly available through failover clustering.</span></span> <span data-ttu-id="93f5e-139">因為在 Hyper-V 上執行虛擬作業系統會有相關的系統資源成本，所以建議在將此類方案部署到實際執行環境之前，先執行徹底的效能測試。</span><span class="sxs-lookup"><span data-stu-id="93f5e-139">Because there is a system resource cost associated with running a guest operating system on Hyper-V, we recommend that thorough performance testing is performed before deploying such a solution into production.</span></span> <span data-ttu-id="93f5e-140">如需有關使用 HYPER-V 和容錯移轉叢集在一起以提供高可用性的虛擬機器，請參閱 「 HYPER-V 逐步指南:: HYPER-V 和容錯移轉叢集 」 在[http://go.microsoft.com/fwlink/?LinkID=129113](http://go.microsoft.com/fwlink/?LinkID=129113)。</span><span class="sxs-lookup"><span data-stu-id="93f5e-140">For more information about using Hyper-V and Failover clustering together to provide high availability for virtual machines, see “Hyper-V Step-by-Step Guide: Hyper-V and Failover Clustering” at [http://go.microsoft.com/fwlink/?LinkID=129113](http://go.microsoft.com/fwlink/?LinkID=129113).</span></span> <span data-ttu-id="93f5e-141">如需有關部署[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]到 HYPER-V 虛擬化環境，請參閱 BizTalk Server HYPER-V 指南 》 下載[http://go.microsoft.com/fwlink/?LinkId=189706](http://go.microsoft.com/fwlink/?LinkId=189706)。</span><span class="sxs-lookup"><span data-stu-id="93f5e-141">For more information about deploying a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] into a Hyper-V virtualized environment, see the BizTalk Server Hyper-V Guide available for download at [http://go.microsoft.com/fwlink/?LinkId=189706](http://go.microsoft.com/fwlink/?LinkId=189706).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="93f5e-142">另請參閱</span><span class="sxs-lookup"><span data-stu-id="93f5e-142">See Also</span></span>  
 <span data-ttu-id="93f5e-143">[為 BizTalk 主控件提供高可用性](../core/providing-high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="93f5e-143">[Providing High Availability for BizTalk Hosts](../core/providing-high-availability-for-biztalk-hosts.md) </span></span>  
 <span data-ttu-id="93f5e-144">[為 BizTalk Server 資料庫提供高可用性](../core/providing-high-availability-for-biztalk-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="93f5e-144">[Providing High Availability for BizTalk Server Databases](../core/providing-high-availability-for-biztalk-server-databases.md) </span></span>  
 [<span data-ttu-id="93f5e-145">企業單一登入的高可用性</span><span class="sxs-lookup"><span data-stu-id="93f5e-145">High Availability for Enterprise Single Sign-On</span></span>](../core/high-availability-for-enterprise-single-sign-on.md)