---
title: 秘訣和訣竅尋找 MST 的 DTA 追蹤 |Microsoft 文件
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 7d72e4ac-d952-4cff-9a65-491e20945d40
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9faaaf7ebb47ac7ec18d8df6d8cb7c6ebd48d7f8
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
ms.locfileid: "22279878"
---
# <a name="tips-and-tricks-for-finding-mst-of-dta-tracking"></a><span data-ttu-id="af2b4-102">尋找 DTA 追蹤之 MST 的秘訣和訣竅</span><span class="sxs-lookup"><span data-stu-id="af2b4-102">Tips and Tricks for Finding MST of DTA Tracking</span></span>
<span data-ttu-id="af2b4-103">根據定義，MST 是以重現方式使用固定負載來測量系統效能的基準。</span><span class="sxs-lookup"><span data-stu-id="af2b4-103">By definition, MST is a benchmark to reproducibly measure system performance using a constant load.</span></span> <span data-ttu-id="af2b4-104">在下列情況中，瞭解 MST 將特別有用。</span><span class="sxs-lookup"><span data-stu-id="af2b4-104">Following are situations where knowing the MST is particularly useful.</span></span>  
  
1.  <span data-ttu-id="af2b4-105">**當您需要從系統的最低延遲**。</span><span class="sxs-lookup"><span data-stu-id="af2b4-105">**When you require the lowest latency from the system**.</span></span> <span data-ttu-id="af2b4-106">超過 MST 會在系統中產生積存，因此增加訊息延遲情況。</span><span class="sxs-lookup"><span data-stu-id="af2b4-106">Exceeding MST results in backlog in the system, which introduces increased latency for messages.</span></span> <span data-ttu-id="af2b4-107">即使積存只是暫時性，但這會對延遲造成立即且不利的影響。</span><span class="sxs-lookup"><span data-stu-id="af2b4-107">Even if the backlog is only temporary, backlog has an immediate and deleterious effect on latency.</span></span> <span data-ttu-id="af2b4-108">因此，瞭解系統的 MST 會顯示在個別訊息處理延遲暴增 (視組態而定，從數秒到數分鐘) 之前，可預期達到的絕對最大輸送量。</span><span class="sxs-lookup"><span data-stu-id="af2b4-108">So, knowing your systems MST will tell you the absolute maximum throughput you should expect to achieve before the latency of individual message processing increases dramatically (for example, from seconds to minutes depending on your configuration).</span></span>  
  
2.  <span data-ttu-id="af2b4-109">**比較與其他系統時**。</span><span class="sxs-lookup"><span data-stu-id="af2b4-109">**When comparing to other systems**.</span></span> <span data-ttu-id="af2b4-110">例如，相較於另一個系統 (例如本主題中的案例、案例研究或環境中的另一個系統)，若要驗證是否達到預期的 MST，則透過穩定輸入測量 MST，會提供可重現、明確的比較標準。</span><span class="sxs-lookup"><span data-stu-id="af2b4-110">For example, if you want to validate that you are achieving the expected MST compared to another system (for example, the scenario in this topic, a case study, or another system in your environment); measuring MST using a steady input offers a reproducible, unambiguous standard for comparison.</span></span>  
  
 <span data-ttu-id="af2b4-111">不用說，測量 MST 很耗時。</span><span class="sxs-lookup"><span data-stu-id="af2b4-111">Needless to say, however, it can be time consuming to measure MST.</span></span> <span data-ttu-id="af2b4-112">因此，在開始冗長的測量練習之前，您應該評估優點。</span><span class="sxs-lookup"><span data-stu-id="af2b4-112">Therefore, before you embark on a lengthy exercise to measure it, you should evaluate the benefits.</span></span> <span data-ttu-id="af2b4-113">大部分實際執行的系統不會經歷 MST 所測量的穩定輸入，而是隨時間變動的負載。</span><span class="sxs-lookup"><span data-stu-id="af2b4-113">Most production systems will not experience a steady input such as that measured by MST, but rather a load that changes over time.</span></span> <span data-ttu-id="af2b4-114">負載設定檔就是最終必要的測試項目，才能將系統付諸實際執行。</span><span class="sxs-lookup"><span data-stu-id="af2b4-114">It is this load profile that must ultimately be tested to certify a system prior to production.</span></span> <span data-ttu-id="af2b4-115">所幸，您可以用測量 MST 的相同技巧來評估實際執行負載設定檔的持續性。</span><span class="sxs-lookup"><span data-stu-id="af2b4-115">Fortunately, you can use the same technique that is used to measure MST to evaluate the sustainability of your production load profile.</span></span> <span data-ttu-id="af2b4-116">只要執行負載設定檔夠久，可以包含一或多個 BizTalkDTADb 資料庫資料保留時間，並觀察關鍵效能指標 (KPI) 即可。</span><span class="sxs-lookup"><span data-stu-id="af2b4-116">Simply run your load profile long enough to include one or more BizTalkDTADb database data retention windows and observe the key performance indicators (KPI).</span></span>  
  
 <span data-ttu-id="af2b4-117">重要的是，使用空白 BizTalkDTADb 資料庫啟動測試回合 (不論是 MST 還是負載設定檔)。</span><span class="sxs-lookup"><span data-stu-id="af2b4-117">It is important to start your test runs, whether MST or load profiles, with an empty BizTalkDTADb database.</span></span> <span data-ttu-id="af2b4-118">BizTalkDTADb 資料庫中儲存的資料具時效性，如果每個測試回合未重新取得空白資料庫，則會扭曲測試結果。</span><span class="sxs-lookup"><span data-stu-id="af2b4-118">The data that is stored in the BizTalkDTADb database is time sensitive and if it is not re-acquired from scratch for each test run, it can skew your results.</span></span> <span data-ttu-id="af2b4-119">根據資料保留時間，尋找 MST 的所需時間可能會大為增加。</span><span class="sxs-lookup"><span data-stu-id="af2b4-119">Depending on your data retention window, this can significantly increase the time it takes to find MST.</span></span> <span data-ttu-id="af2b4-120">若要緩和這個問題，請在測試回合期間即時調整負載，有助於更快速尋找 MST。</span><span class="sxs-lookup"><span data-stu-id="af2b4-120">To mitigate this, adjusting load "on the fly" during test runs can be useful in more quickly zeroing in on MST.</span></span>  
  
 <span data-ttu-id="af2b4-121">例如，如果已傳遞第一個保留時間，而且 KPI 指出輸送量還有成長空間 (例如，磁碟閒置時間仍然高於零)，您就可以遞增負載並觀察結果。</span><span class="sxs-lookup"><span data-stu-id="af2b4-121">For example, if you find that you have passed your first retention window time and the KPIs indicate you have headroom for higher throughput left (for example, disk idle time is still above zero), you can incrementally increase your load and observe the effect.</span></span> <span data-ttu-id="af2b4-122">用這個方式調整 MST 預估值之後，請務必使用空白 BizTalkDTADb 資料庫重新執行測試回合，驗證此預估值。</span><span class="sxs-lookup"><span data-stu-id="af2b4-122">After you have refined your MST estimate in this way, however, it is important that you perform a test run starting with an empty BizTalkDTADb database to validate your estimate.</span></span>  
  
## <a name="recommendations"></a><span data-ttu-id="af2b4-123">建議</span><span class="sxs-lookup"><span data-stu-id="af2b4-123">Recommendations</span></span>  
 <span data-ttu-id="af2b4-124">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的追蹤系統架構能夠追蹤廣泛的資訊，必須進行周密管理和監控。</span><span class="sxs-lookup"><span data-stu-id="af2b4-124">The tracking system architecture in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is capable of tracking a wide variety of information and must be managed and monitored carefully.</span></span> <span data-ttu-id="af2b4-125">MST 指出，對系統效能造成最大影響的因素如下：</span><span class="sxs-lookup"><span data-stu-id="af2b4-125">The factors that will most affect the performance of your system, as indicated by MST, are as follows:</span></span>  
  
-   <span data-ttu-id="af2b4-126">所需的系統輸送量。</span><span class="sxs-lookup"><span data-stu-id="af2b4-126">The desired throughput for the system.</span></span>  
  
-   <span data-ttu-id="af2b4-127">針對系統中每個訊息和服務執行個體所追蹤的資訊量。</span><span class="sxs-lookup"><span data-stu-id="af2b4-127">The volume of information tracked for each message and service instance in the system.</span></span> <span data-ttu-id="af2b4-128">這會決定 BizTalkDTADb 資料庫大小增加的速度，以及最終 BizTalkDTADb 資料庫多久必須清除以避免延遲。</span><span class="sxs-lookup"><span data-stu-id="af2b4-128">This will determine how quickly the size of the BizTalkDTADb database increases, and ultimately how often the BizTalkDTADb database must be purged to avoid falling behind.</span></span>  
  
-   <span data-ttu-id="af2b4-129">您希望在 BizTalkDTADb 資料庫中保留資料多久，即資料保留時間。</span><span class="sxs-lookup"><span data-stu-id="af2b4-129">How long you wish to retain data in the BizTalkDTADb database, that is, the data retention window.</span></span> <span data-ttu-id="af2b4-130">保留時間越久，BizTalkDTADb 資料庫會變得越大，因此會影響輸送量。</span><span class="sxs-lookup"><span data-stu-id="af2b4-130">The longer the window, the larger the BizTalkDTADb database will grow, affecting throughput.</span></span>  
  
-   <span data-ttu-id="af2b4-131">您要同時進行 BizTalkDTADb 資料庫資料封存與清除，還是為了維護 BizTalkDTADb 資料庫大小，只進行清除。</span><span class="sxs-lookup"><span data-stu-id="af2b4-131">Whether you archive BizTalkDTADb database data as well as purge, or just purge to maintain BizTalkDTADb database size.</span></span>  
  
 <span data-ttu-id="af2b4-132">尋找最大持續性輸送量，以便在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中進行追蹤的程序，包含三個關鍵效能指標：</span><span class="sxs-lookup"><span data-stu-id="af2b4-132">The process of finding the maximum sustainable throughput for tracking in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] involves three key performance indicators:</span></span>  
  
-   <span data-ttu-id="af2b4-133">DTAdb 資料檔案磁碟子系統的「實體磁碟閒置時間」</span><span class="sxs-lookup"><span data-stu-id="af2b4-133">Physical Disk Idle Time for the DTAdb data file disk subsystem.</span></span>  
  
-   <span data-ttu-id="af2b4-134">多工緩衝處理深度</span><span class="sxs-lookup"><span data-stu-id="af2b4-134">Spool depth</span></span>  
  
-   <span data-ttu-id="af2b4-135">BizTalkDTADbData 深度</span><span class="sxs-lookup"><span data-stu-id="af2b4-135">BizTalkDTADbData depth</span></span>  
  
 <span data-ttu-id="af2b4-136">藉由監控這三個關鍵效能指標並尋找下列項目，來尋找系統的 MST 或驗證實際執行設定檔輸送量：</span><span class="sxs-lookup"><span data-stu-id="af2b4-136">Find either your systems’ MST or validate your production profile throughput by monitoring these three key performance indicators looking for:</span></span>  
  
-   <span data-ttu-id="af2b4-137">穩定的多工緩衝處理和追蹤資料表深度。</span><span class="sxs-lookup"><span data-stu-id="af2b4-137">Stable spool and trackingdata table depth.</span></span>  
  
-   <span data-ttu-id="af2b4-138">接近零 (但不持續固定在零) 的 BizTalkDTADb 資料庫資料檔案磁碟實體閒置時間。</span><span class="sxs-lookup"><span data-stu-id="af2b4-138">BizTalkDTADb database data file disk physical idle time near, but not continuously "pegged" at, zero.</span></span>  
  
 <span data-ttu-id="af2b4-139">使用 DTA 追蹤功能有關聯的效能影響。</span><span class="sxs-lookup"><span data-stu-id="af2b4-139">Using the DTA tracking features has an associated performance impact.</span></span>  <span data-ttu-id="af2b4-140">預設追蹤在解決方案付諸實際執行後可能會大於需要，但由於它提供充分的問題解決資訊，會讓開發、初始測試和偵錯更加輕鬆。</span><span class="sxs-lookup"><span data-stu-id="af2b4-140">Default tracking may track more than is needed once a solution is in production, but can make development and initial testing and debugging easier by providing ample problem resolution information.</span></span> <span data-ttu-id="af2b4-141">因此，建議在開發和初始測試期間啟動預設追蹤。</span><span class="sxs-lookup"><span data-stu-id="af2b4-141">Therefore, we recommend that default tracking be left on during development and initial testing.</span></span> <span data-ttu-id="af2b4-142">一旦在 BizTalk 部署的解決方案穩定並準備實際執行驗證 (包括效能測試) 時，建議您仔細檢查在實際執行中必須追蹤的資訊量，以及在 BizTalkDTADb 資料庫中必須保留資訊的時間長度，並適當進行調整。</span><span class="sxs-lookup"><span data-stu-id="af2b4-142">Once a solution deployed on BizTalk is stable and ready for production certification, including performance testing, it is recommended that you carefully examine the amount of information that needs to be tracked in production, and the length of time it needs to be kept in the BizTalkDTADb database and adjust accordingly.</span></span>  
  
 <span data-ttu-id="af2b4-143">例如，如果不需為了不可否認性與問題解決目的而追蹤訊息內文，請勿開啟訊息內文追蹤。</span><span class="sxs-lookup"><span data-stu-id="af2b4-143">For example, if message bodies do not need to be tracked for either non-repudiation or problem resolution purposes, then do not turn on message body tracking.</span></span> <span data-ttu-id="af2b4-144">為了說明這點，在此案例中所述[測量 MST 的 DTA 追蹤測試案例](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md)時的訊息內文追蹤的追蹤組態元件已被排除，MST 會加倍為 40訊息/秒。</span><span class="sxs-lookup"><span data-stu-id="af2b4-144">To illustrate this point, in the example scenario described in [Test Scenarios for Measuring MST of DTA Tracking](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md), when the message body tracking component of the tracking configuration was eliminated, the MST was doubled to 40 messages/second.</span></span>  
  
 <span data-ttu-id="af2b4-145">此外，請記住，即使發生問題，在許多狀況下 (但非全部)，訊息會擱置在 MessageBox 資料庫中，不需追蹤訊息內文即可擷取和檢查訊息。</span><span class="sxs-lookup"><span data-stu-id="af2b4-145">Also, keep in mind that even when problems do occur, in many (but by no means all) cases, messages are suspended in the MessageBox database and can be retrieved and inspected without needing to track message bodies.</span></span>  
  
 <span data-ttu-id="af2b4-146">集中於系統的負載持續性：</span><span class="sxs-lookup"><span data-stu-id="af2b4-146">Focus on the sustainability of the load you place on the system:</span></span>  
  
-   <span data-ttu-id="af2b4-147">即使在一般維護活動的同時，系統是否能無限期地持續實際執行負載設定檔？</span><span class="sxs-lookup"><span data-stu-id="af2b4-147">Can your system sustain the production load profile indefinitely even with normal maintenance activities?</span></span>  
  
-   <span data-ttu-id="af2b4-148">如果發生狀況 (例如計劃與非計劃的 BizTalkDTADb 資料庫中斷) 而導致系統產生積存？</span><span class="sxs-lookup"><span data-stu-id="af2b4-148">What if something happens that causes the system to sustain a backlog, such as a planned or unplanned BizTalkDTADb database outage?</span></span>  
  
 <span data-ttu-id="af2b4-149">最好根據最壞案例設定目標，並針對這些目標進行測試。</span><span class="sxs-lookup"><span data-stu-id="af2b4-149">It is a good idea to set goals based on worst case scenarios and test to those goals.</span></span> <span data-ttu-id="af2b4-150">例如，如果您知道定期計劃性的維護週期必須讓 BizTalkDTADb 資料庫離線，則可以在測試回合期間模擬此中斷狀況，評估系統從產生的積存復原的能力。</span><span class="sxs-lookup"><span data-stu-id="af2b4-150">For example, if you know that there is a periodic planned maintenance cycle that will take the BizTalkDTADb database off line, emulate this outage during a test run to evaluate the ability of the system to recover from the resulting backlog.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="af2b4-151">另請參閱</span><span class="sxs-lookup"><span data-stu-id="af2b4-151">See Also</span></span>  
 <span data-ttu-id="af2b4-152">[測量最大持續性追蹤輸送量](../core/measuring-maximum-sustainable-tracking-throughput.md) </span><span class="sxs-lookup"><span data-stu-id="af2b4-152">[Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md) </span></span>  
 <span data-ttu-id="af2b4-153">[瞭解 DTA 追蹤效能行為](../core/understanding-dta-tracking-performance-behavior.md) </span><span class="sxs-lookup"><span data-stu-id="af2b4-153">[Understanding DTA Tracking Performance Behavior](../core/understanding-dta-tracking-performance-behavior.md) </span></span>  
 <span data-ttu-id="af2b4-154">[測量 MST 的 DTA 追蹤測試案例](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="af2b4-154">[Test Scenarios for Measuring MST of DTA Tracking](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md) </span></span>  
 [<span data-ttu-id="af2b4-155">調整追蹤資料庫大小的指導方針</span><span class="sxs-lookup"><span data-stu-id="af2b4-155">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)