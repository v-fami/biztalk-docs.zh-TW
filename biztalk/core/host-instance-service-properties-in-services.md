---
title: "裝載服務的執行個體服務屬性 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8b317161-83a9-42d5-b24f-48ff1e54b94a
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 26d29575e282b7e558f223733ff7e7ce562f63ba
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="host-instance-service-properties-in-services"></a><span data-ttu-id="8cae4-102">服務的主控件執行個體服務屬性</span><span class="sxs-lookup"><span data-stu-id="8cae4-102">Host Instance Service Properties in Services</span></span>
## <a name="host-instance-service-properties-in-services"></a><span data-ttu-id="8cae4-103">服務的主控件執行個體服務屬性</span><span class="sxs-lookup"><span data-stu-id="8cae4-103">Host Instance Service Properties in Services</span></span>  
 <span data-ttu-id="8cae4-104">建立 a BizTalk 主控建執行個體時，也將在「服務」中建立服務。</span><span class="sxs-lookup"><span data-stu-id="8cae4-104">When a BizTalk host instance is created, a service in Services is also created.</span></span> <span data-ttu-id="8cae4-105">下表說明最常見的屬性。</span><span class="sxs-lookup"><span data-stu-id="8cae4-105">The table below discusses the most common properties.</span></span>  
  
|<span data-ttu-id="8cae4-106">選項</span><span class="sxs-lookup"><span data-stu-id="8cae4-106">Option</span></span>|<span data-ttu-id="8cae4-107">Description</span><span class="sxs-lookup"><span data-stu-id="8cae4-107">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="8cae4-108">一般：**啟動類型**</span><span class="sxs-lookup"><span data-stu-id="8cae4-108">General: **Startup Type**</span></span>|<span data-ttu-id="8cae4-109">預設值設定為**自動**允許電腦重新啟動時自動啟動主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="8cae4-109">Default is set to **Automatic** to allow the host instance to automatically start when the computer is restarted.</span></span> <span data-ttu-id="8cae4-110">在實際執行環境中，這個屬性一律設定為**自動**。</span><span class="sxs-lookup"><span data-stu-id="8cae4-110">In a Production environment, this property is normally always set to **Automatic**.</span></span>|  
|<span data-ttu-id="8cae4-111">登入：**帳戶**</span><span class="sxs-lookup"><span data-stu-id="8cae4-111">Log On: **Account**</span></span>|<span data-ttu-id="8cae4-112">設定為使用者帳戶指定 BizTalk 設定時，或建立新的主控件執行個體時。</span><span class="sxs-lookup"><span data-stu-id="8cae4-112">Set to the user account specified when BizTalk is configured or when a new host instance is created.</span></span> <span data-ttu-id="8cae4-113">BizTalk 和 SQL Server 位於不同的電腦時，帳戶必須是網域帳戶。</span><span class="sxs-lookup"><span data-stu-id="8cae4-113">When BizTalk and SQL Server are on different computers, the account must be a domain account.</span></span> <span data-ttu-id="8cae4-114">如果 BizTalk 和 SQL Server 位於同一部電腦，帳戶可以是網域帳戶或本機帳戶。</span><span class="sxs-lookup"><span data-stu-id="8cae4-114">If BizTalk and SQL Server are on the same computer, the account can be a domain account or a local account.</span></span>|  
|<span data-ttu-id="8cae4-115">復原：**第一次失敗**</span><span class="sxs-lookup"><span data-stu-id="8cae4-115">Recovery: **First failure**</span></span>|<span data-ttu-id="8cae4-116">預設值設定為**重新啟動服務**。</span><span class="sxs-lookup"><span data-stu-id="8cae4-116">Default is set to **Restart the Service**.</span></span> <span data-ttu-id="8cae4-117">如果主控件執行個體第一次意外停止，則此設定將嘗試重新啟動主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="8cae4-117">If the host instance stops unexpectedly the first time, then this setting will attempt to restart the host instance.</span></span><br /><br /> <span data-ttu-id="8cae4-118">如果主控件執行個體成功啟動，然後立即停止，則**失敗的第二個**屬性會套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-118">If the host instance starts successfully and then immediately stops, then the **Second failure** property is applied.</span></span><br /><br /> <span data-ttu-id="8cae4-119">如果主控件執行個體無法啟動，然後在**失敗的第二個**屬性將不會套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-119">If the host instance fails to start, then the **Second failure** property will not apply.</span></span> <span data-ttu-id="8cae4-120">此後將不進行其他任何重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-120">No additional restart attempts will be made.</span></span> <span data-ttu-id="8cae4-121">主控件執行個體將保持停止。</span><span class="sxs-lookup"><span data-stu-id="8cae4-121">The host instance will remain stopped.</span></span>|  
|<span data-ttu-id="8cae4-122">復原：**第二個失敗**</span><span class="sxs-lookup"><span data-stu-id="8cae4-122">Recovery: **Second failure**</span></span>|<span data-ttu-id="8cae4-123">預設值設定為**重新啟動服務**。</span><span class="sxs-lookup"><span data-stu-id="8cae4-123">Default is set to **Restart the Service**.</span></span> <span data-ttu-id="8cae4-124">如果主控件執行個體第二次意外停止，則此設定將嘗試重新啟動主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="8cae4-124">If the host instance stops unexpectedly the second time, then this setting will attempt to restart the host instance.</span></span><br /><br /> <span data-ttu-id="8cae4-125">如果主控件執行個體成功啟動，然後立即停止，則**後續失敗**屬性會套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-125">If the host instance starts successfully and then immediately stops, then the **Subsequent failures** property is applied.</span></span><br /><br /> <span data-ttu-id="8cae4-126">如果主控件執行個體無法啟動，然後在**後續失敗**屬性將不會套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-126">If the host instance fails to start, then the **Subsequent failure** property will not apply.</span></span> <span data-ttu-id="8cae4-127">此後將不進行其他任何重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-127">No additional restart attempts will be made.</span></span> <span data-ttu-id="8cae4-128">主控件執行個體將保持停止。</span><span class="sxs-lookup"><span data-stu-id="8cae4-128">The host instance will remain stopped.</span></span>|  
|<span data-ttu-id="8cae4-129">復原：**後續失敗**</span><span class="sxs-lookup"><span data-stu-id="8cae4-129">Recovery: **Subsequent failures**</span></span>|<span data-ttu-id="8cae4-130">預設值設定為**重新啟動服務**。</span><span class="sxs-lookup"><span data-stu-id="8cae4-130">Default is set to **Restart the Service**.</span></span> <span data-ttu-id="8cae4-131">如果主控件執行個體第三次意外停止，則此設定將嘗試重新啟動主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="8cae4-131">If the host instance stops unexpectedly the third time, then this setting will attempt to restart the host instance.</span></span><br /><br /> <span data-ttu-id="8cae4-132">如果主控件執行個體成功啟動，然後立即停止，則**後續失敗**屬性會繼續套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-132">If the host instance starts successfully and then immediately stops, then the **Subsequent failures** property will continue to be applied.</span></span><br /><br /> <span data-ttu-id="8cae4-133">如果主控件執行個體無法啟動，然後在**後續失敗**屬性將不會套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-133">If the host instance fails to start, then the **Subsequent failure** property will not apply.</span></span> <span data-ttu-id="8cae4-134">此後將不進行其他任何重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-134">No additional restart attempts will be made.</span></span> <span data-ttu-id="8cae4-135">主控件執行個體將保持停止。</span><span class="sxs-lookup"><span data-stu-id="8cae4-135">The host instance will remain stopped.</span></span>|  
|<span data-ttu-id="8cae4-136">復原：**重新啟動服務於**</span><span class="sxs-lookup"><span data-stu-id="8cae4-136">Recovery: **Restart service after**</span></span>|<span data-ttu-id="8cae4-137">預設為 1 分鐘，必要時可增加。</span><span class="sxs-lookup"><span data-stu-id="8cae4-137">Default is 1 minute and can be increased if needed.</span></span>|  
|<span data-ttu-id="8cae4-138">相依性</span><span class="sxs-lookup"><span data-stu-id="8cae4-138">Dependencies</span></span>|<span data-ttu-id="8cae4-139">**所有**啟動 BizTalk 主控件執行個體之前，必須先啟動列出的元件。</span><span class="sxs-lookup"><span data-stu-id="8cae4-139">**All** the listed components must be started before the BizTalk host instance will start.</span></span> <span data-ttu-id="8cae4-140">這包括企業單一登入。</span><span class="sxs-lookup"><span data-stu-id="8cae4-140">This includes Enterprise Single Sign-On.</span></span> <span data-ttu-id="8cae4-141">如果使用 Windows Server 2008，請參閱下列知識庫文章：</span><span class="sxs-lookup"><span data-stu-id="8cae4-141">If using Windows Server 2008, refer to the following KB article:</span></span><br /><br /> <span data-ttu-id="8cae4-142">[942284](http://support.microsoft.com/kb/942284)如預期般在重新啟動正在執行 Windows Vista 或 Windows Server 2008 的電腦時，可能無法啟動 BizTalk 服務</span><span class="sxs-lookup"><span data-stu-id="8cae4-142">[942284](http://support.microsoft.com/kb/942284) A BizTalk Service service may not start as expected when you restart a computer that is running Windows Vista or Windows Server 2008</span></span>|  
  
 <span data-ttu-id="8cae4-143">**請注意**服務中的 BizTalk 主控件執行個體屬性也會儲存於 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\BTSSvc$*BizTalkHostName*登錄機碼。</span><span class="sxs-lookup"><span data-stu-id="8cae4-143">**Note** The BizTalk host instances properties in Services are also stored in the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\BTSSvc$*BizTalkHostName* registry key.</span></span>  
  
### <a name="recovery"></a><span data-ttu-id="8cae4-144">復原</span><span class="sxs-lookup"><span data-stu-id="8cae4-144">Recovery</span></span>  
 <span data-ttu-id="8cae4-145">主控件執行個體服務無法啟動時，「服務」中的回復功能不提供不限次數的服務重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-145">The Recovery capability in Services does not provide indefinite service restart attempts when the host instance service fails to start.</span></span> <span data-ttu-id="8cae4-146">只要修改「回復」屬性，即可改善 BizTalk 主控件執行個體的執行時間。</span><span class="sxs-lookup"><span data-stu-id="8cae4-146">By modifying the Recovery properties, it is possible to improve uptime of a BizTalk host instance.</span></span> <span data-ttu-id="8cae4-147">最常造成 BizTalk 主控件執行個體停止的情況包括：</span><span class="sxs-lookup"><span data-stu-id="8cae4-147">The most common scenarios that would cause a BizTalk host instance to stop include:</span></span>  
  
-   <span data-ttu-id="8cae4-148">SQL Server 網路連線中斷</span><span class="sxs-lookup"><span data-stu-id="8cae4-148">Loss of network connectivity with the SQL Server</span></span>  
  
-   <span data-ttu-id="8cae4-149">記憶體不足例外狀況</span><span class="sxs-lookup"><span data-stu-id="8cae4-149">Out Of Memory exception</span></span>  
  
-   <span data-ttu-id="8cae4-150">存取違規</span><span class="sxs-lookup"><span data-stu-id="8cae4-150">Access Violation</span></span>  
  
 <span data-ttu-id="8cae4-151">**可能的案例**</span><span class="sxs-lookup"><span data-stu-id="8cae4-151">**Potential Scenarios**</span></span>  
  
-   <span data-ttu-id="8cae4-152">SQL Server 意外關閉。</span><span class="sxs-lookup"><span data-stu-id="8cae4-152">The SQL Server goes down unexpectedly.</span></span> <span data-ttu-id="8cae4-153">在此情況下，**第一次失敗**屬性會套用。</span><span class="sxs-lookup"><span data-stu-id="8cae4-153">In this situation, the **First Failure** property will apply.</span></span> <span data-ttu-id="8cae4-154">使用預設**第一次失敗**和**重新啟動服務於**1 分鐘後進行設定，單一的重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-154">With the default **First Failure** and **Restart service after** settings, a single restart attempt is made after 1 minute.</span></span> <span data-ttu-id="8cae4-155">如果在 1 分鐘後仍然無法使用 SQL Server，將不進行其他任何重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-155">If the SQL Server is still not available after 1 minute, no additional restart attempts will be made.</span></span> <span data-ttu-id="8cae4-156">主控件執行個體將保持停止。</span><span class="sxs-lookup"><span data-stu-id="8cae4-156">The host instance will remain stopped.</span></span>  
  
-   <span data-ttu-id="8cae4-157">SQL Server 成為叢集，而且發生容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="8cae4-157">SQL Server is clustered and a failover occurs.</span></span> <span data-ttu-id="8cae4-158">容錯移轉進行的時間超過 5 分鐘。</span><span class="sxs-lookup"><span data-stu-id="8cae4-158">The failover takes more than 5 minutes.</span></span> <span data-ttu-id="8cae4-159">在此案例中，預設值**第一次失敗**和**重新啟動服務於**設定將嘗試重新啟動後 1 分鐘。</span><span class="sxs-lookup"><span data-stu-id="8cae4-159">In this scenario, the default **First Failure** and **Restart service after** settings will attempt a single restart after 1 minute.</span></span> <span data-ttu-id="8cae4-160">由於 SQL Server 仍然離限，因此重新啟動將失敗。</span><span class="sxs-lookup"><span data-stu-id="8cae4-160">The restart will fail because SQL Server is still offline.</span></span> <span data-ttu-id="8cae4-161">結果，此後將不進行其他任何重新啟動嘗試。</span><span class="sxs-lookup"><span data-stu-id="8cae4-161">As a result, no additional restart attempts will be made.</span></span> <span data-ttu-id="8cae4-162">主控件執行個體將保持停止。</span><span class="sxs-lookup"><span data-stu-id="8cae4-162">The host instance will remain stopped.</span></span>  
  
 <span data-ttu-id="8cae4-163">**建議**</span><span class="sxs-lookup"><span data-stu-id="8cae4-163">**Recommendations**</span></span>  
  
-   <span data-ttu-id="8cae4-164">停止 SQL Server 或容錯移轉至 SQL 叢集時，手動停止 BizTalk 主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="8cae4-164">When stopping the SQL Server or failing over a SQL cluster, manually stop the BizTalk host instances.</span></span> <span data-ttu-id="8cae4-165">SQL Server 上線後，請重新啟動主控件執行個體。</span><span class="sxs-lookup"><span data-stu-id="8cae4-165">After the SQL Server is online, restart the host instances.</span></span>  
  
-   <span data-ttu-id="8cae4-166">如果 SQL 叢集容錯移轉的時間超過 1 分鐘的常見項目，請增加**重新啟動服務於**花費 SQL 叢集上線的時間長度的值。</span><span class="sxs-lookup"><span data-stu-id="8cae4-166">If it is a common occurrence for a SQL cluster failover to take longer than 1 minute, increase the **Restart service after** value to however long it takes the SQL cluster to be online.</span></span>  
  
-   <span data-ttu-id="8cae4-167">當 SQL Server 仍會保留由非 BizTalk 系統管理員時，請考慮增加**重新啟動服務於**值。</span><span class="sxs-lookup"><span data-stu-id="8cae4-167">When SQL Server is maintained by a non-BizTalk Administrator, consider increasing the **Restart service after** value.</span></span> <span data-ttu-id="8cae4-168">非 BizTalk 系統管理員可以在不察覺對於 BizTalk 造成影響的情況下停止/啟動 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="8cae4-168">Non-BizTalk Administrators tend to stop/start SQL Server without realizing the impact on BizTalk.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8cae4-169">另請參閱</span><span class="sxs-lookup"><span data-stu-id="8cae4-169">See Also</span></span>  
 [<span data-ttu-id="8cae4-170">管理 BizTalk 主控件和主控件執行個體</span><span class="sxs-lookup"><span data-stu-id="8cae4-170">Managing BizTalk Hosts and Host Instances</span></span>](../core/managing-biztalk-hosts-and-host-instances.md)