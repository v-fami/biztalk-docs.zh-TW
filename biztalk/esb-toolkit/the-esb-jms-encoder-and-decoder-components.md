---
title: "ESB JMS 編碼器和解碼器元件 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 4e5591c2-d2ca-4168-8026-059fe51dd588
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9f39f4ab1b0650a8ad6fa1ff35d62b4807995237
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="the-esb-jms-encoder-and-decoder-components"></a><span data-ttu-id="f3917-102">ESB JMS 編碼器和解碼器元件</span><span class="sxs-lookup"><span data-stu-id="f3917-102">The ESB JMS Encoder and Decoder Components</span></span>
<span data-ttu-id="f3917-103">Java 訊息服務 (JMS)，或從 IBM WebSphere MQ; 傳送 SOAP 訊息，牽涉到某些整合解決方案[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]包含兩個以 managed 程式碼，在這些情況下使用 JMS 管線元件。</span><span class="sxs-lookup"><span data-stu-id="f3917-103">Some integration solutions involve Java Message Service (JMS) and SOAP messages sent to or from IBM WebSphere MQ; [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes two JMS pipeline components written in managed code for use in these situations.</span></span> <span data-ttu-id="f3917-104">元件會讀取或寫入 MQ 訊息標頭使用的值與訊息相關聯的內容屬性的 JMS 部分。</span><span class="sxs-lookup"><span data-stu-id="f3917-104">The components read or write the JMS portion of the MQ message header using the values of context properties associated with the message.</span></span> <span data-ttu-id="f3917-105">目前，有超過 60 的不同類型的 JMS 與 WebSphere MQ Series 系統; 使用中的標頭ESB JMS 元件僅適用於 MQRFH2 標頭。</span><span class="sxs-lookup"><span data-stu-id="f3917-105">Currently, there are more than 60 different types of JMS headers in use with WebSphere MQ Series systems; the ESB JMS components work only with MQRFH2 headers.</span></span>  
  
## <a name="installation"></a><span data-ttu-id="f3917-106">安裝</span><span class="sxs-lookup"><span data-stu-id="f3917-106">Installation</span></span>  
 <span data-ttu-id="f3917-107">自動安裝 ESB 核心會 JMS 編碼器和 JMS 解碼器元件安裝在 BizTalk Server 管線元件資料夾中。</span><span class="sxs-lookup"><span data-stu-id="f3917-107">Installing the ESB Core automatically installs the JMS Encoder and JMS Decoder components in the BizTalk Server Pipeline Components folder.</span></span>  
  
## <a name="how-it-works"></a><span data-ttu-id="f3917-108">運作方式</span><span class="sxs-lookup"><span data-stu-id="f3917-108">How It Works</span></span>  
 <span data-ttu-id="f3917-109">JMS 管線元件檢查訊息標頭，並只在訊息上運作**MQMD_Format**標頭設定為**RFH (MQRFH2)**。</span><span class="sxs-lookup"><span data-stu-id="f3917-109">The JMS pipeline components inspect the message headers and operate only on messages that have the **MQMD_Format** header set to **RFH (MQRFH2)**.</span></span> <span data-ttu-id="f3917-110">不過，即使設定這個屬性，元件會檢查以確認它們符合 IBM RFH2 格式的標頭。</span><span class="sxs-lookup"><span data-stu-id="f3917-110">However, even when this property is set, the components inspect the headers to confirm that they do conform to the IBM RFH2 format.</span></span> <span data-ttu-id="f3917-111">如果標頭不符合這種格式，元件都會產生剖析錯誤，指出**MQMD_Format**參數已設為**RFH (MQRFH2)**，但標頭的結構並不符合RFH2 標準。</span><span class="sxs-lookup"><span data-stu-id="f3917-111">If the header does not conform to this format, the components generate a parse error that indicates the **MQMD_Format** parameter was set to **RFH (MQRFH2)**, but the structure of the header did not comply with the RFH2 standard.</span></span> <span data-ttu-id="f3917-112">如果剖析的輸入的訊息標頭就會失敗，解碼器元件可讓訊息在傳遞，但它會將名為訊息內容屬性**MQRFH2_ParseError**至**True**。</span><span class="sxs-lookup"><span data-stu-id="f3917-112">If inbound message header parsing fails, the decoder component allows the message to pass, but it sets a message context property named **MQRFH2_ParseError** to **True**.</span></span>  
  
 <span data-ttu-id="f3917-113">**MQRFH2**屬性結構描述與 JMS 元件部署在 BizTalk 中不僅會公開所有 MQRFH2 標頭屬性。</span><span class="sxs-lookup"><span data-stu-id="f3917-113">The **MQRFH2** property schema deployed in BizTalk with the JMS components exposes all of the MQRFH2 header properties.</span></span> <span data-ttu-id="f3917-114">在降級的內送訊息標頭之後, 從標頭的資料位於 XML 文件儲存在**MQRFH2_NameValueData**訊息內容屬性。</span><span class="sxs-lookup"><span data-stu-id="f3917-114">After demoting the headers of an incoming message, the data from the headers resides in an XML document stored in the **MQRFH2_NameValueData** context property of the message.</span></span> <span data-ttu-id="f3917-115">編碼器會調整的長度**NameValueData**資料夾，以確保它是正確的長度。</span><span class="sxs-lookup"><span data-stu-id="f3917-115">The encoder adjusts the length of the **NameValueData** folder to ensure it is the correct length.</span></span> <span data-ttu-id="f3917-116">若要了解這些標頭，以及影響的使用方式，變更值時，檢閱適當的 IBM 文件。</span><span class="sxs-lookup"><span data-stu-id="f3917-116">To understand the usage of these headers, and the impact when changing the values, review the appropriate IBM documentation.</span></span>  
  
## <a name="using-the-jms-encoder-and-decoder-components"></a><span data-ttu-id="f3917-117">使用 JMS 編碼器和解碼器元件</span><span class="sxs-lookup"><span data-stu-id="f3917-117">Using the JMS Encoder and Decoder Components</span></span>  
 <span data-ttu-id="f3917-118">若要使用 JMS 編碼器和解碼器元件，開發人員將它們加入 BizTalk 應用程式中的管線。</span><span class="sxs-lookup"><span data-stu-id="f3917-118">To use the JMS Encoder and Decoder components, developers add them to pipelines in a BizTalk application.</span></span> <span data-ttu-id="f3917-119">傳送管線，JMS 編碼器元件應該位於 「 編碼 」 階段中。</span><span class="sxs-lookup"><span data-stu-id="f3917-119">For a send pipeline, the JMS Encoder component should reside in the Encode stage.</span></span> <span data-ttu-id="f3917-120">接收管線，JMS 解碼器元件應該位於 「 解碼 」 階段中。</span><span class="sxs-lookup"><span data-stu-id="f3917-120">For a receive pipeline, the JMS Decoder component should reside in the Decode stage.</span></span> <span data-ttu-id="f3917-121">JMS 元件不會安裝任何其他管線階段中。</span><span class="sxs-lookup"><span data-stu-id="f3917-121">The JMS components will not install in any other stages of a pipeline.</span></span>  
  
 <span data-ttu-id="f3917-122">JMS 編碼器元件安裝在編碼階段中，讀取在 JMS 值**MQRFH2**標頭和寫入 （升級） 為訊息內容屬性。</span><span class="sxs-lookup"><span data-stu-id="f3917-122">When installed in the Encode stage, the JMS Encoder component reads the values in the JMS **MQRFH2** headers and writes (promotes) them into the message context properties.</span></span> <span data-ttu-id="f3917-123">當安裝在 「 解碼 」 階段，JMS 解碼器元件會讀取 （會降級） 的內容屬性值，並將它們插入到 JMS **MQRFH2**標頭。</span><span class="sxs-lookup"><span data-stu-id="f3917-123">When installed in the Decode stage, the JMS Decoder component reads (demotes) the context property values and inserts them into the JMS **MQRFH2** headers.</span></span> <span data-ttu-id="f3917-124">這表示所有 MQ 標頭值都都可做為管線中訊息內容屬性。</span><span class="sxs-lookup"><span data-stu-id="f3917-124">This means that all the MQ header values are available as context properties of the message in the pipeline.</span></span>  
  
 <span data-ttu-id="f3917-125">若要偵測及管理的標頭解析錯誤，開發人員可以加入程式碼，以檢查的值**MQRFH2_ParseError**屬性。</span><span class="sxs-lookup"><span data-stu-id="f3917-125">To detect and manage header-parsing errors, developers can include code that examines the value of the **MQRFH2_ParseError** property.</span></span> <span data-ttu-id="f3917-126">它們可以實作訂閱失敗訊息的復原程序，或指定傳送埠的篩選**MQRFH2_ParseError**屬性將訊息保存於。</span><span class="sxs-lookup"><span data-stu-id="f3917-126">They can implement a recovery process that subscribes to failed messages or specify send ports that filter on the **MQRFH2_ParseError** property to persist the message.</span></span> <span data-ttu-id="f3917-127">使用 JMS 訊息的訂閱者中應該包含篩選條件，指定的值**False**如**MQRFH2_ParseError**屬性，避免接收中的 「 訂閱者 」 訊息無法剖析處理序的標頭。</span><span class="sxs-lookup"><span data-stu-id="f3917-127">Subscribers that work with JMS messages should include a filter condition that specifies the value **False** for the **MQRFH2_ParseError** property to prevent the subscriber from receiving messages that failed the header parsing process.</span></span>  
  
 <span data-ttu-id="f3917-128">開發人員也可以更新的內容屬性值 (例如，變更**MQRFH2_Encoding**屬性值)，且元件會反映出這些變更的 MQ 訊息標頭，以便設定訊息抵達時其最終目的地。</span><span class="sxs-lookup"><span data-stu-id="f3917-128">Developers can also update the context property values (for example, change the **MQRFH2_Encoding** property value), and the component will reflect these changes in the MQ message headers so that they are set when the message arrives at its ultimate destination.</span></span> <span data-ttu-id="f3917-129">元件會自動忽略無效的值，並且設定 「 安全 」 預設值的遺漏必要的標頭。</span><span class="sxs-lookup"><span data-stu-id="f3917-129">The component automatically ignores invalid values and sets "safe" default values where required headers are missing.</span></span> <span data-ttu-id="f3917-130">例如，如果開發人員有指定的值無效**MQRFH2_Encoding**屬性外, 寄訊息會有**MQRFH2_Encoding**標頭設定為**未知**.</span><span class="sxs-lookup"><span data-stu-id="f3917-130">For example, if the developer specifies an invalid value for the **MQRFH2_Encoding** property, the outbound message will have the **MQRFH2_Encoding** header set to **UNKNOWN**.</span></span> <span data-ttu-id="f3917-131">如果開發人員會將值移除內容屬性，但**MQMD_Format**屬性仍設為**RFH**，元件將加入包含預設值，根據 IBM 規格的標頭。</span><span class="sxs-lookup"><span data-stu-id="f3917-131">If the developer removes a value from a context property, but the **MQMD_Format** property is still set to **RFH**, the component will add a header containing the default value, as per the IBM specification.</span></span>  
  
 <span data-ttu-id="f3917-132">如需如何使用這些元件的範例，請參閱[安裝和執行 JMS MQRFH2 元件範例](../esb-toolkit/installing-and-running-the-jms-mqrfh2-component-sample.md)。</span><span class="sxs-lookup"><span data-stu-id="f3917-132">For an example of how to use these components, see [Installing and Running the JMS MQRFH2 Component Sample](../esb-toolkit/installing-and-running-the-jms-mqrfh2-component-sample.md).</span></span>