---
title: "ESB 加入命名空間移除命名空間的元件和 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 21df1b21-b73c-4e31-a234-49a1a6b53cc7
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2bcbe519cfd8c6796569da4de87f59fa6a16d8a8
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="the-esb-add-namespace-and-remove-namespace-components"></a>ESB 加入命名空間移除命名空間元件
許多公司時的 XML 技術的早期採用者時仍然新標準和共用文件很常見。 因此，它們並未嚴格強制執行包括唯一的根命名空間，這通常如此今天的需求。  
  
 不過，Microsoft BizTalk Server 會執行文件識別基礎的根節點的命名空間和根節點名稱的組合，因此沒有命名空間的根節點的文件很難進行全盤如果數個不同的文件型別使用相同的根節點名稱。  
  
 新增命名空間和移除命名空間的元件，讓您可以將命名空間加入至文件時收到並移除命名空間與文件，在傳遞之前解決這個問題。 因此，文件可以位於預設命名空間中 （或幾種不同的文件類型的通用命名空間中） 時傳送及接收，但位於在 ESB 和 BizTalk 處理期間的暫時性唯一的根命名空間。  
  
 整合舊有系統，而不是 XML 結構描述定義中使用文件類型定義 (DTD) 或使用舊版的 XML 剖析器無法建立包含根命名空間的文件時，也會很有用的元件。  
  
## <a name="installation"></a>安裝  
 自動安裝 ESB 核心安裝**加入命名空間**和**移除命名空間**BizTalk Server 管線元件資料夾中的元件。  
  
## <a name="how-it-works"></a>運作方式  
 新增命名空間元件會將指定的命名空間加入至 XML 文件。 此元件可以新增至文件的單一命名空間。 使用新增命名空間元件上已經有根節點的命名空間的文件並不支援的案例，所以單一的唯一命名空間都只需要。  
  
 元件沒有命名空間感知，而且不會保存任何命名空間值。 不過，加入命名空間元件會比較要求的訊息的現有命名空間中的命名空間，而且只會傳回原始訊息至管線如果兩者相符。  
  
 開發人員在接收管線或傳送管線中包括新增的命名空間元件，並設定適當的屬性。 在執行階段執行下列驗證：  
  
-   **Xpath**屬性或**NamespaceBase**屬性必須包含的值。  
  
-   **分隔符號**屬性可以包含有效的字元 (例如 **/** 或 **\\** ) 或空字串。  
  
-   **NamespacePrefix**屬性值不可為保留值的其中一個 (**ns0**至**ns6**)，而且必須是英數。  
  
 這些規則的任何變化會導致元件在執行階段發生例外狀況、 擱置訊息 (標示為**暫止 – 繼續**)，並在 Windows 應用程式事件記錄檔中寫入項目。  
  
 移除命名空間 」 元件從 XML 文件中移除所有的根命名空間。 元件可以移除單一文件的命名空間數目受限於可用來保存在處理期間的目前節點的實體記憶體。 不過，元件會使用標準的 BizTalk Server 2009 管線訊息串流處理程序，將只在文件中的目前節點載入至記憶體，而不必載入整個文件。  
  
 移除命名空間元件也重新編碼指定的編碼方式的文件 (**ascii、 unicode/utf16，**或**utf8**)，並可以從資料流，開始移除位元組順序標記 (BOM)，若必要項。  
  
## <a name="using-the-add-namespace-and-remove-namespace-components"></a>使用新增命名空間移除命名空間元件  
 開發人員可能會在下列情況下使用新增的命名空間元件：  
  
-   內送的訊息有沒有根命名空間。  
  
-   內送的訊息使用項目資料或屬性的資料來描述訊息類型。  
  
-   描述訊息類型的資料是一致且可使用 XPath 查詢。  
  
 新增命名空間和移除命名空間的元件可以位於任何接收管線或傳送管線的階段。 您可以鏈結元件，如果需要，如同您用來變更文件的根命名空間移除命名空間元件後面加入命名空間元件的執行個體。  
  
 如果您有多個接收位置，都需要這些元件使用時，您可以建立單一管線，並使用 BizTalk Server 「 每一執行個體 」 元件設定以設定元件屬性每個執行個體傳送或接收管線。 使用 BizTalk Server 2009，您可以設定屬性的管線以每個執行個體為基礎，這表示您可以重複單一管線使用跨多個接收位置，並可能有不同的元件屬性，每個執行個體。 這是可讓系統管理員不需要變更程式碼或重新部署使用 BizTalk Server 管理主控台變更執行階段設定。  
  
## <a name="component-properties"></a>元件屬性  
 新增命名空間元件會公開五個公用屬性：  
  
-   **NamespacePrefix**。 這是之間插入命名空間前置詞**xmlns:**部分，並在下列的等號 （=）。 若要避免與標準的 BizTalk 結構描述命名空間前置詞衝突，請避免使用值**ns0**透過**ns9**。  
  
-   **NamespaceBase**。 這是將前置詞中的值所產生的結果的命名空間的靜態區段**分隔符號**和**Xpath**屬性。  
  
-   **ExtractionNodeXPath**。 這是解析為包含您想要用於產生的組件的命名空間的項目或屬性值的文件中的單一元素的 XPath 陳述式。  
  
-   **Xpath**。 這是管道 (**&#124;** ) 分隔的清單，用來擷取每個元件會結合以形成的命名空間的 XPath 查詢。  
  
-   **分隔符號**。 這是要使用的命名空間區段之間的分隔符號。 最常見的值是正斜線 ( **/**  )，但可以是空字串，如果所需。  
  
> [!NOTE]
>  所有的 XML 節點，例如元素和屬性名稱會區分大小寫。  
  
 移除命名空間元件會公開兩個公用屬性：  
  
-   **編碼**。 這是編碼輸出訊息時，下列值之一： **ascii、 unicode/utf16，**或**utf8**。  
  
-   **RemoveByteOrderMark**。 這是布林值屬性，指出元件是否應該移除位元組順序標記 (通常**0xEFBB、 0xBFFFFE，**或**0xFEFF**) 從 XML 文件資料流的開頭。  
  
 如需如何使用這些元件的範例，請參閱[安裝及執行 「 命名空間元件 」 範例](../esb-toolkit/installing-and-running-the-namespace-component-sample.md)。