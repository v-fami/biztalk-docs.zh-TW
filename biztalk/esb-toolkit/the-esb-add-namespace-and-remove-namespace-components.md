---
title: ESB 新增命名空間，然後移除命名空間元件 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 21df1b21-b73c-4e31-a234-49a1a6b53cc7
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ef25458cdf578930f46bdb702feb283a171d1529
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/27/2018
ms.locfileid: "36971423"
---
# <a name="the-esb-add-namespace-and-remove-namespace-components"></a>ESB 新增命名空間，然後移除命名空間元件
許多公司時的時間仍新興標準的文件共用是常見的 XML 技術的早期採用者。 因此，它們並未嚴格強制執行包括唯一的根命名空間，而這通常案例目前的需求。  
  
 不過，Microsoft BizTalk Server 會執行文件識別基礎的根節點的命名空間和根節點名稱的組合，因此具有根節點沒有命名空間的文件很難主動識別如果數個不同的文件類型會使用相同的根節點名稱。  
  
 新增命名空間和移除的命名空間的元件，讓您可以在接收時，將命名空間加入至文件，並從文件移除命名空間，在傳遞之前解決這個問題。 因此，文件可位於預設命名空間中 （或數個不同的文件類型通用的命名空間中） 時傳送及接收，但位於在 ESB 和 BizTalk 的處理期間的暫時性唯一的根命名空間。  
  
 整合，而不是 XML 結構描述定義中使用文件類型定義 (DTD) 或使用舊版的 XML 剖析器無法建立包含根命名空間的文件的舊版系統時，元件也是很有用。  
  
## <a name="installation"></a>安裝  
 安裝 ESB Core 會自動安裝**新增的命名空間**並**移除命名空間**BizTalk Server 管線元件資料夾中的元件。  
  
## <a name="how-it-works"></a>運作方式  
 新增命名空間元件會將 XML 文件中指定的命名空間。 此元件可以新增至文件的單一命名空間。 已有根節點的命名空間的文件上使用 「 新增的命名空間元件不支援的案例因為單一的唯一命名空間是所有所需。  
  
 元件沒有命名空間感知，而且不會保存任何命名空間值。 不過，加入命名空間元件會比較要求的命名空間中現有的命名空間的訊息，而且只會傳回原始訊息管線如果兩者相符。  
  
 開發人員在接收管線或傳送管線中包括 「 新增的命名空間元件，並設定適當的屬性。 在執行階段執行下列驗證：  
  
- **Xpath**屬性或**NamespaceBase**屬性必須包含值。  
  
- **分隔符號**屬性可包含有效的字元 (例如**/** 或是**\\**) 或空字串。  
  
- **NamespacePrefix**屬性值不能是保留的值之一 (**ns0**來**ns6**)，而且必須是英數。  
  
  這些規則的任何變化會導致擲回的例外狀況，在執行階段、 擱置訊息的元件 (標示為**暫止 – 可繼續**)，並將項目寫入 Windows 應用程式事件記錄檔中。  
  
  移除命名空間元件會移除 XML 文件中的所有根命名空間。 元件可以移除單一文件的命名空間數目會受到可用來保存在處理期間的目前節點的實體記憶體。 不過，元件會使用標準的 BizTalk Server 2009 管線訊息串流處理程序，並載入記憶體，而不是載入整份文件中的目前節點的文件中。  
  
  移除命名空間元件也重新編碼指定的編碼方式的文件 (**ascii 或 unicode/utf16，** 或是**utf8**)，可以移除位元組順序標記 (BOM) 開頭的資料流，如果必要的。  
  
## <a name="using-the-add-namespace-and-remove-namespace-components"></a>使用新增的命名空間，然後移除命名空間元件  
 開發人員可能會在下列情況下使用 「 新增的命名空間元件：  
  
- 內送的訊息有沒有根命名空間。  
  
- 內送的訊息使用項目資料或屬性的資料來描述訊息類型。  
  
- 描述訊息類型的資料是一致且可供使用 XPath 查詢。  
  
  新增命名空間和移除的命名空間元件可以位於任何接收管線或傳送管線的階段。 您可以鏈結元件如有需要，例如，如果您用來變更文件的根命名空間移除命名空間元件後面新增的命名空間元件的執行個體。  
  
  如果您有多個接收位置需要使用這些元件時，您可以建立單一的管線，並使用 BizTalk Server 」 每個執行個體 」 元件設定來設定元件屬性，每個執行個體傳送或接收管線。 使用 BizTalk Server 2009 時，您可以設定內容管線以每個執行個體為基礎，這表示您可以重複單一管線使用跨多個接收位置，而有 每個執行個體的不同元件屬性。 這是可讓系統管理員不需要變更程式碼或重新部署使用 BizTalk Server 管理主控台變更執行階段設定。  
  
## <a name="component-properties"></a>元件屬性  
 新增命名空間元件會公開五個公用屬性：  
  
-   **NamespacePrefix**。 這是在命名空間之間插入的前置詞**xmlns:** 組件和下列等號 （=）。 若要避免衝突，標準的 BizTalk 結構描述命名空間前置詞，請避免使用值**ns0**透過**ns9**。  
  
-   **NamespaceBase**。 這是靜態的區段，將前置詞的結果中的值所產生的命名空間**分隔符號**並**Xpath**屬性。  
  
-   **ExtractionNodeXPath**。 這是解析為包含您想要用於產生的組件的命名空間的項目或屬性值的文件中的單一元素的 XPath 陳述式。  
  
-   **Xpath**。 這是管道 (**&#124;** ) 分隔的清單，用來擷取每個元件會結合以形成的命名空間的 XPath 查詢。  
  
-   **分隔符號**。 這是要使用的命名空間區段之間的分隔符號。 最常見的值是正斜線 (**/** )，但它可以是空字串，如有必要。  
  
> [!NOTE]
>  所有的 XML 節點，例如項目和屬性名稱會區分大小寫。  
  
 移除命名空間元件會公開兩個公用屬性：  
  
- **編碼**。 這是編碼輸出訊息，下列值之一： **ascii 或 unicode/utf16，** 或是**utf8**。  
  
- **RemoveByteOrderMark**。 這是布林屬性值，指出元件是否應該移除位元組順序標記 (通常**0xEFBB、 0xBFFFFE，** 或是**0xFEFF**) 從 XML 文件資料流的開頭。  
  
  如需如何使用這些元件的範例，請參閱 <<c0> [ 安裝和執行命名空間元件範例](../esb-toolkit/installing-and-running-the-namespace-component-sample.md)。