---
title: "BizTalk ESB toolkit 架構 |Microsoft 文件"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a41674f5-5ea4-4a8f-a270-b67fd6854028
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 068eddfdd2138fbc92ad4821b2eaf9491ad39000
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2017
---
# <a name="architecture-of-the-biztalk-esb-toolkit"></a><span data-ttu-id="50597-102">BizTalk ESB Toolkit 的架構</span><span class="sxs-lookup"><span data-stu-id="50597-102">Architecture of the BizTalk ESB Toolkit</span></span>
<span data-ttu-id="50597-103">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]包含一系列的支援和實作鬆散偶合的傳訊環境，可讓您更輕鬆地建立以訊息為基礎的企業應用程式元件間的互通性。</span><span class="sxs-lookup"><span data-stu-id="50597-103">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] consists of a series of interoperating components that support and implement a loosely coupled messaging environment that makes it easier to build message-based enterprise applications.</span></span> <span data-ttu-id="50597-104">服務和元件自然可分成下列七個類別：</span><span class="sxs-lookup"><span data-stu-id="50597-104">The services and components fall naturally into the following seven categories:</span></span>  
  
-   <span data-ttu-id="50597-105">**Web 服務。**</span><span class="sxs-lookup"><span data-stu-id="50597-105">**Web services.**</span></span> <span data-ttu-id="50597-106">這些公開內部服務，例如路線處理、 例外狀況管理、 端點和地圖的解析度[!INCLUDE[prague](../includes/prague-md.md)]作業、 通用描述、 探索與整合 (UDDI) 的互通性，以及訊息轉換內容。</span><span class="sxs-lookup"><span data-stu-id="50597-106">These expose internal services such as itinerary processing, exception management, resolution of endpoints and maps, [!INCLUDE[prague](../includes/prague-md.md)] operations, Universal Description, Discovery, and Integration (UDDI) interoperation, and transformation of message content.</span></span>  
  
-   <span data-ttu-id="50597-107">**路線服務。**</span><span class="sxs-lookup"><span data-stu-id="50597-107">**Itinerary services.**</span></span> <span data-ttu-id="50597-108">其中包括執行轉換和路由訊息的協調流程和傳訊為主的服務。</span><span class="sxs-lookup"><span data-stu-id="50597-108">These include orchestration-based and messaging-based services for performing transformations and message routing.</span></span> <span data-ttu-id="50597-109">您可以建立自訂的服務參與行程處理中。</span><span class="sxs-lookup"><span data-stu-id="50597-109">You can create custom services that participate in Itinerary processing.</span></span> <span data-ttu-id="50597-110">其中包括執行轉換和路由訊息的協調流程和傳訊為主的服務。</span><span class="sxs-lookup"><span data-stu-id="50597-110">These include orchestration-based and messaging-based services for performing transformations and message routing.</span></span> <span data-ttu-id="50597-111">您可以建立自訂的服務參與行程處理中。</span><span class="sxs-lookup"><span data-stu-id="50597-111">You can create custom services that participate in Itinerary processing.</span></span>  
  
-   <span data-ttu-id="50597-112">**路線上-坡道提升。**</span><span class="sxs-lookup"><span data-stu-id="50597-112">**Itinerary on-ramps.**</span></span> <span data-ttu-id="50597-113">這些接收外部的訊息、 附加適當的路線，每個訊息，以及執行路線處理;他們使用[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]解析器和配接器提供者架構，來動態解析的端點和中繼資料。</span><span class="sxs-lookup"><span data-stu-id="50597-113">These receive external messages, attach the appropriate itinerary for each message, and perform itinerary processing; they use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
-   <span data-ttu-id="50597-114">**在-坡道提升。**</span><span class="sxs-lookup"><span data-stu-id="50597-114">**On-ramps.**</span></span> <span data-ttu-id="50597-115">不同於路線上-坡道提升，這些會收到外部訊息格式和傳輸，例如 HTTP、 Java 訊息服務 (JMS)、 IBM WebSphere MQ (WMQ)、 檔案傳輸通訊協定 (FTP)、 一般檔案和 XML 的範圍中。</span><span class="sxs-lookup"><span data-stu-id="50597-115">Unlike itinerary on-ramps, these receive external messages in a range of formats and transports, such as HTTP, Java Message Service (JMS), IBM WebSphere MQ (WMQ), File Transfer Protocol (FTP), Flat File, and XML.</span></span> <span data-ttu-id="50597-116">它們是典型的 BizTalk Server 接收位置，或者使用[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]interop 管線元件和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]解析器和配接器提供者架構，來動態解析的端點和中繼資料。</span><span class="sxs-lookup"><span data-stu-id="50597-116">They are typical BizTalk Server receive locations that optionally use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop pipeline components and the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
-   <span data-ttu-id="50597-117">**關閉-坡道提升。**</span><span class="sxs-lookup"><span data-stu-id="50597-117">**Off-ramps.**</span></span> <span data-ttu-id="50597-118">這些實作的傳送埠傳送訊息使用的格式和傳輸，例如 WCF、 JMS、 WMQ、 FTP、 HTTP、 一般檔案、 XML 或任何其他自訂格式。</span><span class="sxs-lookup"><span data-stu-id="50597-118">These implement send ports for the delivery of messages using formats and transports such as WCF, JMS, WMQ, FTP, HTTP, Flat File, XML, or any other custom formats.</span></span> <span data-ttu-id="50597-119">它們是動態傳送埠會直接繫結至 Messagebox，並選擇性地使用一般 BizTalk Server [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop 管線元件和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]解析器和動態的端點解析的配接器提供者架構和中繼資料。</span><span class="sxs-lookup"><span data-stu-id="50597-119">They are typical BizTalk Server dynamic send ports that are direct-bound to the Message Box and optionally use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop pipeline components and the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
-   <span data-ttu-id="50597-120">**例外狀況管理架構。**</span><span class="sxs-lookup"><span data-stu-id="50597-120">**Exception Management Framework.**</span></span> <span data-ttu-id="50597-121">這包括例外狀況的 Web 服務、 例外狀況管理 API 和擴充，程序，並傳遞例外狀況詳細資料 ESB 管理入口網站的元件。</span><span class="sxs-lookup"><span data-stu-id="50597-121">This includes the exception Web service, the exception management API, and components that enrich, process, and pass exception details to the ESB Management Portal.</span></span>  
  
-   <span data-ttu-id="50597-122">**ESB 管理入口網站。**</span><span class="sxs-lookup"><span data-stu-id="50597-122">**ESB Management Portal.**</span></span> <span data-ttu-id="50597-123">此範例應用程式提供登錄佈建、 例外狀況中繼、 警示的通知和分析。</span><span class="sxs-lookup"><span data-stu-id="50597-123">This sample application provides registry provisioning, exception mediation, alert notification, and analytics.</span></span>  
  
 <span data-ttu-id="50597-124">許多這些元件和服務所實作的功能上都必須依賴[!INCLUDE[prague](../includes/prague-md.md)]，例如協調流程、 轉換和商務規則引擎和 Messagebox 資料庫。</span><span class="sxs-lookup"><span data-stu-id="50597-124">Many of these components and services rely on features implemented by [!INCLUDE[prague](../includes/prague-md.md)], such as the Orchestration, Transformation, and Business Rules engines and the Message Box database.</span></span> <span data-ttu-id="50597-125">圖 1 顯示的圖解檢視的類別、 元件和服務通常發生在每個類別，並使用核心 BizTalk Server 系統元件[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="50597-125">Figure 1 shows a schematic view of the categories, the components and services typically occurring within each category, and the core BizTalk Server system components used by the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)].</span></span>  
  
 <span data-ttu-id="50597-126">![ESB 架構](../esb-toolkit/media/esbarchitecture.gif "ESBArchitecture")</span><span class="sxs-lookup"><span data-stu-id="50597-126">![ESB Architecture](../esb-toolkit/media/esbarchitecture.gif "ESBArchitecture")</span></span>  
  
 <span data-ttu-id="50597-127">**圖 1**</span><span class="sxs-lookup"><span data-stu-id="50597-127">**Figure 1**</span></span>  
  
 <span data-ttu-id="50597-128">**架構和元件[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]**</span><span class="sxs-lookup"><span data-stu-id="50597-128">**The architecture and components of the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]**</span></span>  
  
## <a name="how-the-biztalk-esb-toolkit-works"></a><span data-ttu-id="50597-129">BizTalk ESB 工具組的運作方式</span><span class="sxs-lookup"><span data-stu-id="50597-129">How the BizTalk ESB Toolkit Works</span></span>  
 <span data-ttu-id="50597-130">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]接受輸入的訊息，並可能 （但並非一定），運作方式，透過執行處理序，例如轉換，路由，或任何其他自訂程序。</span><span class="sxs-lookup"><span data-stu-id="50597-130">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] accepts inbound messages and operates on them, perhaps (but not always) by performing processes such as transformation, routing, or any other custom defined process.</span></span> <span data-ttu-id="50597-131">若要指定作業所需，核心處理元件需要有路由的受控滑動包含相關聯的指令或定義要套用的程序的中繼資料和要與訊息內容中執行之工作的每個訊息。</span><span class="sxs-lookup"><span data-stu-id="50597-131">To specify the operations required, the core processing components require each message to have a routing slip that contains associated instructions or metadata that define the processes to apply and the tasks to execute with the message content.</span></span> <span data-ttu-id="50597-132">這些路由順延稱為旅和可以自動解決、 擷取從中央儲存機制，與上遞增收到時附加至訊息。</span><span class="sxs-lookup"><span data-stu-id="50597-132">These routing slips are referred to as itineraries and can be automatically resolved, retrieved from a central repository, and attached to a message when it is received by an on-ramp.</span></span>  
  
 <span data-ttu-id="50597-133">此路由的名單方法提供服務，這表示 ESB 不需要事先了解之特定處理的每個訊息之間的鬆散偶合。</span><span class="sxs-lookup"><span data-stu-id="50597-133">This routing slip approach provides loose coupling between services, meaning that the ESB does not require prior knowledge of the specific processing for each message.</span></span> <span data-ttu-id="50597-134">它只需要知道處理程序的可能範圍以及套用每個處理序的方式。</span><span class="sxs-lookup"><span data-stu-id="50597-134">It just has to know what the possible range of processes is and how to apply each process.</span></span> <span data-ttu-id="50597-135">指定可用的處理序和處理程序與在訊息中的指示之間的對應之選項的各種提供彈性的機制，來設定和調整行為，而不需要變更程式碼和重新部署元件。</span><span class="sxs-lookup"><span data-stu-id="50597-135">The wide range of options for specifying the available processes and the mapping between the processes and the instructions within messages provides a flexible mechanism for configuring and adjusting behavior, without requiring changes to code and redeployment of components.</span></span>  
  
## <a name="design-patterns"></a><span data-ttu-id="50597-136">設計模式</span><span class="sxs-lookup"><span data-stu-id="50597-136">Design Patterns</span></span>  
 <span data-ttu-id="50597-137">ESB 使用，其中處理程序儲放訊息在 Messagebox 資料庫，並 「 訂閱者 」 在訊息中，處理指示為基礎的架構，有效地實作的狀態機器設計模式。</span><span class="sxs-lookup"><span data-stu-id="50597-137">The architecture that ESB uses, where processes deposit messages in the Message Box database and subscribers pick them up based on a processing instruction in the message, effectively implements the state-machine design pattern.</span></span> <span data-ttu-id="50597-138">此外，ESB 實作，而且會以服務為導向的方式，包括外部應用程式可以透過一組核心 Web 服務公開其核心功能。</span><span class="sxs-lookup"><span data-stu-id="50597-138">In addition, the ESB implements and exposes its core functionality in a services-oriented manner, including to external applications through a set of core Web services.</span></span>  
  
 <span data-ttu-id="50597-139">這鬆散耦合方法設計 BizTalk Server 和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]-應用程式它會產生彈性極高的解決方案，而且已經成為業界接受的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="50597-139">This loosely coupled approach to designing BizTalk Server and [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]-based applications yields highly flexible solutions and has become an industry-accepted best practice.</span></span>